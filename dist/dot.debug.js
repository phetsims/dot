(function() {

window.phet=window.phet||{}
;
  if ( !window.hasOwnProperty( '_' ) ) {
    throw new Error( 'Underscore/Lodash not found: _' );
  }
// Copyright 2013-2022, University of Colorado Boulder

/*
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

( function() {


  window.assertions = window.assertions || {};
  window.assertions.assertFunction = window.assertions.assertFunction || function( predicate, ...messages ) {
    if ( !predicate ) {

      // don't treat falsey as a message.
      messages = messages.filter( message => !!messages );

      // Log the stack trace to IE.  Just creating an Error is not enough, it has to be caught to get a stack.
      if ( window.navigator && window.navigator.appName === 'Microsoft Internet Explorer' ) {
        messages.push( `stack=\n${new Error().stack}` );
      }

      // Add "Assertion Failed" to the front of the message list
      const assertPrefix = messages.length > 0 ? 'Assertion failed: ' : 'Assertion failed';
      console && console.log && console.log( assertPrefix, ...messages );
      if ( window.phet && phet.chipper && phet.chipper.queryParameters && phet.chipper.queryParameters.debugger ) {
        debugger; // eslint-disable-line no-debugger
      }
      throw new Error( assertPrefix + messages.join( '\n ' ) );
    }
  };

  window.assert = window.assert || null;
  window.assertSlow = window.assertSlow || null;

  window.assertions.enableAssert = function() {
    window.assert = window.assertions.assertFunction;
    window.console && window.console.log && window.console.log( 'enabling assert' );
  };
  window.assertions.disableAssert = function() {
    window.assert = null;
    window.console && window.console.log && window.console.log( 'disabling assert' );
  };

  window.assertions.enableAssertSlow = function() {
    window.assertSlow = window.assertions.assertFunction;
    window.console && window.console.log && window.console.log( 'enabling assertSlow' );
  };
  window.assertions.disableAssertSlow = function() {
    window.assertSlow = null;
    window.console && window.console.log && window.console.log( 'disabling assertSlow' );
  };
} )();

// Copyright 2017-2022, University of Colorado Boulder

/**
 * Utilities for creating and manipulating the unique identifiers assigned to instrumented PhET-iO instances, aka
 * phetioIDs.
 *
 * Many of these functions' jsdoc is rendered and visible publicly to PhET-iO client. Those sections should be
 * marked, see top level comment in Client.js about private vs public documentation
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Sam Reid (PhET Interactive Simulations)
 */
( function() {
  

  // define the phetio global
  window.phetio = window.phetio || {};

  // constants
  const SEPARATOR = '.';
  const GROUP_SEPARATOR = '_';
  const INTER_TERM_SEPARATOR = '-';
  const GENERAL_COMPONENT_NAME = 'general';
  const GLOBAL_COMPONENT_NAME = 'global';
  const HOME_SCREEN_COMPONENT_NAME = 'homeScreen';
  const MODEL_COMPONENT_NAME = 'model';
  const VIEW_COMPONENT_NAME = 'view';
  const COLORS_COMPONENT_NAME = 'colors';
  const CONTROLLER_COMPONENT_NAME = 'controller';
  const SCREEN_COMPONENT_NAME = 'Screen';

  /**
   * Helpful methods for manipulating phetioIDs. Used to minimize the amount of duplicated logic specific to the string
   * structure of the phetioID. Available in the main PhET-iO js import.
   * @namespace
   */
  window.phetio.PhetioIDUtils = {

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * Appends a component to an existing phetioID to create a new unique phetioID for the component.
     * @example
     * append( 'myScreen.myControlPanel', 'myComboBox' )
     * -->  'myScreen.myControlPanel.myComboBox'
     * @public
     * @param {string} phetioID - the ID of the PhET-iO element
     * @param {string|string[]} componentNames - the name or list of names to append to the ID
     * @returns {string} - the appended phetioID
     */
    append: function( phetioID, ...componentNames ) {
      componentNames.forEach( componentName => {
        assert && assert( componentName.indexOf( SEPARATOR ) === -1, `separator appears in componentName: ${componentName}` );
        phetioID += SEPARATOR + componentName;
      } );
      return phetioID;
    },

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * Given a phetioID for a PhET-iO element, get the part of that ID that pertains to the component (basically the
     * tail piece).
     * @example
     * getComponentName( 'myScreen.myControlPanel.myComboBox' )
     * -->  'myComboBox'
     * @public
     * @param {string} phetioID - the ID of the PhET-iO element
     * @returns {string} - the component name
     */
    getComponentName: function( phetioID ) {
      assert && assert( phetioID.length > 0 );
      const indexOfLastSeparator = phetioID.lastIndexOf( SEPARATOR );
      if ( indexOfLastSeparator === -1 ) {
        return phetioID;
      }
      else {
        return phetioID.substring( indexOfLastSeparator + 1, phetioID.length );
      }
    },

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * Given a phetioID for a PhET-iO element, get the phetioID of the parent component.
     * @example
     * getParentID( 'myScreen.myControlPanel.myComboBox' )
     * -->  'myScreen.myControlPanel'
     * @public
     * @param {string} phetioID - the ID of the PhET-iO element
     * @returns {string|null} - the phetioID of the parent, or null if there is no parent
     */
    getParentID: function( phetioID ) {
      const indexOfLastSeparator = phetioID.lastIndexOf( SEPARATOR );
      return indexOfLastSeparator === -1 ? null : phetioID.substring( 0, indexOfLastSeparator );
    },

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * Given a phetioID for a instrumented object, get a string that can be used to assign an ID to a DOM element
     * @param {string} phetioID - the ID of the PhET-iO element
     * @returns {string}
     * @public
     */
    getDOMElementID: function( phetioID ) {
      return `phetioID:${phetioID}`;
    },

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * Get the screen id from the phetioID.
     * @example
     * getScreenID( 'sim.myScreen.model.property' )
     * --> sim.myScreen
     * getScreenID( 'sim.myScreen' )
     * --> sim.myScreen
     * getScreenID( 'sim.general.activeProperty' )
     * --> null
     * @param {string} phetioID
     * @returns {string|null} - null if there is no screen component name in the phetioID
     */
    getScreenID: function( phetioID ) {
      const screenIDParts = [];
      const phetioIDParts = phetioID.split( SEPARATOR );
      for ( let i = 0; i < phetioIDParts.length; i++ ) {
        const componentPart = phetioIDParts[ i ];
        screenIDParts.push( componentPart );
        const indexOfScreenMarker = componentPart.indexOf( SCREEN_COMPONENT_NAME );
        if ( indexOfScreenMarker > 0 && indexOfScreenMarker + SCREEN_COMPONENT_NAME.length === componentPart.length ) { // endsWith proxy
          return screenIDParts.join( SEPARATOR );
        }
      }
      return null;
    },

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * Get the index number from the component name of the component name provided.
     * @param {string} componentName
     * @returns {number}
     * @example
     * getGroupElementIndex( 'particle_1' )
     * --> 1
     * @public
     */
    getGroupElementIndex: function( componentName ) {
      assert && assert( componentName.indexOf( window.phetio.PhetioIDUtils.GROUP_SEPARATOR ) >= 0,
        'component name for phetioID should have group element syntax' );
      return Number( componentName.split( window.phetio.PhetioIDUtils.GROUP_SEPARATOR )[ 1 ] );
    },

    /**
     * Returns true if the potential ancestor is indeed an ancestor of the potential descendant, but not the same phetioID
     * @param {string} potentialAncestorPhetioID
     * @param {string} potentialDescendantPhetioID
     * @returns {boolean}
     * @public
     */
    isAncestor: function( potentialAncestorPhetioID, potentialDescendantPhetioID ) {
      const ancestorComponents = potentialAncestorPhetioID.split( SEPARATOR );
      const descendantComponents = potentialDescendantPhetioID.split( SEPARATOR );
      for ( let i = 0; i < ancestorComponents.length; i++ ) {
        if ( ancestorComponents[ i ] !== descendantComponents[ i ] ) {
          return false;
        }
      }

      // not the same child
      return potentialDescendantPhetioID !== potentialAncestorPhetioID;
    },

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The separator used to piece together a phet-io ID.
     * @type {string}
     * @constant
     * @public
     */
    SEPARATOR: SEPARATOR,

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The separator used to specify the count of a element in a group.
     * @type {string}
     * @constant
     * @public
     */
    GROUP_SEPARATOR: GROUP_SEPARATOR,

    /**
     * The separator used to specify terms in a phetioID that is used by another phetioID. For example:
     *
     * sim.general.view.sim-global-otherID
     *
     * @type {string}
     * @constant
     * @public
     */
    INTER_TERM_SEPARATOR: INTER_TERM_SEPARATOR,

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The component name for the id section that holds phet-io elements general to all simulations.
     * @type {string}
     * @constant
     * @public
     */
    GENERAL_COMPONENT_NAME: GENERAL_COMPONENT_NAME,

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The component name for the id section that holds simulation specific elements that don't belong in a screen.
     * @type {string}
     * @constant
     * @public
     */
    GLOBAL_COMPONENT_NAME: GLOBAL_COMPONENT_NAME,

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The component name for the id section that holds the home screen.
     * @type {string}
     * @constant
     * @public
     */
    HOME_SCREEN_COMPONENT_NAME: HOME_SCREEN_COMPONENT_NAME,

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The component name for an id section that holds model specific elements.
     * @type {string}
     * @constant
     * @public
     */
    MODEL_COMPONENT_NAME: MODEL_COMPONENT_NAME,

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The component name for an id section that holds view specific elements.
     * @type {string}
     * @constant
     * @public
     */
    VIEW_COMPONENT_NAME: VIEW_COMPONENT_NAME,

    // Private Doc: The below jsdoc is public to the PhET-iO API documentation. Change wisely.
    /**
     * The component name for an id section that holds controller specific elements.
     * @type {string}
     * @constant
     * @public
     */
    CONTROLLER_COMPONENT_NAME: CONTROLLER_COMPONENT_NAME,

    /**
     * The component name for a section that holds colors
     * @type {string}
     * @constant
     * @public
     */
    COLORS_COMPONENT_NAME: COLORS_COMPONENT_NAME
  };
} )();
window.assertions.enableAssert();

/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ 897:
/***/ ((module, __webpack_exports__, __webpack_require__) => {

/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "Z": () => (__WEBPACK_DEFAULT_EXPORT__)
/* harmony export */ });
/* module decorator */ module = __webpack_require__.hmd(module);
// Copyright 2020, University of Colorado Boulder

/**
 * Hot module replacement (HMR) enables reloading and replacing a single module within a running, stateful application.
 * The general pattern is to listen for a module replacement and re-run downstream code that uses the module.
 * For example:
 *
 *  // In a constructor
 *  const initializeWavesNode = () => {
 *   this.wavesNode && this.removeChild( this.wavesNode );
 *   this.wavesNode = new WavesNode( model, this.layoutBounds );
 *   this.addChild( this.wavesNode );
 *  };
 *
 *  initializeWavesNode();
 *
 * // Enable hot module replacement for fast iteration
 * isHMR && module.hot.accept( './WavesNode.js', initializeWavesNode );
 *
 * This can be used in concert with `grunt webpack-dev-server` from a simulation directory to launch a server that
 * supports hot module replacement.
 *
 * Note that when using HMR with a model module, you must pass re-instantiated model elements to corresponding view
 * elements, which can be prohibitively difficult. On the other hand, using HMR on a view can be simpler because often a
 * view element only needs to be swapped out in one place (say, replacing a node). Likewise, using HMR for static or
 * utility functions/modules works very well, since no instances need to be swapped out.
 *
 * When running with webpack-dev-server, a global "module" exists, but window.module does not.  In unbuilt mode,
 * neither "module" nor window.module exist.  This code factors out the check for the global "module".
 *
 * Since this code relies on a try/catch block, you probably should blackbox it in chrome dev tools, see
 * https://developer.chrome.com/devtools/docs/blackboxing#how-to-blackbox
 *
 * TODO: Make sure this gets stripped out on builds, see https://github.com/phetsims/chipper/issues/953
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */

let isHMR;
try {
  isHMR = module && module.hot;
} catch (e) {
  isHMR = false;
}

// Not namespaced because Namespace relies on this file

/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (isHMR);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc0hNUiIsIm1vZHVsZSIsImhvdCIsImUiXSwic291cmNlcyI6WyJpc0hNUi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogSG90IG1vZHVsZSByZXBsYWNlbWVudCAoSE1SKSBlbmFibGVzIHJlbG9hZGluZyBhbmQgcmVwbGFjaW5nIGEgc2luZ2xlIG1vZHVsZSB3aXRoaW4gYSBydW5uaW5nLCBzdGF0ZWZ1bCBhcHBsaWNhdGlvbi5cbiAqIFRoZSBnZW5lcmFsIHBhdHRlcm4gaXMgdG8gbGlzdGVuIGZvciBhIG1vZHVsZSByZXBsYWNlbWVudCBhbmQgcmUtcnVuIGRvd25zdHJlYW0gY29kZSB0aGF0IHVzZXMgdGhlIG1vZHVsZS5cbiAqIEZvciBleGFtcGxlOlxuICpcbiAqICAvLyBJbiBhIGNvbnN0cnVjdG9yXG4gKiAgY29uc3QgaW5pdGlhbGl6ZVdhdmVzTm9kZSA9ICgpID0+IHtcbiAqICAgdGhpcy53YXZlc05vZGUgJiYgdGhpcy5yZW1vdmVDaGlsZCggdGhpcy53YXZlc05vZGUgKTtcbiAqICAgdGhpcy53YXZlc05vZGUgPSBuZXcgV2F2ZXNOb2RlKCBtb2RlbCwgdGhpcy5sYXlvdXRCb3VuZHMgKTtcbiAqICAgdGhpcy5hZGRDaGlsZCggdGhpcy53YXZlc05vZGUgKTtcbiAqICB9O1xuICpcbiAqICBpbml0aWFsaXplV2F2ZXNOb2RlKCk7XG4gKlxuICogLy8gRW5hYmxlIGhvdCBtb2R1bGUgcmVwbGFjZW1lbnQgZm9yIGZhc3QgaXRlcmF0aW9uXG4gKiBpc0hNUiAmJiBtb2R1bGUuaG90LmFjY2VwdCggJy4vV2F2ZXNOb2RlLmpzJywgaW5pdGlhbGl6ZVdhdmVzTm9kZSApO1xuICpcbiAqIFRoaXMgY2FuIGJlIHVzZWQgaW4gY29uY2VydCB3aXRoIGBncnVudCB3ZWJwYWNrLWRldi1zZXJ2ZXJgIGZyb20gYSBzaW11bGF0aW9uIGRpcmVjdG9yeSB0byBsYXVuY2ggYSBzZXJ2ZXIgdGhhdFxuICogc3VwcG9ydHMgaG90IG1vZHVsZSByZXBsYWNlbWVudC5cbiAqXG4gKiBOb3RlIHRoYXQgd2hlbiB1c2luZyBITVIgd2l0aCBhIG1vZGVsIG1vZHVsZSwgeW91IG11c3QgcGFzcyByZS1pbnN0YW50aWF0ZWQgbW9kZWwgZWxlbWVudHMgdG8gY29ycmVzcG9uZGluZyB2aWV3XG4gKiBlbGVtZW50cywgd2hpY2ggY2FuIGJlIHByb2hpYml0aXZlbHkgZGlmZmljdWx0LiBPbiB0aGUgb3RoZXIgaGFuZCwgdXNpbmcgSE1SIG9uIGEgdmlldyBjYW4gYmUgc2ltcGxlciBiZWNhdXNlIG9mdGVuIGFcbiAqIHZpZXcgZWxlbWVudCBvbmx5IG5lZWRzIHRvIGJlIHN3YXBwZWQgb3V0IGluIG9uZSBwbGFjZSAoc2F5LCByZXBsYWNpbmcgYSBub2RlKS4gTGlrZXdpc2UsIHVzaW5nIEhNUiBmb3Igc3RhdGljIG9yXG4gKiB1dGlsaXR5IGZ1bmN0aW9ucy9tb2R1bGVzIHdvcmtzIHZlcnkgd2VsbCwgc2luY2Ugbm8gaW5zdGFuY2VzIG5lZWQgdG8gYmUgc3dhcHBlZCBvdXQuXG4gKlxuICogV2hlbiBydW5uaW5nIHdpdGggd2VicGFjay1kZXYtc2VydmVyLCBhIGdsb2JhbCBcIm1vZHVsZVwiIGV4aXN0cywgYnV0IHdpbmRvdy5tb2R1bGUgZG9lcyBub3QuICBJbiB1bmJ1aWx0IG1vZGUsXG4gKiBuZWl0aGVyIFwibW9kdWxlXCIgbm9yIHdpbmRvdy5tb2R1bGUgZXhpc3QuICBUaGlzIGNvZGUgZmFjdG9ycyBvdXQgdGhlIGNoZWNrIGZvciB0aGUgZ2xvYmFsIFwibW9kdWxlXCIuXG4gKlxuICogU2luY2UgdGhpcyBjb2RlIHJlbGllcyBvbiBhIHRyeS9jYXRjaCBibG9jaywgeW91IHByb2JhYmx5IHNob3VsZCBibGFja2JveCBpdCBpbiBjaHJvbWUgZGV2IHRvb2xzLCBzZWVcbiAqIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9ibGFja2JveGluZyNob3ctdG8tYmxhY2tib3hcbiAqXG4gKiBUT0RPOiBNYWtlIHN1cmUgdGhpcyBnZXRzIHN0cmlwcGVkIG91dCBvbiBidWlsZHMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2hpcHBlci9pc3N1ZXMvOTUzXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5sZXQgaXNITVI7XG5cbnRyeSB7XG4gIGlzSE1SID0gbW9kdWxlICYmIG1vZHVsZS5ob3Q7XG59XG5jYXRjaCggZSApIHtcbiAgaXNITVIgPSBmYWxzZTtcbn1cblxuLy8gTm90IG5hbWVzcGFjZWQgYmVjYXVzZSBOYW1lc3BhY2UgcmVsaWVzIG9uIHRoaXMgZmlsZVxuXG5leHBvcnQgZGVmYXVsdCBpc0hNUjsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSUEsS0FBSztBQUVULElBQUk7RUFDRkEsS0FBSyxHQUFHQyxNQUFNLElBQUlBLE1BQU0sQ0FBQ0MsR0FBRztBQUM5QixDQUFDLENBQ0QsT0FBT0MsQ0FBQyxFQUFHO0VBQ1RILEtBQUssR0FBRyxLQUFLO0FBQ2Y7O0FBRUE7O0FBRUEsZUFBZUEsS0FBSyJ9

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			id: moduleId,
/******/ 			loaded: false,
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/harmony module decorator */
/******/ 	(() => {
/******/ 		__webpack_require__.hmd = (module) => {
/******/ 			module = Object.create(module);
/******/ 			if (!module.children) module.children = [];
/******/ 			Object.defineProperty(module, 'exports', {
/******/ 				enumerable: true,
/******/ 				set: () => {
/******/ 					throw new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);
/******/ 				}
/******/ 			});
/******/ 			return module;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {

// EXTERNAL MODULE: ../chipper/dist/js/phet-core/js/isHMR.js
var isHMR = __webpack_require__(897);
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/Namespace.js
// Copyright 2015-2023, University of Colorado Boulder

/**
 * @author Jonathan Olson
 * @author Chris Malley (PixelZoom, Inc.)
 */


class Namespace {
  /**
   * @param {string} name
   */
  constructor(name) {
    this.name = name; // @public (read-only)

    if (window.phet) {
      // We already create the chipper namespace, so we just attach to it with the register function.
      if (name === 'chipper') {
        window.phet.chipper.name = 'chipper';
        window.phet.chipper.register = this.register.bind(window.phet.chipper);
        return window.phet.chipper; // eslint-disable-line -- we want to provide the namespace API on something already existing
      } else {
        /* TODO: Ideally we should always assert this, but in PhET-iO wrapper code, multiple built modules define the
           TODO: same namespace, this should be fixed in https://github.com/phetsims/phet-io-wrappers/issues/477 */
        const ignoreAssertion = !_.hasIn(window, 'phet.chipper.brand');
        assert && !ignoreAssertion && assert(!window.phet[name], `namespace ${name} already exists`);
        window.phet[name] = this;
      }
    }
  }

  /**
   * Registers a key-value pair with the namespace.
   *
   * If there are no dots ('.') in the key, it will be assigned to the namespace. For example:
   * - x.register( 'A', A );
   * will set x.A = A.
   *
   * If the key contains one or more dots ('.'), it's treated somewhat like a path expression. For instance, if the
   * following is called:
   * - x.register( 'A.B.C', C );
   * then the register function will navigate to the object x.A.B and add x.A.B.C = C.
   *
   * @param {string} key
   * @param {*} value
   * @returns {*} value, for chaining
   * @public
   */
  register(key, value) {
    // When using hot module replacement, a module will be loaded and initialized twice, and hence its namespace.register
    // function will be called twice.  This should not be an assertion error.

    // If the key isn't compound (doesn't contain '.'), we can just look it up on this namespace
    if (key.indexOf('.') < 0) {
      if (!isHMR/* default */.Z) {
        assert && assert(!this[key], `${key} is already registered for namespace ${this.name}`);
      }
      this[key] = value;
    }
    // Compound (contains '.' at least once). x.register( 'A.B.C', C ) should set x.A.B.C.
    else {
      const keys = key.split('.'); // e.g. [ 'A', 'B', 'C' ]

      // Walk into the namespace, verifying that each level exists. e.g. parent => x.A.B
      let parent = this; // eslint-disable-line consistent-this
      for (let i = 0; i < keys.length - 1; i++) {
        // for all but the last key

        if (!isHMR/* default */.Z) {
          assert && assert(!!parent[keys[i]], `${[this.name].concat(keys.slice(0, i + 1)).join('.')} needs to be defined to register ${key}`);
        }
        parent = parent[keys[i]];
      }

      // Write into the inner namespace, e.g. x.A.B[ 'C' ] = C
      const lastKey = keys[keys.length - 1];
      if (!isHMR/* default */.Z) {
        assert && assert(!parent[lastKey], `${key} is already registered for namespace ${this.name}`);
      }
      parent[lastKey] = value;
    }
    return value;
  }
}
/* harmony default export */ const js_Namespace = (Namespace);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc0hNUiIsIk5hbWVzcGFjZSIsImNvbnN0cnVjdG9yIiwibmFtZSIsIndpbmRvdyIsInBoZXQiLCJjaGlwcGVyIiwicmVnaXN0ZXIiLCJiaW5kIiwiaWdub3JlQXNzZXJ0aW9uIiwiXyIsImhhc0luIiwiYXNzZXJ0Iiwia2V5IiwidmFsdWUiLCJpbmRleE9mIiwia2V5cyIsInNwbGl0IiwicGFyZW50IiwiaSIsImxlbmd0aCIsImNvbmNhdCIsInNsaWNlIiwiam9pbiIsImxhc3RLZXkiXSwic291cmNlcyI6WyJOYW1lc3BhY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvblxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcbiAqL1xuXG5pbXBvcnQgaXNITVIgZnJvbSAnLi9pc0hNUi5qcyc7XG5cbmNsYXNzIE5hbWVzcGFjZSB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge3N0cmluZ30gbmFtZVxuICAgKi9cbiAgY29uc3RydWN0b3IoIG5hbWUgKSB7XG5cbiAgICB0aGlzLm5hbWUgPSBuYW1lOyAvLyBAcHVibGljIChyZWFkLW9ubHkpXG5cbiAgICBpZiAoIHdpbmRvdy5waGV0ICkge1xuICAgICAgLy8gV2UgYWxyZWFkeSBjcmVhdGUgdGhlIGNoaXBwZXIgbmFtZXNwYWNlLCBzbyB3ZSBqdXN0IGF0dGFjaCB0byBpdCB3aXRoIHRoZSByZWdpc3RlciBmdW5jdGlvbi5cbiAgICAgIGlmICggbmFtZSA9PT0gJ2NoaXBwZXInICkge1xuICAgICAgICB3aW5kb3cucGhldC5jaGlwcGVyLm5hbWUgPSAnY2hpcHBlcic7XG4gICAgICAgIHdpbmRvdy5waGV0LmNoaXBwZXIucmVnaXN0ZXIgPSB0aGlzLnJlZ2lzdGVyLmJpbmQoIHdpbmRvdy5waGV0LmNoaXBwZXIgKTtcbiAgICAgICAgcmV0dXJuIHdpbmRvdy5waGV0LmNoaXBwZXI7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgLS0gd2Ugd2FudCB0byBwcm92aWRlIHRoZSBuYW1lc3BhY2UgQVBJIG9uIHNvbWV0aGluZyBhbHJlYWR5IGV4aXN0aW5nXG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgLyogVE9ETzogSWRlYWxseSB3ZSBzaG91bGQgYWx3YXlzIGFzc2VydCB0aGlzLCBidXQgaW4gUGhFVC1pTyB3cmFwcGVyIGNvZGUsIG11bHRpcGxlIGJ1aWx0IG1vZHVsZXMgZGVmaW5lIHRoZVxuICAgICAgICAgICBUT0RPOiBzYW1lIG5hbWVzcGFjZSwgdGhpcyBzaG91bGQgYmUgZml4ZWQgaW4gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8td3JhcHBlcnMvaXNzdWVzLzQ3NyAqL1xuICAgICAgICBjb25zdCBpZ25vcmVBc3NlcnRpb24gPSAhXy5oYXNJbiggd2luZG93LCAncGhldC5jaGlwcGVyLmJyYW5kJyApO1xuICAgICAgICBhc3NlcnQgJiYgIWlnbm9yZUFzc2VydGlvbiAmJiBhc3NlcnQoICF3aW5kb3cucGhldFsgbmFtZSBdLCBgbmFtZXNwYWNlICR7bmFtZX0gYWxyZWFkeSBleGlzdHNgICk7XG4gICAgICAgIHdpbmRvdy5waGV0WyBuYW1lIF0gPSB0aGlzO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlcnMgYSBrZXktdmFsdWUgcGFpciB3aXRoIHRoZSBuYW1lc3BhY2UuXG4gICAqXG4gICAqIElmIHRoZXJlIGFyZSBubyBkb3RzICgnLicpIGluIHRoZSBrZXksIGl0IHdpbGwgYmUgYXNzaWduZWQgdG8gdGhlIG5hbWVzcGFjZS4gRm9yIGV4YW1wbGU6XG4gICAqIC0geC5yZWdpc3RlciggJ0EnLCBBICk7XG4gICAqIHdpbGwgc2V0IHguQSA9IEEuXG4gICAqXG4gICAqIElmIHRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgZG90cyAoJy4nKSwgaXQncyB0cmVhdGVkIHNvbWV3aGF0IGxpa2UgYSBwYXRoIGV4cHJlc3Npb24uIEZvciBpbnN0YW5jZSwgaWYgdGhlXG4gICAqIGZvbGxvd2luZyBpcyBjYWxsZWQ6XG4gICAqIC0geC5yZWdpc3RlciggJ0EuQi5DJywgQyApO1xuICAgKiB0aGVuIHRoZSByZWdpc3RlciBmdW5jdGlvbiB3aWxsIG5hdmlnYXRlIHRvIHRoZSBvYmplY3QgeC5BLkIgYW5kIGFkZCB4LkEuQi5DID0gQy5cbiAgICpcbiAgICogQHBhcmFtIHtzdHJpbmd9IGtleVxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEByZXR1cm5zIHsqfSB2YWx1ZSwgZm9yIGNoYWluaW5nXG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHJlZ2lzdGVyKCBrZXksIHZhbHVlICkge1xuXG4gICAgLy8gV2hlbiB1c2luZyBob3QgbW9kdWxlIHJlcGxhY2VtZW50LCBhIG1vZHVsZSB3aWxsIGJlIGxvYWRlZCBhbmQgaW5pdGlhbGl6ZWQgdHdpY2UsIGFuZCBoZW5jZSBpdHMgbmFtZXNwYWNlLnJlZ2lzdGVyXG4gICAgLy8gZnVuY3Rpb24gd2lsbCBiZSBjYWxsZWQgdHdpY2UuICBUaGlzIHNob3VsZCBub3QgYmUgYW4gYXNzZXJ0aW9uIGVycm9yLlxuXG4gICAgLy8gSWYgdGhlIGtleSBpc24ndCBjb21wb3VuZCAoZG9lc24ndCBjb250YWluICcuJyksIHdlIGNhbiBqdXN0IGxvb2sgaXQgdXAgb24gdGhpcyBuYW1lc3BhY2VcbiAgICBpZiAoIGtleS5pbmRleE9mKCAnLicgKSA8IDAgKSB7XG4gICAgICBpZiAoICFpc0hNUiApIHtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXNbIGtleSBdLCBgJHtrZXl9IGlzIGFscmVhZHkgcmVnaXN0ZXJlZCBmb3IgbmFtZXNwYWNlICR7dGhpcy5uYW1lfWAgKTtcbiAgICAgIH1cbiAgICAgIHRoaXNbIGtleSBdID0gdmFsdWU7XG4gICAgfVxuICAgIC8vIENvbXBvdW5kIChjb250YWlucyAnLicgYXQgbGVhc3Qgb25jZSkuIHgucmVnaXN0ZXIoICdBLkIuQycsIEMgKSBzaG91bGQgc2V0IHguQS5CLkMuXG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBrZXlzID0ga2V5LnNwbGl0KCAnLicgKTsgLy8gZS5nLiBbICdBJywgJ0InLCAnQycgXVxuXG4gICAgICAvLyBXYWxrIGludG8gdGhlIG5hbWVzcGFjZSwgdmVyaWZ5aW5nIHRoYXQgZWFjaCBsZXZlbCBleGlzdHMuIGUuZy4gcGFyZW50ID0+IHguQS5CXG4gICAgICBsZXQgcGFyZW50ID0gdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXRoaXNcbiAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoIC0gMTsgaSsrICkgeyAvLyBmb3IgYWxsIGJ1dCB0aGUgbGFzdCBrZXlcblxuICAgICAgICBpZiAoICFpc0hNUiApIHtcbiAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhIXBhcmVudFsga2V5c1sgaSBdIF0sXG4gICAgICAgICAgICBgJHtbIHRoaXMubmFtZSBdLmNvbmNhdCgga2V5cy5zbGljZSggMCwgaSArIDEgKSApLmpvaW4oICcuJyApfSBuZWVkcyB0byBiZSBkZWZpbmVkIHRvIHJlZ2lzdGVyICR7a2V5fWAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHBhcmVudCA9IHBhcmVudFsga2V5c1sgaSBdIF07XG4gICAgICB9XG5cbiAgICAgIC8vIFdyaXRlIGludG8gdGhlIGlubmVyIG5hbWVzcGFjZSwgZS5nLiB4LkEuQlsgJ0MnIF0gPSBDXG4gICAgICBjb25zdCBsYXN0S2V5ID0ga2V5c1sga2V5cy5sZW5ndGggLSAxIF07XG5cbiAgICAgIGlmICggIWlzSE1SICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhcGFyZW50WyBsYXN0S2V5IF0sIGAke2tleX0gaXMgYWxyZWFkeSByZWdpc3RlcmVkIGZvciBuYW1lc3BhY2UgJHt0aGlzLm5hbWV9YCApO1xuICAgICAgfVxuXG4gICAgICBwYXJlbnRbIGxhc3RLZXkgXSA9IHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBOYW1lc3BhY2U7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxLQUFLLE1BQU0sWUFBWTtBQUU5QixNQUFNQyxTQUFTLENBQUM7RUFDZDtBQUNGO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsSUFBSSxFQUFHO0lBRWxCLElBQUksQ0FBQ0EsSUFBSSxHQUFHQSxJQUFJLENBQUMsQ0FBQzs7SUFFbEIsSUFBS0MsTUFBTSxDQUFDQyxJQUFJLEVBQUc7TUFDakI7TUFDQSxJQUFLRixJQUFJLEtBQUssU0FBUyxFQUFHO1FBQ3hCQyxNQUFNLENBQUNDLElBQUksQ0FBQ0MsT0FBTyxDQUFDSCxJQUFJLEdBQUcsU0FBUztRQUNwQ0MsTUFBTSxDQUFDQyxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsUUFBUSxHQUFHLElBQUksQ0FBQ0EsUUFBUSxDQUFDQyxJQUFJLENBQUVKLE1BQU0sQ0FBQ0MsSUFBSSxDQUFDQyxPQUFPLENBQUU7UUFDeEUsT0FBT0YsTUFBTSxDQUFDQyxJQUFJLENBQUNDLE9BQU8sQ0FBQyxDQUFDO01BQzlCLENBQUMsTUFDSTtRQUNIO0FBQ1I7UUFDUSxNQUFNRyxlQUFlLEdBQUcsQ0FBQ0MsQ0FBQyxDQUFDQyxLQUFLLENBQUVQLE1BQU0sRUFBRSxvQkFBb0IsQ0FBRTtRQUNoRVEsTUFBTSxJQUFJLENBQUNILGVBQWUsSUFBSUcsTUFBTSxDQUFFLENBQUNSLE1BQU0sQ0FBQ0MsSUFBSSxDQUFFRixJQUFJLENBQUUsRUFBRyxhQUFZQSxJQUFLLGlCQUFnQixDQUFFO1FBQ2hHQyxNQUFNLENBQUNDLElBQUksQ0FBRUYsSUFBSSxDQUFFLEdBQUcsSUFBSTtNQUM1QjtJQUNGO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFSSxRQUFRQSxDQUFFTSxHQUFHLEVBQUVDLEtBQUssRUFBRztJQUVyQjtJQUNBOztJQUVBO0lBQ0EsSUFBS0QsR0FBRyxDQUFDRSxPQUFPLENBQUUsR0FBRyxDQUFFLEdBQUcsQ0FBQyxFQUFHO01BQzVCLElBQUssQ0FBQ2YsS0FBSyxFQUFHO1FBQ1pZLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUMsSUFBSSxDQUFFQyxHQUFHLENBQUUsRUFBRyxHQUFFQSxHQUFJLHdDQUF1QyxJQUFJLENBQUNWLElBQUssRUFBQyxDQUFFO01BQzdGO01BQ0EsSUFBSSxDQUFFVSxHQUFHLENBQUUsR0FBR0MsS0FBSztJQUNyQjtJQUNBO0lBQUEsS0FDSztNQUNILE1BQU1FLElBQUksR0FBR0gsR0FBRyxDQUFDSSxLQUFLLENBQUUsR0FBRyxDQUFFLENBQUMsQ0FBQzs7TUFFL0I7TUFDQSxJQUFJQyxNQUFNLEdBQUcsSUFBSSxDQUFDLENBQUM7TUFDbkIsS0FBTSxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdILElBQUksQ0FBQ0ksTUFBTSxHQUFHLENBQUMsRUFBRUQsQ0FBQyxFQUFFLEVBQUc7UUFBRTs7UUFFNUMsSUFBSyxDQUFDbkIsS0FBSyxFQUFHO1VBQ1pZLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUMsQ0FBQ00sTUFBTSxDQUFFRixJQUFJLENBQUVHLENBQUMsQ0FBRSxDQUFFLEVBQ3BDLEdBQUUsQ0FBRSxJQUFJLENBQUNoQixJQUFJLENBQUUsQ0FBQ2tCLE1BQU0sQ0FBRUwsSUFBSSxDQUFDTSxLQUFLLENBQUUsQ0FBQyxFQUFFSCxDQUFDLEdBQUcsQ0FBQyxDQUFFLENBQUUsQ0FBQ0ksSUFBSSxDQUFFLEdBQUcsQ0FBRyxvQ0FBbUNWLEdBQUksRUFBQyxDQUFFO1FBQzVHO1FBRUFLLE1BQU0sR0FBR0EsTUFBTSxDQUFFRixJQUFJLENBQUVHLENBQUMsQ0FBRSxDQUFFO01BQzlCOztNQUVBO01BQ0EsTUFBTUssT0FBTyxHQUFHUixJQUFJLENBQUVBLElBQUksQ0FBQ0ksTUFBTSxHQUFHLENBQUMsQ0FBRTtNQUV2QyxJQUFLLENBQUNwQixLQUFLLEVBQUc7UUFDWlksTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQ00sTUFBTSxDQUFFTSxPQUFPLENBQUUsRUFBRyxHQUFFWCxHQUFJLHdDQUF1QyxJQUFJLENBQUNWLElBQUssRUFBQyxDQUFFO01BQ25HO01BRUFlLE1BQU0sQ0FBRU0sT0FBTyxDQUFFLEdBQUdWLEtBQUs7SUFDM0I7SUFFQSxPQUFPQSxLQUFLO0VBQ2Q7QUFDRjtBQUVBLGVBQWViLFNBQVMifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/axon.js
// Copyright 2013-2022, University of Colorado Boulder


/* harmony default export */ const js_axon = (new js_Namespace('axon'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOYW1lc3BhY2UiXSwic291cmNlcyI6WyJheG9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG5cbmltcG9ydCBOYW1lc3BhY2UgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL05hbWVzcGFjZS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBOYW1lc3BhY2UoICdheG9uJyApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBR0EsT0FBT0EsU0FBUyxNQUFNLGlDQUFpQztBQUV2RCxlQUFlLElBQUlBLFNBQVMsQ0FBRSxNQUFNLENBQUUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/TinyEmitter.js
// Copyright 2015-2023, University of Colorado Boulder

/**
 * Lightweight event & listener abstraction for a single event type.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */


// constants
const shuffleListeners = _.hasIn(window, 'phet.chipper.queryParameters') && phet.chipper.queryParameters.shuffleListeners;
// Store the number of listeners from the single TinyEmitter instance that has the most listeners in the whole runtime.
let maxListenerCount = 0;
class TinyEmitter {
  // Not defined usually because of memory usage. If defined, this will be called when the listener count changes,
  // e.g. changeCount( {number} listenersAddedQuantity ), with the number being negative for listeners removed.

  // Only defined when assertions are enabled - to keep track if it has been disposed or not

  // If specified, this will be called before listeners are notified.

  // The listeners that will be called on emit

  // During emit() keep track of iteration progress and guard listeners if mutated during emit()

  constructor(onBeforeNotify) {
    if (onBeforeNotify) {
      this.onBeforeNotify = onBeforeNotify;
    }
    this.listeners = new Set();
    this.emitContexts = [];

    // for production memory concerns; no need to keep this around.
    if (assert) {
      this.isDisposed = false;
    }
  }

  /**
   * Disposes an Emitter. All listeners are removed.
   */
  dispose() {
    this.removeAllListeners();
    if (assert) {
      this.isDisposed = true;
    }
  }

  /**
   * Notify listeners
   */
  emit(...args) {
    assert && assert(!this.isDisposed, 'should not be called if disposed');

    // optional callback, before notifying listeners
    this.onBeforeNotify && this.onBeforeNotify.apply(null, args);

    // Support for a query parameter that shuffles listeners, but bury behind assert so it will be stripped out on build
    // so it won't impact production performance.
    if (assert && shuffleListeners) {
      this.listeners = new Set(_.shuffle(Array.from(this.listeners))); // eslint-disable-line bad-sim-text
    }

    // Notify wired-up listeners, if any
    if (this.listeners.size > 0) {
      const emitContext = {
        index: 0
        // listenerArray: [] // {Array.<function>|undefined} assigned if a mutation is made during emit
      };

      this.emitContexts.push(emitContext);
      for (const listener of this.listeners) {
        listener(...args);
        emitContext.index++;

        // If a listener was added or removed, we cannot continue processing the mutated Set, we must switch to
        // iterate over the guarded array
        if (emitContext.listenerArray) {
          break;
        }
      }

      // If the listeners were guarded during emit, we bailed out on the for..of and continue iterating over the original
      // listeners in order from where we left off.
      if (emitContext.listenerArray) {
        for (let i = emitContext.index; i < emitContext.listenerArray.length; i++) {
          emitContext.listenerArray[i](...args);
        }
      }
      this.emitContexts.pop();
    }
  }

  /**
   * Adds a listener which will be called during emit.
   */
  addListener(listener) {
    assert && assert(!this.isDisposed, 'Cannot add a listener to a disposed TinyEmitter');
    assert && assert(!this.hasListener(listener), 'Cannot add the same listener twice');

    // If a listener is added during an emit(), we must make a copy of the current list of listeners--the newly added
    // listener will be available for the next emit() but not the one in progress.  This is to match behavior with
    // removeListener.
    this.guardListeners();
    this.listeners.add(listener);
    this.changeCount && this.changeCount(1);
    if (assert && window.phet?.chipper?.queryParameters && isFinite(phet.chipper.queryParameters.listenerLimit)) {
      if (maxListenerCount < this.listeners.size) {
        maxListenerCount = this.listeners.size;
        console.log(`Max TinyEmitter listeners: ${maxListenerCount}`);
        assert(maxListenerCount <= phet.chipper.queryParameters.listenerLimit, `listener count of ${maxListenerCount} above ?listenerLimit=${phet.chipper.queryParameters.listenerLimit}`);
      }
    }
  }

  /**
   * Removes a listener
   */
  removeListener(listener) {
    // Throw an error when removing a non-listener (except when the Emitter has already been disposed, see
    // https://github.com/phetsims/sun/issues/394#issuecomment-419998231
    if (assert && !this.isDisposed) {
      assert(this.listeners.has(listener), 'tried to removeListener on something that wasn\'t a listener');
    }
    this.guardListeners();
    this.listeners.delete(listener);
    this.changeCount && this.changeCount(-1);
  }

  /**
   * Removes all the listeners
   */
  removeAllListeners() {
    const size = this.listeners.size;
    this.guardListeners();
    this.listeners.clear();
    this.changeCount && this.changeCount(-size);
  }

  /**
   * If listeners are added/removed while emit() is in progress, we must make a defensive copy of the array of listeners
   * before changing the array, and use it for the rest of the notifications until the emit call has completed.
   */
  guardListeners() {
    for (let i = this.emitContexts.length - 1; i >= 0; i--) {
      // Once we meet a level that was already guarded, we can stop, since all previous levels were already guarded
      if (this.emitContexts[i].listenerArray) {
        break;
      } else {
        // Mark copies as 'guarded' so that it will use the original listeners when emit started and not the modified
        // list.
        this.emitContexts[i].listenerArray = Array.from(this.listeners);
      }
    }
  }

  /**
   * Checks whether a listener is registered with this Emitter
   */
  hasListener(listener) {
    assert && assert(arguments.length === 1, 'Emitter.hasListener should be called with 1 argument');
    return this.listeners.has(listener);
  }

  /**
   * Returns true if there are any listeners.
   */
  hasListeners() {
    assert && assert(arguments.length === 0, 'Emitter.hasListeners should be called without arguments');
    return this.listeners.size > 0;
  }

  /**
   * Returns the number of listeners.
   */
  getListenerCount() {
    return this.listeners.size;
  }

  /**
   * Invokes a callback once for each listener - meant for Property's use
   */
  forEachListener(callback) {
    this.listeners.forEach(callback);
  }
}
js_axon.register('TinyEmitter', TinyEmitter);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwic2h1ZmZsZUxpc3RlbmVycyIsIl8iLCJoYXNJbiIsIndpbmRvdyIsInBoZXQiLCJjaGlwcGVyIiwicXVlcnlQYXJhbWV0ZXJzIiwibWF4TGlzdGVuZXJDb3VudCIsIlRpbnlFbWl0dGVyIiwiY29uc3RydWN0b3IiLCJvbkJlZm9yZU5vdGlmeSIsImxpc3RlbmVycyIsIlNldCIsImVtaXRDb250ZXh0cyIsImFzc2VydCIsImlzRGlzcG9zZWQiLCJkaXNwb3NlIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsImFyZ3MiLCJhcHBseSIsInNodWZmbGUiLCJBcnJheSIsImZyb20iLCJzaXplIiwiZW1pdENvbnRleHQiLCJpbmRleCIsInB1c2giLCJsaXN0ZW5lciIsImxpc3RlbmVyQXJyYXkiLCJpIiwibGVuZ3RoIiwicG9wIiwiYWRkTGlzdGVuZXIiLCJoYXNMaXN0ZW5lciIsImd1YXJkTGlzdGVuZXJzIiwiYWRkIiwiY2hhbmdlQ291bnQiLCJpc0Zpbml0ZSIsImxpc3RlbmVyTGltaXQiLCJjb25zb2xlIiwibG9nIiwicmVtb3ZlTGlzdGVuZXIiLCJoYXMiLCJkZWxldGUiLCJjbGVhciIsImFyZ3VtZW50cyIsImhhc0xpc3RlbmVycyIsImdldExpc3RlbmVyQ291bnQiLCJmb3JFYWNoTGlzdGVuZXIiLCJjYWxsYmFjayIsImZvckVhY2giLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlRpbnlFbWl0dGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIExpZ2h0d2VpZ2h0IGV2ZW50ICYgbGlzdGVuZXIgYWJzdHJhY3Rpb24gZm9yIGEgc2luZ2xlIGV2ZW50IHR5cGUuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgVEVtaXR0ZXIsIHsgVEVtaXR0ZXJMaXN0ZW5lciwgVEVtaXR0ZXJQYXJhbWV0ZXIgfSBmcm9tICcuL1RFbWl0dGVyLmpzJztcblxuLy8gY29uc3RhbnRzXG5jb25zdCBzaHVmZmxlTGlzdGVuZXJzID0gXy5oYXNJbiggd2luZG93LCAncGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVycycgKSAmJiBwaGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzLnNodWZmbGVMaXN0ZW5lcnM7XG5cbnR5cGUgRW1pdENvbnRleHQ8VCBleHRlbmRzIEludGVudGlvbmFsQW55W10+ID0ge1xuICBpbmRleDogbnVtYmVyO1xuICBsaXN0ZW5lckFycmF5PzogVEVtaXR0ZXJMaXN0ZW5lcjxUPltdO1xufTtcblxuLy8gU3RvcmUgdGhlIG51bWJlciBvZiBsaXN0ZW5lcnMgZnJvbSB0aGUgc2luZ2xlIFRpbnlFbWl0dGVyIGluc3RhbmNlIHRoYXQgaGFzIHRoZSBtb3N0IGxpc3RlbmVycyBpbiB0aGUgd2hvbGUgcnVudGltZS5cbmxldCBtYXhMaXN0ZW5lckNvdW50ID0gMDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGlueUVtaXR0ZXI8VCBleHRlbmRzIFRFbWl0dGVyUGFyYW1ldGVyW10gPSBbXT4gaW1wbGVtZW50cyBURW1pdHRlcjxUPiB7XG5cbiAgLy8gTm90IGRlZmluZWQgdXN1YWxseSBiZWNhdXNlIG9mIG1lbW9yeSB1c2FnZS4gSWYgZGVmaW5lZCwgdGhpcyB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBsaXN0ZW5lciBjb3VudCBjaGFuZ2VzLFxuICAvLyBlLmcuIGNoYW5nZUNvdW50KCB7bnVtYmVyfSBsaXN0ZW5lcnNBZGRlZFF1YW50aXR5ICksIHdpdGggdGhlIG51bWJlciBiZWluZyBuZWdhdGl2ZSBmb3IgbGlzdGVuZXJzIHJlbW92ZWQuXG4gIHB1YmxpYyBjaGFuZ2VDb3VudD86ICggY291bnQ6IG51bWJlciApID0+IHZvaWQ7XG5cbiAgLy8gT25seSBkZWZpbmVkIHdoZW4gYXNzZXJ0aW9ucyBhcmUgZW5hYmxlZCAtIHRvIGtlZXAgdHJhY2sgaWYgaXQgaGFzIGJlZW4gZGlzcG9zZWQgb3Igbm90XG4gIHB1YmxpYyBpc0Rpc3Bvc2VkPzogYm9vbGVhbjtcblxuICAvLyBJZiBzcGVjaWZpZWQsIHRoaXMgd2lsbCBiZSBjYWxsZWQgYmVmb3JlIGxpc3RlbmVycyBhcmUgbm90aWZpZWQuXG4gIHByaXZhdGUgcmVhZG9ubHkgb25CZWZvcmVOb3RpZnk/OiBURW1pdHRlckxpc3RlbmVyPFQ+IHwgbnVsbDtcblxuICAvLyBUaGUgbGlzdGVuZXJzIHRoYXQgd2lsbCBiZSBjYWxsZWQgb24gZW1pdFxuICBwcml2YXRlIGxpc3RlbmVyczogU2V0PFRFbWl0dGVyTGlzdGVuZXI8VD4+O1xuXG4gIC8vIER1cmluZyBlbWl0KCkga2VlcCB0cmFjayBvZiBpdGVyYXRpb24gcHJvZ3Jlc3MgYW5kIGd1YXJkIGxpc3RlbmVycyBpZiBtdXRhdGVkIGR1cmluZyBlbWl0KClcbiAgcHJpdmF0ZSBlbWl0Q29udGV4dHM6IEVtaXRDb250ZXh0PFQ+W107XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBvbkJlZm9yZU5vdGlmeT86IFRFbWl0dGVyTGlzdGVuZXI8VD4gfCBudWxsICkge1xuXG4gICAgaWYgKCBvbkJlZm9yZU5vdGlmeSApIHtcbiAgICAgIHRoaXMub25CZWZvcmVOb3RpZnkgPSBvbkJlZm9yZU5vdGlmeTtcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVycyA9IG5ldyBTZXQoKTtcblxuICAgIHRoaXMuZW1pdENvbnRleHRzID0gW107XG5cbiAgICAvLyBmb3IgcHJvZHVjdGlvbiBtZW1vcnkgY29uY2VybnM7IG5vIG5lZWQgdG8ga2VlcCB0aGlzIGFyb3VuZC5cbiAgICBpZiAoIGFzc2VydCApIHtcbiAgICAgIHRoaXMuaXNEaXNwb3NlZCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwb3NlcyBhbiBFbWl0dGVyLiBBbGwgbGlzdGVuZXJzIGFyZSByZW1vdmVkLlxuICAgKi9cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIGlmICggYXNzZXJ0ICkge1xuICAgICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTm90aWZ5IGxpc3RlbmVyc1xuICAgKi9cbiAgcHVibGljIGVtaXQoIC4uLmFyZ3M6IFQgKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuaXNEaXNwb3NlZCwgJ3Nob3VsZCBub3QgYmUgY2FsbGVkIGlmIGRpc3Bvc2VkJyApO1xuXG4gICAgLy8gb3B0aW9uYWwgY2FsbGJhY2ssIGJlZm9yZSBub3RpZnlpbmcgbGlzdGVuZXJzXG4gICAgdGhpcy5vbkJlZm9yZU5vdGlmeSAmJiB0aGlzLm9uQmVmb3JlTm90aWZ5LmFwcGx5KCBudWxsLCBhcmdzICk7XG5cbiAgICAvLyBTdXBwb3J0IGZvciBhIHF1ZXJ5IHBhcmFtZXRlciB0aGF0IHNodWZmbGVzIGxpc3RlbmVycywgYnV0IGJ1cnkgYmVoaW5kIGFzc2VydCBzbyBpdCB3aWxsIGJlIHN0cmlwcGVkIG91dCBvbiBidWlsZFxuICAgIC8vIHNvIGl0IHdvbid0IGltcGFjdCBwcm9kdWN0aW9uIHBlcmZvcm1hbmNlLlxuICAgIGlmICggYXNzZXJ0ICYmIHNodWZmbGVMaXN0ZW5lcnMgKSB7XG4gICAgICB0aGlzLmxpc3RlbmVycyA9IG5ldyBTZXQoIF8uc2h1ZmZsZSggQXJyYXkuZnJvbSggdGhpcy5saXN0ZW5lcnMgKSApICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XG4gICAgfVxuXG4gICAgLy8gTm90aWZ5IHdpcmVkLXVwIGxpc3RlbmVycywgaWYgYW55XG4gICAgaWYgKCB0aGlzLmxpc3RlbmVycy5zaXplID4gMCApIHtcblxuICAgICAgY29uc3QgZW1pdENvbnRleHQ6IEVtaXRDb250ZXh0PFQ+ID0ge1xuICAgICAgICBpbmRleDogMFxuICAgICAgICAvLyBsaXN0ZW5lckFycmF5OiBbXSAvLyB7QXJyYXkuPGZ1bmN0aW9uPnx1bmRlZmluZWR9IGFzc2lnbmVkIGlmIGEgbXV0YXRpb24gaXMgbWFkZSBkdXJpbmcgZW1pdFxuICAgICAgfTtcbiAgICAgIHRoaXMuZW1pdENvbnRleHRzLnB1c2goIGVtaXRDb250ZXh0ICk7XG5cbiAgICAgIGZvciAoIGNvbnN0IGxpc3RlbmVyIG9mIHRoaXMubGlzdGVuZXJzICkge1xuICAgICAgICBsaXN0ZW5lciggLi4uYXJncyApO1xuICAgICAgICBlbWl0Q29udGV4dC5pbmRleCsrO1xuXG4gICAgICAgIC8vIElmIGEgbGlzdGVuZXIgd2FzIGFkZGVkIG9yIHJlbW92ZWQsIHdlIGNhbm5vdCBjb250aW51ZSBwcm9jZXNzaW5nIHRoZSBtdXRhdGVkIFNldCwgd2UgbXVzdCBzd2l0Y2ggdG9cbiAgICAgICAgLy8gaXRlcmF0ZSBvdmVyIHRoZSBndWFyZGVkIGFycmF5XG4gICAgICAgIGlmICggZW1pdENvbnRleHQubGlzdGVuZXJBcnJheSApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgbGlzdGVuZXJzIHdlcmUgZ3VhcmRlZCBkdXJpbmcgZW1pdCwgd2UgYmFpbGVkIG91dCBvbiB0aGUgZm9yLi5vZiBhbmQgY29udGludWUgaXRlcmF0aW5nIG92ZXIgdGhlIG9yaWdpbmFsXG4gICAgICAvLyBsaXN0ZW5lcnMgaW4gb3JkZXIgZnJvbSB3aGVyZSB3ZSBsZWZ0IG9mZi5cbiAgICAgIGlmICggZW1pdENvbnRleHQubGlzdGVuZXJBcnJheSApIHtcbiAgICAgICAgZm9yICggbGV0IGkgPSBlbWl0Q29udGV4dC5pbmRleDsgaSA8IGVtaXRDb250ZXh0Lmxpc3RlbmVyQXJyYXkubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgICAgZW1pdENvbnRleHQubGlzdGVuZXJBcnJheVsgaSBdKCAuLi5hcmdzICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHRoaXMuZW1pdENvbnRleHRzLnBvcCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgbGlzdGVuZXIgd2hpY2ggd2lsbCBiZSBjYWxsZWQgZHVyaW5nIGVtaXQuXG4gICAqL1xuICBwdWJsaWMgYWRkTGlzdGVuZXIoIGxpc3RlbmVyOiBURW1pdHRlckxpc3RlbmVyPFQ+ICk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmlzRGlzcG9zZWQsICdDYW5ub3QgYWRkIGEgbGlzdGVuZXIgdG8gYSBkaXNwb3NlZCBUaW55RW1pdHRlcicgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5oYXNMaXN0ZW5lciggbGlzdGVuZXIgKSwgJ0Nhbm5vdCBhZGQgdGhlIHNhbWUgbGlzdGVuZXIgdHdpY2UnICk7XG5cbiAgICAvLyBJZiBhIGxpc3RlbmVyIGlzIGFkZGVkIGR1cmluZyBhbiBlbWl0KCksIHdlIG11c3QgbWFrZSBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbGlzdCBvZiBsaXN0ZW5lcnMtLXRoZSBuZXdseSBhZGRlZFxuICAgIC8vIGxpc3RlbmVyIHdpbGwgYmUgYXZhaWxhYmxlIGZvciB0aGUgbmV4dCBlbWl0KCkgYnV0IG5vdCB0aGUgb25lIGluIHByb2dyZXNzLiAgVGhpcyBpcyB0byBtYXRjaCBiZWhhdmlvciB3aXRoXG4gICAgLy8gcmVtb3ZlTGlzdGVuZXIuXG4gICAgdGhpcy5ndWFyZExpc3RlbmVycygpO1xuICAgIHRoaXMubGlzdGVuZXJzLmFkZCggbGlzdGVuZXIgKTtcblxuICAgIHRoaXMuY2hhbmdlQ291bnQgJiYgdGhpcy5jaGFuZ2VDb3VudCggMSApO1xuXG4gICAgaWYgKCBhc3NlcnQgJiYgd2luZG93LnBoZXQ/LmNoaXBwZXI/LnF1ZXJ5UGFyYW1ldGVycyAmJiBpc0Zpbml0ZSggcGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVycy5saXN0ZW5lckxpbWl0ICkgKSB7XG4gICAgICBpZiAoIG1heExpc3RlbmVyQ291bnQgPCB0aGlzLmxpc3RlbmVycy5zaXplICkge1xuICAgICAgICBtYXhMaXN0ZW5lckNvdW50ID0gdGhpcy5saXN0ZW5lcnMuc2l6ZTtcbiAgICAgICAgY29uc29sZS5sb2coIGBNYXggVGlueUVtaXR0ZXIgbGlzdGVuZXJzOiAke21heExpc3RlbmVyQ291bnR9YCApO1xuICAgICAgICBhc3NlcnQoIG1heExpc3RlbmVyQ291bnQgPD0gcGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVycy5saXN0ZW5lckxpbWl0LFxuICAgICAgICAgIGBsaXN0ZW5lciBjb3VudCBvZiAke21heExpc3RlbmVyQ291bnR9IGFib3ZlID9saXN0ZW5lckxpbWl0PSR7cGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVycy5saXN0ZW5lckxpbWl0fWAgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGxpc3RlbmVyXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlTGlzdGVuZXIoIGxpc3RlbmVyOiBURW1pdHRlckxpc3RlbmVyPFQ+ICk6IHZvaWQge1xuXG4gICAgLy8gVGhyb3cgYW4gZXJyb3Igd2hlbiByZW1vdmluZyBhIG5vbi1saXN0ZW5lciAoZXhjZXB0IHdoZW4gdGhlIEVtaXR0ZXIgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZCwgc2VlXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3N1bi9pc3N1ZXMvMzk0I2lzc3VlY29tbWVudC00MTk5OTgyMzFcbiAgICBpZiAoIGFzc2VydCAmJiAhdGhpcy5pc0Rpc3Bvc2VkICkge1xuICAgICAgYXNzZXJ0KCB0aGlzLmxpc3RlbmVycy5oYXMoIGxpc3RlbmVyICksICd0cmllZCB0byByZW1vdmVMaXN0ZW5lciBvbiBzb21ldGhpbmcgdGhhdCB3YXNuXFwndCBhIGxpc3RlbmVyJyApO1xuICAgIH1cbiAgICB0aGlzLmd1YXJkTGlzdGVuZXJzKCk7XG4gICAgdGhpcy5saXN0ZW5lcnMuZGVsZXRlKCBsaXN0ZW5lciApO1xuXG4gICAgdGhpcy5jaGFuZ2VDb3VudCAmJiB0aGlzLmNoYW5nZUNvdW50KCAtMSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHRoZSBsaXN0ZW5lcnNcbiAgICovXG4gIHB1YmxpYyByZW1vdmVBbGxMaXN0ZW5lcnMoKTogdm9pZCB7XG5cbiAgICBjb25zdCBzaXplID0gdGhpcy5saXN0ZW5lcnMuc2l6ZTtcblxuICAgIHRoaXMuZ3VhcmRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLmxpc3RlbmVycy5jbGVhcigpO1xuXG4gICAgdGhpcy5jaGFuZ2VDb3VudCAmJiB0aGlzLmNoYW5nZUNvdW50KCAtc2l6ZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIGxpc3RlbmVycyBhcmUgYWRkZWQvcmVtb3ZlZCB3aGlsZSBlbWl0KCkgaXMgaW4gcHJvZ3Jlc3MsIHdlIG11c3QgbWFrZSBhIGRlZmVuc2l2ZSBjb3B5IG9mIHRoZSBhcnJheSBvZiBsaXN0ZW5lcnNcbiAgICogYmVmb3JlIGNoYW5naW5nIHRoZSBhcnJheSwgYW5kIHVzZSBpdCBmb3IgdGhlIHJlc3Qgb2YgdGhlIG5vdGlmaWNhdGlvbnMgdW50aWwgdGhlIGVtaXQgY2FsbCBoYXMgY29tcGxldGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBndWFyZExpc3RlbmVycygpOiB2b2lkIHtcblxuICAgIGZvciAoIGxldCBpID0gdGhpcy5lbWl0Q29udGV4dHMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0gKSB7XG5cbiAgICAgIC8vIE9uY2Ugd2UgbWVldCBhIGxldmVsIHRoYXQgd2FzIGFscmVhZHkgZ3VhcmRlZCwgd2UgY2FuIHN0b3AsIHNpbmNlIGFsbCBwcmV2aW91cyBsZXZlbHMgd2VyZSBhbHJlYWR5IGd1YXJkZWRcbiAgICAgIGlmICggdGhpcy5lbWl0Q29udGV4dHNbIGkgXS5saXN0ZW5lckFycmF5ICkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuXG4gICAgICAgIC8vIE1hcmsgY29waWVzIGFzICdndWFyZGVkJyBzbyB0aGF0IGl0IHdpbGwgdXNlIHRoZSBvcmlnaW5hbCBsaXN0ZW5lcnMgd2hlbiBlbWl0IHN0YXJ0ZWQgYW5kIG5vdCB0aGUgbW9kaWZpZWRcbiAgICAgICAgLy8gbGlzdC5cbiAgICAgICAgdGhpcy5lbWl0Q29udGV4dHNbIGkgXS5saXN0ZW5lckFycmF5ID0gQXJyYXkuZnJvbSggdGhpcy5saXN0ZW5lcnMgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBsaXN0ZW5lciBpcyByZWdpc3RlcmVkIHdpdGggdGhpcyBFbWl0dGVyXG4gICAqL1xuICBwdWJsaWMgaGFzTGlzdGVuZXIoIGxpc3RlbmVyOiBURW1pdHRlckxpc3RlbmVyPFQ+ICk6IGJvb2xlYW4ge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGFyZ3VtZW50cy5sZW5ndGggPT09IDEsICdFbWl0dGVyLmhhc0xpc3RlbmVyIHNob3VsZCBiZSBjYWxsZWQgd2l0aCAxIGFyZ3VtZW50JyApO1xuICAgIHJldHVybiB0aGlzLmxpc3RlbmVycy5oYXMoIGxpc3RlbmVyICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSBhbnkgbGlzdGVuZXJzLlxuICAgKi9cbiAgcHVibGljIGhhc0xpc3RlbmVycygpOiBib29sZWFuIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhcmd1bWVudHMubGVuZ3RoID09PSAwLCAnRW1pdHRlci5oYXNMaXN0ZW5lcnMgc2hvdWxkIGJlIGNhbGxlZCB3aXRob3V0IGFyZ3VtZW50cycgKTtcbiAgICByZXR1cm4gdGhpcy5saXN0ZW5lcnMuc2l6ZSA+IDA7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGxpc3RlbmVycy5cbiAgICovXG4gIHB1YmxpYyBnZXRMaXN0ZW5lckNvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMubGlzdGVuZXJzLnNpemU7XG4gIH1cblxuICAvKipcbiAgICogSW52b2tlcyBhIGNhbGxiYWNrIG9uY2UgZm9yIGVhY2ggbGlzdGVuZXIgLSBtZWFudCBmb3IgUHJvcGVydHkncyB1c2VcbiAgICovXG4gIHB1YmxpYyBmb3JFYWNoTGlzdGVuZXIoIGNhbGxiYWNrOiAoIGxpc3RlbmVyOiBURW1pdHRlckxpc3RlbmVyPFQ+ICkgPT4gdm9pZCApOiB2b2lkIHtcbiAgICB0aGlzLmxpc3RlbmVycy5mb3JFYWNoKCBjYWxsYmFjayApO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdUaW55RW1pdHRlcicsIFRpbnlFbWl0dGVyICk7XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxPQUFPQSxJQUFJLE1BQU0sV0FBVztBQUc1QjtBQUNBLE1BQU1DLGdCQUFnQixHQUFHQyxDQUFDLENBQUNDLEtBQUssQ0FBRUMsTUFBTSxFQUFFLDhCQUE4QixDQUFFLElBQUlDLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxlQUFlLENBQUNOLGdCQUFnQjtBQU8zSDtBQUNBLElBQUlPLGdCQUFnQixHQUFHLENBQUM7QUFFeEIsZUFBZSxNQUFNQyxXQUFXLENBQTREO0VBRTFGO0VBQ0E7O0VBR0E7O0VBR0E7O0VBR0E7O0VBR0E7O0VBR09DLFdBQVdBLENBQUVDLGNBQTJDLEVBQUc7SUFFaEUsSUFBS0EsY0FBYyxFQUFHO01BQ3BCLElBQUksQ0FBQ0EsY0FBYyxHQUFHQSxjQUFjO0lBQ3RDO0lBRUEsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBSUMsR0FBRyxFQUFFO0lBRTFCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLEVBQUU7O0lBRXRCO0lBQ0EsSUFBS0MsTUFBTSxFQUFHO01BQ1osSUFBSSxDQUFDQyxVQUFVLEdBQUcsS0FBSztJQUN6QjtF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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/Timer.js
// Copyright 2019-2023, University of Colorado Boulder

/**
 * Timer so that other modules can run timing related code through the simulation's requestAnimationFrame. Use its
 * Emitter interface for adding/removing listeners.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */



class Timer extends TinyEmitter {
  /**
   * Adds a listener to be called back once after the specified time in milliseconds
   * @param listener - called with no arguments
   * @param timeout in milliseconds
   * @returns an internally-wrapped listener which can be removed with clearTimeout
   */
  setTimeout(listener, timeout) {
    // eslint-disable-line bad-sim-text
    let elapsed = 0;
    const callback = dt => {
      elapsed += dt;

      // Convert seconds to ms and see if item has timed out
      if (elapsed * 1000 >= timeout) {
        // make sure that this callback hasn't already been removed by another listener while emit() is in progress
        if (this.hasListener(callback)) {
          listener();
          this.removeListener(callback);
        }
      }
    };
    this.addListener(callback);

    // Return the callback so it can be removed with removeStepListener
    return callback;
  }

  /**
   * Clear a scheduled timeout. If there was no timeout, nothing is done.
   */
  clearTimeout(listener) {
    if (this.hasListener(listener)) {
      this.removeListener(listener);
    }
  }

  /**
   * Adds a listener to be called at specified intervals (in milliseconds)
   * @param listener - called with no arguments
   * @param interval - in milliseconds
   * @returns an internally-wrapped listener which can be removed with clearInterval
   */
  setInterval(listener, interval) {
    // eslint-disable-line bad-sim-text
    let elapsed = 0;
    const callback = dt => {
      elapsed += dt;

      // Convert seconds to ms and see if item has timed out
      while (elapsed * 1000 >= interval && this.hasListener(callback)) {
        listener();
        elapsed = elapsed - interval / 1000.0; // Save the leftover time so it won't accumulate
      }
    };

    this.addListener(callback);

    // Return the callback so it can be removed with removeListener
    return callback;
  }

  /**
   * Clear a scheduled interval. If there was no interval, nothing is done.
   */
  clearInterval(listener) {
    if (this.hasListener(listener)) {
      this.removeListener(listener);
    }
  }

  /**
   * Run a callback on the next frame. This method is largely for clarity.
   */
  runOnNextTick(listener) {
    this.setTimeout(listener, 0);
  }
}
js_axon.register('Timer', Timer);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVGlueUVtaXR0ZXIiLCJUaW1lciIsInNldFRpbWVvdXQiLCJsaXN0ZW5lciIsInRpbWVvdXQiLCJlbGFwc2VkIiwiY2FsbGJhY2siLCJkdCIsImhhc0xpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJhZGRMaXN0ZW5lciIsImNsZWFyVGltZW91dCIsInNldEludGVydmFsIiwiaW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwicnVuT25OZXh0VGljayIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVGltZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogVGltZXIgc28gdGhhdCBvdGhlciBtb2R1bGVzIGNhbiBydW4gdGltaW5nIHJlbGF0ZWQgY29kZSB0aHJvdWdoIHRoZSBzaW11bGF0aW9uJ3MgcmVxdWVzdEFuaW1hdGlvbkZyYW1lLiBVc2UgaXRzXG4gKiBFbWl0dGVyIGludGVyZmFjZSBmb3IgYWRkaW5nL3JlbW92aW5nIGxpc3RlbmVycy5cbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgVGlueUVtaXR0ZXIgZnJvbSAnLi9UaW55RW1pdHRlci5qcyc7XG5cbmV4cG9ydCB0eXBlIFRpbWVyTGlzdGVuZXIgPSAoIGR0OiBudW1iZXIgKSA9PiB2b2lkO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUaW1lciBleHRlbmRzIFRpbnlFbWl0dGVyPFsgbnVtYmVyIF0+IHtcblxuICAvKipcbiAgICogQWRkcyBhIGxpc3RlbmVyIHRvIGJlIGNhbGxlZCBiYWNrIG9uY2UgYWZ0ZXIgdGhlIHNwZWNpZmllZCB0aW1lIGluIG1pbGxpc2Vjb25kc1xuICAgKiBAcGFyYW0gbGlzdGVuZXIgLSBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHNcbiAgICogQHBhcmFtIHRpbWVvdXQgaW4gbWlsbGlzZWNvbmRzXG4gICAqIEByZXR1cm5zIGFuIGludGVybmFsbHktd3JhcHBlZCBsaXN0ZW5lciB3aGljaCBjYW4gYmUgcmVtb3ZlZCB3aXRoIGNsZWFyVGltZW91dFxuICAgKi9cbiAgcHVibGljIHNldFRpbWVvdXQoIGxpc3RlbmVyOiAoKSA9PiB2b2lkLCB0aW1lb3V0OiBudW1iZXIgKTogVGltZXJMaXN0ZW5lciB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XG4gICAgbGV0IGVsYXBzZWQgPSAwO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKCBkdDogbnVtYmVyICkgPT4ge1xuICAgICAgZWxhcHNlZCArPSBkdDtcblxuICAgICAgLy8gQ29udmVydCBzZWNvbmRzIHRvIG1zIGFuZCBzZWUgaWYgaXRlbSBoYXMgdGltZWQgb3V0XG4gICAgICBpZiAoIGVsYXBzZWQgKiAxMDAwID49IHRpbWVvdXQgKSB7XG5cbiAgICAgICAgLy8gbWFrZSBzdXJlIHRoYXQgdGhpcyBjYWxsYmFjayBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJlbW92ZWQgYnkgYW5vdGhlciBsaXN0ZW5lciB3aGlsZSBlbWl0KCkgaXMgaW4gcHJvZ3Jlc3NcbiAgICAgICAgaWYgKCB0aGlzLmhhc0xpc3RlbmVyKCBjYWxsYmFjayApICkge1xuICAgICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lciggY2FsbGJhY2sgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5hZGRMaXN0ZW5lciggY2FsbGJhY2sgKTtcblxuICAgIC8vIFJldHVybiB0aGUgY2FsbGJhY2sgc28gaXQgY2FuIGJlIHJlbW92ZWQgd2l0aCByZW1vdmVTdGVwTGlzdGVuZXJcbiAgICByZXR1cm4gY2FsbGJhY2s7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYSBzY2hlZHVsZWQgdGltZW91dC4gSWYgdGhlcmUgd2FzIG5vIHRpbWVvdXQsIG5vdGhpbmcgaXMgZG9uZS5cbiAgICovXG4gIHB1YmxpYyBjbGVhclRpbWVvdXQoIGxpc3RlbmVyOiBUaW1lckxpc3RlbmVyICk6IHZvaWQge1xuICAgIGlmICggdGhpcy5oYXNMaXN0ZW5lciggbGlzdGVuZXIgKSApIHtcbiAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoIGxpc3RlbmVyICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBsaXN0ZW5lciB0byBiZSBjYWxsZWQgYXQgc3BlY2lmaWVkIGludGVydmFscyAoaW4gbWlsbGlzZWNvbmRzKVxuICAgKiBAcGFyYW0gbGlzdGVuZXIgLSBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHNcbiAgICogQHBhcmFtIGludGVydmFsIC0gaW4gbWlsbGlzZWNvbmRzXG4gICAqIEByZXR1cm5zIGFuIGludGVybmFsbHktd3JhcHBlZCBsaXN0ZW5lciB3aGljaCBjYW4gYmUgcmVtb3ZlZCB3aXRoIGNsZWFySW50ZXJ2YWxcbiAgICovXG4gIHB1YmxpYyBzZXRJbnRlcnZhbCggbGlzdGVuZXI6ICgpID0+IHZvaWQsIGludGVydmFsOiBudW1iZXIgKTogVGltZXJMaXN0ZW5lciB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XG4gICAgbGV0IGVsYXBzZWQgPSAwO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gKCBkdDogbnVtYmVyICkgPT4ge1xuICAgICAgZWxhcHNlZCArPSBkdDtcblxuICAgICAgLy8gQ29udmVydCBzZWNvbmRzIHRvIG1zIGFuZCBzZWUgaWYgaXRlbSBoYXMgdGltZWQgb3V0XG4gICAgICB3aGlsZSAoIGVsYXBzZWQgKiAxMDAwID49IGludGVydmFsICYmIHRoaXMuaGFzTGlzdGVuZXIoIGNhbGxiYWNrICkgKSB7XG4gICAgICAgIGxpc3RlbmVyKCk7XG4gICAgICAgIGVsYXBzZWQgPSBlbGFwc2VkIC0gaW50ZXJ2YWwgLyAxMDAwLjA7IC8vIFNhdmUgdGhlIGxlZnRvdmVyIHRpbWUgc28gaXQgd29uJ3QgYWNjdW11bGF0ZVxuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5hZGRMaXN0ZW5lciggY2FsbGJhY2sgKTtcblxuICAgIC8vIFJldHVybiB0aGUgY2FsbGJhY2sgc28gaXQgY2FuIGJlIHJlbW92ZWQgd2l0aCByZW1vdmVMaXN0ZW5lclxuICAgIHJldHVybiBjYWxsYmFjaztcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhIHNjaGVkdWxlZCBpbnRlcnZhbC4gSWYgdGhlcmUgd2FzIG5vIGludGVydmFsLCBub3RoaW5nIGlzIGRvbmUuXG4gICAqL1xuICBwdWJsaWMgY2xlYXJJbnRlcnZhbCggbGlzdGVuZXI6IFRpbWVyTGlzdGVuZXIgKTogdm9pZCB7XG4gICAgaWYgKCB0aGlzLmhhc0xpc3RlbmVyKCBsaXN0ZW5lciApICkge1xuICAgICAgdGhpcy5yZW1vdmVMaXN0ZW5lciggbGlzdGVuZXIgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUnVuIGEgY2FsbGJhY2sgb24gdGhlIG5leHQgZnJhbWUuIFRoaXMgbWV0aG9kIGlzIGxhcmdlbHkgZm9yIGNsYXJpdHkuXG4gICAqL1xuICBwdWJsaWMgcnVuT25OZXh0VGljayggbGlzdGVuZXI6ICgpID0+IHZvaWQgKTogdm9pZCB7XG4gICAgdGhpcy5zZXRUaW1lb3V0KCBsaXN0ZW5lciwgMCApO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdUaW1lcicsIFRpbWVyICk7XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxJQUFJLE1BQU0sV0FBVztBQUM1QixPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBSTFDLGVBQWUsTUFBTUMsS0FBSyxTQUFTRCxXQUFXLENBQWE7RUFFekQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NFLFVBQVVBLENBQUVDLFFBQW9CLEVBQUVDLE9BQWUsRUFBa0I7SUFBRTtJQUMxRSxJQUFJQyxPQUFPLEdBQUcsQ0FBQztJQUNmLE1BQU1DLFFBQVEsR0FBS0MsRUFBVSxJQUFNO01BQ2pDRixPQUFPLElBQUlFLEVBQUU7O01BRWI7TUFDQSxJQUFLRixPQUFPLEdBQUcsSUFBSSxJQUFJRCxPQUFPLEVBQUc7UUFFL0I7UUFDQSxJQUFLLElBQUksQ0FBQ0ksV0FBVyxDQUFFRixRQUFRLENBQUUsRUFBRztVQUNsQ0gsUUFBUSxFQUFFO1VBQ1YsSUFBSSxDQUFDTSxjQUFjLENBQUVILFFBQVEsQ0FBRTtRQUNqQztNQUNGO0lBQ0YsQ0FBQztJQUNELElBQUksQ0FBQ0ksV0FBVyxDQUFFSixRQUFRLENBQUU7O0lBRTVCO0lBQ0EsT0FBT0EsUUFBUTtFQUNqQjs7RUFFQTtBQUNGO0FBQ0E7RUFDU0ssWUFBWUEsQ0FBRVIsUUFBdUIsRUFBUztJQUNuRCxJQUFLLElBQUksQ0FBQ0ssV0FBVyxDQUFFTCxRQUFRLENBQUUsRUFBRztNQUNsQyxJQUFJLENBQUNNLGNBQWMsQ0FBRU4sUUFBUSxDQUFFO0lBQ2pDO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NTLFdBQVdBLENBQUVULFFBQW9CLEVBQUVVLFFBQWdCLEVBQWtCO0lBQUU7SUFDNUUsSUFBSVIsT0FBTyxHQUFHLENBQUM7SUFDZixNQUFNQyxRQUFRLEdBQUtDLEVBQVUsSUFBTTtNQUNqQ0YsT0FBTyxJQUFJRSxFQUFFOztNQUViO01BQ0EsT0FBUUYsT0FBTyxHQUFHLElBQUksSUFBSVEsUUFBUSxJQUFJLElBQUksQ0FBQ0wsV0FBVyxDQUFFRixRQUFRLENBQUUsRUFBRztRQUNuRUgsUUFBUSxFQUFFO1FBQ1ZFLE9BQU8sR0FBR0EsT0FBTyxHQUFHUSxRQUFRLEdBQUcsTUFBTSxDQUFDLENBQUM7TUFDekM7SUFDRixDQUFDOztJQUNELElBQUksQ0FBQ0gsV0FBVyxDQUFFSixRQUFRLENBQUU7O0lBRTVCO0lBQ0EsT0FBT0EsUUFBUTtFQUNqQjs7RUFFQTtBQUNGO0FBQ0E7RUFDU1EsYUFBYUEsQ0FBRVgsUUFBdUIsRUFBUztJQUNwRCxJQUFLLElBQUksQ0FBQ0ssV0FBVyxDQUFFTCxRQUFRLENBQUUsRUFBRztNQUNsQyxJQUFJLENBQUNNLGNBQWMsQ0FBRU4sUUFBUSxDQUFFO0lBQ2pDO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ1NZLGFBQWFBLENBQUVaLFFBQW9CLEVBQVM7SUFDakQsSUFBSSxDQUFDRCxVQUFVLENBQUVDLFFBQVEsRUFBRSxDQUFDLENBQUU7RUFDaEM7QUFDRjtBQUVBSixJQUFJLENBQUNpQixRQUFRLENBQUUsT0FBTyxFQUFFZixLQUFLLENBQUUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/animationFrameTimer.js
// Copyright 2020-2022, University of Colorado Boulder




// Like stepTimer but runs every frame whether the sim is active or not.
const animationFrameTimer = new Timer();
js_axon.register('animationFrameTimer', animationFrameTimer);
/* harmony default export */ const js_animationFrameTimer = (animationFrameTimer);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVGltZXIiLCJhbmltYXRpb25GcmFtZVRpbWVyIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJhbmltYXRpb25GcmFtZVRpbWVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IFRpbWVyIGZyb20gJy4vVGltZXIuanMnO1xuXG4vLyBMaWtlIHN0ZXBUaW1lciBidXQgcnVucyBldmVyeSBmcmFtZSB3aGV0aGVyIHRoZSBzaW0gaXMgYWN0aXZlIG9yIG5vdC5cbmNvbnN0IGFuaW1hdGlvbkZyYW1lVGltZXIgPSBuZXcgVGltZXIoKTtcblxuYXhvbi5yZWdpc3RlciggJ2FuaW1hdGlvbkZyYW1lVGltZXInLCBhbmltYXRpb25GcmFtZVRpbWVyICk7XG5leHBvcnQgZGVmYXVsdCBhbmltYXRpb25GcmFtZVRpbWVyOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsT0FBT0EsSUFBSSxNQUFNLFdBQVc7QUFDNUIsT0FBT0MsS0FBSyxNQUFNLFlBQVk7O0FBRTlCO0FBQ0EsTUFBTUMsbUJBQW1CLEdBQUcsSUFBSUQsS0FBSyxFQUFFO0FBRXZDRCxJQUFJLENBQUNHLFFBQVEsQ0FBRSxxQkFBcUIsRUFBRUQsbUJBQW1CLENBQUU7QUFDM0QsZUFBZUEsbUJBQW1CIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/phetCore.js
// Copyright 2013-2020, University of Colorado Boulder


const phetCore_phetCore = new js_Namespace('phetCore');

// Namespace can't require this file, so we register it as a special case.
phetCore_phetCore.register('Namespace', js_Namespace);
/* harmony default export */ const js_phetCore = (phetCore_phetCore);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOYW1lc3BhY2UiLCJwaGV0Q29yZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsicGhldENvcmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cblxuaW1wb3J0IE5hbWVzcGFjZSBmcm9tICcuL05hbWVzcGFjZS5qcyc7XG5cbmNvbnN0IHBoZXRDb3JlID0gbmV3IE5hbWVzcGFjZSggJ3BoZXRDb3JlJyApO1xuXG4vLyBOYW1lc3BhY2UgY2FuJ3QgcmVxdWlyZSB0aGlzIGZpbGUsIHNvIHdlIHJlZ2lzdGVyIGl0IGFzIGEgc3BlY2lhbCBjYXNlLlxucGhldENvcmUucmVnaXN0ZXIoICdOYW1lc3BhY2UnLCBOYW1lc3BhY2UgKTtcblxuZXhwb3J0IGRlZmF1bHQgcGhldENvcmU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFHQSxPQUFPQSxTQUFTLE1BQU0sZ0JBQWdCO0FBRXRDLE1BQU1DLFFBQVEsR0FBRyxJQUFJRCxTQUFTLENBQUUsVUFBVSxDQUFFOztBQUU1QztBQUNBQyxRQUFRLENBQUNDLFFBQVEsQ0FBRSxXQUFXLEVBQUVGLFNBQVMsQ0FBRTtBQUUzQyxlQUFlQyxRQUFRIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/merge.js
// Copyright 2019-2022, University of Colorado Boulder

/**
 * Like Lodash's _.merge, this will recursively merge nested options objects provided that the keys end in 'Options'
 * (case sensitive) and they are pure object literals.
 * That is, they must be defined by `... = { ... }` or `somePropOptions: { ... }`.
 * Non object literals (arrays, functions, and inherited types) or anything with an extra prototype will all throw
 * assertion errors if passed in as an arg or as a value to a `*Options` field.
 *
 * @author Michael Barlow (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */


// constants
const OPTIONS_SUFFIX = 'Options';

// Function overloading is described in https://www.tutorialsteacher.com/typescript/function-overloading

/**
 * @param  {Object} target - the object literal that will have keys set to it
 * @param  {...<Object|null>} sources
 */
function merge(target, ...sources) {
  assert && assertIsMergeable(target);
  assert && assert(target !== null, 'target should not be null'); // assertIsMergeable supports null
  assert && assert(sources.length > 0, 'at least one source expected');
  _.each(sources, source => {
    if (source) {
      assert && assertIsMergeable(source);
      for (const property in source) {
        // Providing a value of undefined in the target doesn't override the default, see https://github.com/phetsims/phet-core/issues/111
        if (source.hasOwnProperty(property) && source[property] !== undefined) {
          const sourceProperty = source[property];

          // Recurse on keys that end with 'Options', but not on keys named 'Options'.
          if (_.endsWith(property, OPTIONS_SUFFIX) && property !== OPTIONS_SUFFIX) {
            // *Options property value cannot be undefined, if truthy, it we be validated with assertIsMergeable via recursion.
            assert && assert(sourceProperty !== undefined, 'nested *Options should not be undefined');
            target[property] = merge(target[property] || {}, sourceProperty);
          } else {
            target[property] = sourceProperty;
          }
        }
      }
    }
  });
  return target;
}

/**
 * TODO: can we remove assertIsMergeable? https://github.com/phetsims/chipper/issues/1128
 * Asserts that the object is compatible with merge. That is, it's a POJSO.
 * This function must be called like: assert && assertIsMergeable( arg );
 */
function assertIsMergeable(object) {
  assert && assert(object === null || object && typeof object === 'object' && Object.getPrototypeOf(object) === Object.prototype, 'object is not compatible with merge');
  if (object !== null) {
    // ensure that options keys are not ES5 setters or getters
    Object.keys(object).forEach(prop => {
      const ownPropertyDescriptor = Object.getOwnPropertyDescriptor(object, prop);
      assert && assert(!ownPropertyDescriptor.hasOwnProperty('set'), 'cannot use merge with an object that has a setter');
      assert && assert(!ownPropertyDescriptor.hasOwnProperty('get'), 'cannot use merge with an object that has a getter');
    });
  }
}
js_phetCore.register('merge', merge);
/* harmony default export */ const js_merge = (merge);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIk9QVElPTlNfU1VGRklYIiwibWVyZ2UiLCJ0YXJnZXQiLCJzb3VyY2VzIiwiYXNzZXJ0IiwiYXNzZXJ0SXNNZXJnZWFibGUiLCJsZW5ndGgiLCJfIiwiZWFjaCIsInNvdXJjZSIsInByb3BlcnR5IiwiaGFzT3duUHJvcGVydHkiLCJ1bmRlZmluZWQiLCJzb3VyY2VQcm9wZXJ0eSIsImVuZHNXaXRoIiwib2JqZWN0IiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJrZXlzIiwiZm9yRWFjaCIsInByb3AiLCJvd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIm1lcmdlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIExpa2UgTG9kYXNoJ3MgXy5tZXJnZSwgdGhpcyB3aWxsIHJlY3Vyc2l2ZWx5IG1lcmdlIG5lc3RlZCBvcHRpb25zIG9iamVjdHMgcHJvdmlkZWQgdGhhdCB0aGUga2V5cyBlbmQgaW4gJ09wdGlvbnMnXG4gKiAoY2FzZSBzZW5zaXRpdmUpIGFuZCB0aGV5IGFyZSBwdXJlIG9iamVjdCBsaXRlcmFscy5cbiAqIFRoYXQgaXMsIHRoZXkgbXVzdCBiZSBkZWZpbmVkIGJ5IGAuLi4gPSB7IC4uLiB9YCBvciBgc29tZVByb3BPcHRpb25zOiB7IC4uLiB9YC5cbiAqIE5vbiBvYmplY3QgbGl0ZXJhbHMgKGFycmF5cywgZnVuY3Rpb25zLCBhbmQgaW5oZXJpdGVkIHR5cGVzKSBvciBhbnl0aGluZyB3aXRoIGFuIGV4dHJhIHByb3RvdHlwZSB3aWxsIGFsbCB0aHJvd1xuICogYXNzZXJ0aW9uIGVycm9ycyBpZiBwYXNzZWQgaW4gYXMgYW4gYXJnIG9yIGFzIGEgdmFsdWUgdG8gYSBgKk9wdGlvbnNgIGZpZWxkLlxuICpcbiAqIEBhdXRob3IgTWljaGFlbCBCYXJsb3cgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4vdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuXG4vLyBjb25zdGFudHNcbmNvbnN0IE9QVElPTlNfU1VGRklYID0gJ09wdGlvbnMnO1xuXG4vLyBGdW5jdGlvbiBvdmVybG9hZGluZyBpcyBkZXNjcmliZWQgaW4gaHR0cHM6Ly93d3cudHV0b3JpYWxzdGVhY2hlci5jb20vdHlwZXNjcmlwdC9mdW5jdGlvbi1vdmVybG9hZGluZ1xuZnVuY3Rpb24gbWVyZ2U8QSwgQj4oIGE6IEEsIGI6IEIgKTogQSAmIEI7XG5mdW5jdGlvbiBtZXJnZTxBLCBCLCBDPiggYTogQSwgYjogQiwgYzogQyApOiBBICYgQiAmIEM7XG5mdW5jdGlvbiBtZXJnZTxBLCBCLCBDLCBEPiggYTogQSwgYjogQiwgYzogQywgZDogRCApOiBBICYgQiAmIEMgJiBEO1xuZnVuY3Rpb24gbWVyZ2U8QSwgQiwgQywgRCwgRT4oIGE6IEEsIGI6IEIsIGM6IEMsIGQ6IEQsIGU6IEUgKTogQSAmIEIgJiBDICYgRCAmIEU7XG5cbi8qKlxuICogQHBhcmFtICB7T2JqZWN0fSB0YXJnZXQgLSB0aGUgb2JqZWN0IGxpdGVyYWwgdGhhdCB3aWxsIGhhdmUga2V5cyBzZXQgdG8gaXRcbiAqIEBwYXJhbSAgey4uLjxPYmplY3R8bnVsbD59IHNvdXJjZXNcbiAqL1xuZnVuY3Rpb24gbWVyZ2UoIHRhcmdldDogSW50ZW50aW9uYWxBbnksIC4uLnNvdXJjZXM6IEludGVudGlvbmFsQW55W10gKTogSW50ZW50aW9uYWxBbnkge1xuICBhc3NlcnQgJiYgYXNzZXJ0SXNNZXJnZWFibGUoIHRhcmdldCApO1xuICBhc3NlcnQgJiYgYXNzZXJ0KCB0YXJnZXQgIT09IG51bGwsICd0YXJnZXQgc2hvdWxkIG5vdCBiZSBudWxsJyApOyAvLyBhc3NlcnRJc01lcmdlYWJsZSBzdXBwb3J0cyBudWxsXG4gIGFzc2VydCAmJiBhc3NlcnQoIHNvdXJjZXMubGVuZ3RoID4gMCwgJ2F0IGxlYXN0IG9uZSBzb3VyY2UgZXhwZWN0ZWQnICk7XG5cbiAgXy5lYWNoKCBzb3VyY2VzLCBzb3VyY2UgPT4ge1xuICAgIGlmICggc291cmNlICkge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydElzTWVyZ2VhYmxlKCBzb3VyY2UgKTtcbiAgICAgIGZvciAoIGNvbnN0IHByb3BlcnR5IGluIHNvdXJjZSApIHtcblxuICAgICAgICAvLyBQcm92aWRpbmcgYSB2YWx1ZSBvZiB1bmRlZmluZWQgaW4gdGhlIHRhcmdldCBkb2Vzbid0IG92ZXJyaWRlIHRoZSBkZWZhdWx0LCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtY29yZS9pc3N1ZXMvMTExXG4gICAgICAgIGlmICggc291cmNlLmhhc093blByb3BlcnR5KCBwcm9wZXJ0eSApICYmIHNvdXJjZVsgcHJvcGVydHkgXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgICAgIGNvbnN0IHNvdXJjZVByb3BlcnR5ID0gc291cmNlWyBwcm9wZXJ0eSBdO1xuXG4gICAgICAgICAgLy8gUmVjdXJzZSBvbiBrZXlzIHRoYXQgZW5kIHdpdGggJ09wdGlvbnMnLCBidXQgbm90IG9uIGtleXMgbmFtZWQgJ09wdGlvbnMnLlxuICAgICAgICAgIGlmICggXy5lbmRzV2l0aCggcHJvcGVydHksIE9QVElPTlNfU1VGRklYICkgJiYgcHJvcGVydHkgIT09IE9QVElPTlNfU1VGRklYICkge1xuXG4gICAgICAgICAgICAvLyAqT3B0aW9ucyBwcm9wZXJ0eSB2YWx1ZSBjYW5ub3QgYmUgdW5kZWZpbmVkLCBpZiB0cnV0aHksIGl0IHdlIGJlIHZhbGlkYXRlZCB3aXRoIGFzc2VydElzTWVyZ2VhYmxlIHZpYSByZWN1cnNpb24uXG4gICAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBzb3VyY2VQcm9wZXJ0eSAhPT0gdW5kZWZpbmVkLCAnbmVzdGVkICpPcHRpb25zIHNob3VsZCBub3QgYmUgdW5kZWZpbmVkJyApO1xuICAgICAgICAgICAgdGFyZ2V0WyBwcm9wZXJ0eSBdID0gbWVyZ2UoIHRhcmdldFsgcHJvcGVydHkgXSB8fCB7fSwgc291cmNlUHJvcGVydHkgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRbIHByb3BlcnR5IF0gPSBzb3VyY2VQcm9wZXJ0eTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gKTtcbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuLyoqXG4gKiBUT0RPOiBjYW4gd2UgcmVtb3ZlIGFzc2VydElzTWVyZ2VhYmxlPyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2hpcHBlci9pc3N1ZXMvMTEyOFxuICogQXNzZXJ0cyB0aGF0IHRoZSBvYmplY3QgaXMgY29tcGF0aWJsZSB3aXRoIG1lcmdlLiBUaGF0IGlzLCBpdCdzIGEgUE9KU08uXG4gKiBUaGlzIGZ1bmN0aW9uIG11c3QgYmUgY2FsbGVkIGxpa2U6IGFzc2VydCAmJiBhc3NlcnRJc01lcmdlYWJsZSggYXJnICk7XG4gKi9cbmZ1bmN0aW9uIGFzc2VydElzTWVyZ2VhYmxlKCBvYmplY3Q6IEludGVudGlvbmFsQW55ICk6IHZvaWQge1xuICBhc3NlcnQgJiYgYXNzZXJ0KCBvYmplY3QgPT09IG51bGwgfHxcbiAgICAgICAgICAgICAgICAgICAgKCBvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgT2JqZWN0LmdldFByb3RvdHlwZU9mKCBvYmplY3QgKSA9PT0gT2JqZWN0LnByb3RvdHlwZSApLFxuICAgICdvYmplY3QgaXMgbm90IGNvbXBhdGlibGUgd2l0aCBtZXJnZScgKTtcblxuICBpZiAoIG9iamVjdCAhPT0gbnVsbCApIHtcbiAgICAvLyBlbnN1cmUgdGhhdCBvcHRpb25zIGtleXMgYXJlIG5vdCBFUzUgc2V0dGVycyBvciBnZXR0ZXJzXG4gICAgT2JqZWN0LmtleXMoIG9iamVjdCApLmZvckVhY2goIHByb3AgPT4ge1xuICAgICAgY29uc3Qgb3duUHJvcGVydHlEZXNjcmlwdG9yID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvciggb2JqZWN0LCBwcm9wICkhO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIW93blByb3BlcnR5RGVzY3JpcHRvci5oYXNPd25Qcm9wZXJ0eSggJ3NldCcgKSxcbiAgICAgICAgJ2Nhbm5vdCB1c2UgbWVyZ2Ugd2l0aCBhbiBvYmplY3QgdGhhdCBoYXMgYSBzZXR0ZXInICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhb3duUHJvcGVydHlEZXNjcmlwdG9yLmhhc093blByb3BlcnR5KCAnZ2V0JyApLFxuICAgICAgICAnY2Fubm90IHVzZSBtZXJnZSB3aXRoIGFuIG9iamVjdCB0aGF0IGhhcyBhIGdldHRlcicgKTtcbiAgICB9ICk7XG4gIH1cbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdtZXJnZScsIG1lcmdlICk7XG5leHBvcnQgZGVmYXVsdCBtZXJnZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlO0FBR3BDO0FBQ0EsTUFBTUMsY0FBYyxHQUFHLFNBQVM7O0FBRWhDOztBQU1BO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsS0FBS0EsQ0FBRUMsTUFBc0IsRUFBRSxHQUFHQyxPQUF5QixFQUFtQjtFQUNyRkMsTUFBTSxJQUFJQyxpQkFBaUIsQ0FBRUgsTUFBTSxDQUFFO0VBQ3JDRSxNQUFNLElBQUlBLE1BQU0sQ0FBRUYsTUFBTSxLQUFLLElBQUksRUFBRSwyQkFBMkIsQ0FBRSxDQUFDLENBQUM7RUFDbEVFLE1BQU0sSUFBSUEsTUFBTSxDQUFFRCxPQUFPLENBQUNHLE1BQU0sR0FBRyxDQUFDLEVBQUUsOEJBQThCLENBQUU7RUFFdEVDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFTCxPQUFPLEVBQUVNLE1BQU0sSUFBSTtJQUN6QixJQUFLQSxNQUFNLEVBQUc7TUFDWkwsTUFBTSxJQUFJQyxpQkFBaUIsQ0FBRUksTUFBTSxDQUFFO01BQ3JDLEtBQU0sTUFBTUMsUUFBUSxJQUFJRCxNQUFNLEVBQUc7UUFFL0I7UUFDQSxJQUFLQSxNQUFNLENBQUNFLGNBQWMsQ0FBRUQsUUFBUSxDQUFFLElBQUlELE1BQU0sQ0FBRUMsUUFBUSxDQUFFLEtBQUtFLFNBQVMsRUFBRztVQUMzRSxNQUFNQyxjQUFjLEdBQUdKLE1BQU0sQ0FBRUMsUUFBUSxDQUFFOztVQUV6QztVQUNBLElBQUtILENBQUMsQ0FBQ08sUUFBUSxDQUFFSixRQUFRLEVBQUVWLGNBQWMsQ0FBRSxJQUFJVSxRQUFRLEtBQUtWLGNBQWMsRUFBRztZQUUzRTtZQUNBSSxNQUFNLElBQUlBLE1BQU0sQ0FBRVMsY0FBYyxLQUFLRCxTQUFTLEVBQUUseUNBQXlDLENBQUU7WUFDM0ZWLE1BQU0sQ0FBRVEsUUFBUSxDQUFFLEdBQUdULEtBQUssQ0FBRUMsTUFBTSxDQUFFUSxRQUFRLENBQUUsSUFBSSxDQUFDLENBQUMsRUFBRUcsY0FBYyxDQUFFO1VBQ3hFLENBQUMsTUFDSTtZQUNIWCxNQUFNLENBQUVRLFFBQVEsQ0FBRSxHQUFHRyxjQUFjO1VBQ3JDO1FBQ0Y7TUFDRjtJQUNGO0VBQ0YsQ0FBQyxDQUFFO0VBQ0gsT0FBT1gsTUFBTTtBQUNmOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTRyxpQkFBaUJBLENBQUVVLE1BQXNCLEVBQVM7RUFDekRYLE1BQU0sSUFBSUEsTUFBTSxDQUFFVyxNQUFNLEtBQUssSUFBSSxJQUNiQSxNQUFNLElBQUksT0FBT0EsTUFBTSxLQUFLLFFBQVEsSUFBSUMsTUFBTSxDQUFDQyxjQUFjLENBQUVGLE1BQU0sQ0FBRSxLQUFLQyxNQUFNLENBQUNFLFNBQVcsRUFDaEgscUNBQXFDLENBQUU7RUFFekMsSUFBS0gsTUFBTSxLQUFLLElBQUksRUFBRztJQUNyQjtJQUNBQyxNQUFNLENBQUNHLElBQUksQ0FBRUosTUFBTSxDQUFFLENBQUNLLE9BQU8sQ0FBRUMsSUFBSSxJQUFJO01BQ3JDLE1BQU1DLHFCQUFxQixHQUFHTixNQUFNLENBQUNPLHdCQUF3QixDQUFFUixNQUFNLEVBQUVNLElBQUksQ0FBRztNQUM5RWpCLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUNrQixxQkFBcUIsQ0FBQ1gsY0FBYyxDQUFFLEtBQUssQ0FBRSxFQUM5RCxtREFBbUQsQ0FBRTtNQUN2RFAsTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQ2tCLHFCQUFxQixDQUFDWCxjQUFjLENBQUUsS0FBSyxDQUFFLEVBQzlELG1EQUFtRCxDQUFFO0lBQ3pELENBQUMsQ0FBRTtFQUNMO0FBQ0Y7QUFFQVosUUFBUSxDQUFDeUIsUUFBUSxDQUFFLE9BQU8sRUFBRXZCLEtBQUssQ0FBRTtBQUNuQyxlQUFlQSxLQUFLIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/optionize.js
// Copyright 2022-2023, University of Colorado Boulder

/**
 * Optionize is a TypeScript layer built on PHET_CORE/merge. Its goal is to satisfy type safety within PhET's "options"
 * pattern.
 *
 * For up-to-date examples on how to use this file, see WILDER/WilderOptionsPatterns.ts
 *
 * This pattern is still being solidified. Although the long term location of PhET's options pattern documentation
 * can be found at https://github.com/phetsims/phet-info/blob/main/doc/phet-software-design-patterns.md#options-and-config,
 * that document is currently out of date. Please see https://github.com/phetsims/chipper/issues/1128 for current
 * progress on this pattern.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */



// Factor out the merge arrow closure to avoid heap/cpu at runtime
const merge4 = (a, b, c, d) => js_merge(a, b, c, d);

// ProvidedOptions = The type of this class's public API (type of the providedOptions parameter in the constructor)
// SelfOptions = Options that are defined by "this" class. Anything optional in this block must have a default provided in "defaults"
// ParentOptions = The public API for parent options, this will be exported by the parent class, like "NodeOptions"
// KeysUsedInSubclassConstructor = list of keys from ParentOptions that are used in this constructor.
function optionize() {
  return merge4;
}

// Use this function to gain the typing that optionize provides but in a case where the first argument is an empty object.
function optionize3() {
  return merge4;
}

/**
 * Use this function to replace merge in cases like:
 *
 * const options = m-e-r-g-e(
 *   {},
 *
 *   // ParentOptions defaults that are common throughout the sim
 *   MyConstants.SOME_COMMON_OPTIONS,
 *
 *   // SelfOptions and ParentOptions defaults that are provided by this class
 *   { ... },
 *
 *   // option values that are provided by the caller
 *   providedOptions );
 */
function optionize4() {
  return merge4;
}

// Use combineOptions to combine object literals (typically options) that all have the same type.
function combineOptions(target, ...sources) {
  return merge4(target, ...sources);
}

// function optionize<ProvidedOptions, // eslint-disable-line no-redeclare
//   SelfOptions = ProvidedOptions,
//   ParentOptions = EmptySelfOptions>():
//   <KeysUsedInSubclassConstructor extends keyof ( ParentOptions )>(
//     emptyObject: ObjectWithNoKeys,
//     defaults: OptionizeDefaults<SelfOptions, ParentOptions>,
//     providedOptions?: ProvidedOptions
//   ) => OptionizeDefaults<SelfOptions, ParentOptions> & ProvidedOptions & Required<Pick<ParentOptions, KeysUsedInSubclassConstructor>>;
//
// function optionize<ProvidedOptions, // eslint-disable-line no-redeclare
//   SelfOptions = ProvidedOptions,
//   ParentOptions = EmptySelfOptions,
//   KeysUsedInSubclassConstructor extends keyof ParentOptions = never>():
//   (
//     empytObject: ObjectWithNoKeys,
//     defaults: OptionizeDefaults<SelfOptions, ParentOptions, KeysUsedInSubclassConstructor>,
//     providedOptions?: ProvidedOptions
//   ) => ObjectWithNoKeys & OptionizeDefaults<SelfOptions, ParentOptions, KeysUsedInSubclassConstructor> & ProvidedOptions;

// The implementation gets "any" types because of the above signatures
// function optionize<???>() { return ( a: any, b?: any, c?: any ) => merge( a, b, c ); } // eslint-disable-line no-redeclare,bad-text

// TypeScript is all-or-none on inferring generic parameter types (per function), so we must use the nested strategy in
// https://stackoverflow.com/questions/63678306/typescript-partial-type-inference to specify the types we want
// while still allowing definitions to flow through.
// This also works, we will keep it here now in case it helps with further improvements with inference.
// const optionize = <S, P, M extends keyof P = never>() => {
//   return <B>( defaults: Required<Options<S>> & Partial<P> & Required<Pick<P, M>>, providedOptions?: B ) => {
//     return merge( defaults, providedOptions );
//   };
// };

/*
Limitation (I):

This gets us half way there, when you have required args to the parent, this makes sure that you don't make
providedOptions optional (with a question mark). We still need a way to note when the required param is specified via the self options.
const optionize = <S, P = EmptySelfOptions, M extends keyof P = never, A = S & P>(
  defaults: Required<Options<S>> & Partial<P> & Required<Pick<P, M>>,
  providedOptions: RequiredKeys<A> extends never ? ( A | undefined ) : A
) => {
  return merge( defaults, providedOptions );
};

TEST TO SEE IF WE CAN GET TYPESCRIPT TO KNOW ABOUT REQUIRED ARGUMENTS TO POTENTIALLY COME FROM EITHER ARG.
const optionize = <S, P = EmptySelfOptions, M extends keyof P = never, A = S & P>() => {
  type FirstArg = Required<Options<S>> & Partial<P> & Required<Pick<P, M>>;
  return (
    defaults: FirstArg,
    //NOT WORKING: If any required elements were in the first arg, then we don't need them here, and potentially can mark providedOptions as a whole as optional
    providedOptions: RequiredKeys<FirstArg> extends never ? RequiredKeys<A> extends never ? ( A | undefined ) : A : A
  ) => {
    return merge( defaults, providedOptions );
  };
};
 */

js_phetCore.register('optionize', optionize);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIm1lcmdlIiwibWVyZ2U0IiwiYSIsImIiLCJjIiwiZCIsIm9wdGlvbml6ZSIsIm9wdGlvbml6ZTMiLCJvcHRpb25pemU0IiwiY29tYmluZU9wdGlvbnMiLCJ0YXJnZXQiLCJzb3VyY2VzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJvcHRpb25pemUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogT3B0aW9uaXplIGlzIGEgVHlwZVNjcmlwdCBsYXllciBidWlsdCBvbiBQSEVUX0NPUkUvbWVyZ2UuIEl0cyBnb2FsIGlzIHRvIHNhdGlzZnkgdHlwZSBzYWZldHkgd2l0aGluIFBoRVQncyBcIm9wdGlvbnNcIlxuICogcGF0dGVybi5cbiAqXG4gKiBGb3IgdXAtdG8tZGF0ZSBleGFtcGxlcyBvbiBob3cgdG8gdXNlIHRoaXMgZmlsZSwgc2VlIFdJTERFUi9XaWxkZXJPcHRpb25zUGF0dGVybnMudHNcbiAqXG4gKiBUaGlzIHBhdHRlcm4gaXMgc3RpbGwgYmVpbmcgc29saWRpZmllZC4gQWx0aG91Z2ggdGhlIGxvbmcgdGVybSBsb2NhdGlvbiBvZiBQaEVUJ3Mgb3B0aW9ucyBwYXR0ZXJuIGRvY3VtZW50YXRpb25cbiAqIGNhbiBiZSBmb3VuZCBhdCBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1pbmZvL2Jsb2IvbWFzdGVyL2RvYy9waGV0LXNvZnR3YXJlLWRlc2lnbi1wYXR0ZXJucy5tZCNvcHRpb25zLWFuZC1jb25maWcsXG4gKiB0aGF0IGRvY3VtZW50IGlzIGN1cnJlbnRseSBvdXQgb2YgZGF0ZS4gUGxlYXNlIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvY2hpcHBlci9pc3N1ZXMvMTEyOCBmb3IgY3VycmVudFxuICogcHJvZ3Jlc3Mgb24gdGhpcyBwYXR0ZXJuLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuaW1wb3J0IG1lcmdlIGZyb20gJy4vbWVyZ2UuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4vdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuaW1wb3J0IFJlcXVpcmVkS2V5cyBmcm9tICcuL3R5cGVzL1JlcXVpcmVkS2V5cy5qcyc7XG5pbXBvcnQgT3B0aW9uYWxLZXlzIGZyb20gJy4vdHlwZXMvT3B0aW9uYWxLZXlzLmpzJztcblxuLy8gR2V0cyB0aGUgcGFydHMgb2YgYW4gb2JqZWN0IHRoYXQgYXJlIG9wdGlvbmFsXG50eXBlIE9wdGlvbnM8VD4gPSBQaWNrPFQsIE9wdGlvbmFsS2V5czxUPj47XG5cbnR5cGUgT2JqZWN0V2l0aE5vS2V5cyA9IFJlY29yZDxzdHJpbmcgfCBudW1iZXIsIG5ldmVyPjtcblxuZXhwb3J0IHR5cGUgRW1wdHlTZWxmT3B0aW9ucyA9IHtcbiAgX2VtcHR5U2VsZk9wdGlvbnNLZXk/OiBuZXZlcjtcbn07XG5cbnR5cGUgRW1wdHlTZWxmT3B0aW9uc0tleXMgPSBrZXlvZiBFbXB0eVNlbGZPcHRpb25zO1xuXG4vLyBUaGlzIGlzIHRoZSB0eXBlIGZvciB0aGUgYGRlZmF1bHRzYCBhcmd1bWVudCB0byBvcHRpb25pemVcbnR5cGUgT3B0aW9uaXplRGVmYXVsdHM8U2VsZk9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zLCBQYXJlbnRPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucywgUHJvdmlkZWRPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucz4gPVxuXG4vLyBFdmVyeXRoaW5nIG9wdGlvbmFsIGZyb20gU2VsZk9wdGlvbnMgbXVzdCBoYXZlIGEgZGVmYXVsdCBzcGVjaWZpZWRcbiAgT21pdDxSZXF1aXJlZDxPcHRpb25zPFNlbGZPcHRpb25zPj4sIEVtcHR5U2VsZk9wdGlvbnNLZXlzPiAmIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuXG4gIC8vIEFueXRoaW5nIHJlcXVpcmVkIGluIHRoZSBQcm92aWRlZE9wdGlvbnMgc2hvdWxkIG5vdCBzaG93IHVwIGluXG4gIHsgW2sgaW4gUmVxdWlyZWRLZXlzPFByb3ZpZGVkT3B0aW9ucz5dPzogbmV2ZXI7IH0gJlxuXG4gIC8vIEFueSBvciBub25lIG9mIFBhcmVudCBvcHRpb25zIGNhbiBiZSBwcm92aWRlZFxuICBQYXJ0aWFsPFBhcmVudE9wdGlvbnM+O1xuXG4vLyBGYWN0b3Igb3V0IHRoZSBtZXJnZSBhcnJvdyBjbG9zdXJlIHRvIGF2b2lkIGhlYXAvY3B1IGF0IHJ1bnRpbWVcbmNvbnN0IG1lcmdlNCA9ICggYTogSW50ZW50aW9uYWxBbnksIGI/OiBJbnRlbnRpb25hbEFueSwgYz86IEludGVudGlvbmFsQW55LCBkPzogSW50ZW50aW9uYWxBbnkgKSA9PiBtZXJnZSggYSwgYiwgYywgZCApO1xuXG4vLyBQcm92aWRlZE9wdGlvbnMgPSBUaGUgdHlwZSBvZiB0aGlzIGNsYXNzJ3MgcHVibGljIEFQSSAodHlwZSBvZiB0aGUgcHJvdmlkZWRPcHRpb25zIHBhcmFtZXRlciBpbiB0aGUgY29uc3RydWN0b3IpXG4vLyBTZWxmT3B0aW9ucyA9IE9wdGlvbnMgdGhhdCBhcmUgZGVmaW5lZCBieSBcInRoaXNcIiBjbGFzcy4gQW55dGhpbmcgb3B0aW9uYWwgaW4gdGhpcyBibG9jayBtdXN0IGhhdmUgYSBkZWZhdWx0IHByb3ZpZGVkIGluIFwiZGVmYXVsdHNcIlxuLy8gUGFyZW50T3B0aW9ucyA9IFRoZSBwdWJsaWMgQVBJIGZvciBwYXJlbnQgb3B0aW9ucywgdGhpcyB3aWxsIGJlIGV4cG9ydGVkIGJ5IHRoZSBwYXJlbnQgY2xhc3MsIGxpa2UgXCJOb2RlT3B0aW9uc1wiXG4vLyBLZXlzVXNlZEluU3ViY2xhc3NDb25zdHJ1Y3RvciA9IGxpc3Qgb2Yga2V5cyBmcm9tIFBhcmVudE9wdGlvbnMgdGhhdCBhcmUgdXNlZCBpbiB0aGlzIGNvbnN0cnVjdG9yLlxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3B0aW9uaXplPFByb3ZpZGVkT3B0aW9ucyxcbiAgU2VsZk9wdGlvbnMgPSBQcm92aWRlZE9wdGlvbnMsXG4gIFBhcmVudE9wdGlvbnMgPSBSZWNvcmQ8bmV2ZXIsIG5ldmVyPj4oKTpcbiAgPEtleXNVc2VkSW5TdWJjbGFzc0NvbnN0cnVjdG9yIGV4dGVuZHMga2V5b2YgKCBQYXJlbnRPcHRpb25zICk+KFxuICAgIGRlZmF1bHRzOiBPcHRpb25pemVEZWZhdWx0czxTZWxmT3B0aW9ucywgUGFyZW50T3B0aW9ucywgUHJvdmlkZWRPcHRpb25zPixcbiAgICBwcm92aWRlZE9wdGlvbnM/OiBQcm92aWRlZE9wdGlvbnNcbiAgKSA9PiBPcHRpb25pemVEZWZhdWx0czxTZWxmT3B0aW9ucywgUGFyZW50T3B0aW9ucz4gJiBQcm92aWRlZE9wdGlvbnMgJiBSZXF1aXJlZDxQaWNrPFBhcmVudE9wdGlvbnMsIEtleXNVc2VkSW5TdWJjbGFzc0NvbnN0cnVjdG9yPj4ge1xuICByZXR1cm4gbWVyZ2U0O1xufVxuXG4vLyBVc2UgdGhpcyBmdW5jdGlvbiB0byBnYWluIHRoZSB0eXBpbmcgdGhhdCBvcHRpb25pemUgcHJvdmlkZXMgYnV0IGluIGEgY2FzZSB3aGVyZSB0aGUgZmlyc3QgYXJndW1lbnQgaXMgYW4gZW1wdHkgb2JqZWN0LlxuZXhwb3J0IGZ1bmN0aW9uIG9wdGlvbml6ZTM8UHJvdmlkZWRPcHRpb25zLFxuICBTZWxmT3B0aW9ucyA9IFByb3ZpZGVkT3B0aW9ucyxcbiAgUGFyZW50T3B0aW9ucyA9IFJlY29yZDxuZXZlciwgbmV2ZXI+PigpOlxuICA8S2V5c1VzZWRJblN1YmNsYXNzQ29uc3RydWN0b3IgZXh0ZW5kcyBrZXlvZiAoIFBhcmVudE9wdGlvbnMgKT4oXG4gICAgZW1wdHlPYmplY3Q6IE9iamVjdFdpdGhOb0tleXMsXG4gICAgZGVmYXVsdHM6IE9wdGlvbml6ZURlZmF1bHRzPFNlbGZPcHRpb25zLCBQYXJlbnRPcHRpb25zPixcbiAgICBwcm92aWRlZE9wdGlvbnM/OiBQcm92aWRlZE9wdGlvbnNcbiAgKSA9PiBPcHRpb25pemVEZWZhdWx0czxTZWxmT3B0aW9ucywgUGFyZW50T3B0aW9ucz4gJiBQcm92aWRlZE9wdGlvbnMgJiBSZXF1aXJlZDxQaWNrPFBhcmVudE9wdGlvbnMsIEtleXNVc2VkSW5TdWJjbGFzc0NvbnN0cnVjdG9yPj4ge1xuICByZXR1cm4gbWVyZ2U0O1xufVxuXG4vKipcbiAqIFVzZSB0aGlzIGZ1bmN0aW9uIHRvIHJlcGxhY2UgbWVyZ2UgaW4gY2FzZXMgbGlrZTpcbiAqXG4gKiBjb25zdCBvcHRpb25zID0gbS1lLXItZy1lKFxuICogICB7fSxcbiAqXG4gKiAgIC8vIFBhcmVudE9wdGlvbnMgZGVmYXVsdHMgdGhhdCBhcmUgY29tbW9uIHRocm91Z2hvdXQgdGhlIHNpbVxuICogICBNeUNvbnN0YW50cy5TT01FX0NPTU1PTl9PUFRJT05TLFxuICpcbiAqICAgLy8gU2VsZk9wdGlvbnMgYW5kIFBhcmVudE9wdGlvbnMgZGVmYXVsdHMgdGhhdCBhcmUgcHJvdmlkZWQgYnkgdGhpcyBjbGFzc1xuICogICB7IC4uLiB9LFxuICpcbiAqICAgLy8gb3B0aW9uIHZhbHVlcyB0aGF0IGFyZSBwcm92aWRlZCBieSB0aGUgY2FsbGVyXG4gKiAgIHByb3ZpZGVkT3B0aW9ucyApO1xuICovXG5leHBvcnQgZnVuY3Rpb24gb3B0aW9uaXplNDxQcm92aWRlZE9wdGlvbnMsXG4gIFNlbGZPcHRpb25zID0gUHJvdmlkZWRPcHRpb25zLFxuICBQYXJlbnRPcHRpb25zID0gb2JqZWN0PigpOlxuICA8S2V5c1VzZWRJblN1YmNsYXNzQ29uc3RydWN0b3IgZXh0ZW5kcyBrZXlvZiAoIFBhcmVudE9wdGlvbnMgKT4oXG4gICAgZW1wdHlPYmplY3Q6IE9iamVjdFdpdGhOb0tleXMsXG4gICAgZGVmYXVsdHMxOiBQYXJ0aWFsPFBhcmVudE9wdGlvbnM+LFxuICAgIGRlZmF1bHRzMjogT3B0aW9uaXplRGVmYXVsdHM8U2VsZk9wdGlvbnMsIFBhcmVudE9wdGlvbnM+LFxuICAgIHByb3ZpZGVkT3B0aW9ucz86IFByb3ZpZGVkT3B0aW9uc1xuICApID0+IE9wdGlvbml6ZURlZmF1bHRzPFNlbGZPcHRpb25zLCBQYXJlbnRPcHRpb25zPiAmIFByb3ZpZGVkT3B0aW9ucyAmIFJlcXVpcmVkPFBpY2s8UGFyZW50T3B0aW9ucywgS2V5c1VzZWRJblN1YmNsYXNzQ29uc3RydWN0b3I+PiB7XG4gIHJldHVybiBtZXJnZTQ7XG59XG5cbi8vIFVzZSBjb21iaW5lT3B0aW9ucyB0byBjb21iaW5lIG9iamVjdCBsaXRlcmFscyAodHlwaWNhbGx5IG9wdGlvbnMpIHRoYXQgYWxsIGhhdmUgdGhlIHNhbWUgdHlwZS5cbmV4cG9ydCBmdW5jdGlvbiBjb21iaW5lT3B0aW9uczxUeXBlIGV4dGVuZHMgb2JqZWN0PiggdGFyZ2V0OiBQYXJ0aWFsPFR5cGU+LCAuLi5zb3VyY2VzOiBBcnJheTxQYXJ0aWFsPFR5cGU+IHwgdW5kZWZpbmVkPiApOiBUeXBlIHtcbiAgcmV0dXJuIG1lcmdlNCggdGFyZ2V0LCAuLi5zb3VyY2VzICk7XG59XG5cblxuLy8gZnVuY3Rpb24gb3B0aW9uaXplPFByb3ZpZGVkT3B0aW9ucywgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1yZWRlY2xhcmVcbi8vICAgU2VsZk9wdGlvbnMgPSBQcm92aWRlZE9wdGlvbnMsXG4vLyAgIFBhcmVudE9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zPigpOlxuLy8gICA8S2V5c1VzZWRJblN1YmNsYXNzQ29uc3RydWN0b3IgZXh0ZW5kcyBrZXlvZiAoIFBhcmVudE9wdGlvbnMgKT4oXG4vLyAgICAgZW1wdHlPYmplY3Q6IE9iamVjdFdpdGhOb0tleXMsXG4vLyAgICAgZGVmYXVsdHM6IE9wdGlvbml6ZURlZmF1bHRzPFNlbGZPcHRpb25zLCBQYXJlbnRPcHRpb25zPixcbi8vICAgICBwcm92aWRlZE9wdGlvbnM/OiBQcm92aWRlZE9wdGlvbnNcbi8vICAgKSA9PiBPcHRpb25pemVEZWZhdWx0czxTZWxmT3B0aW9ucywgUGFyZW50T3B0aW9ucz4gJiBQcm92aWRlZE9wdGlvbnMgJiBSZXF1aXJlZDxQaWNrPFBhcmVudE9wdGlvbnMsIEtleXNVc2VkSW5TdWJjbGFzc0NvbnN0cnVjdG9yPj47XG4vL1xuLy8gZnVuY3Rpb24gb3B0aW9uaXplPFByb3ZpZGVkT3B0aW9ucywgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1yZWRlY2xhcmVcbi8vICAgU2VsZk9wdGlvbnMgPSBQcm92aWRlZE9wdGlvbnMsXG4vLyAgIFBhcmVudE9wdGlvbnMgPSBFbXB0eVNlbGZPcHRpb25zLFxuLy8gICBLZXlzVXNlZEluU3ViY2xhc3NDb25zdHJ1Y3RvciBleHRlbmRzIGtleW9mIFBhcmVudE9wdGlvbnMgPSBuZXZlcj4oKTpcbi8vICAgKFxuLy8gICAgIGVtcHl0T2JqZWN0OiBPYmplY3RXaXRoTm9LZXlzLFxuLy8gICAgIGRlZmF1bHRzOiBPcHRpb25pemVEZWZhdWx0czxTZWxmT3B0aW9ucywgUGFyZW50T3B0aW9ucywgS2V5c1VzZWRJblN1YmNsYXNzQ29uc3RydWN0b3I+LFxuLy8gICAgIHByb3ZpZGVkT3B0aW9ucz86IFByb3ZpZGVkT3B0aW9uc1xuLy8gICApID0+IE9iamVjdFdpdGhOb0tleXMgJiBPcHRpb25pemVEZWZhdWx0czxTZWxmT3B0aW9ucywgUGFyZW50T3B0aW9ucywgS2V5c1VzZWRJblN1YmNsYXNzQ29uc3RydWN0b3I+ICYgUHJvdmlkZWRPcHRpb25zO1xuXG4vLyBUaGUgaW1wbGVtZW50YXRpb24gZ2V0cyBcImFueVwiIHR5cGVzIGJlY2F1c2Ugb2YgdGhlIGFib3ZlIHNpZ25hdHVyZXNcbi8vIGZ1bmN0aW9uIG9wdGlvbml6ZTw/Pz8+KCkgeyByZXR1cm4gKCBhOiBhbnksIGI/OiBhbnksIGM/OiBhbnkgKSA9PiBtZXJnZSggYSwgYiwgYyApOyB9IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVkZWNsYXJlLGJhZC10ZXh0XG5cbi8vIFR5cGVTY3JpcHQgaXMgYWxsLW9yLW5vbmUgb24gaW5mZXJyaW5nIGdlbmVyaWMgcGFyYW1ldGVyIHR5cGVzIChwZXIgZnVuY3Rpb24pLCBzbyB3ZSBtdXN0IHVzZSB0aGUgbmVzdGVkIHN0cmF0ZWd5IGluXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy82MzY3ODMwNi90eXBlc2NyaXB0LXBhcnRpYWwtdHlwZS1pbmZlcmVuY2UgdG8gc3BlY2lmeSB0aGUgdHlwZXMgd2Ugd2FudFxuLy8gd2hpbGUgc3RpbGwgYWxsb3dpbmcgZGVmaW5pdGlvbnMgdG8gZmxvdyB0aHJvdWdoLlxuLy8gVGhpcyBhbHNvIHdvcmtzLCB3ZSB3aWxsIGtlZXAgaXQgaGVyZSBub3cgaW4gY2FzZSBpdCBoZWxwcyB3aXRoIGZ1cnRoZXIgaW1wcm92ZW1lbnRzIHdpdGggaW5mZXJlbmNlLlxuLy8gY29uc3Qgb3B0aW9uaXplID0gPFMsIFAsIE0gZXh0ZW5kcyBrZXlvZiBQID0gbmV2ZXI+KCkgPT4ge1xuLy8gICByZXR1cm4gPEI+KCBkZWZhdWx0czogUmVxdWlyZWQ8T3B0aW9uczxTPj4gJiBQYXJ0aWFsPFA+ICYgUmVxdWlyZWQ8UGljazxQLCBNPj4sIHByb3ZpZGVkT3B0aW9ucz86IEIgKSA9PiB7XG4vLyAgICAgcmV0dXJuIG1lcmdlKCBkZWZhdWx0cywgcHJvdmlkZWRPcHRpb25zICk7XG4vLyAgIH07XG4vLyB9O1xuXG4vKlxuTGltaXRhdGlvbiAoSSk6XG5cblRoaXMgZ2V0cyB1cyBoYWxmIHdheSB0aGVyZSwgd2hlbiB5b3UgaGF2ZSByZXF1aXJlZCBhcmdzIHRvIHRoZSBwYXJlbnQsIHRoaXMgbWFrZXMgc3VyZSB0aGF0IHlvdSBkb24ndCBtYWtlXG5wcm92aWRlZE9wdGlvbnMgb3B0aW9uYWwgKHdpdGggYSBxdWVzdGlvbiBtYXJrKS4gV2Ugc3RpbGwgbmVlZCBhIHdheSB0byBub3RlIHdoZW4gdGhlIHJlcXVpcmVkIHBhcmFtIGlzIHNwZWNpZmllZCB2aWEgdGhlIHNlbGYgb3B0aW9ucy5cbmNvbnN0IG9wdGlvbml6ZSA9IDxTLCBQID0gRW1wdHlTZWxmT3B0aW9ucywgTSBleHRlbmRzIGtleW9mIFAgPSBuZXZlciwgQSA9IFMgJiBQPihcbiAgZGVmYXVsdHM6IFJlcXVpcmVkPE9wdGlvbnM8Uz4+ICYgUGFydGlhbDxQPiAmIFJlcXVpcmVkPFBpY2s8UCwgTT4+LFxuICBwcm92aWRlZE9wdGlvbnM6IFJlcXVpcmVkS2V5czxBPiBleHRlbmRzIG5ldmVyID8gKCBBIHwgdW5kZWZpbmVkICkgOiBBXG4pID0+IHtcbiAgcmV0dXJuIG1lcmdlKCBkZWZhdWx0cywgcHJvdmlkZWRPcHRpb25zICk7XG59O1xuXG5URVNUIFRPIFNFRSBJRiBXRSBDQU4gR0VUIFRZUEVTQ1JJUFQgVE8gS05PVyBBQk9VVCBSRVFVSVJFRCBBUkdVTUVOVFMgVE8gUE9URU5USUFMTFkgQ09NRSBGUk9NIEVJVEhFUiBBUkcuXG5jb25zdCBvcHRpb25pemUgPSA8UywgUCA9IEVtcHR5U2VsZk9wdGlvbnMsIE0gZXh0ZW5kcyBrZXlvZiBQID0gbmV2ZXIsIEEgPSBTICYgUD4oKSA9PiB7XG4gIHR5cGUgRmlyc3RBcmcgPSBSZXF1aXJlZDxPcHRpb25zPFM+PiAmIFBhcnRpYWw8UD4gJiBSZXF1aXJlZDxQaWNrPFAsIE0+PjtcbiAgcmV0dXJuIChcbiAgICBkZWZhdWx0czogRmlyc3RBcmcsXG4gICAgLy9OT1QgV09SS0lORzogSWYgYW55IHJlcXVpcmVkIGVsZW1lbnRzIHdlcmUgaW4gdGhlIGZpcnN0IGFyZywgdGhlbiB3ZSBkb24ndCBuZWVkIHRoZW0gaGVyZSwgYW5kIHBvdGVudGlhbGx5IGNhbiBtYXJrIHByb3ZpZGVkT3B0aW9ucyBhcyBhIHdob2xlIGFzIG9wdGlvbmFsXG4gICAgcHJvdmlkZWRPcHRpb25zOiBSZXF1aXJlZEtleXM8Rmlyc3RBcmc+IGV4dGVuZHMgbmV2ZXIgPyBSZXF1aXJlZEtleXM8QT4gZXh0ZW5kcyBuZXZlciA/ICggQSB8IHVuZGVmaW5lZCApIDogQSA6IEFcbiAgKSA9PiB7XG4gICAgcmV0dXJuIG1lcmdlKCBkZWZhdWx0cywgcHJvdmlkZWRPcHRpb25zICk7XG4gIH07XG59O1xuICovXG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnb3B0aW9uaXplJywgb3B0aW9uaXplICk7XG5leHBvcnQgdHlwZSB7IE9wdGlvbml6ZURlZmF1bHRzIH07Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlO0FBQ3BDLE9BQU9DLEtBQUssTUFBTSxZQUFZO0FBNEI5QjtBQUNBLE1BQU1DLE1BQU0sR0FBR0EsQ0FBRUMsQ0FBaUIsRUFBRUMsQ0FBa0IsRUFBRUMsQ0FBa0IsRUFBRUMsQ0FBa0IsS0FBTUwsS0FBSyxDQUFFRSxDQUFDLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLENBQUU7O0FBRXZIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxTQUFTQyxTQUFTQSxDQUFBLEVBTXFHO0VBQ3BJLE9BQU9MLE1BQU07QUFDZjs7QUFFQTtBQUNBLE9BQU8sU0FBU00sVUFBVUEsQ0FBQSxFQU80RztFQUNwSSxPQUFPTixNQUFNO0FBQ2Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTTyxVQUFVQSxDQUFBLEVBUTRHO0VBQ3BJLE9BQU9QLE1BQU07QUFDZjs7QUFFQTtBQUNBLE9BQU8sU0FBU1EsY0FBY0EsQ0FBdUJDLE1BQXFCLEVBQUUsR0FBR0MsT0FBeUMsRUFBUztFQUMvSCxPQUFPVixNQUFNLENBQUVTLE1BQU0sRUFBRSxHQUFHQyxPQUFPLENBQUU7QUFDckM7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQVosUUFBUSxDQUFDYSxRQUFRLENBQUUsV0FBVyxFQUFFTixTQUFTLENBQUUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/tandemNamespace.js
// Copyright 2015-2022, University of Colorado Boulder

/**
 * Creates the namespace for this repository.  By convention, this should have been declared in a file "tandem.js"
 * But that filename was already used for Tandem.js, so we use the alternate convention discussed in:
 * https://github.com/phetsims/tandem/issues/5#issuecomment-162597651
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */


/* harmony default export */ const tandemNamespace = (new js_Namespace('tandem'));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOYW1lc3BhY2UiXSwic291cmNlcyI6WyJ0YW5kZW1OYW1lc3BhY2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ3JlYXRlcyB0aGUgbmFtZXNwYWNlIGZvciB0aGlzIHJlcG9zaXRvcnkuICBCeSBjb252ZW50aW9uLCB0aGlzIHNob3VsZCBoYXZlIGJlZW4gZGVjbGFyZWQgaW4gYSBmaWxlIFwidGFuZGVtLmpzXCJcbiAqIEJ1dCB0aGF0IGZpbGVuYW1lIHdhcyBhbHJlYWR5IHVzZWQgZm9yIFRhbmRlbS5qcywgc28gd2UgdXNlIHRoZSBhbHRlcm5hdGUgY29udmVudGlvbiBkaXNjdXNzZWQgaW46XG4gKiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdGFuZGVtL2lzc3Vlcy81I2lzc3VlY29tbWVudC0xNjI1OTc2NTFcbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBOYW1lc3BhY2UgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL05hbWVzcGFjZS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IG5ldyBOYW1lc3BhY2UoICd0YW5kZW0nICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQU0saUNBQWlDO0FBRXZELGVBQWUsSUFBSUEsU0FBUyxDQUFFLFFBQVEsQ0FBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/deprecationWarning.js
// Copyright 2020, University of Colorado Boulder

/**
 * Output deprecation warnings to console.warn when ?deprecationWarnings is specified
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */



// contains all messages printed for deprecation warnings so that we do not print the same message multiple times
const deprecatedMessages = {};
const deprecationWarning = message => {
  if (window.phet && window.phet.chipper && window.phet.chipper.queryParameters && phet.chipper.queryParameters.deprecationWarnings) {
    if (!deprecatedMessages.hasOwnProperty(message)) {
      deprecatedMessages[message] = true;
      console.warn(`Deprecation warning: ${message}`);
    }
  }
};
js_phetCore.register('deprecationWarning', deprecationWarning);
/* harmony default export */ const js_deprecationWarning = (deprecationWarning);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImRlcHJlY2F0ZWRNZXNzYWdlcyIsImRlcHJlY2F0aW9uV2FybmluZyIsIm1lc3NhZ2UiLCJ3aW5kb3ciLCJwaGV0IiwiY2hpcHBlciIsInF1ZXJ5UGFyYW1ldGVycyIsImRlcHJlY2F0aW9uV2FybmluZ3MiLCJoYXNPd25Qcm9wZXJ0eSIsImNvbnNvbGUiLCJ3YXJuIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJkZXByZWNhdGlvbldhcm5pbmcuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIE91dHB1dCBkZXByZWNhdGlvbiB3YXJuaW5ncyB0byBjb25zb2xlLndhcm4gd2hlbiA/ZGVwcmVjYXRpb25XYXJuaW5ncyBpcyBzcGVjaWZpZWRcbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuLy8gY29udGFpbnMgYWxsIG1lc3NhZ2VzIHByaW50ZWQgZm9yIGRlcHJlY2F0aW9uIHdhcm5pbmdzIHNvIHRoYXQgd2UgZG8gbm90IHByaW50IHRoZSBzYW1lIG1lc3NhZ2UgbXVsdGlwbGUgdGltZXNcbmNvbnN0IGRlcHJlY2F0ZWRNZXNzYWdlcyA9IHt9O1xuXG5jb25zdCBkZXByZWNhdGlvbldhcm5pbmcgPSBtZXNzYWdlID0+IHtcbiAgaWYgKCB3aW5kb3cucGhldCAmJiB3aW5kb3cucGhldC5jaGlwcGVyICYmIHdpbmRvdy5waGV0LmNoaXBwZXIucXVlcnlQYXJhbWV0ZXJzICYmIHBoZXQuY2hpcHBlci5xdWVyeVBhcmFtZXRlcnMuZGVwcmVjYXRpb25XYXJuaW5ncyApIHtcbiAgICBpZiAoICFkZXByZWNhdGVkTWVzc2FnZXMuaGFzT3duUHJvcGVydHkoIG1lc3NhZ2UgKSApIHtcbiAgICAgIGRlcHJlY2F0ZWRNZXNzYWdlc1sgbWVzc2FnZSBdID0gdHJ1ZTtcbiAgICAgIGNvbnNvbGUud2FybiggYERlcHJlY2F0aW9uIHdhcm5pbmc6ICR7bWVzc2FnZX1gICk7XG4gICAgfVxuICB9XG59O1xuXG5waGV0Q29yZS5yZWdpc3RlciggJ2RlcHJlY2F0aW9uV2FybmluZycsIGRlcHJlY2F0aW9uV2FybmluZyApO1xuXG5leHBvcnQgZGVmYXVsdCBkZXByZWNhdGlvbldhcm5pbmc7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlOztBQUVwQztBQUNBLE1BQU1DLGtCQUFrQixHQUFHLENBQUMsQ0FBQztBQUU3QixNQUFNQyxrQkFBa0IsR0FBR0MsT0FBTyxJQUFJO0VBQ3BDLElBQUtDLE1BQU0sQ0FBQ0MsSUFBSSxJQUFJRCxNQUFNLENBQUNDLElBQUksQ0FBQ0MsT0FBTyxJQUFJRixNQUFNLENBQUNDLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxlQUFlLElBQUlGLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxlQUFlLENBQUNDLG1CQUFtQixFQUFHO0lBQ25JLElBQUssQ0FBQ1Asa0JBQWtCLENBQUNRLGNBQWMsQ0FBRU4sT0FBTyxDQUFFLEVBQUc7TUFDbkRGLGtCQUFrQixDQUFFRSxPQUFPLENBQUUsR0FBRyxJQUFJO01BQ3BDTyxPQUFPLENBQUNDLElBQUksQ0FBRyx3QkFBdUJSLE9BQVEsRUFBQyxDQUFFO0lBQ25EO0VBQ0Y7QUFDRixDQUFDO0FBRURILFFBQVEsQ0FBQ1ksUUFBUSxDQUFFLG9CQUFvQixFQUFFVixrQkFBa0IsQ0FBRTtBQUU3RCxlQUFlQSxrQkFBa0IifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/EnumerationDeprecated.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * Creates a simple enumeration, with most of the boilerplate.
 *
 * An EnumerationDeprecated can be created like this:
 *
 *   const CardinalDirection = EnumerationDeprecated.byKeys( [ 'NORTH', 'SOUTH', 'EAST', 'WEST' ] );
 *
 * OR using rich values like so:
 *
 *   const CardinalDirection = EnumerationDeprecated.byMap( {NORTH: northObject, SOUTH: southObject, EAST: eastObject, WEST: westObject} );
 *
 * and values are referenced like this:
 *
 *   CardinalDirection.NORTH;
 *   CardinalDirection.SOUTH;
 *   CardinalDirection.EAST;
 *   CardinalDirection.WEST;
 *
 *   CardinalDirection.VALUES;
 *   // returns [ CardinalDirection.NORTH, CardinalDirection.SOUTH, CardinalDirection.EAST, CardinalDirection.WEST ]
 *
 * And support for checking whether any value is a value of the enumeration:
 *
 *   CardinalDirection.includes( CardinalDirection.NORTH ); // true
 *   CardinalDirection.includes( CardinalDirection.SOUTHWEST ); // false
 *   CardinalDirection.includes( 'NORTH' ); // false, values are not strings
 *
 * Conventions for using EnumerationDeprecated, from https://github.com/phetsims/phet-core/issues/53:
 *
 * (1) Enumerations are named like classes/types. Nothing in the name needs to identify that they are Enumerations.
 *     See the example above: CardinalDirection, not CardinalDirectionEnum or CardinalDirectionEnumeration.
 *
 * (2) EnumerationDeprecated values are named like constants, using uppercase. See the example above.
 *
 * (3) If an EnumerationDeprecated is closely related to some class, then make it a static field of that class. If an
 *     EnumerationDeprecated is specific to a Property, then the EnumerationDeprecated should likely be owned by the class that
 *     owns that Property.
 *
 * (4) If an EnumerationDeprecated is not closely related to some class, then put the EnumerationDeprecated in its own .js file.
 *     Do not combine multiple Enumerations into one file.
 *
 * (5) If a Property takes an EnumerationDeprecated value, its validation typically looks like this:
 *
 *     const cardinalDirectionProperty = new Property( CardinalDirection.NORTH, {
 *       validValues: CardinalDirection.VALUES
 *     }
 *
 * (6) Values of the EnumerationDeprecated are considered instances of the EnumerationDeprecated in documentation. For example, a method
 *     that that takes an EnumerationDeprecated value as an argument would be documented like this:
 *
 *     // @param {Scene} mode - value from Scene EnumerationDeprecated
 *     setSceneMode( mode ) {
 *       assert && assert( Scene.includes( mode ) );
 *       //...
 *     }
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */





/**
 * @deprecated
 */
class EnumerationDeprecated {
  /**
   * @param {Object} config - must provide keys such as {keys:['RED','BLUE]}
   *                          - or map such as {map:{RED: myRedValue, BLUE: myBlueValue}}
   *
   * @private - clients should use EnumerationDeprecated.byKeys or EnumerationDeprecated.byMap
   */
  constructor(config) {
    js_deprecationWarning('EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples.');
    assert && assert(config, 'config must be provided');
    const keysProvided = !!config.keys;
    const mapProvided = !!config.map;
    assert && assert(keysProvided !== mapProvided, 'must provide one or the other but not both of keys/map');
    const keys = config.keys || Object.keys(config.map);
    const map = config.map || {};
    config = js_merge({
      // {string|null} Will be appended to the EnumerationIO documentation, if provided
      phetioDocumentation: null,
      // {function(EnumerationDeprecated):|null} If provided, it will be called as beforeFreeze( enumeration ) just before the
      // enumeration is frozen. Since it's not possible to modify the enumeration after
      // it is frozen (e.g. adding convenience functions), and there is no reference to
      // the enumeration object beforehand, this allows defining custom values/methods
      // on the enumeration object itself.
      beforeFreeze: null
    }, config);
    assert && assert(Array.isArray(keys), 'Values should be an array');
    assert && assert(_.uniq(keys).length === keys.length, 'There should be no duplicated values provided');
    assert && keys.forEach(value => assert(typeof value === 'string', 'Each value should be a string'));
    assert && keys.forEach(value => assert(/^[A-Z][A-Z0-9_]*$/g.test(value), 'EnumerationDeprecated values should be uppercase alphanumeric with underscores and begin with a letter'));
    assert && assert(!_.includes(keys, 'VALUES'), 'This is the name of a built-in provided value, so it cannot be included as an enumeration value');
    assert && assert(!_.includes(keys, 'KEYS'), 'This is the name of a built-in provided value, so it cannot be included as an enumeration value');
    assert && assert(!_.includes(keys, 'includes'), 'This is the name of a built-in provided value, so it cannot be included as an enumeration value');

    // @public (phet-io) - provides additional documentation for PhET-iO which can be viewed in studio
    // Note this uses the same term as used by PhetioObject, but via a different channel.
    this.phetioDocumentation = config.phetioDocumentation;

    // @public {string[]} (read-only) - the string keys of the enumeration
    this.KEYS = keys;

    // @public {Object[]} (read-only) - the object values of the enumeration
    this.VALUES = [];
    keys.forEach(key => {
      const value = map[key] || {};

      // Set attributes of the enumeration value
      assert && assert(value.name === undefined, '"rich" enumeration values cannot provide their own name attribute');
      assert && assert(value.toString === Object.prototype.toString, '"rich" enumeration values cannot provide their own toString');

      // @public {string} (read-only) - PhET-iO public API relies on this mapping, do not change it lightly
      value.name = key;

      // @public {function():string} (read-only)
      value.toString = () => key;

      // Assign to the enumeration
      this[key] = value;
      this.VALUES.push(value);
    });
    config.beforeFreeze && config.beforeFreeze(this);
    assert && Object.freeze(this);
    assert && Object.freeze(this.VALUES);
    assert && Object.freeze(this.KEYS);
    assert && keys.forEach(key => assert && Object.freeze(map[key]));
  }

  /**
   * Based solely on the keys in EnumerationDeprecated.
   * @public
   *
   * @returns {String}
   */

  toString() {
    return this.KEYS.join(', ');
  }

  /**
   * Checks whether the given value is a value of this enumeration. Should generally be used for assertions
   * @public
   *
   * @param {Object} value
   * @returns {boolean}
   */
  includes(value) {
    return _.includes(this.VALUES, value);
  }

  /**
   * To support consistent API with Enumeration.
   * @public
   * @param {string} key
   * @returns {*}
   */
  getValue(key) {
    return this[key];
  }

  /**
   * To support consistent API with Enumeration.
   * @public
   * @param {Object} enumerationValue
   * @returns {string}
   */
  getKey(enumerationValue) {
    return enumerationValue.name;
  }

  /**
   * To support consistent API with Enumeration.
   * @public
   * @returns {Object[]}
   */
  get values() {
    return this.VALUES;
  }

  /**
   * To support consistent API with Enumeration.
   * @public
   * @returns {string[]}
   */
  get keys() {
    return this.KEYS;
  }

  /**
   * To support consistent API with Enumeration.
   * @public
   * @returns {EnumerationDeprecated}
   */
  get enumeration() {
    return this;
  }

  /**
   * Creates an enumeration based on the provided string array
   * @param {string[]} keys - such as ['RED','BLUE']
   * @param {Object} [options]
   * @returns {EnumerationDeprecated}
   * @public
   */
  static byKeys(keys, options) {
    assert && assert(Array.isArray(keys), 'keys must be an array');
    assert && assert(!options || options.keys === undefined);
    return new EnumerationDeprecated(js_merge({
      keys: keys
    }, options));
  }

  /**
   * Creates a "rich" enumeration based on the provided map
   * @param {Object} map - such as {RED: myRedValue, BLUE: myBlueValue}
   * @param {Object} [options]
   * @returns {EnumerationDeprecated}
   * @public
   */
  static byMap(map, options) {
    assert && assert(!options || options.map === undefined);
    if (assert) {
      const values = _.values(map);
      assert && assert(values.length >= 1, 'must have at least 2 entries in an enumeration');
      assert && assert(_.every(values, value => value.constructor === values[0].constructor), 'Values must have same constructor');
    }
    return new EnumerationDeprecated(js_merge({
      map: map
    }, options));
  }
}
js_phetCore.register('EnumerationDeprecated', EnumerationDeprecated);
/* harmony default export */ const js_EnumerationDeprecated = (EnumerationDeprecated);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXByZWNhdGlvbldhcm5pbmciLCJtZXJnZSIsInBoZXRDb3JlIiwiRW51bWVyYXRpb25EZXByZWNhdGVkIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJhc3NlcnQiLCJrZXlzUHJvdmlkZWQiLCJrZXlzIiwibWFwUHJvdmlkZWQiLCJtYXAiLCJPYmplY3QiLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwiYmVmb3JlRnJlZXplIiwiQXJyYXkiLCJpc0FycmF5IiwiXyIsInVuaXEiLCJsZW5ndGgiLCJmb3JFYWNoIiwidmFsdWUiLCJ0ZXN0IiwiaW5jbHVkZXMiLCJLRVlTIiwiVkFMVUVTIiwia2V5IiwibmFtZSIsInVuZGVmaW5lZCIsInRvU3RyaW5nIiwicHJvdG90eXBlIiwicHVzaCIsImZyZWV6ZSIsImpvaW4iLCJnZXRWYWx1ZSIsImdldEtleSIsImVudW1lcmF0aW9uVmFsdWUiLCJ2YWx1ZXMiLCJlbnVtZXJhdGlvbiIsImJ5S2V5cyIsIm9wdGlvbnMiLCJieU1hcCIsImV2ZXJ5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFbnVtZXJhdGlvbkRlcHJlY2F0ZWQuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ3JlYXRlcyBhIHNpbXBsZSBlbnVtZXJhdGlvbiwgd2l0aCBtb3N0IG9mIHRoZSBib2lsZXJwbGF0ZS5cbiAqXG4gKiBBbiBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgY2FuIGJlIGNyZWF0ZWQgbGlrZSB0aGlzOlxuICpcbiAqICAgY29uc3QgQ2FyZGluYWxEaXJlY3Rpb24gPSBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQuYnlLZXlzKCBbICdOT1JUSCcsICdTT1VUSCcsICdFQVNUJywgJ1dFU1QnIF0gKTtcbiAqXG4gKiBPUiB1c2luZyByaWNoIHZhbHVlcyBsaWtlIHNvOlxuICpcbiAqICAgY29uc3QgQ2FyZGluYWxEaXJlY3Rpb24gPSBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQuYnlNYXAoIHtOT1JUSDogbm9ydGhPYmplY3QsIFNPVVRIOiBzb3V0aE9iamVjdCwgRUFTVDogZWFzdE9iamVjdCwgV0VTVDogd2VzdE9iamVjdH0gKTtcbiAqXG4gKiBhbmQgdmFsdWVzIGFyZSByZWZlcmVuY2VkIGxpa2UgdGhpczpcbiAqXG4gKiAgIENhcmRpbmFsRGlyZWN0aW9uLk5PUlRIO1xuICogICBDYXJkaW5hbERpcmVjdGlvbi5TT1VUSDtcbiAqICAgQ2FyZGluYWxEaXJlY3Rpb24uRUFTVDtcbiAqICAgQ2FyZGluYWxEaXJlY3Rpb24uV0VTVDtcbiAqXG4gKiAgIENhcmRpbmFsRGlyZWN0aW9uLlZBTFVFUztcbiAqICAgLy8gcmV0dXJucyBbIENhcmRpbmFsRGlyZWN0aW9uLk5PUlRILCBDYXJkaW5hbERpcmVjdGlvbi5TT1VUSCwgQ2FyZGluYWxEaXJlY3Rpb24uRUFTVCwgQ2FyZGluYWxEaXJlY3Rpb24uV0VTVCBdXG4gKlxuICogQW5kIHN1cHBvcnQgZm9yIGNoZWNraW5nIHdoZXRoZXIgYW55IHZhbHVlIGlzIGEgdmFsdWUgb2YgdGhlIGVudW1lcmF0aW9uOlxuICpcbiAqICAgQ2FyZGluYWxEaXJlY3Rpb24uaW5jbHVkZXMoIENhcmRpbmFsRGlyZWN0aW9uLk5PUlRIICk7IC8vIHRydWVcbiAqICAgQ2FyZGluYWxEaXJlY3Rpb24uaW5jbHVkZXMoIENhcmRpbmFsRGlyZWN0aW9uLlNPVVRIV0VTVCApOyAvLyBmYWxzZVxuICogICBDYXJkaW5hbERpcmVjdGlvbi5pbmNsdWRlcyggJ05PUlRIJyApOyAvLyBmYWxzZSwgdmFsdWVzIGFyZSBub3Qgc3RyaW5nc1xuICpcbiAqIENvbnZlbnRpb25zIGZvciB1c2luZyBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQsIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtY29yZS9pc3N1ZXMvNTM6XG4gKlxuICogKDEpIEVudW1lcmF0aW9ucyBhcmUgbmFtZWQgbGlrZSBjbGFzc2VzL3R5cGVzLiBOb3RoaW5nIGluIHRoZSBuYW1lIG5lZWRzIHRvIGlkZW50aWZ5IHRoYXQgdGhleSBhcmUgRW51bWVyYXRpb25zLlxuICogICAgIFNlZSB0aGUgZXhhbXBsZSBhYm92ZTogQ2FyZGluYWxEaXJlY3Rpb24sIG5vdCBDYXJkaW5hbERpcmVjdGlvbkVudW0gb3IgQ2FyZGluYWxEaXJlY3Rpb25FbnVtZXJhdGlvbi5cbiAqXG4gKiAoMikgRW51bWVyYXRpb25EZXByZWNhdGVkIHZhbHVlcyBhcmUgbmFtZWQgbGlrZSBjb25zdGFudHMsIHVzaW5nIHVwcGVyY2FzZS4gU2VlIHRoZSBleGFtcGxlIGFib3ZlLlxuICpcbiAqICgzKSBJZiBhbiBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgaXMgY2xvc2VseSByZWxhdGVkIHRvIHNvbWUgY2xhc3MsIHRoZW4gbWFrZSBpdCBhIHN0YXRpYyBmaWVsZCBvZiB0aGF0IGNsYXNzLiBJZiBhblxuICogICAgIEVudW1lcmF0aW9uRGVwcmVjYXRlZCBpcyBzcGVjaWZpYyB0byBhIFByb3BlcnR5LCB0aGVuIHRoZSBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgc2hvdWxkIGxpa2VseSBiZSBvd25lZCBieSB0aGUgY2xhc3MgdGhhdFxuICogICAgIG93bnMgdGhhdCBQcm9wZXJ0eS5cbiAqXG4gKiAoNCkgSWYgYW4gRW51bWVyYXRpb25EZXByZWNhdGVkIGlzIG5vdCBjbG9zZWx5IHJlbGF0ZWQgdG8gc29tZSBjbGFzcywgdGhlbiBwdXQgdGhlIEVudW1lcmF0aW9uRGVwcmVjYXRlZCBpbiBpdHMgb3duIC5qcyBmaWxlLlxuICogICAgIERvIG5vdCBjb21iaW5lIG11bHRpcGxlIEVudW1lcmF0aW9ucyBpbnRvIG9uZSBmaWxlLlxuICpcbiAqICg1KSBJZiBhIFByb3BlcnR5IHRha2VzIGFuIEVudW1lcmF0aW9uRGVwcmVjYXRlZCB2YWx1ZSwgaXRzIHZhbGlkYXRpb24gdHlwaWNhbGx5IGxvb2tzIGxpa2UgdGhpczpcbiAqXG4gKiAgICAgY29uc3QgY2FyZGluYWxEaXJlY3Rpb25Qcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eSggQ2FyZGluYWxEaXJlY3Rpb24uTk9SVEgsIHtcbiAqICAgICAgIHZhbGlkVmFsdWVzOiBDYXJkaW5hbERpcmVjdGlvbi5WQUxVRVNcbiAqICAgICB9XG4gKlxuICogKDYpIFZhbHVlcyBvZiB0aGUgRW51bWVyYXRpb25EZXByZWNhdGVkIGFyZSBjb25zaWRlcmVkIGluc3RhbmNlcyBvZiB0aGUgRW51bWVyYXRpb25EZXByZWNhdGVkIGluIGRvY3VtZW50YXRpb24uIEZvciBleGFtcGxlLCBhIG1ldGhvZFxuICogICAgIHRoYXQgdGhhdCB0YWtlcyBhbiBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgdmFsdWUgYXMgYW4gYXJndW1lbnQgd291bGQgYmUgZG9jdW1lbnRlZCBsaWtlIHRoaXM6XG4gKlxuICogICAgIC8vIEBwYXJhbSB7U2NlbmV9IG1vZGUgLSB2YWx1ZSBmcm9tIFNjZW5lIEVudW1lcmF0aW9uRGVwcmVjYXRlZFxuICogICAgIHNldFNjZW5lTW9kZSggbW9kZSApIHtcbiAqICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIFNjZW5lLmluY2x1ZGVzKCBtb2RlICkgKTtcbiAqICAgICAgIC8vLi4uXG4gKiAgICAgfVxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgZGVwcmVjYXRpb25XYXJuaW5nIGZyb20gJy4vZGVwcmVjYXRpb25XYXJuaW5nLmpzJztcbmltcG9ydCBtZXJnZSBmcm9tICcuL21lcmdlLmpzJztcbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuLyoqXG4gKiBAZGVwcmVjYXRlZFxuICovXG5jbGFzcyBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnIC0gbXVzdCBwcm92aWRlIGtleXMgc3VjaCBhcyB7a2V5czpbJ1JFRCcsJ0JMVUVdfVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgLSBvciBtYXAgc3VjaCBhcyB7bWFwOntSRUQ6IG15UmVkVmFsdWUsIEJMVUU6IG15Qmx1ZVZhbHVlfX1cbiAgICpcbiAgICogQHByaXZhdGUgLSBjbGllbnRzIHNob3VsZCB1c2UgRW51bWVyYXRpb25EZXByZWNhdGVkLmJ5S2V5cyBvciBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQuYnlNYXBcbiAgICovXG4gIGNvbnN0cnVjdG9yKCBjb25maWcgKSB7XG4gICAgZGVwcmVjYXRpb25XYXJuaW5nKCAnRW51bWVyYXRpb25EZXByZWNhdGVkIHNob3VsZCBiZSBleGNoYW5nZWQgZm9yIGNsYXNzZXMgdGhhdCBleHRlbmQgRW51bWVyYXRpb25WYWx1ZSwgc2VlIFdpbGRlckVudW1lcmF0aW9uUGF0dGVybnMgZm9yIGV4YW1wbGVzLicgKTtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGNvbmZpZywgJ2NvbmZpZyBtdXN0IGJlIHByb3ZpZGVkJyApO1xuXG4gICAgY29uc3Qga2V5c1Byb3ZpZGVkID0gISFjb25maWcua2V5cztcbiAgICBjb25zdCBtYXBQcm92aWRlZCA9ICEhY29uZmlnLm1hcDtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBrZXlzUHJvdmlkZWQgIT09IG1hcFByb3ZpZGVkLCAnbXVzdCBwcm92aWRlIG9uZSBvciB0aGUgb3RoZXIgYnV0IG5vdCBib3RoIG9mIGtleXMvbWFwJyApO1xuXG4gICAgY29uc3Qga2V5cyA9IGNvbmZpZy5rZXlzIHx8IE9iamVjdC5rZXlzKCBjb25maWcubWFwICk7XG4gICAgY29uc3QgbWFwID0gY29uZmlnLm1hcCB8fCB7fTtcblxuICAgIGNvbmZpZyA9IG1lcmdlKCB7XG5cbiAgICAgIC8vIHtzdHJpbmd8bnVsbH0gV2lsbCBiZSBhcHBlbmRlZCB0byB0aGUgRW51bWVyYXRpb25JTyBkb2N1bWVudGF0aW9uLCBpZiBwcm92aWRlZFxuICAgICAgcGhldGlvRG9jdW1lbnRhdGlvbjogbnVsbCxcblxuICAgICAgLy8ge2Z1bmN0aW9uKEVudW1lcmF0aW9uRGVwcmVjYXRlZCk6fG51bGx9IElmIHByb3ZpZGVkLCBpdCB3aWxsIGJlIGNhbGxlZCBhcyBiZWZvcmVGcmVlemUoIGVudW1lcmF0aW9uICkganVzdCBiZWZvcmUgdGhlXG4gICAgICAvLyBlbnVtZXJhdGlvbiBpcyBmcm96ZW4uIFNpbmNlIGl0J3Mgbm90IHBvc3NpYmxlIHRvIG1vZGlmeSB0aGUgZW51bWVyYXRpb24gYWZ0ZXJcbiAgICAgIC8vIGl0IGlzIGZyb3plbiAoZS5nLiBhZGRpbmcgY29udmVuaWVuY2UgZnVuY3Rpb25zKSwgYW5kIHRoZXJlIGlzIG5vIHJlZmVyZW5jZSB0b1xuICAgICAgLy8gdGhlIGVudW1lcmF0aW9uIG9iamVjdCBiZWZvcmVoYW5kLCB0aGlzIGFsbG93cyBkZWZpbmluZyBjdXN0b20gdmFsdWVzL21ldGhvZHNcbiAgICAgIC8vIG9uIHRoZSBlbnVtZXJhdGlvbiBvYmplY3QgaXRzZWxmLlxuICAgICAgYmVmb3JlRnJlZXplOiBudWxsXG4gICAgfSwgY29uZmlnICk7XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBrZXlzICksICdWYWx1ZXMgc2hvdWxkIGJlIGFuIGFycmF5JyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIF8udW5pcSgga2V5cyApLmxlbmd0aCA9PT0ga2V5cy5sZW5ndGgsICdUaGVyZSBzaG91bGQgYmUgbm8gZHVwbGljYXRlZCB2YWx1ZXMgcHJvdmlkZWQnICk7XG4gICAgYXNzZXJ0ICYmIGtleXMuZm9yRWFjaCggdmFsdWUgPT4gYXNzZXJ0KCB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnLCAnRWFjaCB2YWx1ZSBzaG91bGQgYmUgYSBzdHJpbmcnICkgKTtcbiAgICBhc3NlcnQgJiYga2V5cy5mb3JFYWNoKCB2YWx1ZSA9PiBhc3NlcnQoIC9eW0EtWl1bQS1aMC05X10qJC9nLnRlc3QoIHZhbHVlICksXG4gICAgICAnRW51bWVyYXRpb25EZXByZWNhdGVkIHZhbHVlcyBzaG91bGQgYmUgdXBwZXJjYXNlIGFscGhhbnVtZXJpYyB3aXRoIHVuZGVyc2NvcmVzIGFuZCBiZWdpbiB3aXRoIGEgbGV0dGVyJyApICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIV8uaW5jbHVkZXMoIGtleXMsICdWQUxVRVMnICksXG4gICAgICAnVGhpcyBpcyB0aGUgbmFtZSBvZiBhIGJ1aWx0LWluIHByb3ZpZGVkIHZhbHVlLCBzbyBpdCBjYW5ub3QgYmUgaW5jbHVkZWQgYXMgYW4gZW51bWVyYXRpb24gdmFsdWUnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIV8uaW5jbHVkZXMoIGtleXMsICdLRVlTJyApLFxuICAgICAgJ1RoaXMgaXMgdGhlIG5hbWUgb2YgYSBidWlsdC1pbiBwcm92aWRlZCB2YWx1ZSwgc28gaXQgY2Fubm90IGJlIGluY2x1ZGVkIGFzIGFuIGVudW1lcmF0aW9uIHZhbHVlJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICFfLmluY2x1ZGVzKCBrZXlzLCAnaW5jbHVkZXMnICksXG4gICAgICAnVGhpcyBpcyB0aGUgbmFtZSBvZiBhIGJ1aWx0LWluIHByb3ZpZGVkIHZhbHVlLCBzbyBpdCBjYW5ub3QgYmUgaW5jbHVkZWQgYXMgYW4gZW51bWVyYXRpb24gdmFsdWUnICk7XG5cbiAgICAvLyBAcHVibGljIChwaGV0LWlvKSAtIHByb3ZpZGVzIGFkZGl0aW9uYWwgZG9jdW1lbnRhdGlvbiBmb3IgUGhFVC1pTyB3aGljaCBjYW4gYmUgdmlld2VkIGluIHN0dWRpb1xuICAgIC8vIE5vdGUgdGhpcyB1c2VzIHRoZSBzYW1lIHRlcm0gYXMgdXNlZCBieSBQaGV0aW9PYmplY3QsIGJ1dCB2aWEgYSBkaWZmZXJlbnQgY2hhbm5lbC5cbiAgICB0aGlzLnBoZXRpb0RvY3VtZW50YXRpb24gPSBjb25maWcucGhldGlvRG9jdW1lbnRhdGlvbjtcblxuICAgIC8vIEBwdWJsaWMge3N0cmluZ1tdfSAocmVhZC1vbmx5KSAtIHRoZSBzdHJpbmcga2V5cyBvZiB0aGUgZW51bWVyYXRpb25cbiAgICB0aGlzLktFWVMgPSBrZXlzO1xuXG4gICAgLy8gQHB1YmxpYyB7T2JqZWN0W119IChyZWFkLW9ubHkpIC0gdGhlIG9iamVjdCB2YWx1ZXMgb2YgdGhlIGVudW1lcmF0aW9uXG4gICAgdGhpcy5WQUxVRVMgPSBbXTtcblxuICAgIGtleXMuZm9yRWFjaCgga2V5ID0+IHtcbiAgICAgIGNvbnN0IHZhbHVlID0gbWFwWyBrZXkgXSB8fCB7fTtcblxuICAgICAgLy8gU2V0IGF0dHJpYnV0ZXMgb2YgdGhlIGVudW1lcmF0aW9uIHZhbHVlXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2YWx1ZS5uYW1lID09PSB1bmRlZmluZWQsICdcInJpY2hcIiBlbnVtZXJhdGlvbiB2YWx1ZXMgY2Fubm90IHByb3ZpZGUgdGhlaXIgb3duIG5hbWUgYXR0cmlidXRlJyApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdmFsdWUudG9TdHJpbmcgPT09IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcsICdcInJpY2hcIiBlbnVtZXJhdGlvbiB2YWx1ZXMgY2Fubm90IHByb3ZpZGUgdGhlaXIgb3duIHRvU3RyaW5nJyApO1xuXG4gICAgICAvLyBAcHVibGljIHtzdHJpbmd9IChyZWFkLW9ubHkpIC0gUGhFVC1pTyBwdWJsaWMgQVBJIHJlbGllcyBvbiB0aGlzIG1hcHBpbmcsIGRvIG5vdCBjaGFuZ2UgaXQgbGlnaHRseVxuICAgICAgdmFsdWUubmFtZSA9IGtleTtcblxuICAgICAgLy8gQHB1YmxpYyB7ZnVuY3Rpb24oKTpzdHJpbmd9IChyZWFkLW9ubHkpXG4gICAgICB2YWx1ZS50b1N0cmluZyA9ICgpID0+IGtleTtcblxuICAgICAgLy8gQXNzaWduIHRvIHRoZSBlbnVtZXJhdGlvblxuICAgICAgdGhpc1sga2V5IF0gPSB2YWx1ZTtcbiAgICAgIHRoaXMuVkFMVUVTLnB1c2goIHZhbHVlICk7XG4gICAgfSApO1xuXG4gICAgY29uZmlnLmJlZm9yZUZyZWV6ZSAmJiBjb25maWcuYmVmb3JlRnJlZXplKCB0aGlzICk7XG4gICAgYXNzZXJ0ICYmIE9iamVjdC5mcmVlemUoIHRoaXMgKTtcbiAgICBhc3NlcnQgJiYgT2JqZWN0LmZyZWV6ZSggdGhpcy5WQUxVRVMgKTtcbiAgICBhc3NlcnQgJiYgT2JqZWN0LmZyZWV6ZSggdGhpcy5LRVlTICk7XG4gICAgYXNzZXJ0ICYmIGtleXMuZm9yRWFjaCgga2V5ID0+IGFzc2VydCAmJiBPYmplY3QuZnJlZXplKCBtYXBbIGtleSBdICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCYXNlZCBzb2xlbHkgb24gdGhlIGtleXMgaW4gRW51bWVyYXRpb25EZXByZWNhdGVkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtTdHJpbmd9XG4gICAqL1xuXG4gIHRvU3RyaW5nKCkge1xuICAgIHJldHVybiB0aGlzLktFWVMuam9pbiggJywgJyApO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrcyB3aGV0aGVyIHRoZSBnaXZlbiB2YWx1ZSBpcyBhIHZhbHVlIG9mIHRoaXMgZW51bWVyYXRpb24uIFNob3VsZCBnZW5lcmFsbHkgYmUgdXNlZCBmb3IgYXNzZXJ0aW9uc1xuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGluY2x1ZGVzKCB2YWx1ZSApIHtcbiAgICByZXR1cm4gXy5pbmNsdWRlcyggdGhpcy5WQUxVRVMsIHZhbHVlICk7XG4gIH1cblxuICAvKipcbiAgICogVG8gc3VwcG9ydCBjb25zaXN0ZW50IEFQSSB3aXRoIEVudW1lcmF0aW9uLlxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBrZXlcbiAgICogQHJldHVybnMgeyp9XG4gICAqL1xuICBnZXRWYWx1ZSgga2V5ICkge1xuICAgIHJldHVybiB0aGlzWyBrZXkgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUbyBzdXBwb3J0IGNvbnNpc3RlbnQgQVBJIHdpdGggRW51bWVyYXRpb24uXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtPYmplY3R9IGVudW1lcmF0aW9uVmFsdWVcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGdldEtleSggZW51bWVyYXRpb25WYWx1ZSApIHtcbiAgICByZXR1cm4gZW51bWVyYXRpb25WYWx1ZS5uYW1lO1xuICB9XG5cbiAgLyoqXG4gICAqIFRvIHN1cHBvcnQgY29uc2lzdGVudCBBUEkgd2l0aCBFbnVtZXJhdGlvbi5cbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJucyB7T2JqZWN0W119XG4gICAqL1xuICBnZXQgdmFsdWVzKCkge1xuICAgIHJldHVybiB0aGlzLlZBTFVFUztcbiAgfVxuXG4gIC8qKlxuICAgKiBUbyBzdXBwb3J0IGNvbnNpc3RlbnQgQVBJIHdpdGggRW51bWVyYXRpb24uXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybnMge3N0cmluZ1tdfVxuICAgKi9cbiAgZ2V0IGtleXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuS0VZUztcbiAgfVxuXG4gIC8qKlxuICAgKiBUbyBzdXBwb3J0IGNvbnNpc3RlbnQgQVBJIHdpdGggRW51bWVyYXRpb24uXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybnMge0VudW1lcmF0aW9uRGVwcmVjYXRlZH1cbiAgICovXG4gIGdldCBlbnVtZXJhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGVudW1lcmF0aW9uIGJhc2VkIG9uIHRoZSBwcm92aWRlZCBzdHJpbmcgYXJyYXlcbiAgICogQHBhcmFtIHtzdHJpbmdbXX0ga2V5cyAtIHN1Y2ggYXMgWydSRUQnLCdCTFVFJ11cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiBAcmV0dXJucyB7RW51bWVyYXRpb25EZXByZWNhdGVkfVxuICAgKiBAcHVibGljXG4gICAqL1xuICBzdGF0aWMgYnlLZXlzKCBrZXlzLCBvcHRpb25zICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIEFycmF5LmlzQXJyYXkoIGtleXMgKSwgJ2tleXMgbXVzdCBiZSBhbiBhcnJheScgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhb3B0aW9ucyB8fCBvcHRpb25zLmtleXMgPT09IHVuZGVmaW5lZCApO1xuICAgIHJldHVybiBuZXcgRW51bWVyYXRpb25EZXByZWNhdGVkKCBtZXJnZSggeyBrZXlzOiBrZXlzIH0sIG9wdGlvbnMgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBcInJpY2hcIiBlbnVtZXJhdGlvbiBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgbWFwXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgLSBzdWNoIGFzIHtSRUQ6IG15UmVkVmFsdWUsIEJMVUU6IG15Qmx1ZVZhbHVlfVxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqIEByZXR1cm5zIHtFbnVtZXJhdGlvbkRlcHJlY2F0ZWR9XG4gICAqIEBwdWJsaWNcbiAgICovXG4gIHN0YXRpYyBieU1hcCggbWFwLCBvcHRpb25zICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zIHx8IG9wdGlvbnMubWFwID09PSB1bmRlZmluZWQgKTtcbiAgICBpZiAoIGFzc2VydCApIHtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IF8udmFsdWVzKCBtYXAgKTtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHZhbHVlcy5sZW5ndGggPj0gMSwgJ211c3QgaGF2ZSBhdCBsZWFzdCAyIGVudHJpZXMgaW4gYW4gZW51bWVyYXRpb24nICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBfLmV2ZXJ5KCB2YWx1ZXMsIHZhbHVlID0+IHZhbHVlLmNvbnN0cnVjdG9yID09PSB2YWx1ZXNbIDAgXS5jb25zdHJ1Y3RvciApLCAnVmFsdWVzIG11c3QgaGF2ZSBzYW1lIGNvbnN0cnVjdG9yJyApO1xuICAgIH1cbiAgICByZXR1cm4gbmV3IEVudW1lcmF0aW9uRGVwcmVjYXRlZCggbWVyZ2UoIHsgbWFwOiBtYXAgfSwgb3B0aW9ucyApICk7XG4gIH1cbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdFbnVtZXJhdGlvbkRlcHJlY2F0ZWQnLCBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgKTtcbmV4cG9ydCBkZWZhdWx0IEVudW1lcmF0aW9uRGVwcmVjYXRlZDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGtCQUFrQixNQUFNLHlCQUF5QjtBQUN4RCxPQUFPQyxLQUFLLE1BQU0sWUFBWTtBQUM5QixPQUFPQyxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0EsTUFBTUMscUJBQXFCLENBQUM7RUFFMUI7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFdBQVdBLENBQUVDLE1BQU0sRUFBRztJQUNwQkwsa0JBQWtCLENBQUUsaUlBQWlJLENBQUU7SUFFdkpNLE1BQU0sSUFBSUEsTUFBTSxDQUFFRCxNQUFNLEVBQUUseUJBQXlCLENBQUU7SUFFckQsTUFBTUUsWUFBWSxHQUFHLENBQUMsQ0FBQ0YsTUFBTSxDQUFDRyxJQUFJO0lBQ2xDLE1BQU1DLFdBQVcsR0FBRyxDQUFDLENBQUNKLE1BQU0sQ0FBQ0ssR0FBRztJQUNoQ0osTUFBTSxJQUFJQSxNQUFNLENBQUVDLFlBQVksS0FBS0UsV0FBVyxFQUFFLHdEQUF3RCxDQUFFO0lBRTFHLE1BQU1ELElBQUksR0FBR0gsTUFBTSxDQUFDRyxJQUFJLElBQUlHLE1BQU0sQ0FBQ0gsSUFBSSxDQUFF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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/Validation.js
// Copyright 2019-2023, University of Colorado Boulder

/**
 * The definition file for "validators" used to validate values. This file holds associated logic that validates the
 * schema of the "validator" object, as well as testing if a value adheres to the restrictions provided by a validator.
 * See validate.js for usage with assertions to check that values are valid.
 *
 * Examples:
 *
 * A Validator that only accepts number values:
 * { valueType: 'number' }
 *
 * A Validator that only accepts the numbers "2" or "3":
 * { valueType: 'number', validValues: [ 2, 3 ] }
 *
 * A Validator that accepts any Object:
 * { valueType: Object }
 *
 * A Validator that accepts EnumerationDeprecated values (NOTE! This is deprecated, use the new class-based enumeration pattern as the valueType):
 * { valueType: MyEnumeration }
 * and/or
 * { validValues: MyEnumeration.VALUES }
 *
 * A Validator that accepts a string or a number greater than 2:
 * { isValidValue: value => { typeof value === 'string' || (typeof value === 'number' && value > 2)} }
 *
 * A Validator for a number that should be an even number greater than 10
 * { valueType: 'number', validators: [ { isValidValue: v => v > 10 }, { isValidValue: v => v%2 === 0 }] }
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */




const TYPEOF_STRINGS = ['string', 'number', 'boolean', 'function'];
// Key names are verbose so this can be mixed into other contexts like AXON/Property. `undefined` and `null` have the
// same semantics so that we can use this feature without having extend and allocate new objects at every validation.
const VALIDATOR_KEYS = ['valueType', 'validValues', 'valueComparisonStrategy', 'isValidValue', 'phetioType', 'validators'];
class Validation {
  /**
   * @returns an error string if incorrect, otherwise null if valid
   */
  static getValidatorValidationError(validator) {
    if (!(validator instanceof Object)) {
      // There won't be a validationMessage on a non-object
      return 'validator must be an Object';
    }
    if (!(validator.hasOwnProperty('isValidValue') || validator.hasOwnProperty('valueType') || validator.hasOwnProperty('validValues') || validator.hasOwnProperty('valueComparisonStrategy') || validator.hasOwnProperty('phetioType') || validator.hasOwnProperty('validators'))) {
      return this.combineErrorMessages(`validator must have at least one of: ${VALIDATOR_KEYS.join(',')}`, validator.validationMessage);
    }
    if (validator.hasOwnProperty('valueType')) {
      const valueTypeValidationError = Validation.getValueOrElementTypeValidationError(validator.valueType);
      if (valueTypeValidationError) {
        return this.combineErrorMessages(`Invalid valueType: ${validator.valueType}, error: ${valueTypeValidationError}`, validator.validationMessage);
      }
    }
    if (validator.hasOwnProperty('isValidValue')) {
      if (!(typeof validator.isValidValue === 'function' || validator.isValidValue === null || validator.isValidValue === undefined)) {
        return this.combineErrorMessages(`isValidValue must be a function: ${validator.isValidValue}`, validator.validationMessage);
      }
    }
    if (validator.hasOwnProperty('valueComparisonStrategy')) {
      // Only accepted values are below
      if (!(validator.valueComparisonStrategy === 'reference' || validator.valueComparisonStrategy === 'lodashDeep' || validator.valueComparisonStrategy === 'equalsFunction' || typeof validator.isValidValue === 'function')) {
        return this.combineErrorMessages(`valueComparisonStrategy must be "reference", "lodashDeep", 
        "equalsFunction", or a comparison function: ${validator.valueComparisonStrategy}`, validator.validationMessage);
      }
    }
    if (validator.validValues !== undefined && validator.validValues !== null) {
      if (!Array.isArray(validator.validValues)) {
        return this.combineErrorMessages(`validValues must be an array: ${validator.validValues}`, validator.validationMessage);
      }

      // Make sure each validValue matches the other rules, if any.
      const validatorWithoutValidValues = _.omit(validator, 'validValues');
      if (Validation.containsValidatorKey(validatorWithoutValidValues)) {
        for (let i = 0; i < validator.validValues.length; i++) {
          const validValue = validator.validValues[i];
          const validValueValidationError = Validation.getValidationError(validValue, validatorWithoutValidValues);
          if (validValueValidationError) {
            return this.combineErrorMessages(`Item not valid in validValues: ${validValue}, error: ${validValueValidationError}`, validator.validationMessage);
          }
        }
      }
    }
    if (validator.hasOwnProperty('phetioType')) {
      if (!validator.phetioType) {
        return this.combineErrorMessages('falsey phetioType provided', validator.validationMessage);
      }
      if (!validator.phetioType.validator) {
        return this.combineErrorMessages(`validator needed for phetioType: ${validator.phetioType.typeName}`, validator.validationMessage);
      }
      const phetioTypeValidationError = Validation.getValidatorValidationError(validator.phetioType.validator);
      if (phetioTypeValidationError) {
        return this.combineErrorMessages(phetioTypeValidationError, validator.validationMessage);
      }
    }
    if (validator.hasOwnProperty('validators')) {
      const validators = validator.validators;
      for (let i = 0; i < validators.length; i++) {
        const subValidator = validators[i];
        const subValidationError = Validation.getValidatorValidationError(subValidator);
        if (subValidationError) {
          return this.combineErrorMessages(`validators[${i}] invalid: ${subValidationError}`, validator.validationMessage);
        }
      }
    }
    return null;
  }

  /**
   * Validate that the valueType is of the expected format. Does not add validationMessage to any error it reports.
   * @returns - null if valid
   */
  static getValueTypeValidatorValidationError(valueType) {
    if (!(typeof valueType === 'function' || typeof valueType === 'string' || valueType instanceof js_EnumerationDeprecated || valueType === null || valueType === undefined)) {
      return `valueType must be {function|string|EnumerationDeprecated|null|undefined}, valueType=${valueType}`;
    }

    // {string} valueType must be one of the primitives in TYPEOF_STRINGS, for typeof comparison
    if (typeof valueType === 'string') {
      if (!_.includes(TYPEOF_STRINGS, valueType)) {
        return `valueType not a supported primitive types: ${valueType}`;
      }
    }
    return null;
  }
  static validateValidator(validator) {
    if (assert) {
      const error = Validation.getValidatorValidationError(validator);
      error && assert(false, error);
    }
  }

  /**
   * @param validator - object which may or may not contain validation keys
   */
  static containsValidatorKey(validator) {
    if (!(validator instanceof Object)) {
      return false;
    }
    for (let i = 0; i < VALIDATOR_KEYS.length; i++) {
      if (validator.hasOwnProperty(VALIDATOR_KEYS[i])) {
        return true;
      }
    }
    return false;
  }
  static combineErrorMessages(genericMessage, specificMessage) {
    if (specificMessage) {
      genericMessage = `${specificMessage}: ${genericMessage}`;
    }
    return genericMessage;
  }
  static isValueValid(value, validator, providedOptions) {
    return this.getValidationError(value, validator, providedOptions) === null;
  }

  /**
   * Determines whether a value is valid (returning a boolean value), returning the problem as a string if invalid,
   * otherwise returning null when valid.
   */
  static getValidationError(value, validator, providedOptions) {
    const options = optionize()({
      validateValidator: true
    }, providedOptions);
    if (options.validateValidator) {
      const validatorValidationError = Validation.getValidatorValidationError(validator);
      if (validatorValidationError) {
        return validatorValidationError;
      }
    }

    // Check valueType, which can be an array, string, type, or null
    if (validator.hasOwnProperty('valueType')) {
      const valueType = validator.valueType;
      if (Array.isArray(valueType)) {
        // Only one should be valid, so error out if none of them returned valid (valid=null)
        if (!_.some(valueType.map(typeInArray => !Validation.getValueTypeValidationError(value, typeInArray, validator.validationMessage)))) {
          return this.combineErrorMessages(`value not valid for any valueType in ${valueType.toString().substring(0, 100)}, value: ${value}`, validator.validationMessage);
        }
      } else if (valueType) {
        const valueTypeValidationError = Validation.getValueTypeValidationError(value, valueType, validator.validationMessage);
        if (valueTypeValidationError) {
          // getValueTypeValidationError will add the validationMessage for us
          return valueTypeValidationError;
        }
      }
    }
    if (validator.validValues) {
      const valueComparisonStrategy = validator.valueComparisonStrategy || 'reference';
      const valueValid = validator.validValues.some(validValue => {
        if (valueComparisonStrategy === 'reference') {
          return validValue === value;
        }
        if (valueComparisonStrategy === 'equalsFunction') {
          const validComparable = validValue;
          assert && assert(!!validComparable.equals, 'no equals function for 1st arg');
          assert && assert(!!value.equals, 'no equals function for 2nd arg');
          assert && assert(validComparable.equals(value) === value.equals(validComparable), 'incompatible equality checks');
          return validComparable.equals(value);
        }
        if (valueComparisonStrategy === 'lodashDeep') {
          return _.isEqual(validValue, value);
        } else {
          return valueComparisonStrategy(validValue, value);
        }
      });
      if (!valueValid) {
        return this.combineErrorMessages(`value not in validValues: ${value}`, validator.validationMessage);
      }
    }
    if (validator.hasOwnProperty('isValidValue') && !validator.isValidValue(value)) {
      return this.combineErrorMessages(`value failed isValidValue: ${value}`, validator.validationMessage);
    }
    if (validator.hasOwnProperty('phetioType')) {
      const phetioTypeValidationError = Validation.getValidationError(value, validator.phetioType.validator, options);
      if (phetioTypeValidationError) {
        return this.combineErrorMessages(`value failed phetioType validator: ${value}, error: ${phetioTypeValidationError}`, validator.validationMessage);
      }
    }
    if (validator.hasOwnProperty('validators')) {
      const validators = validator.validators;
      for (let i = 0; i < validators.length; i++) {
        const subValidator = validators[i];
        const subValidationError = Validation.getValidationError(value, subValidator, options);
        if (subValidationError) {
          return this.combineErrorMessages(`Failed validation for validators[${i}]: ${subValidationError}`, validator.validationMessage);
        }
      }
    }
    return null;
  }
  static getValueTypeValidationError(value, valueType, message) {
    if (typeof valueType === 'string' && typeof value !== valueType) {
      // primitive type
      return this.combineErrorMessages(`value should have typeof ${valueType}, value=${value}`, message);
    } else if (valueType === Array && !Array.isArray(value)) {
      return this.combineErrorMessages(`value should have been an array, value=${value}`, message);
    } else if (valueType instanceof js_EnumerationDeprecated && !valueType.includes(value)) {
      return this.combineErrorMessages(`value is not a member of EnumerationDeprecated ${valueType}`, message);
    } else if (typeof valueType === 'function' && !(value instanceof valueType)) {
      // constructor
      return this.combineErrorMessages(`value should be instanceof ${valueType.name}, value=${value}`, message);
    }
    if (valueType === null && value !== null) {
      return this.combineErrorMessages(`value should be null, value=${value}`, message);
    }
    return null;
  }

  /**
   * Validate a type that can be a type, or an array of multiple types. Does not add validationMessage to any error
   * it reports
   */
  static getValueOrElementTypeValidationError(type) {
    if (Array.isArray(type)) {
      // If not every type in the list is valid, then return false, pass options through verbatim.
      for (let i = 0; i < type.length; i++) {
        const typeElement = type[i];
        const error = Validation.getValueTypeValidatorValidationError(typeElement);
        if (error) {
          return `Array value invalid: ${error}`;
        }
      }
    } else if (type) {
      const error = Validation.getValueTypeValidatorValidationError(type);
      if (error) {
        return `Value type invalid: ${error}`;
      }
    }
    return null;
  }
  static VALIDATOR_KEYS = VALIDATOR_KEYS;

  /**
   * General validator for validating that a string doesn't have template variables in it.
   */
  static STRING_WITHOUT_TEMPLATE_VARS_VALIDATOR = {
    valueType: 'string',
    isValidValue: v => !/\{\{\w*\}\}/.test(v)
  };
}
js_axon.register('Validation', Validation);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbkRlcHJlY2F0ZWQiLCJvcHRpb25pemUiLCJheG9uIiwiVFlQRU9GX1NUUklOR1MiLCJWQUxJREFUT1JfS0VZUyIsIlZhbGlkYXRpb24iLCJnZXRWYWxpZGF0b3JWYWxpZGF0aW9uRXJyb3IiLCJ2YWxpZGF0b3IiLCJPYmplY3QiLCJoYXNPd25Qcm9wZXJ0eSIsImNvbWJpbmVFcnJvck1lc3NhZ2VzIiwiam9pbiIsInZhbGlkYXRpb25NZXNzYWdlIiwidmFsdWVUeXBlVmFsaWRhdGlvbkVycm9yIiwiZ2V0VmFsdWVPckVsZW1lbnRUeXBlVmFsaWRhdGlvbkVycm9yIiwidmFsdWVUeXBlIiwiaXNWYWxpZFZhbHVlIiwidW5kZWZpbmVkIiwidmFsdWVDb21wYXJpc29uU3RyYXRlZ3kiLCJ2YWxpZFZhbHVlcyIsIkFycmF5IiwiaXNBcnJheSIsInZhbGlkYXRvcldpdGhvdXRWYWxpZFZhbHVlcyIsIl8iLCJvbWl0IiwiY29udGFpbnNWYWxpZGF0b3JLZXkiLCJpIiwibGVuZ3RoIiwidmFsaWRWYWx1ZSIsInZhbGlkVmFsdWVWYWxpZGF0aW9uRXJyb3IiLCJnZXRWYWxpZGF0aW9uRXJyb3IiLCJwaGV0aW9UeXBlIiwidHlwZU5hbWUiLCJwaGV0aW9UeXBlVmFsaWRhdGlvbkVycm9yIiwidmFsaWRhdG9ycyIsInN1YlZhbGlkYXRvciIsInN1YlZhbGlkYXRpb25FcnJvciIsImdldFZhbHVlVHlwZVZhbGlkYXRvclZhbGlkYXRpb25FcnJvciIsImluY2x1ZGVzIiwidmFsaWRhdGVWYWxpZGF0b3IiLCJhc3NlcnQiLCJlcnJvciIsImdlbmVyaWNNZXNzYWdlIiwic3BlY2lmaWNNZXNzYWdlIiwiaXNWYWx1ZVZhbGlkIiwidmFsdWUiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwidmFsaWRhdG9yVmFsaWRhdGlvbkVycm9yIiwic29tZSIsIm1hcCIsInR5cGVJbkFycmF5IiwiZ2V0VmFsdWVUeXBlVmFsaWRhdGlvbkVycm9yIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJ2YWx1ZVZhbGlkIiwidmFsaWRDb21wYXJhYmxlIiwiZXF1YWxzIiwiaXNFcXVhbCIsIm1lc3NhZ2UiLCJuYW1lIiwidHlwZSIsInR5cGVFbGVtZW50IiwiU1RSSU5HX1dJVEhPVVRfVEVNUExBVEVfVkFSU19WQUxJREFUT1IiLCJ2IiwidGVzdCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVmFsaWRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBUaGUgZGVmaW5pdGlvbiBmaWxlIGZvciBcInZhbGlkYXRvcnNcIiB1c2VkIHRvIHZhbGlkYXRlIHZhbHVlcy4gVGhpcyBmaWxlIGhvbGRzIGFzc29jaWF0ZWQgbG9naWMgdGhhdCB2YWxpZGF0ZXMgdGhlXG4gKiBzY2hlbWEgb2YgdGhlIFwidmFsaWRhdG9yXCIgb2JqZWN0LCBhcyB3ZWxsIGFzIHRlc3RpbmcgaWYgYSB2YWx1ZSBhZGhlcmVzIHRvIHRoZSByZXN0cmljdGlvbnMgcHJvdmlkZWQgYnkgYSB2YWxpZGF0b3IuXG4gKiBTZWUgdmFsaWRhdGUuanMgZm9yIHVzYWdlIHdpdGggYXNzZXJ0aW9ucyB0byBjaGVjayB0aGF0IHZhbHVlcyBhcmUgdmFsaWQuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogQSBWYWxpZGF0b3IgdGhhdCBvbmx5IGFjY2VwdHMgbnVtYmVyIHZhbHVlczpcbiAqIHsgdmFsdWVUeXBlOiAnbnVtYmVyJyB9XG4gKlxuICogQSBWYWxpZGF0b3IgdGhhdCBvbmx5IGFjY2VwdHMgdGhlIG51bWJlcnMgXCIyXCIgb3IgXCIzXCI6XG4gKiB7IHZhbHVlVHlwZTogJ251bWJlcicsIHZhbGlkVmFsdWVzOiBbIDIsIDMgXSB9XG4gKlxuICogQSBWYWxpZGF0b3IgdGhhdCBhY2NlcHRzIGFueSBPYmplY3Q6XG4gKiB7IHZhbHVlVHlwZTogT2JqZWN0IH1cbiAqXG4gKiBBIFZhbGlkYXRvciB0aGF0IGFjY2VwdHMgRW51bWVyYXRpb25EZXByZWNhdGVkIHZhbHVlcyAoTk9URSEgVGhpcyBpcyBkZXByZWNhdGVkLCB1c2UgdGhlIG5ldyBjbGFzcy1iYXNlZCBlbnVtZXJhdGlvbiBwYXR0ZXJuIGFzIHRoZSB2YWx1ZVR5cGUpOlxuICogeyB2YWx1ZVR5cGU6IE15RW51bWVyYXRpb24gfVxuICogYW5kL29yXG4gKiB7IHZhbGlkVmFsdWVzOiBNeUVudW1lcmF0aW9uLlZBTFVFUyB9XG4gKlxuICogQSBWYWxpZGF0b3IgdGhhdCBhY2NlcHRzIGEgc3RyaW5nIG9yIGEgbnVtYmVyIGdyZWF0ZXIgdGhhbiAyOlxuICogeyBpc1ZhbGlkVmFsdWU6IHZhbHVlID0+IHsgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiB2YWx1ZSA+IDIpfSB9XG4gKlxuICogQSBWYWxpZGF0b3IgZm9yIGEgbnVtYmVyIHRoYXQgc2hvdWxkIGJlIGFuIGV2ZW4gbnVtYmVyIGdyZWF0ZXIgdGhhbiAxMFxuICogeyB2YWx1ZVR5cGU6ICdudW1iZXInLCB2YWxpZGF0b3JzOiBbIHsgaXNWYWxpZFZhbHVlOiB2ID0+IHYgPiAxMCB9LCB7IGlzVmFsaWRWYWx1ZTogdiA9PiB2JTIgPT09IDAgfV0gfVxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IEVudW1lcmF0aW9uRGVwcmVjYXRlZCBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvRW51bWVyYXRpb25EZXByZWNhdGVkLmpzJztcbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IHsgQ29tcGFyYWJsZU9iamVjdCB9IGZyb20gJy4vVGlueVByb3BlcnR5LmpzJztcblxuY29uc3QgVFlQRU9GX1NUUklOR1MgPSBbICdzdHJpbmcnLCAnbnVtYmVyJywgJ2Jvb2xlYW4nLCAnZnVuY3Rpb24nIF07XG5cbmV4cG9ydCB0eXBlIElzVmFsaWRWYWx1ZU9wdGlvbnMgPSB7XG5cbiAgLy8gQnkgZGVmYXVsdCB2YWxpZGF0aW9uIHdpbGwgYWx3YXlzIGNoZWNrIHRoZSB2YWxpZGl0eSBvZiB0aGUgIHZhbGlkYXRvciBpdHNlbGYuICBIb3dldmVyLCBmb3IgdHlwZXMgbGlrZVxuICAvLyBQcm9wZXJ0eSBhbmQgRW1pdHRlciByZS1jaGVja2luZyB0aGUgdmFsaWRhdG9yIGV2ZXJ5IHRpbWUgdGhlIFByb3BlcnR5IHZhbHVlIGNoYW5nZXMgb3IgdGhlIEVtaXR0ZXIgZW1pdHNcbiAgLy8gd2FzdGVzIGNwdS4gSGVuY2UgY2FzZXMgbGlrZSB0aG9zZSBjYW4gb3B0LW91dFxuICB2YWxpZGF0ZVZhbGlkYXRvcj86IGJvb2xlYW47XG59O1xuXG50eXBlIFZhbHVlVHlwZSA9XG4gIHN0cmluZyB8XG4gIEVudW1lcmF0aW9uRGVwcmVjYXRlZCB8XG4gIG51bGwgfFxuICBWYWx1ZVR5cGVbXSB8XG5cbiAgLy8gYWxsb3cgRnVuY3Rpb24gaGVyZSBzaW5jZSBpdCBpcyB0aGUgYXBwcm9wcmlhdGUgbGV2ZWwgb2YgYWJzdHJhY3Rpb24gZm9yIGNoZWNraW5nIGluc3RhbmNlb2ZcbiAgRnVuY3Rpb247IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xuXG50eXBlIFZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5PFQgPSB1bmtub3duPiA9ICdlcXVhbHNGdW5jdGlvbicgfCAncmVmZXJlbmNlJyB8ICdsb2Rhc2hEZWVwJyB8ICggKCBhOiBULCBiOiBUICkgPT4gYm9vbGVhbiApO1xuXG5leHBvcnQgdHlwZSBWYWxpZGF0b3I8VCA9IHVua25vd24+ID0ge1xuXG4gIC8vIFR5cGUgb2YgdGhlIHZhbHVlLlxuICAvLyBJZiB7ZnVuY3Rpb259LCB0aGUgZnVuY3Rpb24gbXVzdCBiZSBhIGNvbnN0cnVjdG9yLlxuICAvLyBJZiB7c3RyaW5nfSwgdGhlIHN0cmluZyBtdXN0IGJlIG9uZSBvZiB0aGUgcHJpbWl0aXZlIHR5cGVzIGxpc3RlZCBpbiBUWVBFT0ZfU1RSSU5HUy5cbiAgLy8gSWYge251bGx8dW5kZWZpbmVkfSwgdGhlIHZhbHVlIG11c3QgYmUgbnVsbCAod2hpY2ggZG9lc24ndCBtYWtlIHNlbnNlIHVudGlsIHRoZSBuZXh0IGxpbmUgb2YgZG9jKVxuICAvLyBJZiB7QXJyYXkuPHN0cmluZ3xmdW5jdGlvbnxudWxsfHVuZGVmaW5lZD59LCBlYWNoIGl0ZW0gbXVzdCBiZSBhIGxlZ2FsIHZhbHVlIGFzIGV4cGxhaW5lZCBpbiB0aGUgYWJvdmUgZG9jXG4gIC8vIFVudXNlZCBpZiBudWxsLlxuICAvLyBFeGFtcGxlczpcbiAgLy8gdmFsdWVUeXBlOiBWZWN0b3IyXG4gIC8vIHZhbHVlVHlwZTogJ3N0cmluZydcbiAgLy8gdmFsdWVUeXBlOiAnbnVtYmVyJyxcbiAgLy8gdmFsdWVUeXBlOiBbICdudW1iZXInLCBudWxsIF1cbiAgLy8gdmFsdWVUeXBlOiBbICdudW1iZXInLCAnc3RyaW5nJywgTm9kZSwgbnVsbCBdXG4gIHZhbHVlVHlwZT86IFZhbHVlVHlwZSB8IFZhbHVlVHlwZVtdO1xuXG4gIC8vIFZhbGlkIHZhbHVlcyBmb3IgdGhpcyBQcm9wZXJ0eS4gVW51c2VkIGlmIG51bGwuXG4gIC8vIEV4YW1wbGU6XG4gIC8vIHZhbGlkVmFsdWVzOiBbICdob3Jpem9udGFsJywgJ3ZlcnRpY2FsJyBdXG4gIHZhbGlkVmFsdWVzPzogcmVhZG9ubHkgVFtdO1xuXG4gIC8vIGVxdWFsc0Z1bmN0aW9uIC0+IG11c3QgaGF2ZSAuZXF1YWxzKCkgZnVuY3Rpb24gb24gdGhlIHR5cGUgVFxuICB2YWx1ZUNvbXBhcmlzb25TdHJhdGVneT86IFZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5PFQ+O1xuXG4gIC8vIEZ1bmN0aW9uIHRoYXQgdmFsaWRhdGVzIHRoZSB2YWx1ZS4gU2luZ2xlIGFyZ3VtZW50IGlzIHRoZSB2YWx1ZSwgcmV0dXJucyBib29sZWFuLiBVbnVzZWQgaWYgbnVsbC5cbiAgLy8gRXhhbXBsZTpcbiAgLy8gaXNWYWxpZFZhbHVlOiBmdW5jdGlvbiggdmFsdWUgKSB7IHJldHVybiBOdW1iZXIuaXNJbnRlZ2VyKCB2YWx1ZSApICYmIHZhbHVlID49IDA7IH1cbiAgaXNWYWxpZFZhbHVlPzogKCB2OiBUICkgPT4gYm9vbGVhbjtcblxuICAvLyBBIElPVHlwZSB1c2VkIHRvIHNwZWNpZnkgdGhlIHB1YmxpYyB0eXBpbmcgZm9yIFBoRVQtaU8uIEVhY2ggSU9UeXBlIG11c3QgaGF2ZSBhXG4gIC8vIGB2YWxpZGF0b3JgIGtleSBzcGVjaWZpZWQgdGhhdCBjYW4gYmUgdXNlZCBmb3IgdmFsaWRhdGlvbi4gU2VlIElPVHlwZSBmb3IgYW4gZXhhbXBsZS5cbiAgcGhldGlvVHlwZT86IElPVHlwZTtcblxuICAvLyBpZiBwcm92aWRlZCwgdGhpcyB3aWxsIHByb3ZpZGUgc3VwcGxlbWVudGFsIGluZm9ybWF0aW9uIHRvIHRoZSBhc3NlcnRpb24vdmFsaWRhdGlvbiBtZXNzYWdlcyBpbiBhZGRpdGlvbiB0byB0aGVcbiAgLy8gdmFsaWRhdGUta2V5LXNwZWNpZmljIG1lc3NhZ2UgdGhhdCB3aWxsIGJlIGdpdmVuLlxuICB2YWxpZGF0aW9uTWVzc2FnZT86IHN0cmluZztcblxuICAvLyBBIGxpc3Qgb2YgVmFsaWRhdG9yIG9iamVjdHMsIGVhY2ggb2Ygd2hpY2ggbXVzdCBwYXNzIHRvIGJlIGEgdmFsaWQgdmFsdWVcbiAgdmFsaWRhdG9ycz86IFZhbGlkYXRvcjxUPltdO1xufTtcblxuLy8gS2V5IG5hbWVzIGFyZSB2ZXJib3NlIHNvIHRoaXMgY2FuIGJlIG1peGVkIGludG8gb3RoZXIgY29udGV4dHMgbGlrZSBBWE9OL1Byb3BlcnR5LiBgdW5kZWZpbmVkYCBhbmQgYG51bGxgIGhhdmUgdGhlXG4vLyBzYW1lIHNlbWFudGljcyBzbyB0aGF0IHdlIGNhbiB1c2UgdGhpcyBmZWF0dXJlIHdpdGhvdXQgaGF2aW5nIGV4dGVuZCBhbmQgYWxsb2NhdGUgbmV3IG9iamVjdHMgYXQgZXZlcnkgdmFsaWRhdGlvbi5cbmNvbnN0IFZBTElEQVRPUl9LRVlTOiBBcnJheTxrZXlvZiBWYWxpZGF0b3I+ID0gW1xuICAndmFsdWVUeXBlJyxcbiAgJ3ZhbGlkVmFsdWVzJyxcbiAgJ3ZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5JyxcbiAgJ2lzVmFsaWRWYWx1ZScsXG4gICdwaGV0aW9UeXBlJyxcbiAgJ3ZhbGlkYXRvcnMnXG5dO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBWYWxpZGF0aW9uIHtcblxuICAvKipcbiAgICogQHJldHVybnMgYW4gZXJyb3Igc3RyaW5nIGlmIGluY29ycmVjdCwgb3RoZXJ3aXNlIG51bGwgaWYgdmFsaWRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZ2V0VmFsaWRhdG9yVmFsaWRhdGlvbkVycm9yPFQ+KCB2YWxpZGF0b3I6IFZhbGlkYXRvcjxUPiApOiBzdHJpbmcgfCBudWxsIHtcblxuICAgIGlmICggISggdmFsaWRhdG9yIGluc3RhbmNlb2YgT2JqZWN0ICkgKSB7XG5cbiAgICAgIC8vIFRoZXJlIHdvbid0IGJlIGEgdmFsaWRhdGlvbk1lc3NhZ2Ugb24gYSBub24tb2JqZWN0XG4gICAgICByZXR1cm4gJ3ZhbGlkYXRvciBtdXN0IGJlIGFuIE9iamVjdCc7XG4gICAgfVxuXG4gICAgaWYgKCAhKCB2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoICdpc1ZhbGlkVmFsdWUnICkgfHxcbiAgICAgICAgICAgIHZhbGlkYXRvci5oYXNPd25Qcm9wZXJ0eSggJ3ZhbHVlVHlwZScgKSB8fFxuICAgICAgICAgICAgdmFsaWRhdG9yLmhhc093blByb3BlcnR5KCAndmFsaWRWYWx1ZXMnICkgfHxcbiAgICAgICAgICAgIHZhbGlkYXRvci5oYXNPd25Qcm9wZXJ0eSggJ3ZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5JyApIHx8XG4gICAgICAgICAgICB2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoICdwaGV0aW9UeXBlJyApIHx8XG4gICAgICAgICAgICB2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoICd2YWxpZGF0b3JzJyApICkgKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyggYHZhbGlkYXRvciBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIG9mOiAke1ZBTElEQVRPUl9LRVlTLmpvaW4oICcsJyApfWAsIHZhbGlkYXRvci52YWxpZGF0aW9uTWVzc2FnZSApO1xuICAgIH1cblxuICAgIGlmICggdmFsaWRhdG9yLmhhc093blByb3BlcnR5KCAndmFsdWVUeXBlJyApICkge1xuICAgICAgY29uc3QgdmFsdWVUeXBlVmFsaWRhdGlvbkVycm9yID0gVmFsaWRhdGlvbi5nZXRWYWx1ZU9yRWxlbWVudFR5cGVWYWxpZGF0aW9uRXJyb3IoIHZhbGlkYXRvci52YWx1ZVR5cGUhICk7XG4gICAgICBpZiAoIHZhbHVlVHlwZVZhbGlkYXRpb25FcnJvciApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluZUVycm9yTWVzc2FnZXMoXG4gICAgICAgICAgYEludmFsaWQgdmFsdWVUeXBlOiAke3ZhbGlkYXRvci52YWx1ZVR5cGV9LCBlcnJvcjogJHt2YWx1ZVR5cGVWYWxpZGF0aW9uRXJyb3J9YCxcbiAgICAgICAgICB2YWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIHZhbGlkYXRvci5oYXNPd25Qcm9wZXJ0eSggJ2lzVmFsaWRWYWx1ZScgKSApIHtcbiAgICAgIGlmICggISggdHlwZW9mIHZhbGlkYXRvci5pc1ZhbGlkVmFsdWUgPT09ICdmdW5jdGlvbicgfHxcbiAgICAgICAgICAgICAgdmFsaWRhdG9yLmlzVmFsaWRWYWx1ZSA9PT0gbnVsbCB8fFxuICAgICAgICAgICAgICB2YWxpZGF0b3IuaXNWYWxpZFZhbHVlID09PSB1bmRlZmluZWQgKSApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluZUVycm9yTWVzc2FnZXMoIGBpc1ZhbGlkVmFsdWUgbXVzdCBiZSBhIGZ1bmN0aW9uOiAke3ZhbGlkYXRvci5pc1ZhbGlkVmFsdWV9YCxcbiAgICAgICAgICB2YWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIHZhbGlkYXRvci5oYXNPd25Qcm9wZXJ0eSggJ3ZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5JyApICkge1xuXG4gICAgICAvLyBPbmx5IGFjY2VwdGVkIHZhbHVlcyBhcmUgYmVsb3dcbiAgICAgIGlmICggISggdmFsaWRhdG9yLnZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5ID09PSAncmVmZXJlbmNlJyB8fFxuICAgICAgICAgICAgICB2YWxpZGF0b3IudmFsdWVDb21wYXJpc29uU3RyYXRlZ3kgPT09ICdsb2Rhc2hEZWVwJyB8fFxuICAgICAgICAgICAgICB2YWxpZGF0b3IudmFsdWVDb21wYXJpc29uU3RyYXRlZ3kgPT09ICdlcXVhbHNGdW5jdGlvbicgfHxcbiAgICAgICAgICAgICAgdHlwZW9mIHZhbGlkYXRvci5pc1ZhbGlkVmFsdWUgPT09ICdmdW5jdGlvbicgKSApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluZUVycm9yTWVzc2FnZXMoIGB2YWx1ZUNvbXBhcmlzb25TdHJhdGVneSBtdXN0IGJlIFwicmVmZXJlbmNlXCIsIFwibG9kYXNoRGVlcFwiLCBcbiAgICAgICAgXCJlcXVhbHNGdW5jdGlvblwiLCBvciBhIGNvbXBhcmlzb24gZnVuY3Rpb246ICR7dmFsaWRhdG9yLnZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5fWAsXG4gICAgICAgICAgdmFsaWRhdG9yLnZhbGlkYXRpb25NZXNzYWdlICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCB2YWxpZGF0b3IudmFsaWRWYWx1ZXMgIT09IHVuZGVmaW5lZCAmJiB2YWxpZGF0b3IudmFsaWRWYWx1ZXMgIT09IG51bGwgKSB7XG4gICAgICBpZiAoICFBcnJheS5pc0FycmF5KCB2YWxpZGF0b3IudmFsaWRWYWx1ZXMgKSApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluZUVycm9yTWVzc2FnZXMoIGB2YWxpZFZhbHVlcyBtdXN0IGJlIGFuIGFycmF5OiAke3ZhbGlkYXRvci52YWxpZFZhbHVlc31gLFxuICAgICAgICAgIHZhbGlkYXRvci52YWxpZGF0aW9uTWVzc2FnZSApO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIHN1cmUgZWFjaCB2YWxpZFZhbHVlIG1hdGNoZXMgdGhlIG90aGVyIHJ1bGVzLCBpZiBhbnkuXG4gICAgICBjb25zdCB2YWxpZGF0b3JXaXRob3V0VmFsaWRWYWx1ZXMgPSBfLm9taXQoIHZhbGlkYXRvciwgJ3ZhbGlkVmFsdWVzJyApO1xuICAgICAgaWYgKCBWYWxpZGF0aW9uLmNvbnRhaW5zVmFsaWRhdG9yS2V5KCB2YWxpZGF0b3JXaXRob3V0VmFsaWRWYWx1ZXMgKSApIHtcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdmFsaWRhdG9yLnZhbGlkVmFsdWVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgIGNvbnN0IHZhbGlkVmFsdWUgPSB2YWxpZGF0b3IudmFsaWRWYWx1ZXNbIGkgXTtcbiAgICAgICAgICBjb25zdCB2YWxpZFZhbHVlVmFsaWRhdGlvbkVycm9yID0gVmFsaWRhdGlvbi5nZXRWYWxpZGF0aW9uRXJyb3IoIHZhbGlkVmFsdWUsIHZhbGlkYXRvcldpdGhvdXRWYWxpZFZhbHVlcyApO1xuICAgICAgICAgIGlmICggdmFsaWRWYWx1ZVZhbGlkYXRpb25FcnJvciApIHtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbWJpbmVFcnJvck1lc3NhZ2VzKFxuICAgICAgICAgICAgICBgSXRlbSBub3QgdmFsaWQgaW4gdmFsaWRWYWx1ZXM6ICR7dmFsaWRWYWx1ZX0sIGVycm9yOiAke3ZhbGlkVmFsdWVWYWxpZGF0aW9uRXJyb3J9YCwgdmFsaWRhdG9yLnZhbGlkYXRpb25NZXNzYWdlICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCB2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoICdwaGV0aW9UeXBlJyApICkge1xuICAgICAgaWYgKCAhdmFsaWRhdG9yLnBoZXRpb1R5cGUgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbWJpbmVFcnJvck1lc3NhZ2VzKCAnZmFsc2V5IHBoZXRpb1R5cGUgcHJvdmlkZWQnLCB2YWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgKTtcbiAgICAgIH1cbiAgICAgIGlmICggIXZhbGlkYXRvci5waGV0aW9UeXBlLnZhbGlkYXRvciApIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluZUVycm9yTWVzc2FnZXMoIGB2YWxpZGF0b3IgbmVlZGVkIGZvciBwaGV0aW9UeXBlOiAke3ZhbGlkYXRvci5waGV0aW9UeXBlLnR5cGVOYW1lfWAsXG4gICAgICAgICAgdmFsaWRhdG9yLnZhbGlkYXRpb25NZXNzYWdlICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHBoZXRpb1R5cGVWYWxpZGF0aW9uRXJyb3IgPSBWYWxpZGF0aW9uLmdldFZhbGlkYXRvclZhbGlkYXRpb25FcnJvciggdmFsaWRhdG9yLnBoZXRpb1R5cGUudmFsaWRhdG9yICk7XG4gICAgICBpZiAoIHBoZXRpb1R5cGVWYWxpZGF0aW9uRXJyb3IgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbWJpbmVFcnJvck1lc3NhZ2VzKCBwaGV0aW9UeXBlVmFsaWRhdGlvbkVycm9yLCB2YWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIHZhbGlkYXRvci5oYXNPd25Qcm9wZXJ0eSggJ3ZhbGlkYXRvcnMnICkgKSB7XG4gICAgICBjb25zdCB2YWxpZGF0b3JzID0gdmFsaWRhdG9yLnZhbGlkYXRvcnMhO1xuXG4gICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB2YWxpZGF0b3JzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICBjb25zdCBzdWJWYWxpZGF0b3IgPSB2YWxpZGF0b3JzWyBpIF07XG4gICAgICAgIGNvbnN0IHN1YlZhbGlkYXRpb25FcnJvciA9IFZhbGlkYXRpb24uZ2V0VmFsaWRhdG9yVmFsaWRhdGlvbkVycm9yKCBzdWJWYWxpZGF0b3IgKTtcbiAgICAgICAgaWYgKCBzdWJWYWxpZGF0aW9uRXJyb3IgKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMuY29tYmluZUVycm9yTWVzc2FnZXMoIGB2YWxpZGF0b3JzWyR7aX1dIGludmFsaWQ6ICR7c3ViVmFsaWRhdGlvbkVycm9yfWAsIHZhbGlkYXRvci52YWxpZGF0aW9uTWVzc2FnZSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgdGhhdCB0aGUgdmFsdWVUeXBlIGlzIG9mIHRoZSBleHBlY3RlZCBmb3JtYXQuIERvZXMgbm90IGFkZCB2YWxpZGF0aW9uTWVzc2FnZSB0byBhbnkgZXJyb3IgaXQgcmVwb3J0cy5cbiAgICogQHJldHVybnMgLSBudWxsIGlmIHZhbGlkXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBnZXRWYWx1ZVR5cGVWYWxpZGF0b3JWYWxpZGF0aW9uRXJyb3IoIHZhbHVlVHlwZTogVmFsdWVUeXBlICk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICggISggdHlwZW9mIHZhbHVlVHlwZSA9PT0gJ2Z1bmN0aW9uJyB8fFxuICAgICAgICAgICAgdHlwZW9mIHZhbHVlVHlwZSA9PT0gJ3N0cmluZycgfHxcbiAgICAgICAgICAgIHZhbHVlVHlwZSBpbnN0YW5jZW9mIEVudW1lcmF0aW9uRGVwcmVjYXRlZCB8fFxuICAgICAgICAgICAgdmFsdWVUeXBlID09PSBudWxsIHx8XG4gICAgICAgICAgICB2YWx1ZVR5cGUgPT09IHVuZGVmaW5lZCApICkge1xuICAgICAgcmV0dXJuIGB2YWx1ZVR5cGUgbXVzdCBiZSB7ZnVuY3Rpb258c3RyaW5nfEVudW1lcmF0aW9uRGVwcmVjYXRlZHxudWxsfHVuZGVmaW5lZH0sIHZhbHVlVHlwZT0ke3ZhbHVlVHlwZX1gO1xuICAgIH1cblxuICAgIC8vIHtzdHJpbmd9IHZhbHVlVHlwZSBtdXN0IGJlIG9uZSBvZiB0aGUgcHJpbWl0aXZlcyBpbiBUWVBFT0ZfU1RSSU5HUywgZm9yIHR5cGVvZiBjb21wYXJpc29uXG4gICAgaWYgKCB0eXBlb2YgdmFsdWVUeXBlID09PSAnc3RyaW5nJyApIHtcbiAgICAgIGlmICggIV8uaW5jbHVkZXMoIFRZUEVPRl9TVFJJTkdTLCB2YWx1ZVR5cGUgKSApIHtcbiAgICAgICAgcmV0dXJuIGB2YWx1ZVR5cGUgbm90IGEgc3VwcG9ydGVkIHByaW1pdGl2ZSB0eXBlczogJHt2YWx1ZVR5cGV9YDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHZhbGlkYXRlVmFsaWRhdG9yPFQ+KCB2YWxpZGF0b3I6IFZhbGlkYXRvcjxUPiApOiB2b2lkIHtcbiAgICBpZiAoIGFzc2VydCApIHtcbiAgICAgIGNvbnN0IGVycm9yID0gVmFsaWRhdGlvbi5nZXRWYWxpZGF0b3JWYWxpZGF0aW9uRXJyb3IoIHZhbGlkYXRvciApO1xuICAgICAgZXJyb3IgJiYgYXNzZXJ0KCBmYWxzZSwgZXJyb3IgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHZhbGlkYXRvciAtIG9iamVjdCB3aGljaCBtYXkgb3IgbWF5IG5vdCBjb250YWluIHZhbGlkYXRpb24ga2V5c1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBjb250YWluc1ZhbGlkYXRvcktleSggdmFsaWRhdG9yOiBJbnRlbnRpb25hbEFueSApOiBib29sZWFuIHtcbiAgICBpZiAoICEoIHZhbGlkYXRvciBpbnN0YW5jZW9mIE9iamVjdCApICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBWQUxJREFUT1JfS0VZUy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGlmICggdmFsaWRhdG9yLmhhc093blByb3BlcnR5KCBWQUxJREFUT1JfS0VZU1sgaSBdICkgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBjb21iaW5lRXJyb3JNZXNzYWdlcyggZ2VuZXJpY01lc3NhZ2U6IHN0cmluZywgc3BlY2lmaWNNZXNzYWdlPzogc3RyaW5nICk6IHN0cmluZyB7XG4gICAgaWYgKCBzcGVjaWZpY01lc3NhZ2UgKSB7XG4gICAgICBnZW5lcmljTWVzc2FnZSA9IGAke3NwZWNpZmljTWVzc2FnZX06ICR7Z2VuZXJpY01lc3NhZ2V9YDtcbiAgICB9XG4gICAgcmV0dXJuIGdlbmVyaWNNZXNzYWdlO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBpc1ZhbHVlVmFsaWQ8VD4oIHZhbHVlOiBULCB2YWxpZGF0b3I6IFZhbGlkYXRvcjxUPiwgcHJvdmlkZWRPcHRpb25zPzogSXNWYWxpZFZhbHVlT3B0aW9ucyApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5nZXRWYWxpZGF0aW9uRXJyb3IoIHZhbHVlLCB2YWxpZGF0b3IsIHByb3ZpZGVkT3B0aW9ucyApID09PSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciBhIHZhbHVlIGlzIHZhbGlkIChyZXR1cm5pbmcgYSBib29sZWFuIHZhbHVlKSwgcmV0dXJuaW5nIHRoZSBwcm9ibGVtIGFzIGEgc3RyaW5nIGlmIGludmFsaWQsXG4gICAqIG90aGVyd2lzZSByZXR1cm5pbmcgbnVsbCB3aGVuIHZhbGlkLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnZXRWYWxpZGF0aW9uRXJyb3I8VD4oIHZhbHVlOiBJbnRlbnRpb25hbEFueSwgdmFsaWRhdG9yOiBWYWxpZGF0b3I8VD4sIHByb3ZpZGVkT3B0aW9ucz86IElzVmFsaWRWYWx1ZU9wdGlvbnMgKTogc3RyaW5nIHwgbnVsbCB7XG5cbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPElzVmFsaWRWYWx1ZU9wdGlvbnM+KCkoIHtcbiAgICAgIHZhbGlkYXRlVmFsaWRhdG9yOiB0cnVlXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBpZiAoIG9wdGlvbnMudmFsaWRhdGVWYWxpZGF0b3IgKSB7XG4gICAgICBjb25zdCB2YWxpZGF0b3JWYWxpZGF0aW9uRXJyb3IgPSBWYWxpZGF0aW9uLmdldFZhbGlkYXRvclZhbGlkYXRpb25FcnJvciggdmFsaWRhdG9yICk7XG4gICAgICBpZiAoIHZhbGlkYXRvclZhbGlkYXRpb25FcnJvciApIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkYXRvclZhbGlkYXRpb25FcnJvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayB2YWx1ZVR5cGUsIHdoaWNoIGNhbiBiZSBhbiBhcnJheSwgc3RyaW5nLCB0eXBlLCBvciBudWxsXG4gICAgaWYgKCB2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoICd2YWx1ZVR5cGUnICkgKSB7XG4gICAgICBjb25zdCB2YWx1ZVR5cGUgPSB2YWxpZGF0b3IudmFsdWVUeXBlO1xuICAgICAgaWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZVR5cGUgKSApIHtcblxuICAgICAgICAvLyBPbmx5IG9uZSBzaG91bGQgYmUgdmFsaWQsIHNvIGVycm9yIG91dCBpZiBub25lIG9mIHRoZW0gcmV0dXJuZWQgdmFsaWQgKHZhbGlkPW51bGwpXG4gICAgICAgIGlmICggIV8uc29tZSggdmFsdWVUeXBlLm1hcCggKCB0eXBlSW5BcnJheTogVmFsdWVUeXBlICkgPT4gIVZhbGlkYXRpb24uZ2V0VmFsdWVUeXBlVmFsaWRhdGlvbkVycm9yKCB2YWx1ZSwgdHlwZUluQXJyYXksIHZhbGlkYXRvci52YWxpZGF0aW9uTWVzc2FnZSApICkgKSApIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyhcbiAgICAgICAgICAgIGB2YWx1ZSBub3QgdmFsaWQgZm9yIGFueSB2YWx1ZVR5cGUgaW4gJHt2YWx1ZVR5cGUudG9TdHJpbmcoKS5zdWJzdHJpbmcoIDAsIDEwMCApfSwgdmFsdWU6ICR7dmFsdWV9YCxcbiAgICAgICAgICAgIHZhbGlkYXRvci52YWxpZGF0aW9uTWVzc2FnZSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmICggdmFsdWVUeXBlICkge1xuXG4gICAgICAgIGNvbnN0IHZhbHVlVHlwZVZhbGlkYXRpb25FcnJvciA9IFZhbGlkYXRpb24uZ2V0VmFsdWVUeXBlVmFsaWRhdGlvbkVycm9yKCB2YWx1ZSwgdmFsdWVUeXBlLCB2YWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgKTtcbiAgICAgICAgaWYgKCB2YWx1ZVR5cGVWYWxpZGF0aW9uRXJyb3IgKSB7XG5cbiAgICAgICAgICAvLyBnZXRWYWx1ZVR5cGVWYWxpZGF0aW9uRXJyb3Igd2lsbCBhZGQgdGhlIHZhbGlkYXRpb25NZXNzYWdlIGZvciB1c1xuICAgICAgICAgIHJldHVybiB2YWx1ZVR5cGVWYWxpZGF0aW9uRXJyb3I7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIHZhbGlkYXRvci52YWxpZFZhbHVlcyApIHtcblxuICAgICAgY29uc3QgdmFsdWVDb21wYXJpc29uU3RyYXRlZ3k6IFZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5PFQ+ID0gdmFsaWRhdG9yLnZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5IHx8ICdyZWZlcmVuY2UnO1xuICAgICAgY29uc3QgdmFsdWVWYWxpZCA9IHZhbGlkYXRvci52YWxpZFZhbHVlcy5zb21lKCB2YWxpZFZhbHVlID0+IHtcblxuICAgICAgICBpZiAoIHZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5ID09PSAncmVmZXJlbmNlJyApIHtcbiAgICAgICAgICByZXR1cm4gdmFsaWRWYWx1ZSA9PT0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCB2YWx1ZUNvbXBhcmlzb25TdHJhdGVneSA9PT0gJ2VxdWFsc0Z1bmN0aW9uJyApIHtcbiAgICAgICAgICBjb25zdCB2YWxpZENvbXBhcmFibGUgPSB2YWxpZFZhbHVlIGFzIENvbXBhcmFibGVPYmplY3Q7XG4gICAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggISF2YWxpZENvbXBhcmFibGUuZXF1YWxzLCAnbm8gZXF1YWxzIGZ1bmN0aW9uIGZvciAxc3QgYXJnJyApO1xuICAgICAgICAgIGFzc2VydCAmJiBhc3NlcnQoICEhdmFsdWUuZXF1YWxzLCAnbm8gZXF1YWxzIGZ1bmN0aW9uIGZvciAybmQgYXJnJyApO1xuICAgICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHZhbGlkQ29tcGFyYWJsZS5lcXVhbHMoIHZhbHVlICkgPT09IHZhbHVlLmVxdWFscyggdmFsaWRDb21wYXJhYmxlICksICdpbmNvbXBhdGlibGUgZXF1YWxpdHkgY2hlY2tzJyApO1xuXG4gICAgICAgICAgcmV0dXJuIHZhbGlkQ29tcGFyYWJsZS5lcXVhbHMoIHZhbHVlICk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCB2YWx1ZUNvbXBhcmlzb25TdHJhdGVneSA9PT0gJ2xvZGFzaERlZXAnICkge1xuICAgICAgICAgIHJldHVybiBfLmlzRXF1YWwoIHZhbGlkVmFsdWUsIHZhbHVlICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5KCB2YWxpZFZhbHVlLCB2YWx1ZSApO1xuICAgICAgICB9XG4gICAgICB9ICk7XG5cbiAgICAgIGlmICggIXZhbHVlVmFsaWQgKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbWJpbmVFcnJvck1lc3NhZ2VzKCBgdmFsdWUgbm90IGluIHZhbGlkVmFsdWVzOiAke3ZhbHVlfWAsIHZhbGlkYXRvci52YWxpZGF0aW9uTWVzc2FnZSApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoIHZhbGlkYXRvci5oYXNPd25Qcm9wZXJ0eSggJ2lzVmFsaWRWYWx1ZScgKSAmJiAhdmFsaWRhdG9yLmlzVmFsaWRWYWx1ZSEoIHZhbHVlICkgKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyggYHZhbHVlIGZhaWxlZCBpc1ZhbGlkVmFsdWU6ICR7dmFsdWV9YCwgdmFsaWRhdG9yLnZhbGlkYXRpb25NZXNzYWdlICk7XG4gICAgfVxuICAgIGlmICggdmFsaWRhdG9yLmhhc093blByb3BlcnR5KCAncGhldGlvVHlwZScgKSApIHtcblxuICAgICAgY29uc3QgcGhldGlvVHlwZVZhbGlkYXRpb25FcnJvciA9IFZhbGlkYXRpb24uZ2V0VmFsaWRhdGlvbkVycm9yKCB2YWx1ZSwgdmFsaWRhdG9yLnBoZXRpb1R5cGUhLnZhbGlkYXRvciwgb3B0aW9ucyApO1xuICAgICAgaWYgKCBwaGV0aW9UeXBlVmFsaWRhdGlvbkVycm9yICkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyggYHZhbHVlIGZhaWxlZCBwaGV0aW9UeXBlIHZhbGlkYXRvcjogJHt2YWx1ZX0sIGVycm9yOiAke3BoZXRpb1R5cGVWYWxpZGF0aW9uRXJyb3J9YCwgdmFsaWRhdG9yLnZhbGlkYXRpb25NZXNzYWdlICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCB2YWxpZGF0b3IuaGFzT3duUHJvcGVydHkoICd2YWxpZGF0b3JzJyApICkge1xuICAgICAgY29uc3QgdmFsaWRhdG9ycyA9IHZhbGlkYXRvci52YWxpZGF0b3JzITtcblxuICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdmFsaWRhdG9ycy5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgY29uc3Qgc3ViVmFsaWRhdG9yID0gdmFsaWRhdG9yc1sgaSBdO1xuICAgICAgICBjb25zdCBzdWJWYWxpZGF0aW9uRXJyb3IgPSBWYWxpZGF0aW9uLmdldFZhbGlkYXRpb25FcnJvciggdmFsdWUsIHN1YlZhbGlkYXRvciwgb3B0aW9ucyApO1xuICAgICAgICBpZiAoIHN1YlZhbGlkYXRpb25FcnJvciApIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyggYEZhaWxlZCB2YWxpZGF0aW9uIGZvciB2YWxpZGF0b3JzWyR7aX1dOiAke3N1YlZhbGlkYXRpb25FcnJvcn1gLCB2YWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0VmFsdWVUeXBlVmFsaWRhdGlvbkVycm9yKCB2YWx1ZTogSW50ZW50aW9uYWxBbnksIHZhbHVlVHlwZTogVmFsdWVUeXBlLCBtZXNzYWdlPzogc3RyaW5nICk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICggdHlwZW9mIHZhbHVlVHlwZSA9PT0gJ3N0cmluZycgJiYgdHlwZW9mIHZhbHVlICE9PSB2YWx1ZVR5cGUgKSB7IC8vIHByaW1pdGl2ZSB0eXBlXG4gICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyggYHZhbHVlIHNob3VsZCBoYXZlIHR5cGVvZiAke3ZhbHVlVHlwZX0sIHZhbHVlPSR7dmFsdWV9YCwgbWVzc2FnZSApO1xuICAgIH1cbiAgICBlbHNlIGlmICggdmFsdWVUeXBlID09PSBBcnJheSAmJiAhQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbWJpbmVFcnJvck1lc3NhZ2VzKCBgdmFsdWUgc2hvdWxkIGhhdmUgYmVlbiBhbiBhcnJheSwgdmFsdWU9JHt2YWx1ZX1gLCBtZXNzYWdlICk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCB2YWx1ZVR5cGUgaW5zdGFuY2VvZiBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgJiYgIXZhbHVlVHlwZS5pbmNsdWRlcyggdmFsdWUgKSApIHtcbiAgICAgIHJldHVybiB0aGlzLmNvbWJpbmVFcnJvck1lc3NhZ2VzKCBgdmFsdWUgaXMgbm90IGEgbWVtYmVyIG9mIEVudW1lcmF0aW9uRGVwcmVjYXRlZCAke3ZhbHVlVHlwZX1gLCBtZXNzYWdlICk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCB0eXBlb2YgdmFsdWVUeXBlID09PSAnZnVuY3Rpb24nICYmICEoIHZhbHVlIGluc3RhbmNlb2YgdmFsdWVUeXBlICkgKSB7IC8vIGNvbnN0cnVjdG9yXG4gICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyggYHZhbHVlIHNob3VsZCBiZSBpbnN0YW5jZW9mICR7dmFsdWVUeXBlLm5hbWV9LCB2YWx1ZT0ke3ZhbHVlfWAsIG1lc3NhZ2UgKTtcbiAgICB9XG4gICAgaWYgKCB2YWx1ZVR5cGUgPT09IG51bGwgJiYgdmFsdWUgIT09IG51bGwgKSB7XG4gICAgICByZXR1cm4gdGhpcy5jb21iaW5lRXJyb3JNZXNzYWdlcyggYHZhbHVlIHNob3VsZCBiZSBudWxsLCB2YWx1ZT0ke3ZhbHVlfWAsIG1lc3NhZ2UgKTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgYSB0eXBlIHRoYXQgY2FuIGJlIGEgdHlwZSwgb3IgYW4gYXJyYXkgb2YgbXVsdGlwbGUgdHlwZXMuIERvZXMgbm90IGFkZCB2YWxpZGF0aW9uTWVzc2FnZSB0byBhbnkgZXJyb3JcbiAgICogaXQgcmVwb3J0c1xuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0VmFsdWVPckVsZW1lbnRUeXBlVmFsaWRhdGlvbkVycm9yKCB0eXBlOiBWYWx1ZVR5cGUgKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCBBcnJheS5pc0FycmF5KCB0eXBlICkgKSB7XG5cbiAgICAgIC8vIElmIG5vdCBldmVyeSB0eXBlIGluIHRoZSBsaXN0IGlzIHZhbGlkLCB0aGVuIHJldHVybiBmYWxzZSwgcGFzcyBvcHRpb25zIHRocm91Z2ggdmVyYmF0aW0uXG4gICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aDsgaSsrICkge1xuICAgICAgICBjb25zdCB0eXBlRWxlbWVudCA9IHR5cGVbIGkgXTtcbiAgICAgICAgY29uc3QgZXJyb3IgPSBWYWxpZGF0aW9uLmdldFZhbHVlVHlwZVZhbGlkYXRvclZhbGlkYXRpb25FcnJvciggdHlwZUVsZW1lbnQgKTtcbiAgICAgICAgaWYgKCBlcnJvciApIHtcbiAgICAgICAgICByZXR1cm4gYEFycmF5IHZhbHVlIGludmFsaWQ6ICR7ZXJyb3J9YDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBlbHNlIGlmICggdHlwZSApIHtcbiAgICAgIGNvbnN0IGVycm9yID0gVmFsaWRhdGlvbi5nZXRWYWx1ZVR5cGVWYWxpZGF0b3JWYWxpZGF0aW9uRXJyb3IoIHR5cGUgKTtcbiAgICAgIGlmICggZXJyb3IgKSB7XG4gICAgICAgIHJldHVybiBgVmFsdWUgdHlwZSBpbnZhbGlkOiAke2Vycm9yfWA7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBudWxsO1xuICB9XG5cblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFZBTElEQVRPUl9LRVlTID0gVkFMSURBVE9SX0tFWVM7XG5cbiAgLyoqXG4gICAqIEdlbmVyYWwgdmFsaWRhdG9yIGZvciB2YWxpZGF0aW5nIHRoYXQgYSBzdHJpbmcgZG9lc24ndCBoYXZlIHRlbXBsYXRlIHZhcmlhYmxlcyBpbiBpdC5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgU1RSSU5HX1dJVEhPVVRfVEVNUExBVEVfVkFSU19WQUxJREFUT1I6IFZhbGlkYXRvcjxzdHJpbmc+ID0ge1xuICAgIHZhbHVlVHlwZTogJ3N0cmluZycsXG4gICAgaXNWYWxpZFZhbHVlOiB2ID0+ICEvXFx7XFx7XFx3KlxcfVxcfS8udGVzdCggdiApXG4gIH07XG59XG5cbmF4b24ucmVnaXN0ZXIoICdWYWxpZGF0aW9uJywgVmFsaWRhdGlvbiApO1xuIl0s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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/validate.js
// Copyright 2019-2023, University of Colorado Boulder

/**
 * Throws an assertion error if assertions are enabled and the value is invalid, otherwise returns the value.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */




/**
 * If assertions are enabled, assert out if the value does not adhere to the validator. No-op without assertions.
 * @deprecated - this solution is worse than a direct assertion (or otherwise call Validation.getValidationError directly)
 */
const validate = (value, validator, providedOptions) => {
  if (assert) {
    // Throws an error if not valid
    const result = Validation.getValidationError(value, validator, providedOptions);
    if (result) {
      const prunedValidator = _.pick(validator, Validation.VALIDATOR_KEYS);
      assert && assert(false, 'validation failed:', result, 'prunedValidator:', prunedValidator);
    }
  }
};
js_axon.register('validate', validate);
/* harmony default export */ const js_validate = (validate);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVmFsaWRhdGlvbiIsInZhbGlkYXRlIiwidmFsdWUiLCJ2YWxpZGF0b3IiLCJwcm92aWRlZE9wdGlvbnMiLCJhc3NlcnQiLCJyZXN1bHQiLCJnZXRWYWxpZGF0aW9uRXJyb3IiLCJwcnVuZWRWYWxpZGF0b3IiLCJfIiwicGljayIsIlZBTElEQVRPUl9LRVlTIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJ2YWxpZGF0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBUaHJvd3MgYW4gYXNzZXJ0aW9uIGVycm9yIGlmIGFzc2VydGlvbnMgYXJlIGVuYWJsZWQgYW5kIHRoZSB2YWx1ZSBpcyBpbnZhbGlkLCBvdGhlcndpc2UgcmV0dXJucyB0aGUgdmFsdWUuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5pbXBvcnQgVmFsaWRhdGlvbiwgeyBJc1ZhbGlkVmFsdWVPcHRpb25zLCBWYWxpZGF0b3IgfSBmcm9tICcuL1ZhbGlkYXRpb24uanMnO1xuXG4vKipcbiAqIElmIGFzc2VydGlvbnMgYXJlIGVuYWJsZWQsIGFzc2VydCBvdXQgaWYgdGhlIHZhbHVlIGRvZXMgbm90IGFkaGVyZSB0byB0aGUgdmFsaWRhdG9yLiBOby1vcCB3aXRob3V0IGFzc2VydGlvbnMuXG4gKiBAZGVwcmVjYXRlZCAtIHRoaXMgc29sdXRpb24gaXMgd29yc2UgdGhhbiBhIGRpcmVjdCBhc3NlcnRpb24gKG9yIG90aGVyd2lzZSBjYWxsIFZhbGlkYXRpb24uZ2V0VmFsaWRhdGlvbkVycm9yIGRpcmVjdGx5KVxuICovXG5jb25zdCB2YWxpZGF0ZSA9IDxUPiggdmFsdWU6IEludGVudGlvbmFsQW55LCB2YWxpZGF0b3I6IFZhbGlkYXRvcjxUPiwgcHJvdmlkZWRPcHRpb25zPzogSXNWYWxpZFZhbHVlT3B0aW9ucyApOiB2b2lkID0+IHtcblxuICBpZiAoIGFzc2VydCApIHtcblxuICAgIC8vIFRocm93cyBhbiBlcnJvciBpZiBub3QgdmFsaWRcbiAgICBjb25zdCByZXN1bHQgPSBWYWxpZGF0aW9uLmdldFZhbGlkYXRpb25FcnJvciggdmFsdWUsIHZhbGlkYXRvciwgcHJvdmlkZWRPcHRpb25zICk7XG4gICAgaWYgKCByZXN1bHQgKSB7XG4gICAgICBjb25zdCBwcnVuZWRWYWxpZGF0b3IgPSBfLnBpY2soIHZhbGlkYXRvciwgVmFsaWRhdGlvbi5WQUxJREFUT1JfS0VZUyApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICd2YWxpZGF0aW9uIGZhaWxlZDonLCByZXN1bHQsICdwcnVuZWRWYWxpZGF0b3I6JywgcHJ1bmVkVmFsaWRhdG9yICk7XG4gICAgfVxuICB9XG59O1xuXG5cbmF4b24ucmVnaXN0ZXIoICd2YWxpZGF0ZScsIHZhbGlkYXRlICk7XG5leHBvcnQgZGVmYXVsdCB2YWxpZGF0ZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxJQUFJLE1BQU0sV0FBVztBQUU1QixPQUFPQyxVQUFVLE1BQTBDLGlCQUFpQjs7QUFFNUU7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxRQUFRLEdBQUdBLENBQUtDLEtBQXFCLEVBQUVDLFNBQXVCLEVBQUVDLGVBQXFDLEtBQVk7RUFFckgsSUFBS0MsTUFBTSxFQUFHO0lBRVo7SUFDQSxNQUFNQyxNQUFNLEdBQUdOLFVBQVUsQ0FBQ08sa0JBQWtCLENBQUVMLEtBQUssRUFBRUMsU0FBUyxFQUFFQyxlQUFlLENBQUU7SUFDakYsSUFBS0UsTUFBTSxFQUFHO01BQ1osTUFBTUUsZUFBZSxHQUFHQyxDQUFDLENBQUNDLElBQUksQ0FBRVAsU0FBUyxFQUFFSCxVQUFVLENBQUNXLGNBQWMsQ0FBRTtNQUN0RU4sTUFBTSxJQUFJQSxNQUFNLENBQUUsS0FBSyxFQUFFLG9CQUFvQixFQUFFQyxNQUFNLEVBQUUsa0JBQWtCLEVBQUVFLGVBQWUsQ0FBRTtJQUM5RjtFQUNGO0FBQ0YsQ0FBQztBQUdEVCxJQUFJLENBQUNhLFFBQVEsQ0FBRSxVQUFVLEVBQUVYLFFBQVEsQ0FBRTtBQUNyQyxlQUFlQSxRQUFRIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/PhetioConstants.js
// Copyright 2020-2022, University of Colorado Boulder



/**
 * Constants used in PhET-iO. Defined in the tandem repo since they need to be accessed in non-private code, like
 * IOType.ObjectIO.
 * @author Sam Reid (PhET Interactive Simulations)
 */
const PhetioConstants = {
  // Suffix that is required for all IO Type class names
  IO_TYPE_SUFFIX: 'IO'
};
tandemNamespace.register('PhetioConstants', PhetioConstants);
/* harmony default export */ const js_PhetioConstants = (PhetioConstants);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJQaGV0aW9Db25zdGFudHMiLCJJT19UWVBFX1NVRkZJWCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGhldGlvQ29uc3RhbnRzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4vdGFuZGVtTmFtZXNwYWNlLmpzJztcblxuLyoqXG4gKiBDb25zdGFudHMgdXNlZCBpbiBQaEVULWlPLiBEZWZpbmVkIGluIHRoZSB0YW5kZW0gcmVwbyBzaW5jZSB0aGV5IG5lZWQgdG8gYmUgYWNjZXNzZWQgaW4gbm9uLXByaXZhdGUgY29kZSwgbGlrZVxuICogSU9UeXBlLk9iamVjdElPLlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuY29uc3QgUGhldGlvQ29uc3RhbnRzID0ge1xuXG4gIC8vIFN1ZmZpeCB0aGF0IGlzIHJlcXVpcmVkIGZvciBhbGwgSU8gVHlwZSBjbGFzcyBuYW1lc1xuICBJT19UWVBFX1NVRkZJWDogJ0lPJ1xufTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnUGhldGlvQ29uc3RhbnRzJywgUGhldGlvQ29uc3RhbnRzICk7XG5leHBvcnQgZGVmYXVsdCBQaGV0aW9Db25zdGFudHM7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sc0JBQXNCOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsZUFBZSxHQUFHO0VBRXRCO0VBQ0FDLGNBQWMsRUFBRTtBQUNsQixDQUFDO0FBRURGLGVBQWUsQ0FBQ0csUUFBUSxDQUFFLGlCQUFpQixFQUFFRixlQUFlLENBQUU7QUFDOUQsZUFBZUEsZUFBZSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/TandemConstants.js
// Copyright 2021-2023, University of Colorado Boulder



/**
 * Factored-out constant values for use in Tandem.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */

const OBJECT_IO_TYPE_NAME = 'ObjectIO';
const EVENT_TYPE_MODEL = 'MODEL';
const metadataDefaults = {
  phetioTypeName: OBJECT_IO_TYPE_NAME,
  phetioDocumentation: '',
  phetioState: true,
  phetioReadOnly: false,
  // NOTE: Relies on the details about how Enumerations are serialized (via name), like EventType.phetioType.toStateObject( object.phetioEventType )
  phetioEventType: EVENT_TYPE_MODEL,
  phetioHighFrequency: false,
  phetioPlayback: false,
  phetioDynamicElement: false,
  phetioIsArchetype: false,
  phetioFeatured: false,
  phetioDesigned: false,
  phetioArchetypePhetioID: null
};
const TandemConstants = {
  OBJECT_IO_TYPE_NAME: OBJECT_IO_TYPE_NAME,
  EVENT_TYPE_MODEL: EVENT_TYPE_MODEL,
  // Default metadata set for an ObjectIO in the PhET-iO API.  These are used as the default options in PhetioObject
  // and when outputting an API (since values that match the defaults are omitted)
  PHET_IO_OBJECT_METADATA_DEFAULTS: metadataDefaults,
  METADATA_KEY_NAME: '_metadata',
  DATA_KEY_NAME: '_data'
};
tandemNamespace.register('TandemConstants', TandemConstants);
/* harmony default export */ const js_TandemConstants = (TandemConstants);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJPQkpFQ1RfSU9fVFlQRV9OQU1FIiwiRVZFTlRfVFlQRV9NT0RFTCIsIm1ldGFkYXRhRGVmYXVsdHMiLCJwaGV0aW9UeXBlTmFtZSIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJwaGV0aW9TdGF0ZSIsInBoZXRpb1JlYWRPbmx5IiwicGhldGlvRXZlbnRUeXBlIiwicGhldGlvSGlnaEZyZXF1ZW5jeSIsInBoZXRpb1BsYXliYWNrIiwicGhldGlvRHluYW1pY0VsZW1lbnQiLCJwaGV0aW9Jc0FyY2hldHlwZSIsInBoZXRpb0ZlYXR1cmVkIiwicGhldGlvRGVzaWduZWQiLCJwaGV0aW9BcmNoZXR5cGVQaGV0aW9JRCIsIlRhbmRlbUNvbnN0YW50cyIsIlBIRVRfSU9fT0JKRUNUX01FVEFEQVRBX0RFRkFVTFRTIiwiTUVUQURBVEFfS0VZX05BTUUiLCJEQVRBX0tFWV9OQU1FIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJUYW5kZW1Db25zdGFudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuaW1wb3J0IFBpY2tSZXF1aXJlZCBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvUGlja1JlcXVpcmVkLmpzJztcbmltcG9ydCB0YW5kZW1OYW1lc3BhY2UgZnJvbSAnLi90YW5kZW1OYW1lc3BhY2UuanMnO1xuXG4vKipcbiAqIEZhY3RvcmVkLW91dCBjb25zdGFudCB2YWx1ZXMgZm9yIHVzZSBpbiBUYW5kZW0uXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5jb25zdCBPQkpFQ1RfSU9fVFlQRV9OQU1FID0gJ09iamVjdElPJztcbmNvbnN0IEVWRU5UX1RZUEVfTU9ERUwgPSAnTU9ERUwnO1xuXG5leHBvcnQgdHlwZSBQaGV0aW9JRCA9IHN0cmluZztcblxuZXhwb3J0IHR5cGUgUGhldGlvRWxlbWVudERhdGEgPSB7XG4gIGluaXRpYWxTdGF0ZTogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59O1xuXG5leHBvcnQgdHlwZSBQaGV0aW9FbGVtZW50ID0ge1xuICBfbWV0YWRhdGE6IFBoZXRpb09iamVjdE1ldGFkYXRhO1xuICBfZGF0YT86IFBoZXRpb0VsZW1lbnREYXRhO1xufTtcblxuLy8gSW4gdHJlZSBzdHJ1Y3R1cmVcbmV4cG9ydCB0eXBlIFBoZXRpb0VsZW1lbnRzID0ge1xuXG4gIC8vIEVhY2ggc3RyaW5nIGlzIGEgY29tcG9uZW50IG5hbWUgb2YgYSBQaGV0aW9JRFxuICBbIG5hbWU6IHN0cmluZyBdOiBQaGV0aW9FbGVtZW50cztcbn0gJiBQaGV0aW9FbGVtZW50O1xuXG5leHBvcnQgdHlwZSBNZXRob2QgPSB7XG4gIHJldHVyblR5cGU6IHN0cmluZztcbiAgcGFyYW1ldGVyVHlwZXM6IHN0cmluZ1tdO1xuICBkb2N1bWVudGF0aW9uOiBzdHJpbmc7XG4gIGludm9jYWJsZUZvclJlYWRPbmx5RWxlbWVudHM/OiBib29sZWFuO1xufTtcblxuZXhwb3J0IHR5cGUgUGhldGlvT2JqZWN0U3RhdGUgPSBSZWNvcmQ8c3RyaW5nLCBJbnRlbnRpb25hbEFueT47XG5cbmV4cG9ydCB0eXBlIE1ldGhvZHMgPSBSZWNvcmQ8c3RyaW5nLCBNZXRob2Q+O1xuXG5leHBvcnQgdHlwZSBQaGV0aW9UeXBlID0ge1xuICBtZXRob2RzOiBNZXRob2RzO1xuICBzdXBlcnR5cGU/OiBzdHJpbmc7IC8vIG5vIHN1cGVydHlwZSBmb3Igcm9vdCBvZiBoaWVyYXJjaHlcbiAgdHlwZU5hbWU6IHN0cmluZztcbiAgZG9jdW1lbnRhdGlvbj86IHN0cmluZztcbiAgZXZlbnRzOiBzdHJpbmdbXTtcbiAgbWV0YWRhdGFEZWZhdWx0cz86IFBhcnRpYWw8UGhldGlvT2JqZWN0TWV0YWRhdGE+O1xuICBkYXRhRGVmYXVsdHM/OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcbiAgbWV0aG9kT3JkZXI/OiBzdHJpbmdbXTtcbiAgc3RhdGVTY2hlbWE/OiBQaGV0aW9PYmplY3RTdGF0ZTtcbiAgcGFyYW1ldGVyVHlwZXM/OiBzdHJpbmdbXTsgLy8gZWFjaCB0eXBlTmFtZVxufTtcbmV4cG9ydCB0eXBlIFBoZXRpb1R5cGVzID0gUmVjb3JkPHN0cmluZywgUGhldGlvVHlwZT47XG5cbmV4cG9ydCB0eXBlIFBoZXRpb092ZXJyaWRlcyA9IFJlY29yZDxzdHJpbmcsIFBhcnRpYWw8UGhldGlvT2JqZWN0TWV0YWRhdGE+PjtcblxuZXhwb3J0IHR5cGUgUGhldGlvU3RhdGUgPSBSZWNvcmQ8c3RyaW5nLCBvYmplY3Q+O1xuXG4vLyBMaWtlIHRoZSBnZW5lcmF0ZSBBUEkgZmlsZXNcbmV4cG9ydCB0eXBlIFBoZXRpb0FQSSA9IHtcbiAgdmVyc2lvbjoge1xuICAgIG1ham9yOiBudW1iZXI7XG4gICAgbWlub3I6IG51bWJlcjtcbiAgfTtcbiAgcGhldGlvRnVsbEFQST86IGJvb2xlYW47XG4gIHNpbTogc3RyaW5nO1xuICBwaGV0aW9FbGVtZW50czogUGhldGlvRWxlbWVudHM7XG4gIHBoZXRpb1R5cGVzOiBQaGV0aW9UeXBlcztcbn07XG5cbi8vIExpa2UgdGhlIG9sZCBBUEkgc2NoZW1hLCB3aGVyZSBrZXlzIGFyZSB0aGUgZnVsbCwgZG90LXNlcGFyYXRlZCBwaGV0aW9JRFxuZXhwb3J0IHR5cGUgQVBJRmxhdCA9IFJlY29yZDxQaGV0aW9JRCwgUGhldGlvRWxlbWVudD47XG5cbmV4cG9ydCB0eXBlIFBoZXRpb09iamVjdE1ldGFkYXRhID0ge1xuXG4gIC8vIFVzZWQgaW4gUGhldGlvT2JqZWN0T3B0aW9uc1xuICBwaGV0aW9TdGF0ZTogYm9vbGVhbjtcbiAgcGhldGlvUmVhZE9ubHk6IGJvb2xlYW47XG4gIHBoZXRpb0V2ZW50VHlwZTogc3RyaW5nO1xuICBwaGV0aW9Eb2N1bWVudGF0aW9uOiBzdHJpbmc7XG4gIHBoZXRpb0hpZ2hGcmVxdWVuY3k6IGJvb2xlYW47IC8vIEBkZXByZWNhdGVkXG4gIHBoZXRpb1BsYXliYWNrOiBib29sZWFuO1xuICBwaGV0aW9GZWF0dXJlZD86IGJvb2xlYW47IC8vIExpbmtlZEVsZW1lbnRzIGhhdmUgbm8gcGhldGlvRmVhdHVyZWQgYmVjYXVzZSB0aGV5IGRlZmVyIHRvIHRoZWlyIGNvcmUgZWxlbWVudFxuICBwaGV0aW9EeW5hbWljRWxlbWVudDogYm9vbGVhbjtcbiAgcGhldGlvRGVzaWduZWQ6IGJvb2xlYW47XG5cbiAgLy8gU3BlY2lmaWMgdG8gTWV0YWRhdGFcbiAgcGhldGlvVHlwZU5hbWU6IHN0cmluZztcbiAgcGhldGlvSXNBcmNoZXR5cGU6IGJvb2xlYW47XG4gIHBoZXRpb0FyY2hldHlwZVBoZXRpb0lEPzogc3RyaW5nIHwgbnVsbDtcblxuICAvLyBGb3IgUGhldGlvRHluYW1pY0VsZW1lbnRDb250YWluZXIuICBUT0RPOiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdGFuZGVtL2lzc3Vlcy8yNjMgY2FuIHRoaXMgYmUgZWxzZXdoZXJlP1xuICBwaGV0aW9EeW5hbWljRWxlbWVudE5hbWU/OiBzdHJpbmcgfCBudWxsO1xufTtcblxuY29uc3QgbWV0YWRhdGFEZWZhdWx0czogUGhldGlvT2JqZWN0TWV0YWRhdGEgJiBQaWNrUmVxdWlyZWQ8UGhldGlvT2JqZWN0TWV0YWRhdGEsICdwaGV0aW9GZWF0dXJlZCc+ID0ge1xuICBwaGV0aW9UeXBlTmFtZTogT0JKRUNUX0lPX1RZUEVfTkFNRSxcbiAgcGhldGlvRG9jdW1lbnRhdGlvbjogJycsXG4gIHBoZXRpb1N0YXRlOiB0cnVlLFxuICBwaGV0aW9SZWFkT25seTogZmFsc2UsXG5cbiAgLy8gTk9URTogUmVsaWVzIG9uIHRoZSBkZXRhaWxzIGFib3V0IGhvdyBFbnVtZXJhdGlvbnMgYXJlIHNlcmlhbGl6ZWQgKHZpYSBuYW1lKSwgbGlrZSBFdmVudFR5cGUucGhldGlvVHlwZS50b1N0YXRlT2JqZWN0KCBvYmplY3QucGhldGlvRXZlbnRUeXBlIClcbiAgcGhldGlvRXZlbnRUeXBlOiBFVkVOVF9UWVBFX01PREVMLFxuICBwaGV0aW9IaWdoRnJlcXVlbmN5OiBmYWxzZSxcbiAgcGhldGlvUGxheWJhY2s6IGZhbHNlLFxuICBwaGV0aW9EeW5hbWljRWxlbWVudDogZmFsc2UsXG4gIHBoZXRpb0lzQXJjaGV0eXBlOiBmYWxzZSxcbiAgcGhldGlvRmVhdHVyZWQ6IGZhbHNlLFxuICBwaGV0aW9EZXNpZ25lZDogZmFsc2UsXG4gIHBoZXRpb0FyY2hldHlwZVBoZXRpb0lEOiBudWxsXG59O1xuXG5cbmNvbnN0IFRhbmRlbUNvbnN0YW50cyA9IHtcbiAgT0JKRUNUX0lPX1RZUEVfTkFNRTogT0JKRUNUX0lPX1RZUEVfTkFNRSxcbiAgRVZFTlRfVFlQRV9NT0RFTDogRVZFTlRfVFlQRV9NT0RFTCxcblxuICAvLyBEZWZhdWx0IG1ldGFkYXRhIHNldCBmb3IgYW4gT2JqZWN0SU8gaW4gdGhlIFBoRVQtaU8gQVBJLiAgVGhlc2UgYXJlIHVzZWQgYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBpbiBQaGV0aW9PYmplY3RcbiAgLy8gYW5kIHdoZW4gb3V0cHV0dGluZyBhbiBBUEkgKHNpbmNlIHZhbHVlcyB0aGF0IG1hdGNoIHRoZSBkZWZhdWx0cyBhcmUgb21pdHRlZClcbiAgUEhFVF9JT19PQkpFQ1RfTUVUQURBVEFfREVGQVVMVFM6IG1ldGFkYXRhRGVmYXVsdHMsXG5cbiAgTUVUQURBVEFfS0VZX05BTUU6ICdfbWV0YWRhdGEnLFxuICBEQVRBX0tFWV9OQU1FOiAnX2RhdGEnXG5cbn0gYXMgY29uc3Q7XG5cbnRhbmRlbU5hbWVzcGFjZS5yZWdpc3RlciggJ1RhbmRlbUNvbnN0YW50cycsIFRhbmRlbUNvbnN0YW50cyApO1xuZXhwb3J0IGRlZmF1bHQgVGFuZGVtQ29uc3RhbnRzOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBSUEsT0FBT0EsZUFBZSxNQUFNLHNCQUFzQjs7QUFFbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE1BQU1DLG1CQUFtQixHQUFHLFVBQVU7QUFDdEMsTUFBTUMsZ0JBQWdCLEdBQUcsT0FBTztBQXNGaEMsTUFBTUMsZ0JBQTZGLEdBQUc7RUFDcEdDLGNBQWMsRUFBRUgsbUJBQW1CO0VBQ25DSSxtQkFBbUIsRUFBRSxFQUFFO0VBQ3ZCQyxXQUFXLEVBQUUsSUFBSTtFQUNqQkMsY0FBYyxFQUFFLEtBQUs7RUFFckI7RUFDQUMsZUFBZSxFQUFFTixnQkFBZ0I7RUFDakNPLG1CQUFtQixFQUFFLEtBQUs7RUFDMUJDLGNBQWMsRUFBRSxLQUFLO0VBQ3JCQyxvQkFBb0IsRUFBRSxLQUFLO0VBQzNCQyxpQkFBaUIsRUFBRSxLQUFLO0VBQ3hCQyxjQUFjLEVBQUUsS0FBSztFQUNyQkMsY0FBYyxFQUFFLEtBQUs7RUFDckJDLHVCQUF1QixFQUFFO0FBQzNCLENBQUM7QUFHRCxNQUFNQyxlQUFlLEdBQUc7RUFDdEJmLG1CQUFtQixFQUFFQSxtQkFBbUI7RUFDeENDLGdCQUFnQixFQUFFQSxnQkFBZ0I7RUFFbEM7RUFDQTtFQUNBZSxnQ0FBZ0MsRUFBRWQsZ0JBQWdCO0VBRWxEZSxpQkFBaUIsRUFBRSxXQUFXO0VBQzlCQyxhQUFhLEVBQUU7QUFFakIsQ0FBVTtBQUVWbkIsZUFBZSxDQUFDb0IsUUFBUSxDQUFFLGlCQUFpQixFQUFFSixlQUFlLENBQUU7QUFDOUQsZUFBZUEsZUFBZSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/assertMutuallyExclusiveOptions.js
// Copyright 2019-2020, University of Colorado Boulder

/**
 * Throws an assertion error if mutually exclusive options are specified.
 *
 * @example
 * assertMutuallyExclusiveOptions( { tree:1, flower:2 }, [ 'tree' ], [ 'flower' ] ) => error
 * assertMutuallyExclusiveOptions( { flower:2 }, [ 'tree' ], [ 'flower' ] ) => no error
 * assertMutuallyExclusiveOptions( { tree:1 }, [ 'tree' ], [ 'flower' ] ) => no error
 * assertMutuallyExclusiveOptions( { tree:1, mountain:2 }, [ 'tree', 'mountain' ], [ 'flower' ] ) => no error
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */



/**
 * @param {Object|null|undefined} options - an options object.  Could be before or after merge, and may therefore
 *                                        - be null or undefined
 * @param {...string[]} sets - families of mutually exclusive option keys, see examples above.
 */
const assertMutuallyExclusiveOptions = function (options, ...sets) {
  if (assert && options) {
    // Determine which options are used from each set
    const usedElementsFromEachSet = sets.map(set => Object.keys(_.pick(options, ...set)));

    // If any element is used from more than one set...
    if (usedElementsFromEachSet.filter(usedElements => usedElements.length > 0).length > 1) {
      // Output the errant options.
      assert && assert(false, `Cannot simultaneously specify ${usedElementsFromEachSet.join(' and ')}`);
    }
  }
};
js_phetCore.register('assertMutuallyExclusiveOptions', assertMutuallyExclusiveOptions);
/* harmony default export */ const js_assertMutuallyExclusiveOptions = (assertMutuallyExclusiveOptions);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyIsIm9wdGlvbnMiLCJzZXRzIiwiYXNzZXJ0IiwidXNlZEVsZW1lbnRzRnJvbUVhY2hTZXQiLCJtYXAiLCJzZXQiLCJPYmplY3QiLCJrZXlzIiwiXyIsInBpY2siLCJmaWx0ZXIiLCJ1c2VkRWxlbWVudHMiLCJsZW5ndGgiLCJqb2luIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogVGhyb3dzIGFuIGFzc2VydGlvbiBlcnJvciBpZiBtdXR1YWxseSBleGNsdXNpdmUgb3B0aW9ucyBhcmUgc3BlY2lmaWVkLlxuICpcbiAqIEBleGFtcGxlXG4gKiBhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMoIHsgdHJlZToxLCBmbG93ZXI6MiB9LCBbICd0cmVlJyBdLCBbICdmbG93ZXInIF0gKSA9PiBlcnJvclxuICogYXNzZXJ0TXV0dWFsbHlFeGNsdXNpdmVPcHRpb25zKCB7IGZsb3dlcjoyIH0sIFsgJ3RyZWUnIF0sIFsgJ2Zsb3dlcicgXSApID0+IG5vIGVycm9yXG4gKiBhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMoIHsgdHJlZToxIH0sIFsgJ3RyZWUnIF0sIFsgJ2Zsb3dlcicgXSApID0+IG5vIGVycm9yXG4gKiBhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMoIHsgdHJlZToxLCBtb3VudGFpbjoyIH0sIFsgJ3RyZWUnLCAnbW91bnRhaW4nIF0sIFsgJ2Zsb3dlcicgXSApID0+IG5vIGVycm9yXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbi8qKlxuICogQHBhcmFtIHtPYmplY3R8bnVsbHx1bmRlZmluZWR9IG9wdGlvbnMgLSBhbiBvcHRpb25zIG9iamVjdC4gIENvdWxkIGJlIGJlZm9yZSBvciBhZnRlciBtZXJnZSwgYW5kIG1heSB0aGVyZWZvcmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC0gYmUgbnVsbCBvciB1bmRlZmluZWRcbiAqIEBwYXJhbSB7Li4uc3RyaW5nW119IHNldHMgLSBmYW1pbGllcyBvZiBtdXR1YWxseSBleGNsdXNpdmUgb3B0aW9uIGtleXMsIHNlZSBleGFtcGxlcyBhYm92ZS5cbiAqL1xuY29uc3QgYXNzZXJ0TXV0dWFsbHlFeGNsdXNpdmVPcHRpb25zID0gZnVuY3Rpb24oIG9wdGlvbnMsIC4uLnNldHMgKSB7XG4gIGlmICggYXNzZXJ0ICYmIG9wdGlvbnMgKSB7XG5cbiAgICAvLyBEZXRlcm1pbmUgd2hpY2ggb3B0aW9ucyBhcmUgdXNlZCBmcm9tIGVhY2ggc2V0XG4gICAgY29uc3QgdXNlZEVsZW1lbnRzRnJvbUVhY2hTZXQgPSBzZXRzLm1hcCggc2V0ID0+IE9iamVjdC5rZXlzKCBfLnBpY2soIG9wdGlvbnMsIC4uLnNldCApICkgKTtcblxuICAgIC8vIElmIGFueSBlbGVtZW50IGlzIHVzZWQgZnJvbSBtb3JlIHRoYW4gb25lIHNldC4uLlxuICAgIGlmICggdXNlZEVsZW1lbnRzRnJvbUVhY2hTZXQuZmlsdGVyKCB1c2VkRWxlbWVudHMgPT4gdXNlZEVsZW1lbnRzLmxlbmd0aCA+IDAgKS5sZW5ndGggPiAxICkge1xuXG4gICAgICAvLyBPdXRwdXQgdGhlIGVycmFudCBvcHRpb25zLlxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsIGBDYW5ub3Qgc2ltdWx0YW5lb3VzbHkgc3BlY2lmeSAke3VzZWRFbGVtZW50c0Zyb21FYWNoU2V0LmpvaW4oICcgYW5kICcgKX1gICk7XG4gICAgfVxuICB9XG59O1xuXG5waGV0Q29yZS5yZWdpc3RlciggJ2Fzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucycsIGFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyApO1xuZXhwb3J0IGRlZmF1bHQgYXNzZXJ0TXV0dWFsbHlFeGNsdXNpdmVPcHRpb25zOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1DLDhCQUE4QixHQUFHLFNBQUFBLENBQVVDLE9BQU8sRUFBRSxHQUFHQyxJQUFJLEVBQUc7RUFDbEUsSUFBS0MsTUFBTSxJQUFJRixPQUFPLEVBQUc7SUFFdkI7SUFDQSxNQUFNRyx1QkFBdUIsR0FBR0YsSUFBSSxDQUFDRyxHQUFHLENBQUVDLEdBQUcsSUFBSUMsTUFBTSxDQUFDQyxJQUFJLENBQUVDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFVCxPQUFPLEVBQUUsR0FBR0ssR0FBRyxDQUFFLENBQUUsQ0FBRTs7SUFFM0Y7SUFDQSxJQUFLRix1QkFBdUIsQ0FBQ08sTUFBTSxDQUFFQyxZQUFZLElBQUlBLFlBQVksQ0FBQ0MsTUFBTSxHQUFHLENBQUMsQ0FBRSxDQUFDQSxNQUFNLEdBQUcsQ0FBQyxFQUFHO01BRTFGO01BQ0FWLE1BQU0sSUFBSUEsTUFBTSxDQUFFLEtBQUssRUFBRyxpQ0FBZ0NDLHVCQUF1QixDQUFDVSxJQUFJLENBQUUsT0FBTyxDQUFHLEVBQUMsQ0FBRTtJQUN2RztFQUNGO0FBQ0YsQ0FBQztBQUVEZixRQUFRLENBQUNnQixRQUFRLENBQUUsZ0NBQWdDLEVBQUVmLDhCQUE4QixDQUFFO0FBQ3JGLGVBQWVBLDhCQUE4QiJ9
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/StateSchema.js
// Copyright 2021-2023, University of Colorado Boulder

/**
 * Class responsible for storing information about the schema of PhET-iO state. See IOType stateSchema option for usage
 * and more information.
 *
 * There are two types of StateSchema, the first serves as a "value", when the state of an IOType is just a value.
 * The second is a "composite", where the state of an IOType is made from sub-components, each of which have an IOType.
 * Check which type of StateSchema your instance is with StateSchema.isComposite().
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */







class StateSchema {
  // "composite" state schemas are treated differently that value state schemas

  constructor(providedOptions) {
    // Either create with compositeSchema, or specify a that this state is just a value
    assert && js_assertMutuallyExclusiveOptions(providedOptions, ['compositeSchema'], ['displayString', 'validator']);
    const options = optionize()({
      displayString: '',
      validator: null,
      // an object literal of keys that correspond to an IOType
      compositeSchema: null
    }, providedOptions);
    this.displayString = options.displayString;
    this.validator = options.validator;
    this.compositeSchema = options.compositeSchema;
    assert && this.validateStateSchema(this.compositeSchema);
  }

  /**
   * Make sure that a composite state schema is of the correct form. Each value in the object should be an IOType
   * Only useful if assert is called.
   */
  validateStateSchema(stateSchema) {
    if (assert && this.isComposite()) {
      for (const stateSchemaKey in stateSchema) {
        if (stateSchema.hasOwnProperty(stateSchemaKey)) {
          if (stateSchemaKey === '_private') {
            // By putting the assignment in this statement, typescript knows the value as a CompositeSchema
            const stateSchemaValue = stateSchema[stateSchemaKey];
            assert && assert(stateSchemaValue, 'should not be undefined');
            this.validateStateSchema(stateSchemaValue);
          }
        }
      }
    }
  }
  defaultApplyState(coreObject, stateObject) {
    const applyStateForLevel = (schema, stateObjectLevel) => {
      assert && assert(this.isComposite(), 'defaultApplyState from stateSchema only applies to composite stateSchemas');
      for (const stateKey in schema) {
        if (schema.hasOwnProperty(stateKey)) {
          if (stateKey === '_private') {
            applyStateForLevel(schema._private, stateObjectLevel._private);
          } else {
            // The IOType for the key in the composite.
            const schemaIOType = schema[stateKey];
            assert && assert(stateObjectLevel.hasOwnProperty(stateKey), `stateObject does not have expected schema key: ${stateKey}`);

            // Using fromStateObject to deserialize sub-component
            if (schemaIOType.defaultDeserializationMethod === 'fromStateObject') {
              // @ts-expect-error, I don't know how to tell typescript that we are accessing an expected key on the PhetioObject subtype. Likely there is no way with making things generic.
              coreObject[stateKey] = schema[stateKey].fromStateObject(stateObjectLevel[stateKey]);
            } else {
              assert && assert(schemaIOType.defaultDeserializationMethod === 'applyState', 'unexpected deserialization method');

              // Using applyState to deserialize sub-component
              // @ts-expect-error, I don't know how to tell typescript that we are accessing an expected key on the PhetioObject subtype. Likely there is no way with making things generic.
              schema[stateKey].applyState(coreObject[stateKey], stateObjectLevel[stateKey]);
            }
          }
        }
      }
    };
    applyStateForLevel(this.compositeSchema, stateObject);
  }
  defaultToStateObject(coreObject) {
    assert && assert(this.isComposite(), 'defaultToStateObject from stateSchema only applies to composite stateSchemas');
    const toStateObjectForSchemaLevel = schema => {
      const stateObject = {};
      for (const stateKey in schema) {
        if (schema.hasOwnProperty(stateKey)) {
          if (stateKey === '_private') {
            // @ts-expect-error Still working on _private in https://github.com/phetsims/tandem/issues/282
            stateObject._private = toStateObjectForSchemaLevel(schema._private);
          } else {
            // @ts-expect-error I guess we need to support schemas outside of composite here, or tell how to avoid that, https://github.com/phetsims/tandem/issues/261
            assert && assert(coreObject.hasOwnProperty(stateKey), `cannot get state because coreObject does not have expected schema key: ${stateKey}`);

            // @ts-expect-error https://github.com/phetsims/tandem/issues/261
            stateObject[stateKey] = schema[stateKey].toStateObject(coreObject[stateKey]);
          }
        }
      }
      return stateObject;
    };
    return toStateObjectForSchemaLevel(this.compositeSchema);
  }

  /**
   * True if the StateSchema is a composite schema.
   */
  isComposite() {
    return !!this.compositeSchema;
  }

  /**
   * Check if a given stateObject is as valid as can be determined by this StateSchema. Will return null if valid, but
   * needs more checking up and down the hierarchy.
   *
   * @param stateObject - the stateObject to validate against
   * @param toAssert - whether to assert when invalid
   * @param publicSchemaKeys - to be populated with any public keys this StateSchema is responsible for
   * @param privateSchemaKeys - to be populated with any private keys this StateSchema is responsible for
   * @returns boolean if validity can be checked, null if valid, but next in the hierarchy is needed
   */
  checkStateObjectValid(stateObject, toAssert, publicSchemaKeys, privateSchemaKeys) {
    if (this.isComposite()) {
      const compositeStateObject = stateObject;
      const schema = this.compositeSchema;
      let valid = null;
      const checkLevel = (schemaLevel, objectLevel, keyList, exclude) => {
        if (!objectLevel) {
          valid = false;
          assert && toAssert && assert(false, 'There was no stateObject, but there was a state schema saying there should be', schemaLevel);
          return;
        }
        Object.keys(schemaLevel).filter(k => k !== exclude).forEach(key => {
          const validKey = objectLevel.hasOwnProperty(key);
          if (!validKey) {
            valid = false;
          }
          assert && toAssert && assert(validKey, `${key} in state schema but not in the state object`);
          schemaLevel[key].validateStateObject(objectLevel[key]);
          keyList.push(key);
        });
      };
      checkLevel(schema, compositeStateObject, publicSchemaKeys, '_private');
      schema._private && checkLevel(schema._private, compositeStateObject._private, privateSchemaKeys, null);
      return valid;
    } else {
      assert && assert(this.validator, 'validator must be present if not composite');
      const valueStateObject = stateObject;
      if (toAssert) {
        js_validate(valueStateObject, this.validator);
      }
      return Validation.isValueValid(valueStateObject, this.validator);
    }
  }

  /**
   * Get a list of all IOTypes associated with this StateSchema
   */
  getRelatedTypes() {
    const relatedTypes = [];

    // to support IOTypes from public and private state
    const getRelatedStateTypeForLevel = stateSchema => {
      Object.keys(stateSchema).forEach(stateSchemaKey => {
        // Support keywords in state like "private"
        stateSchema[stateSchemaKey] instanceof IOType && relatedTypes.push(stateSchema[stateSchemaKey]);
      });
    };
    if (this.compositeSchema) {
      getRelatedStateTypeForLevel(this.compositeSchema);
      this.compositeSchema._private && getRelatedStateTypeForLevel(this.compositeSchema._private);
    }
    return relatedTypes;
  }

  /**
   * Returns a unique identified for this stateSchema, or an object of the stateSchemas for each sub-component in the composite
   * (phet-io internal)
   */
  getStateSchemaAPI() {
    if (this.isComposite()) {
      const stateSchemaAPI = _.mapValues(this.compositeSchema, value => value.typeName);
      if (this.compositeSchema._private) {
        stateSchemaAPI._private = _.mapValues(this.compositeSchema._private, value => value.typeName);
      }
      return stateSchemaAPI;
    } else {
      return this.displayString;
    }
  }

  /**
   * Factory function for StateKSchema instances that represent a single value of state. This is opposed to a composite
   * schema of sub-components.
   */
  static asValue(displayString, validator) {
    assert && assert(validator, 'validator required');
    return new StateSchema({
      validator: validator,
      displayString: displayString
    });
  }
}
tandemNamespace.register('StateSchema', StateSchema);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsIlZhbGlkYXRpb24iLCJhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMiLCJvcHRpb25pemUiLCJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJTdGF0ZVNjaGVtYSIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwiYXNzZXJ0Iiwib3B0aW9ucyIsImRpc3BsYXlTdHJpbmciLCJ2YWxpZGF0b3IiLCJjb21wb3NpdGVTY2hlbWEiLCJ2YWxpZGF0ZVN0YXRlU2NoZW1hIiwic3RhdGVTY2hlbWEiLCJpc0NvbXBvc2l0ZSIsInN0YXRlU2NoZW1hS2V5IiwiaGFzT3duUHJvcGVydHkiLCJzdGF0ZVNjaGVtYVZhbHVlIiwiZGVmYXVsdEFwcGx5U3RhdGUiLCJjb3JlT2JqZWN0Iiwic3RhdGVPYmplY3QiLCJhcHBseVN0YXRlRm9yTGV2ZWwiLCJzY2hlbWEiLCJzdGF0ZU9iamVjdExldmVsIiwic3RhdGVLZXkiLCJfcHJpdmF0ZSIsInNjaGVtYUlPVHlwZSIsImRlZmF1bHREZXNlcmlhbGl6YXRpb25NZXRob2QiLCJmcm9tU3RhdGVPYmplY3QiLCJhcHBseVN0YXRlIiwiZGVmYXVsdFRvU3RhdGVPYmplY3QiLCJ0b1N0YXRlT2JqZWN0Rm9yU2NoZW1hTGV2ZWwiLCJ0b1N0YXRlT2JqZWN0IiwiY2hlY2tTdGF0ZU9iamVjdFZhbGlkIiwidG9Bc3NlcnQiLCJwdWJsaWNTY2hlbWFLZXlzIiwicHJpdmF0ZVNjaGVtYUtleXMiLCJjb21wb3NpdGVTdGF0ZU9iamVjdCIsInZhbGlkIiwiY2hlY2tMZXZlbCIsInNjaGVtYUxldmVsIiwib2JqZWN0TGV2ZWwiLCJrZXlMaXN0IiwiZXhjbHVkZSIsIk9iamVjdCIsImtleXMiLCJmaWx0ZXIiLCJrIiwiZm9yRWFjaCIsImtleSIsInZhbGlkS2V5IiwidmFsaWRhdGVTdGF0ZU9iamVjdCIsInB1c2giLCJ2YWx1ZVN0YXRlT2JqZWN0IiwiaXNWYWx1ZVZhbGlkIiwiZ2V0UmVsYXRlZFR5cGVzIiwicmVsYXRlZFR5cGVzIiwiZ2V0UmVsYXRlZFN0YXRlVHlwZUZvckxldmVsIiwiZ2V0U3RhdGVTY2hlbWFBUEkiLCJzdGF0ZVNjaGVtYUFQSSIsIl8iLCJtYXBWYWx1ZXMiLCJ2YWx1ZSIsInR5cGVOYW1lIiwiYXNWYWx1ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU3RhdGVTY2hlbWEudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ2xhc3MgcmVzcG9uc2libGUgZm9yIHN0b3JpbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHNjaGVtYSBvZiBQaEVULWlPIHN0YXRlLiBTZWUgSU9UeXBlIHN0YXRlU2NoZW1hIG9wdGlvbiBmb3IgdXNhZ2VcbiAqIGFuZCBtb3JlIGluZm9ybWF0aW9uLlxuICpcbiAqIFRoZXJlIGFyZSB0d28gdHlwZXMgb2YgU3RhdGVTY2hlbWEsIHRoZSBmaXJzdCBzZXJ2ZXMgYXMgYSBcInZhbHVlXCIsIHdoZW4gdGhlIHN0YXRlIG9mIGFuIElPVHlwZSBpcyBqdXN0IGEgdmFsdWUuXG4gKiBUaGUgc2Vjb25kIGlzIGEgXCJjb21wb3NpdGVcIiwgd2hlcmUgdGhlIHN0YXRlIG9mIGFuIElPVHlwZSBpcyBtYWRlIGZyb20gc3ViLWNvbXBvbmVudHMsIGVhY2ggb2Ygd2hpY2ggaGF2ZSBhbiBJT1R5cGUuXG4gKiBDaGVjayB3aGljaCB0eXBlIG9mIFN0YXRlU2NoZW1hIHlvdXIgaW5zdGFuY2UgaXMgd2l0aCBTdGF0ZVNjaGVtYS5pc0NvbXBvc2l0ZSgpLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4uLy4uLy4uL2F4b24vanMvdmFsaWRhdGUuanMnO1xuaW1wb3J0IFZhbGlkYXRpb24sIHsgVmFsaWRhdG9yIH0gZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy9WYWxpZGF0aW9uLmpzJztcbmltcG9ydCBhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL2Fzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucy5qcyc7XG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xuaW1wb3J0IHRhbmRlbU5hbWVzcGFjZSBmcm9tICcuLi90YW5kZW1OYW1lc3BhY2UuanMnO1xuaW1wb3J0IElPVHlwZSBmcm9tICcuL0lPVHlwZS5qcyc7XG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcblxuZXhwb3J0IHR5cGUgQ29tcG9zaXRlU2NoZW1hID0gUmVjb3JkPHN0cmluZywgSU9UeXBlPiAmIHtcbiAgX3ByaXZhdGU/OiBDb21wb3NpdGVTY2hlbWE7XG59O1xuXG50eXBlIENvbXBvc2l0ZVNjaGVtYUFQSSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gJiB7XG4gIF9wcml2YXRlPzogUmVjb3JkPHN0cmluZywgc3RyaW5nPjtcbn07XG5cbmV4cG9ydCB0eXBlIENvbXBvc2l0ZVN0YXRlT2JqZWN0VHlwZSA9IFJlY29yZDxzdHJpbmcsIEludGVudGlvbmFsQW55PiAmIHtcbiAgX3ByaXZhdGU/OiBSZWNvcmQ8c3RyaW5nLCBJbnRlbnRpb25hbEFueT47XG59O1xuXG50eXBlIFN0YXRlU2NoZW1hT3B0aW9ucyA9IHtcbiAgZGlzcGxheVN0cmluZz86IHN0cmluZztcbiAgdmFsaWRhdG9yPzogVmFsaWRhdG9yPEludGVudGlvbmFsQW55PiB8IG51bGw7XG4gIGNvbXBvc2l0ZVNjaGVtYT86IG51bGwgfCBDb21wb3NpdGVTY2hlbWE7XG59O1xuXG50eXBlIEdlbmVyYWxTdGF0ZU9iamVjdCA9IFJlY29yZDxzdHJpbmcsIEludGVudGlvbmFsQW55PjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU3RhdGVTY2hlbWE8VCwgU3RhdGVUeXBlPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcGxheVN0cmluZzogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5IHZhbGlkYXRvcjogVmFsaWRhdG9yPFN0YXRlVHlwZT4gfCBudWxsO1xuXG4gIC8vIFwiY29tcG9zaXRlXCIgc3RhdGUgc2NoZW1hcyBhcmUgdHJlYXRlZCBkaWZmZXJlbnRseSB0aGF0IHZhbHVlIHN0YXRlIHNjaGVtYXNcbiAgcHVibGljIHJlYWRvbmx5IGNvbXBvc2l0ZVNjaGVtYTogbnVsbCB8IENvbXBvc2l0ZVNjaGVtYTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByb3ZpZGVkT3B0aW9ucz86IFN0YXRlU2NoZW1hT3B0aW9ucyApIHtcblxuICAgIC8vIEVpdGhlciBjcmVhdGUgd2l0aCBjb21wb3NpdGVTY2hlbWEsIG9yIHNwZWNpZnkgYSB0aGF0IHRoaXMgc3RhdGUgaXMganVzdCBhIHZhbHVlXG4gICAgYXNzZXJ0ICYmIGFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyggcHJvdmlkZWRPcHRpb25zLCBbICdjb21wb3NpdGVTY2hlbWEnIF0sIFsgJ2Rpc3BsYXlTdHJpbmcnLCAndmFsaWRhdG9yJyBdICk7XG5cbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFN0YXRlU2NoZW1hT3B0aW9ucz4oKSgge1xuICAgICAgZGlzcGxheVN0cmluZzogJycsXG4gICAgICB2YWxpZGF0b3I6IG51bGwsXG5cbiAgICAgIC8vIGFuIG9iamVjdCBsaXRlcmFsIG9mIGtleXMgdGhhdCBjb3JyZXNwb25kIHRvIGFuIElPVHlwZVxuICAgICAgY29tcG9zaXRlU2NoZW1hOiBudWxsXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICB0aGlzLmRpc3BsYXlTdHJpbmcgPSBvcHRpb25zLmRpc3BsYXlTdHJpbmc7XG4gICAgdGhpcy52YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcblxuICAgIHRoaXMuY29tcG9zaXRlU2NoZW1hID0gb3B0aW9ucy5jb21wb3NpdGVTY2hlbWE7XG5cbiAgICBhc3NlcnQgJiYgdGhpcy52YWxpZGF0ZVN0YXRlU2NoZW1hKCB0aGlzLmNvbXBvc2l0ZVNjaGVtYSApO1xuICB9XG5cblxuICAvKipcbiAgICogTWFrZSBzdXJlIHRoYXQgYSBjb21wb3NpdGUgc3RhdGUgc2NoZW1hIGlzIG9mIHRoZSBjb3JyZWN0IGZvcm0uIEVhY2ggdmFsdWUgaW4gdGhlIG9iamVjdCBzaG91bGQgYmUgYW4gSU9UeXBlXG4gICAqIE9ubHkgdXNlZnVsIGlmIGFzc2VydCBpcyBjYWxsZWQuXG4gICAqL1xuICBwcml2YXRlIHZhbGlkYXRlU3RhdGVTY2hlbWEoIHN0YXRlU2NoZW1hOiBDb21wb3NpdGVTY2hlbWEgfCBudWxsICk6IHZvaWQge1xuICAgIGlmICggYXNzZXJ0ICYmIHRoaXMuaXNDb21wb3NpdGUoKSApIHtcblxuICAgICAgZm9yICggY29uc3Qgc3RhdGVTY2hlbWFLZXkgaW4gc3RhdGVTY2hlbWEgKSB7XG4gICAgICAgIGlmICggc3RhdGVTY2hlbWEuaGFzT3duUHJvcGVydHkoIHN0YXRlU2NoZW1hS2V5ICkgKSB7XG5cblxuICAgICAgICAgIGlmICggc3RhdGVTY2hlbWFLZXkgPT09ICdfcHJpdmF0ZScgKSB7XG5cbiAgICAgICAgICAgIC8vIEJ5IHB1dHRpbmcgdGhlIGFzc2lnbm1lbnQgaW4gdGhpcyBzdGF0ZW1lbnQsIHR5cGVzY3JpcHQga25vd3MgdGhlIHZhbHVlIGFzIGEgQ29tcG9zaXRlU2NoZW1hXG4gICAgICAgICAgICBjb25zdCBzdGF0ZVNjaGVtYVZhbHVlID0gc3RhdGVTY2hlbWFbIHN0YXRlU2NoZW1hS2V5IF07XG4gICAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBzdGF0ZVNjaGVtYVZhbHVlLCAnc2hvdWxkIG5vdCBiZSB1bmRlZmluZWQnICk7XG4gICAgICAgICAgICB0aGlzLnZhbGlkYXRlU3RhdGVTY2hlbWEoIHN0YXRlU2NoZW1hVmFsdWUhICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRlZmF1bHRBcHBseVN0YXRlKCBjb3JlT2JqZWN0OiBULCBzdGF0ZU9iamVjdDogQ29tcG9zaXRlU3RhdGVPYmplY3RUeXBlICk6IHZvaWQge1xuXG4gICAgY29uc3QgYXBwbHlTdGF0ZUZvckxldmVsID0gKCBzY2hlbWE6IENvbXBvc2l0ZVNjaGVtYSwgc3RhdGVPYmplY3RMZXZlbDogR2VuZXJhbFN0YXRlT2JqZWN0ICkgPT4ge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5pc0NvbXBvc2l0ZSgpLCAnZGVmYXVsdEFwcGx5U3RhdGUgZnJvbSBzdGF0ZVNjaGVtYSBvbmx5IGFwcGxpZXMgdG8gY29tcG9zaXRlIHN0YXRlU2NoZW1hcycgKTtcbiAgICAgIGZvciAoIGNvbnN0IHN0YXRlS2V5IGluIHNjaGVtYSApIHtcbiAgICAgICAgaWYgKCBzY2hlbWEuaGFzT3duUHJvcGVydHkoIHN0YXRlS2V5ICkgKSB7XG4gICAgICAgICAgaWYgKCBzdGF0ZUtleSA9PT0gJ19wcml2YXRlJyApIHtcbiAgICAgICAgICAgIGFwcGx5U3RhdGVGb3JMZXZlbCggc2NoZW1hLl9wcml2YXRlISwgc3RhdGVPYmplY3RMZXZlbC5fcHJpdmF0ZSApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcblxuICAgICAgICAgICAgLy8gVGhlIElPVHlwZSBmb3IgdGhlIGtleSBpbiB0aGUgY29tcG9zaXRlLlxuICAgICAgICAgICAgY29uc3Qgc2NoZW1hSU9UeXBlID0gc2NoZW1hWyBzdGF0ZUtleSBdO1xuICAgICAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggc3RhdGVPYmplY3RMZXZlbC5oYXNPd25Qcm9wZXJ0eSggc3RhdGVLZXkgKSwgYHN0YXRlT2JqZWN0IGRvZXMgbm90IGhhdmUgZXhwZWN0ZWQgc2NoZW1hIGtleTogJHtzdGF0ZUtleX1gICk7XG5cbiAgICAgICAgICAgIC8vIFVzaW5nIGZyb21TdGF0ZU9iamVjdCB0byBkZXNlcmlhbGl6ZSBzdWItY29tcG9uZW50XG4gICAgICAgICAgICBpZiAoIHNjaGVtYUlPVHlwZS5kZWZhdWx0RGVzZXJpYWxpemF0aW9uTWV0aG9kID09PSAnZnJvbVN0YXRlT2JqZWN0JyApIHtcblxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yLCBJIGRvbid0IGtub3cgaG93IHRvIHRlbGwgdHlwZXNjcmlwdCB0aGF0IHdlIGFyZSBhY2Nlc3NpbmcgYW4gZXhwZWN0ZWQga2V5IG9uIHRoZSBQaGV0aW9PYmplY3Qgc3VidHlwZS4gTGlrZWx5IHRoZXJlIGlzIG5vIHdheSB3aXRoIG1ha2luZyB0aGluZ3MgZ2VuZXJpYy5cbiAgICAgICAgICAgICAgY29yZU9iamVjdFsgc3RhdGVLZXkgXSA9IHNjaGVtYVsgc3RhdGVLZXkgXS5mcm9tU3RhdGVPYmplY3QoIHN0YXRlT2JqZWN0TGV2ZWxbIHN0YXRlS2V5IF0gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBzY2hlbWFJT1R5cGUuZGVmYXVsdERlc2VyaWFsaXphdGlvbk1ldGhvZCA9PT0gJ2FwcGx5U3RhdGUnLCAndW5leHBlY3RlZCBkZXNlcmlhbGl6YXRpb24gbWV0aG9kJyApO1xuXG4gICAgICAgICAgICAgIC8vIFVzaW5nIGFwcGx5U3RhdGUgdG8gZGVzZXJpYWxpemUgc3ViLWNvbXBvbmVudFxuICAgICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yLCBJIGRvbid0IGtub3cgaG93IHRvIHRlbGwgdHlwZXNjcmlwdCB0aGF0IHdlIGFyZSBhY2Nlc3NpbmcgYW4gZXhwZWN0ZWQga2V5IG9uIHRoZSBQaGV0aW9PYmplY3Qgc3VidHlwZS4gTGlrZWx5IHRoZXJlIGlzIG5vIHdheSB3aXRoIG1ha2luZyB0aGluZ3MgZ2VuZXJpYy5cbiAgICAgICAgICAgICAgc2NoZW1hWyBzdGF0ZUtleSBdLmFwcGx5U3RhdGUoIGNvcmVPYmplY3RbIHN0YXRlS2V5IF0sIHN0YXRlT2JqZWN0TGV2ZWxbIHN0YXRlS2V5IF0gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuICAgIGFwcGx5U3RhdGVGb3JMZXZlbCggdGhpcy5jb21wb3NpdGVTY2hlbWEhLCBzdGF0ZU9iamVjdCApO1xuICB9XG5cbiAgcHVibGljIGRlZmF1bHRUb1N0YXRlT2JqZWN0KCBjb3JlT2JqZWN0OiBUICk6IFN0YXRlVHlwZSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5pc0NvbXBvc2l0ZSgpLCAnZGVmYXVsdFRvU3RhdGVPYmplY3QgZnJvbSBzdGF0ZVNjaGVtYSBvbmx5IGFwcGxpZXMgdG8gY29tcG9zaXRlIHN0YXRlU2NoZW1hcycgKTtcblxuICAgIGNvbnN0IHRvU3RhdGVPYmplY3RGb3JTY2hlbWFMZXZlbCA9ICggc2NoZW1hOiBDb21wb3NpdGVTY2hlbWEgKSA9PiB7XG5cbiAgICAgIGNvbnN0IHN0YXRlT2JqZWN0ID0ge30gYXMgU3RhdGVUeXBlO1xuICAgICAgZm9yICggY29uc3Qgc3RhdGVLZXkgaW4gc2NoZW1hICkge1xuICAgICAgICBpZiAoIHNjaGVtYS5oYXNPd25Qcm9wZXJ0eSggc3RhdGVLZXkgKSApIHtcbiAgICAgICAgICBpZiAoIHN0YXRlS2V5ID09PSAnX3ByaXZhdGUnICkge1xuXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFN0aWxsIHdvcmtpbmcgb24gX3ByaXZhdGUgaW4gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvMjgyXG4gICAgICAgICAgICBzdGF0ZU9iamVjdC5fcHJpdmF0ZSA9IHRvU3RhdGVPYmplY3RGb3JTY2hlbWFMZXZlbCggc2NoZW1hLl9wcml2YXRlICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIEkgZ3Vlc3Mgd2UgbmVlZCB0byBzdXBwb3J0IHNjaGVtYXMgb3V0c2lkZSBvZiBjb21wb3NpdGUgaGVyZSwgb3IgdGVsbCBob3cgdG8gYXZvaWQgdGhhdCwgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvMjYxXG4gICAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjb3JlT2JqZWN0Lmhhc093blByb3BlcnR5KCBzdGF0ZUtleSApLFxuICAgICAgICAgICAgICBgY2Fubm90IGdldCBzdGF0ZSBiZWNhdXNlIGNvcmVPYmplY3QgZG9lcyBub3QgaGF2ZSBleHBlY3RlZCBzY2hlbWEga2V5OiAke3N0YXRlS2V5fWAgKTtcblxuICAgICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdGFuZGVtL2lzc3Vlcy8yNjFcbiAgICAgICAgICAgIHN0YXRlT2JqZWN0WyBzdGF0ZUtleSBdID0gc2NoZW1hWyBzdGF0ZUtleSBdLnRvU3RhdGVPYmplY3QoIGNvcmVPYmplY3RbIHN0YXRlS2V5IF0gKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBzdGF0ZU9iamVjdDtcbiAgICB9O1xuICAgIHJldHVybiB0b1N0YXRlT2JqZWN0Rm9yU2NoZW1hTGV2ZWwoIHRoaXMuY29tcG9zaXRlU2NoZW1hISApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRydWUgaWYgdGhlIFN0YXRlU2NoZW1hIGlzIGEgY29tcG9zaXRlIHNjaGVtYS5cbiAgICovXG4gIHB1YmxpYyBpc0NvbXBvc2l0ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gISF0aGlzLmNvbXBvc2l0ZVNjaGVtYTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgZ2l2ZW4gc3RhdGVPYmplY3QgaXMgYXMgdmFsaWQgYXMgY2FuIGJlIGRldGVybWluZWQgYnkgdGhpcyBTdGF0ZVNjaGVtYS4gV2lsbCByZXR1cm4gbnVsbCBpZiB2YWxpZCwgYnV0XG4gICAqIG5lZWRzIG1vcmUgY2hlY2tpbmcgdXAgYW5kIGRvd24gdGhlIGhpZXJhcmNoeS5cbiAgICpcbiAgICogQHBhcmFtIHN0YXRlT2JqZWN0IC0gdGhlIHN0YXRlT2JqZWN0IHRvIHZhbGlkYXRlIGFnYWluc3RcbiAgICogQHBhcmFtIHRvQXNzZXJ0IC0gd2hldGhlciB0byBhc3NlcnQgd2hlbiBpbnZhbGlkXG4gICAqIEBwYXJhbSBwdWJsaWNTY2hlbWFLZXlzIC0gdG8gYmUgcG9wdWxhdGVkIHdpdGggYW55IHB1YmxpYyBrZXlzIHRoaXMgU3RhdGVTY2hlbWEgaXMgcmVzcG9uc2libGUgZm9yXG4gICAqIEBwYXJhbSBwcml2YXRlU2NoZW1hS2V5cyAtIHRvIGJlIHBvcHVsYXRlZCB3aXRoIGFueSBwcml2YXRlIGtleXMgdGhpcyBTdGF0ZVNjaGVtYSBpcyByZXNwb25zaWJsZSBmb3JcbiAgICogQHJldHVybnMgYm9vbGVhbiBpZiB2YWxpZGl0eSBjYW4gYmUgY2hlY2tlZCwgbnVsbCBpZiB2YWxpZCwgYnV0IG5leHQgaW4gdGhlIGhpZXJhcmNoeSBpcyBuZWVkZWRcbiAgICovXG4gIHB1YmxpYyBjaGVja1N0YXRlT2JqZWN0VmFsaWQoIHN0YXRlT2JqZWN0OiBTdGF0ZVR5cGUsIHRvQXNzZXJ0OiBib29sZWFuLCBwdWJsaWNTY2hlbWFLZXlzOiBzdHJpbmdbXSwgcHJpdmF0ZVNjaGVtYUtleXM6IHN0cmluZ1tdICk6IGJvb2xlYW4gfCBudWxsIHtcbiAgICBpZiAoIHRoaXMuaXNDb21wb3NpdGUoKSApIHtcbiAgICAgIGNvbnN0IGNvbXBvc2l0ZVN0YXRlT2JqZWN0ID0gc3RhdGVPYmplY3QgYXMgQ29tcG9zaXRlU3RhdGVPYmplY3RUeXBlO1xuICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy5jb21wb3NpdGVTY2hlbWEhO1xuXG4gICAgICBsZXQgdmFsaWQgPSBudWxsO1xuICAgICAgY29uc3QgY2hlY2tMZXZlbCA9ICggc2NoZW1hTGV2ZWw6IENvbXBvc2l0ZVNjaGVtYSwgb2JqZWN0TGV2ZWw6IEdlbmVyYWxTdGF0ZU9iamVjdCwga2V5TGlzdDogc3RyaW5nW10sIGV4Y2x1ZGU6IHN0cmluZyB8IG51bGwgKSA9PiB7XG4gICAgICAgIGlmICggIW9iamVjdExldmVsICkge1xuICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgYXNzZXJ0ICYmIHRvQXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICdUaGVyZSB3YXMgbm8gc3RhdGVPYmplY3QsIGJ1dCB0aGVyZSB3YXMgYSBzdGF0ZSBzY2hlbWEgc2F5aW5nIHRoZXJlIHNob3VsZCBiZScsIHNjaGVtYUxldmVsICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5rZXlzKCBzY2hlbWFMZXZlbCApLmZpbHRlciggKCBrOiBzdHJpbmcgKSA9PiBrICE9PSBleGNsdWRlICkuZm9yRWFjaCgga2V5ID0+IHtcbiAgICAgICAgICBjb25zdCB2YWxpZEtleSA9IG9iamVjdExldmVsLmhhc093blByb3BlcnR5KCBrZXkgKTtcbiAgICAgICAgICBpZiAoICF2YWxpZEtleSApIHtcbiAgICAgICAgICAgIHZhbGlkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFzc2VydCAmJiB0b0Fzc2VydCAmJiBhc3NlcnQoIHZhbGlkS2V5LCBgJHtrZXl9IGluIHN0YXRlIHNjaGVtYSBidXQgbm90IGluIHRoZSBzdGF0ZSBvYmplY3RgICk7XG4gICAgICAgICAgc2NoZW1hTGV2ZWxbIGtleSBdLnZhbGlkYXRlU3RhdGVPYmplY3QoIG9iamVjdExldmVsWyBrZXkgXSApO1xuICAgICAgICAgIGtleUxpc3QucHVzaCgga2V5ICk7XG4gICAgICAgIH0gKTtcbiAgICAgIH07XG5cbiAgICAgIGNoZWNrTGV2ZWwoIHNjaGVtYSwgY29tcG9zaXRlU3RhdGVPYmplY3QsIHB1YmxpY1NjaGVtYUtleXMsICdfcHJpdmF0ZScgKTtcbiAgICAgIHNjaGVtYS5fcHJpdmF0ZSAmJiBjaGVja0xldmVsKCBzY2hlbWEuX3ByaXZhdGUsIGNvbXBvc2l0ZVN0YXRlT2JqZWN0Ll9wcml2YXRlISwgcHJpdmF0ZVNjaGVtYUtleXMsIG51bGwgKTtcbiAgICAgIHJldHVybiB2YWxpZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLnZhbGlkYXRvciwgJ3ZhbGlkYXRvciBtdXN0IGJlIHByZXNlbnQgaWYgbm90IGNvbXBvc2l0ZScgKTtcbiAgICAgIGNvbnN0IHZhbHVlU3RhdGVPYmplY3QgPSBzdGF0ZU9iamVjdDtcbiAgICAgIGlmICggdG9Bc3NlcnQgKSB7XG4gICAgICAgIHZhbGlkYXRlKCB2YWx1ZVN0YXRlT2JqZWN0LCB0aGlzLnZhbGlkYXRvciEgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIFZhbGlkYXRpb24uaXNWYWx1ZVZhbGlkKCB2YWx1ZVN0YXRlT2JqZWN0LCB0aGlzLnZhbGlkYXRvciEgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0IGEgbGlzdCBvZiBhbGwgSU9UeXBlcyBhc3NvY2lhdGVkIHdpdGggdGhpcyBTdGF0ZVNjaGVtYVxuICAgKi9cbiAgcHVibGljIGdldFJlbGF0ZWRUeXBlcygpOiBJT1R5cGVbXSB7XG4gICAgY29uc3QgcmVsYXRlZFR5cGVzOiBJT1R5cGVbXSA9IFtdO1xuXG4gICAgLy8gdG8gc3VwcG9ydCBJT1R5cGVzIGZyb20gcHVibGljIGFuZCBwcml2YXRlIHN0YXRlXG4gICAgY29uc3QgZ2V0UmVsYXRlZFN0YXRlVHlwZUZvckxldmVsID0gKCBzdGF0ZVNjaGVtYTogQ29tcG9zaXRlU2NoZW1hICkgPT4ge1xuICAgICAgT2JqZWN0LmtleXMoIHN0YXRlU2NoZW1hICkuZm9yRWFjaCggc3RhdGVTY2hlbWFLZXkgPT4ge1xuXG4gICAgICAgIC8vIFN1cHBvcnQga2V5d29yZHMgaW4gc3RhdGUgbGlrZSBcInByaXZhdGVcIlxuICAgICAgICBzdGF0ZVNjaGVtYVsgc3RhdGVTY2hlbWFLZXkgXSBpbnN0YW5jZW9mIElPVHlwZSAmJiByZWxhdGVkVHlwZXMucHVzaCggc3RhdGVTY2hlbWFbIHN0YXRlU2NoZW1hS2V5IF0gKTtcbiAgICAgIH0gKTtcbiAgICB9O1xuXG4gICAgaWYgKCB0aGlzLmNvbXBvc2l0ZVNjaGVtYSApIHtcbiAgICAgIGdldFJlbGF0ZWRTdGF0ZVR5cGVGb3JMZXZlbCggdGhpcy5jb21wb3NpdGVTY2hlbWEgKTtcbiAgICAgIHRoaXMuY29tcG9zaXRlU2NoZW1hLl9wcml2YXRlICYmIGdldFJlbGF0ZWRTdGF0ZVR5cGVGb3JMZXZlbCggdGhpcy5jb21wb3NpdGVTY2hlbWEuX3ByaXZhdGUgKTtcbiAgICB9XG4gICAgcmV0dXJuIHJlbGF0ZWRUeXBlcztcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB1bmlxdWUgaWRlbnRpZmllZCBmb3IgdGhpcyBzdGF0ZVNjaGVtYSwgb3IgYW4gb2JqZWN0IG9mIHRoZSBzdGF0ZVNjaGVtYXMgZm9yIGVhY2ggc3ViLWNvbXBvbmVudCBpbiB0aGUgY29tcG9zaXRlXG4gICAqIChwaGV0LWlvIGludGVybmFsKVxuICAgKi9cbiAgcHVibGljIGdldFN0YXRlU2NoZW1hQVBJKCk6IHN0cmluZyB8IENvbXBvc2l0ZVNjaGVtYUFQSSB7XG4gICAgaWYgKCB0aGlzLmlzQ29tcG9zaXRlKCkgKSB7XG4gICAgICBjb25zdCBzdGF0ZVNjaGVtYUFQSSA9IF8ubWFwVmFsdWVzKCB0aGlzLmNvbXBvc2l0ZVNjaGVtYSwgdmFsdWUgPT4gdmFsdWUudHlwZU5hbWUgKSBhcyBDb21wb3NpdGVTY2hlbWFBUEk7XG4gICAgICBpZiAoIHRoaXMuY29tcG9zaXRlU2NoZW1hIS5fcHJpdmF0ZSApIHtcbiAgICAgICAgc3RhdGVTY2hlbWFBUEkuX3ByaXZhdGUgPSBfLm1hcFZhbHVlcyggdGhpcy5jb21wb3NpdGVTY2hlbWEhLl9wcml2YXRlLCB2YWx1ZSA9PiB2YWx1ZS50eXBlTmFtZSApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHN0YXRlU2NoZW1hQVBJO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRpc3BsYXlTdHJpbmc7XG4gICAgfVxuICB9XG5cblxuICAvKipcbiAgICogRmFjdG9yeSBmdW5jdGlvbiBmb3IgU3RhdGVLU2NoZW1hIGluc3RhbmNlcyB0aGF0IHJlcHJlc2VudCBhIHNpbmdsZSB2YWx1ZSBvZiBzdGF0ZS4gVGhpcyBpcyBvcHBvc2VkIHRvIGEgY29tcG9zaXRlXG4gICAqIHNjaGVtYSBvZiBzdWItY29tcG9uZW50cy5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYXNWYWx1ZTxULCBTdGF0ZVR5cGU+KCBkaXNwbGF5U3RyaW5nOiBzdHJpbmcsIHZhbGlkYXRvcjogVmFsaWRhdG9yPEludGVudGlvbmFsQW55PiApOiBTdGF0ZVNjaGVtYTxULCBTdGF0ZVR5cGU+IHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2YWxpZGF0b3IsICd2YWxpZGF0b3IgcmVxdWlyZWQnICk7XG4gICAgcmV0dXJuIG5ldyBTdGF0ZVNjaGVtYTxULCBTdGF0ZVR5cGU+KCB7XG4gICAgICB2YWxpZGF0b3I6IHZhbGlkYXRvcixcbiAgICAgIGRpc3BsYXlTdHJpbmc6IGRpc3BsYXlTdHJpbmdcbiAgICB9ICk7XG4gIH1cbn1cblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnU3RhdGVTY2hlbWEnLCBTdGF0ZVNjaGVtYSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sOEJBQThCO0FBQ25ELE9BQU9DLFVBQVUsTUFBcUIsZ0NBQWdDO0FBQ3RFLE9BQU9DLDhCQUE4QixNQUFNLHlEQUF5RDtBQUNwRyxPQUFPQyxTQUFTLE1BQU0sb0NBQW9DO0FBQzFELE9BQU9DLGVBQWUsTUFBTSx1QkFBdUI7QUFDbkQsT0FBT0MsTUFBTSxNQUFNLGFBQWE7QUF1QmhDLGVBQWUsTUFBTUMs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
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/IOType.js
// Copyright 2020-2023, University of Colorado Boulder

/**
 * IO Types form a synthetic type system used to describe PhET-iO Elements. A PhET-iO Element is an instrumented PhetioObject
 * that is interoperable from the "wrapper" frame (outside the sim frame). An IO Type includes documentation, methods,
 * names, serialization, etc.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */








// constants
const VALIDATE_OPTIONS_FALSE = {
  validateValidator: false
};

/**
 * Estimate the core type name from a given IO Type name.
 */
const getCoreTypeName = ioTypeName => {
  const index = ioTypeName.indexOf(js_PhetioConstants.IO_TYPE_SUFFIX);
  assert && assert(index >= 0, 'IO should be in the type name');
  return ioTypeName.substring(0, index);
};
// TODO: not any, but do we have to serialize type parameters? https://github.com/phetsims/tandem/issues/263
class IOType {
  // eslint-disable-line @typescript-eslint/no-explicit-any

  // TODO: instead of unknown this is the second parameter type for PhetioDynamicElementContainer. How? https://github.com/phetsims/tandem/issues/261

  /**
   * @param typeName - The name that this IOType will have in the public PhET-iO API. In general, this should
   *    only be word characters, ending in "IO". Parametric types are a special subset of IOTypes that include their
   *    parameters in their typeName. If an IOType's parameters are other IO Type(s), then they should be included within
   *    angle brackets, like "PropertyIO<BooleanIO>". Some other types use a more custom format for displaying their
   *    parameter types, in this case the parameter section of the type name (immediately following "IO") should begin
   *    with an open paren, "(". Thus the schema for a typeName could be defined (using regex) as `[A-Z]\w*IO([(<].*){0,1}`.
   *    Parameterized types should also include a `parameterTypes` field on the IOType.
   * @param providedOptions
   */
  constructor(typeName, providedOptions) {
    this.typeName = typeName;
    // For reference in the options
    const supertype = providedOptions.supertype || IOType.ObjectIO;
    const toStateObjectSupplied = !!providedOptions.toStateObject;
    const applyStateSupplied = !!providedOptions.applyState;
    const stateSchemaSupplied = !!providedOptions.stateSchema;
    const options = optionize()({
      supertype: IOType.ObjectIO,
      methods: {},
      events: [],
      metadataDefaults: {},
      //  Most likely this will remain PhET-iO internal, and shouldn't need to be used when creating IOTypes outside of tandem/.
      dataDefaults: {},
      methodOrder: [],
      parameterTypes: [],
      documentation: `IO Type for ${getCoreTypeName(typeName)}`,
      isFunctionType: false,
      /**** STATE ****/

      toStateObject: supertype && supertype.toStateObject,
      fromStateObject: supertype && supertype.fromStateObject,
      stateObjectToCreateElementArguments: supertype && supertype.stateObjectToCreateElementArguments,
      applyState: supertype && supertype.applyState,
      stateSchema: null,
      defaultDeserializationMethod: 'fromStateObject',
      addChildElement: supertype && supertype.addChildElement
    }, providedOptions);
    if (assert && supertype) {
      Object.keys(options.metadataDefaults).forEach(metadataDefaultKey => {
        assert && supertype.getAllMetadataDefaults().hasOwnProperty(metadataDefaultKey) && assert(supertype.getAllMetadataDefaults()[metadataDefaultKey] !== options.metadataDefaults[metadataDefaultKey], `${metadataDefaultKey} should not have the same default value as the ancestor metadata default.`);
      });
    }
    this.supertype = supertype;
    this.documentation = options.documentation;
    this.methods = options.methods;
    this.events = options.events;
    this.metadataDefaults = options.metadataDefaults; // just for this level, see getAllMetadataDefaults()
    this.dataDefaults = options.dataDefaults; // just for this level, see getAllDataDefaults()
    this.methodOrder = options.methodOrder;
    this.parameterTypes = options.parameterTypes;

    // Validation
    this.validator = _.pick(options, Validation.VALIDATOR_KEYS);
    this.validator.validationMessage = this.validator.validationMessage || `Validation failed IOType Validator: ${this.typeName}`;
    this.defaultDeserializationMethod = options.defaultDeserializationMethod;
    if (options.stateSchema === null || options.stateSchema instanceof StateSchema) {
      // @ts-expect-error https://github.com/phetsims/tandem/issues/263
      this.stateSchema = options.stateSchema;
    } else {
      const compositeSchema = typeof options.stateSchema === 'function' ? options.stateSchema(this) : options.stateSchema;
      this.stateSchema = new StateSchema({
        compositeSchema: compositeSchema
      });
    }

    // Assert that toStateObject method is provided for value StateSchemas. Do this with the following logic:
    // 1. It is acceptable to not provide a stateSchema (for IOTypes that aren't stateful)
    // 2. You must either provide a toStateObject, or have a composite StateSchema. Composite state schemas support default serialization methods.
    assert && assert(!this.stateSchema || toStateObjectSupplied || this.stateSchema.isComposite(), 'toStateObject method must be provided for value StateSchemas');
    this.toStateObject = coreObject => {
      js_validate(coreObject, this.validator, VALIDATE_OPTIONS_FALSE);
      let toStateObject;

      // Only do this non-standard toStateObject function if there is a stateSchema but no toStateObject provided
      if (!toStateObjectSupplied && stateSchemaSupplied && this.stateSchema && this.stateSchema.isComposite()) {
        toStateObject = this.stateSchema.defaultToStateObject(coreObject);
      } else {
        toStateObject = options.toStateObject(coreObject);
      }

      // Validate, but only if this IOType instance has more to validate than the supertype
      if (toStateObjectSupplied || stateSchemaSupplied) {
        // Only validate the stateObject if it is phetioState:true.
        // This is an n*m algorithm because for each time toStateObject is called and needs validation, this.validateStateObject
        // looks all the way up the IOType hierarchy. This is not efficient, but gains us the ability to make sure that
        // the stateObject doesn't have any superfluous, unexpected keys. The "m" portion is based on how many sub-properties
        // in a state call `toStateObject`, and the "n" portion is based on how many IOTypes in the hierarchy define a
        // toStateObject or stateSchema. In the future we could potentially improve performance by having validateStateObject
        // only check against the schema at this level, but then extra keys in the stateObject would not be caught. From work done in https://github.com/phetsims/phet-io/issues/1774
        assert && this.validateStateObject(toStateObject);
      }
      return toStateObject;
    };
    this.fromStateObject = options.fromStateObject;
    this.stateObjectToCreateElementArguments = options.stateObjectToCreateElementArguments;
    this.applyState = (coreObject, stateObject) => {
      js_validate(coreObject, this.validator, VALIDATE_OPTIONS_FALSE);

      // Validate, but only if this IOType instance has more to validate than the supertype
      if (applyStateSupplied || stateSchemaSupplied) {
        // Validate that the provided stateObject is of the expected schema
        // NOTE: Cannot use this.validateStateObject because options adopts supertype.applyState, which is bounds to the
        // parent IO Type. This prevents correct validation because the supertype doesn't know about the subtype schemas.
        // @ts-expect-error we cannot type check against PhetioObject from this file
        assert && coreObject.phetioType.validateStateObject(stateObject);
      }

      // Only do this non-standard applyState function from stateSchema if there is a stateSchema but no applyState provided
      if (!applyStateSupplied && stateSchemaSupplied && this.stateSchema && this.stateSchema.isComposite()) {
        this.stateSchema.defaultApplyState(coreObject, stateObject);
      } else {
        options.applyState(coreObject, stateObject);
      }
    };
    this.isFunctionType = options.isFunctionType;
    this.addChildElement = options.addChildElement;
    if (assert) {
      assert && assert(supertype || this.typeName === 'ObjectIO', 'supertype is required');
      assert && assert(!this.typeName.includes('.'), 'Dots should not appear in type names');
      assert && assert(this.typeName.split(/[<(]/)[0].endsWith(js_PhetioConstants.IO_TYPE_SUFFIX), `IO Type name must end with ${js_PhetioConstants.IO_TYPE_SUFFIX}`);
      assert && assert(this.hasOwnProperty('typeName'), 'this.typeName is required');

      // assert that each public method adheres to the expected schema
      this.methods && Object.values(this.methods).forEach(methodObject => {
        if (typeof methodObject === 'object') {
          assert && methodObject.invocableForReadOnlyElements && assert(typeof methodObject.invocableForReadOnlyElements === 'boolean', `invocableForReadOnlyElements must be of type boolean: ${methodObject.invocableForReadOnlyElements}`);
        }
      });
      assert && assert(this.documentation.length > 0, 'documentation must be provided');
      this.methods && this.hasOwnProperty('methodOrder') && this.methodOrder.forEach(methodName => {
        assert && assert(this.methods[methodName], `methodName not in public methods: ${methodName}`);
      });
      if (supertype) {
        const typeHierarchy = supertype.getTypeHierarchy();
        assert && this.events && this.events.forEach(event => {
          // Make sure events are not listed again
          assert && assert(!_.some(typeHierarchy, t => t.events.includes(event)), `IOType should not declare event that parent also has: ${event}`);
        });
      } else {
        // The root IOType must supply all 4 state methods.
        assert && assert(typeof options.toStateObject === 'function', 'toStateObject must be defined');
        assert && assert(typeof options.fromStateObject === 'function', 'fromStateObject must be defined');
        assert && assert(typeof options.stateObjectToCreateElementArguments === 'function', 'stateObjectToCreateElementArguments must be defined');
        assert && assert(typeof options.applyState === 'function', 'applyState must be defined');
      }
    }
  }

  /**
   * Gets an array of IOTypes of the self type and all the supertype ancestors.
   */
  getTypeHierarchy() {
    const array = [];

    // @ts-expect-error Still working out this stuff, https://github.com/phetsims/tandem/issues/263
    let ioType = this; // eslint-disable-line consistent-this, @typescript-eslint/no-this-alias
    while (ioType) {
      array.push(ioType);
      ioType = ioType.supertype;
    }
    return array;
  }

  /**
   * Returns true if this IOType is a subtype of the passed-in type (or if they are the same).
   */
  extends(type) {
    // memory-based implementation OK since this method is only used in assertions
    return this.getTypeHierarchy().includes(type);
  }

  /**
   * Return all the metadata defaults (for the entire IO Type hierarchy)
   */
  getAllMetadataDefaults() {
    return _.merge({}, this.supertype ? this.supertype.getAllMetadataDefaults() : {}, this.metadataDefaults);
  }

  /**
   * Return all the data defaults (for the entire IO Type hierarchy)
   */
  getAllDataDefaults() {
    return _.merge({}, this.supertype ? this.supertype.getAllDataDefaults() : {}, this.dataDefaults);
  }

  /**
   * @param stateObject - the stateObject to validate against
   * @param toAssert=false - whether or not to assert when invalid
   * @param publicSchemaKeys=[]
   * @param privateSchemaKeys=[]
   * @returns if the stateObject is valid or not.
   */
  isStateObjectValid(stateObject, toAssert = false, publicSchemaKeys = [], privateSchemaKeys = []) {
    // Set to false when invalid
    let valid = true;

    // make sure the stateObject has everything the schema requires and nothing more
    if (this.stateSchema) {
      const validSoFar = this.stateSchema.checkStateObjectValid(stateObject, toAssert, publicSchemaKeys, privateSchemaKeys);

      // null as a marker to keep checking up the hierarchy, otherwise we reached our based case because the stateSchema was a value, not a composite
      if (validSoFar !== null) {
        return validSoFar;
      }
    }
    if (this.supertype) {
      return valid && this.supertype.isStateObjectValid(stateObject, toAssert, publicSchemaKeys, privateSchemaKeys);
    }

    // When we reach the root, make sure there isn't anything in the stateObject that isn't described by a schema
    if (!this.supertype && stateObject && typeof stateObject !== 'string' && !Array.isArray(stateObject)) {
      const check = (type, key) => {
        const keys = type === 'public' ? publicSchemaKeys : privateSchemaKeys;
        const keyValid = keys.includes(key);
        if (!keyValid) {
          valid = false;
        }
        assert && toAssert && assert(keyValid, `stateObject provided a ${type} key that is not in the schema: ${key}`);
      };

      // Visit the public state
      Object.keys(stateObject).filter(key => key !== '_private').forEach(key => check('public', key));

      // Visit the private state, if any
      // @ts-expect-error stateObjects can take a variety of forms, they don't have to be a record, thus, it is challenging to be graceful to a `_private` key
      stateObject._private && Object.keys(stateObject._private).forEach(key => check('private', key));
      return valid;
    }
    return true;
  }

  /**
   * Assert if the provided stateObject is not valid to this IOType's stateSchema
   */
  validateStateObject(stateObject) {
    this.isStateObjectValid(stateObject, true);
  }
  toString() {
    return this.typeName;
  }
}

// default state value
const DEFAULT_STATE = null;
IOType.ObjectIO = new IOType(js_TandemConstants.OBJECT_IO_TYPE_NAME, {
  isValidValue: () => true,
  supertype: null,
  documentation: 'The root of the IO Type hierarchy',
  toStateObject: coreObject => {
    if (phet && phet.tandem && phet.tandem.Tandem.VALIDATION) {
      assert && assert(coreObject.tandem, 'coreObject must be PhET-iO object');
      assert && assert(!coreObject.phetioState, `fell back to root serialization state for ${coreObject.tandem.phetioID}. Potential solutions:
         * mark the type as phetioState: false
         * create a custom toStateObject method in your IO Type
         * perhaps you have everything right, but forgot to pass in the IOType via phetioType in the constructor`);
    }
    return DEFAULT_STATE;
  },
  fromStateObject: () => {
    throw new Error('ObjectIO.fromStateObject should not be called');
  },
  stateObjectToCreateElementArguments: stateObject => [],
  applyState: _.noop,
  metadataDefaults: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS,
  dataDefaults: {
    initialState: DEFAULT_STATE
  },
  stateSchema: null
});
tandemNamespace.register('IOType', IOType);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ2YWxpZGF0ZSIsIlZhbGlkYXRpb24iLCJvcHRpb25pemUiLCJQaGV0aW9Db25zdGFudHMiLCJUYW5kZW1Db25zdGFudHMiLCJ0YW5kZW1OYW1lc3BhY2UiLCJTdGF0ZVNjaGVtYSIsIlZBTElEQVRFX09QVElPTlNfRkFMU0UiLCJ2YWxpZGF0ZVZhbGlkYXRvciIsImdldENvcmVUeXBlTmFtZSIsImlvVHlwZU5hbWUiLCJpbmRleCIsImluZGV4T2YiLCJJT19UWVBFX1NVRkZJWCIsImFzc2VydCIsInN1YnN0cmluZyIsIklPVHlwZSIsImNvbnN0cnVjdG9yIiwidHlwZU5hbWUiLCJwcm92aWRlZE9wdGlvbnMiLCJzdXBlcnR5cGUiLCJPYmplY3RJTyIsInRvU3RhdGVPYmplY3RTdXBwbGllZCIsInRvU3RhdGVPYmplY3QiLCJhcHBseVN0YXRlU3VwcGxpZWQiLCJhcHBseVN0YXRlIiwic3RhdGVTY2hlbWFTdXBwbGllZCIsInN0YXRlU2NoZW1hIiwib3B0aW9ucyIsIm1ldGhvZHMiLCJldmVudHMiLCJtZXRhZGF0YURlZmF1bHRzIiwiZGF0YURlZmF1bHRzIiwibWV0aG9kT3JkZXIiLCJwYXJhbWV0ZXJUeXBlcyIsImRvY3VtZW50YXRpb24iLCJpc0Z1bmN0aW9uVHlwZSIsImZyb21TdGF0ZU9iamVjdCIsInN0YXRlT2JqZWN0VG9DcmVhdGVFbGVtZW50QXJndW1lbnRzIiwiZGVmYXVsdERlc2VyaWFsaXphdGlvbk1ldGhvZCIsImFkZENoaWxkRWxlbWVudCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwibWV0YWRhdGFEZWZhdWx0S2V5IiwiZ2V0QWxsTWV0YWRhdGFEZWZhdWx0cyIsImhhc093blByb3BlcnR5IiwidmFsaWRhdG9yIiwiXyIsInBpY2siLCJWQUxJREFUT1JfS0VZUyIsInZhbGlkYXRpb25NZXNzYWdlIiwiY29tcG9zaXRlU2NoZW1hIiwiaXNDb21wb3NpdGUiLCJjb3JlT2JqZWN0IiwiZGVmYXVsdFRvU3RhdGVPYmplY3QiLCJ2YWxpZGF0ZVN0YXRlT2JqZWN0Iiwic3RhdGVPYmplY3QiLCJwaGV0aW9UeXBlIiwiZGVmYXVsdEFwcGx5U3RhdGUiLCJpbmNsdWRlcyIsInNwbGl0IiwiZW5kc1dpdGgiLCJ2YWx1ZXMiLCJtZXRob2RPYmplY3QiLCJpbnZvY2FibGVGb3JSZWFkT25seUVsZW1lbnRzIiwibGVuZ3RoIiwibWV0aG9kTmFtZSIsInR5cGVIaWVyYXJjaHkiLCJnZXRUeXBlSGllcmFyY2h5IiwiZXZlbnQiLCJzb21lIiwidCIsImFycmF5IiwiaW9UeXBlIiwicHVzaCIsImV4dGVuZHMiLCJ0eXBlIiwibWVyZ2UiLCJnZXRBbGxEYXRhRGVmYXVsdHMiLCJpc1N0YXRlT2JqZWN0VmFsaWQiLCJ0b0Fzc2VydCIsInB1YmxpY1NjaGVtYUtleXMiLCJwcml2YXRlU2NoZW1hS2V5cyIsInZhbGlkIiwidmFsaWRTb0ZhciIsImNoZWNrU3RhdGVPYmplY3RWYWxpZCIsIkFycmF5IiwiaXNBcnJheSIsImNoZWNrIiwia2V5Iiwia2V5VmFsaWQiLCJmaWx0ZXIiLCJfcHJpdmF0ZSIsInRvU3RyaW5nIiwiREVGQVVMVF9TVEFURSIsIk9CSkVDVF9JT19UWVBFX05BTUUiLCJpc1ZhbGlkVmFsdWUiLCJwaGV0IiwidGFuZGVtIiwiVGFuZGVtIiwiVkFMSURBVElPTiIsInBoZXRpb1N0YXRlIiwicGhldGlvSUQiLCJFcnJvciIsIm5vb3AiLCJQSEVUX0lPX09CSkVDVF9NRVRBREFUQV9ERUZBVUxUUyIsImluaXRpYWxTdGF0ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiSU9UeXBlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIElPIFR5cGVzIGZvcm0gYSBzeW50aGV0aWMgdHlwZSBzeXN0ZW0gdXNlZCB0byBkZXNjcmliZSBQaEVULWlPIEVsZW1lbnRzLiBBIFBoRVQtaU8gRWxlbWVudCBpcyBhbiBpbnN0cnVtZW50ZWQgUGhldGlvT2JqZWN0XG4gKiB0aGF0IGlzIGludGVyb3BlcmFibGUgZnJvbSB0aGUgXCJ3cmFwcGVyXCIgZnJhbWUgKG91dHNpZGUgdGhlIHNpbSBmcmFtZSkuIEFuIElPIFR5cGUgaW5jbHVkZXMgZG9jdW1lbnRhdGlvbiwgbWV0aG9kcyxcbiAqIG5hbWVzLCBzZXJpYWxpemF0aW9uLCBldGMuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi4vLi4vLi4vYXhvbi9qcy92YWxpZGF0ZS5qcyc7XG5pbXBvcnQgVmFsaWRhdGlvbiwgeyBWYWxpZGF0b3IgfSBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1ZhbGlkYXRpb24uanMnO1xuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBQaGV0aW9Db25zdGFudHMgZnJvbSAnLi4vUGhldGlvQ29uc3RhbnRzLmpzJztcbmltcG9ydCBUYW5kZW1Db25zdGFudHMsIHsgUGhldGlvT2JqZWN0TWV0YWRhdGEgfSBmcm9tICcuLi9UYW5kZW1Db25zdGFudHMuanMnO1xuaW1wb3J0IHRhbmRlbU5hbWVzcGFjZSBmcm9tICcuLi90YW5kZW1OYW1lc3BhY2UuanMnO1xuaW1wb3J0IFN0YXRlU2NoZW1hLCB7IENvbXBvc2l0ZVNjaGVtYSwgQ29tcG9zaXRlU3RhdGVPYmplY3RUeXBlIH0gZnJvbSAnLi9TdGF0ZVNjaGVtYS5qcyc7XG5pbXBvcnQgdHlwZSBQaGV0aW9PYmplY3QgZnJvbSAnLi4vUGhldGlvT2JqZWN0LmpzJztcbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuaW1wb3J0IFBoZXRpb0R5bmFtaWNFbGVtZW50Q29udGFpbmVyIGZyb20gJy4uL1BoZXRpb0R5bmFtaWNFbGVtZW50Q29udGFpbmVyLmpzJztcblxuLy8gY29uc3RhbnRzXG5jb25zdCBWQUxJREFURV9PUFRJT05TX0ZBTFNFID0geyB2YWxpZGF0ZVZhbGlkYXRvcjogZmFsc2UgfTtcblxuLyoqXG4gKiBFc3RpbWF0ZSB0aGUgY29yZSB0eXBlIG5hbWUgZnJvbSBhIGdpdmVuIElPIFR5cGUgbmFtZS5cbiAqL1xuY29uc3QgZ2V0Q29yZVR5cGVOYW1lID0gKCBpb1R5cGVOYW1lOiBzdHJpbmcgKTogc3RyaW5nID0+IHtcbiAgY29uc3QgaW5kZXggPSBpb1R5cGVOYW1lLmluZGV4T2YoIFBoZXRpb0NvbnN0YW50cy5JT19UWVBFX1NVRkZJWCApO1xuICBhc3NlcnQgJiYgYXNzZXJ0KCBpbmRleCA+PSAwLCAnSU8gc2hvdWxkIGJlIGluIHRoZSB0eXBlIG5hbWUnICk7XG4gIHJldHVybiBpb1R5cGVOYW1lLnN1YnN0cmluZyggMCwgaW5kZXggKTtcbn07XG5cbnR5cGUgQWRkQ2hpbGRFbGVtZW50ID0gKCBncm91cDogUGhldGlvRHluYW1pY0VsZW1lbnRDb250YWluZXI8UGhldGlvT2JqZWN0PiwgY29tcG9uZW50TmFtZTogc3RyaW5nLCBzdGF0ZU9iamVjdDogdW5rbm93biApID0+IFBoZXRpb09iamVjdDtcblxuZXhwb3J0IHR5cGUgSU9UeXBlTWV0aG9kID0ge1xuICByZXR1cm5UeXBlOiBJT1R5cGU7XG4gIHBhcmFtZXRlclR5cGVzOiBJT1R5cGVbXTtcblxuICAvL3RoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdoZW4gdGhpcyBtZXRob2QgaXMgY2FsbGVkLiBUaGlzIGZ1bmN0aW9uJ3MgcGFyYW1ldGVycyB3aWxsIGJlIGJhc2VkIG9uIGBwYXJhbWV0ZXJUeXBlc2AsXG4gIC8vIGFuZCBzaG91bGQgcmV0dXJuIHRoZSB0eXBlIHNwZWNpZmllZCBieSBgcmV0dXJuVHlwZWBcbiAgaW1wbGVtZW50YXRpb246ICggLi4uYXJnczogSW50ZW50aW9uYWxBbnlbXSApID0+IHVua25vd247XG4gIGRvY3VtZW50YXRpb246IHN0cmluZztcblxuICAvLyBieSBkZWZhdWx0LCBhbGwgbWV0aG9kcyBhcmUgaW52b2NhYmxlIGZvciBhbGwgZWxlbWVudHMuIEhvd2V2ZXIsIGZvciBzb21lIHJlYWQtb25seSBlbGVtZW50cywgY2VydGFpbiBtZXRob2RzXG4gIC8vIHNob3VsZCBub3QgYmUgaW52b2NhYmxlLiBJbiB0aGF0IGNhc2UsIHRoZXkgYXJlIG1hcmtlZCBhcyBpbnZvY2FibGVGb3JSZWFkT25seUVsZW1lbnRzOiBmYWxzZS5cbiAgaW52b2NhYmxlRm9yUmVhZE9ubHlFbGVtZW50cz86IGJvb2xlYW47XG59O1xuXG50eXBlIERlc2VyaWFsaXphdGlvblR5cGUgPSAnZnJvbVN0YXRlT2JqZWN0JyB8ICdhcHBseVN0YXRlJztcblxudHlwZSBTdGF0ZVNjaGVtYU9wdGlvbjxULCBTdGF0ZVR5cGU+ID0gKFxuICAoIGlvVHlwZTogSU9UeXBlPFQsIFN0YXRlVHlwZT4gKSA9PiBDb21wb3NpdGVTY2hlbWEgKSB8XG4gIFN0YXRlU2NoZW1hPFQsIFN0YXRlVHlwZT4gfFxuICBDb21wb3NpdGVTY2hlbWEgfFxuICBudWxsO1xuXG50eXBlIFNlbGZPcHRpb25zPFQsIFN0YXRlVHlwZT4gPSB7XG5cbiAgLy8gSU8gVHlwZXMgZm9ybSBhbiBvYmplY3QgdHJlZSBsaWtlIGEgdHlwZSBoaWVyYXJjaHkuIElmIHRoZSBzdXBlcnR5cGUgaXMgc3BlY2lmaWVkLCBhdHRyaWJ1dGVzIHN1Y2ggYXNcbiAgLy8gdG9TdGF0ZU9iamVjdCwgZnJvbVN0YXRlT2JqZWN0LCBzdGF0ZU9iamVjdFRvQ3JlYXRlRWxlbWVudEFyZ3VtZW50cywgYXBwbHlTdGF0ZSwgYWRkQ2hpbGRFbGVtZW50XG4gIC8vIHdpbGwgYmUgaW5oZXJpdGVkIGZyb20gdGhlIHN1cGVydHlwZSAodW5sZXNzIG92ZXJyaWRkZW4pLiAgSXQgaXMgYWxzbyB1c2VkIGluIGZlYXR1cmVzIHN1Y2ggYXMgc2NoZW1hIHZhbGlkYXRpb24sXG4gIC8vIGRhdGEvbWV0YWRhdGEgZGVmYXVsdCBjYWxjdWxhdGlvbnMuXG4gIHN1cGVydHlwZT86IElPVHlwZSB8IG51bGw7XG5cbiAgLy8gVGhlIGxpc3Qgb2YgZXZlbnRzIHRoYXQgY2FuIGJlIGVtaXR0ZWQgYXQgdGhpcyBsZXZlbCAoZG9lcyBub3QgaW5jbHVkZSBldmVudHMgZnJvbSBzdXBlcnR5cGVzKS5cbiAgZXZlbnRzPzogc3RyaW5nW107XG5cbiAgLy8gS2V5L3ZhbHVlIHBhaXJzIGluZGljYXRpbmcgdGhlIGRlZmF1bHRzIGZvciB0aGUgSU8gVHlwZSBkYXRhLCBqdXN0IGZvciB0aGlzIGxldmVsIChkbyBub3Qgc3BlY2lmeSBwYXJlbnQgZGVmYXVsdHMpXG4gIGRhdGFEZWZhdWx0cz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuXG4gIC8vIEtleS92YWx1ZSBwYWlycyBpbmRpY2F0aW5nIHRoZSBkZWZhdWx0cyBmb3IgdGhlIElPIFR5cGUgbWV0YWRhdGEuXG4gIC8vIElmIGFueXRoaW5nIGlzIHByb3ZpZGVkIGhlcmUsIHRoZW4gY29ycmVzcG9uZGluZyBQaGV0aW9PYmplY3RzIHRoYXQgdXNlIHRoaXMgSU9UeXBlIHNob3VsZCBvdmVycmlkZVxuICAvLyBQaGV0aW9PYmplY3QuZ2V0TWV0YWRhdGEoKSB0byBhZGQgd2hhdCBrZXlzIHRoZXkgbmVlZCBmb3IgdGhlaXIgc3BlY2lmaWMgdHlwZS4gIENhbm5vdCBzcGVjaWZ5IHJlZHVuZGFudCB2YWx1ZXNcbiAgLy8gKHRoYXQgYW4gYW5jZXN0b3IgYWxyZWFkeSBzcGVjaWZpZWQpLlxuICBtZXRhZGF0YURlZmF1bHRzPzogUGFydGlhbDxQaGV0aW9PYmplY3RNZXRhZGF0YT47XG5cbiAgLy8gVGV4dCB0aGF0IGRlc2NyaWJlcyB0aGUgSU8gVHlwZSwgcHJlc2VudGVkIHRvIHRoZSBQaEVULWlPIENsaWVudCBpbiBTdHVkaW8sIHN1cHBvcnRzIEhUTUwgbWFya3VwLlxuICBkb2N1bWVudGF0aW9uPzogc3RyaW5nO1xuXG4gIC8vIFRoZSBwdWJsaWMgbWV0aG9kcyBhdmFpbGFibGUgZm9yIHRoaXMgSU8gVHlwZS4gRWFjaCBtZXRob2QgaXMgbm90IGp1c3QgYSBmdW5jdGlvbixcbiAgLy8gYnV0IGEgY29sbGVjdGlvbiBvZiBtZXRhZGF0YSBhYm91dCB0aGUgbWV0aG9kIHRvIGJlIGFibGUgdG8gc2VyaWFsaXplIHBhcmFtZXRlcnMgYW5kIHJldHVybiB0eXBlcyBhbmQgcHJvdmlkZVxuICAvLyBiZXR0ZXIgZG9jdW1lbnRhdGlvbi5cbiAgbWV0aG9kcz86IFJlY29yZDxzdHJpbmcsIElPVHlwZU1ldGhvZD47XG5cbiAgLy8gSU8gVHlwZXMgY2FuIHNwZWNpZnkgdGhlIG9yZGVyIHRoYXQgbWV0aG9kcyBhcHBlYXIgaW4gdGhlIGRvY3VtZW50YXRpb24gYnkgcHV0dGluZyB0aGVpciBuYW1lcyBpbiB0aGlzXG4gIC8vIGxpc3QuIFRoaXMgbGlzdCBpcyBvbmx5IGZvciB0aGUgbWV0aG9kcyBkZWZpbmVkIGF0IHRoaXMgbGV2ZWwgaW4gdGhlIHR5cGUgaGllcmFyY2h5LiBBZnRlciB0aGUgbWV0aG9kT3JkZXJcbiAgLy8gc3BlY2lmaWVkLCB0aGUgbWV0aG9kcyBmb2xsb3cgaW4gdGhlIG9yZGVyIGRlY2xhcmVkIGluIHRoZSBpbXBsZW1lbnRhdGlvbiAod2hpY2ggaXNuJ3QgbmVjZXNzYXJpbHkgc3RhYmxlKS5cbiAgbWV0aG9kT3JkZXI/OiBzdHJpbmdbXTtcblxuICAvLyBGb3IgcGFyYW1ldHJpYyB0eXBlcywgdGhleSBtdXN0IGluZGljYXRlIHRoZSB0eXBlcyBvZiB0aGUgcGFyYW1ldGVycyBoZXJlLiBFbXB0eSBhcnJheSBpZiBub24tcGFyYW1ldHJpYy5cbiAgcGFyYW1ldGVyVHlwZXM/OiBJT1R5cGVbXTtcblxuICAvLyBGb3IgaW50ZXJuYWwgcGhldC1pbyB1c2Ugb25seS4gRnVuY3Rpb25zIGNhbm5vdCBiZSBzZW50IGZyb20gb25lIGlmcmFtZSB0byBhbm90aGVyLCBzbyBtdXN0IGJlIHdyYXBwZWQuIFNlZVxuICAvLyBwaGV0aW9Db21tYW5kUHJvY2Vzc29yLndyYXBGdW5jdGlvblxuICBpc0Z1bmN0aW9uVHlwZT86IGJvb2xlYW47XG5cbiAgLy8gKioqKioqKiogU1RBVEUgKioqKioqKiogLy9cblxuICAvLyBUaGUgc3BlY2lmaWNhdGlvbiBmb3IgaG93IHRoZSBQaEVULWlPIHN0YXRlIHdpbGwgbG9vayBmb3IgaW5zdGFuY2VzIG9mIHRoaXMgdHlwZS4gbnVsbCBzcGVjaWZpZXMgdGhhdCB0aGUgb2JqZWN0XG4gIC8vIGlzIG5vdCBzZXJpYWxpemVkLiBBIGNvbXBvc2l0ZSBTdGF0ZVNjaGVtYSBjYW4gc3VwcGx5IGEgdG9TdGF0ZU9iamVjdCBhbmQgYXBwbHlTdGF0ZSBzZXJpYWxpemF0aW9uIHN0cmF0ZWd5LiBUaGlzXG4gIC8vIGRlZmF1bHQgc2VyaWFsaXphdGlvbiBzdHJhdGVneSBvbmx5IGFwcGxpZXMgdG8gdGhpcyBsZXZlbCwgYW5kIGRvZXMgbm90IHJlY3Vyc2UgdG8gcGFyZW50cy4gSWYgeW91IG5lZWQgdG8gYWRkXG4gIC8vIHNlcmlhbGl6YXRpb24gZnJvbSBwYXJlbnQgbGV2ZWxzLCB0aGlzIGNhbiBiZSBkb25lIGJ5IG1hbnVhbGx5IGltcGxlbWVudGluZyBhIGN1c3RvbSB0b1N0YXRlT2JqZWN0LiBCeSBkZWZhdWx0LCBpdFxuICAvLyB3aWxsIGFzc3VtZSB0aGF0IGVhY2ggY29tcG9zaXRlIGNoaWxkIG9mIHRoaXMgc3RhdGVTY2hlbWEgZGVzZXJpYWxpemVzIHZpYSBcImZyb21TdGF0ZU9iamVjdFwiLCBpZiBpbnN0ZWFkIGl0IHVzZXNcbiAgLy8gYXBwbHlTdGF0ZSwgcGxlYXNlIHNwZWNpZnkgdGhhdCBwZXIgSU9UeXBlIHdpdGggZGVmYXVsdERlc2VyaWFsaXphdGlvbk1ldGhvZC5cbiAgLy8gRm9yIHBoZXRpb1N0YXRlOiB0cnVlIG9iamVjdHMsIHRoaXMgc2hvdWxkIGJlIHJlcXVpcmVkLCBidXQgbWF5IGJlIHNwZWNpZmllZCBpbiB0aGUgcGFyZW50IElPVHlwZSwgbGlrZSBpbiBEZXJpdmVkUHJvcGVydHlJT1xuICBzdGF0ZVNjaGVtYT86IFN0YXRlU2NoZW1hT3B0aW9uPFQsIFN0YXRlVHlwZT47XG5cbiAgLy8gU2VyaWFsaXplIHRoZSBjb3JlIG9iamVjdC4gTW9zdCBvZnRlbiB0aGlzIGxvb2tzIGxpa2UgYW4gb2JqZWN0IGxpdGVyYWwgdGhhdCBob2xkcyBkYXRhIGFib3V0IHRoZSBQaGV0aW9PYmplY3RcbiAgLy8gaW5zdGFuY2UuIFRoaXMgaXMgbGlrZWx5IHN1cGVyZmx1b3VzIHRvIGp1c3QgcHJvdmlkaW5nIGEgc3RhdGVTY2hlbWEgb2YgY29tcG9zaXRlIGtleS9JT1R5cGUgdmFsdWVzLCB3aGljaCB3aWxsXG4gIC8vIGNyZWF0ZSBhIGRlZmF1bHQgdG9TdGF0ZU9iamVjdCBiYXNlZCBvbiB0aGUgc2NoZW1hLlxuICB0b1N0YXRlT2JqZWN0PzogKCB0OiBUICkgPT4gU3RhdGVUeXBlO1xuXG4gIC8vICoqKioqKioqIERFU0VSSUFMSVpBVElPTiAqKioqKioqKiAvL1xuXG4gIC8vIEZvciBEYXRhIFR5cGUgRGVzZXJpYWxpemF0aW9uLiBEZWNvZGVzIHRoZSBvYmplY3QgZnJvbSBhIHN0YXRlIChzZWUgdG9TdGF0ZU9iamVjdCkgaW50byBhbiBpbnN0YW5jZSBvZiB0aGUgY29yZSB0eXBlLlxuICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vYmxvYi9tYXN0ZXIvZG9jL3BoZXQtaW8taW5zdHJ1bWVudGF0aW9uLXRlY2huaWNhbC1ndWlkZS5tZCN0aHJlZS10eXBlcy1vZi1kZXNlcmlhbGl6YXRpb25cbiAgZnJvbVN0YXRlT2JqZWN0PzogKCBzOiBTdGF0ZVR5cGUgKSA9PiBUO1xuXG4gIC8vIEZvciBEeW5hbWljIEVsZW1lbnQgRGVzZXJpYWxpemF0aW9uOiBjb252ZXJ0cyB0aGUgc3RhdGUgb2JqZWN0IHRvIGFyZ3VtZW50c1xuICAvLyBmb3IgYSBgY3JlYXRlYCBmdW5jdGlvbiBpbiBQaGV0aW9Hcm91cCBvciBvdGhlciBQaGV0aW9EeW5hbWljRWxlbWVudENvbnRhaW5lciBjcmVhdGlvbiBmdW5jdGlvbi4gTm90ZSB0aGF0XG4gIC8vIG90aGVyIG5vbi1zZXJpYWxpemVkIGFyZ3MgKG5vdCBkZWFsdCB3aXRoIGhlcmUpIG1heSBiZSBzdXBwbGllZCBhcyBjbG9zdXJlIHZhcmlhYmxlcy4gVGhpcyBmdW5jdGlvbiBvbmx5IG5lZWRzXG4gIC8vIHRvIGJlIGltcGxlbWVudGVkIG9uIElPIFR5cGVzIHdob3NlIGNvcmUgdHlwZSBpcyBwaGV0aW9EeW5hbWljRWxlbWVudDogdHJ1ZSwgc3VjaCBhcyBQaGV0aW9EeW5hbWljRWxlbWVudENvbnRhaW5lclxuICAvLyBlbGVtZW50cy5cbiAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0LWlvL2Jsb2IvbWFzdGVyL2RvYy9waGV0LWlvLWluc3RydW1lbnRhdGlvbi10ZWNobmljYWwtZ3VpZGUubWQjdGhyZWUtdHlwZXMtb2YtZGVzZXJpYWxpemF0aW9uXG4gIHN0YXRlT2JqZWN0VG9DcmVhdGVFbGVtZW50QXJndW1lbnRzPzogKCBzOiBTdGF0ZVR5cGUgKSA9PiB1bmtub3duW107XG5cbiAgLy8gRm9yIFJlZmVyZW5jZSBUeXBlIERlc2VyaWFsaXphdGlvbjogIEFwcGxpZXMgdGhlIHN0YXRlIChzZWUgdG9TdGF0ZU9iamVjdClcbiAgLy8gdmFsdWUgdG8gdGhlIGluc3RhbmNlLiBXaGVuIHNldHRpbmcgUGhFVC1pTyBzdGF0ZSwgdGhpcyBmdW5jdGlvbiB3aWxsIGJlIGNhbGxlZCBvbiBhbiBpbnN0cnVtZW50ZWQgaW5zdGFuY2UgdG8gc2V0IHRoZVxuICAvLyBzdGF0ZU9iamVjdCdzIHZhbHVlIHRvIGl0LiBTdGF0ZVNjaGVtYSBtYWtlcyB0aGlzIG1ldGhvZCBvZnRlbiBzdXBlcmZsdW91cy4gQSBjb21wb3NpdGUgc3RhdGVTY2hlbWEgY2FuIGJlIHVzZWRcbiAgLy8gdG8gYXV0b21hdGljYWxseSBmb3JtdWxhdGUgdGhlIGFwcGx5U3RhdGUgZnVuY3Rpb24uIElmIHVzaW5nIHN0YXRlU2NoZW1hIGZvciB0aGUgYXBwbHlTdGF0ZSBtZXRob2QsIG1ha2Ugc3VyZSB0aGF0XG4gIC8vIGVhY2ggY29tcG9zZSBJT1R5cGUgaGFzIHRoZSBjb3JyZWN0IGRlZmF1bHREZXNlcmlhbGl6YXRpb25NZXRob2QuIE1vc3Qgb2YgdGhlIHRpbWUsIGNvbXBvc2l0ZSBJT1R5cGVzIHVzZSBmcm9tU3RhdGVPYmplY3RcbiAgLy8gdG8gZGVzZXJpYWxpemUgZWFjaCBzdWItY29tcG9uZW50LCBidXQgaW4gc29tZSBjaXJjdW1zdGFuY2VzLCB5b3Ugd2lsbCB3YW50IHlvdXIgY2hpbGQgdG8gZGVzZXJpYWxpemUgYnkgYWxzbyB1c2luZyBhcHBseVN0YXRlLlxuICAvLyBTZWUgb3B0aW9ucy5kZWZhdWx0RGVzZXJpYWxpemF0aW9uTWV0aG9kIHRvIGNvbmZpZ3VyZSB0aGlzIGNhc2UuXG4gIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1pby9ibG9iL21hc3Rlci9kb2MvcGhldC1pby1pbnN0cnVtZW50YXRpb24tdGVjaG5pY2FsLWd1aWRlLm1kI3RocmVlLXR5cGVzLW9mLWRlc2VyaWFsaXphdGlvblxuICBhcHBseVN0YXRlPzogKCB0OiBULCBzdGF0ZTogU3RhdGVUeXBlICkgPT4gdm9pZDtcblxuICAvLyBGb3IgdXNlIHdoZW4gdGhpcyBJT1R5cGUgaXMgcGFydCBvZiBhIGNvbXBvc2l0ZSBzdGF0ZVNjaGVtYSBpbiBhbm90aGVyIElPVHlwZS4gIFdoZW5cbiAgLy8gdXNpbmcgc2VyaWFsaXphdGlvbiBtZXRob2RzIGJ5IHN1cHBseWluZyBvbmx5IHN0YXRlU2NoZW1hLCB0aGVuIGRlc2VyaWFsaXphdGlvblxuICAvLyBjYW4gdGFrZSBhIHZhcmlldHkgb2YgZm9ybXMsIGFuZCB0aGlzIHdpbGwgdmFyeSBiYXNlZCBvbiB0aGUgSU9UeXBlLiBJbiBtb3N0IGNhc2VzIGRlc2VyaWFsaXphdGlvbiBvZiBhIGNvbXBvbmVudFxuICAvLyBpcyBkb25lIHZpYSBmcm9tU3RhdGVPYmplY3QuIElmIG5vdCwgc3BlY2lmeSB0aGlzIG9wdGlvbiBzbyB0aGF0IHRoZSBzdGF0ZVNjaGVtYSB3aWxsIGJlIGFibGUgdG8ga25vdyB0byBjYWxsXG4gIC8vIHRoZSBhcHByb3ByaWF0ZSBkZXNlcmlhbGl6YXRpb24gbWV0aG9kIHdoZW4gZGVzZXJpYWxpemluZyBzb21ldGhpbmcgb2YgdGhpcyBJT1R5cGUuXG4gIGRlZmF1bHREZXNlcmlhbGl6YXRpb25NZXRob2Q/OiBEZXNlcmlhbGl6YXRpb25UeXBlO1xuXG4gIC8vIEZvciBkeW5hbWljIGVsZW1lbnQgY29udGFpbmVycywgc2VlIGV4YW1wbGVzIGluIElPVHlwZXMgZm9yIFBoZXRpb0R5bmFtaWNFbGVtZW50Q29udGFpbmVyIGNsYXNzZXNcbiAgYWRkQ2hpbGRFbGVtZW50PzogQWRkQ2hpbGRFbGVtZW50O1xufTtcblxudHlwZSBJT1R5cGVPcHRpb25zPFQsIFN0YXRlVHlwZT4gPSBTZWxmT3B0aW9uczxULCBTdGF0ZVR5cGU+ICYgVmFsaWRhdG9yPFQ+O1xuXG4vLyBUT0RPOiBub3QgYW55LCBidXQgZG8gd2UgaGF2ZSB0byBzZXJpYWxpemUgdHlwZSBwYXJhbWV0ZXJzPyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdGFuZGVtL2lzc3Vlcy8yNjNcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIElPVHlwZTxUID0gYW55LCBTdGF0ZVR5cGUgPSBhbnk+IHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gIHB1YmxpYyByZWFkb25seSBzdXBlcnR5cGU/OiBJT1R5cGU7XG4gIHB1YmxpYyByZWFkb25seSBkb2N1bWVudGF0aW9uPzogc3RyaW5nO1xuICBwdWJsaWMgcmVhZG9ubHkgbWV0aG9kcz86IFJlY29yZDxzdHJpbmcsIElPVHlwZU1ldGhvZD47XG5cbiAgcHVibGljIHJlYWRvbmx5IGV2ZW50czogc3RyaW5nW107XG4gIHB1YmxpYyByZWFkb25seSBtZXRhZGF0YURlZmF1bHRzPzogUGFydGlhbDxQaGV0aW9PYmplY3RNZXRhZGF0YT47XG5cbiAgcHVibGljIHJlYWRvbmx5IGRhdGFEZWZhdWx0cz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xuICBwdWJsaWMgcmVhZG9ubHkgbWV0aG9kT3JkZXI/OiBzdHJpbmdbXTtcbiAgcHVibGljIHJlYWRvbmx5IHBhcmFtZXRlclR5cGVzPzogSU9UeXBlW107XG5cbiAgcHVibGljIHJlYWRvbmx5IHRvU3RhdGVPYmplY3Q6ICggdDogVCApID0+IFN0YXRlVHlwZTtcbiAgcHVibGljIHJlYWRvbmx5IGZyb21TdGF0ZU9iamVjdDogKCBzdGF0ZTogU3RhdGVUeXBlICkgPT4gVDtcbiAgcHVibGljIHJlYWRvbmx5IHN0YXRlT2JqZWN0VG9DcmVhdGVFbGVtZW50QXJndW1lbnRzOiAoIHM6IFN0YXRlVHlwZSApID0+IHVua25vd25bXTsgLy8gVE9ETzogaW5zdGVhZCBvZiB1bmtub3duIHRoaXMgaXMgdGhlIHNlY29uZCBwYXJhbWV0ZXIgdHlwZSBmb3IgUGhldGlvRHluYW1pY0VsZW1lbnRDb250YWluZXIuIEhvdz8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvMjYxXG4gIHB1YmxpYyByZWFkb25seSBhcHBseVN0YXRlOiAoIG9iamVjdDogVCwgc3RhdGU6IFN0YXRlVHlwZSApID0+IHZvaWQ7XG4gIHB1YmxpYyByZWFkb25seSBhZGRDaGlsZEVsZW1lbnQ6IEFkZENoaWxkRWxlbWVudDtcbiAgcHVibGljIHJlYWRvbmx5IHZhbGlkYXRvcjogVmFsaWRhdG9yPFQ+O1xuICBwdWJsaWMgcmVhZG9ubHkgZGVmYXVsdERlc2VyaWFsaXphdGlvbk1ldGhvZDogRGVzZXJpYWxpemF0aW9uVHlwZTtcbiAgcHVibGljIHJlYWRvbmx5IHN0YXRlU2NoZW1hOiBTdGF0ZVNjaGVtYTxULCBTdGF0ZVR5cGU+O1xuICBwdWJsaWMgcmVhZG9ubHkgaXNGdW5jdGlvblR5cGU6IGJvb2xlYW47XG5cbiAgcHVibGljIHN0YXRpYyBPYmplY3RJTzogSU9UeXBlO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gdHlwZU5hbWUgLSBUaGUgbmFtZSB0aGF0IHRoaXMgSU9UeXBlIHdpbGwgaGF2ZSBpbiB0aGUgcHVibGljIFBoRVQtaU8gQVBJLiBJbiBnZW5lcmFsLCB0aGlzIHNob3VsZFxuICAgKiAgICBvbmx5IGJlIHdvcmQgY2hhcmFjdGVycywgZW5kaW5nIGluIFwiSU9cIi4gUGFyYW1ldHJpYyB0eXBlcyBhcmUgYSBzcGVjaWFsIHN1YnNldCBvZiBJT1R5cGVzIHRoYXQgaW5jbHVkZSB0aGVpclxuICAgKiAgICBwYXJhbWV0ZXJzIGluIHRoZWlyIHR5cGVOYW1lLiBJZiBhbiBJT1R5cGUncyBwYXJhbWV0ZXJzIGFyZSBvdGhlciBJTyBUeXBlKHMpLCB0aGVuIHRoZXkgc2hvdWxkIGJlIGluY2x1ZGVkIHdpdGhpblxuICAgKiAgICBhbmdsZSBicmFja2V0cywgbGlrZSBcIlByb3BlcnR5SU88Qm9vbGVhbklPPlwiLiBTb21lIG90aGVyIHR5cGVzIHVzZSBhIG1vcmUgY3VzdG9tIGZvcm1hdCBmb3IgZGlzcGxheWluZyB0aGVpclxuICAgKiAgICBwYXJhbWV0ZXIgdHlwZXMsIGluIHRoaXMgY2FzZSB0aGUgcGFyYW1ldGVyIHNlY3Rpb24gb2YgdGhlIHR5cGUgbmFtZSAoaW1tZWRpYXRlbHkgZm9sbG93aW5nIFwiSU9cIikgc2hvdWxkIGJlZ2luXG4gICAqICAgIHdpdGggYW4gb3BlbiBwYXJlbiwgXCIoXCIuIFRodXMgdGhlIHNjaGVtYSBmb3IgYSB0eXBlTmFtZSBjb3VsZCBiZSBkZWZpbmVkICh1c2luZyByZWdleCkgYXMgYFtBLVpdXFx3KklPKFsoPF0uKil7MCwxfWAuXG4gICAqICAgIFBhcmFtZXRlcml6ZWQgdHlwZXMgc2hvdWxkIGFsc28gaW5jbHVkZSBhIGBwYXJhbWV0ZXJUeXBlc2AgZmllbGQgb24gdGhlIElPVHlwZS5cbiAgICogQHBhcmFtIHByb3ZpZGVkT3B0aW9uc1xuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwdWJsaWMgcmVhZG9ubHkgdHlwZU5hbWU6IHN0cmluZywgcHJvdmlkZWRPcHRpb25zOiBJT1R5cGVPcHRpb25zPFQsIFN0YXRlVHlwZT4gKSB7XG5cbiAgICAvLyBGb3IgcmVmZXJlbmNlIGluIHRoZSBvcHRpb25zXG4gICAgY29uc3Qgc3VwZXJ0eXBlID0gcHJvdmlkZWRPcHRpb25zLnN1cGVydHlwZSB8fCBJT1R5cGUuT2JqZWN0SU87XG4gICAgY29uc3QgdG9TdGF0ZU9iamVjdFN1cHBsaWVkID0gISEoIHByb3ZpZGVkT3B0aW9ucy50b1N0YXRlT2JqZWN0ICk7XG4gICAgY29uc3QgYXBwbHlTdGF0ZVN1cHBsaWVkID0gISEoIHByb3ZpZGVkT3B0aW9ucy5hcHBseVN0YXRlICk7XG4gICAgY29uc3Qgc3RhdGVTY2hlbWFTdXBwbGllZCA9ICEhKCBwcm92aWRlZE9wdGlvbnMuc3RhdGVTY2hlbWEgKTtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8SU9UeXBlT3B0aW9uczxULCBTdGF0ZVR5cGU+LCBTZWxmT3B0aW9uczxULCBTdGF0ZVR5cGU+PigpKCB7XG5cbiAgICAgIHN1cGVydHlwZTogSU9UeXBlLk9iamVjdElPLFxuICAgICAgbWV0aG9kczoge30sXG4gICAgICBldmVudHM6IFtdLFxuICAgICAgbWV0YWRhdGFEZWZhdWx0czoge30sXG5cbiAgICAgIC8vICBNb3N0IGxpa2VseSB0aGlzIHdpbGwgcmVtYWluIFBoRVQtaU8gaW50ZXJuYWwsIGFuZCBzaG91bGRuJ3QgbmVlZCB0byBiZSB1c2VkIHdoZW4gY3JlYXRpbmcgSU9UeXBlcyBvdXRzaWRlIG9mIHRhbmRlbS8uXG4gICAgICBkYXRhRGVmYXVsdHM6IHt9LFxuICAgICAgbWV0aG9kT3JkZXI6IFtdLFxuICAgICAgcGFyYW1ldGVyVHlwZXM6IFtdLFxuICAgICAgZG9jdW1lbnRhdGlvbjogYElPIFR5cGUgZm9yICR7Z2V0Q29yZVR5cGVOYW1lKCB0eXBlTmFtZSApfWAsXG4gICAgICBpc0Z1bmN0aW9uVHlwZTogZmFsc2UsXG5cbiAgICAgIC8qKioqIFNUQVRFICoqKiovXG5cbiAgICAgIHRvU3RhdGVPYmplY3Q6IHN1cGVydHlwZSAmJiBzdXBlcnR5cGUudG9TdGF0ZU9iamVjdCxcbiAgICAgIGZyb21TdGF0ZU9iamVjdDogc3VwZXJ0eXBlICYmIHN1cGVydHlwZS5mcm9tU3RhdGVPYmplY3QsXG4gICAgICBzdGF0ZU9iamVjdFRvQ3JlYXRlRWxlbWVudEFyZ3VtZW50czogc3VwZXJ0eXBlICYmIHN1cGVydHlwZS5zdGF0ZU9iamVjdFRvQ3JlYXRlRWxlbWVudEFyZ3VtZW50cyxcbiAgICAgIGFwcGx5U3RhdGU6IHN1cGVydHlwZSAmJiBzdXBlcnR5cGUuYXBwbHlTdGF0ZSxcblxuICAgICAgc3RhdGVTY2hlbWE6IG51bGwsXG4gICAgICBkZWZhdWx0RGVzZXJpYWxpemF0aW9uTWV0aG9kOiAnZnJvbVN0YXRlT2JqZWN0JyxcbiAgICAgIGFkZENoaWxkRWxlbWVudDogc3VwZXJ0eXBlICYmIHN1cGVydHlwZS5hZGRDaGlsZEVsZW1lbnRcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICAgIGlmICggYXNzZXJ0ICYmIHN1cGVydHlwZSApIHtcbiAgICAgICggT2JqZWN0LmtleXMoIG9wdGlvbnMubWV0YWRhdGFEZWZhdWx0cyApIGFzICgga2V5b2YgUGhldGlvT2JqZWN0TWV0YWRhdGEgKVtdICkuZm9yRWFjaCggbWV0YWRhdGFEZWZhdWx0S2V5ID0+IHtcbiAgICAgICAgYXNzZXJ0ICYmIHN1cGVydHlwZS5nZXRBbGxNZXRhZGF0YURlZmF1bHRzKCkuaGFzT3duUHJvcGVydHkoIG1ldGFkYXRhRGVmYXVsdEtleSApICYmXG4gICAgICAgIGFzc2VydCggc3VwZXJ0eXBlLmdldEFsbE1ldGFkYXRhRGVmYXVsdHMoKVsgbWV0YWRhdGFEZWZhdWx0S2V5IF0gIT09IG9wdGlvbnMubWV0YWRhdGFEZWZhdWx0c1sgbWV0YWRhdGFEZWZhdWx0S2V5IF0sXG4gICAgICAgICAgYCR7bWV0YWRhdGFEZWZhdWx0S2V5fSBzaG91bGQgbm90IGhhdmUgdGhlIHNhbWUgZGVmYXVsdCB2YWx1ZSBhcyB0aGUgYW5jZXN0b3IgbWV0YWRhdGEgZGVmYXVsdC5gICk7XG4gICAgICB9ICk7XG4gICAgfVxuICAgIHRoaXMuc3VwZXJ0eXBlID0gc3VwZXJ0eXBlO1xuICAgIHRoaXMuZG9jdW1lbnRhdGlvbiA9IG9wdGlvbnMuZG9jdW1lbnRhdGlvbjtcbiAgICB0aGlzLm1ldGhvZHMgPSBvcHRpb25zLm1ldGhvZHM7XG4gICAgdGhpcy5ldmVudHMgPSBvcHRpb25zLmV2ZW50cztcbiAgICB0aGlzLm1ldGFkYXRhRGVmYXVsdHMgPSBvcHRpb25zLm1ldGFkYXRhRGVmYXVsdHM7IC8vIGp1c3QgZm9yIHRoaXMgbGV2ZWwsIHNlZSBnZXRBbGxNZXRhZGF0YURlZmF1bHRzKClcbiAgICB0aGlzLmRhdGFEZWZhdWx0cyA9IG9wdGlvbnMuZGF0YURlZmF1bHRzOyAvLyBqdXN0IGZvciB0aGlzIGxldmVsLCBzZWUgZ2V0QWxsRGF0YURlZmF1bHRzKClcbiAgICB0aGlzLm1ldGhvZE9yZGVyID0gb3B0aW9ucy5tZXRob2RPcmRlcjtcbiAgICB0aGlzLnBhcmFtZXRlclR5cGVzID0gb3B0aW9ucy5wYXJhbWV0ZXJUeXBlcztcblxuICAgIC8vIFZhbGlkYXRpb25cbiAgICB0aGlzLnZhbGlkYXRvciA9IF8ucGljayggb3B0aW9ucywgVmFsaWRhdGlvbi5WQUxJREFUT1JfS0VZUyApO1xuICAgIHRoaXMudmFsaWRhdG9yLnZhbGlkYXRpb25NZXNzYWdlID0gdGhpcy52YWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgfHwgYFZhbGlkYXRpb24gZmFpbGVkIElPVHlwZSBWYWxpZGF0b3I6ICR7dGhpcy50eXBlTmFtZX1gO1xuXG4gICAgdGhpcy5kZWZhdWx0RGVzZXJpYWxpemF0aW9uTWV0aG9kID0gb3B0aW9ucy5kZWZhdWx0RGVzZXJpYWxpemF0aW9uTWV0aG9kO1xuXG4gICAgaWYgKCBvcHRpb25zLnN0YXRlU2NoZW1hID09PSBudWxsIHx8IG9wdGlvbnMuc3RhdGVTY2hlbWEgaW5zdGFuY2VvZiBTdGF0ZVNjaGVtYSApIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvMjYzXG4gICAgICB0aGlzLnN0YXRlU2NoZW1hID0gb3B0aW9ucy5zdGF0ZVNjaGVtYTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBjb21wb3NpdGVTY2hlbWEgPSB0eXBlb2Ygb3B0aW9ucy5zdGF0ZVNjaGVtYSA9PT0gJ2Z1bmN0aW9uJyA/IG9wdGlvbnMuc3RhdGVTY2hlbWEoIHRoaXMgKSA6IG9wdGlvbnMuc3RhdGVTY2hlbWE7XG5cbiAgICAgIHRoaXMuc3RhdGVTY2hlbWEgPSBuZXcgU3RhdGVTY2hlbWE8VCwgU3RhdGVUeXBlPiggeyBjb21wb3NpdGVTY2hlbWE6IGNvbXBvc2l0ZVNjaGVtYSB9ICk7XG4gICAgfVxuXG4gICAgLy8gQXNzZXJ0IHRoYXQgdG9TdGF0ZU9iamVjdCBtZXRob2QgaXMgcHJvdmlkZWQgZm9yIHZhbHVlIFN0YXRlU2NoZW1hcy4gRG8gdGhpcyB3aXRoIHRoZSBmb2xsb3dpbmcgbG9naWM6XG4gICAgLy8gMS4gSXQgaXMgYWNjZXB0YWJsZSB0byBub3QgcHJvdmlkZSBhIHN0YXRlU2NoZW1hIChmb3IgSU9UeXBlcyB0aGF0IGFyZW4ndCBzdGF0ZWZ1bClcbiAgICAvLyAyLiBZb3UgbXVzdCBlaXRoZXIgcHJvdmlkZSBhIHRvU3RhdGVPYmplY3QsIG9yIGhhdmUgYSBjb21wb3NpdGUgU3RhdGVTY2hlbWEuIENvbXBvc2l0ZSBzdGF0ZSBzY2hlbWFzIHN1cHBvcnQgZGVmYXVsdCBzZXJpYWxpemF0aW9uIG1ldGhvZHMuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuc3RhdGVTY2hlbWEgfHwgKCB0b1N0YXRlT2JqZWN0U3VwcGxpZWQgfHwgdGhpcy5zdGF0ZVNjaGVtYS5pc0NvbXBvc2l0ZSgpICksXG4gICAgICAndG9TdGF0ZU9iamVjdCBtZXRob2QgbXVzdCBiZSBwcm92aWRlZCBmb3IgdmFsdWUgU3RhdGVTY2hlbWFzJyApO1xuXG4gICAgdGhpcy50b1N0YXRlT2JqZWN0ID0gKCBjb3JlT2JqZWN0OiBUICkgPT4ge1xuICAgICAgdmFsaWRhdGUoIGNvcmVPYmplY3QsIHRoaXMudmFsaWRhdG9yLCBWQUxJREFURV9PUFRJT05TX0ZBTFNFICk7XG5cbiAgICAgIGxldCB0b1N0YXRlT2JqZWN0O1xuXG4gICAgICAvLyBPbmx5IGRvIHRoaXMgbm9uLXN0YW5kYXJkIHRvU3RhdGVPYmplY3QgZnVuY3Rpb24gaWYgdGhlcmUgaXMgYSBzdGF0ZVNjaGVtYSBidXQgbm8gdG9TdGF0ZU9iamVjdCBwcm92aWRlZFxuICAgICAgaWYgKCAhdG9TdGF0ZU9iamVjdFN1cHBsaWVkICYmIHN0YXRlU2NoZW1hU3VwcGxpZWQgJiYgdGhpcy5zdGF0ZVNjaGVtYSAmJiB0aGlzLnN0YXRlU2NoZW1hLmlzQ29tcG9zaXRlKCkgKSB7XG4gICAgICAgIHRvU3RhdGVPYmplY3QgPSB0aGlzLnN0YXRlU2NoZW1hLmRlZmF1bHRUb1N0YXRlT2JqZWN0KCBjb3JlT2JqZWN0ICk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgdG9TdGF0ZU9iamVjdCA9IG9wdGlvbnMudG9TdGF0ZU9iamVjdCggY29yZU9iamVjdCApO1xuICAgICAgfVxuXG4gICAgICAvLyBWYWxpZGF0ZSwgYnV0IG9ubHkgaWYgdGhpcyBJT1R5cGUgaW5zdGFuY2UgaGFzIG1vcmUgdG8gdmFsaWRhdGUgdGhhbiB0aGUgc3VwZXJ0eXBlXG4gICAgICBpZiAoIHRvU3RhdGVPYmplY3RTdXBwbGllZCB8fCBzdGF0ZVNjaGVtYVN1cHBsaWVkICkge1xuXG4gICAgICAgIC8vIE9ubHkgdmFsaWRhdGUgdGhlIHN0YXRlT2JqZWN0IGlmIGl0IGlzIHBoZXRpb1N0YXRlOnRydWUuXG4gICAgICAgIC8vIFRoaXMgaXMgYW4gbiptIGFsZ29yaXRobSBiZWNhdXNlIGZvciBlYWNoIHRpbWUgdG9TdGF0ZU9iamVjdCBpcyBjYWxsZWQgYW5kIG5lZWRzIHZhbGlkYXRpb24sIHRoaXMudmFsaWRhdGVTdGF0ZU9iamVjdFxuICAgICAgICAvLyBsb29rcyBhbGwgdGhlIHdheSB1cCB0aGUgSU9UeXBlIGhpZXJhcmNoeS4gVGhpcyBpcyBub3QgZWZmaWNpZW50LCBidXQgZ2FpbnMgdXMgdGhlIGFiaWxpdHkgdG8gbWFrZSBzdXJlIHRoYXRcbiAgICAgICAgLy8gdGhlIHN0YXRlT2JqZWN0IGRvZXNuJ3QgaGF2ZSBhbnkgc3VwZXJmbHVvdXMsIHVuZXhwZWN0ZWQga2V5cy4gVGhlIFwibVwiIHBvcnRpb24gaXMgYmFzZWQgb24gaG93IG1hbnkgc3ViLXByb3BlcnRpZXNcbiAgICAgICAgLy8gaW4gYSBzdGF0ZSBjYWxsIGB0b1N0YXRlT2JqZWN0YCwgYW5kIHRoZSBcIm5cIiBwb3J0aW9uIGlzIGJhc2VkIG9uIGhvdyBtYW55IElPVHlwZXMgaW4gdGhlIGhpZXJhcmNoeSBkZWZpbmUgYVxuICAgICAgICAvLyB0b1N0YXRlT2JqZWN0IG9yIHN0YXRlU2NoZW1hLiBJbiB0aGUgZnV0dXJlIHdlIGNvdWxkIHBvdGVudGlhbGx5IGltcHJvdmUgcGVyZm9ybWFuY2UgYnkgaGF2aW5nIHZhbGlkYXRlU3RhdGVPYmplY3RcbiAgICAgICAgLy8gb25seSBjaGVjayBhZ2FpbnN0IHRoZSBzY2hlbWEgYXQgdGhpcyBsZXZlbCwgYnV0IHRoZW4gZXh0cmEga2V5cyBpbiB0aGUgc3RhdGVPYmplY3Qgd291bGQgbm90IGJlIGNhdWdodC4gRnJvbSB3b3JrIGRvbmUgaW4gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vaXNzdWVzLzE3NzRcbiAgICAgICAgYXNzZXJ0ICYmIHRoaXMudmFsaWRhdGVTdGF0ZU9iamVjdCggdG9TdGF0ZU9iamVjdCApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRvU3RhdGVPYmplY3Q7XG4gICAgfTtcbiAgICB0aGlzLmZyb21TdGF0ZU9iamVjdCA9IG9wdGlvbnMuZnJvbVN0YXRlT2JqZWN0O1xuICAgIHRoaXMuc3RhdGVPYmplY3RUb0NyZWF0ZUVsZW1lbnRBcmd1bWVudHMgPSBvcHRpb25zLnN0YXRlT2JqZWN0VG9DcmVhdGVFbGVtZW50QXJndW1lbnRzO1xuXG4gICAgdGhpcy5hcHBseVN0YXRlID0gKCBjb3JlT2JqZWN0OiBULCBzdGF0ZU9iamVjdDogU3RhdGVUeXBlICkgPT4ge1xuICAgICAgdmFsaWRhdGUoIGNvcmVPYmplY3QsIHRoaXMudmFsaWRhdG9yLCBWQUxJREFURV9PUFRJT05TX0ZBTFNFICk7XG5cbiAgICAgIC8vIFZhbGlkYXRlLCBidXQgb25seSBpZiB0aGlzIElPVHlwZSBpbnN0YW5jZSBoYXMgbW9yZSB0byB2YWxpZGF0ZSB0aGFuIHRoZSBzdXBlcnR5cGVcbiAgICAgIGlmICggYXBwbHlTdGF0ZVN1cHBsaWVkIHx8IHN0YXRlU2NoZW1hU3VwcGxpZWQgKSB7XG5cbiAgICAgICAgLy8gVmFsaWRhdGUgdGhhdCB0aGUgcHJvdmlkZWQgc3RhdGVPYmplY3QgaXMgb2YgdGhlIGV4cGVjdGVkIHNjaGVtYVxuICAgICAgICAvLyBOT1RFOiBDYW5ub3QgdXNlIHRoaXMudmFsaWRhdGVTdGF0ZU9iamVjdCBiZWNhdXNlIG9wdGlvbnMgYWRvcHRzIHN1cGVydHlwZS5hcHBseVN0YXRlLCB3aGljaCBpcyBib3VuZHMgdG8gdGhlXG4gICAgICAgIC8vIHBhcmVudCBJTyBUeXBlLiBUaGlzIHByZXZlbnRzIGNvcnJlY3QgdmFsaWRhdGlvbiBiZWNhdXNlIHRoZSBzdXBlcnR5cGUgZG9lc24ndCBrbm93IGFib3V0IHRoZSBzdWJ0eXBlIHNjaGVtYXMuXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3Igd2UgY2Fubm90IHR5cGUgY2hlY2sgYWdhaW5zdCBQaGV0aW9PYmplY3QgZnJvbSB0aGlzIGZpbGVcbiAgICAgICAgYXNzZXJ0ICYmIGNvcmVPYmplY3QucGhldGlvVHlwZS52YWxpZGF0ZVN0YXRlT2JqZWN0KCBzdGF0ZU9iamVjdCApO1xuICAgICAgfVxuXG4gICAgICAvLyBPbmx5IGRvIHRoaXMgbm9uLXN0YW5kYXJkIGFwcGx5U3RhdGUgZnVuY3Rpb24gZnJvbSBzdGF0ZVNjaGVtYSBpZiB0aGVyZSBpcyBhIHN0YXRlU2NoZW1hIGJ1dCBubyBhcHBseVN0YXRlIHByb3ZpZGVkXG4gICAgICBpZiAoICFhcHBseVN0YXRlU3VwcGxpZWQgJiYgc3RhdGVTY2hlbWFTdXBwbGllZCAmJiB0aGlzLnN0YXRlU2NoZW1hICYmIHRoaXMuc3RhdGVTY2hlbWEuaXNDb21wb3NpdGUoKSApIHtcbiAgICAgICAgdGhpcy5zdGF0ZVNjaGVtYS5kZWZhdWx0QXBwbHlTdGF0ZSggY29yZU9iamVjdCwgc3RhdGVPYmplY3QgYXMgQ29tcG9zaXRlU3RhdGVPYmplY3RUeXBlICk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgb3B0aW9ucy5hcHBseVN0YXRlKCBjb3JlT2JqZWN0LCBzdGF0ZU9iamVjdCApO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLmlzRnVuY3Rpb25UeXBlID0gb3B0aW9ucy5pc0Z1bmN0aW9uVHlwZTtcbiAgICB0aGlzLmFkZENoaWxkRWxlbWVudCA9IG9wdGlvbnMuYWRkQ2hpbGRFbGVtZW50O1xuXG4gICAgaWYgKCBhc3NlcnQgKSB7XG5cbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHN1cGVydHlwZSB8fCB0aGlzLnR5cGVOYW1lID09PSAnT2JqZWN0SU8nLCAnc3VwZXJ0eXBlIGlzIHJlcXVpcmVkJyApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMudHlwZU5hbWUuaW5jbHVkZXMoICcuJyApLCAnRG90cyBzaG91bGQgbm90IGFwcGVhciBpbiB0eXBlIG5hbWVzJyApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy50eXBlTmFtZS5zcGxpdCggL1s8KF0vIClbIDAgXS5lbmRzV2l0aCggUGhldGlvQ29uc3RhbnRzLklPX1RZUEVfU1VGRklYICksIGBJTyBUeXBlIG5hbWUgbXVzdCBlbmQgd2l0aCAke1BoZXRpb0NvbnN0YW50cy5JT19UWVBFX1NVRkZJWH1gICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmhhc093blByb3BlcnR5KCAndHlwZU5hbWUnICksICd0aGlzLnR5cGVOYW1lIGlzIHJlcXVpcmVkJyApO1xuXG4gICAgICAvLyBhc3NlcnQgdGhhdCBlYWNoIHB1YmxpYyBtZXRob2QgYWRoZXJlcyB0byB0aGUgZXhwZWN0ZWQgc2NoZW1hXG4gICAgICB0aGlzLm1ldGhvZHMgJiYgT2JqZWN0LnZhbHVlcyggdGhpcy5tZXRob2RzICkuZm9yRWFjaCggKCBtZXRob2RPYmplY3Q6IElPVHlwZU1ldGhvZCApID0+IHtcbiAgICAgICAgaWYgKCB0eXBlb2YgbWV0aG9kT2JqZWN0ID09PSAnb2JqZWN0JyApIHtcbiAgICAgICAgICBhc3NlcnQgJiYgbWV0aG9kT2JqZWN0Lmludm9jYWJsZUZvclJlYWRPbmx5RWxlbWVudHMgJiYgYXNzZXJ0KCB0eXBlb2YgbWV0aG9kT2JqZWN0Lmludm9jYWJsZUZvclJlYWRPbmx5RWxlbWVudHMgPT09ICdib29sZWFuJyxcbiAgICAgICAgICAgIGBpbnZvY2FibGVGb3JSZWFkT25seUVsZW1lbnRzIG11c3QgYmUgb2YgdHlwZSBib29sZWFuOiAke21ldGhvZE9iamVjdC5pbnZvY2FibGVGb3JSZWFkT25seUVsZW1lbnRzfWAgKTtcbiAgICAgICAgfVxuICAgICAgfSApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5kb2N1bWVudGF0aW9uLmxlbmd0aCA+IDAsICdkb2N1bWVudGF0aW9uIG11c3QgYmUgcHJvdmlkZWQnICk7XG5cbiAgICAgIHRoaXMubWV0aG9kcyAmJiB0aGlzLmhhc093blByb3BlcnR5KCAnbWV0aG9kT3JkZXInICkgJiYgdGhpcy5tZXRob2RPcmRlci5mb3JFYWNoKCBtZXRob2ROYW1lID0+IHtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5tZXRob2RzIVsgbWV0aG9kTmFtZSBdLCBgbWV0aG9kTmFtZSBub3QgaW4gcHVibGljIG1ldGhvZHM6ICR7bWV0aG9kTmFtZX1gICk7XG4gICAgICB9ICk7XG5cbiAgICAgIGlmICggc3VwZXJ0eXBlICkge1xuICAgICAgICBjb25zdCB0eXBlSGllcmFyY2h5ID0gc3VwZXJ0eXBlLmdldFR5cGVIaWVyYXJjaHkoKTtcbiAgICAgICAgYXNzZXJ0ICYmIHRoaXMuZXZlbnRzICYmIHRoaXMuZXZlbnRzLmZvckVhY2goIGV2ZW50ID0+IHtcblxuICAgICAgICAgIC8vIE1ha2Ugc3VyZSBldmVudHMgYXJlIG5vdCBsaXN0ZWQgYWdhaW5cbiAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhXy5zb21lKCB0eXBlSGllcmFyY2h5LCB0ID0+IHQuZXZlbnRzLmluY2x1ZGVzKCBldmVudCApICksIGBJT1R5cGUgc2hvdWxkIG5vdCBkZWNsYXJlIGV2ZW50IHRoYXQgcGFyZW50IGFsc28gaGFzOiAke2V2ZW50fWAgKTtcbiAgICAgICAgfSApO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG5cbiAgICAgICAgLy8gVGhlIHJvb3QgSU9UeXBlIG11c3Qgc3VwcGx5IGFsbCA0IHN0YXRlIG1ldGhvZHMuXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHR5cGVvZiBvcHRpb25zLnRvU3RhdGVPYmplY3QgPT09ICdmdW5jdGlvbicsICd0b1N0YXRlT2JqZWN0IG11c3QgYmUgZGVmaW5lZCcgKTtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdHlwZW9mIG9wdGlvbnMuZnJvbVN0YXRlT2JqZWN0ID09PSAnZnVuY3Rpb24nLCAnZnJvbVN0YXRlT2JqZWN0IG11c3QgYmUgZGVmaW5lZCcgKTtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdHlwZW9mIG9wdGlvbnMuc3RhdGVPYmplY3RUb0NyZWF0ZUVsZW1lbnRBcmd1bWVudHMgPT09ICdmdW5jdGlvbicsICdzdGF0ZU9iamVjdFRvQ3JlYXRlRWxlbWVudEFyZ3VtZW50cyBtdXN0IGJlIGRlZmluZWQnICk7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHR5cGVvZiBvcHRpb25zLmFwcGx5U3RhdGUgPT09ICdmdW5jdGlvbicsICdhcHBseVN0YXRlIG11c3QgYmUgZGVmaW5lZCcgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogR2V0cyBhbiBhcnJheSBvZiBJT1R5cGVzIG9mIHRoZSBzZWxmIHR5cGUgYW5kIGFsbCB0aGUgc3VwZXJ0eXBlIGFuY2VzdG9ycy5cbiAgICovXG4gIHByaXZhdGUgZ2V0VHlwZUhpZXJhcmNoeSgpOiBJT1R5cGU8dW5rbm93biwgdW5rbm93bj5bXSB7XG4gICAgY29uc3QgYXJyYXkgPSBbXTtcblxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgU3RpbGwgd29ya2luZyBvdXQgdGhpcyBzdHVmZiwgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvMjYzXG4gICAgbGV0IGlvVHlwZTogSU9UeXBlPHVua25vd24sIHVua25vd24+ID0gdGhpczsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBjb25zaXN0ZW50LXRoaXMsIEB0eXBlc2NyaXB0LWVzbGludC9uby10aGlzLWFsaWFzXG4gICAgd2hpbGUgKCBpb1R5cGUgKSB7XG4gICAgICBhcnJheS5wdXNoKCBpb1R5cGUgKTtcbiAgICAgIGlvVHlwZSA9IGlvVHlwZS5zdXBlcnR5cGUhO1xuICAgIH1cbiAgICByZXR1cm4gYXJyYXk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgSU9UeXBlIGlzIGEgc3VidHlwZSBvZiB0aGUgcGFzc2VkLWluIHR5cGUgKG9yIGlmIHRoZXkgYXJlIHRoZSBzYW1lKS5cbiAgICovXG4gIHB1YmxpYyBleHRlbmRzKCB0eXBlOiBJT1R5cGU8dW5rbm93biwgdW5rbm93bj4gKTogYm9vbGVhbiB7XG5cbiAgICAvLyBtZW1vcnktYmFzZWQgaW1wbGVtZW50YXRpb24gT0sgc2luY2UgdGhpcyBtZXRob2QgaXMgb25seSB1c2VkIGluIGFzc2VydGlvbnNcbiAgICByZXR1cm4gdGhpcy5nZXRUeXBlSGllcmFyY2h5KCkuaW5jbHVkZXMoIHR5cGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHRoZSBtZXRhZGF0YSBkZWZhdWx0cyAoZm9yIHRoZSBlbnRpcmUgSU8gVHlwZSBoaWVyYXJjaHkpXG4gICAqL1xuICBwdWJsaWMgZ2V0QWxsTWV0YWRhdGFEZWZhdWx0cygpOiBQYXJ0aWFsPFBoZXRpb09iamVjdE1ldGFkYXRhPiB7XG4gICAgcmV0dXJuIF8ubWVyZ2UoIHt9LCB0aGlzLnN1cGVydHlwZSA/IHRoaXMuc3VwZXJ0eXBlLmdldEFsbE1ldGFkYXRhRGVmYXVsdHMoKSA6IHt9LCB0aGlzLm1ldGFkYXRhRGVmYXVsdHMgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gYWxsIHRoZSBkYXRhIGRlZmF1bHRzIChmb3IgdGhlIGVudGlyZSBJTyBUeXBlIGhpZXJhcmNoeSlcbiAgICovXG4gIHB1YmxpYyBnZXRBbGxEYXRhRGVmYXVsdHMoKTogUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuICAgIHJldHVybiBfLm1lcmdlKCB7fSwgdGhpcy5zdXBlcnR5cGUgPyB0aGlzLnN1cGVydHlwZS5nZXRBbGxEYXRhRGVmYXVsdHMoKSA6IHt9LCB0aGlzLmRhdGFEZWZhdWx0cyApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBzdGF0ZU9iamVjdCAtIHRoZSBzdGF0ZU9iamVjdCB0byB2YWxpZGF0ZSBhZ2FpbnN0XG4gICAqIEBwYXJhbSB0b0Fzc2VydD1mYWxzZSAtIHdoZXRoZXIgb3Igbm90IHRvIGFzc2VydCB3aGVuIGludmFsaWRcbiAgICogQHBhcmFtIHB1YmxpY1NjaGVtYUtleXM9W11cbiAgICogQHBhcmFtIHByaXZhdGVTY2hlbWFLZXlzPVtdXG4gICAqIEByZXR1cm5zIGlmIHRoZSBzdGF0ZU9iamVjdCBpcyB2YWxpZCBvciBub3QuXG4gICAqL1xuICBwdWJsaWMgaXNTdGF0ZU9iamVjdFZhbGlkKCBzdGF0ZU9iamVjdDogU3RhdGVUeXBlLCB0b0Fzc2VydCA9IGZhbHNlLCBwdWJsaWNTY2hlbWFLZXlzOiBzdHJpbmdbXSA9IFtdLCBwcml2YXRlU2NoZW1hS2V5czogc3RyaW5nW10gPSBbXSApOiBib29sZWFuIHtcblxuICAgIC8vIFNldCB0byBmYWxzZSB3aGVuIGludmFsaWRcbiAgICBsZXQgdmFsaWQgPSB0cnVlO1xuXG4gICAgLy8gbWFrZSBzdXJlIHRoZSBzdGF0ZU9iamVjdCBoYXMgZXZlcnl0aGluZyB0aGUgc2NoZW1hIHJlcXVpcmVzIGFuZCBub3RoaW5nIG1vcmVcbiAgICBpZiAoIHRoaXMuc3RhdGVTY2hlbWEgKSB7XG4gICAgICBjb25zdCB2YWxpZFNvRmFyID0gdGhpcy5zdGF0ZVNjaGVtYS5jaGVja1N0YXRlT2JqZWN0VmFsaWQoIHN0YXRlT2JqZWN0LCB0b0Fzc2VydCwgcHVibGljU2NoZW1hS2V5cywgcHJpdmF0ZVNjaGVtYUtleXMgKTtcblxuICAgICAgLy8gbnVsbCBhcyBhIG1hcmtlciB0byBrZWVwIGNoZWNraW5nIHVwIHRoZSBoaWVyYXJjaHksIG90aGVyd2lzZSB3ZSByZWFjaGVkIG91ciBiYXNlZCBjYXNlIGJlY2F1c2UgdGhlIHN0YXRlU2NoZW1hIHdhcyBhIHZhbHVlLCBub3QgYSBjb21wb3NpdGVcbiAgICAgIGlmICggdmFsaWRTb0ZhciAhPT0gbnVsbCApIHtcbiAgICAgICAgcmV0dXJuIHZhbGlkU29GYXI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCB0aGlzLnN1cGVydHlwZSApIHtcbiAgICAgIHJldHVybiB2YWxpZCAmJiB0aGlzLnN1cGVydHlwZS5pc1N0YXRlT2JqZWN0VmFsaWQoIHN0YXRlT2JqZWN0LCB0b0Fzc2VydCwgcHVibGljU2NoZW1hS2V5cywgcHJpdmF0ZVNjaGVtYUtleXMgKTtcbiAgICB9XG5cbiAgICAvLyBXaGVuIHdlIHJlYWNoIHRoZSByb290LCBtYWtlIHN1cmUgdGhlcmUgaXNuJ3QgYW55dGhpbmcgaW4gdGhlIHN0YXRlT2JqZWN0IHRoYXQgaXNuJ3QgZGVzY3JpYmVkIGJ5IGEgc2NoZW1hXG4gICAgaWYgKCAhdGhpcy5zdXBlcnR5cGUgJiYgc3RhdGVPYmplY3QgJiYgdHlwZW9mIHN0YXRlT2JqZWN0ICE9PSAnc3RyaW5nJyAmJiAhQXJyYXkuaXNBcnJheSggc3RhdGVPYmplY3QgKSApIHtcblxuICAgICAgY29uc3QgY2hlY2sgPSAoIHR5cGU6ICdwdWJsaWMnIHwgJ3ByaXZhdGUnLCBrZXk6IHN0cmluZyApID0+IHtcbiAgICAgICAgY29uc3Qga2V5cyA9IHR5cGUgPT09ICdwdWJsaWMnID8gcHVibGljU2NoZW1hS2V5cyA6IHByaXZhdGVTY2hlbWFLZXlzO1xuICAgICAgICBjb25zdCBrZXlWYWxpZCA9IGtleXMuaW5jbHVkZXMoIGtleSApO1xuICAgICAgICBpZiAoICFrZXlWYWxpZCApIHtcbiAgICAgICAgICB2YWxpZCA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGFzc2VydCAmJiB0b0Fzc2VydCAmJiBhc3NlcnQoIGtleVZhbGlkLCBgc3RhdGVPYmplY3QgcHJvdmlkZWQgYSAke3R5cGV9IGtleSB0aGF0IGlzIG5vdCBpbiB0aGUgc2NoZW1hOiAke2tleX1gICk7XG4gICAgICB9O1xuXG4gICAgICAvLyBWaXNpdCB0aGUgcHVibGljIHN0YXRlXG4gICAgICBPYmplY3Qua2V5cyggc3RhdGVPYmplY3QgKS5maWx0ZXIoIGtleSA9PiBrZXkgIT09ICdfcHJpdmF0ZScgKS5mb3JFYWNoKCBrZXkgPT4gY2hlY2soICdwdWJsaWMnLCBrZXkgKSApO1xuXG4gICAgICAvLyBWaXNpdCB0aGUgcHJpdmF0ZSBzdGF0ZSwgaWYgYW55XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIHN0YXRlT2JqZWN0cyBjYW4gdGFrZSBhIHZhcmlldHkgb2YgZm9ybXMsIHRoZXkgZG9uJ3QgaGF2ZSB0byBiZSBhIHJlY29yZCwgdGh1cywgaXQgaXMgY2hhbGxlbmdpbmcgdG8gYmUgZ3JhY2VmdWwgdG8gYSBgX3ByaXZhdGVgIGtleVxuICAgICAgc3RhdGVPYmplY3QuX3ByaXZhdGUgJiYgT2JqZWN0LmtleXMoIHN0YXRlT2JqZWN0Ll9wcml2YXRlICkuZm9yRWFjaCgga2V5ID0+IGNoZWNrKCAncHJpdmF0ZScsIGtleSApICk7XG5cbiAgICAgIHJldHVybiB2YWxpZDtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQXNzZXJ0IGlmIHRoZSBwcm92aWRlZCBzdGF0ZU9iamVjdCBpcyBub3QgdmFsaWQgdG8gdGhpcyBJT1R5cGUncyBzdGF0ZVNjaGVtYVxuICAgKi9cbiAgcHVibGljIHZhbGlkYXRlU3RhdGVPYmplY3QoIHN0YXRlT2JqZWN0OiBTdGF0ZVR5cGUgKTogdm9pZCB7XG4gICAgdGhpcy5pc1N0YXRlT2JqZWN0VmFsaWQoIHN0YXRlT2JqZWN0LCB0cnVlICk7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy50eXBlTmFtZTtcbiAgfVxufVxuXG4vLyBkZWZhdWx0IHN0YXRlIHZhbHVlXG5jb25zdCBERUZBVUxUX1NUQVRFID0gbnVsbDtcblxuSU9UeXBlLk9iamVjdElPID0gbmV3IElPVHlwZTxQaGV0aW9PYmplY3QsIG51bGw+KCBUYW5kZW1Db25zdGFudHMuT0JKRUNUX0lPX1RZUEVfTkFNRSwge1xuICBpc1ZhbGlkVmFsdWU6ICgpID0+IHRydWUsXG4gIHN1cGVydHlwZTogbnVsbCxcbiAgZG9jdW1lbnRhdGlvbjogJ1RoZSByb290IG9mIHRoZSBJTyBUeXBlIGhpZXJhcmNoeScsXG4gIHRvU3RhdGVPYmplY3Q6ICggY29yZU9iamVjdDogUGhldGlvT2JqZWN0ICkgPT4ge1xuXG4gICAgaWYgKCBwaGV0ICYmIHBoZXQudGFuZGVtICYmIHBoZXQudGFuZGVtLlRhbmRlbS5WQUxJREFUSU9OICkge1xuXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjb3JlT2JqZWN0LnRhbmRlbSwgJ2NvcmVPYmplY3QgbXVzdCBiZSBQaEVULWlPIG9iamVjdCcgKTtcblxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIWNvcmVPYmplY3QucGhldGlvU3RhdGUsXG4gICAgICAgIGBmZWxsIGJhY2sgdG8gcm9vdCBzZXJpYWxpemF0aW9uIHN0YXRlIGZvciAke2NvcmVPYmplY3QudGFuZGVtLnBoZXRpb0lEfS4gUG90ZW50aWFsIHNvbHV0aW9uczpcbiAgICAgICAgICogbWFyayB0aGUgdHlwZSBhcyBwaGV0aW9TdGF0ZTogZmFsc2VcbiAgICAgICAgICogY3JlYXRlIGEgY3VzdG9tIHRvU3RhdGVPYmplY3QgbWV0aG9kIGluIHlvdXIgSU8gVHlwZVxuICAgICAgICAgKiBwZXJoYXBzIHlvdSBoYXZlIGV2ZXJ5dGhpbmcgcmlnaHQsIGJ1dCBmb3Jnb3QgdG8gcGFzcyBpbiB0aGUgSU9UeXBlIHZpYSBwaGV0aW9UeXBlIGluIHRoZSBjb25zdHJ1Y3RvcmAgKTtcbiAgICB9XG4gICAgcmV0dXJuIERFRkFVTFRfU1RBVEU7XG4gIH0sXG4gIGZyb21TdGF0ZU9iamVjdDogKCkgPT4ge1xuICAgIHRocm93IG5ldyBFcnJvciggJ09iamVjdElPLmZyb21TdGF0ZU9iamVjdCBzaG91bGQgbm90IGJlIGNhbGxlZCcgKTtcbiAgfSxcbiAgc3RhdGVPYmplY3RUb0NyZWF0ZUVsZW1lbnRBcmd1bWVudHM6IHN0YXRlT2JqZWN0ID0+IFtdLFxuICBhcHBseVN0YXRlOiBfLm5vb3AsXG4gIG1ldGFkYXRhRGVmYXVsdHM6IFRhbmRlbUNvbnN0YW50cy5QSEVUX0lPX09CSkVDVF9NRVRBREFUQV9ERUZBVUxUUyxcbiAgZGF0YURlZmF1bHRzOiB7XG4gICAgaW5pdGlhbFN0YXRlOiBERUZBVUxUX1NUQVRFXG4gIH0sXG4gIHN0YXRlU2NoZW1hOiBudWxsXG59ICk7XG5cbnRhbmRlbU5hbWVzcGFjZS5yZWdpc3RlciggJ0lPVHlwZScsIElPVHlwZSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLDhCQUE4QjtBQUNuRCxPQUFPQyxVQUFVLE1BQXFCLGdDQUFnQztBQUN0RSxPQUFPQyxTQUFTLE1BQU0sb0NBQW9DO0FBQzFELE9BQU9DLGVBQWUsTUFBTSx1QkFBdUI7QUFDbkQsT0FBT0MsZUFBZSxNQUFnQyx1QkFBdUI7QUFDN0UsT0FBT0MsZUFBZSxNQUFNLHVCQUF1QjtBQUNuRCxPQUFPQyxXQUFXLE1BQXFELGtCQUFrQjtBQUt6RjtBQUNBLE1BQU1DLHNCQUFzQixHQUFHO0VBQUVDLGlCQUFpQixFQUFFO0FBQU0sQ0FBQzs7QUFFM0Q7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsZUFBZSxHQUFLQyxVQUFrQixJQUFjO0VBQ3hELE1BQU1DLEtBQUssR0FBR0QsVUFBVSxDQUFDRSxPQUFPLENBQUVULGVBQWUsQ0FBQ1UsY0FBYyxDQUFFO0VBQ2xFQyxNQUFNLElBQUlBLE1BQU0sQ0FBRUgsS0FBSyxJQUFJLENBQUMsRUFBRSwrQkFBK0IsQ0FBRTtFQUMvRCxPQUFPRCxVQUFVLENBQUNLLFNBQVMsQ0FBRSxDQUFDLEVBQUVKLEtBQUssQ0FBRTtBQUN6QyxDQUFDO0FBdUhEO0FBQ0EsZUFBZSxNQUFNSyxNQUFNLENBQTJCO0VBQUU7O0VBYzhCOztFQVVwRjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNTQyxXQUFXQSxDQUFrQkMsUUFBZ0IsRUFBRUMsZUFBNEMsRUFBRztJQUFBLEtBQWpFRCxRQUFnQixHQUFoQkEsUUFBZ0I7SUFFbEQ7SUFDQSxNQUFNRSxTQUFTLEdBQUdELGVBQWUsQ0FBQ0MsU0FBUyxJQUFJSixNQUFNLENBQUNLLFFBQVE7SUFDOUQsTUFBTUMscUJBQXFCLEdBQUcsQ0FBQyxDQUFHSCxlQUFlLENBQUNJLGFBQWU7SUFDakUsTUFBTUMsa0JBQWtCLEdBQUcsQ0FBQyxDQUFHTCxlQUFlLENBQUNNLFVBQVk7SUFDM0QsTUFBTUMsbUJBQW1CLEdBQUcsQ0FBQyxDQUFHUCxlQUFlLENBQUNRLFdBQWE7SUFFN0QsTUFBTUMsT0FBTyxHQUFHMUIsU0FBUyxFQUEwRCxDQUFFO01BRW5Ga0IsU0FBUyxFQUFFSixNQUFNLENBQUNLLFFBQVE7TUFDMUJRLE9BQU8sRUFBRSxDQUFDLENBQUM7TUFDWEMsTUFBTSxFQUFFLEVBQUU7TUFDVkMsZ0JBQWdCLEVBQUUsQ0FBQyxDQUFDO01BRXBCO01BQ0FDLFlBQVksRUFBRSxDQUFDLENBQUM7TUFDaEJDLFdBQVcsRUFBRSxFQUFFO01BQ2ZDLGNBQWMsRUFBRSxFQUFFO01BQ2xCQyxhQUFhLEVBQUcsZUFBYzFCLGVBQWUsQ0FBRVMsUUFBUSxDQUFHLEVBQUM7TUFDM0RrQixjQUFjLEVBQUUsS0FBSztNQUVyQjs7TUFFQWIsYUFBYSxFQUFFSCxTQUFTLElBQUlBLFNBQVMsQ0FBQ0csYUFBYTtNQUNuRGMsZUFBZSxFQUFFakIsU0FBUyxJQUFJQSxTQUFTLENBQUNpQixlQUFlO01BQ3ZEQyxtQ0FBbUMsRUFBRWxCLFNBQVMsSUFBSUEsU0FBUyxDQUFDa0IsbUNBQW1DO01BQy9GYixVQUFVLEVBQUVMLFNBQVMsSUFBSUEsU0FBUyxDQUFDSyxVQUFVO01BRTdDRSxXQUFXLEVBQUUsSUFBSTtNQUNqQlksNEJBQTRCLEVBQUUsaUJBQWlCO01BQy9DQyxlQUFlLEVBQUVwQixTQUFTLElBQUlBLFNBQVMsQ0FBQ29CO0lBQzFDLENBQUMsRUFBRXJCLGVBQWUsQ0FBRTtJQUVwQixJQUFLTCxNQUFNLElBQUlNLFNBQVMsRUFBRztNQUN2QnFCLE1BQU0sQ0FBQ0MsSUFBSSxDQUFFZCxPQUFPLENBQUNHLGdCQUFnQixDQUFFLENBQXVDWSxPQUFPLENBQUVDLGtCQUFrQixJQUFJO1FBQzdHOUIsTUFBTSxJQUFJTSxTQUFTLENBQUN5QixzQkFBc0IsRUFBRSxDQUFDQyxjQUFjLENBQUVGLGtCQUFrQixDQUFFLElBQ2pGOUIsTUFBTSxDQUFFTSxTQUFTLENBQUN5QixzQkFBc0IsRUFBRSxDQUFFRCxrQkFBa0IsQ0FBRSxLQUFLaEIsT0FBTyxDQUFDRyxnQkFBZ0IsQ0FBRWEsa0JBQWtCLENBQUUsRUFDaEgsR0FBRUEsa0JBQW1CLDJFQUEwRSxDQUFFO01BQ3RHLENBQUMsQ0FBRTtJQUNMO0lBQ0EsSUFBSSxDQUFDeEIsU0FBUyxHQUFHQSxTQUFTO0lBQzFCLElBQUksQ0FBQ2UsYUFBYSxHQUFHUCxPQUFPLENBQUNPLGFBQWE7SUFDMUMsSUFBSSxDQUFDTixPQUFPLEdBQUdELE9BQU8sQ0FBQ0MsT0FBTztJQUM5QixJQUFJLENBQUNDLE1BQU0sR0FBR0YsT0FBTyxDQUFDRSxNQUFNO0lBQzVCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUdILE9BQU8sQ0FBQ0csZ0JBQWdCLENBQUMsQ0FBQztJQUNsRCxJQUFJLENBQUNDLFlBQVksR0FBR0osT0FBTyxDQUFDSSxZQUFZLENBQUMsQ0FBQztJQUMxQyxJQUFJLENBQUNDLFdBQVcsR0FBR0wsT0FBTyxDQUFDSyxXQUFXO0lBQ3RDLElBQUksQ0FBQ0MsY0FBYyxHQUFHTixPQUFPLENBQUNNLGNBQWM7O0lBRTVDO0lBQ0EsSUFBSSxDQUFDYSxTQUFTLEdBQUdDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFckIsT0FBTyxFQUFFM0IsVUFBVSxDQUFDaUQsY0FBYyxDQUFFO0lBQzdELElBQUksQ0FBQ0gsU0FBUyxDQUFDSSxpQkFBaUIsR0FBRyxJQUFJLENBQUNKLFNBQVMsQ0FBQ0ksaUJBQWlCLElBQUssdUNBQXNDLElBQUksQ0FBQ2pDLFFBQVMsRUFBQztJQUU3SCxJQUFJLENBQUNxQiw0QkFBNEIsR0FBR1gsT0FBTyxDQUFDVyw0QkFBNEI7SUFFeEUsSUFBS1gsT0FBTyxDQUFDRCxXQUFXLEtBQUssSUFBSSxJQUFJQyxPQUFPLENBQUNELFdBQVcsWUFBWXJCLFdBQVcsRUFBRztNQUNoRjtNQUNBLElBQUksQ0FBQ3FCLFdBQVcsR0FBR0MsT0FBTyxDQUFDRCxXQUFXO0lBQ3hDLENBQUMsTUFDSTtNQUNILE1BQU15QixlQUFlLEdBQUcsT0FBT3hCLE9BQU8sQ0FBQ0QsV0FBVyxLQUFLLFVBQVUsR0FBR0MsT0FBTyxDQUFDRCxXQUFXLENBQUUsSUFBSSxDQUFFLEdBQUdDLE9BQU8sQ0FBQ0QsV0FBVztNQUVySCxJQUFJLENBQUNBLFdBQVcsR0FBRyxJQUFJckIsV0FBVyxDQUFnQjtRQUFFOEMsZUFBZSxFQUFFQTtNQUFnQixDQUFDLENBQUU7SUFDMUY7O0lBRUE7SUFDQTtJQUNBO0lBQ0F0QyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDLElBQUksQ0FBQ2EsV0FBVyxJQUFNTCxxQkFBcUIsSUFBSSxJQUFJLENBQUNLLFdBQVcsQ0FBQzBCLFdBQVcsRUFBSSxFQUNoRyw4REFBOEQsQ0FBRTtJQUVsRSxJQUFJLENBQUM5QixhQUFhLEdBQUsrQixVQUFhLElBQU07TUFDeEN0RCxRQUFRLENBQUVzRCxVQUFVLEVBQUUsSUFBSSxDQUFDUCxTQUFTLEVBQUV4QyxzQkFBc0IsQ0FBRTtNQUU5RCxJQUFJZ0IsYUFBYTs7TUFFakI7TUFDQSxJQUFLLENBQUNELHFCQUFxQixJQUFJSSxtQkFBbUIsSUFBSSxJQUFJLENBQUNDLFdBQVcsSUFBSSxJQUFJLENBQUNBLFdBQVcsQ0FBQzBCLFdBQVcsRUFBRSxFQUFHO1FBQ3pHOUIsYUFBYSxHQUFHLElBQUksQ0FBQ0ksV0FBVyxDQUFDNEIsb0JBQW9CLENBQUVELFVBQVUsQ0FBRTtNQUNyRSxDQUFDLE1BQ0k7UUFDSC9CLGFBQWEsR0FBR0ssT0FBTyxDQUFDTCxhQUFhLENBQUUrQixVQUFVLENBQUU7TUFDckQ7O01BRUE7TUFDQSxJQUFLaEMscUJBQXFCLElBQUlJLG1CQUFtQixFQUFHO1FBRWxEO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0FaLE1BQU0sSUFBSSxJQUFJLENBQUMwQyxtQkFBbUIsQ0FBRWpDLGFBQWEsQ0FBRTtNQUNyRDtNQUNBLE9BQU9BLGFBQWE7SUFDdEIsQ0FBQztJQUNELElBQUksQ0FBQ2MsZUFBZSxHQUFHVCxPQUFPLENBQUNTLGVBQWU7SUFDOUMsSUFBSSxDQUFDQyxtQ0FBbUMsR0FBR1YsT0FBTyxDQUFDVSxtQ0FBbUM7SUFFdEYsSUFBSSxDQUFDYixVQUFVLEdBQUcsQ0FBRTZCLFVBQWEsRUFBRUcsV0FBc0IsS0FBTTtNQUM3RHpELFFBQVEsQ0FBRXNELFVBQVUsRUFBRSxJQUFJLENBQUNQLFNBQVMsRUFBRXhDLHNCQUFzQixDQUFFOztNQUU5RDtNQUNBLElBQUtpQixrQkFBa0IsSUFBSUUsbUJBQW1CLEVBQUc7UUFFL0M7UUFDQTtRQUNBO1FBQ0E7UUFDQVosTUFBTSxJQUFJd0MsVUFBVSxDQUFDSSxVQUFVLENBQUNGLG1CQUFtQixDQUFFQyxXQUFXLENBQUU7TUFDcEU7O01BRUE7TUFDQSxJQUFLLENBQUNqQyxrQkFBa0IsSUFBSUUsbUJBQW1CLElBQUksSUFBSSxDQUFDQyxXQUFXLElBQUksSUFBSSxDQUFDQSxXQUFXLENBQUMwQixXQUFXLEVBQUUsRUFBRztRQUN0RyxJQUFJLENBQUMxQixXQUFXLENBQUNnQyxpQkFBaUIsQ0FBRUwsVUFBVSxFQUFFRyxXQUFXLENBQThCO01BQzNGLENBQUMsTUFDSTtRQUNIN0IsT0FBTyxDQUFDSCxVQUFVLENBQUU2QixVQUFVLEVBQUVHLFdBQVcsQ0FBRTtNQUMvQztJQUNGLENBQUM7SUFFRCxJQUFJLENBQUNyQixjQUFjLEdBQUdSLE9BQU8sQ0FBQ1EsY0FBYztJQUM1QyxJQUFJLENBQUNJLGVBQWUsR0FBR1osT0FBTyxDQUFDWSxlQUFlO0lBRTlDLElBQUsxQixNQUFNLEVBQUc7TUFFWkEsTUFBTSxJQUFJQSxNQUFNLENBQUVNLFNBQVMsSUFBSSxJQUFJLENBQUNGLFFBQVEsS0FBSyxVQUFVLEVBQUUsdUJBQXVCLENBQUU7TUFDdEZKLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUMsSUFBSSxDQUFDSSxRQUFRLENBQUMwQyxRQUFRLENBQUUsR0FBRyxDQUFFLEVBQUUsc0NBQXNDLENBQUU7TUFDMUY5QyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxJQUFJLENBQUNJLFFBQVEsQ0FBQzJDLEtBQUssQ0FBRSxNQUFNLENBQUUsQ0FBRSxDQUFDLENBQUUsQ0FBQ0MsUUFBUSxDQUFFM0QsZUFBZSxDQUFDVSxjQUFjLENBQUUsRUFBRyw4QkFBNkJWLGVBQWUsQ0FBQ1UsY0FBZSxFQUFDLENBQUU7TUFDaktDLE1BQU0sSUFBSUEsTUFBTSxDQUFFLElBQUksQ0FBQ2dDLGNBQWMsQ0FBRSxVQUFVLENBQUUsRUFBRSwyQkFBMkIsQ0FBRTs7TUFFbEY7TUFDQSxJQUFJLENBQUNqQixPQUFPLElBQUlZLE1BQU0sQ0FBQ3NCLE1BQU0sQ0FBRSxJQUFJLENBQUNsQyxPQUFPLENBQUUsQ0FBQ2MsT0FBTyxDQUFJcUIsWUFBMEIsSUFBTTtRQUN2RixJQUFLLE9BQU9BLFlBQVksS0FBSyxRQUFRLEVBQUc7VUFDdENsRCxNQUFNLElBQUlrRCxZQUFZLENBQUNDLDRCQUE0QixJQUFJbkQsTUFBTSxDQUFFLE9BQU9rRCxZQUFZLENBQUNDLDRCQUE0QixLQUFLLFNBQVMsRUFDMUgseURBQXdERCxZQUFZLENBQUNDLDRCQUE2QixFQUFDLENBQUU7UUFDMUc7TUFDRixDQUFDLENBQUU7TUFDSG5ELE1BQU0sSUFBSUEsTUFBTSxDQUFFLElBQUksQ0FBQ3FCLGFBQWEsQ0FBQytCLE1BQU0sR0FBRyxDQUFDLEVBQUUsZ0NBQWdDLENBQUU7TUFFbkYsSUFBSSxDQUFDckMsT0FBTyxJQUFJLElBQUksQ0FBQ2lCLGNBQWMsQ0FBRSxhQUFhLENBQUUsSUFBSSxJQUFJLENBQUNiLFdBQVcsQ0FBQ1UsT0FBTyxDQUFFd0IsVUFBVSxJQUFJO1FBQzlGckQsTUFBTSxJQUFJQSxNQUFNLENBQUUsSUFBSSxDQUFDZSxPQUFPLENBQUdzQyxVQUFVLENBQUUsRUFBRyxxQ0FBb0NBLFVBQVcsRUFBQyxDQUFFO01BQ3BHLENBQUMsQ0FBRTtNQUVILElBQUsvQyxTQUFTLEVBQUc7UUFDZixNQUFNZ0QsYUFBYSxHQUFHaEQsU0FBUyxDQUFDaUQsZ0JBQWdCLEVBQUU7UUFDbER2RCxNQUFNLElBQUksSUFBSSxDQUFDZ0IsTUFBTSxJQUFJLElBQUksQ0FBQ0EsTUFBTSxDQUFDYSxPQUFPLENBQUUyQixLQUFLLElBQUk7VUFFckQ7VUFDQXhELE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUNrQyxDQUFDLENBQUN1QixJQUFJLENBQUVILGFBQWEsRUFBRUksQ0FBQyxJQUFJQSxDQUFDLENBQUMxQyxNQUFNLENBQUM4QixRQUFRLENBQUVVLEtBQUssQ0FBRSxDQUFFLEVBQUcseURBQXdEQSxLQUFNLEVBQUMsQ0FBRTtRQUNqSixDQUFDLENBQUU7TUFDTCxDQUFDLE1BQ0k7UUFFSDtRQUNBeEQsTUFBTSxJQUFJQSxNQUFNLENBQUUsT0FBT2MsT0FBTyxDQUFDTCxhQUFhLEtBQUssVUFBVSxFQUFFLCtCQUErQixDQUFFO1FBQ2hHVCxNQUFNLElBQUlBLE1BQU0sQ0FBRSxPQUFPYyxPQUFPLENBQUNTLGVBQWUsS0FBSyxVQUFVLEVBQUUsaUNBQWlDLENBQUU7UUFDcEd2QixNQUFNLElBQUlBLE1BQU0sQ0FBRSxPQUFPYyxPQUFPLENBQUNVLG1DQUFtQyxLQUFLLFVBQVUsRUFBRSxxREFBcUQsQ0FBRTtRQUM1SXhCLE1BQU0sSUFBSUEsTUFBTSxDQUFFLE9BQU9jLE9BQU8sQ0FBQ0gsVUFBVSxLQUFLLFVBQVUsRUFBRSw0QkFBNEIsQ0FBRTtNQUM1RjtJQUNGO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ1U0QyxnQkFBZ0JBLENBQUEsRUFBK0I7SUFDckQsTUFBTUksS0FBSyxHQUFHLEVBQUU7O0lBRWhCO0lBQ0EsSUFBSUMsTUFBZ0MsR0FBRyxJQUFJLENBQUMsQ0FBQztJQUM3QyxPQUFRQSxNQUFNLEVBQUc7TUFDZkQsS0FBSyxDQUFDRSxJQUFJLENBQUVELE1BQU0sQ0FBRTtNQUNwQkEsTUFBTSxHQUFHQSxNQUFNLENBQUN0RCxTQUFVO0lBQzVCO0lBQ0EsT0FBT3FELEtBQUs7RUFDZDs7RUFFQTtBQUNGO0FBQ0E7RUFDU0csT0FBT0EsQ0FBRUMsSUFBOEIsRUFBWTtJQUV4RDtJQUNBLE9BQU8sSUFBSSxDQUFDUixnQkFBZ0IsRUFBRSxDQUFDVCxRQUFRLENBQUVpQixJQUFJLENBQUU7RUFDakQ7O0VBRUE7QUFDRjtBQUNBO0VBQ1NoQyxzQkFBc0JBLENBQUEsRUFBa0M7SUFDN0QsT0FBT0csQ0FBQyxDQUFDOEIsS0FBSyxDQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQzFELFNBQVMsR0FBRyxJQUFJLENBQUNBLFNBQVMsQ0FBQ3lCLHNCQUFzQixFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDZCxnQkFBZ0IsQ0FBRTtFQUM1Rzs7RUFFQTtBQUNGO0FBQ0E7RUFDU2dELGtCQUFrQkEsQ0FBQSxFQUE0QjtJQUNuRCxPQUFPL0IsQ0FBQyxDQUFDOEIsS0FBSyxDQUFFLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQzFELFNBQVMsR0FBRyxJQUFJLENBQUNBLFNBQVMsQ0FBQzJELGtCQUFrQixFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDL0MsWUFBWSxDQUFFO0VBQ3BHOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NnRCxrQkFBa0JBLENBQUV2QixXQUFzQixFQUFFd0IsUUFBUSxHQUFHLEtBQUssRUFBRUMsZ0JBQTBCLEdBQUcsRUFBRSxFQUFFQyxpQkFBMkIsR0FBRyxFQUFFLEVBQVk7SUFFaEo7SUFDQSxJQUFJQyxLQUFLLEdBQUcsSUFBSTs7SUFFaEI7SUFDQSxJQUFLLElBQUksQ0FBQ3pELFdBQVcsRUFBRztNQUN0QixNQUFNMEQsVUFBVSxHQUFHLElBQUksQ0FBQzFELFdBQVcsQ0FBQzJELHFCQUFxQixDQUFFN0IsV0FBVyxFQUFFd0IsUUFBUSxFQUFFQyxnQkFBZ0IsRUFBRUMsaUJBQWlCLENBQUU7O01BRXZIO01BQ0EsSUFBS0UsVUFBVSxLQUFLLElBQUksRUFBRztRQUN6QixPQUFPQSxVQUFVO01BQ25CO0lBQ0Y7SUFFQSxJQUFLLElBQUksQ0FBQ2pFLFNBQVMsRUFBRztNQUNwQixPQUFPZ0UsS0FBSyxJQUFJLElBQUksQ0FBQ2hFLFNBQVMsQ0FBQzRELGtCQUFrQixDQUFFdkIsV0FBVyxFQUFFd0IsUUFBUSxFQUFFQyxnQkFBZ0IsRUFBRUMsaUJBQWlCLENBQUU7SUFDakg7O0lBRUE7SUFDQSxJQUFLLENBQUMsSUFBSSxDQUFDL0QsU0FBUyxJQUFJcUMsV0FBVyxJQUFJLE9BQU9BLFdBQVcsS0FBSyxRQUFRLElBQUksQ0FBQzhCLEtBQUssQ0FBQ0MsT0FBTyxDQUFFL0IsV0FBVyxDQUFFLEVBQUc7TUFFeEcsTUFBTWdDLEtBQUssR0FBR0EsQ0FBRVosSUFBMEIsRUFBRWEsR0FBVyxLQUFNO1FBQzNELE1BQU1oRCxJQUFJLEdBQUdtQyxJQUFJLEtBQUssUUFBUSxHQUFHSyxnQkFBZ0IsR0FBR0MsaUJBQWlCO1FBQ3JFLE1BQU1RLFFBQVEsR0FBR2pELElBQUksQ0FBQ2tCLFFBQVEsQ0FBRThCLEdBQUcsQ0FBRTtRQUNyQyxJQUFLLENBQUNDLFFBQVEsRUFBRztVQUNmUCxLQUFLLEdBQUcsS0FBSztRQUNmO1FBQ0F0RSxNQUFNLElBQUltRSxRQUFRLElBQUluRSxNQUFNLENBQUU2RSxRQUFRLEVBQUcsMEJBQXlCZCxJQUFLLG1DQUFrQ2EsR0FBSSxFQUFDLENBQUU7TUFDbEgsQ0FBQzs7TUFFRDtNQUNBakQsTUFBTSxDQUFDQyxJQUFJLENBQUVlLFdBQVcsQ0FBRSxDQUFDbUMsTUFBTSxDQUFFRixHQUFHLElBQUlBLEdBQUcsS0FBSyxVQUFVLENBQUUsQ0FBQy9DLE9BQU8sQ0FBRStDLEdBQUcsSUFBSUQsS0FBSyxDQUFFLFFBQVEsRUFBRUMsR0FBRyxDQUFFLENBQUU7O01BRXZHO01BQ0E7TUFDQWpDLFdBQVcsQ0FBQ29DLFFBQVEsSUFBSXBELE1BQU0sQ0FBQ0MsSUFBSSxDQUFFZSxXQUFXLENBQUNvQyxRQUFRLENBQUUsQ0FBQ2xELE9BQU8sQ0FBRStDLEdBQUcsSUFBSUQsS0FBSyxDQUFFLFNBQVMsRUFBRUMsR0FBRyxDQUFFLENBQUU7TUFFckcsT0FBT04sS0FBSztJQUNkO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0VBQ1M1QixtQkFBbUJBLENBQUVDLFdBQXNCLEVBQVM7SUFDekQsSUFBSSxDQUFDdUIsa0JBQWtCLENBQUV2QixXQUFXLEVBQUUsSUFBSSxDQUFFO0VBQzlDO0VBRU9xQyxRQUFRQSxDQUFBLEVBQVc7SUFDeEIsT0FBTyxJQUFJLENBQUM1RSxRQUFRO0VBQ3RCO0FBQ0Y7O0FBRUE7QUFDQSxNQUFNNkUsYUFBYSxHQUFHLElBQUk7QUFFMUIvRSxNQUFNLENBQUNLLFFBQVEsR0FBRyxJQUFJTCxNQUFNLENBQXNCWixlQUFlLENBQUM0RixtQkFBbUIsRUFBRTtFQUNyRkMsWUFBWSxFQUFFQSxDQUFBLEtBQU0sSUFBSTtFQUN4QjdFLFNBQVMsRUFBRSxJQUFJO0VBQ2ZlLGFBQWEsRUFBRSxtQ0FBbUM7RUFDbERaLGFBQWEsRUFBSStCLFVBQXdCLElBQU07SUFFN0MsSUFBSzRDLElBQUksSUFBSUEsSUFBSSxDQUFDQyxNQUFNLElBQUlELElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxNQUFNLENBQUNDLFVBQVUsRUFBRztNQUUxRHZGLE1BQU0sSUFBSUEsTUFBTSxDQUFFd0MsVUFBVSxDQUFDNkMsTUFBTSxFQUFFLG1DQUFtQyxDQUFFO01BRTFFckYsTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQ3dDLFVBQVUsQ0FBQ2dELFdBQVcsRUFDdEMsNkNBQTRDaEQsVUFBVSxDQUFDNkMsTUFBTSxDQUFDSSxRQUFTO0FBQ2hGO0FBQ0E7QUFDQSxpSEFBaUgsQ0FBRTtJQUMvRztJQUNBLE9BQU9SLGFBQWE7RUFDdEIsQ0FBQztFQUNEMUQsZUFBZSxFQUFFQSxDQUFBLEtBQU07SUFDckIsTUFBTSxJQUFJbUUsS0FBSyxDQUFFLCtDQUErQyxDQUFFO0VBQ3BFLENBQUM7RUFDRGxFLG1DQUFtQyxFQUFFbUIsV0FBVyxJQUFJLEVBQUU7RUFDdERoQyxVQUFVLEVBQUV1QixDQUFDLENBQUN5RCxJQUFJO0VBQ2xCMUUsZ0JBQWdCLEVBQUUzQixlQUFlLENBQUNzRyxnQ0FBZ0M7RUFDbEUxRSxZQUFZLEVBQUU7SUFDWjJFLFlBQVksRUFBRVo7RUFDaEIsQ0FBQztFQUNEcEUsV0FBVyxFQUFFO0FBQ2YsQ0FBQyxDQUFFO0FBRUh0QixlQUFlLENBQUN1RyxRQUFRLENBQUUsUUFBUSxFQUFFNUYsTUFBTSxDQUFFIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/ValueIO.js
// Copyright 2021-2022, University of Colorado Boulder




/**
 * IO Type that uses value semantics for toStateObject/fromStateObject
 * @author Sam Reid (PhET Interactive Simulations)
 */
const ValueIO = new IOType('ValueIO', {
  isValidValue: _.stubTrue,
  supertype: IOType.ObjectIO,
  toStateObject: coreObject => coreObject,
  fromStateObject: stateObject => stateObject,
  stateSchema: StateSchema.asValue('*', {
    isValidValue: _.stubTrue
  })
});
tandemNamespace.register('ValueIO', ValueIO);
/* harmony default export */ const types_ValueIO = (ValueIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJTdGF0ZVNjaGVtYSIsIlZhbHVlSU8iLCJpc1ZhbGlkVmFsdWUiLCJfIiwic3R1YlRydWUiLCJzdXBlcnR5cGUiLCJPYmplY3RJTyIsInRvU3RhdGVPYmplY3QiLCJjb3JlT2JqZWN0IiwiZnJvbVN0YXRlT2JqZWN0Iiwic3RhdGVPYmplY3QiLCJzdGF0ZVNjaGVtYSIsImFzVmFsdWUiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlZhbHVlSU8udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbmltcG9ydCB0YW5kZW1OYW1lc3BhY2UgZnJvbSAnLi4vdGFuZGVtTmFtZXNwYWNlLmpzJztcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi9JT1R5cGUuanMnO1xuaW1wb3J0IFN0YXRlU2NoZW1hIGZyb20gJy4vU3RhdGVTY2hlbWEuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5cbi8qKlxuICogSU8gVHlwZSB0aGF0IHVzZXMgdmFsdWUgc2VtYW50aWNzIGZvciB0b1N0YXRlT2JqZWN0L2Zyb21TdGF0ZU9iamVjdFxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuY29uc3QgVmFsdWVJTyA9IG5ldyBJT1R5cGU8SW50ZW50aW9uYWxBbnksIEludGVudGlvbmFsQW55PiggJ1ZhbHVlSU8nLCB7XG4gIGlzVmFsaWRWYWx1ZTogXy5zdHViVHJ1ZSxcbiAgc3VwZXJ0eXBlOiBJT1R5cGUuT2JqZWN0SU8sXG4gIHRvU3RhdGVPYmplY3Q6IGNvcmVPYmplY3QgPT4gY29yZU9iamVjdCxcbiAgZnJvbVN0YXRlT2JqZWN0OiBzdGF0ZU9iamVjdCA9PiBzdGF0ZU9iamVjdCxcbiAgc3RhdGVTY2hlbWE6IFN0YXRlU2NoZW1hLmFzVmFsdWUoICcqJywgeyBpc1ZhbGlkVmFsdWU6IF8uc3R1YlRydWUgfSApXG59ICk7XG5cbnRhbmRlbU5hbWVzcGFjZS5yZWdpc3RlciggJ1ZhbHVlSU8nLCBWYWx1ZUlPICk7XG5leHBvcnQgZGVmYXVsdCBWYWx1ZUlPOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHVCQUF1QjtBQUNuRCxPQUFPQyxNQUFNLE1BQU0sYUFBYTtBQUNoQyxPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBRzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsT0FBTyxHQUFHLElBQUlGLE1BQU0sQ0FBa0MsU0FBUyxFQUFFO0VBQ3JFRyxZQUFZLEVBQUVDLENBQUMsQ0FBQ0MsUUFBUTtFQUN4QkMsU0FBUyxFQUFFTixNQUFNLENBQUNPLFFBQVE7RUFDMUJDLGFBQWEsRUFBRUMsVUFBVSxJQUFJQSxVQUFVO0VBQ3ZDQyxlQUFlLEVBQUVDLFdBQVcsSUFBSUEsV0FBVztFQUMzQ0MsV0FBVyxFQUFFWCxXQUFXLENBQUNZLE9BQU8sQ0FBRSxHQUFHLEVBQUU7SUFBRVYsWUFBWSxFQUFFQyxDQUFDLENBQUNDO0VBQVMsQ0FBQztBQUNyRSxDQUFDLENBQUU7QUFFSE4sZUFBZSxDQUFDZSxRQUFRLENBQUUsU0FBUyxFQUFFWixPQUFPLENBQUU7QUFDOUMsZUFBZUEsT0FBTyJ9
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/BooleanIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * IO Type for JS's built-in boolean type.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */





const BooleanIO = new IOType('BooleanIO', {
  supertype: types_ValueIO,
  valueType: 'boolean',
  documentation: 'IO Type for Javascript\'s boolean primitive type',
  stateSchema: StateSchema.asValue('boolean', {
    valueType: 'boolean'
  }),
  toStateObject: _.identity
});
tandemNamespace.register('BooleanIO', BooleanIO);
/* harmony default export */ const types_BooleanIO = (BooleanIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJTdGF0ZVNjaGVtYSIsIlZhbHVlSU8iLCJCb29sZWFuSU8iLCJzdXBlcnR5cGUiLCJ2YWx1ZVR5cGUiLCJkb2N1bWVudGF0aW9uIiwic3RhdGVTY2hlbWEiLCJhc1ZhbHVlIiwidG9TdGF0ZU9iamVjdCIsIl8iLCJpZGVudGl0eSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQm9vbGVhbklPLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIElPIFR5cGUgZm9yIEpTJ3MgYnVpbHQtaW4gYm9vbGVhbiB0eXBlLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIEFuZHJldyBBZGFyZSAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4uL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcbmltcG9ydCBTdGF0ZVNjaGVtYSBmcm9tICcuL1N0YXRlU2NoZW1hLmpzJztcbmltcG9ydCBWYWx1ZUlPIGZyb20gJy4vVmFsdWVJTy5qcyc7XG5cbmNvbnN0IEJvb2xlYW5JTyA9IG5ldyBJT1R5cGU8Ym9vbGVhbiwgYm9vbGVhbj4oICdCb29sZWFuSU8nLCB7XG4gIHN1cGVydHlwZTogVmFsdWVJTyxcbiAgdmFsdWVUeXBlOiAnYm9vbGVhbicsXG4gIGRvY3VtZW50YXRpb246ICdJTyBUeXBlIGZvciBKYXZhc2NyaXB0XFwncyBib29sZWFuIHByaW1pdGl2ZSB0eXBlJyxcbiAgc3RhdGVTY2hlbWE6IFN0YXRlU2NoZW1hLmFzVmFsdWU8Ym9vbGVhbiwgYm9vbGVhbj4oICdib29sZWFuJywgeyB2YWx1ZVR5cGU6ICdib29sZWFuJyB9ICksXG4gIHRvU3RhdGVPYmplY3Q6IF8uaWRlbnRpdHlcbn0gKTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnQm9vbGVhbklPJywgQm9vbGVhbklPICk7XG5leHBvcnQgZGVmYXVsdCBCb29sZWFuSU87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHVCQUF1QjtBQUNuRCxPQUFPQyxNQUFNLE1BQU0sYUFBYTtBQUNoQyxPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBQzFDLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBRWxDLE1BQU1DLFNBQVMsR0FBRyxJQUFJSCxNQUFNLENBQW9CLFdBQVcsRUFBRTtFQUMzREksU0FBUyxFQUFFRixPQUFPO0VBQ2xCRyxTQUFTLEVBQUUsU0FBUztFQUNwQkMsYUFBYSxFQUFFLGtEQUFrRDtFQUNqRUMsV0FBVyxFQUFFTixXQUFXLENBQUNPLE9BQU8sQ0FBb0IsU0FBUyxFQUFFO0lBQUVILFNBQVMsRUFBRTtFQUFVLENBQUMsQ0FBRTtFQUN6RkksYUFBYSxFQUFFQyxDQUFDLENBQUNDO0FBQ25CLENBQUMsQ0FBRTtBQUVIWixlQUFlLENBQUNhLFFBQVEsQ0FBRSxXQUFXLEVBQUVULFNBQVMsQ0FBRTtBQUNsRCxlQUFlQSxTQUFTIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/arrayRemove.js
// Copyright 2014-2020, University of Colorado Boulder

/**
 * Removes a single (the first) matching object from an Array.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/*
 * @param {Array} array
 * @param {*} item - the item to remove from the array
 */
function arrayRemove(array, item) {
  assert && assert(Array.isArray(array), 'arrayRemove takes an Array');
  const index = _.indexOf(array, item);
  assert && assert(index >= 0, 'item not found in Array');
  array.splice(index, 1);
}
js_phetCore.register('arrayRemove', arrayRemove);
/* harmony default export */ const js_arrayRemove = (arrayRemove);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImFycmF5UmVtb3ZlIiwiYXJyYXkiLCJpdGVtIiwiYXNzZXJ0IiwiQXJyYXkiLCJpc0FycmF5IiwiaW5kZXgiLCJfIiwiaW5kZXhPZiIsInNwbGljZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiYXJyYXlSZW1vdmUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogUmVtb3ZlcyBhIHNpbmdsZSAodGhlIGZpcnN0KSBtYXRjaGluZyBvYmplY3QgZnJvbSBhbiBBcnJheS5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuXG4vKlxuICogQHBhcmFtIHtBcnJheX0gYXJyYXlcbiAqIEBwYXJhbSB7Kn0gaXRlbSAtIHRoZSBpdGVtIHRvIHJlbW92ZSBmcm9tIHRoZSBhcnJheVxuICovXG5mdW5jdGlvbiBhcnJheVJlbW92ZSggYXJyYXksIGl0ZW0gKSB7XG4gIGFzc2VydCAmJiBhc3NlcnQoIEFycmF5LmlzQXJyYXkoIGFycmF5ICksICdhcnJheVJlbW92ZSB0YWtlcyBhbiBBcnJheScgKTtcblxuICBjb25zdCBpbmRleCA9IF8uaW5kZXhPZiggYXJyYXksIGl0ZW0gKTtcbiAgYXNzZXJ0ICYmIGFzc2VydCggaW5kZXggPj0gMCwgJ2l0ZW0gbm90IGZvdW5kIGluIEFycmF5JyApO1xuXG4gIGFycmF5LnNwbGljZSggaW5kZXgsIDEgKTtcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdhcnJheVJlbW92ZScsIGFycmF5UmVtb3ZlICk7XG5cbmV4cG9ydCBkZWZhdWx0IGFycmF5UmVtb3ZlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxXQUFXQSxDQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRztFQUNsQ0MsTUFBTSxJQUFJQSxNQUFNLENBQUVDLEtBQUssQ0FBQ0MsT0FBTyxDQUFFSixLQUFLLENBQUUsRUFBRSw0QkFBNEIsQ0FBRTtFQUV4RSxNQUFNSyxLQUFLLEdBQUdDLENBQUMsQ0FBQ0MsT0FBTyxDQUFFUCxLQUFLLEVBQUVDLElBQUksQ0FBRTtFQUN0Q0MsTUFBTSxJQUFJQSxNQUFNLENBQUVHLEtBQUssSUFBSSxDQUFDLEVBQUUseUJBQXlCLENBQUU7RUFFekRMLEtBQUssQ0FBQ1EsTUFBTSxDQUFFSCxLQUFLLEVBQUUsQ0FBQyxDQUFFO0FBQzFCO0FBRUFQLFFBQVEsQ0FBQ1csUUFBUSxDQUFFLGFBQWEsRUFBRVYsV0FBVyxDQUFFO0FBRS9DLGVBQWVBLFdBQVcifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/EnumerationValue.js
// Copyright 2021-2023, University of Colorado Boulder

/**
 * EnumerationValue is the base class for enumeration value instances.
 * See https://github.com/phetsims/phet-info/blob/main/doc/phet-software-design-patterns.md#enumeration
 *
 * PhET's Enumeration pattern is:
 *
 * class MyEnumeration extends EnumerationValue {
 *   public static VALUE_1 = new MyEnumeration();
 *   public static VALUE_2 = new MyEnumeration();
 *
 *   // Make sure this is last, once all EnumerationValues have been declared statically.
 *   public static enumeration = new Enumeration( MyEnumeration );
 * }
 *
 * // Usage
 * console.log( MyEnumeration.VALUE_1 );
 * const printValue = enumValue => {
 *   assert && assert( enumValue.enumeration.values.includes(enumValue));
 *   console.log( enumValue );
 * };
 * printValue( MyEnumeration.VALUE_2 );
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */


class EnumerationValue {
  // null until set by Enumeration. Once set, cannot be changed.

  // After an Enumeration is constructed, no new instances of that exact type can be made (though it is OK to
  // create subtypes)
  static sealedCache = new Set();
  toString() {
    return this.name;
  }

  // This method is unused, but needs to remain here so other types don't accidentally structurally match
  // enumeration values.  Without this, string satisfies the EnumerationValue interface, but we don't want it to.
  isEnumerationValue() {
    return true;
  }
  constructor() {
    const c = this.constructor;
    assert && assert(!EnumerationValue.sealedCache.has(c), 'cannot create instanceof of a sealed constructor');
    this._name = null;
    this._enumeration = null;
  }
  set name(name) {
    assert && assert(!this._name, 'name cannot be changed once defined.');
    this._name = name;
  }
  get name() {
    assert && assert(this._name, 'name cannot be retrieved until it has been filled in by Enumeration.');
    return this._name;
  }
  set enumeration(enumeration) {
    assert && assert(!this._enumeration, 'enumeration cannot be changed once defined.');
    this._enumeration = enumeration;
  }
  get enumeration() {
    assert && assert(this._enumeration, 'enumeration cannot be retrieved until it has been filled in by Enumeration.');
    return this._enumeration;
  }
}
js_phetCore.register('EnumerationValue', EnumerationValue);
/* harmony default export */ const js_EnumerationValue = (EnumerationValue);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIkVudW1lcmF0aW9uVmFsdWUiLCJzZWFsZWRDYWNoZSIsIlNldCIsInRvU3RyaW5nIiwibmFtZSIsImlzRW51bWVyYXRpb25WYWx1ZSIsImNvbnN0cnVjdG9yIiwiYyIsImFzc2VydCIsImhhcyIsIl9uYW1lIiwiX2VudW1lcmF0aW9uIiwiZW51bWVyYXRpb24iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkVudW1lcmF0aW9uVmFsdWUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogRW51bWVyYXRpb25WYWx1ZSBpcyB0aGUgYmFzZSBjbGFzcyBmb3IgZW51bWVyYXRpb24gdmFsdWUgaW5zdGFuY2VzLlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0LWluZm8vYmxvYi9tYXN0ZXIvZG9jL3BoZXQtc29mdHdhcmUtZGVzaWduLXBhdHRlcm5zLm1kI2VudW1lcmF0aW9uXG4gKlxuICogUGhFVCdzIEVudW1lcmF0aW9uIHBhdHRlcm4gaXM6XG4gKlxuICogY2xhc3MgTXlFbnVtZXJhdGlvbiBleHRlbmRzIEVudW1lcmF0aW9uVmFsdWUge1xuICogICBwdWJsaWMgc3RhdGljIFZBTFVFXzEgPSBuZXcgTXlFbnVtZXJhdGlvbigpO1xuICogICBwdWJsaWMgc3RhdGljIFZBTFVFXzIgPSBuZXcgTXlFbnVtZXJhdGlvbigpO1xuICpcbiAqICAgLy8gTWFrZSBzdXJlIHRoaXMgaXMgbGFzdCwgb25jZSBhbGwgRW51bWVyYXRpb25WYWx1ZXMgaGF2ZSBiZWVuIGRlY2xhcmVkIHN0YXRpY2FsbHkuXG4gKiAgIHB1YmxpYyBzdGF0aWMgZW51bWVyYXRpb24gPSBuZXcgRW51bWVyYXRpb24oIE15RW51bWVyYXRpb24gKTtcbiAqIH1cbiAqXG4gKiAvLyBVc2FnZVxuICogY29uc29sZS5sb2coIE15RW51bWVyYXRpb24uVkFMVUVfMSApO1xuICogY29uc3QgcHJpbnRWYWx1ZSA9IGVudW1WYWx1ZSA9PiB7XG4gKiAgIGFzc2VydCAmJiBhc3NlcnQoIGVudW1WYWx1ZS5lbnVtZXJhdGlvbi52YWx1ZXMuaW5jbHVkZXMoZW51bVZhbHVlKSk7XG4gKiAgIGNvbnNvbGUubG9nKCBlbnVtVmFsdWUgKTtcbiAqIH07XG4gKiBwcmludFZhbHVlKCBNeUVudW1lcmF0aW9uLlZBTFVFXzIgKTtcbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcbmltcG9ydCBFbnVtZXJhdGlvbiBmcm9tICcuL0VudW1lcmF0aW9uLmpzJztcbmltcG9ydCBDb25zdHJ1Y3RvciBmcm9tICcuL3R5cGVzL0NvbnN0cnVjdG9yLmpzJztcblxuY2xhc3MgRW51bWVyYXRpb25WYWx1ZSB7XG5cbiAgLy8gbnVsbCB1bnRpbCBzZXQgYnkgRW51bWVyYXRpb24uIE9uY2Ugc2V0LCBjYW5ub3QgYmUgY2hhbmdlZC5cbiAgcHJpdmF0ZSBfbmFtZTogc3RyaW5nIHwgbnVsbDtcbiAgcHJpdmF0ZSBfZW51bWVyYXRpb246IEVudW1lcmF0aW9uPHRoaXM+IHwgbnVsbDtcblxuICAvLyBBZnRlciBhbiBFbnVtZXJhdGlvbiBpcyBjb25zdHJ1Y3RlZCwgbm8gbmV3IGluc3RhbmNlcyBvZiB0aGF0IGV4YWN0IHR5cGUgY2FuIGJlIG1hZGUgKHRob3VnaCBpdCBpcyBPSyB0b1xuICAvLyBjcmVhdGUgc3VidHlwZXMpXG4gIHB1YmxpYyBzdGF0aWMgc2VhbGVkQ2FjaGUgPSBuZXcgU2V0PENvbnN0cnVjdG9yPEVudW1lcmF0aW9uVmFsdWU+PigpO1xuXG4gIHB1YmxpYyB0b1N0cmluZygpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLm5hbWU7XG4gIH1cblxuICAvLyBUaGlzIG1ldGhvZCBpcyB1bnVzZWQsIGJ1dCBuZWVkcyB0byByZW1haW4gaGVyZSBzbyBvdGhlciB0eXBlcyBkb24ndCBhY2NpZGVudGFsbHkgc3RydWN0dXJhbGx5IG1hdGNoXG4gIC8vIGVudW1lcmF0aW9uIHZhbHVlcy4gIFdpdGhvdXQgdGhpcywgc3RyaW5nIHNhdGlzZmllcyB0aGUgRW51bWVyYXRpb25WYWx1ZSBpbnRlcmZhY2UsIGJ1dCB3ZSBkb24ndCB3YW50IGl0IHRvLlxuICBwcml2YXRlIGlzRW51bWVyYXRpb25WYWx1ZSgpOiBib29sZWFuIHtyZXR1cm4gdHJ1ZTt9XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGMgPSB0aGlzLmNvbnN0cnVjdG9yIGFzIENvbnN0cnVjdG9yPEVudW1lcmF0aW9uVmFsdWU+O1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICFFbnVtZXJhdGlvblZhbHVlLnNlYWxlZENhY2hlLmhhcyggYyApLCAnY2Fubm90IGNyZWF0ZSBpbnN0YW5jZW9mIG9mIGEgc2VhbGVkIGNvbnN0cnVjdG9yJyApO1xuXG4gICAgdGhpcy5fbmFtZSA9IG51bGw7XG4gICAgdGhpcy5fZW51bWVyYXRpb24gPSBudWxsO1xuICB9XG5cbiAgcHVibGljIHNldCBuYW1lKCBuYW1lOiBzdHJpbmcgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuX25hbWUsICduYW1lIGNhbm5vdCBiZSBjaGFuZ2VkIG9uY2UgZGVmaW5lZC4nICk7XG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG5hbWUoKTogc3RyaW5nIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLl9uYW1lLCAnbmFtZSBjYW5ub3QgYmUgcmV0cmlldmVkIHVudGlsIGl0IGhhcyBiZWVuIGZpbGxlZCBpbiBieSBFbnVtZXJhdGlvbi4nICk7XG4gICAgcmV0dXJuIHRoaXMuX25hbWUhO1xuICB9XG5cbiAgcHVibGljIHNldCBlbnVtZXJhdGlvbiggZW51bWVyYXRpb246IEVudW1lcmF0aW9uPHRoaXM+ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLl9lbnVtZXJhdGlvbiwgJ2VudW1lcmF0aW9uIGNhbm5vdCBiZSBjaGFuZ2VkIG9uY2UgZGVmaW5lZC4nICk7XG4gICAgdGhpcy5fZW51bWVyYXRpb24gPSBlbnVtZXJhdGlvbjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZW51bWVyYXRpb24oKTogRW51bWVyYXRpb248dGhpcz4ge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuX2VudW1lcmF0aW9uLCAnZW51bWVyYXRpb24gY2Fubm90IGJlIHJldHJpZXZlZCB1bnRpbCBpdCBoYXMgYmVlbiBmaWxsZWQgaW4gYnkgRW51bWVyYXRpb24uJyApO1xuICAgIHJldHVybiB0aGlzLl9lbnVtZXJhdGlvbiE7XG4gIH1cbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdFbnVtZXJhdGlvblZhbHVlJywgRW51bWVyYXRpb25WYWx1ZSApO1xuXG5leHBvcnQgZGVmYXVsdCBFbnVtZXJhdGlvblZhbHVlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGVBQWU7QUFJcEMsTUFBTUMsZ0JBQWdCLENBQUM7RUFFckI7O0VBSUE7RUFDQTtFQUNBLE9BQWNDLFdBQVcsR0FBRyxJQUFJQyxHQUFHLEVBQWlDO0VBRTdEQyxRQUFRQSxDQUFBLEVBQVc7SUFDeEIsT0FBTyxJQUFJLENBQUNDLElBQUk7RUFDbEI7O0VBRUE7RUFDQTtFQUNRQyxrQkFBa0JBLENBQUEsRUFBWTtJQUFDLE9BQU8sSUFBSTtFQUFDO0VBRTVDQyxXQUFXQSxDQUFBLEVBQUc7SUFDbkIsTUFBTUMsQ0FBQyxHQUFHLElBQUksQ0FBQ0QsV0FBNEM7SUFDM0RFLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUNSLGdCQUFnQixDQUFDQyxXQUFXLENBQUNRLEdBQUcsQ0FBRUYsQ0FBQyxDQUFFLEVBQUUsa0RBQWtELENBQUU7SUFFOUcsSUFBSSxDQUFDRyxLQUFLLEdBQUcsSUFBSTtJQUNqQixJQUFJLENBQUNDLFlBQVksR0FBRyxJQUFJO0VBQzFCO0VBRUEsSUFBV1AsSUFBSUEsQ0FBRUEsSUFBWSxFQUFHO0lBQzlCSSxNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDLElBQUksQ0FBQ0UsS0FBSyxFQUFFLHNDQUFzQyxDQUFFO0lBQ3ZFLElBQUksQ0FBQ0EsS0FBSyxHQUFHTixJQUFJO0VBQ25CO0VBRUEsSUFBV0EsSUFBSUEsQ0FBQSxFQUFXO0lBQ3hCSSxNQUFNLElBQUlBLE1BQU0sQ0FBRSxJQUFJLENBQUNFLEtBQUssRUFBRSxzRUFBc0UsQ0FBRTtJQUN0RyxPQUFPLElBQUksQ0FBQ0EsS0FBSztFQUNuQjtFQUVBLElBQVdFLFdBQVdBLENBQUVBLFdBQThCLEVBQUc7SUFDdkRKLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUMsSUFBSSxDQUFDRyxZQUFZLEVBQUUsNkNBQTZDLENBQUU7SUFDckYsSUFBSSxDQUFDQSxZQUFZLEdBQUdDLFdBQVc7RUFDakM7RUFFQSxJQUFXQSxXQUFXQSxDQUFBLEVBQXNCO0lBQzFDSixNQUFNLElBQUlBLE1BQU0sQ0FBRSxJQUFJLENBQUNHLFlBQVksRUFBRSw2RUFBNkUsQ0FBRTtJQUNwSCxPQUFPLElBQUksQ0FBQ0EsWUFBWTtFQUMxQjtBQUNGO0FBRUFaLFFBQVEsQ0FBQ2MsUUFBUSxDQUFFLGtCQUFrQixFQUFFYixnQkFBZ0IsQ0FBRTtBQUV6RCxlQUFlQSxnQkFBZ0IifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/inheritance.js
// Copyright 2017-2020, University of Colorado Boulder

/**
 * Given inheritance using inherit, this will give the full prototype chain.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/*
 * @param {*} type - Constructor for the type in question.
 * @returns {Array.<*>}
 */
function inheritance(type) {
  const types = [type];
  let proto = type.prototype;
  while (proto && (proto = Object.getPrototypeOf(proto))) {
    if (proto.constructor) {
      types.push(proto.constructor);
    }
  }
  return types;
}
js_phetCore.register('inheritance', inheritance);
/* harmony default export */ const js_inheritance = (inheritance);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImluaGVyaXRhbmNlIiwidHlwZSIsInR5cGVzIiwicHJvdG8iLCJwcm90b3R5cGUiLCJPYmplY3QiLCJnZXRQcm90b3R5cGVPZiIsImNvbnN0cnVjdG9yIiwicHVzaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiaW5oZXJpdGFuY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogR2l2ZW4gaW5oZXJpdGFuY2UgdXNpbmcgaW5oZXJpdCwgdGhpcyB3aWxsIGdpdmUgdGhlIGZ1bGwgcHJvdG90eXBlIGNoYWluLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbi8qXG4gKiBAcGFyYW0geyp9IHR5cGUgLSBDb25zdHJ1Y3RvciBmb3IgdGhlIHR5cGUgaW4gcXVlc3Rpb24uXG4gKiBAcmV0dXJucyB7QXJyYXkuPCo+fVxuICovXG5mdW5jdGlvbiBpbmhlcml0YW5jZSggdHlwZSApIHtcbiAgY29uc3QgdHlwZXMgPSBbIHR5cGUgXTtcblxuICBsZXQgcHJvdG8gPSB0eXBlLnByb3RvdHlwZTtcbiAgd2hpbGUgKCBwcm90byAmJiAoIHByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKCBwcm90byApICkgKSB7XG4gICAgaWYgKCBwcm90by5jb25zdHJ1Y3RvciApIHtcbiAgICAgIHR5cGVzLnB1c2goIHByb3RvLmNvbnN0cnVjdG9yICk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0eXBlcztcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdpbmhlcml0YW5jZScsIGluaGVyaXRhbmNlICk7XG5cbmV4cG9ydCBkZWZhdWx0IGluaGVyaXRhbmNlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxXQUFXQSxDQUFFQyxJQUFJLEVBQUc7RUFDM0IsTUFBTUMsS0FBSyxHQUFHLENBQUVELElBQUksQ0FBRTtFQUV0QixJQUFJRSxLQUFLLEdBQUdGLElBQUksQ0FBQ0csU0FBUztFQUMxQixPQUFRRCxLQUFLLEtBQU1BLEtBQUssR0FBR0UsTUFBTSxDQUFDQyxjQUFjLENBQUVILEtBQUssQ0FBRSxDQUFFLEVBQUc7SUFDNUQsSUFBS0EsS0FBSyxDQUFDSSxXQUFXLEVBQUc7TUFDdkJMLEtBQUssQ0FBQ00sSUFBSSxDQUFFTCxLQUFLLENBQUNJLFdBQVcsQ0FBRTtJQUNqQztFQUNGO0VBQ0EsT0FBT0wsS0FBSztBQUNkO0FBRUFILFFBQVEsQ0FBQ1UsUUFBUSxDQUFFLGFBQWEsRUFBRVQsV0FBVyxDQUFFO0FBRS9DLGVBQWVBLFdBQVcifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/Enumeration.js
// Copyright 2021-2022, University of Colorado Boulder

/**
 * This implementation auto-detects the enumeration values by Object.keys and instanceof. Every property that has a
 * type matching the enumeration type is marked as a value.  See sample usage in Orientation.ts.
 *
 * For general pattern see https://github.com/phetsims/phet-info/blob/main/doc/phet-software-design-patterns.md#enumeration
 *
 * This creates 2-way maps (key-to-value and value-to-key) for ease of use and to enable phet-io serialization.
 *
 * class T extends EnumerationValue {
 *     static a=new T();
 *     static b =new T();
 *     getName(){return 'he';}
 *     get thing(){return 'text';}
 *     static get age(){return 77;}
 *     static enumeration = new Enumeration( T );
 * }
 * T.enumeration.keys => ['a', 'b']
 * T.enumeration.values => [T, T]
 *
 * Note how `keys` only picks up 'a' and 'b'.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */





class Enumeration {
  // in the order that static instances are defined

  constructor(Enumeration, providedOptions) {
    const options = optionize()({
      phetioDocumentation: '',
      // Values are plucked from the supplied Enumeration, but in order to support subtyping (augmenting) Enumerations,
      // you can specify the rule for what counts as a member of the enumeration. This should only be used in the
      // special case of augmenting existing enumerations.
      instanceType: Enumeration
    }, providedOptions);
    this.phetioDocumentation = options.phetioDocumentation;
    const instanceType = options.instanceType;

    // Iterate over the type hierarchy to support augmenting enumerations, but reverse so that newly added enumeration
    // values appear after previously existing enumeration values
    const types = _.reverse(js_inheritance(Enumeration));
    assert && assert(types.includes(instanceType), 'the specified type should be in its own hierarchy');
    this.keys = [];
    this.values = [];
    types.forEach(type => {
      Object.keys(type).forEach(key => {
        const value = type[key];
        if (value instanceof instanceType) {
          assert && assert(key === key.toUpperCase(), 'keys should be upper case by convention');
          this.keys.push(key);
          this.values.push(value);

          // Only assign this to the lowest Enumeration in the hierarchy. Otherwise this would overwrite the
          // supertype-assigned Enumeration. See https://github.com/phetsims/phet-core/issues/102
          if (value instanceof Enumeration) {
            value.name = key;
            value.enumeration = this;
          }
        }
      });
    });
    assert && assert(this.keys.length > 0, 'no keys found');
    assert && assert(this.values.length > 0, 'no values found');
    this.Enumeration = Enumeration;
    js_EnumerationValue.sealedCache.add(Enumeration);
  }
  getKey(value) {
    return value.name;
  }
  getValue(key) {
    return this.Enumeration[key];
  }
  includes(value) {
    return this.values.includes(value);
  }
}
js_phetCore.register('Enumeration', Enumeration);
/* harmony default export */ const js_Enumeration = (Enumeration);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIkVudW1lcmF0aW9uVmFsdWUiLCJpbmhlcml0YW5jZSIsIm9wdGlvbml6ZSIsIkVudW1lcmF0aW9uIiwiY29uc3RydWN0b3IiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwicGhldGlvRG9jdW1lbnRhdGlvbiIsImluc3RhbmNlVHlwZSIsInR5cGVzIiwiXyIsInJldmVyc2UiLCJhc3NlcnQiLCJpbmNsdWRlcyIsImtleXMiLCJ2YWx1ZXMiLCJmb3JFYWNoIiwidHlwZSIsIk9iamVjdCIsImtleSIsInZhbHVlIiwidG9VcHBlckNhc2UiLCJwdXNoIiwibmFtZSIsImVudW1lcmF0aW9uIiwibGVuZ3RoIiwic2VhbGVkQ2FjaGUiLCJhZGQiLCJnZXRLZXkiLCJnZXRWYWx1ZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRW51bWVyYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBhdXRvLWRldGVjdHMgdGhlIGVudW1lcmF0aW9uIHZhbHVlcyBieSBPYmplY3Qua2V5cyBhbmQgaW5zdGFuY2VvZi4gRXZlcnkgcHJvcGVydHkgdGhhdCBoYXMgYVxuICogdHlwZSBtYXRjaGluZyB0aGUgZW51bWVyYXRpb24gdHlwZSBpcyBtYXJrZWQgYXMgYSB2YWx1ZS4gIFNlZSBzYW1wbGUgdXNhZ2UgaW4gT3JpZW50YXRpb24udHMuXG4gKlxuICogRm9yIGdlbmVyYWwgcGF0dGVybiBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW5mby9ibG9iL21hc3Rlci9kb2MvcGhldC1zb2Z0d2FyZS1kZXNpZ24tcGF0dGVybnMubWQjZW51bWVyYXRpb25cbiAqXG4gKiBUaGlzIGNyZWF0ZXMgMi13YXkgbWFwcyAoa2V5LXRvLXZhbHVlIGFuZCB2YWx1ZS10by1rZXkpIGZvciBlYXNlIG9mIHVzZSBhbmQgdG8gZW5hYmxlIHBoZXQtaW8gc2VyaWFsaXphdGlvbi5cbiAqXG4gKiBjbGFzcyBUIGV4dGVuZHMgRW51bWVyYXRpb25WYWx1ZSB7XG4gKiAgICAgc3RhdGljIGE9bmV3IFQoKTtcbiAqICAgICBzdGF0aWMgYiA9bmV3IFQoKTtcbiAqICAgICBnZXROYW1lKCl7cmV0dXJuICdoZSc7fVxuICogICAgIGdldCB0aGluZygpe3JldHVybiAndGV4dCc7fVxuICogICAgIHN0YXRpYyBnZXQgYWdlKCl7cmV0dXJuIDc3O31cbiAqICAgICBzdGF0aWMgZW51bWVyYXRpb24gPSBuZXcgRW51bWVyYXRpb24oIFQgKTtcbiAqIH1cbiAqIFQuZW51bWVyYXRpb24ua2V5cyA9PiBbJ2EnLCAnYiddXG4gKiBULmVudW1lcmF0aW9uLnZhbHVlcyA9PiBbVCwgVF1cbiAqXG4gKiBOb3RlIGhvdyBga2V5c2Agb25seSBwaWNrcyB1cCAnYScgYW5kICdiJy5cbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcbmltcG9ydCBURW51bWVyYXRpb24gZnJvbSAnLi9URW51bWVyYXRpb24uanMnO1xuaW1wb3J0IEVudW1lcmF0aW9uVmFsdWUgZnJvbSAnLi9FbnVtZXJhdGlvblZhbHVlLmpzJztcbmltcG9ydCBpbmhlcml0YW5jZSBmcm9tICcuL2luaGVyaXRhbmNlLmpzJztcbmltcG9ydCBDb25zdHJ1Y3RvciBmcm9tICcuL3R5cGVzL0NvbnN0cnVjdG9yLmpzJztcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi9vcHRpb25pemUuanMnO1xuXG5leHBvcnQgdHlwZSBFbnVtZXJhdGlvbk9wdGlvbnM8VCBleHRlbmRzIEVudW1lcmF0aW9uVmFsdWU+ID0ge1xuICBwaGV0aW9Eb2N1bWVudGF0aW9uPzogc3RyaW5nO1xuICBpbnN0YW5jZVR5cGU/OiBDb25zdHJ1Y3RvcjxUPjtcbn07XG5cbmNsYXNzIEVudW1lcmF0aW9uPFQgZXh0ZW5kcyBFbnVtZXJhdGlvblZhbHVlPiBpbXBsZW1lbnRzIFRFbnVtZXJhdGlvbjxUPiB7XG4gIHB1YmxpYyByZWFkb25seSB2YWx1ZXM6IFRbXTsgLy8gaW4gdGhlIG9yZGVyIHRoYXQgc3RhdGljIGluc3RhbmNlcyBhcmUgZGVmaW5lZFxuICBwdWJsaWMgcmVhZG9ubHkga2V5czogc3RyaW5nW107XG4gIHB1YmxpYyByZWFkb25seSBFbnVtZXJhdGlvbjogQ29uc3RydWN0b3I8VD4gJiBSZWNvcmQ8c3RyaW5nLCBUPjtcbiAgcHVibGljIHJlYWRvbmx5IHBoZXRpb0RvY3VtZW50YXRpb24/OiBzdHJpbmc7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBFbnVtZXJhdGlvbjogQ29uc3RydWN0b3I8VD4sIHByb3ZpZGVkT3B0aW9ucz86IEVudW1lcmF0aW9uT3B0aW9uczxUPiApIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RW51bWVyYXRpb25PcHRpb25zPFQ+PigpKCB7XG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAnJyxcblxuICAgICAgLy8gVmFsdWVzIGFyZSBwbHVja2VkIGZyb20gdGhlIHN1cHBsaWVkIEVudW1lcmF0aW9uLCBidXQgaW4gb3JkZXIgdG8gc3VwcG9ydCBzdWJ0eXBpbmcgKGF1Z21lbnRpbmcpIEVudW1lcmF0aW9ucyxcbiAgICAgIC8vIHlvdSBjYW4gc3BlY2lmeSB0aGUgcnVsZSBmb3Igd2hhdCBjb3VudHMgYXMgYSBtZW1iZXIgb2YgdGhlIGVudW1lcmF0aW9uLiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdGhlXG4gICAgICAvLyBzcGVjaWFsIGNhc2Ugb2YgYXVnbWVudGluZyBleGlzdGluZyBlbnVtZXJhdGlvbnMuXG4gICAgICBpbnN0YW5jZVR5cGU6IEVudW1lcmF0aW9uXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG4gICAgdGhpcy5waGV0aW9Eb2N1bWVudGF0aW9uID0gb3B0aW9ucy5waGV0aW9Eb2N1bWVudGF0aW9uO1xuXG4gICAgY29uc3QgaW5zdGFuY2VUeXBlID0gb3B0aW9ucy5pbnN0YW5jZVR5cGU7XG5cbiAgICAvLyBJdGVyYXRlIG92ZXIgdGhlIHR5cGUgaGllcmFyY2h5IHRvIHN1cHBvcnQgYXVnbWVudGluZyBlbnVtZXJhdGlvbnMsIGJ1dCByZXZlcnNlIHNvIHRoYXQgbmV3bHkgYWRkZWQgZW51bWVyYXRpb25cbiAgICAvLyB2YWx1ZXMgYXBwZWFyIGFmdGVyIHByZXZpb3VzbHkgZXhpc3RpbmcgZW51bWVyYXRpb24gdmFsdWVzXG4gICAgY29uc3QgdHlwZXMgPSBfLnJldmVyc2UoIGluaGVyaXRhbmNlKCBFbnVtZXJhdGlvbiApICk7XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlcy5pbmNsdWRlcyggaW5zdGFuY2VUeXBlICksICd0aGUgc3BlY2lmaWVkIHR5cGUgc2hvdWxkIGJlIGluIGl0cyBvd24gaGllcmFyY2h5JyApO1xuXG4gICAgdGhpcy5rZXlzID0gW107XG4gICAgdGhpcy52YWx1ZXMgPSBbXTtcbiAgICB0eXBlcy5mb3JFYWNoKCB0eXBlID0+IHtcbiAgICAgIE9iamVjdC5rZXlzKCB0eXBlICkuZm9yRWFjaCgga2V5ID0+IHtcbiAgICAgICAgY29uc3QgdmFsdWUgPSB0eXBlWyBrZXkgXTtcbiAgICAgICAgaWYgKCB2YWx1ZSBpbnN0YW5jZW9mIGluc3RhbmNlVHlwZSApIHtcbiAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBrZXkgPT09IGtleS50b1VwcGVyQ2FzZSgpLCAna2V5cyBzaG91bGQgYmUgdXBwZXIgY2FzZSBieSBjb252ZW50aW9uJyApO1xuICAgICAgICAgIHRoaXMua2V5cy5wdXNoKCBrZXkgKTtcbiAgICAgICAgICB0aGlzLnZhbHVlcy5wdXNoKCB2YWx1ZSApO1xuXG4gICAgICAgICAgLy8gT25seSBhc3NpZ24gdGhpcyB0byB0aGUgbG93ZXN0IEVudW1lcmF0aW9uIGluIHRoZSBoaWVyYXJjaHkuIE90aGVyd2lzZSB0aGlzIHdvdWxkIG92ZXJ3cml0ZSB0aGVcbiAgICAgICAgICAvLyBzdXBlcnR5cGUtYXNzaWduZWQgRW51bWVyYXRpb24uIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1jb3JlL2lzc3Vlcy8xMDJcbiAgICAgICAgICBpZiAoIHZhbHVlIGluc3RhbmNlb2YgRW51bWVyYXRpb24gKSB7XG4gICAgICAgICAgICB2YWx1ZS5uYW1lID0ga2V5O1xuICAgICAgICAgICAgdmFsdWUuZW51bWVyYXRpb24gPSB0aGlzO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSApO1xuICAgIH0gKTtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMua2V5cy5sZW5ndGggPiAwLCAnbm8ga2V5cyBmb3VuZCcgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLnZhbHVlcy5sZW5ndGggPiAwLCAnbm8gdmFsdWVzIGZvdW5kJyApO1xuXG4gICAgdGhpcy5FbnVtZXJhdGlvbiA9IEVudW1lcmF0aW9uIGFzIENvbnN0cnVjdG9yPFQ+ICYgUmVjb3JkPHN0cmluZywgVD47XG4gICAgRW51bWVyYXRpb25WYWx1ZS5zZWFsZWRDYWNoZS5hZGQoIEVudW1lcmF0aW9uICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0S2V5KCB2YWx1ZTogVCApOiBzdHJpbmcge1xuICAgIHJldHVybiB2YWx1ZS5uYW1lO1xuICB9XG5cbiAgcHVibGljIGdldFZhbHVlKCBrZXk6IHN0cmluZyApOiBUIHtcbiAgICByZXR1cm4gdGhpcy5FbnVtZXJhdGlvblsga2V5IF07XG4gIH1cblxuICBwdWJsaWMgaW5jbHVkZXMoIHZhbHVlOiBUICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnZhbHVlcy5pbmNsdWRlcyggdmFsdWUgKTtcbiAgfVxufVxuXG5waGV0Q29yZS5yZWdpc3RlciggJ0VudW1lcmF0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
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/EnumerationIO.js
// Copyright 2022, University of Colorado Boulder

/**
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */





// Cache each parameterized IOType so that it is only created once.
const cache = new Map();
const joinKeys = keys => keys.join('|');
const EnumerationIO = enumerationContainer => {
  const enumeration = enumerationContainer.enumeration;

  // This caching implementation should be kept in sync with the other parametric IO Type caching implementations.
  if (!cache.has(enumeration)) {
    // Enumeration supports additional documentation, so the values can be described.
    const additionalDocs = enumeration.phetioDocumentation ? ` ${enumeration.phetioDocumentation}` : '';
    const keys = enumeration.keys;
    const values = enumeration.values;
    const ioTypeName = `EnumerationIO(${joinKeys(keys)})`;
    assert && assert(!Array.from(cache.values()).find(ioType => ioType.typeName === ioTypeName), 'There was already another IO Type with the same name: ' + ioTypeName);
    cache.set(enumeration, new IOType(ioTypeName, {
      validValues: values,
      documentation: `Possible values: ${keys.join(', ')}.${additionalDocs}`,
      toStateObject: value => enumeration.getKey(value),
      fromStateObject: stateObject => {
        assert && assert(typeof stateObject === 'string', 'unsupported EnumerationIO value type, expected string'); // eslint-disable-line no-simple-type-checking-assertions
        assert && assert(keys.includes(stateObject), `Unrecognized value: ${stateObject}`);
        return enumeration.getValue(stateObject);
      },
      stateSchema: StateSchema.asValue(`${joinKeys(keys)}`, {
        isValidValue: key => keys.includes(key)
      })
    }));
  }
  return cache.get(enumeration);
};
tandemNamespace.register('EnumerationIO', EnumerationIO);
/* harmony default export */ const types_EnumerationIO = (EnumerationIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJT1R5cGUiLCJTdGF0ZVNjaGVtYSIsInRhbmRlbU5hbWVzcGFjZSIsImNhY2hlIiwiTWFwIiwiam9pbktleXMiLCJrZXlzIiwiam9pbiIsIkVudW1lcmF0aW9uSU8iLCJlbnVtZXJhdGlvbkNvbnRhaW5lciIsImVudW1lcmF0aW9uIiwiaGFzIiwiYWRkaXRpb25hbERvY3MiLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwidmFsdWVzIiwiaW9UeXBlTmFtZSIsImFzc2VydCIsIkFycmF5IiwiZnJvbSIsImZpbmQiLCJpb1R5cGUiLCJ0eXBlTmFtZSIsInNldCIsInZhbGlkVmFsdWVzIiwiZG9jdW1lbnRhdGlvbiIsInRvU3RhdGVPYmplY3QiLCJ2YWx1ZSIsImdldEtleSIsImZyb21TdGF0ZU9iamVjdCIsInN0YXRlT2JqZWN0IiwiaW5jbHVkZXMiLCJnZXRWYWx1ZSIsInN0YXRlU2NoZW1hIiwiYXNWYWx1ZSIsImlzVmFsaWRWYWx1ZSIsImtleSIsImdldCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRW51bWVyYXRpb25JTy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgRW51bWVyYXRpb25WYWx1ZSBmcm9tICcuLi8uLi8uLi9waGV0LWNvcmUvanMvRW51bWVyYXRpb25WYWx1ZS5qcyc7XG5pbXBvcnQgVEVudW1lcmF0aW9uLCB7IEVudW1lcmF0aW9uQ29udGFpbmVyIH0gZnJvbSAnLi4vLi4vLi4vcGhldC1jb3JlL2pzL1RFbnVtZXJhdGlvbi5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcbmltcG9ydCBTdGF0ZVNjaGVtYSBmcm9tICcuL1N0YXRlU2NoZW1hLmpzJztcbmltcG9ydCB0YW5kZW1OYW1lc3BhY2UgZnJvbSAnLi4vdGFuZGVtTmFtZXNwYWNlLmpzJztcblxuLy8gQ2FjaGUgZWFjaCBwYXJhbWV0ZXJpemVkIElPVHlwZSBzbyB0aGF0IGl0IGlzIG9ubHkgY3JlYXRlZCBvbmNlLlxuY29uc3QgY2FjaGUgPSBuZXcgTWFwPFRFbnVtZXJhdGlvbjxFbnVtZXJhdGlvblZhbHVlPiwgSU9UeXBlPigpO1xuXG5jb25zdCBqb2luS2V5cyA9ICgga2V5czogc3RyaW5nW10gKSA9PiBrZXlzLmpvaW4oICd8JyApO1xuXG5jb25zdCBFbnVtZXJhdGlvbklPID0gPFQgZXh0ZW5kcyBFbnVtZXJhdGlvblZhbHVlPiggZW51bWVyYXRpb25Db250YWluZXI6IEVudW1lcmF0aW9uQ29udGFpbmVyPFQ+ICk6IElPVHlwZSA9PiB7XG4gIGNvbnN0IGVudW1lcmF0aW9uID0gZW51bWVyYXRpb25Db250YWluZXIuZW51bWVyYXRpb247XG5cbiAgLy8gVGhpcyBjYWNoaW5nIGltcGxlbWVudGF0aW9uIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgb3RoZXIgcGFyYW1ldHJpYyBJTyBUeXBlIGNhY2hpbmcgaW1wbGVtZW50YXRpb25zLlxuICBpZiAoICFjYWNoZS5oYXMoIGVudW1lcmF0aW9uICkgKSB7XG5cbiAgICAvLyBFbnVtZXJhdGlvbiBzdXBwb3J0cyBhZGRpdGlvbmFsIGRvY3VtZW50YXRpb24sIHNvIHRoZSB2YWx1ZXMgY2FuIGJlIGRlc2NyaWJlZC5cbiAgICBjb25zdCBhZGRpdGlvbmFsRG9jcyA9IGVudW1lcmF0aW9uLnBoZXRpb0RvY3VtZW50YXRpb24gPyBgICR7ZW51bWVyYXRpb24ucGhldGlvRG9jdW1lbnRhdGlvbn1gIDogJyc7XG5cbiAgICBjb25zdCBrZXlzID0gZW51bWVyYXRpb24ua2V5cztcbiAgICBjb25zdCB2YWx1ZXMgPSBlbnVtZXJhdGlvbi52YWx1ZXM7XG5cbiAgICBjb25zdCBpb1R5cGVOYW1lID0gYEVudW1lcmF0aW9uSU8oJHtqb2luS2V5cygga2V5cyApfSlgO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydChcbiAgICAgICFBcnJheS5mcm9tKCBjYWNoZS52YWx1ZXMoKSApLmZpbmQoIGlvVHlwZSA9PiBpb1R5cGUudHlwZU5hbWUgPT09IGlvVHlwZU5hbWUgKSxcbiAgICAgICdUaGVyZSB3YXMgYWxyZWFkeSBhbm90aGVyIElPIFR5cGUgd2l0aCB0aGUgc2FtZSBuYW1lOiAnICsgaW9UeXBlTmFtZVxuICAgICk7XG5cbiAgICBjYWNoZS5zZXQoIGVudW1lcmF0aW9uLCBuZXcgSU9UeXBlPFQsIHN0cmluZz4oIGlvVHlwZU5hbWUsIHtcbiAgICAgIHZhbGlkVmFsdWVzOiB2YWx1ZXMsXG4gICAgICBkb2N1bWVudGF0aW9uOiBgUG9zc2libGUgdmFsdWVzOiAke2tleXMuam9pbiggJywgJyApfS4ke2FkZGl0aW9uYWxEb2NzfWAsXG4gICAgICB0b1N0YXRlT2JqZWN0OiAoIHZhbHVlOiBUICkgPT4gZW51bWVyYXRpb24uZ2V0S2V5KCB2YWx1ZSApLFxuICAgICAgZnJvbVN0YXRlT2JqZWN0OiAoIHN0YXRlT2JqZWN0OiBzdHJpbmcgKTogVCA9PiB7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHR5cGVvZiBzdGF0ZU9iamVjdCA9PT0gJ3N0cmluZycsICd1bnN1cHBvcnRlZCBFbnVtZXJhdGlvbklPIHZhbHVlIHR5cGUsIGV4cGVjdGVkIHN0cmluZycgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1zaW1wbGUtdHlwZS1jaGVja2luZy1hc3NlcnRpb25zXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGtleXMuaW5jbHVkZXMoIHN0YXRlT2JqZWN0ICksIGBVbnJlY29nbml6ZWQgdmFsdWU6ICR7c3RhdGVPYmplY3R9YCApO1xuICAgICAgICByZXR1cm4gZW51bWVyYXRpb24uZ2V0VmFsdWUoIHN0YXRlT2JqZWN0ICkhO1xuICAgICAgfSxcbiAgICAgIHN0YXRlU2NoZW1hOiBTdGF0ZVNjaGVtYS5hc1ZhbHVlPEVudW1lcmF0aW9uVmFsdWUsIHN0cmluZz4oIGAke2pvaW5LZXlzKCBrZXlzICl9YCwge1xuICAgICAgICBpc1ZhbGlkVmFsdWU6ICgga2V5OiBzdHJpbmcgKSA9PiBrZXlzLmluY2x1ZGVzKCBrZXkgKVxuICAgICAgfSApXG4gICAgfSApICk7XG4gIH1cblxuICByZXR1cm4gY2FjaGUuZ2V0KCBlbnVtZXJhdGlvbiApITtcbn07XG5cbnRhbmRlbU5hbWVzcGFjZS5yZWdpc3RlciggJ0VudW1lcmF0aW9uSU8nLCBFbnVtZXJhdGlvbklPICk7XG5leHBvcnQgZGVmYXVsdCBFbnVtZXJhdGlvbklPOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBSUEsT0FBT0EsTUFBTSxNQUFNLGFBQWE7QUFDaEMsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQUMxQyxPQUFPQyxlQUFlLE1BQU0sdUJBQXVCOztBQUVuRDtBQUNBLE1BQU1DLEtBQUssR0FBRyxJQUFJQyxHQUFHLEVBQTBDO0FBRS9ELE1BQU1DLFFBQVEsR0FBS0MsSUFBYyxJQUFNQSxJQUFJLENBQUNDLElBQUksQ0FBRSxHQUFHLENBQUU7QUFFdkQsTUFBTUMsYUFBYSxHQUFpQ0Msb0JBQTZDLElBQWM7RUFDN0csTUFBTUMsV0FBVyxHQUFHRCxvQkFBb0IsQ0FBQ0MsV0FBVzs7RUFFcEQ7RUFDQSxJQUFLLENBQUNQLEtBQUssQ0FBQ1EsR0FBRyxDQUFFRCxXQUFXLENBQUUsRUFBRztJQUUvQjtJQUNBLE1BQU1FLGNBQWMsR0FBR0YsV0FBVyxDQUFDRyxtQkFBbUIsR0FBSSxJQUFHSCxXQUFXLENBQUNHLG1CQUFvQixFQUFDLEdBQUcsRUFBRTtJQUVuRyxNQUFNUCxJQUFJLEdBQUdJLFdBQVcsQ0FBQ0osSUFBSTtJQUM3QixNQUFNUSxNQUFNLEdBQUdKLFdBQVcsQ0FBQ0ksTUFBTTtJQUVqQyxNQUFNQyxVQUFVLEdBQUksaUJBQWdCVixRQUFRLENBQUVDLElBQUksQ0FBRyxHQUFFO0lBRXZEVSxNQUFNLElBQUlBLE1BQU0sQ0FDZCxDQUFDQyxLQUFLLENBQUNDLElBQUksQ0FBRWYsS0FBSyxDQUFDVyxNQUFNLEVBQUUsQ0FBRSxDQUFDSyxJQUFJLENBQUVDLE1BQU0sSUFBSUEsTUFBTSxDQUFDQyxRQUFRLEtBQUtOLFVBQVUsQ0FBRSxFQUM5RSx3REFBd0QsR0FBR0EsVUFBVSxDQUN0RTtJQUVEWixLQUFLLENBQUNtQixHQUFHLENBQUVaLFdBQVcsRUFBRSxJQUFJVixNQUFNLENBQWFlLFVBQVUsRUFBRTtNQUN6RFEsV0FBVyxFQUFFVCxNQUFNO01BQ25CVSxhQUFhLEVBQUcsb0JBQW1CbEIsSUFBSSxDQUFDQyxJQUFJLENBQUUsSUFBSSxDQUFHLElBQUdLLGNBQWUsRUFBQztNQUN4RWEsYUFBYSxFQUFJQyxLQUFRLElBQU1oQixXQUFXLENBQUNpQixNQUFNLENBQUVELEtBQUssQ0FBRTtNQUMxREUsZUFBZSxFQUFJQyxXQUFtQixJQUFTO1FBQzdDYixNQUFNLElBQUlBLE1BQU0sQ0FBRSxPQUFPYSxXQUFXLEtBQUssUUFBUSxFQUFFLHVEQUF1RCxDQUFFLENBQUMsQ0FBQztRQUM5R2IsTUFBTSxJQUFJQSxNQUFNLENBQUVWLElBQUksQ0FBQ3dCLFFBQVEsQ0FBRUQsV0FBVyxDQUFFLEVBQUcsdUJBQXNCQSxXQUFZLEVBQUMsQ0FBRTtRQUN0RixPQUFPbkIsV0FBVyxDQUFDcUIsUUFBUSxDQUFFRixXQUFXLENBQUU7TUFDNUMsQ0FBQztNQUNERyxXQUFXLEVBQUUvQixXQUFXLENBQUNnQyxPQUFPLENBQTZCLEdBQUU1QixRQUFRLENBQUVDLElBQUksQ0FBRyxFQUFDLEVBQUU7UUFDakY0QixZQUFZLEVBQUlDLEdBQVcsSUFBTTdCLElBQUksQ0FBQ3dCLFFBQVEsQ0FBRUssR0FBRztNQUNyRCxDQUFDO0lBQ0gsQ0FBQyxDQUFFLENBQUU7RUFDUDtFQUVBLE9BQU9oQyxLQUFLLENBQUNpQyxHQUFHLENBQUUxQixXQUFXLENBQUU7QUFDakMsQ0FBQztBQUVEUixlQUFlLENBQUNtQyxRQUFRLENBQUUsZUFBZSxFQUFFN0IsYUFBYSxDQUFFO0FBQzFELGVBQWVBLGFBQWEifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/EventType.js
// Copyright 2019-2022, University of Colorado Boulder

/**
 * This characterizes events that may be emitted from PhetioObjects to the PhET-iO data stream.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */






class EventType extends js_EnumerationValue {
  // The user has taken an action, such as pressing a button or moving a mouse
  static USER = new EventType();

  // An event was produced by the simulation model. This could be in response to a user event, or something that happens
  // during the simulation step. Note the separation is not model vs view, but user-driven vs automatic.
  static [js_TandemConstants.EVENT_TYPE_MODEL] = new EventType();

  // An event was triggered by the PhET-iO wrapper, via PhetioEngineIO.triggerEvent
  static WRAPPER = new EventType();

  // These messages are suppressed, use this to opt a PhetioObject out of the data stream feature.
  static OPT_OUT = new EventType();
  static enumeration = new js_Enumeration(EventType);
  static phetioType = types_EnumerationIO(EventType);
}
tandemNamespace.register('EventType', EventType);
/* harmony default export */ const js_EventType = (EventType);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbiIsIkVudW1lcmF0aW9uVmFsdWUiLCJUYW5kZW1Db25zdGFudHMiLCJ0YW5kZW1OYW1lc3BhY2UiLCJFbnVtZXJhdGlvbklPIiwiRXZlbnRUeXBlIiwiVVNFUiIsIkVWRU5UX1RZUEVfTU9ERUwiLCJXUkFQUEVSIiwiT1BUX09VVCIsImVudW1lcmF0aW9uIiwicGhldGlvVHlwZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRXZlbnRUeXBlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFRoaXMgY2hhcmFjdGVyaXplcyBldmVudHMgdGhhdCBtYXkgYmUgZW1pdHRlZCBmcm9tIFBoZXRpb09iamVjdHMgdG8gdGhlIFBoRVQtaU8gZGF0YSBzdHJlYW0uXG4gKlxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBFbnVtZXJhdGlvbiBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvRW51bWVyYXRpb24uanMnO1xuaW1wb3J0IEVudW1lcmF0aW9uVmFsdWUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL0VudW1lcmF0aW9uVmFsdWUuanMnO1xuaW1wb3J0IFRhbmRlbUNvbnN0YW50cyBmcm9tICcuL1RhbmRlbUNvbnN0YW50cy5qcyc7XG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4vdGFuZGVtTmFtZXNwYWNlLmpzJztcbmltcG9ydCBFbnVtZXJhdGlvbklPIGZyb20gJy4vdHlwZXMvRW51bWVyYXRpb25JTy5qcyc7XG5cbmNsYXNzIEV2ZW50VHlwZSBleHRlbmRzIEVudW1lcmF0aW9uVmFsdWUge1xuXG4gIC8vIFRoZSB1c2VyIGhhcyB0YWtlbiBhbiBhY3Rpb24sIHN1Y2ggYXMgcHJlc3NpbmcgYSBidXR0b24gb3IgbW92aW5nIGEgbW91c2VcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBVU0VSID0gbmV3IEV2ZW50VHlwZSgpO1xuXG4gIC8vIEFuIGV2ZW50IHdhcyBwcm9kdWNlZCBieSB0aGUgc2ltdWxhdGlvbiBtb2RlbC4gVGhpcyBjb3VsZCBiZSBpbiByZXNwb25zZSB0byBhIHVzZXIgZXZlbnQsIG9yIHNvbWV0aGluZyB0aGF0IGhhcHBlbnNcbiAgLy8gZHVyaW5nIHRoZSBzaW11bGF0aW9uIHN0ZXAuIE5vdGUgdGhlIHNlcGFyYXRpb24gaXMgbm90IG1vZGVsIHZzIHZpZXcsIGJ1dCB1c2VyLWRyaXZlbiB2cyBhdXRvbWF0aWMuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgWyBUYW5kZW1Db25zdGFudHMuRVZFTlRfVFlQRV9NT0RFTCBdID0gbmV3IEV2ZW50VHlwZSgpO1xuXG4gIC8vIEFuIGV2ZW50IHdhcyB0cmlnZ2VyZWQgYnkgdGhlIFBoRVQtaU8gd3JhcHBlciwgdmlhIFBoZXRpb0VuZ2luZUlPLnRyaWdnZXJFdmVudFxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFdSQVBQRVIgPSBuZXcgRXZlbnRUeXBlKCk7XG5cbiAgLy8gVGhlc2UgbWVzc2FnZXMgYXJlIHN1cHByZXNzZWQsIHVzZSB0aGlzIHRvIG9wdCBhIFBoZXRpb09iamVjdCBvdXQgb2YgdGhlIGRhdGEgc3RyZWFtIGZlYXR1cmUuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgT1BUX09VVCA9IG5ldyBFdmVudFR5cGUoKTtcblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGVudW1lcmF0aW9uID0gbmV3IEVudW1lcmF0aW9uKCBFdmVudFR5cGUgKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBwaGV0aW9UeXBlID0gRW51bWVyYXRpb25JTyggRXZlbnRUeXBlICk7XG59XG5cbnRhbmRlbU5hbWVzcGFjZS5yZWdpc3RlciggJ0V2ZW50VHlwZScsIEV2ZW50VHlwZSApO1xuZXhwb3J0IGRlZmF1bHQgRXZlbnRUeXBlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxXQUFXLE1BQU0sbUNBQW1DO0FBQzNELE9BQU9DLGdCQUFnQixNQUFNLHdDQUF3QztBQUNyRSxPQUFPQyxlQUFlLE1BQU0sc0JBQXNCO0FBQ2xELE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsYUFBYSxNQUFNLDBCQUEwQjtBQUVwRCxNQUFNQyxTQUFTLFNBQVNKLGdCQUFnQixDQUFDO0VBRXZDO0VBQ0EsT0FBdUJLLElBQUksR0FBRyxJQUFJRCxTQUFTLEVBQUU7O0VBRTdDO0VBQ0E7RUFDQSxRQUF5QkgsZUFBZSxDQUFDSyxnQkFBZ0IsSUFBSyxJQUFJRixTQUFTLEVBQUU7O0VBRTdFO0VBQ0EsT0FBdUJHLE9BQU8sR0FBRyxJQUFJSCxTQUFTLEVBQUU7O0VBRWhEO0VBQ0EsT0FBdUJJLE9BQU8sR0FBRyxJQUFJSixTQUFTLEVBQUU7RUFFaEQsT0FBdUJLLFdBQVcsR0FBRyxJQUFJVixXQUFXLENBQUVLLFNBQVMsQ0FBRTtFQUNqRSxPQUF1Qk0sVUFBVSxHQUFHUCxhQUFhLENBQUVDLFNBQVMsQ0FBRTtBQUNoRTtBQUVBRixlQUFlLENBQUNTLFFBQVEsQ0FBRSxXQUFXLEVBQUVQLFNBQVMsQ0FBRTtBQUNsRCxlQUFlQSxTQUFTIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/Tandem.js
// Copyright 2015-2023, University of Colorado Boulder

/**
 * Tandem defines a set of trees that are used to assign unique identifiers to PhetioObjects in PhET simulations and
 * notify listeners when the associated PhetioObjects have been added/removed. It is used to support PhET-iO.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */






// constants
// Tandem can't depend on joist, so cannot use packageJSON module
const packageJSON = _.hasIn(window, 'phet.chipper.packageObject') ? phet.chipper.packageObject : {
  name: 'placeholder'
};
const PHET_IO_ENABLED = _.hasIn(window, 'phet.preloads.phetio');
const PRINT_MISSING_TANDEMS = PHET_IO_ENABLED && phet.preloads.phetio.queryParameters.phetioPrintMissingTandems;

// Validation defaults to true, but can be overridden to be false in package.json.
const IS_VALIDATION_DEFAULT = _.hasIn(packageJSON, 'phet.phet-io.validation') ? !!packageJSON.phet['phet-io'].validation : true;

// The default value for validation can be overridden with a query parameter ?phetioValidation={true|false}.
const IS_VALIDATION_QUERY_PARAMETER_SPECIFIED = window.QueryStringMachine && QueryStringMachine.containsKey('phetioValidation');
const IS_VALIDATION_SPECIFIED = PHET_IO_ENABLED && IS_VALIDATION_QUERY_PARAMETER_SPECIFIED ? !!phet.preloads.phetio.queryParameters.phetioValidation : PHET_IO_ENABLED && IS_VALIDATION_DEFAULT;
const VALIDATION = PHET_IO_ENABLED && IS_VALIDATION_SPECIFIED && !PRINT_MISSING_TANDEMS;
const UNALLOWED_TANDEM_NAMES = ['pickableProperty'];
const REQUIRED_TANDEM_NAME = 'requiredTandem';
const OPTIONAL_TANDEM_NAME = 'optionalTandem';
const TEST_TANDEM_NAME = 'test';
const INTER_TERM_SEPARATOR = phetio.PhetioIDUtils.INTER_TERM_SEPARATOR;
const DYNAMIC_ARCHETYPE_NAME = 'archetype';

// used to keep track of missing tandems
const missingTandems = {
  required: [],
  optional: []
};
// Listeners that will be notified when items are registered/deregistered. See doc in addPhetioObjectListener
const phetioObjectListeners = [];

// keep track of listeners to fire when Tandem.launch() is called.
const launchListeners = [];
class Tandem {
  // Treat as readonly.  Only marked as writable so it can be eliminated on dispose

  // the last part of the tandem (after the last .), used e.g., in Joist for creating button
  // names dynamically based on screen names

  children = {};
  isDisposed = false;

  // Disabling lint rule because GroupTandem is a subtype

  // eslint-disable-line uppercase-statics-should-be-readonly

  static SCREEN_TANDEM_NAME_SUFFIX = 'Screen';

  /**
   * Typically, sims will create tandems using `tandem.createTandem`.  This constructor is used internally or when
   * a tandem must be created from scratch.
   *
   * @param parentTandem - parent for a child tandem, or null for a root tandem
   * @param name - component name for this level, like 'resetAllButton'
   * @param [providedOptions]
   */
  constructor(parentTandem, name, providedOptions) {
    assert && assert(parentTandem === null || parentTandem instanceof Tandem, 'parentTandem should be null or Tandem');
    assert && assert(name !== Tandem.METADATA_KEY, 'name cannot match Tandem.METADATA_KEY');
    this.parentTandem = parentTandem;
    this.name = name;
    this.phetioID = this.parentTandem ? window.phetio.PhetioIDUtils.append(this.parentTandem.phetioID, this.name) : this.name;

    // options (even subtype options) must be stored so they can be passed through to children
    // Note: Make sure that added options here are also added to options for inheritance and/or for composition
    // (createTandem/parentTandem/getExtendedOptions) as appropriate.
    const options = optionize()({
      // required === false means it is an optional tandem
      required: true,
      // if the tandem is required but not supplied, an error will be thrown.
      supplied: true,
      isValidTandemName: name => /^[a-zA-Z0-9[\],]+$/.test(name)
    }, providedOptions);
    assert && assert(options.isValidTandemName(name), `invalid tandem name: ${name}`);
    this.children = {};
    if (this.parentTandem) {
      assert && assert(!this.parentTandem.hasChild(name), `parent should not have child: ${name}`);
      this.parentTandem.addChild(name, this);
    }
    this.required = options.required;
    this.supplied = options.supplied;
  }

  /**
   * Returns the regular expression which can be used to test each term. The term must consist only of alpha-numeric
   * characters or tildes.
   */
  // protected getTermRegex(): RegExp {
  //   return /^[a-zA-Z0-9[\],-]+$/;
  // }

  /**
   * If the provided tandem is not supplied, support the ?printMissingTandems query parameter for extra logging during
   * initial instrumentation.
   */
  static onMissingTandem(tandem) {
    // When the query parameter phetioPrintMissingTandems is true, report tandems that are required but not supplied
    if (PRINT_MISSING_TANDEMS && !tandem.supplied) {
      const stackTrace = new Error().stack;
      if (tandem.required) {
        missingTandems.required.push({
          phetioID: tandem.phetioID,
          stack: stackTrace
        });
      } else {
        // When the query parameter phetioPrintMissingTandems is true, report tandems that are optional but not
        // supplied, but not for Fonts because they are too numerous.
        if (!stackTrace.includes('Font')) {
          missingTandems.optional.push({
            phetioID: tandem.phetioID,
            stack: stackTrace
          });
        }
      }
    }
  }

  /**
   * Adds a PhetioObject.  For example, it could be an axon Property, SCENERY/Node or SUN/RoundPushButton.
   * phetioEngine listens for when PhetioObjects are added and removed to keep track of them for PhET-iO.
   */
  addPhetioObject(phetioObject) {
    if (PHET_IO_ENABLED) {
      // Throw an error if the tandem is required but not supplied
      assert && Tandem.VALIDATION && assert(!(this.required && !this.supplied), 'Tandem was required but not supplied');

      // If tandem is optional and not supplied, then ignore it.
      if (!this.required && !this.supplied) {
        // Optionally instrumented types without tandems are not added.
        return;
      }
      if (!Tandem.launched) {
        Tandem.bufferedPhetioObjects.push(phetioObject);
      } else {
        for (let i = 0; i < phetioObjectListeners.length; i++) {
          phetioObjectListeners[i].addPhetioObject(phetioObject);
        }
      }
    }
  }

  /**
   * Returns true if this Tandem has the specified ancestor Tandem.
   */
  hasAncestor(ancestor) {
    return this.parentTandem === ancestor || !!(this.parentTandem && this.parentTandem.hasAncestor(ancestor));
  }

  /**
   * Removes a PhetioObject and signifies to listeners that it has been removed.
   */
  removePhetioObject(phetioObject) {
    if (!this.required && !this.supplied) {
      return;
    }

    // Only active when running as phet-io
    if (PHET_IO_ENABLED) {
      if (!Tandem.launched) {
        assert && assert(Tandem.bufferedPhetioObjects.includes(phetioObject), 'should contain item');
        js_arrayRemove(Tandem.bufferedPhetioObjects, phetioObject);
      } else {
        for (let i = 0; i < phetioObjectListeners.length; i++) {
          phetioObjectListeners[i].removePhetioObject(phetioObject);
        }
      }
    }
    phetioObject.tandem.dispose();
  }

  /**
   * Used for creating new tandems, extends this Tandem's options with the passed-in options.
   */
  getExtendedOptions(options) {
    // Any child of something should be passed all inherited options. Make sure that this extend call includes all
    // that make sense from the constructor's extend call.
    return js_merge({
      supplied: this.supplied,
      required: this.required
    }, options);
  }

  /**
   * Create a new Tandem by appending the given id, or if the child Tandem already exists, return it instead.
   */
  createTandem(name, options) {
    assert && Tandem.VALIDATION && assert(!UNALLOWED_TANDEM_NAMES.includes(name), 'tandem name is not allowed: ' + name);
    options = this.getExtendedOptions(options);

    // re-use the child if it already exists, but make sure it behaves the same.
    if (this.hasChild(name)) {
      const currentChild = this.children[name];
      assert && assert(currentChild.required === options.required);
      assert && assert(currentChild.supplied === options.supplied);
      return currentChild;
    } else {
      return new Tandem(this, name, options);
    }
  }
  hasChild(name) {
    return this.children.hasOwnProperty(name);
  }
  addChild(name, tandem) {
    assert && assert(!this.hasChild(name));
    this.children[name] = tandem;
  }

  /**
   * Fire a callback on all descendants of this Tandem
   */
  iterateDescendants(callback) {
    for (const childName in this.children) {
      if (this.children.hasOwnProperty(childName)) {
        callback(this.children[childName]);
        this.children[childName].iterateDescendants(callback);
      }
    }
  }
  removeChild(childName) {
    assert && assert(this.hasChild(childName));
    delete this.children[childName];
  }
  dispose() {
    assert && assert(!this.isDisposed, 'already disposed');
    this.parentTandem.removeChild(this.name);
    this.parentTandem = null;
    this.isDisposed = true;
  }

  /**
   * For API validation, each PhetioObject has a corresponding concrete PhetioObject for comparison. Non-dynamic
   * PhetioObjects have the trivial case where its archetypal phetioID is the same as its phetioID.
   */
  getArchetypalPhetioID() {
    // Dynamic elements always have a parent container, hence since this does not have a parent, it must already be concrete
    const result = this.parentTandem ? window.phetio.PhetioIDUtils.append(this.parentTandem.getArchetypalPhetioID(), this.name) : this.phetioID;

    // For https://github.com/phetsims/axon/issues/408, we need to access archetypes for Tandems from createTandemFromPhetioID
    if (result.includes('_')) {
      const terms = result.split(INTER_TERM_SEPARATOR);
      const mapped = terms.map(term => term.includes('_') ? DYNAMIC_ARCHETYPE_NAME : term);
      return mapped.join(INTER_TERM_SEPARATOR);
    } else {
      return result;
    }
  }

  /**
   * Creates a group tandem for creating multiple indexed child tandems, such as:
   * sim.screen.model.electron0
   * sim.screen.model.electron1
   *
   * In this case, 'sim.screen.model.electron' is the string passed to createGroupTandem.
   *
   * Used for arrays, observable arrays, or when many elements of the same type are created and they do not otherwise
   * have unique identifiers.
   */
  createGroupTandem(name) {
    if (this.children[name]) {
      return this.children[name];
    }
    return new GroupTandem(this, name);
  }
  equals(tandem) {
    return this.phetioID === tandem.phetioID;
  }

  /**
   * Adds a listener that will be notified when items are registered/deregistered
   */
  static addPhetioObjectListener(phetioObjectListener) {
    phetioObjectListeners.push(phetioObjectListener);
  }

  /**
   * After all listeners have been added, then Tandem can be launched.  This registers all of the buffered PhetioObjects
   * and subsequent PhetioObjects will be registered directly.
   */
  static launch() {
    assert && assert(!Tandem.launched, 'Tandem cannot be launched twice');
    Tandem.launched = true;
    while (launchListeners.length > 0) {
      launchListeners.shift()();
    }
    assert && assert(launchListeners.length === 0);
  }

  /**
   * ONLY FOR TESTING!!!!
   * This was created to "undo" launch so that tests can better expose cases around calling Tandem.launch()
   */
  static unlaunch() {
    Tandem.launched = false;
    Tandem.bufferedPhetioObjects.length = 0;
    launchListeners.length = 0;
  }

  /**
   * Add a listener that will fire when Tandem is launched
   */
  static addLaunchListener(listener) {
    assert && assert(!Tandem.launched, 'tandem has already been launched, cannot add listener for that hook.');
    launchListeners.push(listener);
  }

  /**
   * Expose collected missing tandems only populated from specific query parameter, see phetioPrintMissingTandems
   * (phet-io internal)
   */
  static missingTandems = missingTandems;

  /**
   * If PhET-iO is enabled in this runtime.
   */
  static PHET_IO_ENABLED = PHET_IO_ENABLED;

  /**
   * When generating an API (whether to output a file or for in-memory comparison), this is marked as true.
   */
  static API_GENERATION = Tandem.PHET_IO_ENABLED && (phet.preloads.phetio.queryParameters.phetioPrintAPI || phet.preloads.phetio.queryParameters.phetioCompareAPI);

  /**
   * If PhET-iO is running with validation enabled.
   */
  static VALIDATION = VALIDATION;

  /**
   * For the API file, the key name for the metadata section.
   */
  static METADATA_KEY = '_metadata';

  /**
   * For the API file, the key name for the data section.
   */
  static DATA_KEY = '_data';

  // Before listeners are wired up, tandems are buffered.  When listeners are wired up, Tandem.launch() is called and
  // buffered tandems are flushed, then subsequent tandems are delivered to listeners directly
  static launched = false;

  // a list of PhetioObjects ready to be sent out to listeners, but can't because Tandem hasn't been launched yet.
  static bufferedPhetioObjects = [];
  createTandemFromPhetioID(phetioID) {
    return this.createTandem(phetioID.split(window.phetio.PhetioIDUtils.SEPARATOR).join(INTER_TERM_SEPARATOR), {
      isValidTandemName: name => /^[a-zA-Z0-9[\],-_]+$/.test(name)
    });
  }
}
Tandem.addLaunchListener(() => {
  while (Tandem.bufferedPhetioObjects.length > 0) {
    const phetioObject = Tandem.bufferedPhetioObjects.shift();
    phetioObject.tandem.addPhetioObject(phetioObject);
  }
  assert && assert(Tandem.bufferedPhetioObjects.length === 0, 'bufferedPhetioObjects should be empty');
});
class RootTandem extends Tandem {
  /**
   * RootTandems only accept specifically named children.
   */
  createTandem(name, options) {
    if (Tandem.VALIDATION) {
      const allowedOnRoot = name === window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME || name === REQUIRED_TANDEM_NAME || name === OPTIONAL_TANDEM_NAME || name === TEST_TANDEM_NAME || name === window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME || _.endsWith(name, Tandem.SCREEN_TANDEM_NAME_SUFFIX);
      assert && assert(allowedOnRoot, `tandem name not allowed on root: "${name}"; perhaps try putting it under general or global`);
    }
    return super.createTandem(name, options);
  }
}

/**
 * The root tandem for a simulation
 */
Tandem.ROOT = new RootTandem(null, _.camelCase(packageJSON.name));

/**
 * Many simulation elements are nested under "general". This tandem is for elements that exists in all sims. For a
 * place to put simulation specific globals, see `GLOBAL`
 *
 * @constant
 * @type {Tandem}
 */
const GENERAL = Tandem.ROOT.createTandem(window.phetio.PhetioIDUtils.GENERAL_COMPONENT_NAME);

/**
 * Used in unit tests
 */
Tandem.ROOT_TEST = Tandem.ROOT.createTandem(TEST_TANDEM_NAME);

/**
 * Tandem for model simulation elements that are general to all sims.
 */
Tandem.GENERAL_MODEL = GENERAL.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME);

/**
 * Tandem for view simulation elements that are general to all sims.
 */
Tandem.GENERAL_VIEW = GENERAL.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME);

/**
 * Tandem for controller simulation elements that are general to all sims.
 */
Tandem.GENERAL_CONTROLLER = GENERAL.createTandem(window.phetio.PhetioIDUtils.CONTROLLER_COMPONENT_NAME);

/**
 * Simulation elements that don't belong in screens should be nested under "global". Note that this tandem should only
 * have simulation specific elements in them. Instrument items used by all sims under `Tandem.GENERAL`. Most
 * likely simulations elements should not be directly under this, but instead either under the model or view sub
 * tandems.
 *
 * @constant
 * @type {Tandem}
 */
const GLOBAL = Tandem.ROOT.createTandem(window.phetio.PhetioIDUtils.GLOBAL_COMPONENT_NAME);

/**
 * Model simulation elements that don't belong in specific screens should be nested under this Tandem. Note that this
 * tandem should only have simulation specific elements in them.
 */
Tandem.GLOBAL_MODEL = GLOBAL.createTandem(window.phetio.PhetioIDUtils.MODEL_COMPONENT_NAME);

/**
 * View simulation elements that don't belong in specific screens should be nested under this Tandem. Note that this
 * tandem should only have simulation specific elements in them.
 */
Tandem.GLOBAL_VIEW = GLOBAL.createTandem(window.phetio.PhetioIDUtils.VIEW_COMPONENT_NAME);

/**
 * Colors used in the simulation.
 */
Tandem.COLORS = Tandem.GLOBAL_VIEW.createTandem(window.phetio.PhetioIDUtils.COLORS_COMPONENT_NAME);

/**
 * Used to indicate a common code component that supports tandem, but doesn't not require it.  If a tandem is not
 * passed in, then it will not be instrumented.
 */
Tandem.OPTIONAL = Tandem.ROOT.createTandem(OPTIONAL_TANDEM_NAME, {
  required: false,
  supplied: false
});

/**
 * To be used exclusively to opt out of situations where a tandem is required, see https://github.com/phetsims/tandem/issues/97.
 */
Tandem.OPT_OUT = Tandem.OPTIONAL;

/**
 * Some common code (such as Checkbox or RadioButton) must always be instrumented.
 */
Tandem.REQUIRED = Tandem.ROOT.createTandem(REQUIRED_TANDEM_NAME, {
  // let phetioPrintMissingTandems bypass this
  required: VALIDATION || PRINT_MISSING_TANDEMS,
  supplied: false
});

/**
 * Use this as the parent tandem for Properties that are related to sim-specific preferences.
 */
Tandem.PREFERENCES = Tandem.GLOBAL_MODEL.createTandem('preferences');

/**
 * Group Tandem -- Declared in the same file to avoid circular reference errors in module loading.
 */
class GroupTandem extends Tandem {
  // for generating indices from a pool

  /**
   * create with Tandem.createGroupTandem
   */
  constructor(parentTandem, name) {
    super(parentTandem, name);
    this.groupName = name;
    this.groupMemberIndex = 0;
  }

  /**
   * Creates the next tandem in the group.
   */
  createNextTandem() {
    const tandem = this.parentTandem.createTandem(`${this.groupName}${this.groupMemberIndex}`);
    this.groupMemberIndex++;
    return tandem;
  }
}
tandemNamespace.register('Tandem', Tandem);
/* harmony default export */ const js_Tandem = (Tandem);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcnJheVJlbW92ZSIsIm1lcmdlIiwib3B0aW9uaXplIiwidGFuZGVtTmFtZXNwYWNlIiwicGFja2FnZUpTT04iLCJfIiwiaGFzSW4iLCJ3aW5kb3ciLCJwaGV0IiwiY2hpcHBlciIsInBhY2thZ2VPYmplY3QiLCJuYW1lIiwiUEhFVF9JT19FTkFCTEVEIiwiUFJJTlRfTUlTU0lOR19UQU5ERU1TIiwicHJlbG9hZHMiLCJwaGV0aW8iLCJxdWVyeVBhcmFtZXRlcnMiLCJwaGV0aW9QcmludE1pc3NpbmdUYW5kZW1zIiwiSVNfVkFMSURBVElPTl9ERUZBVUxUIiwidmFsaWRhdGlvbiIsIklTX1ZBTElEQVRJT05fUVVFUllfUEFSQU1FVEVSX1NQRUNJRklFRCIsIlF1ZXJ5U3RyaW5nTWFjaGluZSIsImNvbnRhaW5zS2V5IiwiSVNfVkFMSURBVElPTl9TUEVDSUZJRUQiLCJwaGV0aW9WYWxpZGF0aW9uIiwiVkFMSURBVElPTiIsIlVOQUxMT1dFRF9UQU5ERU1fTkFNRVMiLCJSRVFVSVJFRF9UQU5ERU1fTkFNRSIsIk9QVElPTkFMX1RBTkRFTV9OQU1FIiwiVEVTVF9UQU5ERU1fTkFNRSIsIklOVEVSX1RFUk1fU0VQQVJBVE9SIiwiUGhldGlvSURVdGlscyIsIkRZTkFNSUNfQVJDSEVUWVBFX05BTUUiLCJtaXNzaW5nVGFuZGVtcyIsInJlcXVpcmVkIiwib3B0aW9uYWwiLCJwaGV0aW9PYmplY3RMaXN0ZW5lcnMiLCJsYXVuY2hMaXN0ZW5lcnMiLCJUYW5kZW0iLCJjaGlsZHJlbiIsImlzRGlzcG9zZWQiLCJTQ1JFRU5fVEFOREVNX05BTUVfU1VGRklYIiwiY29uc3RydWN0b3IiLCJwYXJlbnRUYW5kZW0iLCJwcm92aWRlZE9wdGlvbnMiLCJhc3NlcnQiLCJNRVRBREFUQV9LRVkiLCJwaGV0aW9JRCIsImFwcGVuZCIsIm9wdGlvbnMiLCJzdXBwbGllZCIsImlzVmFsaWRUYW5kZW1OYW1lIiwidGVzdCIsImhhc0NoaWxkIiwiYWRkQ2hpbGQiLCJvbk1pc3NpbmdUYW5kZW0iLCJ0YW5kZW0iLCJzdGFja1RyYWNlIiwiRXJyb3IiLCJzdGFjayIsInB1c2giLCJpbmNsdWRlcyIsImFkZFBoZXRpb09iamVjdCIsInBoZXRpb09iamVjdCIsImxhdW5jaGVkIiwiYnVmZmVyZWRQaGV0aW9PYmplY3RzIiwiaSIsImxlbmd0aCIsImhhc0FuY2VzdG9yIiwiYW5jZXN0b3IiLCJyZW1vdmVQaGV0aW9PYmplY3QiLCJkaXNwb3NlIiwiZ2V0RXh0ZW5kZWRPcHRpb25zIiwiY3JlYXRlVGFuZGVtIiwiY3VycmVudENoaWxkIiwiaGFzT3duUHJvcGVydHkiLCJpdGVyYXRlRGVzY2VuZGFudHMiLCJjYWxsYmFjayIsImNoaWxkTmFtZSIsInJlbW92ZUNoaWxkIiwiZ2V0QXJjaGV0eXBhbFBoZXRpb0lEIiwicmVzdWx0IiwidGVybXMiLCJzcGxpdCIsIm1hcHBlZCIsIm1hcCIsInRlcm0iLCJqb2luIiwiY3JlYXRlR3JvdXBUYW5kZW0iLCJHcm91cFRhbmRlbSIsImVxdWFscyIsImFkZFBoZXRpb09iamVjdExpc3RlbmVyIiwicGhldGlvT2JqZWN0TGlzdGVuZXIiLCJsYXVuY2giLCJzaGlmdCIsInVubGF1bmNoIiwiYWRkTGF1bmNoTGlzdGVuZXIiLCJsaXN0ZW5lciIsIkFQSV9HRU5FUkFUSU9OIiwicGhldGlvUHJpbnRBUEkiLCJwaGV0aW9Db21wYXJlQVBJIiwiREFUQV9LRVkiLCJjcmVhdGVUYW5kZW1Gcm9tUGhldGlvSUQiLCJTRVBBUkFUT1IiLCJSb290VGFuZGVtIiwiYWxsb3dlZE9uUm9vdCIsIkdMT0JBTF9DT01QT05FTlRfTkFNRSIsIkdFTkVSQUxfQ09NUE9ORU5UX05BTUUiLCJlbmRzV2l0aCIsIlJPT1QiLCJjYW1lbENhc2UiLCJHRU5FUkFMIiwiUk9PVF9URVNUIiwiR0VORVJBTF9NT0RFTCIsIk1PREVMX0NPTVBPTkVOVF9OQU1FIiwiR0VORVJBTF9WSUVXIiwiVklFV19DT01QT05FTlRfTkFNRSIsIkdFTkVSQUxfQ09OVFJPTExFUiIsIkNPTlRST0xMRVJfQ09NUE9ORU5UX05BTUUiLCJHTE9CQUwiLCJHTE9CQUxfTU9ERUwiLCJHTE9CQUxfVklFVyIsIkNPTE9SUyIsIkNPTE9SU19DT01QT05FTlRfTkFNRSIsIk9QVElPTkFMIiwiT1BUX09VVCIsIlJFUVVJUkVEIiwiUFJFRkVSRU5DRVMiLCJncm91cE5hbWUiLCJncm91cE1lbWJlckluZGV4IiwiY3JlYXRlTmV4dFRhbmRlbSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVGFuZGVtLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFRhbmRlbSBkZWZpbmVzIGEgc2V0IG9mIHRyZWVzIHRoYXQgYXJlIHVzZWQgdG8gYXNzaWduIHVuaXF1ZSBpZGVudGlmaWVycyB0byBQaGV0aW9PYmplY3RzIGluIFBoRVQgc2ltdWxhdGlvbnMgYW5kXG4gKiBub3RpZnkgbGlzdGVuZXJzIHdoZW4gdGhlIGFzc29jaWF0ZWQgUGhldGlvT2JqZWN0cyBoYXZlIGJlZW4gYWRkZWQvcmVtb3ZlZC4gSXQgaXMgdXNlZCB0byBzdXBwb3J0IFBoRVQtaU8uXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgYXJyYXlSZW1vdmUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL2FycmF5UmVtb3ZlLmpzJztcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBQaGV0aW9PYmplY3QgZnJvbSAnLi9QaGV0aW9PYmplY3QuanMnO1xuaW1wb3J0IHsgUGhldGlvSUQgfSBmcm9tICcuL1RhbmRlbUNvbnN0YW50cy5qcyc7XG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4vdGFuZGVtTmFtZXNwYWNlLmpzJztcblxuLy8gY29uc3RhbnRzXG4vLyBUYW5kZW0gY2FuJ3QgZGVwZW5kIG9uIGpvaXN0LCBzbyBjYW5ub3QgdXNlIHBhY2thZ2VKU09OIG1vZHVsZVxuY29uc3QgcGFja2FnZUpTT04gPSBfLmhhc0luKCB3aW5kb3csICdwaGV0LmNoaXBwZXIucGFja2FnZU9iamVjdCcgKSA/IHBoZXQuY2hpcHBlci5wYWNrYWdlT2JqZWN0IDogeyBuYW1lOiAncGxhY2Vob2xkZXInIH07XG5cbmNvbnN0IFBIRVRfSU9fRU5BQkxFRCA9IF8uaGFzSW4oIHdpbmRvdywgJ3BoZXQucHJlbG9hZHMucGhldGlvJyApO1xuY29uc3QgUFJJTlRfTUlTU0lOR19UQU5ERU1TID0gUEhFVF9JT19FTkFCTEVEICYmIHBoZXQucHJlbG9hZHMucGhldGlvLnF1ZXJ5UGFyYW1ldGVycy5waGV0aW9QcmludE1pc3NpbmdUYW5kZW1zO1xuXG4vLyBWYWxpZGF0aW9uIGRlZmF1bHRzIHRvIHRydWUsIGJ1dCBjYW4gYmUgb3ZlcnJpZGRlbiB0byBiZSBmYWxzZSBpbiBwYWNrYWdlLmpzb24uXG5jb25zdCBJU19WQUxJREFUSU9OX0RFRkFVTFQgPSBfLmhhc0luKCBwYWNrYWdlSlNPTiwgJ3BoZXQucGhldC1pby52YWxpZGF0aW9uJyApID8gISFwYWNrYWdlSlNPTi5waGV0WyAncGhldC1pbycgXS52YWxpZGF0aW9uIDogdHJ1ZTtcblxuLy8gVGhlIGRlZmF1bHQgdmFsdWUgZm9yIHZhbGlkYXRpb24gY2FuIGJlIG92ZXJyaWRkZW4gd2l0aCBhIHF1ZXJ5IHBhcmFtZXRlciA/cGhldGlvVmFsaWRhdGlvbj17dHJ1ZXxmYWxzZX0uXG5jb25zdCBJU19WQUxJREFUSU9OX1FVRVJZX1BBUkFNRVRFUl9TUEVDSUZJRUQgPSB3aW5kb3cuUXVlcnlTdHJpbmdNYWNoaW5lICYmIFF1ZXJ5U3RyaW5nTWFjaGluZS5jb250YWluc0tleSggJ3BoZXRpb1ZhbGlkYXRpb24nICk7XG5jb25zdCBJU19WQUxJREFUSU9OX1NQRUNJRklFRCA9ICggUEhFVF9JT19FTkFCTEVEICYmIElTX1ZBTElEQVRJT05fUVVFUllfUEFSQU1FVEVSX1NQRUNJRklFRCApID8gISFwaGV0LnByZWxvYWRzLnBoZXRpby5xdWVyeVBhcmFtZXRlcnMucGhldGlvVmFsaWRhdGlvbiA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICggUEhFVF9JT19FTkFCTEVEICYmIElTX1ZBTElEQVRJT05fREVGQVVMVCApO1xuXG5jb25zdCBWQUxJREFUSU9OID0gUEhFVF9JT19FTkFCTEVEICYmIElTX1ZBTElEQVRJT05fU1BFQ0lGSUVEICYmICFQUklOVF9NSVNTSU5HX1RBTkRFTVM7XG5cbmNvbnN0IFVOQUxMT1dFRF9UQU5ERU1fTkFNRVMgPSBbICdwaWNrYWJsZVByb3BlcnR5JyBdO1xuXG5jb25zdCBSRVFVSVJFRF9UQU5ERU1fTkFNRSA9ICdyZXF1aXJlZFRhbmRlbSc7XG5jb25zdCBPUFRJT05BTF9UQU5ERU1fTkFNRSA9ICdvcHRpb25hbFRhbmRlbSc7XG5jb25zdCBURVNUX1RBTkRFTV9OQU1FID0gJ3Rlc3QnO1xuY29uc3QgSU5URVJfVEVSTV9TRVBBUkFUT1IgPSBwaGV0aW8uUGhldGlvSURVdGlscy5JTlRFUl9URVJNX1NFUEFSQVRPUjtcbmV4cG9ydCBjb25zdCBEWU5BTUlDX0FSQ0hFVFlQRV9OQU1FID0gJ2FyY2hldHlwZSc7XG5cbi8vIHVzZWQgdG8ga2VlcCB0cmFjayBvZiBtaXNzaW5nIHRhbmRlbXNcbmNvbnN0IG1pc3NpbmdUYW5kZW1zOiB7XG4gIHJlcXVpcmVkOiBBcnJheTx7IHBoZXRpb0lEOiBQaGV0aW9JRDsgc3RhY2s6IHN0cmluZyB9PjtcbiAgb3B0aW9uYWw6IEFycmF5PHsgcGhldGlvSUQ6IFBoZXRpb0lEOyBzdGFjazogc3RyaW5nIH0+O1xufSA9IHtcbiAgcmVxdWlyZWQ6IFtdLFxuICBvcHRpb25hbDogW11cbn07XG5cbnR5cGUgUGhldGlvT2JqZWN0TGlzdGVuZXIgPSB7XG4gIGFkZFBoZXRpb09iamVjdDogKCBwaGV0aW9PYmplY3Q6IFBoZXRpb09iamVjdCApID0+IHZvaWQ7XG4gIHJlbW92ZVBoZXRpb09iamVjdDogKCBwaGV0aW9PYmplY3Q6IFBoZXRpb09iamVjdCApID0+IHZvaWQ7XG59O1xuXG4vLyBMaXN0ZW5lcnMgdGhhdCB3aWxsIGJlIG5vdGlmaWVkIHdoZW4gaXRlbXMgYXJlIHJlZ2lzdGVyZWQvZGVyZWdpc3RlcmVkLiBTZWUgZG9jIGluIGFkZFBoZXRpb09iamVjdExpc3RlbmVyXG5jb25zdCBwaGV0aW9PYmplY3RMaXN0ZW5lcnM6IEFycmF5PFBoZXRpb09iamVjdExpc3RlbmVyPiA9IFtdO1xuXG4vLyBrZWVwIHRyYWNrIG9mIGxpc3RlbmVycyB0byBmaXJlIHdoZW4gVGFuZGVtLmxhdW5jaCgpIGlzIGNhbGxlZC5cbmNvbnN0IGxhdW5jaExpc3RlbmVyczogQXJyYXk8KCkgPT4gdm9pZD4gPSBbXTtcblxuZXhwb3J0IHR5cGUgVGFuZGVtT3B0aW9ucyA9IHtcbiAgcmVxdWlyZWQ/OiBib29sZWFuO1xuICBzdXBwbGllZD86IGJvb2xlYW47XG4gIGlzVmFsaWRUYW5kZW1OYW1lPzogKCBuYW1lOiBzdHJpbmcgKSA9PiBib29sZWFuO1xufTtcblxuY2xhc3MgVGFuZGVtIHtcblxuICAvLyBUcmVhdCBhcyByZWFkb25seS4gIE9ubHkgbWFya2VkIGFzIHdyaXRhYmxlIHNvIGl0IGNhbiBiZSBlbGltaW5hdGVkIG9uIGRpc3Bvc2VcbiAgcHVibGljIHBhcmVudFRhbmRlbTogVGFuZGVtIHwgbnVsbDtcblxuICAvLyB0aGUgbGFzdCBwYXJ0IG9mIHRoZSB0YW5kZW0gKGFmdGVyIHRoZSBsYXN0IC4pLCB1c2VkIGUuZy4sIGluIEpvaXN0IGZvciBjcmVhdGluZyBidXR0b25cbiAgLy8gbmFtZXMgZHluYW1pY2FsbHkgYmFzZWQgb24gc2NyZWVuIG5hbWVzXG4gIHB1YmxpYyByZWFkb25seSBuYW1lOiBzdHJpbmc7XG4gIHB1YmxpYyByZWFkb25seSBwaGV0aW9JRDogUGhldGlvSUQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgY2hpbGRyZW46IFJlY29yZDxzdHJpbmcsIFRhbmRlbT4gPSB7fTtcbiAgcHVibGljIHJlYWRvbmx5IHJlcXVpcmVkOiBib29sZWFuO1xuICBwdWJsaWMgcmVhZG9ubHkgc3VwcGxpZWQ6IGJvb2xlYW47XG4gIHByaXZhdGUgaXNEaXNwb3NlZCA9IGZhbHNlO1xuXG4gIC8vIERpc2FibGluZyBsaW50IHJ1bGUgYmVjYXVzZSBHcm91cFRhbmRlbSBpcyBhIHN1YnR5cGVcbiAgcHVibGljIHN0YXRpYyBST09UOiBSb290VGFuZGVtOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIFJPT1RfVEVTVDogVGFuZGVtOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIEdFTkVSQUxfTU9ERUw6IFRhbmRlbTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBHRU5FUkFMX1ZJRVc6IFRhbmRlbTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBHRU5FUkFMX0NPTlRST0xMRVI6IFRhbmRlbTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBHTE9CQUxfTU9ERUw6IFRhbmRlbTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBHTE9CQUxfVklFVzogVGFuZGVtOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIENPTE9SUzogVGFuZGVtOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIE9QVElPTkFMOiBUYW5kZW07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG4gIHB1YmxpYyBzdGF0aWMgT1BUX09VVDogVGFuZGVtOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIFJFUVVJUkVEOiBUYW5kZW07IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG4gIHB1YmxpYyBzdGF0aWMgUFJFRkVSRU5DRVM6IFRhbmRlbTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNDUkVFTl9UQU5ERU1fTkFNRV9TVUZGSVggPSAnU2NyZWVuJztcblxuICAvKipcbiAgICogVHlwaWNhbGx5LCBzaW1zIHdpbGwgY3JlYXRlIHRhbmRlbXMgdXNpbmcgYHRhbmRlbS5jcmVhdGVUYW5kZW1gLiAgVGhpcyBjb25zdHJ1Y3RvciBpcyB1c2VkIGludGVybmFsbHkgb3Igd2hlblxuICAgKiBhIHRhbmRlbSBtdXN0IGJlIGNyZWF0ZWQgZnJvbSBzY3JhdGNoLlxuICAgKlxuICAgKiBAcGFyYW0gcGFyZW50VGFuZGVtIC0gcGFyZW50IGZvciBhIGNoaWxkIHRhbmRlbSwgb3IgbnVsbCBmb3IgYSByb290IHRhbmRlbVxuICAgKiBAcGFyYW0gbmFtZSAtIGNvbXBvbmVudCBuYW1lIGZvciB0aGlzIGxldmVsLCBsaWtlICdyZXNldEFsbEJ1dHRvbidcbiAgICogQHBhcmFtIFtwcm92aWRlZE9wdGlvbnNdXG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoIHBhcmVudFRhbmRlbTogVGFuZGVtIHwgbnVsbCwgbmFtZTogc3RyaW5nLCBwcm92aWRlZE9wdGlvbnM/OiBUYW5kZW1PcHRpb25zICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHBhcmVudFRhbmRlbSA9PT0gbnVsbCB8fCBwYXJlbnRUYW5kZW0gaW5zdGFuY2VvZiBUYW5kZW0sICdwYXJlbnRUYW5kZW0gc2hvdWxkIGJlIG51bGwgb3IgVGFuZGVtJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG5hbWUgIT09IFRhbmRlbS5NRVRBREFUQV9LRVksICduYW1lIGNhbm5vdCBtYXRjaCBUYW5kZW0uTUVUQURBVEFfS0VZJyApO1xuXG4gICAgdGhpcy5wYXJlbnRUYW5kZW0gPSBwYXJlbnRUYW5kZW07XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcblxuICAgIHRoaXMucGhldGlvSUQgPSB0aGlzLnBhcmVudFRhbmRlbSA/IHdpbmRvdy5waGV0aW8uUGhldGlvSURVdGlscy5hcHBlbmQoIHRoaXMucGFyZW50VGFuZGVtLnBoZXRpb0lELCB0aGlzLm5hbWUgKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IHRoaXMubmFtZTtcblxuICAgIC8vIG9wdGlvbnMgKGV2ZW4gc3VidHlwZSBvcHRpb25zKSBtdXN0IGJlIHN0b3JlZCBzbyB0aGV5IGNhbiBiZSBwYXNzZWQgdGhyb3VnaCB0byBjaGlsZHJlblxuICAgIC8vIE5vdGU6IE1ha2Ugc3VyZSB0aGF0IGFkZGVkIG9wdGlvbnMgaGVyZSBhcmUgYWxzbyBhZGRlZCB0byBvcHRpb25zIGZvciBpbmhlcml0YW5jZSBhbmQvb3IgZm9yIGNvbXBvc2l0aW9uXG4gICAgLy8gKGNyZWF0ZVRhbmRlbS9wYXJlbnRUYW5kZW0vZ2V0RXh0ZW5kZWRPcHRpb25zKSBhcyBhcHByb3ByaWF0ZS5cbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFRhbmRlbU9wdGlvbnM+KCkoIHtcblxuICAgICAgLy8gcmVxdWlyZWQgPT09IGZhbHNlIG1lYW5zIGl0IGlzIGFuIG9wdGlvbmFsIHRhbmRlbVxuICAgICAgcmVxdWlyZWQ6IHRydWUsXG5cbiAgICAgIC8vIGlmIHRoZSB0YW5kZW0gaXMgcmVxdWlyZWQgYnV0IG5vdCBzdXBwbGllZCwgYW4gZXJyb3Igd2lsbCBiZSB0aHJvd24uXG4gICAgICBzdXBwbGllZDogdHJ1ZSxcblxuICAgICAgaXNWYWxpZFRhbmRlbU5hbWU6ICggbmFtZTogc3RyaW5nICkgPT4gL15bYS16QS1aMC05W1xcXSxdKyQvLnRlc3QoIG5hbWUgKVxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5pc1ZhbGlkVGFuZGVtTmFtZSggbmFtZSApLCBgaW52YWxpZCB0YW5kZW0gbmFtZTogJHtuYW1lfWAgKTtcblxuICAgIHRoaXMuY2hpbGRyZW4gPSB7fTtcblxuICAgIGlmICggdGhpcy5wYXJlbnRUYW5kZW0gKSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5wYXJlbnRUYW5kZW0uaGFzQ2hpbGQoIG5hbWUgKSwgYHBhcmVudCBzaG91bGQgbm90IGhhdmUgY2hpbGQ6ICR7bmFtZX1gICk7XG4gICAgICB0aGlzLnBhcmVudFRhbmRlbS5hZGRDaGlsZCggbmFtZSwgdGhpcyApO1xuICAgIH1cblxuICAgIHRoaXMucmVxdWlyZWQgPSBvcHRpb25zLnJlcXVpcmVkO1xuICAgIHRoaXMuc3VwcGxpZWQgPSBvcHRpb25zLnN1cHBsaWVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbiB3aGljaCBjYW4gYmUgdXNlZCB0byB0ZXN0IGVhY2ggdGVybS4gVGhlIHRlcm0gbXVzdCBjb25zaXN0IG9ubHkgb2YgYWxwaGEtbnVtZXJpY1xuICAgKiBjaGFyYWN0ZXJzIG9yIHRpbGRlcy5cbiAgICovXG4gIC8vIHByb3RlY3RlZCBnZXRUZXJtUmVnZXgoKTogUmVnRXhwIHtcbiAgLy8gICByZXR1cm4gL15bYS16QS1aMC05W1xcXSwtXSskLztcbiAgLy8gfVxuXG4gIC8qKlxuICAgKiBJZiB0aGUgcHJvdmlkZWQgdGFuZGVtIGlzIG5vdCBzdXBwbGllZCwgc3VwcG9ydCB0aGUgP3ByaW50TWlzc2luZ1RhbmRlbXMgcXVlcnkgcGFyYW1ldGVyIGZvciBleHRyYSBsb2dnaW5nIGR1cmluZ1xuICAgKiBpbml0aWFsIGluc3RydW1lbnRhdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgb25NaXNzaW5nVGFuZGVtKCB0YW5kZW06IFRhbmRlbSApOiB2b2lkIHtcblxuICAgIC8vIFdoZW4gdGhlIHF1ZXJ5IHBhcmFtZXRlciBwaGV0aW9QcmludE1pc3NpbmdUYW5kZW1zIGlzIHRydWUsIHJlcG9ydCB0YW5kZW1zIHRoYXQgYXJlIHJlcXVpcmVkIGJ1dCBub3Qgc3VwcGxpZWRcbiAgICBpZiAoIFBSSU5UX01JU1NJTkdfVEFOREVNUyAmJiAhdGFuZGVtLnN1cHBsaWVkICkge1xuICAgICAgY29uc3Qgc3RhY2tUcmFjZSA9IG5ldyBFcnJvcigpLnN0YWNrITtcbiAgICAgIGlmICggdGFuZGVtLnJlcXVpcmVkICkge1xuICAgICAgICBtaXNzaW5nVGFuZGVtcy5yZXF1aXJlZC5wdXNoKCB7IHBoZXRpb0lEOiB0YW5kZW0ucGhldGlvSUQsIHN0YWNrOiBzdGFja1RyYWNlIH0gKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuXG4gICAgICAgIC8vIFdoZW4gdGhlIHF1ZXJ5IHBhcmFtZXRlciBwaGV0aW9QcmludE1pc3NpbmdUYW5kZW1zIGlzIHRydWUsIHJlcG9ydCB0YW5kZW1zIHRoYXQgYXJlIG9wdGlvbmFsIGJ1dCBub3RcbiAgICAgICAgLy8gc3VwcGxpZWQsIGJ1dCBub3QgZm9yIEZvbnRzIGJlY2F1c2UgdGhleSBhcmUgdG9vIG51bWVyb3VzLlxuICAgICAgICBpZiAoICFzdGFja1RyYWNlLmluY2x1ZGVzKCAnRm9udCcgKSApIHtcbiAgICAgICAgICBtaXNzaW5nVGFuZGVtcy5vcHRpb25hbC5wdXNoKCB7IHBoZXRpb0lEOiB0YW5kZW0ucGhldGlvSUQsIHN0YWNrOiBzdGFja1RyYWNlIH0gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgUGhldGlvT2JqZWN0LiAgRm9yIGV4YW1wbGUsIGl0IGNvdWxkIGJlIGFuIGF4b24gUHJvcGVydHksIFNDRU5FUlkvTm9kZSBvciBTVU4vUm91bmRQdXNoQnV0dG9uLlxuICAgKiBwaGV0aW9FbmdpbmUgbGlzdGVucyBmb3Igd2hlbiBQaGV0aW9PYmplY3RzIGFyZSBhZGRlZCBhbmQgcmVtb3ZlZCB0byBrZWVwIHRyYWNrIG9mIHRoZW0gZm9yIFBoRVQtaU8uXG4gICAqL1xuICBwdWJsaWMgYWRkUGhldGlvT2JqZWN0KCBwaGV0aW9PYmplY3Q6IFBoZXRpb09iamVjdCApOiB2b2lkIHtcblxuICAgIGlmICggUEhFVF9JT19FTkFCTEVEICkge1xuXG4gICAgICAvLyBUaHJvdyBhbiBlcnJvciBpZiB0aGUgdGFuZGVtIGlzIHJlcXVpcmVkIGJ1dCBub3Qgc3VwcGxpZWRcbiAgICAgIGFzc2VydCAmJiBUYW5kZW0uVkFMSURBVElPTiAmJiBhc3NlcnQoICEoIHRoaXMucmVxdWlyZWQgJiYgIXRoaXMuc3VwcGxpZWQgKSwgJ1RhbmRlbSB3YXMgcmVxdWlyZWQgYnV0IG5vdCBzdXBwbGllZCcgKTtcblxuICAgICAgLy8gSWYgdGFuZGVtIGlzIG9wdGlvbmFsIGFuZCBub3Qgc3VwcGxpZWQsIHRoZW4gaWdub3JlIGl0LlxuICAgICAgaWYgKCAhdGhpcy5yZXF1aXJlZCAmJiAhdGhpcy5zdXBwbGllZCApIHtcblxuICAgICAgICAvLyBPcHRpb25hbGx5IGluc3RydW1lbnRlZCB0eXBlcyB3aXRob3V0IHRhbmRlbXMgYXJlIG5vdCBhZGRlZC5cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAoICFUYW5kZW0ubGF1bmNoZWQgKSB7XG4gICAgICAgIFRhbmRlbS5idWZmZXJlZFBoZXRpb09iamVjdHMucHVzaCggcGhldGlvT2JqZWN0ICk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgcGhldGlvT2JqZWN0TGlzdGVuZXJzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAgIHBoZXRpb09iamVjdExpc3RlbmVyc1sgaSBdLmFkZFBoZXRpb09iamVjdCggcGhldGlvT2JqZWN0ICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgVGFuZGVtIGhhcyB0aGUgc3BlY2lmaWVkIGFuY2VzdG9yIFRhbmRlbS5cbiAgICovXG4gIHB1YmxpYyBoYXNBbmNlc3RvciggYW5jZXN0b3I6IFRhbmRlbSApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5wYXJlbnRUYW5kZW0gPT09IGFuY2VzdG9yIHx8ICEhKCB0aGlzLnBhcmVudFRhbmRlbSAmJiB0aGlzLnBhcmVudFRhbmRlbS5oYXNBbmNlc3RvciggYW5jZXN0b3IgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBQaGV0aW9PYmplY3QgYW5kIHNpZ25pZmllcyB0byBsaXN0ZW5lcnMgdGhhdCBpdCBoYXMgYmVlbiByZW1vdmVkLlxuICAgKi9cbiAgcHVibGljIHJlbW92ZVBoZXRpb09iamVjdCggcGhldGlvT2JqZWN0OiBQaGV0aW9PYmplY3QgKTogdm9pZCB7XG5cbiAgICBpZiAoICF0aGlzLnJlcXVpcmVkICYmICF0aGlzLnN1cHBsaWVkICkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE9ubHkgYWN0aXZlIHdoZW4gcnVubmluZyBhcyBwaGV0LWlvXG4gICAgaWYgKCBQSEVUX0lPX0VOQUJMRUQgKSB7XG4gICAgICBpZiAoICFUYW5kZW0ubGF1bmNoZWQgKSB7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIFRhbmRlbS5idWZmZXJlZFBoZXRpb09iamVjdHMuaW5jbHVkZXMoIHBoZXRpb09iamVjdCApLCAnc2hvdWxkIGNvbnRhaW4gaXRlbScgKTtcbiAgICAgICAgYXJyYXlSZW1vdmUoIFRhbmRlbS5idWZmZXJlZFBoZXRpb09iamVjdHMsIHBoZXRpb09iamVjdCApO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHBoZXRpb09iamVjdExpc3RlbmVycy5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICBwaGV0aW9PYmplY3RMaXN0ZW5lcnNbIGkgXS5yZW1vdmVQaGV0aW9PYmplY3QoIHBoZXRpb09iamVjdCApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcGhldGlvT2JqZWN0LnRhbmRlbS5kaXNwb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBmb3IgY3JlYXRpbmcgbmV3IHRhbmRlbXMsIGV4dGVuZHMgdGhpcyBUYW5kZW0ncyBvcHRpb25zIHdpdGggdGhlIHBhc3NlZC1pbiBvcHRpb25zLlxuICAgKi9cbiAgcHVibGljIGdldEV4dGVuZGVkT3B0aW9ucyggb3B0aW9ucz86IFRhbmRlbU9wdGlvbnMgKTogVGFuZGVtT3B0aW9ucyB7XG5cbiAgICAvLyBBbnkgY2hpbGQgb2Ygc29tZXRoaW5nIHNob3VsZCBiZSBwYXNzZWQgYWxsIGluaGVyaXRlZCBvcHRpb25zLiBNYWtlIHN1cmUgdGhhdCB0aGlzIGV4dGVuZCBjYWxsIGluY2x1ZGVzIGFsbFxuICAgIC8vIHRoYXQgbWFrZSBzZW5zZSBmcm9tIHRoZSBjb25zdHJ1Y3RvcidzIGV4dGVuZCBjYWxsLlxuICAgIHJldHVybiBtZXJnZSgge1xuICAgICAgc3VwcGxpZWQ6IHRoaXMuc3VwcGxpZWQsXG4gICAgICByZXF1aXJlZDogdGhpcy5yZXF1aXJlZFxuICAgIH0sIG9wdGlvbnMgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgVGFuZGVtIGJ5IGFwcGVuZGluZyB0aGUgZ2l2ZW4gaWQsIG9yIGlmIHRoZSBjaGlsZCBUYW5kZW0gYWxyZWFkeSBleGlzdHMsIHJldHVybiBpdCBpbnN0ZWFkLlxuICAgKi9cbiAgcHVibGljIGNyZWF0ZVRhbmRlbSggbmFtZTogc3RyaW5nLCBvcHRpb25zPzogVGFuZGVtT3B0aW9ucyApOiBUYW5kZW0ge1xuICAgIGFzc2VydCAmJiBUYW5kZW0uVkFMSURBVElPTiAmJiBhc3NlcnQoICFVTkFMTE9XRURfVEFOREVNX05BTUVTLmluY2x1ZGVzKCBuYW1lICksICd0YW5kZW0gbmFtZSBpcyBub3QgYWxsb3dlZDogJyArIG5hbWUgKTtcblxuICAgIG9wdGlvbnMgPSB0aGlzLmdldEV4dGVuZGVkT3B0aW9ucyggb3B0aW9ucyApO1xuXG4gICAgLy8gcmUtdXNlIHRoZSBjaGlsZCBpZiBpdCBhbHJlYWR5IGV4aXN0cywgYnV0IG1ha2Ugc3VyZSBpdCBiZWhhdmVzIHRoZSBzYW1lLlxuICAgIGlmICggdGhpcy5oYXNDaGlsZCggbmFtZSApICkge1xuICAgICAgY29uc3QgY3VycmVudENoaWxkID0gdGhpcy5jaGlsZHJlblsgbmFtZSBdO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggY3VycmVudENoaWxkLnJlcXVpcmVkID09PSBvcHRpb25zLnJlcXVpcmVkICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjdXJyZW50Q2hpbGQuc3VwcGxpZWQgPT09IG9wdGlvbnMuc3VwcGxpZWQgKTtcbiAgICAgIHJldHVybiBjdXJyZW50Q2hpbGQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBUYW5kZW0oIHRoaXMsIG5hbWUsIG9wdGlvbnMgKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgaGFzQ2hpbGQoIG5hbWU6IHN0cmluZyApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5jaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eSggbmFtZSApO1xuICB9XG5cbiAgcHVibGljIGFkZENoaWxkKCBuYW1lOiBzdHJpbmcsIHRhbmRlbTogVGFuZGVtICk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmhhc0NoaWxkKCBuYW1lICkgKTtcbiAgICB0aGlzLmNoaWxkcmVuWyBuYW1lIF0gPSB0YW5kZW07XG4gIH1cblxuICAvKipcbiAgICogRmlyZSBhIGNhbGxiYWNrIG9uIGFsbCBkZXNjZW5kYW50cyBvZiB0aGlzIFRhbmRlbVxuICAgKi9cbiAgcHVibGljIGl0ZXJhdGVEZXNjZW5kYW50cyggY2FsbGJhY2s6ICggdDogVGFuZGVtICkgPT4gdm9pZCApOiB2b2lkIHtcbiAgICBmb3IgKCBjb25zdCBjaGlsZE5hbWUgaW4gdGhpcy5jaGlsZHJlbiApIHtcbiAgICAgIGlmICggdGhpcy5jaGlsZHJlbi5oYXNPd25Qcm9wZXJ0eSggY2hpbGROYW1lICkgKSB7XG4gICAgICAgIGNhbGxiYWNrKCB0aGlzLmNoaWxkcmVuWyBjaGlsZE5hbWUgXSApO1xuICAgICAgICB0aGlzLmNoaWxkcmVuWyBjaGlsZE5hbWUgXS5pdGVyYXRlRGVzY2VuZGFudHMoIGNhbGxiYWNrICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSByZW1vdmVDaGlsZCggY2hpbGROYW1lOiBzdHJpbmcgKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5oYXNDaGlsZCggY2hpbGROYW1lICkgKTtcbiAgICBkZWxldGUgdGhpcy5jaGlsZHJlblsgY2hpbGROYW1lIF07XG4gIH1cblxuICBwcml2YXRlIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuaXNEaXNwb3NlZCwgJ2FscmVhZHkgZGlzcG9zZWQnICk7XG5cbiAgICB0aGlzLnBhcmVudFRhbmRlbSEucmVtb3ZlQ2hpbGQoIHRoaXMubmFtZSApO1xuICAgIHRoaXMucGFyZW50VGFuZGVtID0gbnVsbDtcblxuICAgIHRoaXMuaXNEaXNwb3NlZCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9yIEFQSSB2YWxpZGF0aW9uLCBlYWNoIFBoZXRpb09iamVjdCBoYXMgYSBjb3JyZXNwb25kaW5nIGNvbmNyZXRlIFBoZXRpb09iamVjdCBmb3IgY29tcGFyaXNvbi4gTm9uLWR5bmFtaWNcbiAgICogUGhldGlvT2JqZWN0cyBoYXZlIHRoZSB0cml2aWFsIGNhc2Ugd2hlcmUgaXRzIGFyY2hldHlwYWwgcGhldGlvSUQgaXMgdGhlIHNhbWUgYXMgaXRzIHBoZXRpb0lELlxuICAgKi9cbiAgcHVibGljIGdldEFyY2hldHlwYWxQaGV0aW9JRCgpOiBQaGV0aW9JRCB7XG5cbiAgICAvLyBEeW5hbWljIGVsZW1lbnRzIGFsd2F5cyBoYXZlIGEgcGFyZW50IGNvbnRhaW5lciwgaGVuY2Ugc2luY2UgdGhpcyBkb2VzIG5vdCBoYXZlIGEgcGFyZW50LCBpdCBtdXN0IGFscmVhZHkgYmUgY29uY3JldGVcbiAgICBjb25zdCByZXN1bHQ6IFBoZXRpb0lEID0gdGhpcy5wYXJlbnRUYW5kZW0gPyB3aW5kb3cucGhldGlvLlBoZXRpb0lEVXRpbHMuYXBwZW5kKCB0aGlzLnBhcmVudFRhbmRlbS5nZXRBcmNoZXR5cGFsUGhldGlvSUQoKSwgdGhpcy5uYW1lICkgOiB0aGlzLnBoZXRpb0lEO1xuXG4gICAgLy8gRm9yIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9heG9uL2lzc3Vlcy80MDgsIHdlIG5lZWQgdG8gYWNjZXNzIGFyY2hldHlwZXMgZm9yIFRhbmRlbXMgZnJvbSBjcmVhdGVUYW5kZW1Gcm9tUGhldGlvSURcbiAgICBpZiAoIHJlc3VsdC5pbmNsdWRlcyggJ18nICkgKSB7XG4gICAgICBjb25zdCB0ZXJtcyA9IHJlc3VsdC5zcGxpdCggSU5URVJfVEVSTV9TRVBBUkFUT1IgKTtcbiAgICAgIGNvbnN0IG1hcHBlZCA9IHRlcm1zLm1hcCggdGVybSA9PiB0ZXJtLmluY2x1ZGVzKCAnXycgKSA/IERZTkFNSUNfQVJDSEVUWVBFX05BTUUgOiB0ZXJtICk7XG4gICAgICByZXR1cm4gbWFwcGVkLmpvaW4oIElOVEVSX1RFUk1fU0VQQVJBVE9SICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGdyb3VwIHRhbmRlbSBmb3IgY3JlYXRpbmcgbXVsdGlwbGUgaW5kZXhlZCBjaGlsZCB0YW5kZW1zLCBzdWNoIGFzOlxuICAgKiBzaW0uc2NyZWVuLm1vZGVsLmVsZWN0cm9uMFxuICAgKiBzaW0uc2NyZWVuLm1vZGVsLmVsZWN0cm9uMVxuICAgKlxuICAgKiBJbiB0aGlzIGNhc2UsICdzaW0uc2NyZWVuLm1vZGVsLmVsZWN0cm9uJyBpcyB0aGUgc3RyaW5nIHBhc3NlZCB0byBjcmVhdGVHcm91cFRhbmRlbS5cbiAgICpcbiAgICogVXNlZCBmb3IgYXJyYXlzLCBvYnNlcnZhYmxlIGFycmF5cywgb3Igd2hlbiBtYW55IGVsZW1lbnRzIG9mIHRoZSBzYW1lIHR5cGUgYXJlIGNyZWF0ZWQgYW5kIHRoZXkgZG8gbm90IG90aGVyd2lzZVxuICAgKiBoYXZlIHVuaXF1ZSBpZGVudGlmaWVycy5cbiAgICovXG4gIHB1YmxpYyBjcmVhdGVHcm91cFRhbmRlbSggbmFtZTogc3RyaW5nICk6IEdyb3VwVGFuZGVtIHtcbiAgICBpZiAoIHRoaXMuY2hpbGRyZW5bIG5hbWUgXSApIHtcbiAgICAgIHJldHVybiB0aGlzLmNoaWxkcmVuWyBuYW1lIF0gYXMgR3JvdXBUYW5kZW07XG4gICAgfVxuICAgIHJldHVybiBuZXcgR3JvdXBUYW5kZW0oIHRoaXMsIG5hbWUgKTtcbiAgfVxuXG4gIHB1YmxpYyBlcXVhbHMoIHRhbmRlbTogVGFuZGVtICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnBoZXRpb0lEID09PSB0YW5kZW0ucGhldGlvSUQ7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBub3RpZmllZCB3aGVuIGl0ZW1zIGFyZSByZWdpc3RlcmVkL2RlcmVnaXN0ZXJlZFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhZGRQaGV0aW9PYmplY3RMaXN0ZW5lciggcGhldGlvT2JqZWN0TGlzdGVuZXI6IFBoZXRpb09iamVjdExpc3RlbmVyICk6IHZvaWQge1xuICAgIHBoZXRpb09iamVjdExpc3RlbmVycy5wdXNoKCBwaGV0aW9PYmplY3RMaXN0ZW5lciApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFmdGVyIGFsbCBsaXN0ZW5lcnMgaGF2ZSBiZWVuIGFkZGVkLCB0aGVuIFRhbmRlbSBjYW4gYmUgbGF1bmNoZWQuICBUaGlzIHJlZ2lzdGVycyBhbGwgb2YgdGhlIGJ1ZmZlcmVkIFBoZXRpb09iamVjdHNcbiAgICogYW5kIHN1YnNlcXVlbnQgUGhldGlvT2JqZWN0cyB3aWxsIGJlIHJlZ2lzdGVyZWQgZGlyZWN0bHkuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGxhdW5jaCgpOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhVGFuZGVtLmxhdW5jaGVkLCAnVGFuZGVtIGNhbm5vdCBiZSBsYXVuY2hlZCB0d2ljZScgKTtcbiAgICBUYW5kZW0ubGF1bmNoZWQgPSB0cnVlO1xuXG4gICAgd2hpbGUgKCBsYXVuY2hMaXN0ZW5lcnMubGVuZ3RoID4gMCApIHtcbiAgICAgIGxhdW5jaExpc3RlbmVycy5zaGlmdCgpISgpO1xuICAgIH1cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsYXVuY2hMaXN0ZW5lcnMubGVuZ3RoID09PSAwICk7XG4gIH1cblxuICAvKipcbiAgICogT05MWSBGT1IgVEVTVElORyEhISFcbiAgICogVGhpcyB3YXMgY3JlYXRlZCB0byBcInVuZG9cIiBsYXVuY2ggc28gdGhhdCB0ZXN0cyBjYW4gYmV0dGVyIGV4cG9zZSBjYXNlcyBhcm91bmQgY2FsbGluZyBUYW5kZW0ubGF1bmNoKClcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgdW5sYXVuY2goKTogdm9pZCB7XG4gICAgVGFuZGVtLmxhdW5jaGVkID0gZmFsc2U7XG4gICAgVGFuZGVtLmJ1ZmZlcmVkUGhldGlvT2JqZWN0cy5sZW5ndGggPSAwO1xuICAgIGxhdW5jaExpc3RlbmVycy5sZW5ndGggPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGxpc3RlbmVyIHRoYXQgd2lsbCBmaXJlIHdoZW4gVGFuZGVtIGlzIGxhdW5jaGVkXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGFkZExhdW5jaExpc3RlbmVyKCBsaXN0ZW5lcjogKCkgPT4gdm9pZCApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhVGFuZGVtLmxhdW5jaGVkLCAndGFuZGVtIGhhcyBhbHJlYWR5IGJlZW4gbGF1bmNoZWQsIGNhbm5vdCBhZGQgbGlzdGVuZXIgZm9yIHRoYXQgaG9vay4nICk7XG4gICAgbGF1bmNoTGlzdGVuZXJzLnB1c2goIGxpc3RlbmVyICk7XG4gIH1cblxuICAvKipcbiAgICogRXhwb3NlIGNvbGxlY3RlZCBtaXNzaW5nIHRhbmRlbXMgb25seSBwb3B1bGF0ZWQgZnJvbSBzcGVjaWZpYyBxdWVyeSBwYXJhbWV0ZXIsIHNlZSBwaGV0aW9QcmludE1pc3NpbmdUYW5kZW1zXG4gICAqIChwaGV0LWlvIGludGVybmFsKVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBtaXNzaW5nVGFuZGVtcyA9IG1pc3NpbmdUYW5kZW1zO1xuXG4gIC8qKlxuICAgKiBJZiBQaEVULWlPIGlzIGVuYWJsZWQgaW4gdGhpcyBydW50aW1lLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBQSEVUX0lPX0VOQUJMRUQgPSBQSEVUX0lPX0VOQUJMRUQ7XG5cbiAgLyoqXG4gICAqIFdoZW4gZ2VuZXJhdGluZyBhbiBBUEkgKHdoZXRoZXIgdG8gb3V0cHV0IGEgZmlsZSBvciBmb3IgaW4tbWVtb3J5IGNvbXBhcmlzb24pLCB0aGlzIGlzIG1hcmtlZCBhcyB0cnVlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBBUElfR0VORVJBVElPTiA9IFRhbmRlbS5QSEVUX0lPX0VOQUJMRUQgJiYgKCBwaGV0LnByZWxvYWRzLnBoZXRpby5xdWVyeVBhcmFtZXRlcnMucGhldGlvUHJpbnRBUEkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaGV0LnByZWxvYWRzLnBoZXRpby5xdWVyeVBhcmFtZXRlcnMucGhldGlvQ29tcGFyZUFQSSApO1xuXG4gIC8qKlxuICAgKiBJZiBQaEVULWlPIGlzIHJ1bm5pbmcgd2l0aCB2YWxpZGF0aW9uIGVuYWJsZWQuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFZBTElEQVRJT04gPSBWQUxJREFUSU9OO1xuXG4gIC8qKlxuICAgKiBGb3IgdGhlIEFQSSBmaWxlLCB0aGUga2V5IG5hbWUgZm9yIHRoZSBtZXRhZGF0YSBzZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBNRVRBREFUQV9LRVkgPSAnX21ldGFkYXRhJztcblxuICAvKipcbiAgICogRm9yIHRoZSBBUEkgZmlsZSwgdGhlIGtleSBuYW1lIGZvciB0aGUgZGF0YSBzZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBEQVRBX0tFWSA9ICdfZGF0YSc7XG5cbiAgLy8gQmVmb3JlIGxpc3RlbmVycyBhcmUgd2lyZWQgdXAsIHRhbmRlbXMgYXJlIGJ1ZmZlcmVkLiAgV2hlbiBsaXN0ZW5lcnMgYXJlIHdpcmVkIHVwLCBUYW5kZW0ubGF1bmNoKCkgaXMgY2FsbGVkIGFuZFxuICAvLyBidWZmZXJlZCB0YW5kZW1zIGFyZSBmbHVzaGVkLCB0aGVuIHN1YnNlcXVlbnQgdGFuZGVtcyBhcmUgZGVsaXZlcmVkIHRvIGxpc3RlbmVycyBkaXJlY3RseVxuICBwdWJsaWMgc3RhdGljIGxhdW5jaGVkID0gZmFsc2U7XG5cbiAgLy8gYSBsaXN0IG9mIFBoZXRpb09iamVjdHMgcmVhZHkgdG8gYmUgc2VudCBvdXQgdG8gbGlzdGVuZXJzLCBidXQgY2FuJ3QgYmVjYXVzZSBUYW5kZW0gaGFzbid0IGJlZW4gbGF1bmNoZWQgeWV0LlxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGJ1ZmZlcmVkUGhldGlvT2JqZWN0czogUGhldGlvT2JqZWN0W10gPSBbXTtcblxuICBwdWJsaWMgY3JlYXRlVGFuZGVtRnJvbVBoZXRpb0lEKCBwaGV0aW9JRDogUGhldGlvSUQgKTogVGFuZGVtIHtcbiAgICByZXR1cm4gdGhpcy5jcmVhdGVUYW5kZW0oIHBoZXRpb0lELnNwbGl0KCB3aW5kb3cucGhldGlvLlBoZXRpb0lEVXRpbHMuU0VQQVJBVE9SICkuam9pbiggSU5URVJfVEVSTV9TRVBBUkFUT1IgKSwge1xuICAgICAgaXNWYWxpZFRhbmRlbU5hbWU6ICggbmFtZTogc3RyaW5nICkgPT4gL15bYS16QS1aMC05W1xcXSwtX10rJC8udGVzdCggbmFtZSApXG4gICAgfSApO1xuICB9XG59XG5cblRhbmRlbS5hZGRMYXVuY2hMaXN0ZW5lciggKCkgPT4ge1xuICB3aGlsZSAoIFRhbmRlbS5idWZmZXJlZFBoZXRpb09iamVjdHMubGVuZ3RoID4gMCApIHtcbiAgICBjb25zdCBwaGV0aW9PYmplY3QgPSBUYW5kZW0uYnVmZmVyZWRQaGV0aW9PYmplY3RzLnNoaWZ0KCk7XG4gICAgcGhldGlvT2JqZWN0IS50YW5kZW0uYWRkUGhldGlvT2JqZWN0KCBwaGV0aW9PYmplY3QhICk7XG4gIH1cbiAgYXNzZXJ0ICYmIGFzc2VydCggVGFuZGVtLmJ1ZmZlcmVkUGhldGlvT2JqZWN0cy5sZW5ndGggPT09IDAsICdidWZmZXJlZFBoZXRpb09iamVjdHMgc2hvdWxkIGJlIGVtcHR5JyApO1xufSApO1xuXG5jbGFzcyBSb290VGFuZGVtIGV4dGVuZHMgVGFuZGVtIHtcblxuICAvKipcbiAgICogUm9vdFRhbmRlbXMgb25seSBhY2NlcHQgc3BlY2lmaWNhbGx5IG5hbWVkIGNoaWxkcmVuLlxuICAgKi9cbiAgcHVibGljIG92ZXJyaWRlIGNyZWF0ZVRhbmRlbSggbmFtZTogc3RyaW5nLCBvcHRpb25zPzogVGFuZGVtT3B0aW9ucyApOiBUYW5kZW0ge1xuICAgIGlmICggVGFuZGVtLlZBTElEQVRJT04gKSB7XG4gICAgICBjb25zdCBhbGxvd2VkT25Sb290ID0gbmFtZSA9PT0gd2luZG93LnBoZXRpby5QaGV0aW9JRFV0aWxzLkdMT0JBTF9DT01QT05FTlRfTkFNRSB8fFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWUgPT09IFJFUVVJUkVEX1RBTkRFTV9OQU1FIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9PT0gT1BUSU9OQUxfVEFOREVNX05BTUUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lID09PSBURVNUX1RBTkRFTV9OQU1FIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9PT0gd2luZG93LnBoZXRpby5QaGV0aW9JRFV0aWxzLkdFTkVSQUxfQ09NUE9ORU5UX05BTUUgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmVuZHNXaXRoKCBuYW1lLCBUYW5kZW0uU0NSRUVOX1RBTkRFTV9OQU1FX1NVRkZJWCApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggYWxsb3dlZE9uUm9vdCwgYHRhbmRlbSBuYW1lIG5vdCBhbGxvd2VkIG9uIHJvb3Q6IFwiJHtuYW1lfVwiOyBwZXJoYXBzIHRyeSBwdXR0aW5nIGl0IHVuZGVyIGdlbmVyYWwgb3IgZ2xvYmFsYCApO1xuICAgIH1cblxuICAgIHJldHVybiBzdXBlci5jcmVhdGVUYW5kZW0oIG5hbWUsIG9wdGlvbnMgKTtcbiAgfVxufVxuXG4vKipcbiAqIFRoZSByb290IHRhbmRlbSBmb3IgYSBzaW11bGF0aW9uXG4gKi9cblRhbmRlbS5ST09UID0gbmV3IFJvb3RUYW5kZW0oIG51bGwsIF8uY2FtZWxDYXNlKCBwYWNrYWdlSlNPTi5uYW1lICkgKTtcblxuLyoqXG4gKiBNYW55IHNpbXVsYXRpb24gZWxlbWVudHMgYXJlIG5lc3RlZCB1bmRlciBcImdlbmVyYWxcIi4gVGhpcyB0YW5kZW0gaXMgZm9yIGVsZW1lbnRzIHRoYXQgZXhpc3RzIGluIGFsbCBzaW1zLiBGb3IgYVxuICogcGxhY2UgdG8gcHV0IHNpbXVsYXRpb24gc3BlY2lmaWMgZ2xvYmFscywgc2VlIGBHTE9CQUxgXG4gKlxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7VGFuZGVtfVxuICovXG5jb25zdCBHRU5FUkFMID0gVGFuZGVtLlJPT1QuY3JlYXRlVGFuZGVtKCB3aW5kb3cucGhldGlvLlBoZXRpb0lEVXRpbHMuR0VORVJBTF9DT01QT05FTlRfTkFNRSApO1xuXG4vKipcbiAqIFVzZWQgaW4gdW5pdCB0ZXN0c1xuICovXG5UYW5kZW0uUk9PVF9URVNUID0gVGFuZGVtLlJPT1QuY3JlYXRlVGFuZGVtKCBURVNUX1RBTkRFTV9OQU1FICk7XG5cbi8qKlxuICogVGFuZGVtIGZvciBtb2RlbCBzaW11bGF0aW9uIGVsZW1lbnRzIHRoYXQgYXJlIGdlbmVyYWwgdG8gYWxsIHNpbXMuXG4gKi9cblRhbmRlbS5HRU5FUkFMX01PREVMID0gR0VORVJBTC5jcmVhdGVUYW5kZW0oIHdpbmRvdy5waGV0aW8uUGhldGlvSURVdGlscy5NT0RFTF9DT01QT05FTlRfTkFNRSApO1xuXG4vKipcbiAqIFRhbmRlbSBmb3IgdmlldyBzaW11bGF0aW9uIGVsZW1lbnRzIHRoYXQgYXJlIGdlbmVyYWwgdG8gYWxsIHNpbXMuXG4gKi9cblRhbmRlbS5HRU5FUkFMX1ZJRVcgPSBHRU5FUkFMLmNyZWF0ZVRhbmRlbSggd2luZG93LnBoZXRpby5QaGV0aW9JRFV0aWxzLlZJRVdfQ09NUE9ORU5UX05BTUUgKTtcblxuLyoqXG4gKiBUYW5kZW0gZm9yIGNvbnRyb2xsZXIgc2ltdWxhdGlvbiBlbGVtZW50cyB0aGF0IGFyZSBnZW5lcmFsIHRvIGFsbCBzaW1zLlxuICovXG5UYW5kZW0uR0VORVJBTF9DT05UUk9MTEVSID0gR0VORVJBTC5jcmVhdGVUYW5kZW0oIHdpbmRvdy5waGV0aW8uUGhldGlvSURVdGlscy5DT05UUk9MTEVSX0NPTVBPTkVOVF9OQU1FICk7XG5cbi8qKlxuICogU2ltdWxhdGlvbiBlbGVtZW50cyB0aGF0IGRvbid0IGJlbG9uZyBpbiBzY3JlZW5zIHNob3VsZCBiZSBuZXN0ZWQgdW5kZXIgXCJnbG9iYWxcIi4gTm90ZSB0aGF0IHRoaXMgdGFuZGVtIHNob3VsZCBvbmx5XG4gKiBoYXZlIHNpbXVsYXRpb24gc3BlY2lmaWMgZWxlbWVudHMgaW4gdGhlbS4gSW5zdHJ1bWVudCBpdGVtcyB1c2VkIGJ5IGFsbCBzaW1zIHVuZGVyIGBUYW5kZW0uR0VORVJBTGAuIE1vc3RcbiAqIGxpa2VseSBzaW11bGF0aW9ucyBlbGVtZW50cyBzaG91bGQgbm90IGJlIGRpcmVjdGx5IHVuZGVyIHRoaXMsIGJ1dCBpbnN0ZWFkIGVpdGhlciB1bmRlciB0aGUgbW9kZWwgb3IgdmlldyBzdWJcbiAqIHRhbmRlbXMuXG4gKlxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7VGFuZGVtfVxuICovXG5jb25zdCBHTE9CQUwgPSBUYW5kZW0uUk9PVC5jcmVhdGVUYW5kZW0oIHdpbmRvdy5waGV0aW8uUGhldGlvSURVdGlscy5HTE9CQUxfQ09NUE9ORU5UX05BTUUgKTtcblxuLyoqXG4gKiBNb2RlbCBzaW11bGF0aW9uIGVsZW1lbnRzIHRoYXQgZG9uJ3QgYmVsb25nIGluIHNwZWNpZmljIHNjcmVlbnMgc2hvdWxkIGJlIG5lc3RlZCB1bmRlciB0aGlzIFRhbmRlbS4gTm90ZSB0aGF0IHRoaXNcbiAqIHRhbmRlbSBzaG91bGQgb25seSBoYXZlIHNpbXVsYXRpb24gc3BlY2lmaWMgZWxlbWVudHMgaW4gdGhlbS5cbiAqL1xuVGFuZGVtLkdMT0JBTF9NT0RFTCA9IEdMT0JBTC5jcmVhdGVUYW5kZW0oIHdpbmRvdy5waGV0aW8uUGhldGlvSURVdGlscy5NT0RFTF9DT01QT05FTlRfTkFNRSApO1xuXG4vKipcbiAqIFZpZXcgc2ltdWxhdGlvbiBlbGVtZW50cyB0aGF0IGRvbid0IGJlbG9uZyBpbiBzcGVjaWZpYyBzY3JlZW5zIHNob3VsZCBiZSBuZXN0ZWQgdW5kZXIgdGhpcyBUYW5kZW0uIE5vdGUgdGhhdCB0aGlzXG4gKiB0YW5kZW0gc2hvdWxkIG9ubHkgaGF2ZSBzaW11bGF0aW9uIHNwZWNpZmljIGVsZW1lbnRzIGluIHRoZW0uXG4gKi9cblRhbmRlbS5HTE9CQUxfVklFVyA9IEdMT0JBTC5jcmVhdGVUYW5kZW0oIHdpbmRvdy5waGV0aW8uUGhldGlvSURVdGlscy5WSUVXX0NPTVBPTkVOVF9OQU1FICk7XG5cbi8qKlxuICogQ29sb3JzIHVzZWQgaW4gdGhlIHNpbXVsYXRpb24uXG4gKi9cblRhbmRlbS5DT0xPUlMgPSBUYW5kZW0uR0xPQkFMX1ZJRVcuY3JlYXRlVGFuZGVtKCB3aW5kb3cucGhldGlvLlBoZXRpb0lEVXRpbHMuQ09MT1JTX0NPTVBPTkVOVF9OQU1FICk7XG5cbi8qKlxuICogVXNlZCB0byBpbmRpY2F0ZSBhIGNvbW1vbiBjb2RlIGNvbXBvbmVudCB0aGF0IHN1cHBvcnRzIHRhbmRlbSwgYnV0IGRvZXNuJ3Qgbm90IHJlcXVpcmUgaXQuICBJZiBhIHRhbmRlbSBpcyBub3RcbiAqIHBhc3NlZCBpbiwgdGhlbiBpdCB3aWxsIG5vdCBiZSBpbnN0cnVtZW50ZWQuXG4gKi9cblRhbmRlbS5PUFRJT05BTCA9IFRhbmRlbS5ST09ULmNyZWF0ZVRhbmRlbSggT1BUSU9OQUxfVEFOREVNX05BTUUsIHtcbiAgcmVxdWlyZWQ6IGZhbHNlLFxuICBzdXBwbGllZDogZmFsc2Vcbn0gKTtcblxuLyoqXG4gKiBUbyBiZSB1c2VkIGV4Y2x1c2l2ZWx5IHRvIG9wdCBvdXQgb2Ygc2l0dWF0aW9ucyB3aGVyZSBhIHRhbmRlbSBpcyByZXF1aXJlZCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy90YW5kZW0vaXNzdWVzLzk3LlxuICovXG5UYW5kZW0uT1BUX09VVCA9IFRhbmRlbS5PUFRJT05BTDtcblxuLyoqXG4gKiBTb21lIGNvbW1vbiBjb2RlIChzdWNoIGFzIENoZWNrYm94IG9yIFJhZGlvQnV0dG9uKSBtdXN0IGFsd2F5cyBiZSBpbnN0cnVtZW50ZWQuXG4gKi9cblRhbmRlbS5SRVFVSVJFRCA9IFRhbmRlbS5ST09ULmNyZWF0ZVRhbmRlbSggUkVRVUlSRURfVEFOREVNX05BTUUsIHtcblxuICAvLyBsZXQgcGhldGlvUHJpbnRNaXNzaW5nVGFuZGVtcyBieXBhc3MgdGhpc1xuICByZXF1aXJlZDogVkFMSURBVElPTiB8fCBQUklOVF9NSVNTSU5HX1RBTkRFTVMsXG4gIHN1cHBsaWVkOiBmYWxzZVxufSApO1xuXG4vKipcbiAqIFVzZSB0aGlzIGFzIHRoZSBwYXJlbnQgdGFuZGVtIGZvciBQcm9wZXJ0aWVzIHRoYXQgYXJlIHJlbGF0ZWQgdG8gc2ltLXNwZWNpZmljIHByZWZlcmVuY2VzLlxuICovXG5UYW5kZW0uUFJFRkVSRU5DRVMgPSBUYW5kZW0uR0xPQkFMX01PREVMLmNyZWF0ZVRhbmRlbSggJ3ByZWZlcmVuY2VzJyApO1xuXG4vKipcbiAqIEdyb3VwIFRhbmRlbSAtLSBEZWNsYXJlZCBpbiB0aGUgc2FtZSBmaWxlIHRvIGF2b2lkIGNpcmN1bGFyIHJlZmVyZW5jZSBlcnJvcnMgaW4gbW9kdWxlIGxvYWRpbmcuXG4gKi9cbmNsYXNzIEdyb3VwVGFuZGVtIGV4dGVuZHMgVGFuZGVtIHtcbiAgcHJpdmF0ZSByZWFkb25seSBncm91cE5hbWU6IHN0cmluZztcblxuICAvLyBmb3IgZ2VuZXJhdGluZyBpbmRpY2VzIGZyb20gYSBwb29sXG4gIHByaXZhdGUgZ3JvdXBNZW1iZXJJbmRleDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBjcmVhdGUgd2l0aCBUYW5kZW0uY3JlYXRlR3JvdXBUYW5kZW1cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcGFyZW50VGFuZGVtOiBUYW5kZW0sIG5hbWU6IHN0cmluZyApIHtcbiAgICBzdXBlciggcGFyZW50VGFuZGVtLCBuYW1lICk7XG5cbiAgICB0aGlzLmdyb3VwTmFtZSA9IG5hbWU7XG4gICAgdGhpcy5ncm91cE1lbWJlckluZGV4ID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIHRoZSBuZXh0IHRhbmRlbSBpbiB0aGUgZ3JvdXAuXG4gICAqL1xuICBwdWJsaWMgY3JlYXRlTmV4dFRhbmRlbSgpOiBUYW5kZW0ge1xuICAgIGNvbnN0IHRhbmRlbSA9IHRoaXMucGFyZW50VGFuZGVtIS5jcmVhdGVUYW5kZW0oIGAke3RoaXMuZ3JvdXBOYW1lfSR7dGhpcy5ncm91cE1lbWJlckluZGV4fWAgKTtcbiAgICB0aGlzLmdyb3VwTWVtYmVySW5kZXgrKztcbiAgICByZXR1cm4gdGFuZGVtO1xuICB9XG59XG5cbnRhbmRlbU5hbWVzcGFjZS5yZWdpc3RlciggJ1RhbmRlbScsIFRhbmRlbSApO1xuZXhwb3J0IGRlZmF1bHQgVGFuZGVtOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsV0FBVyxNQUFNLG1DQUFtQztBQUMzRCxPQUFPQyxLQUFLLE1BQU0sNkJBQTZCO0FBQy9DLE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFHdkQsT0FBT0MsZUFBZSxNQUFNLHNCQUFzQjs7QUFFbEQ7QUFDQTtBQUNBLE1BQU1DLFdBQVcsR0FBR0MsQ0FBQyxDQUFDQyxLQUFLLENBQUVDLE1BQU0sRUFBRSw0QkFBNEIsQ0FBRSxHQUFHQyxJQUFJLENBQUNDLE9BQU8sQ0FBQ0MsYUFBYSxHQUFHO0VBQUVDLElBQUksRUFBRTtBQUFjLENBQUM7QUFFMUgsTUFBTUMsZUFBZSxHQUFHUCxDQUFDLENBQUNDLEtBQUssQ0FBRUMsTUFBTSxFQUFFLHNCQUFzQixDQUFFO0FBQ2pFLE1BQU1NLHFCQUFxQixHQUFHRCxlQUFlLElBQUlKLElBQUksQ0FBQ00sUUFBUSxDQUFDQyxNQUFNLENBQUNDLGVBQWUsQ0FBQ0MseUJBQXlCOztBQUUvRztBQUNBLE1BQU1DLHFCQUFxQixHQUFHYixDQUFDLENBQUNDLEtBQUssQ0FBRUYsV0FBVyxFQUFFLHlCQUF5QixDQUFFLEdBQUcsQ0FBQyxDQUFDQSxXQUFXLENBQUNJLElBQUksQ0FBRSxTQUFTLENBQUUsQ0FBQ1csVUFBVSxHQUFHLElBQUk7O0FBRW5JO0FBQ0EsTUFB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
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/StringIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * IO Type for JS's built-in string type.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */





const StringIO = new IOType('StringIO', {
  supertype: types_ValueIO,
  valueType: 'string',
  documentation: 'IO Type for Javascript\'s string primitive type',
  stateSchema: StateSchema.asValue('string', {
    valueType: 'string'
  }),
  toStateObject: _.identity
});
tandemNamespace.register('StringIO', StringIO);
/* harmony default export */ const types_StringIO = (StringIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJTdGF0ZVNjaGVtYSIsIlZhbHVlSU8iLCJTdHJpbmdJTyIsInN1cGVydHlwZSIsInZhbHVlVHlwZSIsImRvY3VtZW50YXRpb24iLCJzdGF0ZVNjaGVtYSIsImFzVmFsdWUiLCJ0b1N0YXRlT2JqZWN0IiwiXyIsImlkZW50aXR5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJTdHJpbmdJTy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBJTyBUeXBlIGZvciBKUydzIGJ1aWx0LWluIHN0cmluZyB0eXBlLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIEFuZHJldyBBZGFyZSAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4uL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcbmltcG9ydCBTdGF0ZVNjaGVtYSBmcm9tICcuL1N0YXRlU2NoZW1hLmpzJztcbmltcG9ydCBWYWx1ZUlPIGZyb20gJy4vVmFsdWVJTy5qcyc7XG5cbmNvbnN0IFN0cmluZ0lPID0gbmV3IElPVHlwZTxzdHJpbmcsIHN0cmluZz4oICdTdHJpbmdJTycsIHtcbiAgc3VwZXJ0eXBlOiBWYWx1ZUlPLFxuICB2YWx1ZVR5cGU6ICdzdHJpbmcnLFxuICBkb2N1bWVudGF0aW9uOiAnSU8gVHlwZSBmb3IgSmF2YXNjcmlwdFxcJ3Mgc3RyaW5nIHByaW1pdGl2ZSB0eXBlJyxcbiAgc3RhdGVTY2hlbWE6IFN0YXRlU2NoZW1hLmFzVmFsdWU8c3RyaW5nLCBzdHJpbmc+KCAnc3RyaW5nJywgeyB2YWx1ZVR5cGU6ICdzdHJpbmcnIH0gKSxcbiAgdG9TdGF0ZU9iamVjdDogXy5pZGVudGl0eVxufSApO1xuXG50YW5kZW1OYW1lc3BhY2UucmVnaXN0ZXIoICdTdHJpbmdJTycsIFN0cmluZ0lPICk7XG5leHBvcnQgZGVmYXVsdCBTdHJpbmdJTzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxlQUFlLE1BQU0sdUJBQXVCO0FBQ25ELE9BQU9DLE1BQU0sTUFBTSxhQUFhO0FBQ2hDLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsT0FBTyxNQUFNLGNBQWM7QUFFbEMsTUFBTUMsUUFBUSxHQUFHLElBQUlILE1BQU0sQ0FBa0IsVUFBVSxFQUFFO0VBQ3ZESSxTQUFTLEVBQUVGLE9BQU87RUFDbEJHLFNBQVMsRUFBRSxRQUFRO0VBQ25CQyxhQUFhLEVBQUUsaURBQWlEO0VBQ2hFQyxXQUFXLEVBQUVOLFdBQVcsQ0FBQ08sT0FBTyxDQUFrQixRQUFRLEVBQUU7SUFBRUgsU0FBUyxFQUFFO0VBQVMsQ0FBQyxDQUFFO0VBQ3JGSSxhQUFhLEVBQUVDLENBQUMsQ0FBQ0M7QUFDbkIsQ0FBQyxDQUFFO0FBRUhaLGVBQWUsQ0FBQ2EsUUFBUSxDQUFFLFVBQVUsRUFBRVQsUUFBUSxDQUFFO0FBQ2hELGVBQWVBLFFBQVEifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/LinkedElementIO.js
// Copyright 2018-2023, University of Colorado Boulder

/**
 * IO Type for LinkedElement
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */





const LinkedElementIO = new IOType('LinkedElementIO', {
  isValidValue: () => true,
  documentation: 'A LinkedElement',
  toStateObject: linkedElement => {
    assert && js_Tandem.VALIDATION && assert(linkedElement.element.isPhetioInstrumented(), 'Linked elements must be instrumented');
    return {
      elementID: linkedElement.element.tandem.phetioID
    };
  },
  // Override the parent implementation as a no-op.  LinkedElement elementID appears in the state, but should not be set
  // back into a running simulation.
  applyState: _.noop,
  stateSchema: {
    elementID: types_StringIO
  }
});
tandemNamespace.register('LinkedElementIO', LinkedElementIO);
/* harmony default export */ const js_LinkedElementIO = (LinkedElementIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUYW5kZW0iLCJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJTdHJpbmdJTyIsIkxpbmtlZEVsZW1lbnRJTyIsImlzVmFsaWRWYWx1ZSIsImRvY3VtZW50YXRpb24iLCJ0b1N0YXRlT2JqZWN0IiwibGlua2VkRWxlbWVudCIsImFzc2VydCIsIlZBTElEQVRJT04iLCJlbGVtZW50IiwiaXNQaGV0aW9JbnN0cnVtZW50ZWQiLCJlbGVtZW50SUQiLCJ0YW5kZW0iLCJwaGV0aW9JRCIsImFwcGx5U3RhdGUiLCJfIiwibm9vcCIsInN0YXRlU2NoZW1hIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJMaW5rZWRFbGVtZW50SU8udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogSU8gVHlwZSBmb3IgTGlua2VkRWxlbWVudFxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IFRhbmRlbSBmcm9tICcuL1RhbmRlbS5qcyc7XG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4vdGFuZGVtTmFtZXNwYWNlLmpzJztcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi90eXBlcy9JT1R5cGUuanMnO1xuaW1wb3J0IFN0cmluZ0lPIGZyb20gJy4vdHlwZXMvU3RyaW5nSU8uanMnO1xuXG5leHBvcnQgdHlwZSBMaW5rZWRFbGVtZW50U3RhdGUgPSB7XG4gIGVsZW1lbnRJRDogc3RyaW5nO1xufTtcblxuY29uc3QgTGlua2VkRWxlbWVudElPID0gbmV3IElPVHlwZSggJ0xpbmtlZEVsZW1lbnRJTycsIHtcbiAgaXNWYWxpZFZhbHVlOiAoKSA9PiB0cnVlLFxuICBkb2N1bWVudGF0aW9uOiAnQSBMaW5rZWRFbGVtZW50JyxcbiAgdG9TdGF0ZU9iamVjdDogbGlua2VkRWxlbWVudCA9PiB7XG4gICAgYXNzZXJ0ICYmIFRhbmRlbS5WQUxJREFUSU9OICYmIGFzc2VydCggbGlua2VkRWxlbWVudC5lbGVtZW50LmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICdMaW5rZWQgZWxlbWVudHMgbXVzdCBiZSBpbnN0cnVtZW50ZWQnICk7XG4gICAgcmV0dXJuIHsgZWxlbWVudElEOiBsaW5rZWRFbGVtZW50LmVsZW1lbnQudGFuZGVtLnBoZXRpb0lEIH07XG4gIH0sXG5cbiAgLy8gT3ZlcnJpZGUgdGhlIHBhcmVudCBpbXBsZW1lbnRhdGlvbiBhcyBhIG5vLW9wLiAgTGlua2VkRWxlbWVudCBlbGVtZW50SUQgYXBwZWFycyBpbiB0aGUgc3RhdGUsIGJ1dCBzaG91bGQgbm90IGJlIHNldFxuICAvLyBiYWNrIGludG8gYSBydW5uaW5nIHNpbXVsYXRpb24uXG4gIGFwcGx5U3RhdGU6IF8ubm9vcCxcbiAgc3RhdGVTY2hlbWE6IHtcbiAgICBlbGVtZW50SUQ6IFN0cmluZ0lPXG4gIH1cbn0gKTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnTGlua2VkRWxlbWVudElPJywgTGlua2VkRWxlbWVudElPICk7XG5leHBvcnQgZGVmYXVsdCBMaW5rZWRFbGVtZW50SU87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE1BQU0sTUFBTSxhQUFhO0FBQ2hDLE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsTUFBTSxNQUFNLG1CQUFtQjtBQUN0QyxPQUFPQyxRQUFRLE1BQU0scUJBQXFCO0FBTTFDLE1BQU1DLGVBQWUsR0FBRyxJQUFJRixNQUFNLENBQUUsaUJBQWlCLEVBQUU7RUFDckRHLFlBQVksRUFBRUEsQ0FBQSxLQUFNLElBQUk7RUFDeEJDLGFBQWEsRUFBRSxpQkFBaUI7RUFDaENDLGFBQWEsRUFBRUMsYUFBYSxJQUFJO0lBQzlCQyxNQUFNLElBQUlULE1BQU0sQ0FBQ1UsVUFBVSxJQUFJRCxNQUFNLENBQUVELGFBQWEsQ0FBQ0csT0FBTyxDQUFDQyxvQkFBb0IsRUFBRSxFQUFFLHNDQUFzQyxDQUFFO0lBQzdILE9BQU87TUFBRUMsU0FBUyxFQUFFTCxhQUFhLENBQUNHLE9BQU8sQ0FBQ0csTUFBTSxDQUFDQztJQUFTLENBQUM7RUFDN0QsQ0FBQztFQUVEO0VBQ0E7RUFDQUMsVUFBVSxFQUFFQyxDQUFDLENBQUNDLElBQUk7RUFDbEJDLFdBQVcsRUFBRTtJQUNYTixTQUFTLEVBQUVWO0VBQ2I7QUFDRixDQUFDLENBQUU7QUFFSEYsZUFBZSxDQUFDbUIsUUFBUSxDQUFFLGlCQUFpQixFQUFFaEIsZUFBZSxDQUFFO0FBQzlELGVBQWVBLGVBQWUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/phetioAPIValidation.js
// Copyright 2019-2022, University of Colorado Boulder

/**
 * This singleton is responsible for ensuring that the PhET-iO API is correct through the lifetime of the simulation.
 * The PhET-iO API is defined through multiple preloaded files. The "elements baseline" API holds an exact match of
 * what PhetioObject instances/metadata the sim should create on startup, where the "elements overrides" file is a
 * sparse list that can overwrite metadata without changing the code. See `grunt generate-phet-io-api` for
 * more information. The complete list of checks was decided on in https://github.com/phetsims/phet-io/issues/1453
 * (and later trimmed down) and is as follows:
 *
 * 1. After startup, only dynamic instances prescribed by the baseline API can be registered.
 * 2. Any static, registered PhetioObject can never be deregistered.
 * 3. Any schema entries in the overrides file must exist in the baseline API
 * 4. Any schema entries in the overrides file must be different from its baseline counterpart
 * 5. Dynamic element metadata should match the archetype in the API.
 *
 * Terminology:
 * schema: specified through preloads. The full schema is the baseline plus the overrides, but those parts can be
 *         referred to separately.
 * registered: the process of instrumenting a PhetioObject and it "becoming" a PhET-iO Element on the wrapper side.
 * static PhetioObject: A registered PhetioObject that exists for the lifetime of the sim. It should not be removed
 *                      (even intermittently) and must be created during startup so that it is immediately interoperable.
 * dynamic PhetioObject: A registered PhetioObject that can be created and/or destroyed at any point. Only dynamic
 *                       PhetioObjects can be created after startup.
 *
 * See https://github.com/phetsims/phet-io/issues/1443#issuecomment-484306552 for an explanation of how to maintain the
 * PhET-iO API for a simulation.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */




// constants
// The API-tracked and validated metadata keys
const KEYS_TO_CHECK = ['phetioDynamicElement', 'phetioEventType', 'phetioIsArchetype', 'phetioPlayback', 'phetioReadOnly', 'phetioState', 'phetioTypeName'];

// Feel free to add any other JSONifyable keys to this to make the error more clear! All mismatches are printed
// at once for clarity, see PhetioEngine.

class PhetioAPIValidation {
  apiMismatches = [];

  // keep track of when the sim has started.
  simHasStarted = false;

  // settable by qunitStart.js. Validation is only enabled when all screens are present.
  enabled = !!assert && js_Tandem.VALIDATION;

  // this must be all phet-io types so that the
  // following would fail: add a phetioType, then remove it, then add a different one under the same typeName.
  // A Note about memory: Every IOType that is loaded as a module is already loaded on the namespace. Therefore
  // this map doesn't add any memory by storing these. The exception to this is parametric IOTypes. It should be
  // double checked that anything being passed into a parametric type is memory safe. As of this writing, only IOTypes
  // are passed to parametric IOTypes, so this pattern remains memory leak free. Furthermore, this list is only
  // populated when `this.enabled`.
  everyPhetioType = {};

  /**
   * Callback when the simulation is ready to go, and all static PhetioObjects have been created.
   */
  onSimStarted() {
    if (this.enabled && phet.joist.sim.allScreensCreated) {
      this.validateOverridesFile();
      this.validatePreferencesModel();
    }
    if (phet.preloads.phetio.queryParameters.phetioPrintAPIProblems && this.apiMismatches) {
      console.log('PhET-iO api problems detected: ', this.apiMismatches);
    }

    // After the overrides validation to support ?phetioPrintAPIProblems on errors with overrides.
    this.simHasStarted = true;
  }

  /**
   * All core elements in the preferencesModel should be phetioReadOnly: false so they can be set over the API
   * or from within studio, but phetioState: false so they are not captured with save states.
   */
  validatePreferencesModel() {
    Object.keys(phet.phetio.phetioEngine.phetioObjectMap).filter(key => key.includes('.preferencesModel.')).forEach(preferencesKey => {
      let phetioObject = phet.phetio.phetioEngine.phetioObjectMap[preferencesKey];
      while (phetioObject instanceof LinkedElement) {
        phetioObject = phetioObject.element;
      }
      assert && assert(!phetioObject.phetioReadOnly, 'preferences model and its descendants should be phetioReadOnly: false, key=' + preferencesKey);

      // Audio manager, color profile property and localeProperty are supposed to be stateful. All other preferences
      // should be phetioState: false so they are not captured in the state
      assert && assert(phetioObject.phetioState === (phetioObject.phetioID.endsWith('.colorProfileProperty') || phetioObject.phetioID.endsWith('.audioEnabledProperty') || phetioObject.phetioID.endsWith('.localeProperty') ||
      // Sim preferences should also be stateful
      preferencesKey.includes('.simulationModel.')), 'most preferences should be phetioState: false, key=' + preferencesKey);
    });
  }

  /**
   * Checks if a removed phetioObject is part of a Group
   */
  onPhetioObjectRemoved(phetioObject) {
    if (!this.enabled) {
      return;
    }
    const phetioID = phetioObject.tandem.phetioID;

    // if it isn't dynamic, then it shouldn't be removed during the lifetime of the sim.
    if (!phetioObject.phetioDynamicElement) {
      this.assertAPIError({
        phetioID: phetioID,
        ruleInViolation: '2. Any static, registered PhetioObject can never be deregistered.'
      });
    }
  }

  /**
   * Should be called from phetioEngine when a PhetioObject is added to the PhET-iO
   */
  onPhetioObjectAdded(phetioObject) {
    if (!this.enabled) {
      return;
    }
    const newPhetioType = phetioObject.phetioType;
    const oldPhetioType = this.everyPhetioType[newPhetioType.typeName];
    if (!oldPhetioType) {
      // This may not be necessary, but may be helpful so that we don't overwrite if rule 10 is in violation
      this.everyPhetioType[newPhetioType.typeName] = newPhetioType;
    }
    if (this.simHasStarted) {
      // Here we need to kick this validation to the next frame to support construction in any order. Parent first, or
      // child first. Use namespace to avoid because timer is a PhetioObject.
      phet.axon.animationFrameTimer.runOnNextTick(() => {
        // The only instances that it's OK to create after startup are "dynamic instances" which are marked as such.
        if (!phetioObject.phetioDynamicElement) {
          this.assertAPIError({
            phetioID: phetioObject.tandem.phetioID,
            ruleInViolation: '1. After startup, only dynamic instances prescribed by the baseline file can be registered.'
          });
        } else {
          // Compare the dynamic element to the archetype if creating them this runtime. Don't check this if it has
          // already been disposed.
          if (phet.preloads.phetio.createArchetypes && !phetioObject.isDisposed) {
            const archetypeID = phetioObject.tandem.getArchetypalPhetioID();
            const archetypeMetadata = phet.phetio.phetioEngine.getPhetioObject(archetypeID).getMetadata();

            // Compare to the simulation-defined archetype
            this.checkDynamicInstanceAgainstArchetype(phetioObject, archetypeMetadata, 'simulation archetype');
          }
        }
      });
    }
  }
  validateOverridesFile() {
    // import phetioEngine causes a cycle and cannot be used, hence we must use the namespace
    const entireBaseline = phet.phetio.phetioEngine.getPhetioElementsBaseline();
    for (const phetioID in window.phet.preloads.phetio.phetioElementsOverrides) {
      const isArchetype = phetioID.includes(DYNAMIC_ARCHETYPE_NAME);
      if (!phet.preloads.phetio.createArchetypes && !entireBaseline.hasOwnProperty(phetioID)) {
        assert && assert(isArchetype, `phetioID missing from the baseline that was not an archetype: ${phetioID}`);
      } else {
        if (!entireBaseline.hasOwnProperty(phetioID)) {
          this.assertAPIError({
            phetioID: phetioID,
            ruleInViolation: '3. Any schema entries in the overrides file must exist in the baseline file.',
            message: 'phetioID expected in the baseline file but does not exist'
          });
        } else {
          const override = window.phet.preloads.phetio.phetioElementsOverrides[phetioID];
          const baseline = entireBaseline[phetioID];
          if (Object.keys(override).length === 0) {
            this.assertAPIError({
              phetioID: phetioID,
              ruleInViolation: '4. Any schema entries in the overrides file must be different from its baseline counterpart.',
              message: 'no metadata keys found for this override.'
            });
          }
          for (const metadataKey in override) {
            if (!baseline.hasOwnProperty(metadataKey)) {
              this.assertAPIError({
                phetioID: phetioID,
                ruleInViolation: '8. Any schema entries in the overrides file must be different from its baseline counterpart.',
                message: `phetioID metadata key not found in the baseline: ${metadataKey}`
              });
            }
            if (override[metadataKey] === baseline[metadataKey]) {
              this.assertAPIError({
                phetioID: phetioID,
                ruleInViolation: '8. Any schema entries in the overrides file must be different from its baseline counterpart.',
                message: 'phetioID metadata override value is the same as the corresponding metadata value in the baseline.'
              });
            }
          }
        }
      }
    }
  }

  /**
   * Assert out the failed API validation rule.
   */
  assertAPIError(apiErrorObject) {
    const mismatchMessage = apiErrorObject.phetioID ? `${apiErrorObject.phetioID}:  ${apiErrorObject.ruleInViolation}` : `${apiErrorObject.ruleInViolation}`;
    this.apiMismatches.push(apiErrorObject);

    // If ?phetioPrintAPIProblems is present, then ignore assertions until the sim has started up.
    if (this.simHasStarted || !phet.preloads.phetio.queryParameters.phetioPrintAPIProblems) {
      assert && assert(false, `PhET-iO API error:\n${mismatchMessage}`);
    }
  }

  /**
   * Compare a dynamic phetioObject's metadata to the expected metadata
   */
  checkDynamicInstanceAgainstArchetype(phetioObject, archetypeMetadata, source) {
    const actualMetadata = phetioObject.getMetadata();
    KEYS_TO_CHECK.forEach(key => {
      // These attributes are different for archetype vs actual
      if (key !== 'phetioDynamicElement' && key !== 'phetioArchetypePhetioID' && key !== 'phetioIsArchetype') {
        // @ts-expect-error - not sure how to be typesafe in the API files
        if (archetypeMetadata[key] !== actualMetadata[key] && phetioObject.tandem) {
          this.assertAPIError({
            phetioID: phetioObject.tandem.phetioID,
            ruleInViolation: '5. Dynamic element metadata should match the archetype in the API.',
            source: source,
            message: `mismatched metadata: ${key}`
          });
        }
      }
    });
  }
}
const phetioAPIValidation = new PhetioAPIValidation();
tandemNamespace.register('phetioAPIValidation', phetioAPIValidation);
/* harmony default export */ const js_phetioAPIValidation = (phetioAPIValidation);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUYW5kZW0iLCJEWU5BTUlDX0FSQ0hFVFlQRV9OQU1FIiwidGFuZGVtTmFtZXNwYWNlIiwiTGlua2VkRWxlbWVudCIsIktFWVNfVE9fQ0hFQ0siLCJQaGV0aW9BUElWYWxpZGF0aW9uIiwiYXBpTWlzbWF0Y2hlcyIsInNpbUhhc1N0YXJ0ZWQiLCJlbmFibGVkIiwiYXNzZXJ0IiwiVkFMSURBVElPTiIsImV2ZXJ5UGhldGlvVHlwZSIsIm9uU2ltU3RhcnRlZCIsInBoZXQiLCJqb2lzdCIsInNpbSIsImFsbFNjcmVlbnNDcmVhdGVkIiwidmFsaWRhdGVPdmVycmlkZXNGaWxlIiwidmFsaWRhdGVQcmVmZXJlbmNlc01vZGVsIiwicHJlbG9hZHMiLCJwaGV0aW8iLCJxdWVyeVBhcmFtZXRlcnMiLCJwaGV0aW9QcmludEFQSVByb2JsZW1zIiwiY29uc29sZSIsImxvZyIsIk9iamVjdCIsImtleXMiLCJwaGV0aW9FbmdpbmUiLCJwaGV0aW9PYmplY3RNYXAiLCJmaWx0ZXIiLCJrZXkiLCJpbmNsdWRlcyIsImZvckVhY2giLCJwcmVmZXJlbmNlc0tleSIsInBoZXRpb09iamVjdCIsImVsZW1lbnQiLCJwaGV0aW9SZWFkT25seSIsInBoZXRpb1N0YXRlIiwicGhldGlvSUQiLCJlbmRzV2l0aCIsIm9uUGhldGlvT2JqZWN0UmVtb3ZlZCIsInRhbmRlbSIsInBoZXRpb0R5bmFtaWNFbGVtZW50IiwiYXNzZXJ0QVBJRXJyb3IiLCJydWxlSW5WaW9sYXRpb24iLCJvblBoZXRpb09iamVjdEFkZGVkIiwibmV3UGhldGlvVHlwZSIsInBoZXRpb1R5cGUiLCJvbGRQaGV0aW9UeXBlIiwidHlwZU5hbWUiLCJheG9uIiwiYW5pbWF0aW9uRnJhbWVUaW1lciIsInJ1bk9uTmV4dFRpY2siLCJjcmVhdGVBcmNoZXR5cGVzIiwiaXNEaXNwb3NlZCIsImFyY2hldHlwZUlEIiwiZ2V0QXJjaGV0eXBhbFBoZXRpb0lEIiwiYXJjaGV0eXBlTWV0YWRhdGEiLCJnZXRQaGV0aW9PYmplY3QiLCJnZXRNZXRhZGF0YSIsImNoZWNrRHluYW1pY0luc3RhbmNlQWdhaW5zdEFyY2hldHlwZSIsImVudGlyZUJhc2VsaW5lIiwiZ2V0UGhldGlvRWxlbWVudHNCYXNlbGluZSIsIndpbmRvdyIsInBoZXRpb0VsZW1lbnRzT3ZlcnJpZGVzIiwiaXNBcmNoZXR5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsIm1lc3NhZ2UiLCJvdmVycmlkZSIsImJhc2VsaW5lIiwibGVuZ3RoIiwibWV0YWRhdGFLZXkiLCJhcGlFcnJvck9iamVjdCIsIm1pc21hdGNoTWVzc2FnZSIsInB1c2giLCJzb3VyY2UiLCJhY3R1YWxNZXRhZGF0YSIsInBoZXRpb0FQSVZhbGlkYXRpb24iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbInBoZXRpb0FQSVZhbGlkYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTktMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogVGhpcyBzaW5nbGV0b24gaXMgcmVzcG9uc2libGUgZm9yIGVuc3VyaW5nIHRoYXQgdGhlIFBoRVQtaU8gQVBJIGlzIGNvcnJlY3QgdGhyb3VnaCB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbXVsYXRpb24uXG4gKiBUaGUgUGhFVC1pTyBBUEkgaXMgZGVmaW5lZCB0aHJvdWdoIG11bHRpcGxlIHByZWxvYWRlZCBmaWxlcy4gVGhlIFwiZWxlbWVudHMgYmFzZWxpbmVcIiBBUEkgaG9sZHMgYW4gZXhhY3QgbWF0Y2ggb2ZcbiAqIHdoYXQgUGhldGlvT2JqZWN0IGluc3RhbmNlcy9tZXRhZGF0YSB0aGUgc2ltIHNob3VsZCBjcmVhdGUgb24gc3RhcnR1cCwgd2hlcmUgdGhlIFwiZWxlbWVudHMgb3ZlcnJpZGVzXCIgZmlsZSBpcyBhXG4gKiBzcGFyc2UgbGlzdCB0aGF0IGNhbiBvdmVyd3JpdGUgbWV0YWRhdGEgd2l0aG91dCBjaGFuZ2luZyB0aGUgY29kZS4gU2VlIGBncnVudCBnZW5lcmF0ZS1waGV0LWlvLWFwaWAgZm9yXG4gKiBtb3JlIGluZm9ybWF0aW9uLiBUaGUgY29tcGxldGUgbGlzdCBvZiBjaGVja3Mgd2FzIGRlY2lkZWQgb24gaW4gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vaXNzdWVzLzE0NTNcbiAqIChhbmQgbGF0ZXIgdHJpbW1lZCBkb3duKSBhbmQgaXMgYXMgZm9sbG93czpcbiAqXG4gKiAxLiBBZnRlciBzdGFydHVwLCBvbmx5IGR5bmFtaWMgaW5zdGFuY2VzIHByZXNjcmliZWQgYnkgdGhlIGJhc2VsaW5lIEFQSSBjYW4gYmUgcmVnaXN0ZXJlZC5cbiAqIDIuIEFueSBzdGF0aWMsIHJlZ2lzdGVyZWQgUGhldGlvT2JqZWN0IGNhbiBuZXZlciBiZSBkZXJlZ2lzdGVyZWQuXG4gKiAzLiBBbnkgc2NoZW1hIGVudHJpZXMgaW4gdGhlIG92ZXJyaWRlcyBmaWxlIG11c3QgZXhpc3QgaW4gdGhlIGJhc2VsaW5lIEFQSVxuICogNC4gQW55IHNjaGVtYSBlbnRyaWVzIGluIHRoZSBvdmVycmlkZXMgZmlsZSBtdXN0IGJlIGRpZmZlcmVudCBmcm9tIGl0cyBiYXNlbGluZSBjb3VudGVycGFydFxuICogNS4gRHluYW1pYyBlbGVtZW50IG1ldGFkYXRhIHNob3VsZCBtYXRjaCB0aGUgYXJjaGV0eXBlIGluIHRoZSBBUEkuXG4gKlxuICogVGVybWlub2xvZ3k6XG4gKiBzY2hlbWE6IHNwZWNpZmllZCB0aHJvdWdoIHByZWxvYWRzLiBUaGUgZnVsbCBzY2hlbWEgaXMgdGhlIGJhc2VsaW5lIHBsdXMgdGhlIG92ZXJyaWRlcywgYnV0IHRob3NlIHBhcnRzIGNhbiBiZVxuICogICAgICAgICByZWZlcnJlZCB0byBzZXBhcmF0ZWx5LlxuICogcmVnaXN0ZXJlZDogdGhlIHByb2Nlc3Mgb2YgaW5zdHJ1bWVudGluZyBhIFBoZXRpb09iamVjdCBhbmQgaXQgXCJiZWNvbWluZ1wiIGEgUGhFVC1pTyBFbGVtZW50IG9uIHRoZSB3cmFwcGVyIHNpZGUuXG4gKiBzdGF0aWMgUGhldGlvT2JqZWN0OiBBIHJlZ2lzdGVyZWQgUGhldGlvT2JqZWN0IHRoYXQgZXhpc3RzIGZvciB0aGUgbGlmZXRpbWUgb2YgdGhlIHNpbS4gSXQgc2hvdWxkIG5vdCBiZSByZW1vdmVkXG4gKiAgICAgICAgICAgICAgICAgICAgICAoZXZlbiBpbnRlcm1pdHRlbnRseSkgYW5kIG11c3QgYmUgY3JlYXRlZCBkdXJpbmcgc3RhcnR1cCBzbyB0aGF0IGl0IGlzIGltbWVkaWF0ZWx5IGludGVyb3BlcmFibGUuXG4gKiBkeW5hbWljIFBoZXRpb09iamVjdDogQSByZWdpc3RlcmVkIFBoZXRpb09iamVjdCB0aGF0IGNhbiBiZSBjcmVhdGVkIGFuZC9vciBkZXN0cm95ZWQgYXQgYW55IHBvaW50LiBPbmx5IGR5bmFtaWNcbiAqICAgICAgICAgICAgICAgICAgICAgICBQaGV0aW9PYmplY3RzIGNhbiBiZSBjcmVhdGVkIGFmdGVyIHN0YXJ0dXAuXG4gKlxuICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0LWlvL2lzc3Vlcy8xNDQzI2lzc3VlY29tbWVudC00ODQzMDY1NTIgZm9yIGFuIGV4cGxhbmF0aW9uIG9mIGhvdyB0byBtYWludGFpbiB0aGVcbiAqIFBoRVQtaU8gQVBJIGZvciBhIHNpbXVsYXRpb24uXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgQ2hyaXMgS2x1c2VuZG9yZiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgVGFuZGVtLCB7IERZTkFNSUNfQVJDSEVUWVBFX05BTUUgfSBmcm9tICcuL1RhbmRlbS5qcyc7XG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4vdGFuZGVtTmFtZXNwYWNlLmpzJztcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi90eXBlcy9JT1R5cGUuanMnO1xuaW1wb3J0IFBoZXRpb09iamVjdCwgeyBMaW5rZWRFbGVtZW50IH0gZnJvbSAnLi9QaGV0aW9PYmplY3QuanMnO1xuaW1wb3J0IHsgUGhldGlvT2JqZWN0TWV0YWRhdGEgfSBmcm9tICcuL1RhbmRlbUNvbnN0YW50cy5qcyc7XG5cbi8vIGNvbnN0YW50c1xuLy8gVGhlIEFQSS10cmFja2VkIGFuZCB2YWxpZGF0ZWQgbWV0YWRhdGEga2V5c1xuY29uc3QgS0VZU19UT19DSEVDSyA9IFtcbiAgJ3BoZXRpb0R5bmFtaWNFbGVtZW50JyxcbiAgJ3BoZXRpb0V2ZW50VHlwZScsXG4gICdwaGV0aW9Jc0FyY2hldHlwZScsXG4gICdwaGV0aW9QbGF5YmFjaycsXG4gICdwaGV0aW9SZWFkT25seScsXG4gICdwaGV0aW9TdGF0ZScsXG4gICdwaGV0aW9UeXBlTmFtZSdcbl07XG5cbi8vIEZlZWwgZnJlZSB0byBhZGQgYW55IG90aGVyIEpTT05pZnlhYmxlIGtleXMgdG8gdGhpcyB0byBtYWtlIHRoZSBlcnJvciBtb3JlIGNsZWFyISBBbGwgbWlzbWF0Y2hlcyBhcmUgcHJpbnRlZFxuLy8gYXQgb25jZSBmb3IgY2xhcml0eSwgc2VlIFBoZXRpb0VuZ2luZS5cbnR5cGUgQVBJTWlzbWF0Y2ggPSB7XG4gIHBoZXRpb0lEOiBzdHJpbmc7XG4gIHJ1bGVJblZpb2xhdGlvbjogc3RyaW5nOyAvLyBvbmUgb2YgdGhlIG51bWJlcmVkIGxpc3QgaW4gdGhlIGhlYWRlciBkb2MuXG4gIG1lc3NhZ2U/OiBzdHJpbmc7IC8vIHNwZWNpZmljIHByb2JsZW1cbiAgc291cmNlPzogc3RyaW5nO1xufTtcblxuY2xhc3MgUGhldGlvQVBJVmFsaWRhdGlvbiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgYXBpTWlzbWF0Y2hlczogQVBJTWlzbWF0Y2hbXSA9IFtdO1xuXG4gIC8vIGtlZXAgdHJhY2sgb2Ygd2hlbiB0aGUgc2ltIGhhcyBzdGFydGVkLlxuICBwcml2YXRlIHNpbUhhc1N0YXJ0ZWQgPSBmYWxzZTtcblxuICAvLyBzZXR0YWJsZSBieSBxdW5pdFN0YXJ0LmpzLiBWYWxpZGF0aW9uIGlzIG9ubHkgZW5hYmxlZCB3aGVuIGFsbCBzY3JlZW5zIGFyZSBwcmVzZW50LlxuICBwdWJsaWMgZW5hYmxlZDogYm9vbGVhbiA9ICEhYXNzZXJ0ICYmIFRhbmRlbS5WQUxJREFUSU9OO1xuXG5cbiAgLy8gdGhpcyBtdXN0IGJlIGFsbCBwaGV0LWlvIHR5cGVzIHNvIHRoYXQgdGhlXG4gIC8vIGZvbGxvd2luZyB3b3VsZCBmYWlsOiBhZGQgYSBwaGV0aW9UeXBlLCB0aGVuIHJlbW92ZSBpdCwgdGhlbiBhZGQgYSBkaWZmZXJlbnQgb25lIHVuZGVyIHRoZSBzYW1lIHR5cGVOYW1lLlxuICAvLyBBIE5vdGUgYWJvdXQgbWVtb3J5OiBFdmVyeSBJT1R5cGUgdGhhdCBpcyBsb2FkZWQgYXMgYSBtb2R1bGUgaXMgYWxyZWFkeSBsb2FkZWQgb24gdGhlIG5hbWVzcGFjZS4gVGhlcmVmb3JlXG4gIC8vIHRoaXMgbWFwIGRvZXNuJ3QgYWRkIGFueSBtZW1vcnkgYnkgc3RvcmluZyB0aGVzZS4gVGhlIGV4Y2VwdGlvbiB0byB0aGlzIGlzIHBhcmFtZXRyaWMgSU9UeXBlcy4gSXQgc2hvdWxkIGJlXG4gIC8vIGRvdWJsZSBjaGVja2VkIHRoYXQgYW55dGhpbmcgYmVpbmcgcGFzc2VkIGludG8gYSBwYXJhbWV0cmljIHR5cGUgaXMgbWVtb3J5IHNhZmUuIEFzIG9mIHRoaXMgd3JpdGluZywgb25seSBJT1R5cGVzXG4gIC8vIGFyZSBwYXNzZWQgdG8gcGFyYW1ldHJpYyBJT1R5cGVzLCBzbyB0aGlzIHBhdHRlcm4gcmVtYWlucyBtZW1vcnkgbGVhayBmcmVlLiBGdXJ0aGVybW9yZSwgdGhpcyBsaXN0IGlzIG9ubHlcbiAgLy8gcG9wdWxhdGVkIHdoZW4gYHRoaXMuZW5hYmxlZGAuXG4gIHByaXZhdGUgZXZlcnlQaGV0aW9UeXBlOiBSZWNvcmQ8c3RyaW5nLCBJT1R5cGU+ID0ge307XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHdoZW4gdGhlIHNpbXVsYXRpb24gaXMgcmVhZHkgdG8gZ28sIGFuZCBhbGwgc3RhdGljIFBoZXRpb09iamVjdHMgaGF2ZSBiZWVuIGNyZWF0ZWQuXG4gICAqL1xuICBwdWJsaWMgb25TaW1TdGFydGVkKCk6IHZvaWQge1xuICAgIGlmICggdGhpcy5lbmFibGVkICYmIHBoZXQuam9pc3Quc2ltLmFsbFNjcmVlbnNDcmVhdGVkICkge1xuICAgICAgdGhpcy52YWxpZGF0ZU92ZXJyaWRlc0ZpbGUoKTtcbiAgICAgIHRoaXMudmFsaWRhdGVQcmVmZXJlbmNlc01vZGVsKCk7XG4gICAgfVxuXG4gICAgaWYgKCBwaGV0LnByZWxvYWRzLnBoZXRpby5xdWVyeVBhcmFtZXRlcnMucGhldGlvUHJpbnRBUElQcm9ibGVtcyAmJiB0aGlzLmFwaU1pc21hdGNoZXMgKSB7XG4gICAgICBjb25zb2xlLmxvZyggJ1BoRVQtaU8gYXBpIHByb2JsZW1zIGRldGVjdGVkOiAnLCB0aGlzLmFwaU1pc21hdGNoZXMgKTtcbiAgICB9XG5cbiAgICAvLyBBZnRlciB0aGUgb3ZlcnJpZGVzIHZhbGlkYXRpb24gdG8gc3VwcG9ydCA/cGhldGlvUHJpbnRBUElQcm9ibGVtcyBvbiBlcnJvcnMgd2l0aCBvdmVycmlkZXMuXG4gICAgdGhpcy5zaW1IYXNTdGFydGVkID0gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGwgY29yZSBlbGVtZW50cyBpbiB0aGUgcHJlZmVyZW5jZXNNb2RlbCBzaG91bGQgYmUgcGhldGlvUmVhZE9ubHk6IGZhbHNlIHNvIHRoZXkgY2FuIGJlIHNldCBvdmVyIHRoZSBBUElcbiAgICogb3IgZnJvbSB3aXRoaW4gc3R1ZGlvLCBidXQgcGhldGlvU3RhdGU6IGZhbHNlIHNvIHRoZXkgYXJlIG5vdCBjYXB0dXJlZCB3aXRoIHNhdmUgc3RhdGVzLlxuICAgKi9cbiAgcHVibGljIHZhbGlkYXRlUHJlZmVyZW5jZXNNb2RlbCgpOiB2b2lkIHtcbiAgICBPYmplY3Qua2V5cyggcGhldC5waGV0aW8ucGhldGlvRW5naW5lLnBoZXRpb09iamVjdE1hcCApLmZpbHRlcigga2V5ID0+IGtleS5pbmNsdWRlcyggJy5wcmVmZXJlbmNlc01vZGVsLicgKSApXG4gICAgICAuZm9yRWFjaCggcHJlZmVyZW5jZXNLZXkgPT4ge1xuXG4gICAgICAgIGxldCBwaGV0aW9PYmplY3QgPSBwaGV0LnBoZXRpby5waGV0aW9FbmdpbmUucGhldGlvT2JqZWN0TWFwWyBwcmVmZXJlbmNlc0tleSBdO1xuXG4gICAgICAgIHdoaWxlICggcGhldGlvT2JqZWN0IGluc3RhbmNlb2YgTGlua2VkRWxlbWVudCApIHtcbiAgICAgICAgICBwaGV0aW9PYmplY3QgPSBwaGV0aW9PYmplY3QuZWxlbWVudDtcbiAgICAgICAgfVxuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhcGhldGlvT2JqZWN0LnBoZXRpb1JlYWRPbmx5LCAncHJlZmVyZW5jZXMgbW9kZWwgYW5kIGl0cyBkZXNjZW5kYW50cyBzaG91bGQgYmUgcGhldGlvUmVhZE9ubHk6IGZhbHNlLCBrZXk9JyArIHByZWZlcmVuY2VzS2V5ICk7XG5cbiAgICAgICAgLy8gQXVkaW8gbWFuYWdlciwgY29sb3IgcHJvZmlsZSBwcm9wZXJ0eSBhbmQgbG9jYWxlUHJvcGVydHkgYXJlIHN1cHBvc2VkIHRvIGJlIHN0YXRlZnVsLiBBbGwgb3RoZXIgcHJlZmVyZW5jZXNcbiAgICAgICAgLy8gc2hvdWxkIGJlIHBoZXRpb1N0YXRlOiBmYWxzZSBzbyB0aGV5IGFyZSBub3QgY2FwdHVyZWQgaW4gdGhlIHN0YXRlXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHBoZXRpb09iamVjdC5waGV0aW9TdGF0ZSA9PT1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKCBwaGV0aW9PYmplY3QucGhldGlvSUQuZW5kc1dpdGgoICcuY29sb3JQcm9maWxlUHJvcGVydHknICkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaGV0aW9PYmplY3QucGhldGlvSUQuZW5kc1dpdGgoICcuYXVkaW9FbmFibGVkUHJvcGVydHknICkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaGV0aW9PYmplY3QucGhldGlvSUQuZW5kc1dpdGgoICcubG9jYWxlUHJvcGVydHknICkgfHxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpbSBwcmVmZXJlbmNlcyBzaG91bGQgYWxzbyBiZSBzdGF0ZWZ1bFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZWZlcmVuY2VzS2V5LmluY2x1ZGVzKCAnLnNpbXVsYXRpb25Nb2RlbC4nICkgKSxcbiAgICAgICAgICAnbW9zdCBwcmVmZXJlbmNlcyBzaG91bGQgYmUgcGhldGlvU3RhdGU6IGZhbHNlLCBrZXk9JyArIHByZWZlcmVuY2VzS2V5ICk7XG4gICAgICB9ICk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGlmIGEgcmVtb3ZlZCBwaGV0aW9PYmplY3QgaXMgcGFydCBvZiBhIEdyb3VwXG4gICAqL1xuICBwdWJsaWMgb25QaGV0aW9PYmplY3RSZW1vdmVkKCBwaGV0aW9PYmplY3Q6IFBoZXRpb09iamVjdCApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmVuYWJsZWQgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcGhldGlvSUQgPSBwaGV0aW9PYmplY3QudGFuZGVtLnBoZXRpb0lEO1xuXG4gICAgLy8gaWYgaXQgaXNuJ3QgZHluYW1pYywgdGhlbiBpdCBzaG91bGRuJ3QgYmUgcmVtb3ZlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSBzaW0uXG4gICAgaWYgKCAhcGhldGlvT2JqZWN0LnBoZXRpb0R5bmFtaWNFbGVtZW50ICkge1xuICAgICAgdGhpcy5hc3NlcnRBUElFcnJvcigge1xuICAgICAgICBwaGV0aW9JRDogcGhldGlvSUQsXG4gICAgICAgIHJ1bGVJblZpb2xhdGlvbjogJzIuIEFueSBzdGF0aWMsIHJlZ2lzdGVyZWQgUGhldGlvT2JqZWN0IGNhbiBuZXZlciBiZSBkZXJlZ2lzdGVyZWQuJ1xuICAgICAgfSApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTaG91bGQgYmUgY2FsbGVkIGZyb20gcGhldGlvRW5naW5lIHdoZW4gYSBQaGV0aW9PYmplY3QgaXMgYWRkZWQgdG8gdGhlIFBoRVQtaU9cbiAgICovXG4gIHB1YmxpYyBvblBoZXRpb09iamVjdEFkZGVkKCBwaGV0aW9PYmplY3Q6IFBoZXRpb09iamVjdCApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmVuYWJsZWQgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgbmV3UGhldGlvVHlwZSA9IHBoZXRpb09iamVjdC5waGV0aW9UeXBlO1xuICAgIGNvbnN0IG9sZFBoZXRpb1R5cGUgPSB0aGlzLmV2ZXJ5UGhldGlvVHlwZVsgbmV3UGhldGlvVHlwZS50eXBlTmFtZSBdO1xuXG4gICAgaWYgKCAhb2xkUGhldGlvVHlwZSApIHsgLy8gVGhpcyBtYXkgbm90IGJlIG5lY2Vzc2FyeSwgYnV0IG1heSBiZSBoZWxwZnVsIHNvIHRoYXQgd2UgZG9uJ3Qgb3ZlcndyaXRlIGlmIHJ1bGUgMTAgaXMgaW4gdmlvbGF0aW9uXG4gICAgICB0aGlzLmV2ZXJ5UGhldGlvVHlwZVsgbmV3UGhldGlvVHlwZS50eXBlTmFtZSBdID0gbmV3UGhldGlvVHlwZTtcbiAgICB9XG5cbiAgICBpZiAoIHRoaXMuc2ltSGFzU3RhcnRlZCApIHtcblxuICAgICAgLy8gSGVyZSB3ZSBuZWVkIHRvIGtpY2sgdGhpcyB2YWxpZGF0aW9uIHRvIHRoZSBuZXh0IGZyYW1lIHRvIHN1cHBvcnQgY29uc3RydWN0aW9uIGluIGFueSBvcmRlci4gUGFyZW50IGZpcnN0LCBvclxuICAgICAgLy8gY2hpbGQgZmlyc3QuIFVzZSBuYW1lc3BhY2UgdG8gYXZvaWQgYmVjYXVzZSB0aW1lciBpcyBhIFBoZXRpb09iamVjdC5cbiAgICAgIHBoZXQuYXhvbi5hbmltYXRpb25GcmFtZVRpbWVyLnJ1bk9uTmV4dFRpY2soICgpID0+IHtcblxuICAgICAgICAvLyBUaGUgb25seSBpbnN0YW5jZXMgdGhhdCBpdCdzIE9LIHRvIGNyZWF0ZSBhZnRlciBzdGFydHVwIGFyZSBcImR5bmFtaWMgaW5zdGFuY2VzXCIgd2hpY2ggYXJlIG1hcmtlZCBhcyBzdWNoLlxuICAgICAgICBpZiAoICFwaGV0aW9PYmplY3QucGhldGlvRHluYW1pY0VsZW1lbnQgKSB7XG4gICAgICAgICAgdGhpcy5hc3NlcnRBUElFcnJvcigge1xuICAgICAgICAgICAgcGhldGlvSUQ6IHBoZXRpb09iamVjdC50YW5kZW0ucGhldGlvSUQsXG4gICAgICAgICAgICBydWxlSW5WaW9sYXRpb246ICcxLiBBZnRlciBzdGFydHVwLCBvbmx5IGR5bmFtaWMgaW5zdGFuY2VzIHByZXNjcmliZWQgYnkgdGhlIGJhc2VsaW5lIGZpbGUgY2FuIGJlIHJlZ2lzdGVyZWQuJ1xuICAgICAgICAgIH0gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcblxuICAgICAgICAgIC8vIENvbXBhcmUgdGhlIGR5bmFtaWMgZWxlbWVudCB0byB0aGUgYXJjaGV0eXBlIGlmIGNyZWF0aW5nIHRoZW0gdGhpcyBydW50aW1lLiBEb24ndCBjaGVjayB0aGlzIGlmIGl0IGhhc1xuICAgICAgICAgIC8vIGFscmVhZHkgYmVlbiBkaXNwb3NlZC5cbiAgICAgICAgICBpZiAoIHBoZXQucHJlbG9hZHMucGhldGlvLmNyZWF0ZUFyY2hldHlwZXMgJiYgIXBoZXRpb09iamVjdC5pc0Rpc3Bvc2VkICkge1xuICAgICAgICAgICAgY29uc3QgYXJjaGV0eXBlSUQgPSBwaGV0aW9PYmplY3QudGFuZGVtLmdldEFyY2hldHlwYWxQaGV0aW9JRCgpO1xuICAgICAgICAgICAgY29uc3QgYXJjaGV0eXBlTWV0YWRhdGEgPSBwaGV0LnBoZXRpby5waGV0aW9FbmdpbmUuZ2V0UGhldGlvT2JqZWN0KCBhcmNoZXR5cGVJRCApLmdldE1ldGFkYXRhKCk7XG5cbiAgICAgICAgICAgIC8vIENvbXBhcmUgdG8gdGhlIHNpbXVsYXRpb24tZGVmaW5lZCBhcmNoZXR5cGVcbiAgICAgICAgICAgIHRoaXMuY2hlY2tEeW5hbWljSW5zdGFuY2VBZ2FpbnN0QXJjaGV0eXBlKCBwaGV0aW9PYmplY3QsIGFyY2hldHlwZU1ldGFkYXRhLCAnc2ltdWxhdGlvbiBhcmNoZXR5cGUnICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9ICk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB2YWxpZGF0ZU92ZXJyaWRlc0ZpbGUoKTogdm9pZCB7XG5cbiAgICAvLyBpbXBvcnQgcGhldGlvRW5naW5lIGNhdXNlcyBhIGN5Y2xlIGFuZCBjYW5ub3QgYmUgdXNlZCwgaGVuY2Ugd2UgbXVzdCB1c2UgdGhlIG5hbWVzcGFjZVxuICAgIGNvbnN0IGVudGlyZUJhc2VsaW5lID0gcGhldC5waGV0aW8ucGhldGlvRW5naW5lLmdldFBoZXRpb0VsZW1lbnRzQmFzZWxpbmUoKTtcblxuICAgIGZvciAoIGNvbnN0IHBoZXRpb0lEIGluIHdpbmRvdy5waGV0LnByZWxvYWRzLnBoZXRpby5waGV0aW9FbGVtZW50c092ZXJyaWRlcyApIHtcbiAgICAgIGNvbnN0IGlzQXJjaGV0eXBlID0gcGhldGlvSUQuaW5jbHVkZXMoIERZTkFNSUNfQVJDSEVUWVBFX05BTUUgKTtcbiAgICAgIGlmICggIXBoZXQucHJlbG9hZHMucGhldGlvLmNyZWF0ZUFyY2hldHlwZXMgJiYgIWVudGlyZUJhc2VsaW5lLmhhc093blByb3BlcnR5KCBwaGV0aW9JRCApICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBpc0FyY2hldHlwZSwgYHBoZXRpb0lEIG1pc3NpbmcgZnJvbSB0aGUgYmFzZWxpbmUgdGhhdCB3YXMgbm90IGFuIGFyY2hldHlwZTogJHtwaGV0aW9JRH1gICk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgaWYgKCAhZW50aXJlQmFzZWxpbmUuaGFzT3duUHJvcGVydHkoIHBoZXRpb0lEICkgKSB7XG4gICAgICAgICAgdGhpcy5hc3NlcnRBUElFcnJvcigge1xuICAgICAgICAgICAgcGhldGlvSUQ6IHBoZXRpb0lELFxuICAgICAgICAgICAgcnVsZUluVmlvbGF0aW9uOiAnMy4gQW55IHNjaGVtYSBlbnRyaWVzIGluIHRoZSBvdmVycmlkZXMgZmlsZSBtdXN0IGV4aXN0IGluIHRoZSBiYXNlbGluZSBmaWxlLicsXG4gICAgICAgICAgICBtZXNzYWdlOiAncGhldGlvSUQgZXhwZWN0ZWQgaW4gdGhlIGJhc2VsaW5lIGZpbGUgYnV0IGRvZXMgbm90IGV4aXN0J1xuICAgICAgICAgIH0gKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcblxuICAgICAgICAgIGNvbnN0IG92ZXJyaWRlID0gd2luZG93LnBoZXQucHJlbG9hZHMucGhldGlvLnBoZXRpb0VsZW1lbnRzT3ZlcnJpZGVzWyBwaGV0aW9JRCBdO1xuICAgICAgICAgIGNvbnN0IGJhc2VsaW5lID0gZW50aXJlQmFzZWxpbmVbIHBoZXRpb0lEIF07XG5cbiAgICAgICAgICBpZiAoIE9iamVjdC5rZXlzKCBvdmVycmlkZSApLmxlbmd0aCA9PT0gMCApIHtcbiAgICAgICAgICAgIHRoaXMuYXNzZXJ0QVBJRXJyb3IoIHtcbiAgICAgICAgICAgICAgcGhldGlvSUQ6IHBoZXRpb0lELFxuICAgICAgICAgICAgICBydWxlSW5WaW9sYXRpb246ICc0LiBBbnkgc2NoZW1hIGVudHJpZXMgaW4gdGhlIG92ZXJyaWRlcyBmaWxlIG11c3QgYmUgZGlmZmVyZW50IGZyb20gaXRzIGJhc2VsaW5lIGNvdW50ZXJwYXJ0LicsXG4gICAgICAgICAgICAgIG1lc3NhZ2U6ICdubyBtZXRhZGF0YSBrZXlzIGZvdW5kIGZvciB0aGlzIG92ZXJyaWRlLidcbiAgICAgICAgICAgIH0gKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBmb3IgKCBjb25zdCBtZXRhZGF0YUtleSBpbiBvdmVycmlkZSApIHtcbiAgICAgICAgICAgIGlmICggIWJhc2VsaW5lLmhhc093blByb3BlcnR5KCBtZXRhZGF0YUtleSApICkge1xuICAgICAgICAgICAgICB0aGlzLmFzc2VydEFQSUVycm9yKCB7XG4gICAgICAgICAgICAgICAgcGhldGlvSUQ6IHBoZXRpb0lELFxuICAgICAgICAgICAgICAgIHJ1bGVJblZpb2xhdGlvbjogJzguIEFueSBzY2hlbWEgZW50cmllcyBpbiB0aGUgb3ZlcnJpZGVzIGZpbGUgbXVzdCBiZSBkaWZmZXJlbnQgZnJvbSBpdHMgYmFzZWxpbmUgY291bnRlcnBhcnQuJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgcGhldGlvSUQgbWV0YWRhdGEga2V5IG5vdCBmb3VuZCBpbiB0aGUgYmFzZWxpbmU6ICR7bWV0YWRhdGFLZXl9YFxuICAgICAgICAgICAgICB9ICk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICggb3ZlcnJpZGVbIG1ldGFkYXRhS2V5IF0gPT09IGJhc2VsaW5lWyBtZXRhZGF0YUtleSBdICkge1xuICAgICAgICAgICAgICB0aGlzLmFzc2VydEFQSUVycm9yKCB7XG4gICAgICAgICAgICAgICAgcGhldGlvSUQ6IHBoZXRpb0lELFxuICAgICAgICAgICAgICAgIHJ1bGVJblZpb2xhdGlvbjogJzguIEFueSBzY2hlbWEgZW50cmllcyBpbiB0aGUgb3ZlcnJpZGVzIGZpbGUgbXVzdCBiZSBkaWZmZXJlbnQgZnJvbSBpdHMgYmFzZWxpbmUgY291bnRlcnBhcnQuJyxcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAncGhldGlvSUQgbWV0YWRhdGEgb3ZlcnJpZGUgdmFsdWUgaXMgdGhlIHNhbWUgYXMgdGhlIGNvcnJlc3BvbmRpbmcgbWV0YWRhdGEgdmFsdWUgaW4gdGhlIGJhc2VsaW5lLidcbiAgICAgICAgICAgICAgfSApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBc3NlcnQgb3V0IHRoZSBmYWlsZWQgQVBJIHZhbGlkYXRpb24gcnVsZS5cbiAgICovXG4gIHByaXZhdGUgYXNzZXJ0QVBJRXJyb3IoIGFwaUVycm9yT2JqZWN0OiBBUElNaXNtYXRjaCApOiB2b2lkIHtcblxuICAgIGNvbnN0IG1pc21hdGNoTWVzc2FnZSA9IGFwaUVycm9yT2JqZWN0LnBoZXRpb0lEID8gYCR7YXBpRXJyb3JPYmplY3QucGhldGlvSUR9OiAgJHthcGlFcnJvck9iamVjdC5ydWxlSW5WaW9sYXRpb259YCA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7YXBpRXJyb3JPYmplY3QucnVsZUluVmlvbGF0aW9ufWA7XG5cbiAgICB0aGlzLmFwaU1pc21hdGNoZXMucHVzaCggYXBpRXJyb3JPYmplY3QgKTtcblxuICAgIC8vIElmID9waGV0aW9QcmludEFQSVByb2JsZW1zIGlzIHByZXNlbnQsIHRoZW4gaWdub3JlIGFzc2VydGlvbnMgdW50aWwgdGhlIHNpbSBoYXMgc3RhcnRlZCB1cC5cbiAgICBpZiAoIHRoaXMuc2ltSGFzU3RhcnRlZCB8fCAhcGhldC5wcmVsb2Fkcy5waGV0aW8ucXVlcnlQYXJhbWV0ZXJzLnBoZXRpb1ByaW50QVBJUHJvYmxlbXMgKSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgYFBoRVQtaU8gQVBJIGVycm9yOlxcbiR7bWlzbWF0Y2hNZXNzYWdlfWAgKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDb21wYXJlIGEgZHluYW1pYyBwaGV0aW9PYmplY3QncyBtZXRhZGF0YSB0byB0aGUgZXhwZWN0ZWQgbWV0YWRhdGFcbiAgICovXG4gIHByaXZhdGUgY2hlY2tEeW5hbWljSW5zdGFuY2VBZ2FpbnN0QXJjaGV0eXBlKCBwaGV0aW9PYmplY3Q6IFBoZXRpb09iamVjdCwgYXJjaGV0eXBlTWV0YWRhdGE6IFBoZXRpb09iamVjdE1ldGFkYXRhLCBzb3VyY2U6IHN0cmluZyApOiB2b2lkIHtcbiAgICBjb25zdCBhY3R1YWxNZXRhZGF0YSA9IHBoZXRpb09iamVjdC5nZXRNZXRhZGF0YSgpO1xuICAgIEtFWVNfVE9fQ0hFQ0suZm9yRWFjaCgga2V5ID0+IHtcblxuICAgICAgLy8gVGhlc2UgYXR0cmlidXRlcyBhcmUgZGlmZmVyZW50IGZvciBhcmNoZXR5cGUgdnMgYWN0dWFsXG4gICAgICBpZiAoIGtleSAhPT0gJ3BoZXRpb0R5bmFtaWNFbGVtZW50JyAmJiBrZXkgIT09ICdwaGV0aW9BcmNoZXR5cGVQaGV0aW9JRCcgJiYga2V5ICE9PSAncGhldGlvSXNBcmNoZXR5cGUnICkge1xuXG4gICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgLSBub3Qgc3VyZSBob3cgdG8gYmUgdHlwZXNhZmUgaW4gdGhlIEFQSSBmaWxlc1xuICAgICAgICBpZiAoIGFyY2hldHlwZU1ldGFkYXRhWyBrZXkgXSAhPT0gYWN0dWFsTWV0YWRhdGFbIGtleSBdICYmIHBoZXRpb09iamVjdC50YW5kZW0gKSB7XG4gICAgICAgICAgdGhpcy5hc3NlcnRBUElFcnJvcigge1xuICAgICAgICAgICAgcGhldGlvSUQ6IHBoZXRpb09iamVjdC50YW5kZW0ucGhldGlvSUQsXG4gICAgICAgICAgICBydWxlSW5WaW9sYXRpb246ICc1LiBEeW5hbWljIGVsZW1lbnQgbWV0YWRhdGEgc2hvdWxkIG1hdGNoIHRoZSBhcmNoZXR5cGUgaW4gdGhlIEFQSS4nLFxuICAgICAgICAgICAgc291cmNlOiBzb3VyY2UsXG4gICAgICAgICAgICBtZXNzYWdlOiBgbWlzbWF0Y2hlZCBtZXRhZGF0YTogJHtrZXl9YFxuICAgICAgICAgIH0gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gKTtcbiAgfVxufVxuXG5cbmNvbnN0IHBoZXRpb0FQSVZhbGlkYXRpb24gPSBuZXcgUGhldGlvQVBJVmFsaWRhdGlvbigpO1xudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAncGhldGlvQVBJVmFsaWRhdGlvbicsIHBoZXRpb0FQSVZhbGlkYXRpb24gKTtcbmV4cG9ydCBkZWZhdWx0IHBoZXRpb0FQSVZhbGlkYXRpb247Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/Disposable.js
// Copyright 2022-2023, University of Colorado Boulder

/**
 * Type to implement disposal strategies, with a disposer option and a disposeEmitter.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */



const DISPOSABLE_OPTION_KEYS = (/* unused pure expression or super */ null && (['disposer', 'disposeEmitter']));
class Disposable {
  // Called after all code that is directly in `dispose()` methods, be careful with mixing this pattern and the
  // `this.disposeMyClass()` pattern.
  _disposeEmitter = new TinyEmitter();
  isDisposed = false;
  _disposer = null;
  boundOnDisposer = null;
  constructor(providedOptions) {
    if (providedOptions && providedOptions.disposer) {
      this.disposer = providedOptions.disposer;
    }
    if (providedOptions && providedOptions.disposeEmitter) {
      this.disposeEmitter = providedOptions.disposeEmitter;
    }
    if (assert) {
      // Wrap the prototype dispose method with a check. NOTE: We will not catch devious cases where the dispose() is
      // overridden after the Node constructor (which may happen).
      const protoDispose = this.dispose;
      this.dispose = () => {
        assert && assert(!this.isDisposed, 'This Disposable has already been disposed, and cannot be disposed again');
        protoDispose.call(this);
        assert && assert(this.isDisposed, 'Disposable.dispose() call is missing from an overridden dispose method');
      };
    }
  }
  onDisposer() {
    !this.isDisposed && this.dispose(); // Disposable doesn't have to be in charge of disposal, just make sure it happens.

    this.clearDisposer();
  }
  getDisposer() {
    return this._disposer;
  }
  get disposer() {
    return this.getDisposer();
  }

  /**
   * @deprecated - Though this works, it is likely not the pattern of the future, please see https://github.com/phetsims/scenery/issues/1494
   */
  set disposer(disposer) {
    this.setDisposer(disposer);
  }

  /**
   * @deprecated - Though this works, it is likely not the pattern of the future, please see https://github.com/phetsims/scenery/issues/1494
   */
  setDisposer(disposer) {
    if (disposer !== this._disposer) {
      this.ensureBoundOnDisposer();
      this.clearDisposer();
      this._disposer = disposer;
      if (this._disposer) {
        assert && assert(this.boundOnDisposer, 'must have a boundOnDisposer');
        this.getDisposerEmitter().addListener(this.boundOnDisposer);
      }
    }
  }
  getDisposeEmitter() {
    return this._disposeEmitter;
  }
  get disposeEmitter() {
    return this.getDisposeEmitter();
  }
  set disposeEmitter(disposeEmitter) {
    this.setDisposeEmitter(disposeEmitter);
  }

  // Cannot be removed, please set appropriately
  setDisposeEmitter(disposeEmitter) {
    // No need to remove this listener because there is an assumption that the passed in disposeEmitter has the same lifetime
    // as this Disposable (i.e. this.disposeEmitter).
    this._disposeEmitter.addListener(disposeEmitter.emit.bind(disposeEmitter));
  }

  // Lazily create boundOnDisposer only when disposer is set
  ensureBoundOnDisposer() {
    this.boundOnDisposer = this.boundOnDisposer || this.onDisposer.bind(this);
  }
  getDisposerEmitter() {
    assert && assert(this._disposer, 'need a disposer set');

    // type case because instanceof check isn't flexible enough to check for all that implement TDisposable
    return this._disposer instanceof Disposable ? this._disposer._disposeEmitter : this._disposer;
  }
  clearDisposer() {
    // graceful
    if (this._disposer) {
      this.ensureBoundOnDisposer();
      assert && assert(this.boundOnDisposer, 'must have a boundOnDisposer');
      this.getDisposerEmitter().removeListener(this.boundOnDisposer);
      this._disposer = null;
    }
  }
  dispose() {
    assert && assert(!this.isDisposed, 'Disposable can only be disposed once');
    this._disposeEmitter.emit();
    this.isDisposed = true;
  }
}
js_axon.register('Disposable', Disposable);
/* harmony default export */ const js_Disposable = (Disposable);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVGlueUVtaXR0ZXIiLCJESVNQT1NBQkxFX09QVElPTl9LRVlTIiwiRGlzcG9zYWJsZSIsIl9kaXNwb3NlRW1pdHRlciIsImlzRGlzcG9zZWQiLCJfZGlzcG9zZXIiLCJib3VuZE9uRGlzcG9zZXIiLCJjb25zdHJ1Y3RvciIsInByb3ZpZGVkT3B0aW9ucyIsImRpc3Bvc2VyIiwiZGlzcG9zZUVtaXR0ZXIiLCJhc3NlcnQiLCJwcm90b0Rpc3Bvc2UiLCJkaXNwb3NlIiwiY2FsbCIsIm9uRGlzcG9zZXIiLCJjbGVhckRpc3Bvc2VyIiwiZ2V0RGlzcG9zZXIiLCJzZXREaXNwb3NlciIsImVuc3VyZUJvdW5kT25EaXNwb3NlciIsImdldERpc3Bvc2VyRW1pdHRlciIsImFkZExpc3RlbmVyIiwiZ2V0RGlzcG9zZUVtaXR0ZXIiLCJzZXREaXNwb3NlRW1pdHRlciIsImVtaXQiLCJiaW5kIiwicmVtb3ZlTGlzdGVuZXIiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkRpc3Bvc2FibGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogVHlwZSB0byBpbXBsZW1lbnQgZGlzcG9zYWwgc3RyYXRlZ2llcywgd2l0aCBhIGRpc3Bvc2VyIG9wdGlvbiBhbmQgYSBkaXNwb3NlRW1pdHRlci5cbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgVEVtaXR0ZXIgZnJvbSAnLi9URW1pdHRlci5qcyc7XG5pbXBvcnQgVGlueUVtaXR0ZXIgZnJvbSAnLi9UaW55RW1pdHRlci5qcyc7XG5cbnR5cGUgVERpc3Bvc2FibGUgPSB7XG4gIF9kaXNwb3NlRW1pdHRlcjogVEVtaXR0ZXI7XG59O1xuXG5leHBvcnQgY29uc3QgRElTUE9TQUJMRV9PUFRJT05fS0VZUyA9IFtcbiAgJ2Rpc3Bvc2VyJyxcbiAgJ2Rpc3Bvc2VFbWl0dGVyJ1xuXTtcblxuZXhwb3J0IHR5cGUgRGlzcG9zZXIgPSBURW1pdHRlciB8IFREaXNwb3NhYmxlO1xuXG5leHBvcnQgdHlwZSBEaXNwb3NhYmxlT3B0aW9ucyA9IHtcblxuICAvLyBXaGVuIHNldCwgdGhpcyBpcyB0aGUgb2JqZWN0IHRoYXQgaXMgcmVzcG9uc2libGUgZm9yIHRyaWdnZXJpbmcgZGlzcG9zYWwgZm9yIHRoaXMgb2JqZWN0LiBUaGlzIERpc3Bvc2FibGUgd2lsbCBsaXN0ZW5cbiAgLy8gZm9yIHdoZW4gdGhlIGRpc3Bvc2VyIGNhbGxzIGRpc3Bvc2UgKHZpYSB0aGUgZGlzcG9zZUVtaXR0ZXIpLCBhbmQgdGhlbiB3aWxsIGRpc3Bvc2UgaXRzZWxmLlxuICAvLyBAZGVwcmVjYXRlZCAtIFRob3VnaCB0aGlzIHdvcmtzLCBpdCBpcyBsaWtlbHkgbm90IHRoZSBwYXR0ZXJuIG9mIHRoZSBmdXR1cmUsIHBsZWFzZSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnkvaXNzdWVzLzE0OTRcbiAgZGlzcG9zZXI/OiBEaXNwb3NlciB8IG51bGw7XG5cbiAgLy8gSWYgcHJvdmlkZWQgd2lsbCBub3Qgb3ZlcndyaXRlIHRoZSBkaXNwb3NlRW1pdHRlciBzZXQgYXMgYSBtZW1iZXIsIGJ1dCB3aWxsIGFkZCBpdHNlbGYgdG8gdGhlIGRpc3Bvc2FsIGNoYWluXG4gIGRpc3Bvc2VFbWl0dGVyPzogVEVtaXR0ZXI7XG59O1xuXG5jbGFzcyBEaXNwb3NhYmxlIGltcGxlbWVudHMgVERpc3Bvc2FibGUge1xuXG4gIC8vIENhbGxlZCBhZnRlciBhbGwgY29kZSB0aGF0IGlzIGRpcmVjdGx5IGluIGBkaXNwb3NlKClgIG1ldGhvZHMsIGJlIGNhcmVmdWwgd2l0aCBtaXhpbmcgdGhpcyBwYXR0ZXJuIGFuZCB0aGVcbiAgLy8gYHRoaXMuZGlzcG9zZU15Q2xhc3MoKWAgcGF0dGVybi5cbiAgcHVibGljIHJlYWRvbmx5IF9kaXNwb3NlRW1pdHRlcjogVEVtaXR0ZXIgPSBuZXcgVGlueUVtaXR0ZXIoKTtcbiAgcHVibGljIGlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBfZGlzcG9zZXI6IERpc3Bvc2VyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmRPbkRpc3Bvc2VyOiAoICgpID0+IHZvaWQgKSB8IG51bGwgPSBudWxsO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJvdmlkZWRPcHRpb25zPzogRGlzcG9zYWJsZU9wdGlvbnMgKSB7XG5cbiAgICBpZiAoIHByb3ZpZGVkT3B0aW9ucyAmJiBwcm92aWRlZE9wdGlvbnMuZGlzcG9zZXIgKSB7XG4gICAgICB0aGlzLmRpc3Bvc2VyID0gcHJvdmlkZWRPcHRpb25zLmRpc3Bvc2VyO1xuICAgIH1cblxuICAgIGlmICggcHJvdmlkZWRPcHRpb25zICYmIHByb3ZpZGVkT3B0aW9ucy5kaXNwb3NlRW1pdHRlciApIHtcbiAgICAgIHRoaXMuZGlzcG9zZUVtaXR0ZXIgPSBwcm92aWRlZE9wdGlvbnMuZGlzcG9zZUVtaXR0ZXI7XG4gICAgfVxuXG4gICAgaWYgKCBhc3NlcnQgKSB7XG5cbiAgICAgIC8vIFdyYXAgdGhlIHByb3RvdHlwZSBkaXNwb3NlIG1ldGhvZCB3aXRoIGEgY2hlY2suIE5PVEU6IFdlIHdpbGwgbm90IGNhdGNoIGRldmlvdXMgY2FzZXMgd2hlcmUgdGhlIGRpc3Bvc2UoKSBpc1xuICAgICAgLy8gb3ZlcnJpZGRlbiBhZnRlciB0aGUgTm9kZSBjb25zdHJ1Y3RvciAod2hpY2ggbWF5IGhhcHBlbikuXG4gICAgICBjb25zdCBwcm90b0Rpc3Bvc2UgPSB0aGlzLmRpc3Bvc2U7XG4gICAgICB0aGlzLmRpc3Bvc2UgPSAoKSA9PiB7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmlzRGlzcG9zZWQsICdUaGlzIERpc3Bvc2FibGUgaGFzIGFscmVhZHkgYmVlbiBkaXNwb3NlZCwgYW5kIGNhbm5vdCBiZSBkaXNwb3NlZCBhZ2FpbicgKTtcbiAgICAgICAgcHJvdG9EaXNwb3NlLmNhbGwoIHRoaXMgKTtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5pc0Rpc3Bvc2VkLCAnRGlzcG9zYWJsZS5kaXNwb3NlKCkgY2FsbCBpcyBtaXNzaW5nIGZyb20gYW4gb3ZlcnJpZGRlbiBkaXNwb3NlIG1ldGhvZCcgKTtcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBvbkRpc3Bvc2VyKCk6IHZvaWQge1xuICAgICF0aGlzLmlzRGlzcG9zZWQgJiYgdGhpcy5kaXNwb3NlKCk7IC8vIERpc3Bvc2FibGUgZG9lc24ndCBoYXZlIHRvIGJlIGluIGNoYXJnZSBvZiBkaXNwb3NhbCwganVzdCBtYWtlIHN1cmUgaXQgaGFwcGVucy5cblxuICAgIHRoaXMuY2xlYXJEaXNwb3NlcigpO1xuICB9XG5cbiAgcHVibGljIGdldERpc3Bvc2VyKCk6IERpc3Bvc2VyIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuX2Rpc3Bvc2VyO1xuICB9XG5cbiAgcHVibGljIGdldCBkaXNwb3NlcigpOiBEaXNwb3NlciB8IG51bGwgeyByZXR1cm4gdGhpcy5nZXREaXNwb3NlcigpOyB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIC0gVGhvdWdoIHRoaXMgd29ya3MsIGl0IGlzIGxpa2VseSBub3QgdGhlIHBhdHRlcm4gb2YgdGhlIGZ1dHVyZSwgcGxlYXNlIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvc2NlbmVyeS9pc3N1ZXMvMTQ5NFxuICAgKi9cbiAgcHVibGljIHNldCBkaXNwb3NlciggZGlzcG9zZXI6IERpc3Bvc2VyIHwgbnVsbCApIHsgdGhpcy5zZXREaXNwb3NlciggZGlzcG9zZXIgKTsgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCAtIFRob3VnaCB0aGlzIHdvcmtzLCBpdCBpcyBsaWtlbHkgbm90IHRoZSBwYXR0ZXJuIG9mIHRoZSBmdXR1cmUsIHBsZWFzZSBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnkvaXNzdWVzLzE0OTRcbiAgICovXG4gIHB1YmxpYyBzZXREaXNwb3NlciggZGlzcG9zZXI6IERpc3Bvc2VyIHwgbnVsbCApOiB2b2lkIHtcblxuICAgIGlmICggZGlzcG9zZXIgIT09IHRoaXMuX2Rpc3Bvc2VyICkge1xuXG4gICAgICB0aGlzLmVuc3VyZUJvdW5kT25EaXNwb3NlcigpO1xuXG4gICAgICB0aGlzLmNsZWFyRGlzcG9zZXIoKTtcblxuICAgICAgdGhpcy5fZGlzcG9zZXIgPSBkaXNwb3NlcjtcbiAgICAgIGlmICggdGhpcy5fZGlzcG9zZXIgKSB7XG5cblxuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmJvdW5kT25EaXNwb3NlciwgJ211c3QgaGF2ZSBhIGJvdW5kT25EaXNwb3NlcicgKTtcblxuICAgICAgICB0aGlzLmdldERpc3Bvc2VyRW1pdHRlcigpLmFkZExpc3RlbmVyKCB0aGlzLmJvdW5kT25EaXNwb3NlciEgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0RGlzcG9zZUVtaXR0ZXIoKTogVEVtaXR0ZXIge1xuICAgIHJldHVybiB0aGlzLl9kaXNwb3NlRW1pdHRlcjtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgZGlzcG9zZUVtaXR0ZXIoKTogVEVtaXR0ZXIge1xuICAgIHJldHVybiB0aGlzLmdldERpc3Bvc2VFbWl0dGVyKCk7XG4gIH1cblxuICBwdWJsaWMgc2V0IGRpc3Bvc2VFbWl0dGVyKCBkaXNwb3NlRW1pdHRlcjogVEVtaXR0ZXIgKSB7XG4gICAgdGhpcy5zZXREaXNwb3NlRW1pdHRlciggZGlzcG9zZUVtaXR0ZXIgKTtcbiAgfVxuXG4gIC8vIENhbm5vdCBiZSByZW1vdmVkLCBwbGVhc2Ugc2V0IGFwcHJvcHJpYXRlbHlcbiAgcHVibGljIHNldERpc3Bvc2VFbWl0dGVyKCBkaXNwb3NlRW1pdHRlcjogVEVtaXR0ZXIgKTogdm9pZCB7XG5cbiAgICAvLyBObyBuZWVkIHRvIHJlbW92ZSB0aGlzIGxpc3RlbmVyIGJlY2F1c2UgdGhlcmUgaXMgYW4gYXNzdW1wdGlvbiB0aGF0IHRoZSBwYXNzZWQgaW4gZGlzcG9zZUVtaXR0ZXIgaGFzIHRoZSBzYW1lIGxpZmV0aW1lXG4gICAgLy8gYXMgdGhpcyBEaXNwb3NhYmxlIChpLmUuIHRoaXMuZGlzcG9zZUVtaXR0ZXIpLlxuICAgIHRoaXMuX2Rpc3Bvc2VFbWl0dGVyLmFkZExpc3RlbmVyKCBkaXNwb3NlRW1pdHRlci5lbWl0LmJpbmQoIGRpc3Bvc2VFbWl0dGVyICkgKTtcbiAgfVxuXG4gIC8vIExhemlseSBjcmVhdGUgYm91bmRPbkRpc3Bvc2VyIG9ubHkgd2hlbiBkaXNwb3NlciBpcyBzZXRcbiAgcHJpdmF0ZSBlbnN1cmVCb3VuZE9uRGlzcG9zZXIoKTogdm9pZCB7XG4gICAgdGhpcy5ib3VuZE9uRGlzcG9zZXIgPSB0aGlzLmJvdW5kT25EaXNwb3NlciB8fCB0aGlzLm9uRGlzcG9zZXIuYmluZCggdGhpcyApO1xuICB9XG5cbiAgcHJpdmF0ZSBnZXREaXNwb3NlckVtaXR0ZXIoKTogVEVtaXR0ZXIge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuX2Rpc3Bvc2VyLCAnbmVlZCBhIGRpc3Bvc2VyIHNldCcgKTtcblxuICAgIC8vIHR5cGUgY2FzZSBiZWNhdXNlIGluc3RhbmNlb2YgY2hlY2sgaXNuJ3QgZmxleGlibGUgZW5vdWdoIHRvIGNoZWNrIGZvciBhbGwgdGhhdCBpbXBsZW1lbnQgVERpc3Bvc2FibGVcbiAgICByZXR1cm4gKCB0aGlzLl9kaXNwb3NlciBpbnN0YW5jZW9mIERpc3Bvc2FibGUgPyB0aGlzLl9kaXNwb3Nlci5fZGlzcG9zZUVtaXR0ZXIgOiB0aGlzLl9kaXNwb3NlciApIGFzIFRFbWl0dGVyO1xuICB9XG5cbiAgcHVibGljIGNsZWFyRGlzcG9zZXIoKTogdm9pZCB7XG5cbiAgICAvLyBncmFjZWZ1bFxuICAgIGlmICggdGhpcy5fZGlzcG9zZXIgKSB7XG5cbiAgICAgIHRoaXMuZW5zdXJlQm91bmRPbkRpc3Bvc2VyKCk7XG5cbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuYm91bmRPbkRpc3Bvc2VyLCAnbXVzdCBoYXZlIGEgYm91bmRPbkRpc3Bvc2VyJyApO1xuICAgICAgdGhpcy5nZXREaXNwb3NlckVtaXR0ZXIoKS5yZW1vdmVMaXN0ZW5lciggdGhpcy5ib3VuZE9uRGlzcG9zZXIhICk7XG4gICAgICB0aGlzLl9kaXNwb3NlciA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuaXNEaXNwb3NlZCwgJ0Rpc3Bvc2FibGUgY2FuIG9ubHkgYmUgZGlzcG9zZWQgb25jZScgKTtcbiAgICB0aGlzLl9kaXNwb3NlRW1pdHRlci5lbWl0KCk7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgfVxufVxuXG5heG9uLnJlZ2lzdGVyKCAnRGlzcG9zYWJsZScsIERpc3Bvc2FibGUgKTtcbmV4cG9ydCBkZWZhdWx0IERpc3Bvc2FibGU7XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxJQUFJLE1BQU0sV0FBVztBQUU1QixPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBTTFDLE9BQU8sTUFBTUMsc0JBQXNCLEdBQUcsQ0FDcEMsVUFBVSxFQUNWLGdCQUFnQixDQUNqQjtBQWVELE1BQU1DLFVBQVUsQ0FBd0I7RUFFdEM7RUFDQTtFQUNnQkMsZUFBZSxHQUFhLElBQUlILFdBQVcsRUFBRTtFQUN0REksVUFBVSxHQUFHLEtBQUs7RUFDakJDLFNBQVMsR0FBb0IsSUFBSTtFQUNqQ0MsZUFBZSxHQUEwQixJQUFJO0VBRTlDQyxXQUFXQSxDQUFFQyxlQUFtQyxFQUFHO0lBRXhELElBQUtBLGVBQWUsSUFBSUEsZUFBZSxDQUFDQyxRQUFRLEVBQUc7TUFDakQsSUFBSSxDQUFDQSxR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
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/PhetioObject.js
// Copyright 2017-2023, University of Colorado Boulder

/**
 * Base type that provides PhET-iO features. An instrumented PhetioObject is referred to on the wrapper side/design side
 * as a "PhET-iO element".  Note that sims may have hundreds or thousands of PhetioObjects, so performance and memory
 * considerations are important.  For this reason, initializePhetioObject is only called in PhET-iO brand, which means
 * many of the getters such as `phetioState` and `phetioDocumentation` will not work in other brands. We have opted
 * to have these getters throw assertion errors in other brands to help identify problems if these are called
 * unexpectedly.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */















// constants
const PhetioObject_PHET_IO_ENABLED = js_Tandem.PHET_IO_ENABLED;
const IO_TYPE_VALIDATOR = {
  valueType: IOType,
  validationMessage: 'phetioType must be an IOType'
};
const BOOLEAN_VALIDATOR = {
  valueType: 'boolean'
};

// use "<br>" instead of newlines
const PHET_IO_DOCUMENTATION_VALIDATOR = {
  valueType: 'string',
  isValidValue: doc => !doc.includes('\n'),
  validationMessage: 'phetioDocumentation must be provided in the right format'
};
const PHET_IO_EVENT_TYPE_VALIDATOR = {
  valueType: js_EventType,
  validationMessage: 'invalid phetioEventType'
};
const OBJECT_VALIDATOR = {
  valueType: [Object, null]
};
const objectToPhetioID = phetioObject => phetioObject.tandem.phetioID;
// When an event is suppressed from the data stream, we keep track of it with this token.
const SKIPPING_MESSAGE = -1;
const DEFAULTS = {
  // Subtypes can use `Tandem.tandemRequired` to require a named tandem passed in
  tandem: js_Tandem.OPTIONAL,
  // Defines API methods, events and serialization
  phetioType: IOType.ObjectIO,
  // Useful notes about an instrumented PhetioObject, shown in the PhET-iO Studio Wrapper. It's an html
  // string, so "<br>" tags are required instead of "\n" characters for proper rendering in Studio
  phetioDocumentation: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDocumentation,
  // When true, includes the PhetioObject in the PhET-iO state (not automatically recursive, must be specified for
  // children explicitly)
  phetioState: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioState,
  // This option controls how PhET-iO wrappers can interface with this PhetioObject. Predominately this occurs via
  // public methods defined on this PhetioObject's phetioType, in which some method are not executable when this flag
  // is true. See `ObjectIO.methods` for further documentation, especially regarding `invocableForReadOnlyElements`.
  phetioReadOnly: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioReadOnly,
  // Category of event type, can be overridden in phetioStartEvent options.  Cannot be supplied through TandemConstants because
  // that would create an import loop
  phetioEventType: js_EventType.MODEL,
  // High frequency events such as mouse moves can be omitted from data stream, see ?phetioEmitHighFrequencyEvents
  // and Client.launchSim option
  // @deprecated - see https://github.com/phetsims/phet-io/issues/1629#issuecomment-608002410
  phetioHighFrequency: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioHighFrequency,
  // When true, emits events for data streams for playback, see handlePlaybackEvent.js
  phetioPlayback: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioPlayback,
  // When true, this is categorized as an important "featured" element in Studio.
  phetioFeatured: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioFeatured,
  // indicates that an object may or may not have been created. Applies recursively automatically
  // and should only be set manually on the root dynamic element. Dynamic archetypes will have this overwritten to
  // false even if explicitly provided as true, as archetypes cannot be dynamic.
  phetioDynamicElement: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDynamicElement,
  // Marking phetioDesigned: true opts-in to API change detection tooling that can be used to catch inadvertent
  // changes to a designed API.  A phetioDesigned:true PhetioObject (or any of its tandem descendants) will throw
  // assertion errors on CT (or when running with ?phetioCompareAPI) when the following are true:
  // (a) its package.json lists compareDesignedAPIChanges:true in the "phet-io" section
  // (b) the simulation is listed in perennial/data/phet-io-api-stable
  // (c) any of its metadata values deviate from the reference API
  phetioDesigned: js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioDesigned,
  // delivered with each event, if specified. phetioPlayback is appended here, if true.
  // Note: unlike other options, this option can be mutated downstream, and hence should be created newly for each instance.
  phetioEventMetadata: null,
  tandemNameSuffix: null
};

// If you run into a type error here, feel free to add any type that is supported by the browsers "structured cloning algorithm" https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm

assert && assert(js_EventType.phetioType.toStateObject(DEFAULTS.phetioEventType) === js_TandemConstants.PHET_IO_OBJECT_METADATA_DEFAULTS.phetioEventType, 'phetioEventType must have the same default as the default metadata values.');

// Options for creating a PhetioObject

class PhetioObject extends js_Disposable {
  // assigned in initializePhetioObject - see docs at DEFAULTS declaration

  // track whether the object has been initialized.  This is necessary because initialization can happen in the
  // constructor or in a subsequent call to initializePhetioObject (to support scenery Node)

  // See documentation in DEFAULTS

  // Public only for PhetioObjectMetadataInput

  static DEFAULT_OPTIONS = DEFAULTS;
  constructor(options) {
    super(options);
    this.tandem = DEFAULTS.tandem;
    this.phetioID = this.tandem.phetioID;
    this.phetioObjectInitialized = false;
    if (options) {
      this.initializePhetioObject({}, options);
    }
  }

  /**
   * Like SCENERY/Node, PhetioObject can be configured during construction or later with a mutate call.
   * Noop if provided options keys don't intersect with any key in DEFAULTS; baseOptions are ignored for this calculation.
   */
  initializePhetioObject(baseOptions, providedOptions) {
    assert && assert(providedOptions, 'initializePhetioObject must be called with providedOptions');

    // call before we exit early to support logging unsupplied Tandems.
    providedOptions.tandem && js_Tandem.onMissingTandem(providedOptions.tandem);

    // Make sure that required tandems are supplied
    if (js_Tandem.VALIDATION && providedOptions.tandem && providedOptions.tandem.required) {
      assert && assert(providedOptions.tandem.supplied, 'required tandems must be supplied');
    }

    // The presence of `tandem` indicates if this PhetioObject can be initialized. If not yet initialized, perhaps
    // it will be initialized later on, as in Node.mutate().
    if (!(PhetioObject_PHET_IO_ENABLED && providedOptions.tandem && providedOptions.tandem.supplied)) {
      assert && !providedOptions.tandem && assert(!specifiesNonTandemPhetioObjectKey(providedOptions), 'only specify metadata when providing a Tandem');

      // In this case, the PhetioObject is not initialized, but still set tandem to maintain a consistent API for
      // creating the Tandem tree.
      if (providedOptions.tandem) {
        this.tandem = providedOptions.tandem;
        this.phetioID = this.tandem.phetioID;
      }
      return;
    }

    // assert this after the `specifiesPhetioObjectKey check to support something like:
    assert && assert(!this.phetioObjectInitialized, 'cannot initialize twice');

    // Guard validation on assert to avoid calling a large number of no-ops when assertions are disabled, see https://github.com/phetsims/tandem/issues/200
    assert && js_validate(providedOptions.tandem, {
      valueType: js_Tandem
    });
    const defaults = combineOptions({}, DEFAULTS, baseOptions);
    let options = optionize()(defaults, providedOptions);

    // validate options before assigning to properties
    assert && js_validate(options.phetioType, IO_TYPE_VALIDATOR);
    assert && js_validate(options.phetioState, js_merge({}, BOOLEAN_VALIDATOR, {
      validationMessage: 'phetioState must be a boolean'
    }));
    assert && js_validate(options.phetioReadOnly, js_merge({}, BOOLEAN_VALIDATOR, {
      validationMessage: 'phetioReadOnly must be a boolean'
    }));
    assert && js_validate(options.phetioEventType, PHET_IO_EVENT_TYPE_VALIDATOR);
    assert && js_validate(options.phetioDocumentation, PHET_IO_DOCUMENTATION_VALIDATOR);
    assert && js_validate(options.phetioHighFrequency, js_merge({}, BOOLEAN_VALIDATOR, {
      validationMessage: 'phetioHighFrequency must be a boolean'
    }));
    assert && js_validate(options.phetioPlayback, js_merge({}, BOOLEAN_VALIDATOR, {
      validationMessage: 'phetioPlayback must be a boolean'
    }));
    assert && js_validate(options.phetioFeatured, js_merge({}, BOOLEAN_VALIDATOR, {
      validationMessage: 'phetioFeatured must be a boolean'
    }));
    assert && js_validate(options.phetioEventMetadata, js_merge({}, OBJECT_VALIDATOR, {
      validationMessage: 'object literal expected'
    }));
    assert && js_validate(options.phetioDynamicElement, js_merge({}, BOOLEAN_VALIDATOR, {
      validationMessage: 'phetioDynamicElement must be a boolean'
    }));
    assert && js_validate(options.phetioDesigned, js_merge({}, BOOLEAN_VALIDATOR, {
      validationMessage: 'phetioDesigned must be a boolean'
    }));
    assert && assert(this.linkedElements !== null, 'this means addLinkedElement was called before instrumentation of this PhetioObject');

    // optional - Indicates that an object is a archetype for a dynamic class. Settable only by
    // PhetioEngine and by classes that create dynamic elements when creating their archetype (like PhetioGroup) through
    // PhetioObject.markDynamicElementArchetype().
    // if true, items will be excluded from phetioState. This applies recursively automatically.
    this.phetioIsArchetype = false;

    // (phetioEngine)
    // Store the full baseline for usage in validation or for usage in studio.  Do this before applying overrides. The
    // baseline is created when a sim is run with assertions to assist in phetioAPIValidation.  However, even when
    // assertions are disabled, some wrappers such as studio need to generate the baseline anyway.
    // not all metadata are passed through via options, so store baseline for these additional properties
    this.phetioBaselineMetadata = js_phetioAPIValidation.enabled || phet.preloads.phetio.queryParameters.phetioEmitAPIBaseline ? this.getMetadata(js_merge({
      phetioIsArchetype: this.phetioIsArchetype,
      phetioArchetypePhetioID: this.phetioArchetypePhetioID
    }, options)) : null;

    // Dynamic elements should compare to their "archetypal" counterparts.  For example, this means that a Particle
    // in a PhetioGroup will take its overrides from the PhetioGroup archetype.
    const archetypalPhetioID = options.tandem.getArchetypalPhetioID();

    // Overrides are only defined for simulations, not for unit tests.  See https://github.com/phetsims/phet-io/issues/1461
    // Patch in the desired values from overrides, if any.
    if (window.phet.preloads.phetio.phetioElementsOverrides) {
      const overrides = window.phet.preloads.phetio.phetioElementsOverrides[archetypalPhetioID];
      if (overrides) {
        // No need to make a new object, since this "options" variable was created in the previous merge call above.
        options = optionize()(options, overrides);
      }
    }

    // (read-only) see docs at DEFAULTS declaration
    this.tandem = options.tandem;
    this.phetioID = this.tandem.phetioID;

    // (read-only) see docs at DEFAULTS declaration
    this._phetioType = options.phetioType;

    // (read-only) see docs at DEFAULTS declaration
    this._phetioState = options.phetioState;

    // (read-only) see docs at DEFAULTS declaration
    this._phetioReadOnly = options.phetioReadOnly;

    // (read-only) see docs at DEFAULTS declaration
    this._phetioDocumentation = options.phetioDocumentation;

    // see docs at DEFAULTS declaration
    this._phetioEventType = options.phetioEventType;

    // see docs at DEFAULTS declaration
    this._phetioHighFrequency = options.phetioHighFrequency;

    // see docs at DEFAULTS declaration
    this._phetioPlayback = options.phetioPlayback;

    // (PhetioEngine) see docs at DEFAULTS declaration - in order to recursively pass this value to
    // children, the setPhetioDynamicElement() function must be used instead of setting this attribute directly
    this._phetioDynamicElement = options.phetioDynamicElement;

    // (read-only) see docs at DEFAULTS declaration
    this._phetioFeatured = options.phetioFeatured;
    this._phetioEventMetadata = options.phetioEventMetadata;
    this._phetioDesigned = options.phetioDesigned;

    // for phetioDynamicElements, the corresponding phetioID for the element in the archetype subtree
    this.phetioArchetypePhetioID = null;

    //keep track of LinkedElements for disposal. Null out to support asserting on
    // edge error cases, see this.addLinkedElement()
    this.linkedElements = [];

    // (phet-io) set to true when this PhetioObject has been sent over to the parent.
    this.phetioNotifiedObjectCreated = false;

    // tracks the indices of started messages so that dataStream can check that ends match starts.
    this.phetioMessageStack = [];

    // Make sure playback shows in the phetioEventMetadata
    if (this._phetioPlayback) {
      this._phetioEventMetadata = this._phetioEventMetadata || {};
      assert && assert(!this._phetioEventMetadata.hasOwnProperty('playback'), 'phetioEventMetadata.playback should not already exist');
      this._phetioEventMetadata.playback = true;
    }

    // Alert that this PhetioObject is ready for cross-frame communication (thus becoming a "PhET-iO element" on the wrapper side.
    this.tandem.addPhetioObject(this);
    this.phetioObjectInitialized = true;
    if (assert && js_Tandem.VALIDATION && this.isPhetioInstrumented() && options.tandemNameSuffix) {
      const suffixArray = Array.isArray(options.tandemNameSuffix) ? options.tandemNameSuffix : [options.tandemNameSuffix];
      const matches = suffixArray.filter(suffix => {
        return this.tandem.name.endsWith(suffix) || this.tandem.name.endsWith(PhetioObject.swapCaseOfFirstCharacter(suffix));
      });
      assert && assert(matches.length > 0, 'Incorrect Tandem suffix, expected = ' + suffixArray.join(', ') + '. actual = ' + this.tandem.phetioID);
    }
  }
  static swapCaseOfFirstCharacter(string) {
    const firstChar = string[0];
    const newFirstChar = firstChar === firstChar.toLowerCase() ? firstChar.toUpperCase() : firstChar.toLowerCase();
    return newFirstChar + string.substring(1);
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioType() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioType only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioType;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioState() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioState only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioState;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioReadOnly() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioReadOnly only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioReadOnly;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioDocumentation() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioDocumentation only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioDocumentation;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioEventType() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioEventType only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioEventType;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioHighFrequency() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioHighFrequency only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioHighFrequency;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioPlayback() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioPlayback only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioPlayback;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioDynamicElement() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioDynamicElement only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioDynamicElement;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioFeatured() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioFeatured only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioFeatured;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioEventMetadata() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioEventMetadata only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioEventMetadata;
  }

  // throws an assertion error in brands other than PhET-iO
  get phetioDesigned() {
    assert && assert(PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented(), 'phetioDesigned only accessible for instrumented objects in PhET-iO brand.');
    return this._phetioDesigned;
  }

  /**
   * Start an event for the nested PhET-iO data stream.
   *
   * @param event - the name of the event
   * @param [providedOptions]
   */
  phetioStartEvent(event, providedOptions) {
    if (PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented()) {
      // only one or the other can be provided
      assert && js_assertMutuallyExclusiveOptions(providedOptions, ['data'], ['getData']);
      const options = optionize()({
        data: null,
        // function that, when called gets the data.
        getData: null
      }, providedOptions);
      assert && assert(this.phetioObjectInitialized, 'phetioObject should be initialized');
      assert && options.data && assert(typeof options.data === 'object');
      assert && options.getData && assert(typeof options.getData === 'function');
      assert && assert(arguments.length === 1 || arguments.length === 2, 'Prevent usage of incorrect signature');

      // TODO: don't drop PhET-iO events if they are created before we have a dataStream global. https://github.com/phetsims/phet-io/issues/1875
      if (!_.hasIn(window, 'phet.phetio.dataStream')) {
        // If you hit this, then it is likely related to https://github.com/phetsims/scenery/issues/1124 and we would like to know about it!
        // assert && assert( false, 'trying to create an event before the data stream exists' );

        this.phetioMessageStack.push(SKIPPING_MESSAGE);
        return;
      }

      // Opt out of certain events if queryParameter override is provided. Even for a low frequency data stream, high
      // frequency events can still be emitted when they have a low frequency ancestor.
      const skipHighFrequencyEvent = this.phetioHighFrequency && _.hasIn(window, 'phet.preloads.phetio.queryParameters') && !window.phet.preloads.phetio.queryParameters.phetioEmitHighFrequencyEvents && !phet.phetio.dataStream.isEmittingLowFrequencyEvent();

      // TODO: If there is no dataStream global defined, then we should handle this differently as to not drop the event that is triggered, see https://github.com/phetsims/phet-io/issues/1846
      const skipFromUndefinedDatastream = !assert && !_.hasIn(window, 'phet.phetio.dataStream');
      if (skipHighFrequencyEvent || this.phetioEventType === js_EventType.OPT_OUT || skipFromUndefinedDatastream) {
        this.phetioMessageStack.push(SKIPPING_MESSAGE);
        return;
      }

      // Only get the args if we are actually going to send the event.
      const data = options.getData ? options.getData() : options.data;
      this.phetioMessageStack.push(phet.phetio.dataStream.start(this.phetioEventType, this.tandem.phetioID, this.phetioType, event, data, this.phetioEventMetadata, this.phetioHighFrequency));

      // To support PhET-iO playback, any potential playback events downstream of this playback event must be marked as
      // non playback events. This is to prevent the PhET-iO playback engine from repeating those events. See
      // https://github.com/phetsims/phet-io/issues/1693
      this.phetioPlayback && phet.phetio.dataStream.pushNonPlaybackable();
    }
  }

  /**
   * End an event on the nested PhET-iO data stream. It this object was disposed or dataStream.start was not called,
   * this is a no-op.
   */
  phetioEndEvent() {
    if (PhetioObject_PHET_IO_ENABLED && this.isPhetioInstrumented()) {
      assert && assert(this.phetioMessageStack.length > 0, 'Must have messages to pop');
      const topMessageIndex = this.phetioMessageStack.pop();

      // The message was started as a high frequency event to be skipped, so the end is a no-op
      if (topMessageIndex === SKIPPING_MESSAGE) {
        return;
      }
      this.phetioPlayback && phet.phetio.dataStream.popNonPlaybackable();
      phet.phetio.dataStream.end(topMessageIndex);
    }
  }

  /**
   * Set any instrumented descendants of this PhetioObject to the same value as this.phetioDynamicElement.
   */
  propagateDynamicFlagsToDescendants() {
    assert && assert(js_Tandem.PHET_IO_ENABLED, 'phet-io should be enabled');
    assert && assert(phet.phetio && phet.phetio.phetioEngine, 'Dynamic elements cannot be created statically before phetioEngine exists.');
    const phetioEngine = phet.phetio.phetioEngine;

    // in the same order as bufferedPhetioObjects
    const unlaunchedPhetioIDs = !js_Tandem.launched ? js_Tandem.bufferedPhetioObjects.map(objectToPhetioID) : [];
    this.tandem.iterateDescendants(tandem => {
      const phetioID = tandem.phetioID;
      if (phetioEngine.hasPhetioObject(phetioID) || !js_Tandem.launched && unlaunchedPhetioIDs.includes(phetioID)) {
        assert && assert(this.isPhetioInstrumented());
        const phetioObject = phetioEngine.hasPhetioObject(phetioID) ? phetioEngine.getPhetioObject(phetioID) : js_Tandem.bufferedPhetioObjects[unlaunchedPhetioIDs.indexOf(phetioID)];
        assert && assert(phetioObject, 'should have a phetioObject here');

        // Order matters here! The phetioIsArchetype needs to be first to ensure that the setPhetioDynamicElement
        // setter can opt out for archetypes.
        phetioObject.phetioIsArchetype = this.phetioIsArchetype;
        phetioObject.setPhetioDynamicElement(this.phetioDynamicElement);
        if (phetioObject.phetioBaselineMetadata) {
          phetioObject.phetioBaselineMetadata.phetioIsArchetype = this.phetioIsArchetype;
        }
      }
    });
  }

  /**
   * Used in PhetioEngine
   */
  setPhetioDynamicElement(phetioDynamicElement) {
    assert && assert(!this.phetioNotifiedObjectCreated, 'should not change dynamic element flags after notifying this PhetioObject\'s creation.');
    assert && assert(this.isPhetioInstrumented());

    // All archetypes are static (non-dynamic)
    this._phetioDynamicElement = this.phetioIsArchetype ? false : phetioDynamicElement;

    // For dynamic elements, indicate the corresponding archetype element so that clients like Studio can leverage
    // the archetype metadata. Static elements don't have archetypes.
    this.phetioArchetypePhetioID = phetioDynamicElement ? this.tandem.getArchetypalPhetioID() : null;

    // Keep the baseline metadata in sync.
    if (this.phetioBaselineMetadata) {
      this.phetioBaselineMetadata.phetioDynamicElement = this.phetioDynamicElement;
    }
  }

  /**
   * Mark this PhetioObject as an archetype for dynamic elements.
   */
  markDynamicElementArchetype() {
    assert && assert(!this.phetioNotifiedObjectCreated, 'should not change dynamic element flags after notifying this PhetioObject\'s creation.');
    this.phetioIsArchetype = true;
    this.setPhetioDynamicElement(false); // because archetypes aren't dynamic elements

    if (this.phetioBaselineMetadata) {
      this.phetioBaselineMetadata.phetioIsArchetype = this.phetioIsArchetype;
    }

    // recompute for children also, but only if phet-io is enabled
    js_Tandem.PHET_IO_ENABLED && this.propagateDynamicFlagsToDescendants();
  }

  /**
   * A PhetioObject will only be instrumented if the tandem that was passed in was "supplied". See Tandem.supplied
   * for more info.
   */
  isPhetioInstrumented() {
    return this.tandem && this.tandem.supplied;
  }

  /**
   * When an instrumented PhetioObject is linked with another instrumented PhetioObject, this creates a one-way
   * association which is rendered in Studio as a "symbolic" link or hyperlink. Many common code UI elements use this
   * automatically. To keep client sites simple, this has a graceful opt-out mechanism which makes this function a
   * no-op if either this PhetioObject or the target PhetioObject is not instrumented.
   * @param element - the target element. Must be instrumented for a LinkedElement to be created-- otherwise gracefully opts out
   * @param [options]
   */
  addLinkedElement(element, options) {
    if (!this.isPhetioInstrumented()) {
      // set this to null so that you can't addLinkedElement on an uninitialized PhetioObject and then instrument
      // it afterwards.
      this.linkedElements = null;
      return;
    }

    // In some cases, UI components need to be wired up to a private (internal) Property which should neither be
    // instrumented nor linked.
    if (PhetioObject_PHET_IO_ENABLED && element.isPhetioInstrumented()) {
      assert && assert(Array.isArray(this.linkedElements), 'linkedElements should be an array');
      this.linkedElements.push(new LinkedElement(element, options));
    }
  }

  /**
   * Remove all linked elements linking to the provided PhetioObject. This will dispose all removed LinkedElements. This
   * will be graceful, and doesn't assume or assert that the provided PhetioObject has LinkedElement(s), it will just
   * remove them if they are there.
   */
  removeLinkedElements(potentiallyLinkedElement) {
    if (this.isPhetioInstrumented() && this.linkedElements) {
      assert && assert(potentiallyLinkedElement.isPhetioInstrumented());
      const toRemove = this.linkedElements.filter(linkedElement => linkedElement.element === potentiallyLinkedElement);
      toRemove.forEach(linkedElement => {
        linkedElement.dispose();
        js_arrayRemove(this.linkedElements, linkedElement);
      });
    }
  }

  /**
   * Performs cleanup after the sim's construction has finished.
   */
  onSimulationConstructionCompleted() {
    // deletes the phetioBaselineMetadata, as it's no longer needed since validation is complete.
    this.phetioBaselineMetadata = null;
  }

  /**
   * Remove this phetioObject from PhET-iO. After disposal, this object is no longer interoperable. Also release any
   * other references created during its lifetime.
   */
  dispose() {
    const descendants = [];
    if (js_Tandem.PHET_IO_ENABLED && this.tandem.supplied) {
      const phetioEngine = phet.phetio.phetioEngine;
      this.tandem.iterateDescendants(tandem => {
        if (phetioEngine.hasPhetioObject(tandem.phetioID)) {
          descendants.push(phetioEngine.getPhetioObject(tandem.phetioID));
        }
      });
    }

    // In order to support the structured data stream, PhetioObjects must end the messages in the correct
    // sequence, without being interrupted by dispose() calls.  Therefore, we do not clear out any of the state
    // related to the endEvent.  Note this means it is acceptable (and expected) for endEvent() to be called on
    // disposed PhetioObjects.
    //
    // The phetioEvent stack should resolve by the next frame, so that's when we check it.
    assert && js_animationFrameTimer.runOnNextTick(() => {
      // Uninstrumented PhetioObjects don't have a phetioMessageStack attribute.
      assert && assert(!this.hasOwnProperty('phetioMessageStack') || this.phetioMessageStack.length === 0, 'phetioMessageStack should be clear');
      descendants.forEach(descendant => {
        assert && assert(descendant.isDisposed, `All descendants must be disposed by the next frame: ${descendant.tandem.phetioID}`);
      });
    });

    // Detach from listeners and dispose the corresponding tandem. This must happen in PhET-iO brand and PhET brand
    // because in PhET brand, PhetioDynamicElementContainer dynamic elements would memory leak tandems (parent tandems
    // would retain references to their children).
    this.tandem.removePhetioObject(this);

    // Dispose LinkedElements
    if (this.linkedElements) {
      this.linkedElements.forEach(linkedElement => linkedElement.dispose());
      this.linkedElements.length = 0;
    }
    super.dispose();
  }

  /**
   * JSONifiable metadata that describes the nature of the PhetioObject.  We must be able to read this
   * for baseline (before object fully constructed we use object) and after fully constructed
   * which includes overrides.
   * @param [object] - used to get metadata keys, can be a PhetioObject, or an options object
   *                          (see usage initializePhetioObject). If not provided, will instead use the value of "this"
   * @returns - metadata plucked from the passed in parameter
   */
  getMetadata(object) {
    object = object || this;
    const metadata = {
      phetioTypeName: object.phetioType.typeName,
      phetioDocumentation: object.phetioDocumentation,
      phetioState: object.phetioState,
      phetioReadOnly: object.phetioReadOnly,
      phetioEventType: js_EventType.phetioType.toStateObject(object.phetioEventType),
      phetioHighFrequency: object.phetioHighFrequency,
      phetioPlayback: object.phetioPlayback,
      phetioDynamicElement: object.phetioDynamicElement,
      phetioIsArchetype: object.phetioIsArchetype,
      phetioFeatured: object.phetioFeatured,
      phetioDesigned: object.phetioDesigned
    };
    if (object.phetioArchetypePhetioID) {
      metadata.phetioArchetypePhetioID = object.phetioArchetypePhetioID;
    }
    return metadata;
  }
  static create(options) {
    return new PhetioObject(options);
  }
}

/**
 * Determine if any of the options keys are intended for PhetioObject. Semantically equivalent to
 * _.intersection( _.keys( options ), _.keys( DEFAULTS) ).length>0 but implemented imperatively to avoid memory or
 * performance issues. Also handles options.tandem differently.
 */
const specifiesNonTandemPhetioObjectKey = options => {
  for (const key in options) {
    if (key !== 'tandem' && options.hasOwnProperty(key) && DEFAULTS.hasOwnProperty(key)) {
      return true;
    }
  }
  return false;
};
/**
 * Internal class to avoid cyclic dependencies.
 */
class LinkedElement extends PhetioObject {
  constructor(coreElement, providedOptions) {
    assert && assert(!!coreElement, 'coreElement should be defined');
    const options = optionize()({
      phetioType: js_LinkedElementIO,
      phetioState: true
    }, providedOptions);

    // References cannot be changed by PhET-iO
    assert && assert(!options.hasOwnProperty('phetioReadOnly'), 'phetioReadOnly set by LinkedElement');
    options.phetioReadOnly = true;

    // By default, this linked element's baseline value is the overridden value of the coreElement. This allows
    // the them to be in sync by default, but also allows the linked element to be overridden in studio.
    assert && assert(!options.hasOwnProperty('phetioFeatured'), 'phetioFeatured set by LinkedElement');
    options.phetioFeatured = coreElement.phetioFeatured;
    super(options);
    this.element = coreElement;
  }

  /**
   * LinkedElements listen to their core elements for phetioFeatured, so to avoid a dependency on overrides metadata
   * (when the core element's phetioFeatured is specified in the overrides file), ignore phetioFeatured for LinkedElements.
   * @param object - used to get metadata keys, can be a PhetioObject, or an options object
   *                          (see usage initializePhetioObject)
   * @returns - metadata plucked from the passed in parameter
   */
  getMetadata(object) {
    const phetioObjectMetadata = super.getMetadata(object);
    delete phetioObjectMetadata.phetioFeatured;
    return phetioObjectMetadata;
  }
}
tandemNamespace.register('PhetioObject', PhetioObject);

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhbmltYXRpb25GcmFtZVRpbWVyIiwidmFsaWRhdGUiLCJhcnJheVJlbW92ZSIsImFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyIsIm1lcmdlIiwib3B0aW9uaXplIiwiY29tYmluZU9wdGlvbnMiLCJFdmVudFR5cGUiLCJMaW5rZWRFbGVtZW50SU8iLCJwaGV0aW9BUElWYWxpZGF0aW9uIiwiVGFuZGVtIiwiVGFuZGVtQ29uc3RhbnRzIiwidGFuZGVtTmFtZXNwYWNlIiwiSU9UeXBlIiwiRGlzcG9zYWJsZSIsIlBIRVRfSU9fRU5BQkxFRCIsIklPX1RZUEVfVkFMSURBVE9SIiwidmFsdWVUeXBlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJCT09MRUFOX1ZBTElEQVRPUiIsIlBIRVRfSU9fRE9DVU1FTlRBVElPTl9WQUxJREFUT1IiLCJpc1ZhbGlkVmFsdWUiLCJkb2MiLCJpbmNsdWRlcyIsIlBIRVRfSU9fRVZFTlRfVFlQRV9WQUxJREFUT1IiLCJPQkpFQ1RfVkFMSURBVE9SIiwiT2JqZWN0Iiwib2JqZWN0VG9QaGV0aW9JRCIsInBoZXRpb09iamVjdCIsInRhbmRlbSIsInBoZXRpb0lEIiwiU0tJUFBJTkdfTUVTU0FHRSIsIkRFRkFVTFRTIiwiT1BUSU9OQUwiLCJwaGV0aW9UeXBlIiwiT2JqZWN0SU8iLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwiUEhFVF9JT19PQkpFQ1RfTUVUQURBVEFfREVGQVVMVFMiLCJwaGV0aW9TdGF0ZSIsInBoZXRpb1JlYWRPbmx5IiwicGhldGlvRXZlbnRUeXBlIiwiTU9ERUwiLCJwaGV0aW9IaWdoRnJlcXVlbmN5IiwicGhldGlvUGxheWJhY2siLCJwaGV0aW9GZWF0dXJlZCIsInBoZXRpb0R5bmFtaWNFbGVtZW50IiwicGhldGlvRGVzaWduZWQiLCJwaGV0aW9FdmVudE1ldGFkYXRhIiwidGFuZGVtTmFtZVN1ZmZpeCIsImFzc2VydCIsInRvU3RhdGVPYmplY3QiLCJQaGV0aW9PYmplY3QiLCJERUZBVUxUX09QVElPTlMiLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJwaGV0aW9PYmplY3RJbml0aWFsaXplZCIsImluaXRpYWxpemVQaGV0aW9PYmplY3QiLCJiYXNlT3B0aW9ucyIsInByb3ZpZGVkT3B0aW9ucyIsIm9uTWlzc2luZ1RhbmRlbSIsIlZBTElEQVRJT04iLCJyZXF1aXJlZCIsInN1cHBsaWVkIiwic3BlY2lmaWVzTm9uVGFuZGVtUGhldGlvT2JqZWN0S2V5IiwiZGVmYXVsdHMiLCJsaW5rZWRFbGVtZW50cyIsInBoZXRpb0lzQXJjaGV0eXBlIiwicGhldGlvQmFzZWxpbmVNZXRhZGF0YSIsImVuYWJsZWQiLCJwaGV0IiwicHJlbG9hZHMiLCJwaGV0aW8iLCJxdWVyeVBhcmFtZXRlcnMiLCJwaGV0aW9FbWl0QVBJQmFzZWxpbmUiLCJnZXRNZXRhZGF0YSIsInBoZXRpb0FyY2hldHlwZVBoZXRpb0lEIiwiYXJjaGV0eXBhbFBoZXRpb0lEIiwiZ2V0QXJjaGV0eXBhbFBoZXRpb0lEIiwid2luZG93IiwicGhldGlvRWxlbWVudHNPdmVycmlkZXMiLCJvdmVycmlkZXMiLCJfcGhldGlvVHlwZSIsIl9waGV0aW9TdGF0ZSIsIl9waGV0aW9SZWFkT25seSIsIl9waGV0aW9Eb2N1bWVudGF0aW9uIiwiX3BoZXRpb0V2ZW50VHlwZSIsIl9waGV0aW9IaWdoRnJlcXVlbmN5IiwiX3BoZXRpb1BsYXliYWNrIiwiX3BoZXRpb0R5bmFtaWNFbGVtZW50IiwiX3BoZXRpb0ZlYXR1cmVkIiwiX3BoZXRpb0V2ZW50TWV0YWRhdGEiLCJfcGhldGlvRGVzaWduZWQiLCJwaGV0aW9Ob3RpZmllZE9iamVjdENyZWF0ZWQiLCJwaGV0aW9NZXNzYWdlU3RhY2siLCJoYXNPd25Qcm9wZXJ0eSIsInBsYXliYWNrIiwiYWRkUGhldGlvT2JqZWN0IiwiaXNQaGV0aW9JbnN0cnVtZW50ZWQiLCJzdWZmaXhBcnJheSIsIkFycmF5IiwiaXNBcnJheSIsIm1hdGNoZXMiLCJmaWx0ZXIiLCJzdWZmaXgiLCJuYW1lIiwiZW5kc1dpdGgiLCJzd2FwQ2FzZU9mRmlyc3RDaGFyYWN0ZXIiLCJsZW5ndGgiLCJqb2luIiwic3RyaW5nIiwiZmlyc3RDaGFyIiwibmV3Rmlyc3RDaGFyIiwidG9Mb3dlckNhc2UiLCJ0b1VwcGVyQ2FzZSIsInN1YnN0cmluZyIsInBoZXRpb1N0YXJ0RXZlbnQiLCJldmVudCIsImRhdGEiLCJnZXREYXRhIiwiYXJndW1lbnRzIiwiXyIsImhhc0luIiwicHVzaCIsInNraXBIaWdoRnJlcXVlbmN5RXZlbnQiLCJwaGV0aW9FbWl0SGlnaEZyZXF1ZW5jeUV2ZW50cyIsImRhdGFTdHJlYW0iLCJpc0VtaXR0aW5nTG93RnJlcXVlbmN5RXZlbnQiLCJza2lwRnJvbVVuZGVmaW5lZERhdGFzdHJlYW0iLCJPUFRfT1VUIiwic3RhcnQiLCJwdXNoTm9uUGxheWJhY2thYmxlIiwicGhldGlvRW5kRXZlbnQiLCJ0b3BNZXNzYWdlSW5kZXgiLCJwb3AiLCJwb3BOb25QbGF5YmFja2FibGUiLCJlbmQiLCJwcm9wYWdhdGVEeW5hbWljRmxhZ3NUb0Rlc2NlbmRhbnRzIiwicGhldGlvRW5naW5lIiwidW5sYXVuY2hlZFBoZXRpb0lEcyIsImxhdW5jaGVkIiwiYnVmZmVyZWRQaGV0aW9PYmplY3RzIiwibWFwIiwiaXRlcmF0ZURlc2NlbmRhbnRzIiwiaGFzUGhldGlvT2JqZWN0IiwiZ2V0UGhldGlvT2JqZWN0IiwiaW5kZXhPZiIsInNldFBoZXRpb0R5bmFtaWNFbGVtZW50IiwibWFya0R5bmFtaWNFbGVtZW50QXJjaGV0eXBlIiwiYWRkTGlua2VkRWxlbWVudCIsImVsZW1lbnQiLCJMaW5rZWRFbGVtZW50IiwicmVtb3ZlTGlua2VkRWxlbWVudHMiLCJwb3RlbnRpYWxseUxpbmtlZEVsZW1lbnQiLCJ0b1JlbW92ZSIsImxpbmtlZEVsZW1lbnQiLCJmb3JFYWNoIiwiZGlzcG9zZSIsIm9uU2ltdWxhdGlvbkNvbnN0cnVjdGlvbkNvbXBsZXRlZCIsImRlc2NlbmRhbnRzIiwicnVuT25OZXh0VGljayIsImRlc2NlbmRhbnQiLCJpc0Rpc3Bvc2VkIiwicmVtb3ZlUGhldGlvT2JqZWN0Iiwib2JqZWN0IiwibWV0YWRhdGEiLCJwaGV0aW9UeXBlTmFtZSIsInR5cGVOYW1lIiwiY3JlYXRlIiwia2V5IiwiY29yZUVsZW1lbnQiLCJwaGV0aW9PYmplY3RNZXRhZGF0YSIsInJlZ2lzdGVyIiwiZGVmYXVsdCJdLCJzb3VyY2VzIjpbIlBoZXRpb09iamVjdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBCYXNlIHR5cGUgdGhhdCBwcm92aWRlcyBQaEVULWlPIGZlYXR1cmVzLiBBbiBpbnN0cnVtZW50ZWQgUGhldGlvT2JqZWN0IGlzIHJlZmVycmVkIHRvIG9uIHRoZSB3cmFwcGVyIHNpZGUvZGVzaWduIHNpZGVcbiAqIGFzIGEgXCJQaEVULWlPIGVsZW1lbnRcIi4gIE5vdGUgdGhhdCBzaW1zIG1heSBoYXZlIGh1bmRyZWRzIG9yIHRob3VzYW5kcyBvZiBQaGV0aW9PYmplY3RzLCBzbyBwZXJmb3JtYW5jZSBhbmQgbWVtb3J5XG4gKiBjb25zaWRlcmF0aW9ucyBhcmUgaW1wb3J0YW50LiAgRm9yIHRoaXMgcmVhc29uLCBpbml0aWFsaXplUGhldGlvT2JqZWN0IGlzIG9ubHkgY2FsbGVkIGluIFBoRVQtaU8gYnJhbmQsIHdoaWNoIG1lYW5zXG4gKiBtYW55IG9mIHRoZSBnZXR0ZXJzIHN1Y2ggYXMgYHBoZXRpb1N0YXRlYCBhbmQgYHBoZXRpb0RvY3VtZW50YXRpb25gIHdpbGwgbm90IHdvcmsgaW4gb3RoZXIgYnJhbmRzLiBXZSBoYXZlIG9wdGVkXG4gKiB0byBoYXZlIHRoZXNlIGdldHRlcnMgdGhyb3cgYXNzZXJ0aW9uIGVycm9ycyBpbiBvdGhlciBicmFuZHMgdG8gaGVscCBpZGVudGlmeSBwcm9ibGVtcyBpZiB0aGVzZSBhcmUgY2FsbGVkXG4gKiB1bmV4cGVjdGVkbHkuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgYW5pbWF0aW9uRnJhbWVUaW1lciBmcm9tICcuLi8uLi9heG9uL2pzL2FuaW1hdGlvbkZyYW1lVGltZXIuanMnO1xuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xuaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4uLy4uL2F4b24vanMvdmFsaWRhdGUuanMnO1xuaW1wb3J0IGFycmF5UmVtb3ZlIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9hcnJheVJlbW92ZS5qcyc7XG5pbXBvcnQgYXNzZXJ0TXV0dWFsbHlFeGNsdXNpdmVPcHRpb25zIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9hc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMuanMnO1xuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XG5pbXBvcnQgb3B0aW9uaXplLCB7IGNvbWJpbmVPcHRpb25zLCBFbXB0eVNlbGZPcHRpb25zLCBPcHRpb25pemVEZWZhdWx0cyB9IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xuaW1wb3J0IEV2ZW50VHlwZSBmcm9tICcuL0V2ZW50VHlwZS5qcyc7XG5pbXBvcnQgTGlua2VkRWxlbWVudElPIGZyb20gJy4vTGlua2VkRWxlbWVudElPLmpzJztcbmltcG9ydCBwaGV0aW9BUElWYWxpZGF0aW9uIGZyb20gJy4vcGhldGlvQVBJVmFsaWRhdGlvbi5qcyc7XG5pbXBvcnQgVGFuZGVtIGZyb20gJy4vVGFuZGVtLmpzJztcbmltcG9ydCBUYW5kZW1Db25zdGFudHMsIHsgUGhldGlvSUQsIFBoZXRpb09iamVjdE1ldGFkYXRhIH0gZnJvbSAnLi9UYW5kZW1Db25zdGFudHMuanMnO1xuaW1wb3J0IHRhbmRlbU5hbWVzcGFjZSBmcm9tICcuL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vdHlwZXMvSU9UeXBlLmpzJztcbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuaW1wb3J0IERpc3Bvc2FibGUsIHsgRGlzcG9zYWJsZU9wdGlvbnMgfSBmcm9tICcuLi8uLi9heG9uL2pzL0Rpc3Bvc2FibGUuanMnO1xuaW1wb3J0IExpbmthYmxlRWxlbWVudCBmcm9tICcuL0xpbmthYmxlRWxlbWVudC5qcyc7XG5cbi8vIGNvbnN0YW50c1xuY29uc3QgUEhFVF9JT19FTkFCTEVEID0gVGFuZGVtLlBIRVRfSU9fRU5BQkxFRDtcbmNvbnN0IElPX1RZUEVfVkFMSURBVE9SID0geyB2YWx1ZVR5cGU6IElPVHlwZSwgdmFsaWRhdGlvbk1lc3NhZ2U6ICdwaGV0aW9UeXBlIG11c3QgYmUgYW4gSU9UeXBlJyB9O1xuY29uc3QgQk9PTEVBTl9WQUxJREFUT1IgPSB7IHZhbHVlVHlwZTogJ2Jvb2xlYW4nIH07XG5cbi8vIHVzZSBcIjxicj5cIiBpbnN0ZWFkIG9mIG5ld2xpbmVzXG5jb25zdCBQSEVUX0lPX0RPQ1VNRU5UQVRJT05fVkFMSURBVE9SID0ge1xuICB2YWx1ZVR5cGU6ICdzdHJpbmcnLFxuICBpc1ZhbGlkVmFsdWU6ICggZG9jOiBzdHJpbmcgKSA9PiAhZG9jLmluY2x1ZGVzKCAnXFxuJyApLFxuICB2YWxpZGF0aW9uTWVzc2FnZTogJ3BoZXRpb0RvY3VtZW50YXRpb24gbXVzdCBiZSBwcm92aWRlZCBpbiB0aGUgcmlnaHQgZm9ybWF0J1xufTtcbmNvbnN0IFBIRVRfSU9fRVZFTlRfVFlQRV9WQUxJREFUT1IgPSB7XG4gIHZhbHVlVHlwZTogRXZlbnRUeXBlLFxuICB2YWxpZGF0aW9uTWVzc2FnZTogJ2ludmFsaWQgcGhldGlvRXZlbnRUeXBlJ1xufTtcbmNvbnN0IE9CSkVDVF9WQUxJREFUT1IgPSB7IHZhbHVlVHlwZTogWyBPYmplY3QsIG51bGwgXSB9O1xuXG5jb25zdCBvYmplY3RUb1BoZXRpb0lEID0gKCBwaGV0aW9PYmplY3Q6IFBoZXRpb09iamVjdCApID0+IHBoZXRpb09iamVjdC50YW5kZW0ucGhldGlvSUQ7XG5cbnR5cGUgU3RhcnRFdmVudE9wdGlvbnMgPSB7XG4gIGRhdGE/OiBSZWNvcmQ8c3RyaW5nLCBJbnRlbnRpb25hbEFueT4gfCBudWxsO1xuICBnZXREYXRhPzogKCAoKSA9PiBSZWNvcmQ8c3RyaW5nLCBJbnRlbnRpb25hbEFueT4gKSB8IG51bGw7XG59O1xuXG4vLyBXaGVuIGFuIGV2ZW50IGlzIHN1cHByZXNzZWQgZnJvbSB0aGUgZGF0YSBzdHJlYW0sIHdlIGtlZXAgdHJhY2sgb2YgaXQgd2l0aCB0aGlzIHRva2VuLlxuY29uc3QgU0tJUFBJTkdfTUVTU0FHRSA9IC0xO1xuXG5jb25zdCBERUZBVUxUUzogT3B0aW9uaXplRGVmYXVsdHM8U3RyaWN0T21pdDxTZWxmT3B0aW9ucywgJ3BoZXRpb0R5bmFtaWNFbGVtZW50TmFtZSc+PiA9IHtcblxuICAvLyBTdWJ0eXBlcyBjYW4gdXNlIGBUYW5kZW0udGFuZGVtUmVxdWlyZWRgIHRvIHJlcXVpcmUgYSBuYW1lZCB0YW5kZW0gcGFzc2VkIGluXG4gIHRhbmRlbTogVGFuZGVtLk9QVElPTkFMLFxuXG4gIC8vIERlZmluZXMgQVBJIG1ldGhvZHMsIGV2ZW50cyBhbmQgc2VyaWFsaXphdGlvblxuICBwaGV0aW9UeXBlOiBJT1R5cGUuT2JqZWN0SU8sXG5cbiAgLy8gVXNlZnVsIG5vdGVzIGFib3V0IGFuIGluc3RydW1lbnRlZCBQaGV0aW9PYmplY3QsIHNob3duIGluIHRoZSBQaEVULWlPIFN0dWRpbyBXcmFwcGVyLiBJdCdzIGFuIGh0bWxcbiAgLy8gc3RyaW5nLCBzbyBcIjxicj5cIiB0YWdzIGFyZSByZXF1aXJlZCBpbnN0ZWFkIG9mIFwiXFxuXCIgY2hhcmFjdGVycyBmb3IgcHJvcGVyIHJlbmRlcmluZyBpbiBTdHVkaW9cbiAgcGhldGlvRG9jdW1lbnRhdGlvbjogVGFuZGVtQ29uc3RhbnRzLlBIRVRfSU9fT0JKRUNUX01FVEFEQVRBX0RFRkFVTFRTLnBoZXRpb0RvY3VtZW50YXRpb24sXG5cbiAgLy8gV2hlbiB0cnVlLCBpbmNsdWRlcyB0aGUgUGhldGlvT2JqZWN0IGluIHRoZSBQaEVULWlPIHN0YXRlIChub3QgYXV0b21hdGljYWxseSByZWN1cnNpdmUsIG11c3QgYmUgc3BlY2lmaWVkIGZvclxuICAvLyBjaGlsZHJlbiBleHBsaWNpdGx5KVxuICBwaGV0aW9TdGF0ZTogVGFuZGVtQ29uc3RhbnRzLlBIRVRfSU9fT0JKRUNUX01FVEFEQVRBX0RFRkFVTFRTLnBoZXRpb1N0YXRlLFxuXG4gIC8vIFRoaXMgb3B0aW9uIGNvbnRyb2xzIGhvdyBQaEVULWlPIHdyYXBwZXJzIGNhbiBpbnRlcmZhY2Ugd2l0aCB0aGlzIFBoZXRpb09iamVjdC4gUHJlZG9taW5hdGVseSB0aGlzIG9jY3VycyB2aWFcbiAgLy8gcHVibGljIG1ldGhvZHMgZGVmaW5lZCBvbiB0aGlzIFBoZXRpb09iamVjdCdzIHBoZXRpb1R5cGUsIGluIHdoaWNoIHNvbWUgbWV0aG9kIGFyZSBub3QgZXhlY3V0YWJsZSB3aGVuIHRoaXMgZmxhZ1xuICAvLyBpcyB0cnVlLiBTZWUgYE9iamVjdElPLm1ldGhvZHNgIGZvciBmdXJ0aGVyIGRvY3VtZW50YXRpb24sIGVzcGVjaWFsbHkgcmVnYXJkaW5nIGBpbnZvY2FibGVGb3JSZWFkT25seUVsZW1lbnRzYC5cbiAgcGhldGlvUmVhZE9ubHk6IFRhbmRlbUNvbnN0YW50cy5QSEVUX0lPX09CSkVDVF9NRVRBREFUQV9ERUZBVUxUUy5waGV0aW9SZWFkT25seSxcblxuICAvLyBDYXRlZ29yeSBvZiBldmVudCB0eXBlLCBjYW4gYmUgb3ZlcnJpZGRlbiBpbiBwaGV0aW9TdGFydEV2ZW50IG9wdGlvbnMuICBDYW5ub3QgYmUgc3VwcGxpZWQgdGhyb3VnaCBUYW5kZW1Db25zdGFudHMgYmVjYXVzZVxuICAvLyB0aGF0IHdvdWxkIGNyZWF0ZSBhbiBpbXBvcnQgbG9vcFxuICBwaGV0aW9FdmVudFR5cGU6IEV2ZW50VHlwZS5NT0RFTCxcblxuICAvLyBIaWdoIGZyZXF1ZW5jeSBldmVudHMgc3VjaCBhcyBtb3VzZSBtb3ZlcyBjYW4gYmUgb21pdHRlZCBmcm9tIGRhdGEgc3RyZWFtLCBzZWUgP3BoZXRpb0VtaXRIaWdoRnJlcXVlbmN5RXZlbnRzXG4gIC8vIGFuZCBDbGllbnQubGF1bmNoU2ltIG9wdGlvblxuICAvLyBAZGVwcmVjYXRlZCAtIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1pby9pc3N1ZXMvMTYyOSNpc3N1ZWNvbW1lbnQtNjA4MDAyNDEwXG4gIHBoZXRpb0hpZ2hGcmVxdWVuY3k6IFRhbmRlbUNvbnN0YW50cy5QSEVUX0lPX09CSkVDVF9NRVRBREFUQV9ERUZBVUxUUy5waGV0aW9IaWdoRnJlcXVlbmN5LFxuXG4gIC8vIFdoZW4gdHJ1ZSwgZW1pdHMgZXZlbnRzIGZvciBkYXRhIHN0cmVhbXMgZm9yIHBsYXliYWNrLCBzZWUgaGFuZGxlUGxheWJhY2tFdmVudC5qc1xuICBwaGV0aW9QbGF5YmFjazogVGFuZGVtQ29uc3RhbnRzLlBIRVRfSU9fT0JKRUNUX01FVEFEQVRBX0RFRkFVTFRTLnBoZXRpb1BsYXliYWNrLFxuXG4gIC8vIFdoZW4gdHJ1ZSwgdGhpcyBpcyBjYXRlZ29yaXplZCBhcyBhbiBpbXBvcnRhbnQgXCJmZWF0dXJlZFwiIGVsZW1lbnQgaW4gU3R1ZGlvLlxuICBwaGV0aW9GZWF0dXJlZDogVGFuZGVtQ29uc3RhbnRzLlBIRVRfSU9fT0JKRUNUX01FVEFEQVRBX0RFRkFVTFRTLnBoZXRpb0ZlYXR1cmVkLFxuXG4gIC8vIGluZGljYXRlcyB0aGF0IGFuIG9iamVjdCBtYXkgb3IgbWF5IG5vdCBoYXZlIGJlZW4gY3JlYXRlZC4gQXBwbGllcyByZWN1cnNpdmVseSBhdXRvbWF0aWNhbGx5XG4gIC8vIGFuZCBzaG91bGQgb25seSBiZSBzZXQgbWFudWFsbHkgb24gdGhlIHJvb3QgZHluYW1pYyBlbGVtZW50LiBEeW5hbWljIGFyY2hldHlwZXMgd2lsbCBoYXZlIHRoaXMgb3ZlcndyaXR0ZW4gdG9cbiAgLy8gZmFsc2UgZXZlbiBpZiBleHBsaWNpdGx5IHByb3ZpZGVkIGFzIHRydWUsIGFzIGFyY2hldHlwZXMgY2Fubm90IGJlIGR5bmFtaWMuXG4gIHBoZXRpb0R5bmFtaWNFbGVtZW50OiBUYW5kZW1Db25zdGFudHMuUEhFVF9JT19PQkpFQ1RfTUVUQURBVEFfREVGQVVMVFMucGhldGlvRHluYW1pY0VsZW1lbnQsXG5cbiAgLy8gTWFya2luZyBwaGV0aW9EZXNpZ25lZDogdHJ1ZSBvcHRzLWluIHRvIEFQSSBjaGFuZ2UgZGV0ZWN0aW9uIHRvb2xpbmcgdGhhdCBjYW4gYmUgdXNlZCB0byBjYXRjaCBpbmFkdmVydGVudFxuICAvLyBjaGFuZ2VzIHRvIGEgZGVzaWduZWQgQVBJLiAgQSBwaGV0aW9EZXNpZ25lZDp0cnVlIFBoZXRpb09iamVjdCAob3IgYW55IG9mIGl0cyB0YW5kZW0gZGVzY2VuZGFudHMpIHdpbGwgdGhyb3dcbiAgLy8gYXNzZXJ0aW9uIGVycm9ycyBvbiBDVCAob3Igd2hlbiBydW5uaW5nIHdpdGggP3BoZXRpb0NvbXBhcmVBUEkpIHdoZW4gdGhlIGZvbGxvd2luZyBhcmUgdHJ1ZTpcbiAgLy8gKGEpIGl0cyBwYWNrYWdlLmpzb24gbGlzdHMgY29tcGFyZURlc2lnbmVkQVBJQ2hhbmdlczp0cnVlIGluIHRoZSBcInBoZXQtaW9cIiBzZWN0aW9uXG4gIC8vIChiKSB0aGUgc2ltdWxhdGlvbiBpcyBsaXN0ZWQgaW4gcGVyZW5uaWFsL2RhdGEvcGhldC1pby1hcGktc3RhYmxlXG4gIC8vIChjKSBhbnkgb2YgaXRzIG1ldGFkYXRhIHZhbHVlcyBkZXZpYXRlIGZyb20gdGhlIHJlZmVyZW5jZSBBUElcbiAgcGhldGlvRGVzaWduZWQ6IFRhbmRlbUNvbnN0YW50cy5QSEVUX0lPX09CSkVDVF9NRVRBREFUQV9ERUZBVUxUUy5waGV0aW9EZXNpZ25lZCxcblxuICAvLyBkZWxpdmVyZWQgd2l0aCBlYWNoIGV2ZW50LCBpZiBzcGVjaWZpZWQuIHBoZXRpb1BsYXliYWNrIGlzIGFwcGVuZGVkIGhlcmUsIGlmIHRydWUuXG4gIC8vIE5vdGU6IHVubGlrZSBvdGhlciBvcHRpb25zLCB0aGlzIG9wdGlvbiBjYW4gYmUgbXV0YXRlZCBkb3duc3RyZWFtLCBhbmQgaGVuY2Ugc2hvdWxkIGJlIGNyZWF0ZWQgbmV3bHkgZm9yIGVhY2ggaW5zdGFuY2UuXG4gIHBoZXRpb0V2ZW50TWV0YWRhdGE6IG51bGwsXG5cbiAgdGFuZGVtTmFtZVN1ZmZpeDogbnVsbFxufTtcblxuLy8gSWYgeW91IHJ1biBpbnRvIGEgdHlwZSBlcnJvciBoZXJlLCBmZWVsIGZyZWUgdG8gYWRkIGFueSB0eXBlIHRoYXQgaXMgc3VwcG9ydGVkIGJ5IHRoZSBicm93c2VycyBcInN0cnVjdHVyZWQgY2xvbmluZyBhbGdvcml0aG1cIiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9BUEkvV2ViX1dvcmtlcnNfQVBJL1N0cnVjdHVyZWRfY2xvbmVfYWxnb3JpdGhtXG50eXBlIEV2ZW50TWV0YWRhdGEgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBib29sZWFuIHwgbnVtYmVyIHwgQXJyYXk8c3RyaW5nIHwgYm9vbGVhbiB8IG51bWJlcj4+O1xuXG5hc3NlcnQgJiYgYXNzZXJ0KCBFdmVudFR5cGUucGhldGlvVHlwZS50b1N0YXRlT2JqZWN0KCBERUZBVUxUUy5waGV0aW9FdmVudFR5cGUgKSA9PT0gVGFuZGVtQ29uc3RhbnRzLlBIRVRfSU9fT0JKRUNUX01FVEFEQVRBX0RFRkFVTFRTLnBoZXRpb0V2ZW50VHlwZSxcbiAgJ3BoZXRpb0V2ZW50VHlwZSBtdXN0IGhhdmUgdGhlIHNhbWUgZGVmYXVsdCBhcyB0aGUgZGVmYXVsdCBtZXRhZGF0YSB2YWx1ZXMuJyApO1xuXG4vLyBPcHRpb25zIGZvciBjcmVhdGluZyBhIFBoZXRpb09iamVjdFxudHlwZSBTZWxmT3B0aW9ucyA9IFN0cmljdE9taXQ8UGFydGlhbDxQaGV0aW9PYmplY3RNZXRhZGF0YT4sICdwaGV0aW9UeXBlTmFtZScgfCAncGhldGlvQXJjaGV0eXBlUGhldGlvSUQnIHxcbiAgJ3BoZXRpb0lzQXJjaGV0eXBlJyB8ICdwaGV0aW9FdmVudFR5cGUnPiAmIHtcbiAgdGFuZGVtPzogVGFuZGVtO1xuICBwaGV0aW9UeXBlPzogSU9UeXBlO1xuICBwaGV0aW9FdmVudFR5cGU/OiBFdmVudFR5cGU7XG4gIHBoZXRpb0V2ZW50TWV0YWRhdGE/OiBFdmVudE1ldGFkYXRhIHwgbnVsbDtcblxuICAvLyBSZXF1aXJlIHRoYXQgdGhlIGdpdmVuIHRhbmRlbSdzIG5hbWUgZW5kcyBpbiB0aGUgcHJvdmlkZWQgc3RyaW5nLiBUaGlzIGlzIGhlbHAgd2l0aCBuYW1pbmcgY29udmVudGlvbnMuIElmIGFuXG4gIC8vIGFycmF5IG9mIG11bHRpcGxlIHN1ZmZpeGVzIGFyZSBwcm92aWRlZCwgcmVxdWlyZSB0aGF0IHRoZSBwcm92aWRlZCB0YW5kZW0gbWF0Y2hlcyBhbnkgb2YgdGhlIHN1cHBsaWVkXG4gIC8vIHRhbmRlbU5hbWVTdWZmaXggdmFsdWVzLiBGaXJzdCBjaGFyYWN0ZXIgaXMgbm90IGNhc2Ugc2Vuc2l0aXZlIHRvIHN1cHBvcnQgY2FzZXMgbGlrZVxuICAvLyBzaW0uc2NyZWVuMS52aWV3LnRoZXJtb21ldGVyTm9kZVxuICAvLyBzaW0uc2NyZWVuMS52aWV3LnVwcGVyVGhlcm1vbWV0ZXJOb2RlXG4gIHRhbmRlbU5hbWVTdWZmaXg/OiBzdHJpbmcgfCBzdHJpbmdbXSB8IG51bGw7XG59O1xudHlwZSBQYXJlbnRPcHRpb25zID0gRGlzcG9zYWJsZU9wdGlvbnM7XG5leHBvcnQgdHlwZSBQaGV0aW9PYmplY3RPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQYXJlbnRPcHRpb25zO1xuXG50eXBlIFBoZXRpb09iamVjdE1ldGFkYXRhS2V5cyA9IGtleW9mICggU3RyaWN0T21pdDxQaGV0aW9PYmplY3RNZXRhZGF0YSwgJ3BoZXRpb1R5cGVOYW1lJyB8ICdwaGV0aW9EeW5hbWljRWxlbWVudE5hbWUnPiApIHwgJ3BoZXRpb1R5cGUnO1xuZXhwb3J0IHR5cGUgUGhldGlvT2JqZWN0TWV0YWRhdGFJbnB1dCA9IFBpY2s8UGhldGlvT2JqZWN0LCBQaGV0aW9PYmplY3RNZXRhZGF0YUtleXM+O1xuXG5jbGFzcyBQaGV0aW9PYmplY3QgZXh0ZW5kcyBEaXNwb3NhYmxlIHtcblxuICAvLyBhc3NpZ25lZCBpbiBpbml0aWFsaXplUGhldGlvT2JqZWN0IC0gc2VlIGRvY3MgYXQgREVGQVVMVFMgZGVjbGFyYXRpb25cbiAgcHVibGljIHRhbmRlbTogVGFuZGVtO1xuXG4gIC8vIHRyYWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgYmVlbiBpbml0aWFsaXplZC4gIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgaW5pdGlhbGl6YXRpb24gY2FuIGhhcHBlbiBpbiB0aGVcbiAgLy8gY29uc3RydWN0b3Igb3IgaW4gYSBzdWJzZXF1ZW50IGNhbGwgdG8gaW5pdGlhbGl6ZVBoZXRpb09iamVjdCAodG8gc3VwcG9ydCBzY2VuZXJ5IE5vZGUpXG4gIHByaXZhdGUgcGhldGlvT2JqZWN0SW5pdGlhbGl6ZWQ6IGJvb2xlYW47XG5cbiAgLy8gU2VlIGRvY3VtZW50YXRpb24gaW4gREVGQVVMVFNcbiAgcHVibGljIHBoZXRpb0lzQXJjaGV0eXBlITogYm9vbGVhbjtcbiAgcHVibGljIHBoZXRpb0Jhc2VsaW5lTWV0YWRhdGEhOiBQaGV0aW9PYmplY3RNZXRhZGF0YSB8IG51bGw7XG4gIHByaXZhdGUgX3BoZXRpb1R5cGUhOiBJT1R5cGU7XG4gIHByaXZhdGUgX3BoZXRpb1N0YXRlITogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfcGhldGlvUmVhZE9ubHkhOiBib29sZWFuO1xuICBwcml2YXRlIF9waGV0aW9Eb2N1bWVudGF0aW9uITogc3RyaW5nO1xuICBwcml2YXRlIF9waGV0aW9FdmVudFR5cGUhOiBFdmVudFR5cGU7XG4gIHByaXZhdGUgX3BoZXRpb0hpZ2hGcmVxdWVuY3khOiBib29sZWFuO1xuICBwcml2YXRlIF9waGV0aW9QbGF5YmFjayE6IGJvb2xlYW47XG4gIHByaXZhdGUgX3BoZXRpb0R5bmFtaWNFbGVtZW50ITogYm9vbGVhbjtcbiAgcHJpdmF0ZSBfcGhldGlvRmVhdHVyZWQhOiBib29sZWFuO1xuICBwcml2YXRlIF9waGV0aW9FdmVudE1ldGFkYXRhITogRXZlbnRNZXRhZGF0YSB8IG51bGw7XG4gIHByaXZhdGUgX3BoZXRpb0Rlc2lnbmVkITogYm9vbGVhbjtcblxuICAvLyBQdWJsaWMgb25seSBmb3IgUGhldGlvT2JqZWN0TWV0YWRhdGFJbnB1dFxuICBwdWJsaWMgcGhldGlvQXJjaGV0eXBlUGhldGlvSUQhOiBzdHJpbmcgfCBudWxsO1xuICBwcml2YXRlIGxpbmtlZEVsZW1lbnRzITogTGlua2VkRWxlbWVudFtdIHwgbnVsbDtcbiAgcHVibGljIHBoZXRpb05vdGlmaWVkT2JqZWN0Q3JlYXRlZCE6IGJvb2xlYW47XG4gIHByaXZhdGUgcGhldGlvTWVzc2FnZVN0YWNrITogbnVtYmVyW107XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgREVGQVVMVF9PUFRJT05TID0gREVGQVVMVFM7XG4gIHB1YmxpYyBwaGV0aW9JRDogUGhldGlvSUQ7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBvcHRpb25zPzogUGhldGlvT2JqZWN0T3B0aW9ucyApIHtcbiAgICBzdXBlciggb3B0aW9ucyApO1xuXG4gICAgdGhpcy50YW5kZW0gPSBERUZBVUxUUy50YW5kZW07XG4gICAgdGhpcy5waGV0aW9JRCA9IHRoaXMudGFuZGVtLnBoZXRpb0lEO1xuICAgIHRoaXMucGhldGlvT2JqZWN0SW5pdGlhbGl6ZWQgPSBmYWxzZTtcblxuICAgIGlmICggb3B0aW9ucyApIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6ZVBoZXRpb09iamVjdCgge30sIG9wdGlvbnMgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBTQ0VORVJZL05vZGUsIFBoZXRpb09iamVjdCBjYW4gYmUgY29uZmlndXJlZCBkdXJpbmcgY29uc3RydWN0aW9uIG9yIGxhdGVyIHdpdGggYSBtdXRhdGUgY2FsbC5cbiAgICogTm9vcCBpZiBwcm92aWRlZCBvcHRpb25zIGtleXMgZG9uJ3QgaW50ZXJzZWN0IHdpdGggYW55IGtleSBpbiBERUZBVUxUUzsgYmFzZU9wdGlvbnMgYXJlIGlnbm9yZWQgZm9yIHRoaXMgY2FsY3VsYXRpb24uXG4gICAqL1xuICBwcm90ZWN0ZWQgaW5pdGlhbGl6ZVBoZXRpb09iamVjdCggYmFzZU9wdGlvbnM6IFBhcnRpYWw8UGhldGlvT2JqZWN0T3B0aW9ucz4sIHByb3ZpZGVkT3B0aW9uczogUGhldGlvT2JqZWN0T3B0aW9ucyApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBwcm92aWRlZE9wdGlvbnMsICdpbml0aWFsaXplUGhldGlvT2JqZWN0IG11c3QgYmUgY2FsbGVkIHdpdGggcHJvdmlkZWRPcHRpb25zJyApO1xuXG4gICAgLy8gY2FsbCBiZWZvcmUgd2UgZXhpdCBlYXJseSB0byBzdXBwb3J0IGxvZ2dpbmcgdW5zdXBwbGllZCBUYW5kZW1zLlxuICAgIHByb3ZpZGVkT3B0aW9ucy50YW5kZW0gJiYgVGFuZGVtLm9uTWlzc2luZ1RhbmRlbSggcHJvdmlkZWRPcHRpb25zLnRhbmRlbSApO1xuXG4gICAgLy8gTWFrZSBzdXJlIHRoYXQgcmVxdWlyZWQgdGFuZGVtcyBhcmUgc3VwcGxpZWRcbiAgICBpZiAoIFRhbmRlbS5WQUxJREFUSU9OICYmIHByb3ZpZGVkT3B0aW9ucy50YW5kZW0gJiYgcHJvdmlkZWRPcHRpb25zLnRhbmRlbS5yZXF1aXJlZCApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHByb3ZpZGVkT3B0aW9ucy50YW5kZW0uc3VwcGxpZWQsICdyZXF1aXJlZCB0YW5kZW1zIG11c3QgYmUgc3VwcGxpZWQnICk7XG4gICAgfVxuXG4gICAgLy8gVGhlIHByZXNlbmNlIG9mIGB0YW5kZW1gIGluZGljYXRlcyBpZiB0aGlzIFBoZXRpb09iamVjdCBjYW4gYmUgaW5pdGlhbGl6ZWQuIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHBlcmhhcHNcbiAgICAvLyBpdCB3aWxsIGJlIGluaXRpYWxpemVkIGxhdGVyIG9uLCBhcyBpbiBOb2RlLm11dGF0ZSgpLlxuICAgIGlmICggISggUEhFVF9JT19FTkFCTEVEICYmIHByb3ZpZGVkT3B0aW9ucy50YW5kZW0gJiYgcHJvdmlkZWRPcHRpb25zLnRhbmRlbS5zdXBwbGllZCApICkge1xuICAgICAgYXNzZXJ0ICYmICFwcm92aWRlZE9wdGlvbnMudGFuZGVtICYmIGFzc2VydCggIXNwZWNpZmllc05vblRhbmRlbVBoZXRpb09iamVjdEtleSggcHJvdmlkZWRPcHRpb25zICksICdvbmx5IHNwZWNpZnkgbWV0YWRhdGEgd2hlbiBwcm92aWRpbmcgYSBUYW5kZW0nICk7XG5cbiAgICAgIC8vIEluIHRoaXMgY2FzZSwgdGhlIFBoZXRpb09iamVjdCBpcyBub3QgaW5pdGlhbGl6ZWQsIGJ1dCBzdGlsbCBzZXQgdGFuZGVtIHRvIG1haW50YWluIGEgY29uc2lzdGVudCBBUEkgZm9yXG4gICAgICAvLyBjcmVhdGluZyB0aGUgVGFuZGVtIHRyZWUuXG4gICAgICBpZiAoIHByb3ZpZGVkT3B0aW9ucy50YW5kZW0gKSB7XG4gICAgICAgIHRoaXMudGFuZGVtID0gcHJvdmlkZWRPcHRpb25zLnRhbmRlbTtcbiAgICAgICAgdGhpcy5waGV0aW9JRCA9IHRoaXMudGFuZGVtLnBoZXRpb0lEO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFzc2VydCB0aGlzIGFmdGVyIHRoZSBgc3BlY2lmaWVzUGhldGlvT2JqZWN0S2V5IGNoZWNrIHRvIHN1cHBvcnQgc29tZXRoaW5nIGxpa2U6XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMucGhldGlvT2JqZWN0SW5pdGlhbGl6ZWQsICdjYW5ub3QgaW5pdGlhbGl6ZSB0d2ljZScgKTtcblxuICAgIC8vIEd1YXJkIHZhbGlkYXRpb24gb24gYXNzZXJ0IHRvIGF2b2lkIGNhbGxpbmcgYSBsYXJnZSBudW1iZXIgb2Ygbm8tb3BzIHdoZW4gYXNzZXJ0aW9ucyBhcmUgZGlzYWJsZWQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvdGFuZGVtL2lzc3Vlcy8yMDBcbiAgICBhc3NlcnQgJiYgdmFsaWRhdGUoIHByb3ZpZGVkT3B0aW9ucy50YW5kZW0sIHsgdmFsdWVUeXBlOiBUYW5kZW0gfSApO1xuXG4gICAgY29uc3QgZGVmYXVsdHMgPSBjb21iaW5lT3B0aW9uczxPcHRpb25pemVEZWZhdWx0czxQaGV0aW9PYmplY3RPcHRpb25zPj4oIHt9LCBERUZBVUxUUywgYmFzZU9wdGlvbnMgKTtcblxuICAgIGxldCBvcHRpb25zID0gb3B0aW9uaXplPFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIGRlZmF1bHRzLCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICAgIC8vIHZhbGlkYXRlIG9wdGlvbnMgYmVmb3JlIGFzc2lnbmluZyB0byBwcm9wZXJ0aWVzXG4gICAgYXNzZXJ0ICYmIHZhbGlkYXRlKCBvcHRpb25zLnBoZXRpb1R5cGUsIElPX1RZUEVfVkFMSURBVE9SICk7XG4gICAgYXNzZXJ0ICYmIHZhbGlkYXRlKCBvcHRpb25zLnBoZXRpb1N0YXRlLCBtZXJnZSgge30sIEJPT0xFQU5fVkFMSURBVE9SLCB7IHZhbGlkYXRpb25NZXNzYWdlOiAncGhldGlvU3RhdGUgbXVzdCBiZSBhIGJvb2xlYW4nIH0gKSApO1xuICAgIGFzc2VydCAmJiB2YWxpZGF0ZSggb3B0aW9ucy5waGV0aW9SZWFkT25seSwgbWVyZ2UoIHt9LCBCT09MRUFOX1ZBTElEQVRPUiwgeyB2YWxpZGF0aW9uTWVzc2FnZTogJ3BoZXRpb1JlYWRPbmx5IG11c3QgYmUgYSBib29sZWFuJyB9ICkgKTtcbiAgICBhc3NlcnQgJiYgdmFsaWRhdGUoIG9wdGlvbnMucGhldGlvRXZlbnRUeXBlLCBQSEVUX0lPX0VWRU5UX1RZUEVfVkFMSURBVE9SICk7XG4gICAgYXNzZXJ0ICYmIHZhbGlkYXRlKCBvcHRpb25zLnBoZXRpb0RvY3VtZW50YXRpb24sIFBIRVRfSU9fRE9DVU1FTlRBVElPTl9WQUxJREFUT1IgKTtcbiAgICBhc3NlcnQgJiYgdmFsaWRhdGUoIG9wdGlvbnMucGhldGlvSGlnaEZyZXF1ZW5jeSwgbWVyZ2UoIHt9LCBCT09MRUFOX1ZBTElEQVRPUiwgeyB2YWxpZGF0aW9uTWVzc2FnZTogJ3BoZXRpb0hpZ2hGcmVxdWVuY3kgbXVzdCBiZSBhIGJvb2xlYW4nIH0gKSApO1xuICAgIGFzc2VydCAmJiB2YWxpZGF0ZSggb3B0aW9ucy5waGV0aW9QbGF5YmFjaywgbWVyZ2UoIHt9LCBCT09MRUFOX1ZBTElEQVRPUiwgeyB2YWxpZGF0aW9uTWVzc2FnZTogJ3BoZXRpb1BsYXliYWNrIG11c3QgYmUgYSBib29sZWFuJyB9ICkgKTtcbiAgICBhc3NlcnQgJiYgdmFsaWRhdGUoIG9wdGlvbnMucGhldGlvRmVhdHVyZWQsIG1lcmdlKCB7fSwgQk9PTEVBTl9WQUxJREFUT1IsIHsgdmFsaWRhdGlvbk1lc3NhZ2U6ICdwaGV0aW9GZWF0dXJlZCBtdXN0IGJlIGEgYm9vbGVhbicgfSApICk7XG4gICAgYXNzZXJ0ICYmIHZhbGlkYXRlKCBvcHRpb25zLnBoZXRpb0V2ZW50TWV0YWRhdGEsIG1lcmdlKCB7fSwgT0JKRUNUX1ZBTElEQVRPUiwgeyB2YWxpZGF0aW9uTWVzc2FnZTogJ29iamVjdCBsaXRlcmFsIGV4cGVjdGVkJyB9ICkgKTtcbiAgICBhc3NlcnQgJiYgdmFsaWRhdGUoIG9wdGlvbnMucGhldGlvRHluYW1pY0VsZW1lbnQsIG1lcmdlKCB7fSwgQk9PTEVBTl9WQUxJREFUT1IsIHsgdmFsaWRhdGlvbk1lc3NhZ2U6ICdwaGV0aW9EeW5hbWljRWxlbWVudCBtdXN0IGJlIGEgYm9vbGVhbicgfSApICk7XG4gICAgYXNzZXJ0ICYmIHZhbGlkYXRlKCBvcHRpb25zLnBoZXRpb0Rlc2lnbmVkLCBtZXJnZSgge30sIEJPT0xFQU5fVkFMSURBVE9SLCB7IHZhbGlkYXRpb25NZXNzYWdlOiAncGhldGlvRGVzaWduZWQgbXVzdCBiZSBhIGJvb2xlYW4nIH0gKSApO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5saW5rZWRFbGVtZW50cyAhPT0gbnVsbCwgJ3RoaXMgbWVhbnMgYWRkTGlua2VkRWxlbWVudCB3YXMgY2FsbGVkIGJlZm9yZSBpbnN0cnVtZW50YXRpb24gb2YgdGhpcyBQaGV0aW9PYmplY3QnICk7XG5cbiAgICAvLyBvcHRpb25hbCAtIEluZGljYXRlcyB0aGF0IGFuIG9iamVjdCBpcyBhIGFyY2hldHlwZSBmb3IgYSBkeW5hbWljIGNsYXNzLiBTZXR0YWJsZSBvbmx5IGJ5XG4gICAgLy8gUGhldGlvRW5naW5lIGFuZCBieSBjbGFzc2VzIHRoYXQgY3JlYXRlIGR5bmFtaWMgZWxlbWVudHMgd2hlbiBjcmVhdGluZyB0aGVpciBhcmNoZXR5cGUgKGxpa2UgUGhldGlvR3JvdXApIHRocm91Z2hcbiAgICAvLyBQaGV0aW9PYmplY3QubWFya0R5bmFtaWNFbGVtZW50QXJjaGV0eXBlKCkuXG4gICAgLy8gaWYgdHJ1ZSwgaXRlbXMgd2lsbCBiZSBleGNsdWRlZCBmcm9tIHBoZXRpb1N0YXRlLiBUaGlzIGFwcGxpZXMgcmVjdXJzaXZlbHkgYXV0b21hdGljYWxseS5cbiAgICB0aGlzLnBoZXRpb0lzQXJjaGV0eXBlID0gZmFsc2U7XG5cbiAgICAvLyAocGhldGlvRW5naW5lKVxuICAgIC8vIFN0b3JlIHRoZSBmdWxsIGJhc2VsaW5lIGZvciB1c2FnZSBpbiB2YWxpZGF0aW9uIG9yIGZvciB1c2FnZSBpbiBzdHVkaW8uICBEbyB0aGlzIGJlZm9yZSBhcHBseWluZyBvdmVycmlkZXMuIFRoZVxuICAgIC8vIGJhc2VsaW5lIGlzIGNyZWF0ZWQgd2hlbiBhIHNpbSBpcyBydW4gd2l0aCBhc3NlcnRpb25zIHRvIGFzc2lzdCBpbiBwaGV0aW9BUElWYWxpZGF0aW9uLiAgSG93ZXZlciwgZXZlbiB3aGVuXG4gICAgLy8gYXNzZXJ0aW9ucyBhcmUgZGlzYWJsZWQsIHNvbWUgd3JhcHBlcnMgc3VjaCBhcyBzdHVkaW8gbmVlZCB0byBnZW5lcmF0ZSB0aGUgYmFzZWxpbmUgYW55d2F5LlxuICAgIC8vIG5vdCBhbGwgbWV0YWRhdGEgYXJlIHBhc3NlZCB0aHJvdWdoIHZpYSBvcHRpb25zLCBzbyBzdG9yZSBiYXNlbGluZSBmb3IgdGhlc2UgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gICAgdGhpcy5waGV0aW9CYXNlbGluZU1ldGFkYXRhID0gKCBwaGV0aW9BUElWYWxpZGF0aW9uLmVuYWJsZWQgfHwgcGhldC5wcmVsb2Fkcy5waGV0aW8ucXVlcnlQYXJhbWV0ZXJzLnBoZXRpb0VtaXRBUElCYXNlbGluZSApID9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldE1ldGFkYXRhKCBtZXJnZSgge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGhldGlvSXNBcmNoZXR5cGU6IHRoaXMucGhldGlvSXNBcmNoZXR5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwaGV0aW9BcmNoZXR5cGVQaGV0aW9JRDogdGhpcy5waGV0aW9BcmNoZXR5cGVQaGV0aW9JRFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIG9wdGlvbnMgKSApIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBudWxsO1xuXG4gICAgLy8gRHluYW1pYyBlbGVtZW50cyBzaG91bGQgY29tcGFyZSB0byB0aGVpciBcImFyY2hldHlwYWxcIiBjb3VudGVycGFydHMuICBGb3IgZXhhbXBsZSwgdGhpcyBtZWFucyB0aGF0IGEgUGFydGljbGVcbiAgICAvLyBpbiBhIFBoZXRpb0dyb3VwIHdpbGwgdGFrZSBpdHMgb3ZlcnJpZGVzIGZyb20gdGhlIFBoZXRpb0dyb3VwIGFyY2hldHlwZS5cbiAgICBjb25zdCBhcmNoZXR5cGFsUGhldGlvSUQgPSBvcHRpb25zLnRhbmRlbS5nZXRBcmNoZXR5cGFsUGhldGlvSUQoKTtcblxuICAgIC8vIE92ZXJyaWRlcyBhcmUgb25seSBkZWZpbmVkIGZvciBzaW11bGF0aW9ucywgbm90IGZvciB1bml0IHRlc3RzLiAgU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0LWlvL2lzc3Vlcy8xNDYxXG4gICAgLy8gUGF0Y2ggaW4gdGhlIGRlc2lyZWQgdmFsdWVzIGZyb20gb3ZlcnJpZGVzLCBpZiBhbnkuXG4gICAgaWYgKCB3aW5kb3cucGhldC5wcmVsb2Fkcy5waGV0aW8ucGhldGlvRWxlbWVudHNPdmVycmlkZXMgKSB7XG4gICAgICBjb25zdCBvdmVycmlkZXMgPSB3aW5kb3cucGhldC5wcmVsb2Fkcy5waGV0aW8ucGhldGlvRWxlbWVudHNPdmVycmlkZXNbIGFyY2hldHlwYWxQaGV0aW9JRCBdO1xuICAgICAgaWYgKCBvdmVycmlkZXMgKSB7XG5cbiAgICAgICAgLy8gTm8gbmVlZCB0byBtYWtlIGEgbmV3IG9iamVjdCwgc2luY2UgdGhpcyBcIm9wdGlvbnNcIiB2YXJpYWJsZSB3YXMgY3JlYXRlZCBpbiB0aGUgcHJldmlvdXMgbWVyZ2UgY2FsbCBhYm92ZS5cbiAgICAgICAgb3B0aW9ucyA9IG9wdGlvbml6ZTxQaGV0aW9PYmplY3RPcHRpb25zPigpKCBvcHRpb25zLCBvdmVycmlkZXMgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyAocmVhZC1vbmx5KSBzZWUgZG9jcyBhdCBERUZBVUxUUyBkZWNsYXJhdGlvblxuICAgIHRoaXMudGFuZGVtID0gb3B0aW9ucy50YW5kZW0hO1xuICAgIHRoaXMucGhldGlvSUQgPSB0aGlzLnRhbmRlbS5waGV0aW9JRDtcblxuICAgIC8vIChyZWFkLW9ubHkpIHNlZSBkb2NzIGF0IERFRkFVTFRTIGRlY2xhcmF0aW9uXG4gICAgdGhpcy5fcGhldGlvVHlwZSA9IG9wdGlvbnMucGhldGlvVHlwZTtcblxuICAgIC8vIChyZWFkLW9ubHkpIHNlZSBkb2NzIGF0IERFRkFVTFRTIGRlY2xhcmF0aW9uXG4gICAgdGhpcy5fcGhldGlvU3RhdGUgPSBvcHRpb25zLnBoZXRpb1N0YXRlO1xuXG4gICAgLy8gKHJlYWQtb25seSkgc2VlIGRvY3MgYXQgREVGQVVMVFMgZGVjbGFyYXRpb25cbiAgICB0aGlzLl9waGV0aW9SZWFkT25seSA9IG9wdGlvbnMucGhldGlvUmVhZE9ubHk7XG5cbiAgICAvLyAocmVhZC1vbmx5KSBzZWUgZG9jcyBhdCBERUZBVUxUUyBkZWNsYXJhdGlvblxuICAgIHRoaXMuX3BoZXRpb0RvY3VtZW50YXRpb24gPSBvcHRpb25zLnBoZXRpb0RvY3VtZW50YXRpb247XG5cbiAgICAvLyBzZWUgZG9jcyBhdCBERUZBVUxUUyBkZWNsYXJhdGlvblxuICAgIHRoaXMuX3BoZXRpb0V2ZW50VHlwZSA9IG9wdGlvbnMucGhldGlvRXZlbnRUeXBlO1xuXG4gICAgLy8gc2VlIGRvY3MgYXQgREVGQVVMVFMgZGVjbGFyYXRpb25cbiAgICB0aGlzLl9waGV0aW9IaWdoRnJlcXVlbmN5ID0gb3B0aW9ucy5waGV0aW9IaWdoRnJlcXVlbmN5O1xuXG4gICAgLy8gc2VlIGRvY3MgYXQgREVGQVVMVFMgZGVjbGFyYXRpb25cbiAgICB0aGlzLl9waGV0aW9QbGF5YmFjayA9IG9wdGlvbnMucGhldGlvUGxheWJhY2s7XG5cbiAgICAvLyAoUGhldGlvRW5naW5lKSBzZWUgZG9jcyBhdCBERUZBVUxUUyBkZWNsYXJhdGlvbiAtIGluIG9yZGVyIHRvIHJlY3Vyc2l2ZWx5IHBhc3MgdGhpcyB2YWx1ZSB0b1xuICAgIC8vIGNoaWxkcmVuLCB0aGUgc2V0UGhldGlvRHluYW1pY0VsZW1lbnQoKSBmdW5jdGlvbiBtdXN0IGJlIHVzZWQgaW5zdGVhZCBvZiBzZXR0aW5nIHRoaXMgYXR0cmlidXRlIGRpcmVjdGx5XG4gICAgdGhpcy5fcGhldGlvRHluYW1pY0VsZW1lbnQgPSBvcHRpb25zLnBoZXRpb0R5bmFtaWNFbGVtZW50O1xuXG4gICAgLy8gKHJlYWQtb25seSkgc2VlIGRvY3MgYXQgREVGQVVMVFMgZGVjbGFyYXRpb25cbiAgICB0aGlzLl9waGV0aW9GZWF0dXJlZCA9IG9wdGlvbnMucGhldGlvRmVhdHVyZWQ7XG5cbiAgICB0aGlzLl9waGV0aW9FdmVudE1ldGFkYXRhID0gb3B0aW9ucy5waGV0aW9FdmVudE1ldGFkYXRhO1xuXG4gICAgdGhpcy5fcGhldGlvRGVzaWduZWQgPSBvcHRpb25zLnBoZXRpb0Rlc2lnbmVkO1xuXG4gICAgLy8gZm9yIHBoZXRpb0R5bmFtaWNFbGVtZW50cywgdGhlIGNvcnJlc3BvbmRpbmcgcGhldGlvSUQgZm9yIHRoZSBlbGVtZW50IGluIHRoZSBhcmNoZXR5cGUgc3VidHJlZVxuICAgIHRoaXMucGhldGlvQXJjaGV0eXBlUGhldGlvSUQgPSBudWxsO1xuXG4gICAgLy9rZWVwIHRyYWNrIG9mIExpbmtlZEVsZW1lbnRzIGZvciBkaXNwb3NhbC4gTnVsbCBvdXQgdG8gc3VwcG9ydCBhc3NlcnRpbmcgb25cbiAgICAvLyBlZGdlIGVycm9yIGNhc2VzLCBzZWUgdGhpcy5hZGRMaW5rZWRFbGVtZW50KClcbiAgICB0aGlzLmxpbmtlZEVsZW1lbnRzID0gW107XG5cbiAgICAvLyAocGhldC1pbykgc2V0IHRvIHRydWUgd2hlbiB0aGlzIFBoZXRpb09iamVjdCBoYXMgYmVlbiBzZW50IG92ZXIgdG8gdGhlIHBhcmVudC5cbiAgICB0aGlzLnBoZXRpb05vdGlmaWVkT2JqZWN0Q3JlYXRlZCA9IGZhbHNlO1xuXG4gICAgLy8gdHJhY2tzIHRoZSBpbmRpY2VzIG9mIHN0YXJ0ZWQgbWVzc2FnZXMgc28gdGhhdCBkYXRhU3RyZWFtIGNhbiBjaGVjayB0aGF0IGVuZHMgbWF0Y2ggc3RhcnRzLlxuICAgIHRoaXMucGhldGlvTWVzc2FnZVN0YWNrID0gW107XG5cbiAgICAvLyBNYWtlIHN1cmUgcGxheWJhY2sgc2hvd3MgaW4gdGhlIHBoZXRpb0V2ZW50TWV0YWRhdGFcbiAgICBpZiAoIHRoaXMuX3BoZXRpb1BsYXliYWNrICkge1xuICAgICAgdGhpcy5fcGhldGlvRXZlbnRNZXRhZGF0YSA9IHRoaXMuX3BoZXRpb0V2ZW50TWV0YWRhdGEgfHwge307XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5fcGhldGlvRXZlbnRNZXRhZGF0YS5oYXNPd25Qcm9wZXJ0eSggJ3BsYXliYWNrJyApLCAncGhldGlvRXZlbnRNZXRhZGF0YS5wbGF5YmFjayBzaG91bGQgbm90IGFscmVhZHkgZXhpc3QnICk7XG4gICAgICB0aGlzLl9waGV0aW9FdmVudE1ldGFkYXRhLnBsYXliYWNrID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBBbGVydCB0aGF0IHRoaXMgUGhldGlvT2JqZWN0IGlzIHJlYWR5IGZvciBjcm9zcy1mcmFtZSBjb21tdW5pY2F0aW9uICh0aHVzIGJlY29taW5nIGEgXCJQaEVULWlPIGVsZW1lbnRcIiBvbiB0aGUgd3JhcHBlciBzaWRlLlxuICAgIHRoaXMudGFuZGVtLmFkZFBoZXRpb09iamVjdCggdGhpcyApO1xuICAgIHRoaXMucGhldGlvT2JqZWN0SW5pdGlhbGl6ZWQgPSB0cnVlO1xuXG4gICAgaWYgKCBhc3NlcnQgJiYgVGFuZGVtLlZBTElEQVRJT04gJiYgdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpICYmIG9wdGlvbnMudGFuZGVtTmFtZVN1ZmZpeCApIHtcblxuICAgICAgY29uc3Qgc3VmZml4QXJyYXkgPSBBcnJheS5pc0FycmF5KCBvcHRpb25zLnRhbmRlbU5hbWVTdWZmaXggKSA/IG9wdGlvbnMudGFuZGVtTmFtZVN1ZmZpeCA6IFsgb3B0aW9ucy50YW5kZW1OYW1lU3VmZml4IF07XG4gICAgICBjb25zdCBtYXRjaGVzID0gc3VmZml4QXJyYXkuZmlsdGVyKCBzdWZmaXggPT4ge1xuICAgICAgICByZXR1cm4gdGhpcy50YW5kZW0ubmFtZS5lbmRzV2l0aCggc3VmZml4ICkgfHxcbiAgICAgICAgICAgICAgIHRoaXMudGFuZGVtLm5hbWUuZW5kc1dpdGgoIFBoZXRpb09iamVjdC5zd2FwQ2FzZU9mRmlyc3RDaGFyYWN0ZXIoIHN1ZmZpeCApICk7XG4gICAgICB9ICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYXRjaGVzLmxlbmd0aCA+IDAsICdJbmNvcnJlY3QgVGFuZGVtIHN1ZmZpeCwgZXhwZWN0ZWQgPSAnICsgc3VmZml4QXJyYXkuam9pbiggJywgJyApICsgJy4gYWN0dWFsID0gJyArIHRoaXMudGFuZGVtLnBoZXRpb0lEICk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHN0YXRpYyBzd2FwQ2FzZU9mRmlyc3RDaGFyYWN0ZXIoIHN0cmluZzogc3RyaW5nICk6IHN0cmluZyB7XG4gICAgY29uc3QgZmlyc3RDaGFyID0gc3RyaW5nWyAwIF07XG4gICAgY29uc3QgbmV3Rmlyc3RDaGFyID0gZmlyc3RDaGFyID09PSBmaXJzdENoYXIudG9Mb3dlckNhc2UoKSA/IGZpcnN0Q2hhci50b1VwcGVyQ2FzZSgpIDogZmlyc3RDaGFyLnRvTG93ZXJDYXNlKCk7XG4gICAgcmV0dXJuIG5ld0ZpcnN0Q2hhciArIHN0cmluZy5zdWJzdHJpbmcoIDEgKTtcbiAgfVxuXG4gIC8vIHRocm93cyBhbiBhc3NlcnRpb24gZXJyb3IgaW4gYnJhbmRzIG90aGVyIHRoYW4gUGhFVC1pT1xuICBwdWJsaWMgZ2V0IHBoZXRpb1R5cGUoKTogSU9UeXBlIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBQSEVUX0lPX0VOQUJMRUQgJiYgdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpLCAncGhldGlvVHlwZSBvbmx5IGFjY2Vzc2libGUgZm9yIGluc3RydW1lbnRlZCBvYmplY3RzIGluIFBoRVQtaU8gYnJhbmQuJyApO1xuICAgIHJldHVybiB0aGlzLl9waGV0aW9UeXBlO1xuICB9XG5cbiAgLy8gdGhyb3dzIGFuIGFzc2VydGlvbiBlcnJvciBpbiBicmFuZHMgb3RoZXIgdGhhbiBQaEVULWlPXG4gIHB1YmxpYyBnZXQgcGhldGlvU3RhdGUoKTogYm9vbGVhbiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggUEhFVF9JT19FTkFCTEVEICYmIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSwgJ3BoZXRpb1N0YXRlIG9ubHkgYWNjZXNzaWJsZSBmb3IgaW5zdHJ1bWVudGVkIG9iamVjdHMgaW4gUGhFVC1pTyBicmFuZC4nICk7XG4gICAgcmV0dXJuIHRoaXMuX3BoZXRpb1N0YXRlO1xuICB9XG5cbiAgLy8gdGhyb3dzIGFuIGFzc2VydGlvbiBlcnJvciBpbiBicmFuZHMgb3RoZXIgdGhhbiBQaEVULWlPXG4gIHB1YmxpYyBnZXQgcGhldGlvUmVhZE9ubHkoKTogYm9vbGVhbiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggUEhFVF9JT19FTkFCTEVEICYmIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSwgJ3BoZXRpb1JlYWRPbmx5IG9ubHkgYWNjZXNzaWJsZSBmb3IgaW5zdHJ1bWVudGVkIG9iamVjdHMgaW4gUGhFVC1pTyBicmFuZC4nICk7XG4gICAgcmV0dXJuIHRoaXMuX3BoZXRpb1JlYWRPbmx5O1xuICB9XG5cbiAgLy8gdGhyb3dzIGFuIGFzc2VydGlvbiBlcnJvciBpbiBicmFuZHMgb3RoZXIgdGhhbiBQaEVULWlPXG4gIHB1YmxpYyBnZXQgcGhldGlvRG9jdW1lbnRhdGlvbigpOiBzdHJpbmcge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIFBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICdwaGV0aW9Eb2N1bWVudGF0aW9uIG9ubHkgYWNjZXNzaWJsZSBmb3IgaW5zdHJ1bWVudGVkIG9iamVjdHMgaW4gUGhFVC1pTyBicmFuZC4nICk7XG4gICAgcmV0dXJuIHRoaXMuX3BoZXRpb0RvY3VtZW50YXRpb247XG4gIH1cblxuICAvLyB0aHJvd3MgYW4gYXNzZXJ0aW9uIGVycm9yIGluIGJyYW5kcyBvdGhlciB0aGFuIFBoRVQtaU9cbiAgcHVibGljIGdldCBwaGV0aW9FdmVudFR5cGUoKTogRXZlbnRUeXBlIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBQSEVUX0lPX0VOQUJMRUQgJiYgdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpLCAncGhldGlvRXZlbnRUeXBlIG9ubHkgYWNjZXNzaWJsZSBmb3IgaW5zdHJ1bWVudGVkIG9iamVjdHMgaW4gUGhFVC1pTyBicmFuZC4nICk7XG4gICAgcmV0dXJuIHRoaXMuX3BoZXRpb0V2ZW50VHlwZTtcbiAgfVxuXG4gIC8vIHRocm93cyBhbiBhc3NlcnRpb24gZXJyb3IgaW4gYnJhbmRzIG90aGVyIHRoYW4gUGhFVC1pT1xuICBwdWJsaWMgZ2V0IHBoZXRpb0hpZ2hGcmVxdWVuY3koKTogYm9vbGVhbiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggUEhFVF9JT19FTkFCTEVEICYmIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSwgJ3BoZXRpb0hpZ2hGcmVxdWVuY3kgb25seSBhY2Nlc3NpYmxlIGZvciBpbnN0cnVtZW50ZWQgb2JqZWN0cyBpbiBQaEVULWlPIGJyYW5kLicgKTtcbiAgICByZXR1cm4gdGhpcy5fcGhldGlvSGlnaEZyZXF1ZW5jeTtcbiAgfVxuXG4gIC8vIHRocm93cyBhbiBhc3NlcnRpb24gZXJyb3IgaW4gYnJhbmRzIG90aGVyIHRoYW4gUGhFVC1pT1xuICBwdWJsaWMgZ2V0IHBoZXRpb1BsYXliYWNrKCk6IGJvb2xlYW4ge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIFBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICdwaGV0aW9QbGF5YmFjayBvbmx5IGFjY2Vzc2libGUgZm9yIGluc3RydW1lbnRlZCBvYmplY3RzIGluIFBoRVQtaU8gYnJhbmQuJyApO1xuICAgIHJldHVybiB0aGlzLl9waGV0aW9QbGF5YmFjaztcbiAgfVxuXG4gIC8vIHRocm93cyBhbiBhc3NlcnRpb24gZXJyb3IgaW4gYnJhbmRzIG90aGVyIHRoYW4gUGhFVC1pT1xuICBwdWJsaWMgZ2V0IHBoZXRpb0R5bmFtaWNFbGVtZW50KCk6IGJvb2xlYW4ge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIFBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICdwaGV0aW9EeW5hbWljRWxlbWVudCBvbmx5IGFjY2Vzc2libGUgZm9yIGluc3RydW1lbnRlZCBvYmplY3RzIGluIFBoRVQtaU8gYnJhbmQuJyApO1xuICAgIHJldHVybiB0aGlzLl9waGV0aW9EeW5hbWljRWxlbWVudDtcbiAgfVxuXG4gIC8vIHRocm93cyBhbiBhc3NlcnRpb24gZXJyb3IgaW4gYnJhbmRzIG90aGVyIHRoYW4gUGhFVC1pT1xuICBwdWJsaWMgZ2V0IHBoZXRpb0ZlYXR1cmVkKCk6IGJvb2xlYW4ge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIFBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICdwaGV0aW9GZWF0dXJlZCBvbmx5IGFjY2Vzc2libGUgZm9yIGluc3RydW1lbnRlZCBvYmplY3RzIGluIFBoRVQtaU8gYnJhbmQuJyApO1xuICAgIHJldHVybiB0aGlzLl9waGV0aW9GZWF0dXJlZDtcbiAgfVxuXG4gIC8vIHRocm93cyBhbiBhc3NlcnRpb24gZXJyb3IgaW4gYnJhbmRzIG90aGVyIHRoYW4gUGhFVC1pT1xuICBwdWJsaWMgZ2V0IHBoZXRpb0V2ZW50TWV0YWRhdGEoKTogRXZlbnRNZXRhZGF0YSB8IG51bGwge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIFBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICdwaGV0aW9FdmVudE1ldGFkYXRhIG9ubHkgYWNjZXNzaWJsZSBmb3IgaW5zdHJ1bWVudGVkIG9iamVjdHMgaW4gUGhFVC1pTyBicmFuZC4nICk7XG4gICAgcmV0dXJuIHRoaXMuX3BoZXRpb0V2ZW50TWV0YWRhdGE7XG4gIH1cblxuICAvLyB0aHJvd3MgYW4gYXNzZXJ0aW9uIGVycm9yIGluIGJyYW5kcyBvdGhlciB0aGFuIFBoRVQtaU9cbiAgcHVibGljIGdldCBwaGV0aW9EZXNpZ25lZCgpOiBib29sZWFuIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBQSEVUX0lPX0VOQUJMRUQgJiYgdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpLCAncGhldGlvRGVzaWduZWQgb25seSBhY2Nlc3NpYmxlIGZvciBpbnN0cnVtZW50ZWQgb2JqZWN0cyBpbiBQaEVULWlPIGJyYW5kLicgKTtcbiAgICByZXR1cm4gdGhpcy5fcGhldGlvRGVzaWduZWQ7XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgYW4gZXZlbnQgZm9yIHRoZSBuZXN0ZWQgUGhFVC1pTyBkYXRhIHN0cmVhbS5cbiAgICpcbiAgICogQHBhcmFtIGV2ZW50IC0gdGhlIG5hbWUgb2YgdGhlIGV2ZW50XG4gICAqIEBwYXJhbSBbcHJvdmlkZWRPcHRpb25zXVxuICAgKi9cbiAgcHVibGljIHBoZXRpb1N0YXJ0RXZlbnQoIGV2ZW50OiBzdHJpbmcsIHByb3ZpZGVkT3B0aW9ucz86IFN0YXJ0RXZlbnRPcHRpb25zICk6IHZvaWQge1xuICAgIGlmICggUEhFVF9JT19FTkFCTEVEICYmIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSApIHtcblxuICAgICAgLy8gb25seSBvbmUgb3IgdGhlIG90aGVyIGNhbiBiZSBwcm92aWRlZFxuICAgICAgYXNzZXJ0ICYmIGFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyggcHJvdmlkZWRPcHRpb25zLCBbICdkYXRhJyBdLCBbICdnZXREYXRhJyBdICk7XG4gICAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFN0YXJ0RXZlbnRPcHRpb25zPigpKCB7XG5cbiAgICAgICAgZGF0YTogbnVsbCxcblxuICAgICAgICAvLyBmdW5jdGlvbiB0aGF0LCB3aGVuIGNhbGxlZCBnZXRzIHRoZSBkYXRhLlxuICAgICAgICBnZXREYXRhOiBudWxsXG4gICAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5waGV0aW9PYmplY3RJbml0aWFsaXplZCwgJ3BoZXRpb09iamVjdCBzaG91bGQgYmUgaW5pdGlhbGl6ZWQnICk7XG4gICAgICBhc3NlcnQgJiYgb3B0aW9ucy5kYXRhICYmIGFzc2VydCggdHlwZW9mIG9wdGlvbnMuZGF0YSA9PT0gJ29iamVjdCcgKTtcbiAgICAgIGFzc2VydCAmJiBvcHRpb25zLmdldERhdGEgJiYgYXNzZXJ0KCB0eXBlb2Ygb3B0aW9ucy5nZXREYXRhID09PSAnZnVuY3Rpb24nICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhcmd1bWVudHMubGVuZ3RoID09PSAxIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIsICdQcmV2ZW50IHVzYWdlIG9mIGluY29ycmVjdCBzaWduYXR1cmUnICk7XG5cbiAgICAgIC8vIFRPRE86IGRvbid0IGRyb3AgUGhFVC1pTyBldmVudHMgaWYgdGhleSBhcmUgY3JlYXRlZCBiZWZvcmUgd2UgaGF2ZSBhIGRhdGFTdHJlYW0gZ2xvYmFsLiBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1pby9pc3N1ZXMvMTg3NVxuICAgICAgaWYgKCAhXy5oYXNJbiggd2luZG93LCAncGhldC5waGV0aW8uZGF0YVN0cmVhbScgKSApIHtcblxuICAgICAgICAvLyBJZiB5b3UgaGl0IHRoaXMsIHRoZW4gaXQgaXMgbGlrZWx5IHJlbGF0ZWQgdG8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3NjZW5lcnkvaXNzdWVzLzExMjQgYW5kIHdlIHdvdWxkIGxpa2UgdG8ga25vdyBhYm91dCBpdCFcbiAgICAgICAgLy8gYXNzZXJ0ICYmIGFzc2VydCggZmFsc2UsICd0cnlpbmcgdG8gY3JlYXRlIGFuIGV2ZW50IGJlZm9yZSB0aGUgZGF0YSBzdHJlYW0gZXhpc3RzJyApO1xuXG4gICAgICAgIHRoaXMucGhldGlvTWVzc2FnZVN0YWNrLnB1c2goIFNLSVBQSU5HX01FU1NBR0UgKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICAvLyBPcHQgb3V0IG9mIGNlcnRhaW4gZXZlbnRzIGlmIHF1ZXJ5UGFyYW1ldGVyIG92ZXJyaWRlIGlzIHByb3ZpZGVkLiBFdmVuIGZvciBhIGxvdyBmcmVxdWVuY3kgZGF0YSBzdHJlYW0sIGhpZ2hcbiAgICAgIC8vIGZyZXF1ZW5jeSBldmVudHMgY2FuIHN0aWxsIGJlIGVtaXR0ZWQgd2hlbiB0aGV5IGhhdmUgYSBsb3cgZnJlcXVlbmN5IGFuY2VzdG9yLlxuICAgICAgY29uc3Qgc2tpcEhpZ2hGcmVxdWVuY3lFdmVudCA9IHRoaXMucGhldGlvSGlnaEZyZXF1ZW5jeSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaGFzSW4oIHdpbmRvdywgJ3BoZXQucHJlbG9hZHMucGhldGlvLnF1ZXJ5UGFyYW1ldGVycycgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICF3aW5kb3cucGhldC5wcmVsb2Fkcy5waGV0aW8ucXVlcnlQYXJhbWV0ZXJzLnBoZXRpb0VtaXRIaWdoRnJlcXVlbmN5RXZlbnRzICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXBoZXQucGhldGlvLmRhdGFTdHJlYW0uaXNFbWl0dGluZ0xvd0ZyZXF1ZW5jeUV2ZW50KCk7XG5cbiAgICAgIC8vIFRPRE86IElmIHRoZXJlIGlzIG5vIGRhdGFTdHJlYW0gZ2xvYmFsIGRlZmluZWQsIHRoZW4gd2Ugc2hvdWxkIGhhbmRsZSB0aGlzIGRpZmZlcmVudGx5IGFzIHRvIG5vdCBkcm9wIHRoZSBldmVudCB0aGF0IGlzIHRyaWdnZXJlZCwgc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0LWlvL2lzc3Vlcy8xODQ2XG4gICAgICBjb25zdCBza2lwRnJvbVVuZGVmaW5lZERhdGFzdHJlYW0gPSAhYXNzZXJ0ICYmICFfLmhhc0luKCB3aW5kb3csICdwaGV0LnBoZXRpby5kYXRhU3RyZWFtJyApO1xuXG4gICAgICBpZiAoIHNraXBIaWdoRnJlcXVlbmN5RXZlbnQgfHwgdGhpcy5waGV0aW9FdmVudFR5cGUgPT09IEV2ZW50VHlwZS5PUFRfT1VUIHx8IHNraXBGcm9tVW5kZWZpbmVkRGF0YXN0cmVhbSApIHtcbiAgICAgICAgdGhpcy5waGV0aW9NZXNzYWdlU3RhY2sucHVzaCggU0tJUFBJTkdfTUVTU0FHRSApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIE9ubHkgZ2V0IHRoZSBhcmdzIGlmIHdlIGFyZSBhY3R1YWxseSBnb2luZyB0byBzZW5kIHRoZSBldmVudC5cbiAgICAgIGNvbnN0IGRhdGEgPSBvcHRpb25zLmdldERhdGEgPyBvcHRpb25zLmdldERhdGEoKSA6IG9wdGlvbnMuZGF0YTtcblxuICAgICAgdGhpcy5waGV0aW9NZXNzYWdlU3RhY2sucHVzaChcbiAgICAgICAgcGhldC5waGV0aW8uZGF0YVN0cmVhbS5zdGFydCggdGhpcy5waGV0aW9FdmVudFR5cGUsIHRoaXMudGFuZGVtLnBoZXRpb0lELCB0aGlzLnBoZXRpb1R5cGUsIGV2ZW50LCBkYXRhLCB0aGlzLnBoZXRpb0V2ZW50TWV0YWRhdGEsIHRoaXMucGhldGlvSGlnaEZyZXF1ZW5jeSApXG4gICAgICApO1xuXG4gICAgICAvLyBUbyBzdXBwb3J0IFBoRVQtaU8gcGxheWJhY2ssIGFueSBwb3RlbnRpYWwgcGxheWJhY2sgZXZlbnRzIGRvd25zdHJlYW0gb2YgdGhpcyBwbGF5YmFjayBldmVudCBtdXN0IGJlIG1hcmtlZCBhc1xuICAgICAgLy8gbm9uIHBsYXliYWNrIGV2ZW50cy4gVGhpcyBpcyB0byBwcmV2ZW50IHRoZSBQaEVULWlPIHBsYXliYWNrIGVuZ2luZSBmcm9tIHJlcGVhdGluZyB0aG9zZSBldmVudHMuIFNlZVxuICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vaXNzdWVzLzE2OTNcbiAgICAgIHRoaXMucGhldGlvUGxheWJhY2sgJiYgcGhldC5waGV0aW8uZGF0YVN0cmVhbS5wdXNoTm9uUGxheWJhY2thYmxlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuZCBhbiBldmVudCBvbiB0aGUgbmVzdGVkIFBoRVQtaU8gZGF0YSBzdHJlYW0uIEl0IHRoaXMgb2JqZWN0IHdhcyBkaXNwb3NlZCBvciBkYXRhU3RyZWFtLnN0YXJ0IHdhcyBub3QgY2FsbGVkLFxuICAgKiB0aGlzIGlzIGEgbm8tb3AuXG4gICAqL1xuICBwdWJsaWMgcGhldGlvRW5kRXZlbnQoKTogdm9pZCB7XG4gICAgaWYgKCBQSEVUX0lPX0VOQUJMRUQgJiYgdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpICkge1xuXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLnBoZXRpb01lc3NhZ2VTdGFjay5sZW5ndGggPiAwLCAnTXVzdCBoYXZlIG1lc3NhZ2VzIHRvIHBvcCcgKTtcbiAgICAgIGNvbnN0IHRvcE1lc3NhZ2VJbmRleCA9IHRoaXMucGhldGlvTWVzc2FnZVN0YWNrLnBvcCgpO1xuXG4gICAgICAvLyBUaGUgbWVzc2FnZSB3YXMgc3RhcnRlZCBhcyBhIGhpZ2ggZnJlcXVlbmN5IGV2ZW50IHRvIGJlIHNraXBwZWQsIHNvIHRoZSBlbmQgaXMgYSBuby1vcFxuICAgICAgaWYgKCB0b3BNZXNzYWdlSW5kZXggPT09IFNLSVBQSU5HX01FU1NBR0UgKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMucGhldGlvUGxheWJhY2sgJiYgcGhldC5waGV0aW8uZGF0YVN0cmVhbS5wb3BOb25QbGF5YmFja2FibGUoKTtcbiAgICAgIHBoZXQucGhldGlvLmRhdGFTdHJlYW0uZW5kKCB0b3BNZXNzYWdlSW5kZXggKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0IGFueSBpbnN0cnVtZW50ZWQgZGVzY2VuZGFudHMgb2YgdGhpcyBQaGV0aW9PYmplY3QgdG8gdGhlIHNhbWUgdmFsdWUgYXMgdGhpcy5waGV0aW9EeW5hbWljRWxlbWVudC5cbiAgICovXG4gIHB1YmxpYyBwcm9wYWdhdGVEeW5hbWljRmxhZ3NUb0Rlc2NlbmRhbnRzKCk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIFRhbmRlbS5QSEVUX0lPX0VOQUJMRUQsICdwaGV0LWlvIHNob3VsZCBiZSBlbmFibGVkJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHBoZXQucGhldGlvICYmIHBoZXQucGhldGlvLnBoZXRpb0VuZ2luZSwgJ0R5bmFtaWMgZWxlbWVudHMgY2Fubm90IGJlIGNyZWF0ZWQgc3RhdGljYWxseSBiZWZvcmUgcGhldGlvRW5naW5lIGV4aXN0cy4nICk7XG4gICAgY29uc3QgcGhldGlvRW5naW5lID0gcGhldC5waGV0aW8ucGhldGlvRW5naW5lO1xuXG4gICAgLy8gaW4gdGhlIHNhbWUgb3JkZXIgYXMgYnVmZmVyZWRQaGV0aW9PYmplY3RzXG4gICAgY29uc3QgdW5sYXVuY2hlZFBoZXRpb0lEcyA9ICFUYW5kZW0ubGF1bmNoZWQgPyBUYW5kZW0uYnVmZmVyZWRQaGV0aW9PYmplY3RzLm1hcCggb2JqZWN0VG9QaGV0aW9JRCApIDogW107XG5cbiAgICB0aGlzLnRhbmRlbS5pdGVyYXRlRGVzY2VuZGFudHMoIHRhbmRlbSA9PiB7XG4gICAgICBjb25zdCBwaGV0aW9JRCA9IHRhbmRlbS5waGV0aW9JRDtcblxuICAgICAgaWYgKCBwaGV0aW9FbmdpbmUuaGFzUGhldGlvT2JqZWN0KCBwaGV0aW9JRCApIHx8ICggIVRhbmRlbS5sYXVuY2hlZCAmJiB1bmxhdW5jaGVkUGhldGlvSURzLmluY2x1ZGVzKCBwaGV0aW9JRCApICkgKSB7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSApO1xuICAgICAgICBjb25zdCBwaGV0aW9PYmplY3QgPSBwaGV0aW9FbmdpbmUuaGFzUGhldGlvT2JqZWN0KCBwaGV0aW9JRCApID8gcGhldGlvRW5naW5lLmdldFBoZXRpb09iamVjdCggcGhldGlvSUQgKSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgIFRhbmRlbS5idWZmZXJlZFBoZXRpb09iamVjdHNbIHVubGF1bmNoZWRQaGV0aW9JRHMuaW5kZXhPZiggcGhldGlvSUQgKSBdO1xuXG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHBoZXRpb09iamVjdCwgJ3Nob3VsZCBoYXZlIGEgcGhldGlvT2JqZWN0IGhlcmUnICk7XG5cbiAgICAgICAgLy8gT3JkZXIgbWF0dGVycyBoZXJlISBUaGUgcGhldGlvSXNBcmNoZXR5cGUgbmVlZHMgdG8gYmUgZmlyc3QgdG8gZW5zdXJlIHRoYXQgdGhlIHNldFBoZXRpb0R5bmFtaWNFbGVtZW50XG4gICAgICAgIC8vIHNldHRlciBjYW4gb3B0IG91dCBmb3IgYXJjaGV0eXBlcy5cbiAgICAgICAgcGhldGlvT2JqZWN0LnBoZXRpb0lzQXJjaGV0eXBlID0gdGhpcy5waGV0aW9Jc0FyY2hldHlwZTtcbiAgICAgICAgcGhldGlvT2JqZWN0LnNldFBoZXRpb0R5bmFtaWNFbGVtZW50KCB0aGlzLnBoZXRpb0R5bmFtaWNFbGVtZW50ICk7XG5cbiAgICAgICAgaWYgKCBwaGV0aW9PYmplY3QucGhldGlvQmFzZWxpbmVNZXRhZGF0YSApIHtcbiAgICAgICAgICBwaGV0aW9PYmplY3QucGhldGlvQmFzZWxpbmVNZXRhZGF0YS5waGV0aW9Jc0FyY2hldHlwZSA9IHRoaXMucGhldGlvSXNBcmNoZXR5cGU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9ICk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBpbiBQaGV0aW9FbmdpbmVcbiAgICovXG4gIHB1YmxpYyBzZXRQaGV0aW9EeW5hbWljRWxlbWVudCggcGhldGlvRHluYW1pY0VsZW1lbnQ6IGJvb2xlYW4gKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMucGhldGlvTm90aWZpZWRPYmplY3RDcmVhdGVkLCAnc2hvdWxkIG5vdCBjaGFuZ2UgZHluYW1pYyBlbGVtZW50IGZsYWdzIGFmdGVyIG5vdGlmeWluZyB0aGlzIFBoZXRpb09iamVjdFxcJ3MgY3JlYXRpb24uJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSApO1xuXG4gICAgLy8gQWxsIGFyY2hldHlwZXMgYXJlIHN0YXRpYyAobm9uLWR5bmFtaWMpXG4gICAgdGhpcy5fcGhldGlvRHluYW1pY0VsZW1lbnQgPSB0aGlzLnBoZXRpb0lzQXJjaGV0eXBlID8gZmFsc2UgOiBwaGV0aW9EeW5hbWljRWxlbWVudDtcblxuICAgIC8vIEZvciBkeW5hbWljIGVsZW1lbnRzLCBpbmRpY2F0ZSB0aGUgY29ycmVzcG9uZGluZyBhcmNoZXR5cGUgZWxlbWVudCBzbyB0aGF0IGNsaWVudHMgbGlrZSBTdHVkaW8gY2FuIGxldmVyYWdlXG4gICAgLy8gdGhlIGFyY2hldHlwZSBtZXRhZGF0YS4gU3RhdGljIGVsZW1lbnRzIGRvbid0IGhhdmUgYXJjaGV0eXBlcy5cbiAgICB0aGlzLnBoZXRpb0FyY2hldHlwZVBoZXRpb0lEID0gcGhldGlvRHluYW1pY0VsZW1lbnQgPyB0aGlzLnRhbmRlbS5nZXRBcmNoZXR5cGFsUGhldGlvSUQoKSA6IG51bGw7XG5cbiAgICAvLyBLZWVwIHRoZSBiYXNlbGluZSBtZXRhZGF0YSBpbiBzeW5jLlxuICAgIGlmICggdGhpcy5waGV0aW9CYXNlbGluZU1ldGFkYXRhICkge1xuICAgICAgdGhpcy5waGV0aW9CYXNlbGluZU1ldGFkYXRhLnBoZXRpb0R5bmFtaWNFbGVtZW50ID0gdGhpcy5waGV0aW9EeW5hbWljRWxlbWVudDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWFyayB0aGlzIFBoZXRpb09iamVjdCBhcyBhbiBhcmNoZXR5cGUgZm9yIGR5bmFtaWMgZWxlbWVudHMuXG4gICAqL1xuICBwdWJsaWMgbWFya0R5bmFtaWNFbGVtZW50QXJjaGV0eXBlKCk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLnBoZXRpb05vdGlmaWVkT2JqZWN0Q3JlYXRlZCwgJ3Nob3VsZCBub3QgY2hhbmdlIGR5bmFtaWMgZWxlbWVudCBmbGFncyBhZnRlciBub3RpZnlpbmcgdGhpcyBQaGV0aW9PYmplY3RcXCdzIGNyZWF0aW9uLicgKTtcblxuICAgIHRoaXMucGhldGlvSXNBcmNoZXR5cGUgPSB0cnVlO1xuICAgIHRoaXMuc2V0UGhldGlvRHluYW1pY0VsZW1lbnQoIGZhbHNlICk7IC8vIGJlY2F1c2UgYXJjaGV0eXBlcyBhcmVuJ3QgZHluYW1pYyBlbGVtZW50c1xuXG4gICAgaWYgKCB0aGlzLnBoZXRpb0Jhc2VsaW5lTWV0YWRhdGEgKSB7XG4gICAgICB0aGlzLnBoZXRpb0Jhc2VsaW5lTWV0YWRhdGEucGhldGlvSXNBcmNoZXR5cGUgPSB0aGlzLnBoZXRpb0lzQXJjaGV0eXBlO1xuICAgIH1cblxuICAgIC8vIHJlY29tcHV0ZSBmb3IgY2hpbGRyZW4gYWxzbywgYnV0IG9ubHkgaWYgcGhldC1pbyBpcyBlbmFibGVkXG4gICAgVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLnByb3BhZ2F0ZUR5bmFtaWNGbGFnc1RvRGVzY2VuZGFudHMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIFBoZXRpb09iamVjdCB3aWxsIG9ubHkgYmUgaW5zdHJ1bWVudGVkIGlmIHRoZSB0YW5kZW0gdGhhdCB3YXMgcGFzc2VkIGluIHdhcyBcInN1cHBsaWVkXCIuIFNlZSBUYW5kZW0uc3VwcGxpZWRcbiAgICogZm9yIG1vcmUgaW5mby5cbiAgICovXG4gIHB1YmxpYyBpc1BoZXRpb0luc3RydW1lbnRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50YW5kZW0gJiYgdGhpcy50YW5kZW0uc3VwcGxpZWQ7XG4gIH1cblxuICAvKipcbiAgICogV2hlbiBhbiBpbnN0cnVtZW50ZWQgUGhldGlvT2JqZWN0IGlzIGxpbmtlZCB3aXRoIGFub3RoZXIgaW5zdHJ1bWVudGVkIFBoZXRpb09iamVjdCwgdGhpcyBjcmVhdGVzIGEgb25lLXdheVxuICAgKiBhc3NvY2lhdGlvbiB3aGljaCBpcyByZW5kZXJlZCBpbiBTdHVkaW8gYXMgYSBcInN5bWJvbGljXCIgbGluayBvciBoeXBlcmxpbmsuIE1hbnkgY29tbW9uIGNvZGUgVUkgZWxlbWVudHMgdXNlIHRoaXNcbiAgICogYXV0b21hdGljYWxseS4gVG8ga2VlcCBjbGllbnQgc2l0ZXMgc2ltcGxlLCB0aGlzIGhhcyBhIGdyYWNlZnVsIG9wdC1vdXQgbWVjaGFuaXNtIHdoaWNoIG1ha2VzIHRoaXMgZnVuY3Rpb24gYVxuICAgKiBuby1vcCBpZiBlaXRoZXIgdGhpcyBQaGV0aW9PYmplY3Qgb3IgdGhlIHRhcmdldCBQaGV0aW9PYmplY3QgaXMgbm90IGluc3RydW1lbnRlZC5cbiAgICogQHBhcmFtIGVsZW1lbnQgLSB0aGUgdGFyZ2V0IGVsZW1lbnQuIE11c3QgYmUgaW5zdHJ1bWVudGVkIGZvciBhIExpbmtlZEVsZW1lbnQgdG8gYmUgY3JlYXRlZC0tIG90aGVyd2lzZSBncmFjZWZ1bGx5IG9wdHMgb3V0XG4gICAqIEBwYXJhbSBbb3B0aW9uc11cbiAgICovXG4gIHB1YmxpYyBhZGRMaW5rZWRFbGVtZW50KCBlbGVtZW50OiBMaW5rYWJsZUVsZW1lbnQsIG9wdGlvbnM/OiBMaW5rZWRFbGVtZW50T3B0aW9ucyApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgKSB7XG5cbiAgICAgIC8vIHNldCB0aGlzIHRvIG51bGwgc28gdGhhdCB5b3UgY2FuJ3QgYWRkTGlua2VkRWxlbWVudCBvbiBhbiB1bmluaXRpYWxpemVkIFBoZXRpb09iamVjdCBhbmQgdGhlbiBpbnN0cnVtZW50XG4gICAgICAvLyBpdCBhZnRlcndhcmRzLlxuICAgICAgdGhpcy5saW5rZWRFbGVtZW50cyA9IG51bGw7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSW4gc29tZSBjYXNlcywgVUkgY29tcG9uZW50cyBuZWVkIHRvIGJlIHdpcmVkIHVwIHRvIGEgcHJpdmF0ZSAoaW50ZXJuYWwpIFByb3BlcnR5IHdoaWNoIHNob3VsZCBuZWl0aGVyIGJlXG4gICAgLy8gaW5zdHJ1bWVudGVkIG5vciBsaW5rZWQuXG4gICAgaWYgKCBQSEVUX0lPX0VOQUJMRUQgJiYgZWxlbWVudC5pc1BoZXRpb0luc3RydW1lbnRlZCgpICkge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggQXJyYXkuaXNBcnJheSggdGhpcy5saW5rZWRFbGVtZW50cyApLCAnbGlua2VkRWxlbWVudHMgc2hvdWxkIGJlIGFuIGFycmF5JyApO1xuICAgICAgdGhpcy5saW5rZWRFbGVtZW50cyEucHVzaCggbmV3IExpbmtlZEVsZW1lbnQoIGVsZW1lbnQsIG9wdGlvbnMgKSApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYWxsIGxpbmtlZCBlbGVtZW50cyBsaW5raW5nIHRvIHRoZSBwcm92aWRlZCBQaGV0aW9PYmplY3QuIFRoaXMgd2lsbCBkaXNwb3NlIGFsbCByZW1vdmVkIExpbmtlZEVsZW1lbnRzLiBUaGlzXG4gICAqIHdpbGwgYmUgZ3JhY2VmdWwsIGFuZCBkb2Vzbid0IGFzc3VtZSBvciBhc3NlcnQgdGhhdCB0aGUgcHJvdmlkZWQgUGhldGlvT2JqZWN0IGhhcyBMaW5rZWRFbGVtZW50KHMpLCBpdCB3aWxsIGp1c3RcbiAgICogcmVtb3ZlIHRoZW0gaWYgdGhleSBhcmUgdGhlcmUuXG4gICAqL1xuICBwdWJsaWMgcmVtb3ZlTGlua2VkRWxlbWVudHMoIHBvdGVudGlhbGx5TGlua2VkRWxlbWVudDogUGhldGlvT2JqZWN0ICk6IHZvaWQge1xuICAgIGlmICggdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpICYmIHRoaXMubGlua2VkRWxlbWVudHMgKSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBwb3RlbnRpYWxseUxpbmtlZEVsZW1lbnQuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSApO1xuXG4gICAgICBjb25zdCB0b1JlbW92ZSA9IHRoaXMubGlua2VkRWxlbWVudHMuZmlsdGVyKCBsaW5rZWRFbGVtZW50ID0+IGxpbmtlZEVsZW1lbnQuZWxlbWVudCA9PT0gcG90ZW50aWFsbHlMaW5rZWRFbGVtZW50ICk7XG4gICAgICB0b1JlbW92ZS5mb3JFYWNoKCBsaW5rZWRFbGVtZW50ID0+IHtcbiAgICAgICAgbGlua2VkRWxlbWVudC5kaXNwb3NlKCk7XG4gICAgICAgIGFycmF5UmVtb3ZlKCB0aGlzLmxpbmtlZEVsZW1lbnRzLCBsaW5rZWRFbGVtZW50ICk7XG4gICAgICB9ICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBlcmZvcm1zIGNsZWFudXAgYWZ0ZXIgdGhlIHNpbSdzIGNvbnN0cnVjdGlvbiBoYXMgZmluaXNoZWQuXG4gICAqL1xuICBwdWJsaWMgb25TaW11bGF0aW9uQ29uc3RydWN0aW9uQ29tcGxldGVkKCk6IHZvaWQge1xuXG4gICAgLy8gZGVsZXRlcyB0aGUgcGhldGlvQmFzZWxpbmVNZXRhZGF0YSwgYXMgaXQncyBubyBsb25nZXIgbmVlZGVkIHNpbmNlIHZhbGlkYXRpb24gaXMgY29tcGxldGUuXG4gICAgdGhpcy5waGV0aW9CYXNlbGluZU1ldGFkYXRhID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhpcyBwaGV0aW9PYmplY3QgZnJvbSBQaEVULWlPLiBBZnRlciBkaXNwb3NhbCwgdGhpcyBvYmplY3QgaXMgbm8gbG9uZ2VyIGludGVyb3BlcmFibGUuIEFsc28gcmVsZWFzZSBhbnlcbiAgICogb3RoZXIgcmVmZXJlbmNlcyBjcmVhdGVkIGR1cmluZyBpdHMgbGlmZXRpbWUuXG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBjb25zdCBkZXNjZW5kYW50czogUGhldGlvT2JqZWN0W10gPSBbXTtcbiAgICBpZiAoIFRhbmRlbS5QSEVUX0lPX0VOQUJMRUQgJiYgdGhpcy50YW5kZW0uc3VwcGxpZWQgKSB7XG4gICAgICBjb25zdCBwaGV0aW9FbmdpbmUgPSBwaGV0LnBoZXRpby5waGV0aW9FbmdpbmU7XG4gICAgICB0aGlzLnRhbmRlbS5pdGVyYXRlRGVzY2VuZGFudHMoIHRhbmRlbSA9PiB7XG4gICAgICAgIGlmICggcGhldGlvRW5naW5lLmhhc1BoZXRpb09iamVjdCggdGFuZGVtLnBoZXRpb0lEICkgKSB7XG4gICAgICAgICAgZGVzY2VuZGFudHMucHVzaCggcGhldGlvRW5naW5lLmdldFBoZXRpb09iamVjdCggdGFuZGVtLnBoZXRpb0lEICkgKTtcbiAgICAgICAgfVxuICAgICAgfSApO1xuICAgIH1cblxuICAgIC8vIEluIG9yZGVyIHRvIHN1cHBvcnQgdGhlIHN0cnVjdHVyZWQgZGF0YSBzdHJlYW0sIFBoZXRpb09iamVjdHMgbXVzdCBlbmQgdGhlIG1lc3NhZ2VzIGluIHRoZSBjb3JyZWN0XG4gICAgLy8gc2VxdWVuY2UsIHdpdGhvdXQgYmVpbmcgaW50ZXJydXB0ZWQgYnkgZGlzcG9zZSgpIGNhbGxzLiAgVGhlcmVmb3JlLCB3ZSBkbyBub3QgY2xlYXIgb3V0IGFueSBvZiB0aGUgc3RhdGVcbiAgICAvLyByZWxhdGVkIHRvIHRoZSBlbmRFdmVudC4gIE5vdGUgdGhpcyBtZWFucyBpdCBpcyBhY2NlcHRhYmxlIChhbmQgZXhwZWN0ZWQpIGZvciBlbmRFdmVudCgpIHRvIGJlIGNhbGxlZCBvblxuICAgIC8vIGRpc3Bvc2VkIFBoZXRpb09iamVjdHMuXG4gICAgLy9cbiAgICAvLyBUaGUgcGhldGlvRXZlbnQgc3RhY2sgc2hvdWxkIHJlc29sdmUgYnkgdGhlIG5leHQgZnJhbWUsIHNvIHRoYXQncyB3aGVuIHdlIGNoZWNrIGl0LlxuICAgIGFzc2VydCAmJiBhbmltYXRpb25GcmFtZVRpbWVyLnJ1bk9uTmV4dFRpY2soICgpID0+IHtcblxuICAgICAgLy8gVW5pbnN0cnVtZW50ZWQgUGhldGlvT2JqZWN0cyBkb24ndCBoYXZlIGEgcGhldGlvTWVzc2FnZVN0YWNrIGF0dHJpYnV0ZS5cbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmhhc093blByb3BlcnR5KCAncGhldGlvTWVzc2FnZVN0YWNrJyApIHx8IHRoaXMucGhldGlvTWVzc2FnZVN0YWNrLmxlbmd0aCA9PT0gMCxcbiAgICAgICAgJ3BoZXRpb01lc3NhZ2VTdGFjayBzaG91bGQgYmUgY2xlYXInICk7XG5cbiAgICAgIGRlc2NlbmRhbnRzLmZvckVhY2goIGRlc2NlbmRhbnQgPT4ge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBkZXNjZW5kYW50LmlzRGlzcG9zZWQsIGBBbGwgZGVzY2VuZGFudHMgbXVzdCBiZSBkaXNwb3NlZCBieSB0aGUgbmV4dCBmcmFtZTogJHtkZXNjZW5kYW50LnRhbmRlbS5waGV0aW9JRH1gICk7XG4gICAgICB9ICk7XG4gICAgfSApO1xuXG4gICAgLy8gRGV0YWNoIGZyb20gbGlzdGVuZXJzIGFuZCBkaXNwb3NlIHRoZSBjb3JyZXNwb25kaW5nIHRhbmRlbS4gVGhpcyBtdXN0IGhhcHBlbiBpbiBQaEVULWlPIGJyYW5kIGFuZCBQaEVUIGJyYW5kXG4gICAgLy8gYmVjYXVzZSBpbiBQaEVUIGJyYW5kLCBQaGV0aW9EeW5hbWljRWxlbWVudENvbnRhaW5lciBkeW5hbWljIGVsZW1lbnRzIHdvdWxkIG1lbW9yeSBsZWFrIHRhbmRlbXMgKHBhcmVudCB0YW5kZW1zXG4gICAgLy8gd291bGQgcmV0YWluIHJlZmVyZW5jZXMgdG8gdGhlaXIgY2hpbGRyZW4pLlxuICAgIHRoaXMudGFuZGVtLnJlbW92ZVBoZXRpb09iamVjdCggdGhpcyApO1xuXG4gICAgLy8gRGlzcG9zZSBMaW5rZWRFbGVtZW50c1xuICAgIGlmICggdGhpcy5saW5rZWRFbGVtZW50cyApIHtcbiAgICAgIHRoaXMubGlua2VkRWxlbWVudHMuZm9yRWFjaCggbGlua2VkRWxlbWVudCA9PiBsaW5rZWRFbGVtZW50LmRpc3Bvc2UoKSApO1xuICAgICAgdGhpcy5saW5rZWRFbGVtZW50cy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBKU09OaWZpYWJsZSBtZXRhZGF0YSB0aGF0IGRlc2NyaWJlcyB0aGUgbmF0dXJlIG9mIHRoZSBQaGV0aW9PYmplY3QuICBXZSBtdXN0IGJlIGFibGUgdG8gcmVhZCB0aGlzXG4gICAqIGZvciBiYXNlbGluZSAoYmVmb3JlIG9iamVjdCBmdWxseSBjb25zdHJ1Y3RlZCB3ZSB1c2Ugb2JqZWN0KSBhbmQgYWZ0ZXIgZnVsbHkgY29uc3RydWN0ZWRcbiAgICogd2hpY2ggaW5jbHVkZXMgb3ZlcnJpZGVzLlxuICAgKiBAcGFyYW0gW29iamVjdF0gLSB1c2VkIHRvIGdldCBtZXRhZGF0YSBrZXlzLCBjYW4gYmUgYSBQaGV0aW9PYmplY3QsIG9yIGFuIG9wdGlvbnMgb2JqZWN0XG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAoc2VlIHVzYWdlIGluaXRpYWxpemVQaGV0aW9PYmplY3QpLiBJZiBub3QgcHJvdmlkZWQsIHdpbGwgaW5zdGVhZCB1c2UgdGhlIHZhbHVlIG9mIFwidGhpc1wiXG4gICAqIEByZXR1cm5zIC0gbWV0YWRhdGEgcGx1Y2tlZCBmcm9tIHRoZSBwYXNzZWQgaW4gcGFyYW1ldGVyXG4gICAqL1xuICBwdWJsaWMgZ2V0TWV0YWRhdGEoIG9iamVjdD86IFBoZXRpb09iamVjdE1ldGFkYXRhSW5wdXQgKTogUGhldGlvT2JqZWN0TWV0YWRhdGEge1xuICAgIG9iamVjdCA9IG9iamVjdCB8fCB0aGlzO1xuICAgIGNvbnN0IG1ldGFkYXRhOiBQaGV0aW9PYmplY3RNZXRhZGF0YSA9IHtcbiAgICAgIHBoZXRpb1R5cGVOYW1lOiBvYmplY3QucGhldGlvVHlwZS50eXBlTmFtZSxcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246IG9iamVjdC5waGV0aW9Eb2N1bWVudGF0aW9uLFxuICAgICAgcGhldGlvU3RhdGU6IG9iamVjdC5waGV0aW9TdGF0ZSxcbiAgICAgIHBoZXRpb1JlYWRPbmx5OiBvYmplY3QucGhldGlvUmVhZE9ubHksXG4gICAgICBwaGV0aW9FdmVudFR5cGU6IEV2ZW50VHlwZS5waGV0aW9UeXBlLnRvU3RhdGVPYmplY3QoIG9iamVjdC5waGV0aW9FdmVudFR5cGUgKSxcbiAgICAgIHBoZXRpb0hpZ2hGcmVxdWVuY3k6IG9iamVjdC5waGV0aW9IaWdoRnJlcXVlbmN5LFxuICAgICAgcGhldGlvUGxheWJhY2s6IG9iamVjdC5waGV0aW9QbGF5YmFjayxcbiAgICAgIHBoZXRpb0R5bmFtaWNFbGVtZW50OiBvYmplY3QucGhldGlvRHluYW1pY0VsZW1lbnQsXG4gICAgICBwaGV0aW9Jc0FyY2hldHlwZTogb2JqZWN0LnBoZXRpb0lzQXJjaGV0eXBlLFxuICAgICAgcGhldGlvRmVhdHVyZWQ6IG9iamVjdC5waGV0aW9GZWF0dXJlZCxcbiAgICAgIHBoZXRpb0Rlc2lnbmVkOiBvYmplY3QucGhldGlvRGVzaWduZWRcbiAgICB9O1xuICAgIGlmICggb2JqZWN0LnBoZXRpb0FyY2hldHlwZVBoZXRpb0lEICkge1xuXG4gICAgICBtZXRhZGF0YS5waGV0aW9BcmNoZXR5cGVQaGV0aW9JRCA9IG9iamVjdC5waGV0aW9BcmNoZXR5cGVQaGV0aW9JRDtcbiAgICB9XG4gICAgcmV0dXJuIG1ldGFkYXRhO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjcmVhdGUoIG9wdGlvbnM/OiBQaGV0aW9PYmplY3RPcHRpb25zICk6IFBoZXRpb09iamVjdCB7XG4gICAgcmV0dXJuIG5ldyBQaGV0aW9PYmplY3QoIG9wdGlvbnMgKTtcbiAgfVxufVxuXG4vKipcbiAqIERldGVybWluZSBpZiBhbnkgb2YgdGhlIG9wdGlvbnMga2V5cyBhcmUgaW50ZW5kZWQgZm9yIFBoZXRpb09iamVjdC4gU2VtYW50aWNhbGx5IGVxdWl2YWxlbnQgdG9cbiAqIF8uaW50ZXJzZWN0aW9uKCBfLmtleXMoIG9wdGlvbnMgKSwgXy5rZXlzKCBERUZBVUxUUykgKS5sZW5ndGg+MCBidXQgaW1wbGVtZW50ZWQgaW1wZXJhdGl2ZWx5IHRvIGF2b2lkIG1lbW9yeSBvclxuICogcGVyZm9ybWFuY2UgaXNzdWVzLiBBbHNvIGhhbmRsZXMgb3B0aW9ucy50YW5kZW0gZGlmZmVyZW50bHkuXG4gKi9cbmNvbnN0IHNwZWNpZmllc05vblRhbmRlbVBoZXRpb09iamVjdEtleSA9ICggb3B0aW9uczogUmVjb3JkPHN0cmluZywgSW50ZW50aW9uYWxBbnk+ICk6IGJvb2xlYW4gPT4ge1xuICBmb3IgKCBjb25zdCBrZXkgaW4gb3B0aW9ucyApIHtcbiAgICBpZiAoIGtleSAhPT0gJ3RhbmRlbScgJiYgb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSgga2V5ICkgJiYgREVGQVVMVFMuaGFzT3duUHJvcGVydHkoIGtleSApICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn07XG5cbnR5cGUgTGlua2VkRWxlbWVudE9wdGlvbnMgPSBQaGV0aW9PYmplY3RPcHRpb25zO1xuXG4vKipcbiAqIEludGVybmFsIGNsYXNzIHRvIGF2b2lkIGN5Y2xpYyBkZXBlbmRlbmNpZXMuXG4gKi9cbmNsYXNzIExpbmtlZEVsZW1lbnQgZXh0ZW5kcyBQaGV0aW9PYmplY3Qge1xuICBwdWJsaWMgcmVhZG9ubHkgZWxlbWVudDogTGlua2FibGVFbGVtZW50O1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggY29yZUVsZW1lbnQ6IExpbmthYmxlRWxlbWVudCwgcHJvdmlkZWRPcHRpb25zPzogTGlua2VkRWxlbWVudE9wdGlvbnMgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggISFjb3JlRWxlbWVudCwgJ2NvcmVFbGVtZW50IHNob3VsZCBiZSBkZWZpbmVkJyApO1xuXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxMaW5rZWRFbGVtZW50T3B0aW9ucywgRW1wdHlTZWxmT3B0aW9ucywgUGhldGlvT2JqZWN0T3B0aW9ucz4oKSgge1xuICAgICAgcGhldGlvVHlwZTogTGlua2VkRWxlbWVudElPLFxuICAgICAgcGhldGlvU3RhdGU6IHRydWVcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICAgIC8vIFJlZmVyZW5jZXMgY2Fubm90IGJlIGNoYW5nZWQgYnkgUGhFVC1pT1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmhhc093blByb3BlcnR5KCAncGhldGlvUmVhZE9ubHknICksICdwaGV0aW9SZWFkT25seSBzZXQgYnkgTGlua2VkRWxlbWVudCcgKTtcbiAgICBvcHRpb25zLnBoZXRpb1JlYWRPbmx5ID0gdHJ1ZTtcblxuICAgIC8vIEJ5IGRlZmF1bHQsIHRoaXMgbGlua2VkIGVsZW1lbnQncyBiYXNlbGluZSB2YWx1ZSBpcyB0aGUgb3ZlcnJpZGRlbiB2YWx1ZSBvZiB0aGUgY29yZUVsZW1lbnQuIFRoaXMgYWxsb3dzXG4gICAgLy8gdGhlIHRoZW0gdG8gYmUgaW4gc3luYyBieSBkZWZhdWx0LCBidXQgYWxzbyBhbGxvd3MgdGhlIGxpbmtlZCBlbGVtZW50IHRvIGJlIG92ZXJyaWRkZW4gaW4gc3R1ZGlvLlxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLmhhc093blByb3BlcnR5KCAncGhldGlvRmVhdHVyZWQnICksICdwaGV0aW9GZWF0dXJlZCBzZXQgYnkgTGlua2VkRWxlbWVudCcgKTtcbiAgICBvcHRpb25zLnBoZXRpb0ZlYXR1cmVkID0gY29yZUVsZW1lbnQucGhldGlvRmVhdHVyZWQ7XG5cbiAgICBzdXBlciggb3B0aW9ucyApO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gY29yZUVsZW1lbnQ7XG4gIH1cblxuICAvKipcbiAgICogTGlua2VkRWxlbWVudHMgbGlzdGVuIHRvIHRoZWlyIGNvcmUgZWxlbWVudHMgZm9yIHBoZXRpb0ZlYXR1cmVkLCBzbyB0byBhdm9pZCBhIGRlcGVuZGVuY3kgb24gb3ZlcnJpZGVzIG1ldGFkYXRhXG4gICAqICh3aGVuIHRoZSBjb3JlIGVsZW1lbnQncyBwaGV0aW9GZWF0dXJlZCBpcyBzcGVjaWZpZWQgaW4gdGhlIG92ZXJyaWRlcyBmaWxlKSwgaWdub3JlIHBoZXRpb0ZlYXR1cmVkIGZvciBMaW5rZWRFbGVtZW50cy5cbiAgICogQHBhcmFtIG9iamVjdCAtIHVzZWQgdG8gZ2V0IG1ldGFkYXRhIGtleXMsIGNhbiBiZSBhIFBoZXRpb09iamVjdCwgb3IgYW4gb3B0aW9ucyBvYmplY3RcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgIChzZWUgdXNhZ2UgaW5pdGlhbGl6ZVBoZXRpb09iamVjdClcbiAgICogQHJldHVybnMgLSBtZXRhZGF0YSBwbHVja2VkIGZyb20gdGhlIHBhc3NlZCBpbiBwYXJhbWV0ZXJcbiAgICovXG4gIHB1YmxpYyBvdmVycmlkZSBnZXRNZXRhZGF0YSggb2JqZWN0OiBQaGV0aW9PYmplY3RNZXRhZGF0YUlucHV0ICk6IFBoZXRpb09iamVjdE1ldGFkYXRhIHtcbiAgICBjb25zdCBwaGV0aW9PYmplY3RNZXRhZGF0YSA9IHN1cGVyLmdldE1ldGFkYXRhKCBvYmplY3QgKTtcblxuICAgIGRlbGV0ZSBwaGV0aW9PYmplY3RNZXRhZGF0YS5waGV0aW9GZWF0dXJlZDtcbiAgICByZXR1cm4gcGhldGlvT2JqZWN0TWV0YWRhdGE7XG4gIH1cbn1cblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnUGhldGlvT2JqZWN0JywgUGhldGlvT2JqZWN0ICk7XG5leHBvcnQgeyBQaGV0aW9PYmplY3QgYXMgZGVmYXVsdCwgTGlua2VkRWxlbWVudCB9O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLG1CQUFtQixNQUFNLHNDQUFzQztBQUV0RSxPQUFPQyxRQUFRLE1BQU0sMkJBQTJCO0FBQ2hELE9BQU9DLFdBQVcsTUFBTSxtQ0FBbUM7QUFDM0QsT0FBT0MsOEJBQThCLE1BQU0sc0RBQXNEO0FBQ2pHLE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsU0FBUyxJQUFJQyxjQUFjLFFBQTZDLGlDQUFpQztBQUNoSCxPQUFPQyxTQUFTLE1BQU0sZ0JBQWdCO0FBQ3RDLE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsbUJBQW1CLE1BQU0sMEJBQTBCO0FBQzFELE9BQU9DLE1BQU0sTUFBTSxhQUFhO0FBQ2hDLE9BQU9DLGVBQWUsTUFBMEMsc0JBQXNCO0FBQ3RGLE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsTUFBTSxNQUFNLG1CQUFtQjtBQUV0QyxPQUFPQyxVQUFVLE1BQTZCLDZCQUE2QjtBQUczRTtBQUNBLE1BQU1DLGVBQWUsR0FBR0wsTUFBTSxDQUFDSyxlQUFlO0FBQzlDLE1BQU1DLGlCQUFpQixHQUFHO0VBQUVDLFNBQVMsRUFBRUosTUFBTTtFQUFFSyxpQkFBaUIsRUFB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
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/ArrayIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * IO Type for JS's built-in Array type.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */






// Cache each parameterized IOType so that it is only created once.
const ArrayIO_cache = new Map();

/**
 * Parametric IO Type constructor.  Given an element type, this function returns an appropriate array IO Type.
 * This caching implementation should be kept in sync with the other parametric IO Type caching implementations.
 */
const ArrayIO = parameterType => {
  assert && assert(!!parameterType, 'parameterType should be defined');
  if (!ArrayIO_cache.has(parameterType)) {
    ArrayIO_cache.set(parameterType, new IOType(`ArrayIO<${parameterType.typeName}>`, {
      valueType: Array,
      isValidValue: array => {
        return _.every(array, element => Validation.isValueValid(element, parameterType.validator));
      },
      parameterTypes: [parameterType],
      toStateObject: array => array.map(parameterType.toStateObject),
      fromStateObject: stateObject => stateObject.map(parameterType.fromStateObject),
      documentation: 'IO Type for the built-in JS array type, with the element type specified.',
      stateSchema: StateSchema.asValue(`Array<${parameterType.typeName}>`, {
        isValidValue: array => _.every(array, element => parameterType.isStateObjectValid(element))
      })
    }));
  }
  return ArrayIO_cache.get(parameterType);
};
tandemNamespace.register('ArrayIO', ArrayIO);
/* harmony default export */ const types_ArrayIO = (ArrayIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWYWxpZGF0aW9uIiwidGFuZGVtTmFtZXNwYWNlIiwiSU9UeXBlIiwiU3RhdGVTY2hlbWEiLCJjYWNoZSIsIk1hcCIsIkFycmF5SU8iLCJwYXJhbWV0ZXJUeXBlIiwiYXNzZXJ0IiwiaGFzIiwic2V0IiwidHlwZU5hbWUiLCJ2YWx1ZVR5cGUiLCJBcnJheSIsImlzVmFsaWRWYWx1ZSIsImFycmF5IiwiXyIsImV2ZXJ5IiwiZWxlbWVudCIsImlzVmFsdWVWYWxpZCIsInZhbGlkYXRvciIsInBhcmFtZXRlclR5cGVzIiwidG9TdGF0ZU9iamVjdCIsIm1hcCIsImZyb21TdGF0ZU9iamVjdCIsInN0YXRlT2JqZWN0IiwiZG9jdW1lbnRhdGlvbiIsInN0YXRlU2NoZW1hIiwiYXNWYWx1ZSIsImlzU3RhdGVPYmplY3RWYWxpZCIsImdldCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQXJyYXlJTy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBJTyBUeXBlIGZvciBKUydzIGJ1aWx0LWluIEFycmF5IHR5cGUuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgQW5kcmV3IEFkYXJlIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBWYWxpZGF0aW9uIGZyb20gJy4uLy4uLy4uL2F4b24vanMvVmFsaWRhdGlvbi5qcyc7XG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4uL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcbmltcG9ydCBTdGF0ZVNjaGVtYSBmcm9tICcuL1N0YXRlU2NoZW1hLmpzJztcblxuLy8gQ2FjaGUgZWFjaCBwYXJhbWV0ZXJpemVkIElPVHlwZSBzbyB0aGF0IGl0IGlzIG9ubHkgY3JlYXRlZCBvbmNlLlxuY29uc3QgY2FjaGUgPSBuZXcgTWFwPElPVHlwZSwgSU9UeXBlPigpO1xuXG4vKipcbiAqIFBhcmFtZXRyaWMgSU8gVHlwZSBjb25zdHJ1Y3Rvci4gIEdpdmVuIGFuIGVsZW1lbnQgdHlwZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGFwcHJvcHJpYXRlIGFycmF5IElPIFR5cGUuXG4gKiBUaGlzIGNhY2hpbmcgaW1wbGVtZW50YXRpb24gc2hvdWxkIGJlIGtlcHQgaW4gc3luYyB3aXRoIHRoZSBvdGhlciBwYXJhbWV0cmljIElPIFR5cGUgY2FjaGluZyBpbXBsZW1lbnRhdGlvbnMuXG4gKi9cbmNvbnN0IEFycmF5SU8gPSA8UGFyYW1ldGVyVHlwZSwgUGFyYW1ldGVyU3RhdGVUeXBlPiggcGFyYW1ldGVyVHlwZTogSU9UeXBlPFBhcmFtZXRlclR5cGUsIFBhcmFtZXRlclN0YXRlVHlwZT4gKTogSU9UeXBlPFBhcmFtZXRlclR5cGVbXSwgUGFyYW1ldGVyU3RhdGVUeXBlW10+ID0+IHtcbiAgYXNzZXJ0ICYmIGFzc2VydCggISFwYXJhbWV0ZXJUeXBlLCAncGFyYW1ldGVyVHlwZSBzaG91bGQgYmUgZGVmaW5lZCcgKTtcbiAgaWYgKCAhY2FjaGUuaGFzKCBwYXJhbWV0ZXJUeXBlICkgKSB7XG4gICAgY2FjaGUuc2V0KCBwYXJhbWV0ZXJUeXBlLCBuZXcgSU9UeXBlPFBhcmFtZXRlclR5cGVbXSwgUGFyYW1ldGVyU3RhdGVUeXBlW10+KCBgQXJyYXlJTzwke3BhcmFtZXRlclR5cGUudHlwZU5hbWV9PmAsIHtcbiAgICAgIHZhbHVlVHlwZTogQXJyYXksXG4gICAgICBpc1ZhbGlkVmFsdWU6IGFycmF5ID0+IHtcbiAgICAgICAgcmV0dXJuIF8uZXZlcnkoIGFycmF5LCBlbGVtZW50ID0+IFZhbGlkYXRpb24uaXNWYWx1ZVZhbGlkKCBlbGVtZW50LCBwYXJhbWV0ZXJUeXBlLnZhbGlkYXRvciApICk7XG4gICAgICB9LFxuICAgICAgcGFyYW1ldGVyVHlwZXM6IFsgcGFyYW1ldGVyVHlwZSBdLFxuICAgICAgdG9TdGF0ZU9iamVjdDogYXJyYXkgPT4gYXJyYXkubWFwKCBwYXJhbWV0ZXJUeXBlLnRvU3RhdGVPYmplY3QgKSxcbiAgICAgIGZyb21TdGF0ZU9iamVjdDogc3RhdGVPYmplY3QgPT4gc3RhdGVPYmplY3QubWFwKCBwYXJhbWV0ZXJUeXBlLmZyb21TdGF0ZU9iamVjdCApLFxuICAgICAgZG9jdW1lbnRhdGlvbjogJ0lPIFR5cGUgZm9yIHRoZSBidWlsdC1pbiBKUyBhcnJheSB0eXBlLCB3aXRoIHRoZSBlbGVtZW50IHR5cGUgc3BlY2lmaWVkLicsXG4gICAgICBzdGF0ZVNjaGVtYTogU3RhdGVTY2hlbWEuYXNWYWx1ZSggYEFycmF5PCR7cGFyYW1ldGVyVHlwZS50eXBlTmFtZX0+YCwge1xuICAgICAgICBpc1ZhbGlkVmFsdWU6IGFycmF5ID0+IF8uZXZlcnkoIGFycmF5LCBlbGVtZW50ID0+IHBhcmFtZXRlclR5cGUuaXNTdGF0ZU9iamVjdFZhbGlkKCBlbGVtZW50ICkgKVxuICAgICAgfSApXG4gICAgfSApICk7XG4gIH1cblxuICByZXR1cm4gY2FjaGUuZ2V0KCBwYXJhbWV0ZXJUeXBlICkhO1xufTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnQXJyYXlJTycsIEFycmF5SU8gKTtcbmV4cG9ydCBkZWZhdWx0IEFycmF5SU87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLGdDQUFnQztBQUN2RCxPQUFPQyxlQUFlLE1BQU0sdUJBQXVCO0FBQ25ELE9BQU9DLE1BQU0sTUFBTSxhQUFhO0FBQ2hDLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7O0FBRTFDO0FBQ0EsTUFBTUMsS0FBSyxHQUFHLElBQUlDLEdBQUcsRUFBa0I7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsT0FBTyxHQUF3Q0MsYUFBd0QsSUFBcUQ7RUFDaEtDLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUMsQ0FBQ0QsYUFBYSxFQUFFLGlDQUFpQyxDQUFFO0VBQ3RFLElBQUssQ0FBQ0gsS0FBSyxDQUFDSyxHQUFHLENBQUVGLGFBQWEsQ0FBRSxFQUFHO0lBQ2pDSCxLQUFLLENBQUNNLEdBQUcsQ0FBRUgsYUFBYSxFQUFFLElBQUlMLE1BQU0sQ0FBMEMsV0FBVUssYUFBYSxDQUFDSSxRQUFTLEdBQUUsRUFBRTtNQUNqSEMsU0FBUyxFQUFFQyxLQUFLO01BQ2hCQyxZQUFZLEVBQUVDLEtBQUssSUFBSTtRQUNyQixPQUFPQyxDQUFDLENBQUNDLEtBQUssQ0FBRUYsS0FBSyxFQUFFRyxPQUFPLElBQUlsQixVQUFVLENBQUNtQixZQUFZLENBQUVELE9BQU8sRUFBRVgsYUFBYSxDQUFDYSxTQUFTLENBQUUsQ0FBRTtNQUNqRyxDQUFDO01BQ0RDLGNBQWMsRUFBRSxDQUFFZCxhQUFhLENBQUU7TUFDakNlLGFBQWEsRUFBRVAsS0FBSyxJQUFJQSxLQUFLLENBQUNRLEdBQUcsQ0FBRWhCLGFBQWEsQ0FBQ2UsYUFBYSxDQUFFO01BQ2hFRSxlQUFlLEVBQUVDLFdBQVcsSUFBSUEsV0FBVyxDQUFDRixHQUFHLENBQUVoQixhQUFhLENBQUNpQixlQUFlLENBQUU7TUFDaEZFLGFBQWEsRUFBRSwwRUFBMEU7TUFDekZDLFdBQVcsRUFBRXhCLFdBQVcsQ0FBQ3lCLE9BQU8sQ0FBRyxTQUFRckIsYUFBYSxDQUFDSSxRQUFTLEdBQUUsRUFBRTtRQUNwRUcsWUFBWSxFQUFFQyxLQUFLLElBQUlDLENBQUMsQ0FBQ0MsS0FBSyxDQUFFRixLQUFLLEVBQUVHLE9BQU8sSUFBSVgsYUFBYSxDQUFDc0Isa0JBQWtCLENBQUVYLE9BQU8sQ0FBRTtNQUMvRixDQUFDO0lBQ0gsQ0FBQyxDQUFFLENBQUU7RUFDUDtFQUVBLE9BQU9kLEtBQUssQ0FBQzBCLEdBQUcsQ0FBRXZCLGFBQWEsQ0FBRTtBQUNuQyxDQUFDO0FBRUROLGVBQWUsQ0FBQzhCLFFBQVEsQ0FBRSxTQUFTLEVBQUV6QixPQUFPLENBQUU7QUFDOUMsZUFBZUEsT0FBTyJ9
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/FunctionIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * IO Type for JS's built-in function type.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */




// cache each parameterized IOType so that it is only created once
const FunctionIO_cache = new Map();

/**
 * Parametric IO Type constructor--given return type and parameter types, this function returns a type wrapped IO Type for
 * that "class" of functions. "Class" here refers to the supported parameter and return IO Types.
 * This caching implementation should be kept in sync with the other parametric IO Type caching implementations.
 * @param returnType - IO Type of the return type of the function that can support cross-frame serialization
 * @param functionParameterTypes - IO Types for the individual arguments of the function.
 */
const FunctionIO = (returnType, functionParameterTypes) => {
  for (let i = 0; i < functionParameterTypes.length; i++) {
    assert && assert(functionParameterTypes[i], 'parameter type was not truthy');
  }
  assert && assert(returnType, 'return type was not truthy');

  // REVIEW https://github.com/phetsims/tandem/issues/169 Why is this different than the typeName later in this file?
  const cacheKey = `${returnType.typeName}.${functionParameterTypes.map(type => type.typeName).join(',')}`;
  if (!FunctionIO_cache.has(cacheKey)) {
    // gather a list of argument names for the documentation string
    let argsString = functionParameterTypes.map(parameterType => parameterType.typeName).join(', ');
    if (argsString === '') {
      argsString = 'none';
    }
    const parameterTypesString = functionParameterTypes.map(parameterType => parameterType.typeName).join(',');
    FunctionIO_cache.set(cacheKey, new IOType(`FunctionIO(${parameterTypesString})=>${returnType.typeName}`, {
      valueType: 'function',
      isFunctionType: true,
      // These are the parameters to this FunctionIO, not to the function it wraps. That is why it includes the return type.
      // NOTE: the order is very important, for instance phetioCommandProcessor relies on the parameters being before
      // the return type.  If we decide this is too brittle, perhaps we should subclass IOType to FunctionIOType, and it
      // can track its functionParameterTypes separately from the returnType.
      parameterTypes: functionParameterTypes.concat([returnType]),
      documentation: `${'Wrapper for the built-in JS function type.<br>' + '<strong>Arguments:</strong> '}${argsString}<br>` + `<strong>Return Type:</strong> ${returnType.typeName}`
    }));
  }
  return FunctionIO_cache.get(cacheKey);
};
tandemNamespace.register('FunctionIO', FunctionIO);
/* harmony default export */ const types_FunctionIO = (FunctionIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJjYWNoZSIsIk1hcCIsIkZ1bmN0aW9uSU8iLCJyZXR1cm5UeXBlIiwiZnVuY3Rpb25QYXJhbWV0ZXJUeXBlcyIsImkiLCJsZW5ndGgiLCJhc3NlcnQiLCJjYWNoZUtleSIsInR5cGVOYW1lIiwibWFwIiwidHlwZSIsImpvaW4iLCJoYXMiLCJhcmdzU3RyaW5nIiwicGFyYW1ldGVyVHlwZSIsInBhcmFtZXRlclR5cGVzU3RyaW5nIiwic2V0IiwidmFsdWVUeXBlIiwiaXNGdW5jdGlvblR5cGUiLCJwYXJhbWV0ZXJUeXBlcyIsImNvbmNhdCIsImRvY3VtZW50YXRpb24iLCJnZXQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkZ1bmN0aW9uSU8udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogSU8gVHlwZSBmb3IgSlMncyBidWlsdC1pbiBmdW5jdGlvbiB0eXBlLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIEFuZHJldyBBZGFyZSAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4uL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcblxuXG4vLyBjYWNoZSBlYWNoIHBhcmFtZXRlcml6ZWQgSU9UeXBlIHNvIHRoYXQgaXQgaXMgb25seSBjcmVhdGVkIG9uY2VcbmNvbnN0IGNhY2hlID0gbmV3IE1hcDxzdHJpbmcsIElPVHlwZT4oKTtcblxuLyoqXG4gKiBQYXJhbWV0cmljIElPIFR5cGUgY29uc3RydWN0b3ItLWdpdmVuIHJldHVybiB0eXBlIGFuZCBwYXJhbWV0ZXIgdHlwZXMsIHRoaXMgZnVuY3Rpb24gcmV0dXJucyBhIHR5cGUgd3JhcHBlZCBJTyBUeXBlIGZvclxuICogdGhhdCBcImNsYXNzXCIgb2YgZnVuY3Rpb25zLiBcIkNsYXNzXCIgaGVyZSByZWZlcnMgdG8gdGhlIHN1cHBvcnRlZCBwYXJhbWV0ZXIgYW5kIHJldHVybiBJTyBUeXBlcy5cbiAqIFRoaXMgY2FjaGluZyBpbXBsZW1lbnRhdGlvbiBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIG90aGVyIHBhcmFtZXRyaWMgSU8gVHlwZSBjYWNoaW5nIGltcGxlbWVudGF0aW9ucy5cbiAqIEBwYXJhbSByZXR1cm5UeXBlIC0gSU8gVHlwZSBvZiB0aGUgcmV0dXJuIHR5cGUgb2YgdGhlIGZ1bmN0aW9uIHRoYXQgY2FuIHN1cHBvcnQgY3Jvc3MtZnJhbWUgc2VyaWFsaXphdGlvblxuICogQHBhcmFtIGZ1bmN0aW9uUGFyYW1ldGVyVHlwZXMgLSBJTyBUeXBlcyBmb3IgdGhlIGluZGl2aWR1YWwgYXJndW1lbnRzIG9mIHRoZSBmdW5jdGlvbi5cbiAqL1xuY29uc3QgRnVuY3Rpb25JTyA9ICggcmV0dXJuVHlwZTogSU9UeXBlLCBmdW5jdGlvblBhcmFtZXRlclR5cGVzOiBJT1R5cGVbXSApOiBJT1R5cGUgPT4ge1xuICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBmdW5jdGlvblBhcmFtZXRlclR5cGVzLmxlbmd0aDsgaSsrICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGZ1bmN0aW9uUGFyYW1ldGVyVHlwZXNbIGkgXSwgJ3BhcmFtZXRlciB0eXBlIHdhcyBub3QgdHJ1dGh5JyApO1xuICB9XG4gIGFzc2VydCAmJiBhc3NlcnQoIHJldHVyblR5cGUsICdyZXR1cm4gdHlwZSB3YXMgbm90IHRydXRoeScgKTtcblxuICAvLyBSRVZJRVcgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3RhbmRlbS9pc3N1ZXMvMTY5IFdoeSBpcyB0aGlzIGRpZmZlcmVudCB0aGFuIHRoZSB0eXBlTmFtZSBsYXRlciBpbiB0aGlzIGZpbGU/XG4gIGNvbnN0IGNhY2hlS2V5ID0gYCR7cmV0dXJuVHlwZS50eXBlTmFtZX0uJHtmdW5jdGlvblBhcmFtZXRlclR5cGVzLm1hcCggdHlwZSA9PiB0eXBlLnR5cGVOYW1lICkuam9pbiggJywnICl9YDtcblxuICBpZiAoICFjYWNoZS5oYXMoIGNhY2hlS2V5ICkgKSB7XG5cbiAgICAvLyBnYXRoZXIgYSBsaXN0IG9mIGFyZ3VtZW50IG5hbWVzIGZvciB0aGUgZG9jdW1lbnRhdGlvbiBzdHJpbmdcbiAgICBsZXQgYXJnc1N0cmluZyA9IGZ1bmN0aW9uUGFyYW1ldGVyVHlwZXMubWFwKCBwYXJhbWV0ZXJUeXBlID0+IHBhcmFtZXRlclR5cGUudHlwZU5hbWUgKS5qb2luKCAnLCAnICk7XG4gICAgaWYgKCBhcmdzU3RyaW5nID09PSAnJyApIHtcbiAgICAgIGFyZ3NTdHJpbmcgPSAnbm9uZSc7XG4gICAgfVxuICAgIGNvbnN0IHBhcmFtZXRlclR5cGVzU3RyaW5nID0gZnVuY3Rpb25QYXJhbWV0ZXJUeXBlcy5tYXAoIHBhcmFtZXRlclR5cGUgPT4gcGFyYW1ldGVyVHlwZS50eXBlTmFtZSApLmpvaW4oICcsJyApO1xuXG4gICAgY2FjaGUuc2V0KCBjYWNoZUtleSwgbmV3IElPVHlwZSggYEZ1bmN0aW9uSU8oJHtwYXJhbWV0ZXJUeXBlc1N0cmluZ30pPT4ke3JldHVyblR5cGUudHlwZU5hbWV9YCwge1xuICAgICAgdmFsdWVUeXBlOiAnZnVuY3Rpb24nLFxuXG4gICAgICBpc0Z1bmN0aW9uVHlwZTogdHJ1ZSxcblxuICAgICAgLy8gVGhlc2UgYXJlIHRoZSBwYXJhbWV0ZXJzIHRvIHRoaXMgRnVuY3Rpb25JTywgbm90IHRvIHRoZSBmdW5jdGlvbiBpdCB3cmFwcy4gVGhhdCBpcyB3aHkgaXQgaW5jbHVkZXMgdGhlIHJldHVybiB0eXBlLlxuICAgICAgLy8gTk9URTogdGhlIG9yZGVyIGlzIHZlcnkgaW1wb3J0YW50LCBmb3IgaW5zdGFuY2UgcGhldGlvQ29tbWFuZFByb2Nlc3NvciByZWxpZXMgb24gdGhlIHBhcmFtZXRlcnMgYmVpbmcgYmVmb3JlXG4gICAgICAvLyB0aGUgcmV0dXJuIHR5cGUuICBJZiB3ZSBkZWNpZGUgdGhpcyBpcyB0b28gYnJpdHRsZSwgcGVyaGFwcyB3ZSBzaG91bGQgc3ViY2xhc3MgSU9UeXBlIHRvIEZ1bmN0aW9uSU9UeXBlLCBhbmQgaXRcbiAgICAgIC8vIGNhbiB0cmFjayBpdHMgZnVuY3Rpb25QYXJhbWV0ZXJUeXBlcyBzZXBhcmF0ZWx5IGZyb20gdGhlIHJldHVyblR5cGUuXG4gICAgICBwYXJhbWV0ZXJUeXBlczogZnVuY3Rpb25QYXJhbWV0ZXJUeXBlcy5jb25jYXQoIFsgcmV0dXJuVHlwZSBdICksXG4gICAgICBkb2N1bWVudGF0aW9uOiBgJHsnV3JhcHBlciBmb3IgdGhlIGJ1aWx0LWluIEpTIGZ1bmN0aW9uIHR5cGUuPGJyPicgK1xuICAgICAgICAgICAgICAgICAgICAgJzxzdHJvbmc+QXJndW1lbnRzOjwvc3Ryb25nPiAnfSR7YXJnc1N0cmluZ308YnI+YCArXG4gICAgICAgICAgICAgICAgICAgICBgPHN0cm9uZz5SZXR1cm4gVHlwZTo8L3N0cm9uZz4gJHtyZXR1cm5UeXBlLnR5cGVOYW1lfWBcbiAgICB9ICkgKTtcbiAgfVxuXG4gIHJldHVybiBjYWNoZS5nZXQoIGNhY2hlS2V5ICkhO1xufTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnRnVuY3Rpb25JTycsIEZ1bmN0aW9uSU8gKTtcbmV4cG9ydCBkZWZhdWx0IEZ1bmN0aW9uSU87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHVCQUF1QjtBQUNuRCxPQUFPQyxNQUFNLE1BQU0sYUFBYTs7QUFHaEM7QUFDQSxNQUFNQyxLQUFLLEdBQUcsSUFBSUMsR0FBRyxFQUFrQjs7QUFFdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxVQUFVLEdBQUdBLENBQUVDLFVBQWtCLEVBQUVDLHNCQUFnQyxLQUFjO0VBQ3JGLEtBQU0sSUFBSUMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHRCxzQkFBc0IsQ0FBQ0UsTUFBTSxFQUFFRCxDQUFDLEVBQUUsRUFBRztJQUN4REUsTUFBTSxJQUFJQSxNQUFNLENBQUVILHNCQUFzQixDQUFFQyxDQUFDLENBQUUsRUFBRSwrQkFBK0IsQ0FBRTtFQUNsRjtFQUNBRSxNQUFNLElBQUlBLE1BQU0sQ0FBRUosVUFBVSxFQUFFLDRCQUE0QixDQUFFOztFQUU1RDtFQUNBLE1BQU1LLFFBQVEsR0FBSSxHQUFFTCxVQUFVLENBQUNNLFFBQVMsSUFBR0wsc0JBQXNCLENBQUNNLEdBQUcsQ0FBRUMsSUFBSSxJQUFJQSxJQUFJLENBQUNGLFFBQVEsQ0FBRSxDQUFDRyxJQUFJLENBQUUsR0FBRyxDQUFHLEVBQUM7RUFFNUcsSUFBSyxDQUFDWixLQUFLLENBQUNhLEdBQUcsQ0FBRUwsUUFBUSxDQUFFLEVBQUc7SUFFNUI7SUFDQSxJQUFJTSxVQUFVLEdBQUdWLHNCQUFzQixDQUFDTSxHQUFHLENBQUVLLGFBQWEsSUFBSUEsYUFBYSxDQUFDTixRQUFRLENBQUUsQ0FBQ0csSUFBSSxDQUFFLElBQUksQ0FBRTtJQUNuRyxJQUFLRSxVQUFVLEtBQUssRUFBRSxFQUFHO01BQ3ZCQSxVQUFVLEdBQUcsTUFBTTtJQUNyQjtJQUNBLE1BQU1FLG9CQUFvQixHQUFHWixzQkFBc0IsQ0FBQ00sR0FBRyxDQUFFSyxhQUFhLElBQUlBLGFBQWEsQ0FBQ04sUUFBUSxDQUFFLENBQUNHLElBQUksQ0FBRSxHQUFHLENBQUU7SUFFOUdaLEtBQUssQ0FBQ2lCLEdBQUcsQ0FBRVQsUUFBUSxFQUFFLElBQUlULE1BQU0sQ0FBRyxjQUFhaUIsb0JBQXFCLE1BQUtiLFVBQVUsQ0FBQ00sUUFBUyxFQUFDLEVBQUU7TUFDOUZTLFNBQVMsRUFBRSxVQUFVO01BRXJCQyxjQUFjLEVBQUUsSUFBSTtNQUVwQjtNQUNBO01BQ0E7TUFDQTtNQUNBQyxjQUFjLEVBQUVoQixzQkFBc0IsQ0FBQ2lCLE1BQU0sQ0FBRSxDQUFFbEIsVUFBVSxDQUFFLENBQUU7TUFDL0RtQixhQUFhLEVBQUcsR0FBRSxnREFBZ0QsR0FDbkQsOEJBQStCLEdBQUVSLFVBQVcsTUFBSyxHQUNoRCxpQ0FBZ0NYLFVBQVUsQ0FBQ00sUUFBUztJQUN0RSxDQUFDLENBQUUsQ0FBRTtFQUNQO0VBRUEsT0FBT1QsS0FBSyxDQUFDdUIsR0FBRyxDQUFFZixRQUFRLENBQUU7QUFDOUIsQ0FBQztBQUVEVixlQUFlLENBQUMwQixRQUFRLENBQUUsWUFBWSxFQUFFdEIsVUFBVSxDQUFFO0FBQ3BELGVBQWVBLFVBQVUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/NullableIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * Parametric IO Type that adds support for null values in toStateObject/fromStateObject. This type is to
 * prevent the propagation of null handling, mainly in to/fromStateObject, in each type. This also makes null
 * explicit for phet-io.
 *
 * Sample usage:
 *
 *  this.ageProperty = new Property( null, {
 *    tandem: tandem.createTandem( 'ageProperty' ),
 *    phetioValueType: NullableIO( NumberIO ) // signifies that the Property can be Number or null
 * } );
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */






// Cache each parameterized IOType so that it is only created once
const NullableIO_cache = new Map();
const NullableIO = parameterType => {
  assert && assert(parameterType, 'NullableIO needs parameterType');
  if (!NullableIO_cache.has(parameterType)) {
    NullableIO_cache.set(parameterType, new IOType(`NullableIO<${parameterType.typeName}>`, {
      documentation: 'An IOType adding support for null in addition to the behavior of its parameter.',
      isValidValue: instance => instance === null || Validation.isValueValid(instance, parameterType.validator),
      parameterTypes: [parameterType],
      // If the argument is null, returns null. Otherwise, converts the instance to a state object for serialization.
      toStateObject: instance => instance === null ? null : parameterType.toStateObject(instance),
      // If the argument is null, returns null. Otherwise, converts a state object to an instance of the underlying type.
      fromStateObject: stateObject => stateObject === null ? null : parameterType.fromStateObject(stateObject),
      stateSchema: StateSchema.asValue(`null|<${parameterType.typeName}>`, {
        isValidValue: value => value === null || parameterType.isStateObjectValid(value)
      })
    }));
  }
  return NullableIO_cache.get(parameterType);
};
tandemNamespace.register('NullableIO', NullableIO);
/* harmony default export */ const types_NullableIO = (NullableIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWYWxpZGF0aW9uIiwidGFuZGVtTmFtZXNwYWNlIiwiSU9UeXBlIiwiU3RhdGVTY2hlbWEiLCJjYWNoZSIsIk1hcCIsIk51bGxhYmxlSU8iLCJwYXJhbWV0ZXJUeXBlIiwiYXNzZXJ0IiwiaGFzIiwic2V0IiwidHlwZU5hbWUiLCJkb2N1bWVudGF0aW9uIiwiaXNWYWxpZFZhbHVlIiwiaW5zdGFuY2UiLCJpc1ZhbHVlVmFsaWQiLCJ2YWxpZGF0b3IiLCJwYXJhbWV0ZXJUeXBlcyIsInRvU3RhdGVPYmplY3QiLCJmcm9tU3RhdGVPYmplY3QiLCJzdGF0ZU9iamVjdCIsInN0YXRlU2NoZW1hIiwiYXNWYWx1ZSIsInZhbHVlIiwiaXNTdGF0ZU9iamVjdFZhbGlkIiwiZ2V0IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJOdWxsYWJsZUlPLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFBhcmFtZXRyaWMgSU8gVHlwZSB0aGF0IGFkZHMgc3VwcG9ydCBmb3IgbnVsbCB2YWx1ZXMgaW4gdG9TdGF0ZU9iamVjdC9mcm9tU3RhdGVPYmplY3QuIFRoaXMgdHlwZSBpcyB0b1xuICogcHJldmVudCB0aGUgcHJvcGFnYXRpb24gb2YgbnVsbCBoYW5kbGluZywgbWFpbmx5IGluIHRvL2Zyb21TdGF0ZU9iamVjdCwgaW4gZWFjaCB0eXBlLiBUaGlzIGFsc28gbWFrZXMgbnVsbFxuICogZXhwbGljaXQgZm9yIHBoZXQtaW8uXG4gKlxuICogU2FtcGxlIHVzYWdlOlxuICpcbiAqICB0aGlzLmFnZVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBudWxsLCB7XG4gKiAgICB0YW5kZW06IHRhbmRlbS5jcmVhdGVUYW5kZW0oICdhZ2VQcm9wZXJ0eScgKSxcbiAqICAgIHBoZXRpb1ZhbHVlVHlwZTogTnVsbGFibGVJTyggTnVtYmVySU8gKSAvLyBzaWduaWZpZXMgdGhhdCB0aGUgUHJvcGVydHkgY2FuIGJlIE51bWJlciBvciBudWxsXG4gKiB9ICk7XG4gKlxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgVmFsaWRhdGlvbiBmcm9tICcuLi8uLi8uLi9heG9uL2pzL1ZhbGlkYXRpb24uanMnO1xuaW1wb3J0IHRhbmRlbU5hbWVzcGFjZSBmcm9tICcuLi90YW5kZW1OYW1lc3BhY2UuanMnO1xuaW1wb3J0IElPVHlwZSBmcm9tICcuL0lPVHlwZS5qcyc7XG5pbXBvcnQgU3RhdGVTY2hlbWEgZnJvbSAnLi9TdGF0ZVNjaGVtYS5qcyc7XG5cbi8vIENhY2hlIGVhY2ggcGFyYW1ldGVyaXplZCBJT1R5cGUgc28gdGhhdCBpdCBpcyBvbmx5IGNyZWF0ZWQgb25jZVxuY29uc3QgY2FjaGUgPSBuZXcgTWFwPElPVHlwZSwgSU9UeXBlPigpO1xuXG5jb25zdCBOdWxsYWJsZUlPID0gPFBhcmFtZXRlclR5cGUsIFBhcmFtZXRlclN0YXRlVHlwZT4oIHBhcmFtZXRlclR5cGU6IElPVHlwZTxQYXJhbWV0ZXJUeXBlLCBQYXJhbWV0ZXJTdGF0ZVR5cGU+ICk6IElPVHlwZSA9PiB7XG5cbiAgYXNzZXJ0ICYmIGFzc2VydCggcGFyYW1ldGVyVHlwZSwgJ051bGxhYmxlSU8gbmVlZHMgcGFyYW1ldGVyVHlwZScgKTtcblxuICBpZiAoICFjYWNoZS5oYXMoIHBhcmFtZXRlclR5cGUgKSApIHtcbiAgICBjYWNoZS5zZXQoIHBhcmFtZXRlclR5cGUsIG5ldyBJT1R5cGU8UGFyYW1ldGVyVHlwZSB8IG51bGwsIFBhcmFtZXRlclN0YXRlVHlwZSB8IG51bGw+KCBgTnVsbGFibGVJTzwke3BhcmFtZXRlclR5cGUudHlwZU5hbWV9PmAsIHtcbiAgICAgIGRvY3VtZW50YXRpb246ICdBbiBJT1R5cGUgYWRkaW5nIHN1cHBvcnQgZm9yIG51bGwgaW4gYWRkaXRpb24gdG8gdGhlIGJlaGF2aW9yIG9mIGl0cyBwYXJhbWV0ZXIuJyxcbiAgICAgIGlzVmFsaWRWYWx1ZTogaW5zdGFuY2UgPT4gaW5zdGFuY2UgPT09IG51bGwgfHwgVmFsaWRhdGlvbi5pc1ZhbHVlVmFsaWQoIGluc3RhbmNlLCBwYXJhbWV0ZXJUeXBlLnZhbGlkYXRvciApLFxuICAgICAgcGFyYW1ldGVyVHlwZXM6IFsgcGFyYW1ldGVyVHlwZSBdLFxuXG4gICAgICAvLyBJZiB0aGUgYXJndW1lbnQgaXMgbnVsbCwgcmV0dXJucyBudWxsLiBPdGhlcndpc2UsIGNvbnZlcnRzIHRoZSBpbnN0YW5jZSB0byBhIHN0YXRlIG9iamVjdCBmb3Igc2VyaWFsaXphdGlvbi5cbiAgICAgIHRvU3RhdGVPYmplY3Q6IGluc3RhbmNlID0+IGluc3RhbmNlID09PSBudWxsID8gbnVsbCA6IHBhcmFtZXRlclR5cGUudG9TdGF0ZU9iamVjdCggaW5zdGFuY2UgKSxcblxuICAgICAgLy8gSWYgdGhlIGFyZ3VtZW50IGlzIG51bGwsIHJldHVybnMgbnVsbC4gT3RoZXJ3aXNlLCBjb252ZXJ0cyBhIHN0YXRlIG9iamVjdCB0byBhbiBpbnN0YW5jZSBvZiB0aGUgdW5kZXJseWluZyB0eXBlLlxuICAgICAgZnJvbVN0YXRlT2JqZWN0OiBzdGF0ZU9iamVjdCA9PiBzdGF0ZU9iamVjdCA9PT0gbnVsbCA/IG51bGwgOiBwYXJhbWV0ZXJUeXBlLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QgKSxcbiAgICAgIHN0YXRlU2NoZW1hOiBTdGF0ZVNjaGVtYS5hc1ZhbHVlKCBgbnVsbHw8JHtwYXJhbWV0ZXJUeXBlLnR5cGVOYW1lfT5gLCB7XG4gICAgICAgICAgaXNWYWxpZFZhbHVlOiB2YWx1ZSA9PiB2YWx1ZSA9PT0gbnVsbCB8fCBwYXJhbWV0ZXJUeXBlLmlzU3RhdGVPYmplY3RWYWxpZCggdmFsdWUgKVxuICAgICAgICB9XG4gICAgICApXG4gICAgfSApICk7XG4gIH1cblxuICByZXR1cm4gY2FjaGUuZ2V0KCBwYXJhbWV0ZXJUeXBlICkhO1xufTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnTnVsbGFibGVJTycsIE51bGxhYmxlSU8gKTtcbmV4cG9ydCBkZWZhdWx0IE51bGxhYmxlSU87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsVUFBVSxNQUFNLGdDQUFnQztBQUN2RCxPQUFPQyxlQUFlLE1BQU0sdUJBQXVCO0FBQ25ELE9BQU9DLE1BQU0sTUFBTSxhQUFhO0FBQ2hDLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7O0FBRTFDO0FBQ0EsTUFBTUMsS0FBSyxHQUFHLElBQUlDLEdBQUcsRUFBa0I7QUFFdkMsTUFBTUMsVUFBVSxHQUF3Q0MsYUFBd0QsSUFBYztFQUU1SEMsTUFBTSxJQUFJQSxNQUFNLENBQUVELGFBQWEsRUFBRSxnQ0FBZ0MsQ0FBRTtFQUVuRSxJQUFLLENBQUNILEtBQUssQ0FBQ0ssR0FBRyxDQUFFRixhQUFhLENBQUUsRUFBRztJQUNqQ0gsS0FBSyxDQUFDTSxHQUFHLENBQUVILGFBQWEsRUFBRSxJQUFJTCxNQUFNLENBQW9ELGNBQWFLLGFBQWEsQ0FBQ0ksUUFBUyxHQUFFLEVBQUU7TUFDOUhDLGFBQWEsRUFBRSxpRkFBaUY7TUFDaEdDLFlBQVksRUFBRUMsUUFBUSxJQUFJQSxRQUFRLEtBQUssSUFBSSxJQUFJZCxVQUFVLENBQUNlLFlBQVksQ0FBRUQsUUFBUSxFQUFFUCxhQUFhLENBQUNTLFNBQVMsQ0FBRTtNQUMzR0MsY0FBYyxFQUFFLENBQUVWLGFBQWEsQ0FBRTtNQUVqQztNQUNBVyxhQUFhLEVBQUVKLFFBQVEsSUFBSUEsUUFBUSxLQUFLLElBQUksR0FBRyxJQUFJLEdBQUdQLGFBQWEsQ0FBQ1csYUFBYSxDQUFFSixRQUFRLENBQUU7TUFFN0Y7TUFDQUssZUFBZSxFQUFFQyxXQUFXLElBQUlBLFdBQVcsS0FBSyxJQUFJLEdBQUcsSUFBSSxHQUFHYixhQUFhLENBQUNZLGVBQWUsQ0FBRUMsV0FBVyxDQUFFO01BQzFHQyxXQUFXLEVBQUVsQixXQUFXLENBQUNtQixPQUFPLENBQUcsU0FBUWYsYUFBYSxDQUFDSSxRQUFTLEdBQUUsRUFBRTtRQUNsRUUsWUFBWSxFQUFFVSxLQUFLLElBQUlBLEtBQUssS0FBSyxJQUFJLElBQUloQixhQUFhLENBQUNpQixrQkFBa0IsQ0FBRUQsS0FBSztNQUNsRixDQUFDO0lBRUwsQ0FBQyxDQUFFLENBQUU7RUFDUDtFQUVBLE9BQU9uQixLQUFLLENBQUNxQixHQUFHLENBQUVsQixhQUFhLENBQUU7QUFDbkMsQ0FBQztBQUVETixlQUFlLENBQUN5QixRQUFRLENBQUUsWUFBWSxFQUFFcEIsVUFBVSxDQUFFO0FBQ3BELGVBQWVBLFVBQVUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/VoidIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * IO Type use to signify a function has no return value.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */




/**
 * We sometimes use VoidIO as a workaround to indicate that an argument is passed in the simulation side, but
 * that it shouldn't be leaked to the PhET-iO client.
 */
const VoidIO = new IOType('VoidIO', {
  isValidValue: () => true,
  documentation: 'Type for which there is no instance, usually to mark functions without a return value',
  toStateObject: () => undefined
});
tandemNamespace.register('VoidIO', VoidIO);
/* harmony default export */ const types_VoidIO = (VoidIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJWb2lkSU8iLCJpc1ZhbGlkVmFsdWUiLCJkb2N1bWVudGF0aW9uIiwidG9TdGF0ZU9iamVjdCIsInVuZGVmaW5lZCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVm9pZElPLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIElPIFR5cGUgdXNlIHRvIHNpZ25pZnkgYSBmdW5jdGlvbiBoYXMgbm8gcmV0dXJuIHZhbHVlLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIEFuZHJldyBBZGFyZSAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4uL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcblxuLyoqXG4gKiBXZSBzb21ldGltZXMgdXNlIFZvaWRJTyBhcyBhIHdvcmthcm91bmQgdG8gaW5kaWNhdGUgdGhhdCBhbiBhcmd1bWVudCBpcyBwYXNzZWQgaW4gdGhlIHNpbXVsYXRpb24gc2lkZSwgYnV0XG4gKiB0aGF0IGl0IHNob3VsZG4ndCBiZSBsZWFrZWQgdG8gdGhlIFBoRVQtaU8gY2xpZW50LlxuICovXG5jb25zdCBWb2lkSU8gPSBuZXcgSU9UeXBlKCAnVm9pZElPJywge1xuICBpc1ZhbGlkVmFsdWU6ICgpID0+IHRydWUsXG4gIGRvY3VtZW50YXRpb246ICdUeXBlIGZvciB3aGljaCB0aGVyZSBpcyBubyBpbnN0YW5jZSwgdXN1YWxseSB0byBtYXJrIGZ1bmN0aW9ucyB3aXRob3V0IGEgcmV0dXJuIHZhbHVlJyxcbiAgdG9TdGF0ZU9iamVjdDogKCkgPT4gdW5kZWZpbmVkXG59ICk7XG5cbnRhbmRlbU5hbWVzcGFjZS5yZWdpc3RlciggJ1ZvaWRJTycsIFZvaWRJTyApO1xuZXhwb3J0IGRlZmF1bHQgVm9pZElPOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx1QkFBdUI7QUFDbkQsT0FBT0MsTUFBTSxNQUFNLGFBQWE7O0FBRWhDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsTUFBTSxHQUFHLElBQUlELE1BQU0sQ0FBRSxRQUFRLEVBQUU7RUFDbkNFLFlBQVksRUFBRUEsQ0FBQSxLQUFNLElBQUk7RUFDeEJDLGFBQWEsRUFBRSx1RkFBdUY7RUFDdEdDLGFBQWEsRUFBRUEsQ0FBQSxLQUFNQztBQUN2QixDQUFDLENBQUU7QUFFSE4sZUFBZSxDQUFDTyxRQUFRLENBQUUsUUFBUSxFQUFFTCxNQUFNLENBQUU7QUFDNUMsZUFBZUEsTUFBTSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/PropertyStatePhase.js
// Copyright 2020-2022, University of Colorado Boulder

/**
 * Describes the phases that a Property can go through in its value setting and notification lifecycle.
 *
 * UNDEFER - the phase when `Property.setDeferred(false)` is called and Property.value becomes accurate
 * NOTIFY - the phase when notifications are fired for Properties that have had a value change since becoming deferred
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */




class PropertyStatePhase extends js_EnumerationValue {
  static UNDEFER = new PropertyStatePhase();
  static NOTIFY = new PropertyStatePhase();
  static enumeration = new js_Enumeration(PropertyStatePhase);
}
js_axon.register('PropertyStatePhase', PropertyStatePhase);
/* harmony default export */ const js_PropertyStatePhase = (PropertyStatePhase);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbiIsIkVudW1lcmF0aW9uVmFsdWUiLCJheG9uIiwiUHJvcGVydHlTdGF0ZVBoYXNlIiwiVU5ERUZFUiIsIk5PVElGWSIsImVudW1lcmF0aW9uIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQcm9wZXJ0eVN0YXRlUGhhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogRGVzY3JpYmVzIHRoZSBwaGFzZXMgdGhhdCBhIFByb3BlcnR5IGNhbiBnbyB0aHJvdWdoIGluIGl0cyB2YWx1ZSBzZXR0aW5nIGFuZCBub3RpZmljYXRpb24gbGlmZWN5Y2xlLlxuICpcbiAqIFVOREVGRVIgLSB0aGUgcGhhc2Ugd2hlbiBgUHJvcGVydHkuc2V0RGVmZXJyZWQoZmFsc2UpYCBpcyBjYWxsZWQgYW5kIFByb3BlcnR5LnZhbHVlIGJlY29tZXMgYWNjdXJhdGVcbiAqIE5PVElGWSAtIHRoZSBwaGFzZSB3aGVuIG5vdGlmaWNhdGlvbnMgYXJlIGZpcmVkIGZvciBQcm9wZXJ0aWVzIHRoYXQgaGF2ZSBoYWQgYSB2YWx1ZSBjaGFuZ2Ugc2luY2UgYmVjb21pbmcgZGVmZXJyZWRcbiAqXG4gKiBAYXV0aG9yIE1pY2hhZWwgS2F1em1hbm4gKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IEVudW1lcmF0aW9uIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvbi5qcyc7XG5pbXBvcnQgRW51bWVyYXRpb25WYWx1ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvRW51bWVyYXRpb25WYWx1ZS5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuXG5jbGFzcyBQcm9wZXJ0eVN0YXRlUGhhc2UgZXh0ZW5kcyBFbnVtZXJhdGlvblZhbHVlIHtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBVTkRFRkVSID0gbmV3IFByb3BlcnR5U3RhdGVQaGFzZSgpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE5PVElGWSA9IG5ldyBQcm9wZXJ0eVN0YXRlUGhhc2UoKTtcblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGVudW1lcmF0aW9uID0gbmV3IEVudW1lcmF0aW9uKCBQcm9wZXJ0eVN0YXRlUGhhc2UgKTtcbn1cblxuYXhvbi5yZWdpc3RlciggJ1Byb3BlcnR5U3RhdGVQaGFzZScsIFByb3BlcnR5U3RhdGVQaGFzZSApO1xuZXhwb3J0IGRlZmF1bHQgUHJvcGVydHlTdGF0ZVBoYXNlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxXQUFXLE1BQU0sbUNBQW1DO0FBQzNELE9BQU9DLGdCQUFnQixNQUFNLHdDQUF3QztBQUNyRSxPQUFPQyxJQUFJLE1BQU0sV0FBVztBQUU1QixNQUFNQyxrQkFBa0IsU0FBU0YsZ0JBQWdCLENBQUM7RUFDaEQsT0FBdUJHLE9BQU8sR0FBRyxJQUFJRCxrQkFBa0IsRUFBRTtFQUN6RCxPQUF1QkUsTUFBTSxHQUFHLElBQUlGLGtCQUFrQixFQUFFO0VBRXhELE9BQXVCRyxXQUFXLEdBQUcsSUFBSU4sV0FBVyxDQUFFRyxrQkFBa0IsQ0FBRTtBQUM1RTtBQUVBRCxJQUFJLENBQUNLLFFBQVEsQ0FBRSxvQkFBb0IsRUFBRUosa0JBQWtCLENBQUU7QUFDekQsZUFBZUEsa0JBQWtCIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/PropertyStateHandler.js
// Copyright 2020-2023, University of Colorado Boulder

/**
 * Responsible for handling Property-specific logic associated with setting PhET-iO state. This file will defer Properties
 * from taking their final value, and notifying on that value until after state has been set on every Property. It is
 * also responsible for keeping track of order dependencies between different Properties, and making sure that undeferral
 * and notifications go out in the appropriate orders. See https://github.com/phetsims/axon/issues/276 for implementation details.
 *
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */





class PropertyStateHandler {
  initialized = false;
  constructor() {
    // Properties support setDeferred(). We defer setting their values so all changes take effect
    // at once. This keeps track of finalization actions (embodied in a PhaseCallback) that must take place after all
    // Property values have changed. This keeps track of both types of PropertyStatePhase: undeferring and notification.
    this.phaseCallbackSets = new PhaseCallbackSets();

    // each pair has a Map optimized for looking up based on the "before phetioID" and the "after phetioID"
    // of the dependency. Having a data structure set up for both directions of look-up makes each operation O(1). See https://github.com/phetsims/axon/issues/316
    this.undeferBeforeUndeferMapPair = new OrderDependencyMapPair(js_PropertyStatePhase.UNDEFER, js_PropertyStatePhase.UNDEFER);
    this.undeferBeforeNotifyMapPair = new OrderDependencyMapPair(js_PropertyStatePhase.UNDEFER, js_PropertyStatePhase.NOTIFY);
    this.notifyBeforeUndeferMapPair = new OrderDependencyMapPair(js_PropertyStatePhase.NOTIFY, js_PropertyStatePhase.UNDEFER);
    this.notifyBeforeNotifyMapPair = new OrderDependencyMapPair(js_PropertyStatePhase.NOTIFY, js_PropertyStatePhase.NOTIFY);

    // keep a list of all map pairs for easier iteration
    this.mapPairs = [this.undeferBeforeUndeferMapPair, this.undeferBeforeNotifyMapPair, this.notifyBeforeUndeferMapPair, this.notifyBeforeNotifyMapPair];
  }
  initialize(phetioStateEngine) {
    assert && assert(!this.initialized, 'cannot initialize twice');
    phetioStateEngine.onBeforeApplyStateEmitter.addListener(phetioObject => {
      // withhold AXON/Property notifications until all values have been set to avoid inconsistent intermediate states,
      // see https://github.com/phetsims/phet-io-wrappers/issues/229
      // only do this if the PhetioObject is already not deferred
      if (phetioObject instanceof ReadOnlyProperty && !phetioObject.isDeferred) {
        phetioObject.setDeferred(true);
        const phetioID = phetioObject.tandem.phetioID;
        const listener = () => {
          const potentialListener = phetioObject.setDeferred(false);

          // Always add a PhaseCallback so that we can track the order dependency, even though setDeferred can return null.
          this.phaseCallbackSets.addNotifyPhaseCallback(new PhaseCallback(phetioID, js_PropertyStatePhase.NOTIFY, potentialListener || _.noop));
        };
        this.phaseCallbackSets.addUndeferPhaseCallback(new PhaseCallback(phetioID, js_PropertyStatePhase.UNDEFER, listener));
      }
    });
    phetioStateEngine.stateSetEmitter.addListener(state => {
      // Properties set to final values and notify of any value changes.
      this.undeferAndNotifyProperties(new Set(Object.keys(state)));
    });
    phetioStateEngine.isSettingStateProperty.lazyLink(isSettingState => {
      assert && !isSettingState && assert(this.phaseCallbackSets.size === 0, 'PhaseCallbacks should have all been applied');
    });
    this.initialized = true;
  }
  static validateInstrumentedProperty(property) {
    assert && js_Tandem.VALIDATION && assert(property instanceof ReadOnlyProperty && property.isPhetioInstrumented(), `must be an instrumented Property: ${property}`);
  }
  validatePropertyPhasePair(property, phase) {
    PropertyStateHandler.validateInstrumentedProperty(property);
  }

  /**
   * Get the MapPair associated with the proved PropertyStatePhases
   */
  getMapPairFromPhases(beforePhase, afterPhase) {
    const matchedPairs = this.mapPairs.filter(mapPair => beforePhase === mapPair.beforePhase && afterPhase === mapPair.afterPhase);
    assert && assert(matchedPairs.length === 1, 'one and only one map should match the provided phases');
    return matchedPairs[0];
  }

  /**
   * Register that one Property must have a "Phase" applied for PhET-iO state before another Property's Phase. A Phase
   * is an ending state in PhET-iO state set where Property values solidify, notifications for value changes are called.
   * The PhET-iO state engine will always undefer a Property before it notifies its listeners. This is for registering
   * two different Properties.
   *
   * @param beforeProperty - the Property that needs to be set before the second; must be instrumented for PhET-iO
   * @param beforePhase
   * @param afterProperty - must be instrumented for PhET-iO
   * @param afterPhase
   */
  registerPhetioOrderDependency(beforeProperty, beforePhase, afterProperty, afterPhase) {
    if (js_Tandem.PHET_IO_ENABLED) {
      this.validatePropertyPhasePair(beforeProperty, beforePhase);
      this.validatePropertyPhasePair(afterProperty, afterPhase);
      assert && beforeProperty === afterProperty && assert(beforePhase !== afterPhase, 'cannot set same Property to same phase');
      const mapPair = this.getMapPairFromPhases(beforePhase, afterPhase);
      mapPair.addOrderDependency(beforeProperty.tandem.phetioID, afterProperty.tandem.phetioID);
    }
  }

  /**
   * {Property} property - must be instrumented for PhET-iO
   * {boolean} - true if Property is in any order dependency
   */
  propertyInAnOrderDependency(property) {
    PropertyStateHandler.validateInstrumentedProperty(property);
    return _.some(this.mapPairs, mapPair => mapPair.usesPhetioID(property.tandem.phetioID));
  }

  /**
   * Unregisters all order dependencies for the given Property
   * {ReadOnlyProperty} property - must be instrumented for PhET-iO
   */
  unregisterOrderDependenciesForProperty(property) {
    if (js_Tandem.PHET_IO_ENABLED) {
      PropertyStateHandler.validateInstrumentedProperty(property);

      // Be graceful if given a Property that is not registered in an order dependency.
      if (this.propertyInAnOrderDependency(property)) {
        assert && assert(this.propertyInAnOrderDependency(property), 'Property must be registered in an order dependency to be unregistered');
        this.mapPairs.forEach(mapPair => mapPair.unregisterOrderDependenciesForProperty(property));
      }
    }
  }

  /**
   * Given registered Property Phase order dependencies, undefer all AXON/Property PhET-iO elements to take their
   * correct values and have each notify their listeners.
   * {Set.<string>} phetioIDsInState - set of phetioIDs that were set in state
   */
  undeferAndNotifyProperties(phetioIDsInState) {
    assert && assert(this.initialized, 'must be initialized before getting called');

    // {Object.<string,boolean>} - true if a phetioID + phase pair has been applied, keys are the combination of
    // phetioIDs and phase, see PhaseCallback.getTerm()
    const completedPhases = {};

    // to support failing out instead of infinite loop
    let numberOfIterations = 0;

    // Normally we would like to undefer things before notify, but make sure this is done in accordance with the order dependencies.
    while (this.phaseCallbackSets.size > 0) {
      numberOfIterations++;

      // Error case logging
      if (numberOfIterations > 5000) {
        this.errorInUndeferAndNotifyStep(completedPhases);
      }

      // Try to undefer as much as possible before notifying
      this.attemptToApplyPhases(js_PropertyStatePhase.UNDEFER, completedPhases, phetioIDsInState);
      this.attemptToApplyPhases(js_PropertyStatePhase.NOTIFY, completedPhases, phetioIDsInState);
    }
  }
  errorInUndeferAndNotifyStep(completedPhases) {
    // combine phetioID and Phase into a single string to keep this process specific.
    const stillToDoIDPhasePairs = [];
    this.phaseCallbackSets.forEach(phaseCallback => stillToDoIDPhasePairs.push(phaseCallback.getTerm()));
    const relevantOrderDependencies = [];
    this.mapPairs.forEach(mapPair => {
      const beforeMap = mapPair.beforeMap;
      for (const [beforePhetioID, afterPhetioIDs] of beforeMap) {
        afterPhetioIDs.forEach(afterPhetioID => {
          const beforeTerm = beforePhetioID + beforeMap.beforePhase;
          const afterTerm = afterPhetioID + beforeMap.afterPhase;
          if (stillToDoIDPhasePairs.includes(beforeTerm) || stillToDoIDPhasePairs.includes(afterTerm)) {
            relevantOrderDependencies.push({
              beforeTerm: beforeTerm,
              afterTerm: afterTerm
            });
          }
        });
      }
    });
    let string = '';
    console.log('still to be undeferred', this.phaseCallbackSets.undeferSet);
    console.log('still to be notified', this.phaseCallbackSets.notifySet);
    console.log('order dependencies that apply to the still todos', relevantOrderDependencies);
    relevantOrderDependencies.forEach(orderDependency => {
      string += `${orderDependency.beforeTerm}\t${orderDependency.afterTerm}\n`;
    });
    console.log('\n\nin graphable form:\n\n', string);
    const assertMessage = 'Impossible set state: from undeferAndNotifyProperties; ordering constraints cannot be satisfied';
    assert && assert(false, assertMessage);

    // We must exit here even if assertions are disabled so it wouldn't lock up the browser.
    if (!assert) {
      throw new Error(assertMessage);
    }
  }

  /**
   * Only for Testing!
   * Get the number of order dependencies registered in this class
   *
   */
  getNumberOfOrderDependencies() {
    let count = 0;
    this.mapPairs.forEach(mapPair => {
      mapPair.afterMap.forEach(valueSet => {
        count += valueSet.size;
      });
    });
    return count;
  }

  /**
   * Go through all phases still to be applied, and apply them if the order dependencies allow it. Only apply for the
   * particular phase provided. In general UNDEFER must occur before the same phetioID gets NOTIFY.
   *
   * @param phase - only apply PhaseCallbacks for this particular PropertyStatePhase
   * @param completedPhases - map that keeps track of completed phases
   * @param phetioIDsInState - set of phetioIDs that were set in state
   */
  attemptToApplyPhases(phase, completedPhases, phetioIDsInState) {
    const phaseCallbackSet = this.phaseCallbackSets.getSetFromPhase(phase);
    for (const phaseCallbackToPotentiallyApply of phaseCallbackSet) {
      assert && assert(phaseCallbackToPotentiallyApply.phase === phase, 'phaseCallbackSet should only include callbacks for provided phase');

      // only try to check the order dependencies to see if this has to be after something that is incomplete.
      if (this.phetioIDCanApplyPhase(phaseCallbackToPotentiallyApply.phetioID, phase, completedPhases, phetioIDsInState)) {
        // Fire the listener;
        phaseCallbackToPotentiallyApply.listener();

        // Remove it from the master list so that it doesn't get called again.
        phaseCallbackSet.delete(phaseCallbackToPotentiallyApply);

        // Keep track of all completed PhaseCallbacks
        completedPhases[phaseCallbackToPotentiallyApply.getTerm()] = true;
      }
    }
  }

  /**
   * @param phetioID - think of this as the "afterPhetioID" since there may be some phases that need to be applied before it has this phase done.
   * @param phase
   * @param completedPhases - map that keeps track of completed phases
   * @param phetioIDsInState - set of phetioIDs that were set in state
   * @param - if the provided phase can be applied given the dependency order dependencies of the state engine.
   */
  phetioIDCanApplyPhase(phetioID, phase, completedPhases, phetioIDsInState) {
    // Undefer must happen before notify
    if (phase === js_PropertyStatePhase.NOTIFY && !completedPhases[phetioID + js_PropertyStatePhase.UNDEFER]) {
      return false;
    }

    // Get a list of the maps for this phase being applies.
    const mapsToCheck = [];
    this.mapPairs.forEach(mapPair => {
      if (mapPair.afterPhase === phase) {
        // Use the "afterMap" because below looks up what needs to come before.
        mapsToCheck.push(mapPair.afterMap);
      }
    });

    // O(2)
    for (let i = 0; i < mapsToCheck.length; i++) {
      const mapToCheck = mapsToCheck[i];
      if (!mapToCheck.has(phetioID)) {
        return true;
      }
      const setOfThingsThatShouldComeFirst = mapToCheck.get(phetioID);
      assert && assert(setOfThingsThatShouldComeFirst, 'must have this set');

      // O(K) where K is the number of elements that should come before Property X
      for (const beforePhetioID of setOfThingsThatShouldComeFirst) {
        // check if the before phase for this order dependency has already been completed
        // Make sure that we only care about elements that were actually set during this state set
        if (!completedPhases[beforePhetioID + mapToCheck.beforePhase] && phetioIDsInState.has(beforePhetioID) && phetioIDsInState.has(phetioID)) {
          return false;
        }
      }
    }
    return true;
  }
}

// POJSO for a callback for a specific Phase in a Property's state set lifecycle. See undeferAndNotifyProperties()
class PhaseCallback {
  constructor(phetioID, phase, listener = _.noop) {
    this.phetioID = phetioID;
    this.phase = phase;
    this.listener = listener;
  }

  /**
   * {string} - unique term for the id/phase pair
   */
  getTerm() {
    return this.phetioID + this.phase;
  }
}
class OrderDependencyMapPair {
  constructor(beforePhase, afterPhase) {
    // @ts-expect-error, it is easiest to fudge here since we are adding the PhaseMap properties just below here.
    this.beforeMap = new Map();
    this.beforeMap.beforePhase = beforePhase;
    this.beforeMap.afterPhase = afterPhase;

    // @ts-expect-error, it is easiest to fudge here since we are adding the PhaseMap properties just below here.
    this.afterMap = new Map();
    this.afterMap.beforePhase = beforePhase;
    this.afterMap.afterPhase = afterPhase;
    this.beforeMap.otherMap = this.afterMap;
    this.afterMap.otherMap = this.beforeMap;
    this.beforePhase = beforePhase;
    this.afterPhase = afterPhase;
  }

  /**
   * Register an order dependency between two phetioIDs. This will add data to maps in "both direction". If accessing
   * with just the beforePhetioID, or with the afterPhetioID.
   */
  addOrderDependency(beforePhetioID, afterPhetioID) {
    if (!this.beforeMap.has(beforePhetioID)) {
      this.beforeMap.set(beforePhetioID, new Set());
    }
    this.beforeMap.get(beforePhetioID).add(afterPhetioID);
    if (!this.afterMap.has(afterPhetioID)) {
      this.afterMap.set(afterPhetioID, new Set());
    }
    this.afterMap.get(afterPhetioID).add(beforePhetioID);
  }

  /**
   * Unregister all order dependencies for the provided Property
   */
  unregisterOrderDependenciesForProperty(property) {
    const phetioIDToRemove = property.tandem.phetioID;
    [this.beforeMap, this.afterMap].forEach(map => {
      map.has(phetioIDToRemove) && map.get(phetioIDToRemove).forEach(phetioID => {
        const setOfAfterMapIDs = map.otherMap.get(phetioID);
        setOfAfterMapIDs && setOfAfterMapIDs.delete(phetioIDToRemove);

        // Clear out empty entries to avoid having lots of empty Sets sitting around
        setOfAfterMapIDs.size === 0 && map.otherMap.delete(phetioID);
      });
      map.delete(phetioIDToRemove);
    });

    // Look through every dependency and make sure the phetioID to remove has been completely removed.
    assertSlow && [this.beforeMap, this.afterMap].forEach(map => {
      map.forEach((valuePhetioIDs, key) => {
        assertSlow && assertSlow(key !== phetioIDToRemove, 'should not be a key');
        assertSlow && assertSlow(!valuePhetioIDs.has(phetioIDToRemove), 'should not be in a value list');
      });
    });
  }
  usesPhetioID(phetioID) {
    return this.beforeMap.has(phetioID) || this.afterMap.has(phetioID);
  }
}

// POJSO to keep track of PhaseCallbacks while providing O(1) lookup time because it is built on Set
class PhaseCallbackSets {
  undeferSet = new Set();
  notifySet = new Set();
  get size() {
    return this.undeferSet.size + this.notifySet.size;
  }
  forEach(callback) {
    this.undeferSet.forEach(callback);
    this.notifySet.forEach(callback);
  }
  addUndeferPhaseCallback(phaseCallback) {
    this.undeferSet.add(phaseCallback);
  }
  addNotifyPhaseCallback(phaseCallback) {
    this.notifySet.add(phaseCallback);
  }
  getSetFromPhase(phase) {
    return phase === js_PropertyStatePhase.NOTIFY ? this.notifySet : this.undeferSet;
  }
}
js_axon.register('PropertyStateHandler', PropertyStateHandler);
/* harmony default export */ const js_PropertyStateHandler = (PropertyStateHandler);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUYW5kZW0iLCJheG9uIiwiUHJvcGVydHlTdGF0ZVBoYXNlIiwiUmVhZE9ubHlQcm9wZXJ0eSIsIlByb3BlcnR5U3RhdGVIYW5kbGVyIiwiaW5pdGlhbGl6ZWQiLCJjb25zdHJ1Y3RvciIsInBoYXNlQ2FsbGJhY2tTZXRzIiwiUGhhc2VDYWxsYmFja1NldHMiLCJ1bmRlZmVyQmVmb3JlVW5kZWZlck1hcFBhaXIiLCJPcmRlckRlcGVuZGVuY3lNYXBQYWlyIiwiVU5ERUZFUiIsInVuZGVmZXJCZWZvcmVOb3RpZnlNYXBQYWlyIiwiTk9USUZZIiwibm90aWZ5QmVmb3JlVW5kZWZlck1hcFBhaXIiLCJub3RpZnlCZWZvcmVOb3RpZnlNYXBQYWlyIiwibWFwUGFpcnMiLCJpbml0aWFsaXplIiwicGhldGlvU3RhdGVFbmdpbmUiLCJhc3NlcnQiLCJvbkJlZm9yZUFwcGx5U3RhdGVFbWl0dGVyIiwiYWRkTGlzdGVuZXIiLCJwaGV0aW9PYmplY3QiLCJpc0RlZmVycmVkIiwic2V0RGVmZXJyZWQiLCJwaGV0aW9JRCIsInRhbmRlbSIsImxpc3RlbmVyIiwicG90ZW50aWFsTGlzdGVuZXIiLCJhZGROb3RpZnlQaGFzZUNhbGxiYWNrIiwiUGhhc2VDYWxsYmFjayIsIl8iLCJub29wIiwiYWRkVW5kZWZlclBoYXNlQ2FsbGJhY2siLCJzdGF0ZVNldEVtaXR0ZXIiLCJzdGF0ZSIsInVuZGVmZXJBbmROb3RpZnlQcm9wZXJ0aWVzIiwiU2V0IiwiT2JqZWN0Iiwia2V5cyIsImlzU2V0dGluZ1N0YXRlUHJvcGVydHkiLCJsYXp5TGluayIsImlzU2V0dGluZ1N0YXRlIiwic2l6ZSIsInZhbGlkYXRlSW5zdHJ1bWVudGVkUHJvcGVydHkiLCJwcm9wZXJ0eSIsIlZBTElEQVRJT04iLCJpc1BoZXRpb0luc3RydW1lbnRlZCIsInZhbGlkYXRlUHJvcGVydHlQaGFzZVBhaXIiLCJwaGFzZSIsImdldE1hcFBhaXJGcm9tUGhhc2VzIiwiYmVmb3JlUGhhc2UiLCJhZnRlclBoYXNlIiwibWF0Y2hlZFBhaXJzIiwiZmlsdGVyIiwibWFwUGFpciIsImxlbmd0aCIsInJlZ2lzdGVyUGhldGlvT3JkZXJEZXBlbmRlbmN5IiwiYmVmb3JlUHJvcGVydHkiLCJhZnRlclByb3BlcnR5IiwiUEhFVF9JT19FTkFCTEVEIiwiYWRkT3JkZXJEZXBlbmRlbmN5IiwicHJvcGVydHlJbkFuT3JkZXJEZXBlbmRlbmN5Iiwic29tZSIsInVzZXNQaGV0aW9JRCIsInVucmVnaXN0ZXJPcmRlckRlcGVuZGVuY2llc0ZvclByb3BlcnR5IiwiZm9yRWFjaCIsInBoZXRpb0lEc0luU3RhdGUiLCJjb21wbGV0ZWRQaGFzZXMiLCJudW1iZXJPZkl0ZXJhdGlvbnMiLCJlcnJvckluVW5kZWZlckFuZE5vdGlmeVN0ZXAiLCJhdHRlbXB0VG9BcHBseVBoYXNlcyIsInN0aWxsVG9Eb0lEUGhhc2VQYWlycyIsInBoYXNlQ2FsbGJhY2siLCJwdXNoIiwiZ2V0VGVybSIsInJlbGV2YW50T3JkZXJEZXBlbmRlbmNpZXMiLCJiZWZvcmVNYXAiLCJiZWZvcmVQaGV0aW9JRCIsImFmdGVyUGhldGlvSURzIiwiYWZ0ZXJQaGV0aW9JRCIsImJlZm9yZVRlcm0iLCJhZnRlclRlcm0iLCJpbmNsdWRlcyIsInN0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJ1bmRlZmVyU2V0Iiwibm90aWZ5U2V0Iiwib3JkZXJEZXBlbmRlbmN5IiwiYXNzZXJ0TWVzc2FnZSIsIkVycm9yIiwiZ2V0TnVtYmVyT2ZPcmRlckRlcGVuZGVuY2llcyIsImNvdW50IiwiYWZ0ZXJNYXAiLCJ2YWx1ZVNldCIsInBoYXNlQ2FsbGJhY2tTZXQiLCJnZXRTZXRGcm9tUGhhc2UiLCJwaGFzZUNhbGxiYWNrVG9Qb3RlbnRpYWxseUFwcGx5IiwicGhldGlvSURDYW5BcHBseVBoYXNlIiwiZGVsZXRlIiwibWFwc1RvQ2hlY2siLCJpIiwibWFwVG9DaGVjayIsImhhcyIsInNldE9mVGhpbmdzVGhhdFNob3VsZENvbWVGaXJzdCIsImdldCIsIk1hcCIsIm90aGVyTWFwIiwic2V0IiwiYWRkIiwicGhldGlvSURUb1JlbW92ZSIsIm1hcCIsInNldE9mQWZ0ZXJNYXBJRHMiLCJhc3NlcnRTbG93IiwidmFsdWVQaGV0aW9JRHMiLCJrZXkiLCJjYWxsYmFjayIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUHJvcGVydHlTdGF0ZUhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogUmVzcG9uc2libGUgZm9yIGhhbmRsaW5nIFByb3BlcnR5LXNwZWNpZmljIGxvZ2ljIGFzc29jaWF0ZWQgd2l0aCBzZXR0aW5nIFBoRVQtaU8gc3RhdGUuIFRoaXMgZmlsZSB3aWxsIGRlZmVyIFByb3BlcnRpZXNcbiAqIGZyb20gdGFraW5nIHRoZWlyIGZpbmFsIHZhbHVlLCBhbmQgbm90aWZ5aW5nIG9uIHRoYXQgdmFsdWUgdW50aWwgYWZ0ZXIgc3RhdGUgaGFzIGJlZW4gc2V0IG9uIGV2ZXJ5IFByb3BlcnR5LiBJdCBpc1xuICogYWxzbyByZXNwb25zaWJsZSBmb3Iga2VlcGluZyB0cmFjayBvZiBvcmRlciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBkaWZmZXJlbnQgUHJvcGVydGllcywgYW5kIG1ha2luZyBzdXJlIHRoYXQgdW5kZWZlcnJhbFxuICogYW5kIG5vdGlmaWNhdGlvbnMgZ28gb3V0IGluIHRoZSBhcHByb3ByaWF0ZSBvcmRlcnMuIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvMjc2IGZvciBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzLlxuICpcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgUGhldGlvU3RhdGVFbmdpbmUgZnJvbSAnLi4vLi4vcGhldC1pby9qcy9QaGV0aW9TdGF0ZUVuZ2luZS5qcyc7XG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IFByb3BlcnR5U3RhdGVQaGFzZSBmcm9tICcuL1Byb3BlcnR5U3RhdGVQaGFzZS5qcyc7XG5pbXBvcnQgUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuL1JlYWRPbmx5UHJvcGVydHkuanMnO1xuXG50eXBlIFBoYXNlTWFwID0ge1xuICBiZWZvcmVQaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlO1xuICBhZnRlclBoYXNlOiBQcm9wZXJ0eVN0YXRlUGhhc2U7XG4gIG90aGVyTWFwOiBQaGFzZU1hcDtcbn0gJiBNYXA8c3RyaW5nLCBTZXQ8c3RyaW5nPj47XG5cbnR5cGUgT3JkZXJEZXBlbmRlbmN5ID0ge1xuICBiZWZvcmVUZXJtOiBzdHJpbmc7XG4gIGFmdGVyVGVybTogc3RyaW5nO1xufTtcblxuY2xhc3MgUHJvcGVydHlTdGF0ZUhhbmRsZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IHBoYXNlQ2FsbGJhY2tTZXRzOiBQaGFzZUNhbGxiYWNrU2V0cztcbiAgcHJpdmF0ZSByZWFkb25seSB1bmRlZmVyQmVmb3JlVW5kZWZlck1hcFBhaXI6IE9yZGVyRGVwZW5kZW5jeU1hcFBhaXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgdW5kZWZlckJlZm9yZU5vdGlmeU1hcFBhaXI6IE9yZGVyRGVwZW5kZW5jeU1hcFBhaXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgbm90aWZ5QmVmb3JlVW5kZWZlck1hcFBhaXI6IE9yZGVyRGVwZW5kZW5jeU1hcFBhaXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgbm90aWZ5QmVmb3JlTm90aWZ5TWFwUGFpcjogT3JkZXJEZXBlbmRlbmN5TWFwUGFpcjtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXBQYWlyczogT3JkZXJEZXBlbmRlbmN5TWFwUGFpcltdO1xuICBwcml2YXRlIGluaXRpYWxpemVkID0gZmFsc2U7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xuXG4gICAgLy8gUHJvcGVydGllcyBzdXBwb3J0IHNldERlZmVycmVkKCkuIFdlIGRlZmVyIHNldHRpbmcgdGhlaXIgdmFsdWVzIHNvIGFsbCBjaGFuZ2VzIHRha2UgZWZmZWN0XG4gICAgLy8gYXQgb25jZS4gVGhpcyBrZWVwcyB0cmFjayBvZiBmaW5hbGl6YXRpb24gYWN0aW9ucyAoZW1ib2RpZWQgaW4gYSBQaGFzZUNhbGxiYWNrKSB0aGF0IG11c3QgdGFrZSBwbGFjZSBhZnRlciBhbGxcbiAgICAvLyBQcm9wZXJ0eSB2YWx1ZXMgaGF2ZSBjaGFuZ2VkLiBUaGlzIGtlZXBzIHRyYWNrIG9mIGJvdGggdHlwZXMgb2YgUHJvcGVydHlTdGF0ZVBoYXNlOiB1bmRlZmVycmluZyBhbmQgbm90aWZpY2F0aW9uLlxuICAgIHRoaXMucGhhc2VDYWxsYmFja1NldHMgPSBuZXcgUGhhc2VDYWxsYmFja1NldHMoKTtcblxuICAgIC8vIGVhY2ggcGFpciBoYXMgYSBNYXAgb3B0aW1pemVkIGZvciBsb29raW5nIHVwIGJhc2VkIG9uIHRoZSBcImJlZm9yZSBwaGV0aW9JRFwiIGFuZCB0aGUgXCJhZnRlciBwaGV0aW9JRFwiXG4gICAgLy8gb2YgdGhlIGRlcGVuZGVuY3kuIEhhdmluZyBhIGRhdGEgc3RydWN0dXJlIHNldCB1cCBmb3IgYm90aCBkaXJlY3Rpb25zIG9mIGxvb2stdXAgbWFrZXMgZWFjaCBvcGVyYXRpb24gTygxKS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9heG9uL2lzc3Vlcy8zMTZcbiAgICB0aGlzLnVuZGVmZXJCZWZvcmVVbmRlZmVyTWFwUGFpciA9IG5ldyBPcmRlckRlcGVuZGVuY3lNYXBQYWlyKCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiwgUHJvcGVydHlTdGF0ZVBoYXNlLlVOREVGRVIgKTtcbiAgICB0aGlzLnVuZGVmZXJCZWZvcmVOb3RpZnlNYXBQYWlyID0gbmV3IE9yZGVyRGVwZW5kZW5jeU1hcFBhaXIoIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSLCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZICk7XG4gICAgdGhpcy5ub3RpZnlCZWZvcmVVbmRlZmVyTWFwUGFpciA9IG5ldyBPcmRlckRlcGVuZGVuY3lNYXBQYWlyKCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZLCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiApO1xuICAgIHRoaXMubm90aWZ5QmVmb3JlTm90aWZ5TWFwUGFpciA9IG5ldyBPcmRlckRlcGVuZGVuY3lNYXBQYWlyKCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZLCBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZICk7XG5cbiAgICAvLyBrZWVwIGEgbGlzdCBvZiBhbGwgbWFwIHBhaXJzIGZvciBlYXNpZXIgaXRlcmF0aW9uXG4gICAgdGhpcy5tYXBQYWlycyA9IFtcbiAgICAgIHRoaXMudW5kZWZlckJlZm9yZVVuZGVmZXJNYXBQYWlyLFxuICAgICAgdGhpcy51bmRlZmVyQmVmb3JlTm90aWZ5TWFwUGFpcixcbiAgICAgIHRoaXMubm90aWZ5QmVmb3JlVW5kZWZlck1hcFBhaXIsXG4gICAgICB0aGlzLm5vdGlmeUJlZm9yZU5vdGlmeU1hcFBhaXJcbiAgICBdO1xuICB9XG5cbiAgcHVibGljIGluaXRpYWxpemUoIHBoZXRpb1N0YXRlRW5naW5lOiBQaGV0aW9TdGF0ZUVuZ2luZSApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5pbml0aWFsaXplZCwgJ2Nhbm5vdCBpbml0aWFsaXplIHR3aWNlJyApO1xuXG4gICAgcGhldGlvU3RhdGVFbmdpbmUub25CZWZvcmVBcHBseVN0YXRlRW1pdHRlci5hZGRMaXN0ZW5lciggcGhldGlvT2JqZWN0ID0+IHtcblxuICAgICAgLy8gd2l0aGhvbGQgQVhPTi9Qcm9wZXJ0eSBub3RpZmljYXRpb25zIHVudGlsIGFsbCB2YWx1ZXMgaGF2ZSBiZWVuIHNldCB0byBhdm9pZCBpbmNvbnNpc3RlbnQgaW50ZXJtZWRpYXRlIHN0YXRlcyxcbiAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1pby13cmFwcGVycy9pc3N1ZXMvMjI5XG4gICAgICAvLyBvbmx5IGRvIHRoaXMgaWYgdGhlIFBoZXRpb09iamVjdCBpcyBhbHJlYWR5IG5vdCBkZWZlcnJlZFxuICAgICAgaWYgKCBwaGV0aW9PYmplY3QgaW5zdGFuY2VvZiBSZWFkT25seVByb3BlcnR5ICYmICFwaGV0aW9PYmplY3QuaXNEZWZlcnJlZCApIHtcbiAgICAgICAgcGhldGlvT2JqZWN0LnNldERlZmVycmVkKCB0cnVlICk7XG4gICAgICAgIGNvbnN0IHBoZXRpb0lEID0gcGhldGlvT2JqZWN0LnRhbmRlbS5waGV0aW9JRDtcblxuICAgICAgICBjb25zdCBsaXN0ZW5lciA9ICgpID0+IHtcbiAgICAgICAgICBjb25zdCBwb3RlbnRpYWxMaXN0ZW5lciA9IHBoZXRpb09iamVjdC5zZXREZWZlcnJlZCggZmFsc2UgKTtcblxuICAgICAgICAgIC8vIEFsd2F5cyBhZGQgYSBQaGFzZUNhbGxiYWNrIHNvIHRoYXQgd2UgY2FuIHRyYWNrIHRoZSBvcmRlciBkZXBlbmRlbmN5LCBldmVuIHRob3VnaCBzZXREZWZlcnJlZCBjYW4gcmV0dXJuIG51bGwuXG4gICAgICAgICAgdGhpcy5waGFzZUNhbGxiYWNrU2V0cy5hZGROb3RpZnlQaGFzZUNhbGxiYWNrKCBuZXcgUGhhc2VDYWxsYmFjayggcGhldGlvSUQsIFByb3BlcnR5U3RhdGVQaGFzZS5OT1RJRlksIHBvdGVudGlhbExpc3RlbmVyIHx8IF8ubm9vcCApICk7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMucGhhc2VDYWxsYmFja1NldHMuYWRkVW5kZWZlclBoYXNlQ2FsbGJhY2soIG5ldyBQaGFzZUNhbGxiYWNrKCBwaGV0aW9JRCwgUHJvcGVydHlTdGF0ZVBoYXNlLlVOREVGRVIsIGxpc3RlbmVyICkgKTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICBwaGV0aW9TdGF0ZUVuZ2luZS5zdGF0ZVNldEVtaXR0ZXIuYWRkTGlzdGVuZXIoIHN0YXRlID0+IHtcblxuICAgICAgLy8gUHJvcGVydGllcyBzZXQgdG8gZmluYWwgdmFsdWVzIGFuZCBub3RpZnkgb2YgYW55IHZhbHVlIGNoYW5nZXMuXG4gICAgICB0aGlzLnVuZGVmZXJBbmROb3RpZnlQcm9wZXJ0aWVzKCBuZXcgU2V0KCBPYmplY3Qua2V5cyggc3RhdGUgKSApICk7XG4gICAgfSApO1xuXG4gICAgcGhldGlvU3RhdGVFbmdpbmUuaXNTZXR0aW5nU3RhdGVQcm9wZXJ0eS5sYXp5TGluayggaXNTZXR0aW5nU3RhdGUgPT4ge1xuICAgICAgYXNzZXJ0ICYmICFpc1NldHRpbmdTdGF0ZSAmJiBhc3NlcnQoIHRoaXMucGhhc2VDYWxsYmFja1NldHMuc2l6ZSA9PT0gMCwgJ1BoYXNlQ2FsbGJhY2tzIHNob3VsZCBoYXZlIGFsbCBiZWVuIGFwcGxpZWQnICk7XG4gICAgfSApO1xuXG4gICAgdGhpcy5pbml0aWFsaXplZCA9IHRydWU7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyB2YWxpZGF0ZUluc3RydW1lbnRlZFByb3BlcnR5KCBwcm9wZXJ0eTogUmVhZE9ubHlQcm9wZXJ0eTx1bmtub3duPiApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgVGFuZGVtLlZBTElEQVRJT04gJiYgYXNzZXJ0KCBwcm9wZXJ0eSBpbnN0YW5jZW9mIFJlYWRPbmx5UHJvcGVydHkgJiYgcHJvcGVydHkuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSwgYG11c3QgYmUgYW4gaW5zdHJ1bWVudGVkIFByb3BlcnR5OiAke3Byb3BlcnR5fWAgKTtcbiAgfVxuXG4gIHByaXZhdGUgdmFsaWRhdGVQcm9wZXJ0eVBoYXNlUGFpciggcHJvcGVydHk6IFJlYWRPbmx5UHJvcGVydHk8dW5rbm93bj4sIHBoYXNlOiBQcm9wZXJ0eVN0YXRlUGhhc2UgKTogdm9pZCB7XG4gICAgUHJvcGVydHlTdGF0ZUhhbmRsZXIudmFsaWRhdGVJbnN0cnVtZW50ZWRQcm9wZXJ0eSggcHJvcGVydHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIE1hcFBhaXIgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92ZWQgUHJvcGVydHlTdGF0ZVBoYXNlc1xuICAgKi9cbiAgcHJpdmF0ZSBnZXRNYXBQYWlyRnJvbVBoYXNlcyggYmVmb3JlUGhhc2U6IFByb3BlcnR5U3RhdGVQaGFzZSwgYWZ0ZXJQaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlICk6IE9yZGVyRGVwZW5kZW5jeU1hcFBhaXIge1xuICAgIGNvbnN0IG1hdGNoZWRQYWlycyA9IHRoaXMubWFwUGFpcnMuZmlsdGVyKCBtYXBQYWlyID0+IGJlZm9yZVBoYXNlID09PSBtYXBQYWlyLmJlZm9yZVBoYXNlICYmIGFmdGVyUGhhc2UgPT09IG1hcFBhaXIuYWZ0ZXJQaGFzZSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1hdGNoZWRQYWlycy5sZW5ndGggPT09IDEsICdvbmUgYW5kIG9ubHkgb25lIG1hcCBzaG91bGQgbWF0Y2ggdGhlIHByb3ZpZGVkIHBoYXNlcycgKTtcbiAgICByZXR1cm4gbWF0Y2hlZFBhaXJzWyAwIF07XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgdGhhdCBvbmUgUHJvcGVydHkgbXVzdCBoYXZlIGEgXCJQaGFzZVwiIGFwcGxpZWQgZm9yIFBoRVQtaU8gc3RhdGUgYmVmb3JlIGFub3RoZXIgUHJvcGVydHkncyBQaGFzZS4gQSBQaGFzZVxuICAgKiBpcyBhbiBlbmRpbmcgc3RhdGUgaW4gUGhFVC1pTyBzdGF0ZSBzZXQgd2hlcmUgUHJvcGVydHkgdmFsdWVzIHNvbGlkaWZ5LCBub3RpZmljYXRpb25zIGZvciB2YWx1ZSBjaGFuZ2VzIGFyZSBjYWxsZWQuXG4gICAqIFRoZSBQaEVULWlPIHN0YXRlIGVuZ2luZSB3aWxsIGFsd2F5cyB1bmRlZmVyIGEgUHJvcGVydHkgYmVmb3JlIGl0IG5vdGlmaWVzIGl0cyBsaXN0ZW5lcnMuIFRoaXMgaXMgZm9yIHJlZ2lzdGVyaW5nXG4gICAqIHR3byBkaWZmZXJlbnQgUHJvcGVydGllcy5cbiAgICpcbiAgICogQHBhcmFtIGJlZm9yZVByb3BlcnR5IC0gdGhlIFByb3BlcnR5IHRoYXQgbmVlZHMgdG8gYmUgc2V0IGJlZm9yZSB0aGUgc2Vjb25kOyBtdXN0IGJlIGluc3RydW1lbnRlZCBmb3IgUGhFVC1pT1xuICAgKiBAcGFyYW0gYmVmb3JlUGhhc2VcbiAgICogQHBhcmFtIGFmdGVyUHJvcGVydHkgLSBtdXN0IGJlIGluc3RydW1lbnRlZCBmb3IgUGhFVC1pT1xuICAgKiBAcGFyYW0gYWZ0ZXJQaGFzZVxuICAgKi9cbiAgcHVibGljIHJlZ2lzdGVyUGhldGlvT3JkZXJEZXBlbmRlbmN5KCBiZWZvcmVQcm9wZXJ0eTogUmVhZE9ubHlQcm9wZXJ0eTxJbnRlbnRpb25hbEFueT4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmVmb3JlUGhhc2U6IFByb3BlcnR5U3RhdGVQaGFzZSwgYWZ0ZXJQcm9wZXJ0eTogUmVhZE9ubHlQcm9wZXJ0eTxJbnRlbnRpb25hbEFueT4sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWZ0ZXJQaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlICk6IHZvaWQge1xuICAgIGlmICggVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCApIHtcblxuICAgICAgdGhpcy52YWxpZGF0ZVByb3BlcnR5UGhhc2VQYWlyKCBiZWZvcmVQcm9wZXJ0eSwgYmVmb3JlUGhhc2UgKTtcbiAgICAgIHRoaXMudmFsaWRhdGVQcm9wZXJ0eVBoYXNlUGFpciggYWZ0ZXJQcm9wZXJ0eSwgYWZ0ZXJQaGFzZSApO1xuICAgICAgYXNzZXJ0ICYmIGJlZm9yZVByb3BlcnR5ID09PSBhZnRlclByb3BlcnR5ICYmIGFzc2VydCggYmVmb3JlUGhhc2UgIT09IGFmdGVyUGhhc2UsICdjYW5ub3Qgc2V0IHNhbWUgUHJvcGVydHkgdG8gc2FtZSBwaGFzZScgKTtcblxuICAgICAgY29uc3QgbWFwUGFpciA9IHRoaXMuZ2V0TWFwUGFpckZyb21QaGFzZXMoIGJlZm9yZVBoYXNlLCBhZnRlclBoYXNlICk7XG5cbiAgICAgIG1hcFBhaXIuYWRkT3JkZXJEZXBlbmRlbmN5KCBiZWZvcmVQcm9wZXJ0eS50YW5kZW0ucGhldGlvSUQsIGFmdGVyUHJvcGVydHkudGFuZGVtLnBoZXRpb0lEICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIHtQcm9wZXJ0eX0gcHJvcGVydHkgLSBtdXN0IGJlIGluc3RydW1lbnRlZCBmb3IgUGhFVC1pT1xuICAgKiB7Ym9vbGVhbn0gLSB0cnVlIGlmIFByb3BlcnR5IGlzIGluIGFueSBvcmRlciBkZXBlbmRlbmN5XG4gICAqL1xuICBwcml2YXRlIHByb3BlcnR5SW5Bbk9yZGVyRGVwZW5kZW5jeSggcHJvcGVydHk6IFJlYWRPbmx5UHJvcGVydHk8dW5rbm93bj4gKTogYm9vbGVhbiB7XG4gICAgUHJvcGVydHlTdGF0ZUhhbmRsZXIudmFsaWRhdGVJbnN0cnVtZW50ZWRQcm9wZXJ0eSggcHJvcGVydHkgKTtcbiAgICByZXR1cm4gXy5zb21lKCB0aGlzLm1hcFBhaXJzLCBtYXBQYWlyID0+IG1hcFBhaXIudXNlc1BoZXRpb0lEKCBwcm9wZXJ0eS50YW5kZW0ucGhldGlvSUQgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXJzIGFsbCBvcmRlciBkZXBlbmRlbmNpZXMgZm9yIHRoZSBnaXZlbiBQcm9wZXJ0eVxuICAgKiB7UmVhZE9ubHlQcm9wZXJ0eX0gcHJvcGVydHkgLSBtdXN0IGJlIGluc3RydW1lbnRlZCBmb3IgUGhFVC1pT1xuICAgKi9cbiAgcHVibGljIHVucmVnaXN0ZXJPcmRlckRlcGVuZGVuY2llc0ZvclByb3BlcnR5KCBwcm9wZXJ0eTogUmVhZE9ubHlQcm9wZXJ0eTxJbnRlbnRpb25hbEFueT4gKTogdm9pZCB7XG4gICAgaWYgKCBUYW5kZW0uUEhFVF9JT19FTkFCTEVEICkge1xuICAgICAgUHJvcGVydHlTdGF0ZUhhbmRsZXIudmFsaWRhdGVJbnN0cnVtZW50ZWRQcm9wZXJ0eSggcHJvcGVydHkgKTtcblxuICAgICAgLy8gQmUgZ3JhY2VmdWwgaWYgZ2l2ZW4gYSBQcm9wZXJ0eSB0aGF0IGlzIG5vdCByZWdpc3RlcmVkIGluIGFuIG9yZGVyIGRlcGVuZGVuY3kuXG4gICAgICBpZiAoIHRoaXMucHJvcGVydHlJbkFuT3JkZXJEZXBlbmRlbmN5KCBwcm9wZXJ0eSApICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLnByb3BlcnR5SW5Bbk9yZGVyRGVwZW5kZW5jeSggcHJvcGVydHkgKSwgJ1Byb3BlcnR5IG11c3QgYmUgcmVnaXN0ZXJlZCBpbiBhbiBvcmRlciBkZXBlbmRlbmN5IHRvIGJlIHVucmVnaXN0ZXJlZCcgKTtcblxuICAgICAgICB0aGlzLm1hcFBhaXJzLmZvckVhY2goIG1hcFBhaXIgPT4gbWFwUGFpci51bnJlZ2lzdGVyT3JkZXJEZXBlbmRlbmNpZXNGb3JQcm9wZXJ0eSggcHJvcGVydHkgKSApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHaXZlbiByZWdpc3RlcmVkIFByb3BlcnR5IFBoYXNlIG9yZGVyIGRlcGVuZGVuY2llcywgdW5kZWZlciBhbGwgQVhPTi9Qcm9wZXJ0eSBQaEVULWlPIGVsZW1lbnRzIHRvIHRha2UgdGhlaXJcbiAgICogY29ycmVjdCB2YWx1ZXMgYW5kIGhhdmUgZWFjaCBub3RpZnkgdGhlaXIgbGlzdGVuZXJzLlxuICAgKiB7U2V0LjxzdHJpbmc+fSBwaGV0aW9JRHNJblN0YXRlIC0gc2V0IG9mIHBoZXRpb0lEcyB0aGF0IHdlcmUgc2V0IGluIHN0YXRlXG4gICAqL1xuICBwcml2YXRlIHVuZGVmZXJBbmROb3RpZnlQcm9wZXJ0aWVzKCBwaGV0aW9JRHNJblN0YXRlOiBTZXQ8c3RyaW5nPiApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmluaXRpYWxpemVkLCAnbXVzdCBiZSBpbml0aWFsaXplZCBiZWZvcmUgZ2V0dGluZyBjYWxsZWQnICk7XG5cbiAgICAvLyB7T2JqZWN0LjxzdHJpbmcsYm9vbGVhbj59IC0gdHJ1ZSBpZiBhIHBoZXRpb0lEICsgcGhhc2UgcGFpciBoYXMgYmVlbiBhcHBsaWVkLCBrZXlzIGFyZSB0aGUgY29tYmluYXRpb24gb2ZcbiAgICAvLyBwaGV0aW9JRHMgYW5kIHBoYXNlLCBzZWUgUGhhc2VDYWxsYmFjay5nZXRUZXJtKClcbiAgICBjb25zdCBjb21wbGV0ZWRQaGFzZXMgPSB7fTtcblxuICAgIC8vIHRvIHN1cHBvcnQgZmFpbGluZyBvdXQgaW5zdGVhZCBvZiBpbmZpbml0ZSBsb29wXG4gICAgbGV0IG51bWJlck9mSXRlcmF0aW9ucyA9IDA7XG5cbiAgICAvLyBOb3JtYWxseSB3ZSB3b3VsZCBsaWtlIHRvIHVuZGVmZXIgdGhpbmdzIGJlZm9yZSBub3RpZnksIGJ1dCBtYWtlIHN1cmUgdGhpcyBpcyBkb25lIGluIGFjY29yZGFuY2Ugd2l0aCB0aGUgb3JkZXIgZGVwZW5kZW5jaWVzLlxuICAgIHdoaWxlICggdGhpcy5waGFzZUNhbGxiYWNrU2V0cy5zaXplID4gMCApIHtcbiAgICAgIG51bWJlck9mSXRlcmF0aW9ucysrO1xuXG4gICAgICAvLyBFcnJvciBjYXNlIGxvZ2dpbmdcbiAgICAgIGlmICggbnVtYmVyT2ZJdGVyYXRpb25zID4gNTAwMCApIHtcbiAgICAgICAgdGhpcy5lcnJvckluVW5kZWZlckFuZE5vdGlmeVN0ZXAoIGNvbXBsZXRlZFBoYXNlcyApO1xuICAgICAgfVxuXG4gICAgICAvLyBUcnkgdG8gdW5kZWZlciBhcyBtdWNoIGFzIHBvc3NpYmxlIGJlZm9yZSBub3RpZnlpbmdcbiAgICAgIHRoaXMuYXR0ZW1wdFRvQXBwbHlQaGFzZXMoIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSLCBjb21wbGV0ZWRQaGFzZXMsIHBoZXRpb0lEc0luU3RhdGUgKTtcbiAgICAgIHRoaXMuYXR0ZW1wdFRvQXBwbHlQaGFzZXMoIFByb3BlcnR5U3RhdGVQaGFzZS5OT1RJRlksIGNvbXBsZXRlZFBoYXNlcywgcGhldGlvSURzSW5TdGF0ZSApO1xuICAgIH1cbiAgfVxuXG5cbiAgcHJpdmF0ZSBlcnJvckluVW5kZWZlckFuZE5vdGlmeVN0ZXAoIGNvbXBsZXRlZFBoYXNlczogUmVjb3JkPHN0cmluZywgYm9vbGVhbj4gKTogdm9pZCB7XG5cbiAgICAvLyBjb21iaW5lIHBoZXRpb0lEIGFuZCBQaGFzZSBpbnRvIGEgc2luZ2xlIHN0cmluZyB0byBrZWVwIHRoaXMgcHJvY2VzcyBzcGVjaWZpYy5cbiAgICBjb25zdCBzdGlsbFRvRG9JRFBoYXNlUGFpcnM6IEFycmF5PHN0cmluZz4gPSBbXTtcbiAgICB0aGlzLnBoYXNlQ2FsbGJhY2tTZXRzLmZvckVhY2goIHBoYXNlQ2FsbGJhY2sgPT4gc3RpbGxUb0RvSURQaGFzZVBhaXJzLnB1c2goIHBoYXNlQ2FsbGJhY2suZ2V0VGVybSgpICkgKTtcblxuICAgIGNvbnN0IHJlbGV2YW50T3JkZXJEZXBlbmRlbmNpZXM6IEFycmF5PE9yZGVyRGVwZW5kZW5jeT4gPSBbXTtcblxuICAgIHRoaXMubWFwUGFpcnMuZm9yRWFjaCggbWFwUGFpciA9PiB7XG4gICAgICBjb25zdCBiZWZvcmVNYXAgPSBtYXBQYWlyLmJlZm9yZU1hcDtcbiAgICAgIGZvciAoIGNvbnN0IFsgYmVmb3JlUGhldGlvSUQsIGFmdGVyUGhldGlvSURzIF0gb2YgYmVmb3JlTWFwICkge1xuICAgICAgICBhZnRlclBoZXRpb0lEcy5mb3JFYWNoKCBhZnRlclBoZXRpb0lEID0+IHtcbiAgICAgICAgICBjb25zdCBiZWZvcmVUZXJtID0gYmVmb3JlUGhldGlvSUQgKyBiZWZvcmVNYXAuYmVmb3JlUGhhc2U7XG4gICAgICAgICAgY29uc3QgYWZ0ZXJUZXJtID0gYWZ0ZXJQaGV0aW9JRCArIGJlZm9yZU1hcC5hZnRlclBoYXNlO1xuICAgICAgICAgIGlmICggc3RpbGxUb0RvSURQaGFzZVBhaXJzLmluY2x1ZGVzKCBiZWZvcmVUZXJtICkgfHwgc3RpbGxUb0RvSURQaGFzZVBhaXJzLmluY2x1ZGVzKCBhZnRlclRlcm0gKSApIHtcbiAgICAgICAgICAgIHJlbGV2YW50T3JkZXJEZXBlbmRlbmNpZXMucHVzaCgge1xuICAgICAgICAgICAgICBiZWZvcmVUZXJtOiBiZWZvcmVUZXJtLFxuICAgICAgICAgICAgICBhZnRlclRlcm06IGFmdGVyVGVybVxuICAgICAgICAgICAgfSApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSApO1xuICAgICAgfVxuICAgIH0gKTtcblxuICAgIGxldCBzdHJpbmcgPSAnJztcbiAgICBjb25zb2xlLmxvZyggJ3N0aWxsIHRvIGJlIHVuZGVmZXJyZWQnLCB0aGlzLnBoYXNlQ2FsbGJhY2tTZXRzLnVuZGVmZXJTZXQgKTtcbiAgICBjb25zb2xlLmxvZyggJ3N0aWxsIHRvIGJlIG5vdGlmaWVkJywgdGhpcy5waGFzZUNhbGxiYWNrU2V0cy5ub3RpZnlTZXQgKTtcbiAgICBjb25zb2xlLmxvZyggJ29yZGVyIGRlcGVuZGVuY2llcyB0aGF0IGFwcGx5IHRvIHRoZSBzdGlsbCB0b2RvcycsIHJlbGV2YW50T3JkZXJEZXBlbmRlbmNpZXMgKTtcbiAgICByZWxldmFudE9yZGVyRGVwZW5kZW5jaWVzLmZvckVhY2goIG9yZGVyRGVwZW5kZW5jeSA9PiB7XG4gICAgICBzdHJpbmcgKz0gYCR7b3JkZXJEZXBlbmRlbmN5LmJlZm9yZVRlcm19XFx0JHtvcmRlckRlcGVuZGVuY3kuYWZ0ZXJUZXJtfVxcbmA7XG4gICAgfSApO1xuICAgIGNvbnNvbGUubG9nKCAnXFxuXFxuaW4gZ3JhcGhhYmxlIGZvcm06XFxuXFxuJywgc3RyaW5nICk7XG5cbiAgICBjb25zdCBhc3NlcnRNZXNzYWdlID0gJ0ltcG9zc2libGUgc2V0IHN0YXRlOiBmcm9tIHVuZGVmZXJBbmROb3RpZnlQcm9wZXJ0aWVzOyBvcmRlcmluZyBjb25zdHJhaW50cyBjYW5ub3QgYmUgc2F0aXNmaWVkJztcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmYWxzZSwgYXNzZXJ0TWVzc2FnZSApO1xuXG4gICAgLy8gV2UgbXVzdCBleGl0IGhlcmUgZXZlbiBpZiBhc3NlcnRpb25zIGFyZSBkaXNhYmxlZCBzbyBpdCB3b3VsZG4ndCBsb2NrIHVwIHRoZSBicm93c2VyLlxuICAgIGlmICggIWFzc2VydCApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciggYXNzZXJ0TWVzc2FnZSApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBPbmx5IGZvciBUZXN0aW5nIVxuICAgKiBHZXQgdGhlIG51bWJlciBvZiBvcmRlciBkZXBlbmRlbmNpZXMgcmVnaXN0ZXJlZCBpbiB0aGlzIGNsYXNzXG4gICAqXG4gICAqL1xuICBwdWJsaWMgZ2V0TnVtYmVyT2ZPcmRlckRlcGVuZGVuY2llcygpOiBudW1iZXIge1xuICAgIGxldCBjb3VudCA9IDA7XG4gICAgdGhpcy5tYXBQYWlycy5mb3JFYWNoKCBtYXBQYWlyID0+IHtcbiAgICAgIG1hcFBhaXIuYWZ0ZXJNYXAuZm9yRWFjaCggdmFsdWVTZXQgPT4geyBjb3VudCArPSB2YWx1ZVNldC5zaXplOyB9ICk7XG4gICAgfSApO1xuICAgIHJldHVybiBjb3VudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHbyB0aHJvdWdoIGFsbCBwaGFzZXMgc3RpbGwgdG8gYmUgYXBwbGllZCwgYW5kIGFwcGx5IHRoZW0gaWYgdGhlIG9yZGVyIGRlcGVuZGVuY2llcyBhbGxvdyBpdC4gT25seSBhcHBseSBmb3IgdGhlXG4gICAqIHBhcnRpY3VsYXIgcGhhc2UgcHJvdmlkZWQuIEluIGdlbmVyYWwgVU5ERUZFUiBtdXN0IG9jY3VyIGJlZm9yZSB0aGUgc2FtZSBwaGV0aW9JRCBnZXRzIE5PVElGWS5cbiAgICpcbiAgICogQHBhcmFtIHBoYXNlIC0gb25seSBhcHBseSBQaGFzZUNhbGxiYWNrcyBmb3IgdGhpcyBwYXJ0aWN1bGFyIFByb3BlcnR5U3RhdGVQaGFzZVxuICAgKiBAcGFyYW0gY29tcGxldGVkUGhhc2VzIC0gbWFwIHRoYXQga2VlcHMgdHJhY2sgb2YgY29tcGxldGVkIHBoYXNlc1xuICAgKiBAcGFyYW0gcGhldGlvSURzSW5TdGF0ZSAtIHNldCBvZiBwaGV0aW9JRHMgdGhhdCB3ZXJlIHNldCBpbiBzdGF0ZVxuICAgKi9cbiAgcHJpdmF0ZSBhdHRlbXB0VG9BcHBseVBoYXNlcyggcGhhc2U6IFByb3BlcnR5U3RhdGVQaGFzZSwgY29tcGxldGVkUGhhc2VzOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiwgcGhldGlvSURzSW5TdGF0ZTogU2V0PHN0cmluZz4gKTogdm9pZCB7XG5cbiAgICBjb25zdCBwaGFzZUNhbGxiYWNrU2V0ID0gdGhpcy5waGFzZUNhbGxiYWNrU2V0cy5nZXRTZXRGcm9tUGhhc2UoIHBoYXNlICk7XG5cbiAgICBmb3IgKCBjb25zdCBwaGFzZUNhbGxiYWNrVG9Qb3RlbnRpYWxseUFwcGx5IG9mIHBoYXNlQ2FsbGJhY2tTZXQgKSB7XG5cbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHBoYXNlQ2FsbGJhY2tUb1BvdGVudGlhbGx5QXBwbHkucGhhc2UgPT09IHBoYXNlLCAncGhhc2VDYWxsYmFja1NldCBzaG91bGQgb25seSBpbmNsdWRlIGNhbGxiYWNrcyBmb3IgcHJvdmlkZWQgcGhhc2UnICk7XG5cbiAgICAgIC8vIG9ubHkgdHJ5IHRvIGNoZWNrIHRoZSBvcmRlciBkZXBlbmRlbmNpZXMgdG8gc2VlIGlmIHRoaXMgaGFzIHRvIGJlIGFmdGVyIHNvbWV0aGluZyB0aGF0IGlzIGluY29tcGxldGUuXG4gICAgICBpZiAoIHRoaXMucGhldGlvSURDYW5BcHBseVBoYXNlKCBwaGFzZUNhbGxiYWNrVG9Qb3RlbnRpYWxseUFwcGx5LnBoZXRpb0lELCBwaGFzZSwgY29tcGxldGVkUGhhc2VzLCBwaGV0aW9JRHNJblN0YXRlICkgKSB7XG5cbiAgICAgICAgLy8gRmlyZSB0aGUgbGlzdGVuZXI7XG4gICAgICAgIHBoYXNlQ2FsbGJhY2tUb1BvdGVudGlhbGx5QXBwbHkubGlzdGVuZXIoKTtcblxuICAgICAgICAvLyBSZW1vdmUgaXQgZnJvbSB0aGUgbWFzdGVyIGxpc3Qgc28gdGhhdCBpdCBkb2Vzbid0IGdldCBjYWxsZWQgYWdhaW4uXG4gICAgICAgIHBoYXNlQ2FsbGJhY2tTZXQuZGVsZXRlKCBwaGFzZUNhbGxiYWNrVG9Qb3RlbnRpYWxseUFwcGx5ICk7XG5cbiAgICAgICAgLy8gS2VlcCB0cmFjayBvZiBhbGwgY29tcGxldGVkIFBoYXNlQ2FsbGJhY2tzXG4gICAgICAgIGNvbXBsZXRlZFBoYXNlc1sgcGhhc2VDYWxsYmFja1RvUG90ZW50aWFsbHlBcHBseS5nZXRUZXJtKCkgXSA9IHRydWU7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBwaGV0aW9JRCAtIHRoaW5rIG9mIHRoaXMgYXMgdGhlIFwiYWZ0ZXJQaGV0aW9JRFwiIHNpbmNlIHRoZXJlIG1heSBiZSBzb21lIHBoYXNlcyB0aGF0IG5lZWQgdG8gYmUgYXBwbGllZCBiZWZvcmUgaXQgaGFzIHRoaXMgcGhhc2UgZG9uZS5cbiAgICogQHBhcmFtIHBoYXNlXG4gICAqIEBwYXJhbSBjb21wbGV0ZWRQaGFzZXMgLSBtYXAgdGhhdCBrZWVwcyB0cmFjayBvZiBjb21wbGV0ZWQgcGhhc2VzXG4gICAqIEBwYXJhbSBwaGV0aW9JRHNJblN0YXRlIC0gc2V0IG9mIHBoZXRpb0lEcyB0aGF0IHdlcmUgc2V0IGluIHN0YXRlXG4gICAqIEBwYXJhbSAtIGlmIHRoZSBwcm92aWRlZCBwaGFzZSBjYW4gYmUgYXBwbGllZCBnaXZlbiB0aGUgZGVwZW5kZW5jeSBvcmRlciBkZXBlbmRlbmNpZXMgb2YgdGhlIHN0YXRlIGVuZ2luZS5cbiAgICovXG4gIHByaXZhdGUgcGhldGlvSURDYW5BcHBseVBoYXNlKCBwaGV0aW9JRDogc3RyaW5nLCBwaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlLCBjb21wbGV0ZWRQaGFzZXM6IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+LCBwaGV0aW9JRHNJblN0YXRlOiBTZXQ8c3RyaW5nPiApOiBib29sZWFuIHtcblxuICAgIC8vIFVuZGVmZXIgbXVzdCBoYXBwZW4gYmVmb3JlIG5vdGlmeVxuICAgIGlmICggcGhhc2UgPT09IFByb3BlcnR5U3RhdGVQaGFzZS5OT1RJRlkgJiYgIWNvbXBsZXRlZFBoYXNlc1sgcGhldGlvSUQgKyBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiBdICkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEdldCBhIGxpc3Qgb2YgdGhlIG1hcHMgZm9yIHRoaXMgcGhhc2UgYmVpbmcgYXBwbGllcy5cbiAgICBjb25zdCBtYXBzVG9DaGVjazogQXJyYXk8UGhhc2VNYXA+ID0gW107XG4gICAgdGhpcy5tYXBQYWlycy5mb3JFYWNoKCBtYXBQYWlyID0+IHtcbiAgICAgIGlmICggbWFwUGFpci5hZnRlclBoYXNlID09PSBwaGFzZSApIHtcblxuICAgICAgICAvLyBVc2UgdGhlIFwiYWZ0ZXJNYXBcIiBiZWNhdXNlIGJlbG93IGxvb2tzIHVwIHdoYXQgbmVlZHMgdG8gY29tZSBiZWZvcmUuXG4gICAgICAgIG1hcHNUb0NoZWNrLnB1c2goIG1hcFBhaXIuYWZ0ZXJNYXAgKTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICAvLyBPKDIpXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbWFwc1RvQ2hlY2subGVuZ3RoOyBpKysgKSB7XG4gICAgICBjb25zdCBtYXBUb0NoZWNrID0gbWFwc1RvQ2hlY2tbIGkgXTtcbiAgICAgIGlmICggIW1hcFRvQ2hlY2suaGFzKCBwaGV0aW9JRCApICkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHNldE9mVGhpbmdzVGhhdFNob3VsZENvbWVGaXJzdCA9IG1hcFRvQ2hlY2suZ2V0KCBwaGV0aW9JRCApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggc2V0T2ZUaGluZ3NUaGF0U2hvdWxkQ29tZUZpcnN0LCAnbXVzdCBoYXZlIHRoaXMgc2V0JyApO1xuXG4gICAgICAvLyBPKEspIHdoZXJlIEsgaXMgdGhlIG51bWJlciBvZiBlbGVtZW50cyB0aGF0IHNob3VsZCBjb21lIGJlZm9yZSBQcm9wZXJ0eSBYXG4gICAgICBmb3IgKCBjb25zdCBiZWZvcmVQaGV0aW9JRCBvZiBzZXRPZlRoaW5nc1RoYXRTaG91bGRDb21lRmlyc3QhICkge1xuXG4gICAgICAgIC8vIGNoZWNrIGlmIHRoZSBiZWZvcmUgcGhhc2UgZm9yIHRoaXMgb3JkZXIgZGVwZW5kZW5jeSBoYXMgYWxyZWFkeSBiZWVuIGNvbXBsZXRlZFxuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB3ZSBvbmx5IGNhcmUgYWJvdXQgZWxlbWVudHMgdGhhdCB3ZXJlIGFjdHVhbGx5IHNldCBkdXJpbmcgdGhpcyBzdGF0ZSBzZXRcbiAgICAgICAgaWYgKCAhY29tcGxldGVkUGhhc2VzWyBiZWZvcmVQaGV0aW9JRCArIG1hcFRvQ2hlY2suYmVmb3JlUGhhc2UgXSAmJlxuICAgICAgICAgICAgIHBoZXRpb0lEc0luU3RhdGUuaGFzKCBiZWZvcmVQaGV0aW9JRCApICYmIHBoZXRpb0lEc0luU3RhdGUuaGFzKCBwaGV0aW9JRCApICkge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG4vLyBQT0pTTyBmb3IgYSBjYWxsYmFjayBmb3IgYSBzcGVjaWZpYyBQaGFzZSBpbiBhIFByb3BlcnR5J3Mgc3RhdGUgc2V0IGxpZmVjeWNsZS4gU2VlIHVuZGVmZXJBbmROb3RpZnlQcm9wZXJ0aWVzKClcbmNsYXNzIFBoYXNlQ2FsbGJhY2sge1xuICBwdWJsaWMgY29uc3RydWN0b3IoXG4gICAgcHVibGljIHJlYWRvbmx5IHBoZXRpb0lEOiBzdHJpbmcsXG4gICAgcHVibGljIHJlYWRvbmx5IHBoYXNlOiBQcm9wZXJ0eVN0YXRlUGhhc2UsXG4gICAgcHVibGljIHJlYWRvbmx5IGxpc3RlbmVyOiAoICgpID0+IHZvaWQgKSA9IF8ubm9vcCApIHtcbiAgfVxuXG4gIC8qKlxuICAgKiB7c3RyaW5nfSAtIHVuaXF1ZSB0ZXJtIGZvciB0aGUgaWQvcGhhc2UgcGFpclxuICAgKi9cbiAgcHVibGljIGdldFRlcm0oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5waGV0aW9JRCArIHRoaXMucGhhc2U7XG4gIH1cbn1cblxuY2xhc3MgT3JkZXJEZXBlbmRlbmN5TWFwUGFpciB7XG5cbiAgcHVibGljIHJlYWRvbmx5IGJlZm9yZU1hcDogUGhhc2VNYXA7XG4gIHB1YmxpYyByZWFkb25seSBhZnRlck1hcDogUGhhc2VNYXA7XG4gIHB1YmxpYyByZWFkb25seSBiZWZvcmVQaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlO1xuICBwdWJsaWMgcmVhZG9ubHkgYWZ0ZXJQaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggYmVmb3JlUGhhc2U6IFByb3BlcnR5U3RhdGVQaGFzZSwgYWZ0ZXJQaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlICkge1xuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciwgaXQgaXMgZWFzaWVzdCB0byBmdWRnZSBoZXJlIHNpbmNlIHdlIGFyZSBhZGRpbmcgdGhlIFBoYXNlTWFwIHByb3BlcnRpZXMganVzdCBiZWxvdyBoZXJlLlxuICAgIHRoaXMuYmVmb3JlTWFwID0gbmV3IE1hcCgpO1xuICAgIHRoaXMuYmVmb3JlTWFwLmJlZm9yZVBoYXNlID0gYmVmb3JlUGhhc2U7XG4gICAgdGhpcy5iZWZvcmVNYXAuYWZ0ZXJQaGFzZSA9IGFmdGVyUGhhc2U7XG5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yLCBpdCBpcyBlYXNpZXN0IHRvIGZ1ZGdlIGhlcmUgc2luY2Ugd2UgYXJlIGFkZGluZyB0aGUgUGhhc2VNYXAgcHJvcGVydGllcyBqdXN0IGJlbG93IGhlcmUuXG4gICAgdGhpcy5hZnRlck1hcCA9IG5ldyBNYXAoKTtcbiAgICB0aGlzLmFmdGVyTWFwLmJlZm9yZVBoYXNlID0gYmVmb3JlUGhhc2U7XG4gICAgdGhpcy5hZnRlck1hcC5hZnRlclBoYXNlID0gYWZ0ZXJQaGFzZTtcblxuICAgIHRoaXMuYmVmb3JlTWFwLm90aGVyTWFwID0gdGhpcy5hZnRlck1hcDtcbiAgICB0aGlzLmFmdGVyTWFwLm90aGVyTWFwID0gdGhpcy5iZWZvcmVNYXA7XG5cbiAgICB0aGlzLmJlZm9yZVBoYXNlID0gYmVmb3JlUGhhc2U7XG4gICAgdGhpcy5hZnRlclBoYXNlID0gYWZ0ZXJQaGFzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhbiBvcmRlciBkZXBlbmRlbmN5IGJldHdlZW4gdHdvIHBoZXRpb0lEcy4gVGhpcyB3aWxsIGFkZCBkYXRhIHRvIG1hcHMgaW4gXCJib3RoIGRpcmVjdGlvblwiLiBJZiBhY2Nlc3NpbmdcbiAgICogd2l0aCBqdXN0IHRoZSBiZWZvcmVQaGV0aW9JRCwgb3Igd2l0aCB0aGUgYWZ0ZXJQaGV0aW9JRC5cbiAgICovXG4gIHB1YmxpYyBhZGRPcmRlckRlcGVuZGVuY3koIGJlZm9yZVBoZXRpb0lEOiBzdHJpbmcsIGFmdGVyUGhldGlvSUQ6IHN0cmluZyApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmJlZm9yZU1hcC5oYXMoIGJlZm9yZVBoZXRpb0lEICkgKSB7XG4gICAgICB0aGlzLmJlZm9yZU1hcC5zZXQoIGJlZm9yZVBoZXRpb0lELCBuZXcgU2V0PHN0cmluZz4oKSApO1xuICAgIH1cbiAgICB0aGlzLmJlZm9yZU1hcC5nZXQoIGJlZm9yZVBoZXRpb0lEICkhLmFkZCggYWZ0ZXJQaGV0aW9JRCApO1xuXG4gICAgaWYgKCAhdGhpcy5hZnRlck1hcC5oYXMoIGFmdGVyUGhldGlvSUQgKSApIHtcbiAgICAgIHRoaXMuYWZ0ZXJNYXAuc2V0KCBhZnRlclBoZXRpb0lELCBuZXcgU2V0KCkgKTtcbiAgICB9XG4gICAgdGhpcy5hZnRlck1hcC5nZXQoIGFmdGVyUGhldGlvSUQgKSEuYWRkKCBiZWZvcmVQaGV0aW9JRCApO1xuICB9XG5cbiAgLyoqXG4gICAqIFVucmVnaXN0ZXIgYWxsIG9yZGVyIGRlcGVuZGVuY2llcyBmb3IgdGhlIHByb3ZpZGVkIFByb3BlcnR5XG4gICAqL1xuICBwdWJsaWMgdW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkoIHByb3BlcnR5OiBSZWFkT25seVByb3BlcnR5PHVua25vd24+ICk6IHZvaWQge1xuICAgIGNvbnN0IHBoZXRpb0lEVG9SZW1vdmUgPSBwcm9wZXJ0eS50YW5kZW0ucGhldGlvSUQ7XG5cbiAgICBbIHRoaXMuYmVmb3JlTWFwLCB0aGlzLmFmdGVyTWFwIF0uZm9yRWFjaCggbWFwID0+IHtcbiAgICAgIG1hcC5oYXMoIHBoZXRpb0lEVG9SZW1vdmUgKSAmJiBtYXAuZ2V0KCBwaGV0aW9JRFRvUmVtb3ZlICkhLmZvckVhY2goIHBoZXRpb0lEID0+IHtcbiAgICAgICAgY29uc3Qgc2V0T2ZBZnRlck1hcElEcyA9IG1hcC5vdGhlck1hcC5nZXQoIHBoZXRpb0lEICk7XG4gICAgICAgIHNldE9mQWZ0ZXJNYXBJRHMgJiYgc2V0T2ZBZnRlck1hcElEcy5kZWxldGUoIHBoZXRpb0lEVG9SZW1vdmUgKTtcblxuICAgICAgICAvLyBDbGVhciBvdXQgZW1wdHkgZW50cmllcyB0byBhdm9pZCBoYXZpbmcgbG90cyBvZiBlbXB0eSBTZXRzIHNpdHRpbmcgYXJvdW5kXG4gICAgICAgIHNldE9mQWZ0ZXJNYXBJRHMhLnNpemUgPT09IDAgJiYgbWFwLm90aGVyTWFwLmRlbGV0ZSggcGhldGlvSUQgKTtcbiAgICAgIH0gKTtcbiAgICAgIG1hcC5kZWxldGUoIHBoZXRpb0lEVG9SZW1vdmUgKTtcbiAgICB9ICk7XG5cbiAgICAvLyBMb29rIHRocm91Z2ggZXZlcnkgZGVwZW5kZW5jeSBhbmQgbWFrZSBzdXJlIHRoZSBwaGV0aW9JRCB0byByZW1vdmUgaGFzIGJlZW4gY29tcGxldGVseSByZW1vdmVkLlxuICAgIGFzc2VydFNsb3cgJiYgWyB0aGlzLmJlZm9yZU1hcCwgdGhpcy5hZnRlck1hcCBdLmZvckVhY2goIG1hcCA9PiB7XG4gICAgICBtYXAuZm9yRWFjaCggKCB2YWx1ZVBoZXRpb0lEcywga2V5ICkgPT4ge1xuICAgICAgICBhc3NlcnRTbG93ICYmIGFzc2VydFNsb3coIGtleSAhPT0gcGhldGlvSURUb1JlbW92ZSwgJ3Nob3VsZCBub3QgYmUgYSBrZXknICk7XG4gICAgICAgIGFzc2VydFNsb3cgJiYgYXNzZXJ0U2xvdyggIXZhbHVlUGhldGlvSURzLmhhcyggcGhldGlvSURUb1JlbW92ZSApLCAnc2hvdWxkIG5vdCBiZSBpbiBhIHZhbHVlIGxpc3QnICk7XG4gICAgICB9ICk7XG4gICAgfSApO1xuICB9XG5cbiAgcHVibGljIHVzZXNQaGV0aW9JRCggcGhldGlvSUQ6IHN0cmluZyApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5iZWZvcmVNYXAuaGFzKCBwaGV0aW9JRCApIHx8IHRoaXMuYWZ0ZXJNYXAuaGFzKCBwaGV0aW9JRCApO1xuICB9XG59XG5cbi8vIFBPSlNPIHRvIGtlZXAgdHJhY2sgb2YgUGhhc2VDYWxsYmFja3Mgd2hpbGUgcHJvdmlkaW5nIE8oMSkgbG9va3VwIHRpbWUgYmVjYXVzZSBpdCBpcyBidWlsdCBvbiBTZXRcbmNsYXNzIFBoYXNlQ2FsbGJhY2tTZXRzIHtcbiAgcHVibGljIHJlYWRvbmx5IHVuZGVmZXJTZXQgPSBuZXcgU2V0PFBoYXNlQ2FsbGJhY2s+KCk7XG4gIHB1YmxpYyByZWFkb25seSBub3RpZnlTZXQgPSBuZXcgU2V0PFBoYXNlQ2FsbGJhY2s+KCk7XG5cbiAgcHVibGljIGdldCBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMudW5kZWZlclNldC5zaXplICsgdGhpcy5ub3RpZnlTZXQuc2l6ZTtcbiAgfVxuXG4gIHB1YmxpYyBmb3JFYWNoKCBjYWxsYmFjazogKCBwaGFzZUNhbGxiYWNrOiBQaGFzZUNhbGxiYWNrICkgPT4gbnVtYmVyICk6IHZvaWQge1xuICAgIHRoaXMudW5kZWZlclNldC5mb3JFYWNoKCBjYWxsYmFjayApO1xuICAgIHRoaXMubm90aWZ5U2V0LmZvckVhY2goIGNhbGxiYWNrICk7XG4gIH1cblxuICBwdWJsaWMgYWRkVW5kZWZlclBoYXNlQ2FsbGJhY2soIHBoYXNlQ2FsbGJhY2s6IFBoYXNlQ2FsbGJhY2sgKTogdm9pZCB7XG4gICAgdGhpcy51bmRlZmVyU2V0LmFkZCggcGhhc2VDYWxsYmFjayApO1xuICB9XG5cbiAgcHVibGljIGFkZE5vdGlmeVBoYXNlQ2FsbGJhY2soIHBoYXNlQ2FsbGJhY2s6IFBoYXNlQ2FsbGJhY2sgKTogdm9pZCB7XG4gICAgdGhpcy5ub3RpZnlTZXQuYWRkKCBwaGFzZUNhbGxiYWNrICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0U2V0RnJvbVBoYXNlKCBwaGFzZTogUHJvcGVydHlTdGF0ZVBoYXNlICk6IFNldDxQaGFzZUNhbGxiYWNrPiB7XG4gICAgcmV0dXJuIHBoYXNlID09PSBQcm9wZXJ0eVN0YXRlUGhhc2UuTk9USUZZID8gdGhpcy5ub3RpZnlTZXQgOiB0aGlzLnVuZGVmZXJTZXQ7XG4gIH1cbn1cblxuYXhvbi5yZWdpc3RlciggJ1Byb3BlcnR5U3RhdGVIYW5kbGVyJywgUHJvcGVydHlTdGF0ZUhhbmRsZXIgKTtcbmV4cG9ydCBkZWZhdWx0IFByb3BlcnR5U3RhdGVIYW5kbGVyOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxPQUFPQSxNQUFNLE1BQU0sMkJBQTJCO0FBRTlDLE9BQU9DLElBQUksTUFBTSxXQUFXO0FBQzVCLE9BQU9DLGtCQUFrQixNQUFNLHlCQUF5QjtBQUN4RCxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFhcEQsTUFBTUMsb0JBQW9CLENBQUM7RUFPakJDLFdBQVcsR0FBRyxLQUFLO0VBRXBCQyxXQUFXQSxDQUFBLEVBQUc7SUFFbkI7SUFDQTtJQUNBO0lBQ0EsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxJQUFJQyxpQkFBaUIsRUFBRTs7SUFFaEQ7SUFDQTtJQUNBLElBQUksQ0FBQ0MsMkJBQTJCLEdBQUcsSUFBSUMsc0JBQXNCLENBQUVSLGtCQUFrQixDQUFDUyxPQUFPLEVBQUVULGtCQUFrQixDQUFDUyxPQUFPLENBQUU7SUFDdkgsSUFBSSxDQUFDQywwQkFBMEIsR0FBRyxJQUFJRixzQkFBc0IsQ0FBRVIsa0JBQWtCLENB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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/propertyStateHandlerSingleton.js
// Copyright 2020-2022, University of Colorado Boulder

/**
 * Singleton responsible for AXON/Property specific state logic. Use this global for the project to have a single
 * place to tap into the PhetioStateEngine, as well as a single point to register any order dependencies that Properties
 * have between each other when setting their state and applying their values/notifying.
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */



const propertyStateHandlerSingleton = new js_PropertyStateHandler();
js_axon.register('propertyStateHandlerSingleton', propertyStateHandlerSingleton);
/* harmony default export */ const js_propertyStateHandlerSingleton = (propertyStateHandlerSingleton);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiUHJvcGVydHlTdGF0ZUhhbmRsZXIiLCJwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbiIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsicHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogU2luZ2xldG9uIHJlc3BvbnNpYmxlIGZvciBBWE9OL1Byb3BlcnR5IHNwZWNpZmljIHN0YXRlIGxvZ2ljLiBVc2UgdGhpcyBnbG9iYWwgZm9yIHRoZSBwcm9qZWN0IHRvIGhhdmUgYSBzaW5nbGVcbiAqIHBsYWNlIHRvIHRhcCBpbnRvIHRoZSBQaGV0aW9TdGF0ZUVuZ2luZSwgYXMgd2VsbCBhcyBhIHNpbmdsZSBwb2ludCB0byByZWdpc3RlciBhbnkgb3JkZXIgZGVwZW5kZW5jaWVzIHRoYXQgUHJvcGVydGllc1xuICogaGF2ZSBiZXR3ZWVuIGVhY2ggb3RoZXIgd2hlbiBzZXR0aW5nIHRoZWlyIHN0YXRlIGFuZCBhcHBseWluZyB0aGVpciB2YWx1ZXMvbm90aWZ5aW5nLlxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgUHJvcGVydHlTdGF0ZUhhbmRsZXIgZnJvbSAnLi9Qcm9wZXJ0eVN0YXRlSGFuZGxlci5qcyc7XG5cbmNvbnN0IHByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uID0gbmV3IFByb3BlcnR5U3RhdGVIYW5kbGVyKCk7XG5heG9uLnJlZ2lzdGVyKCAncHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24nLCBwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbiApO1xuZXhwb3J0IGRlZmF1bHQgcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b247Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsSUFBSSxNQUFNLFdBQVc7QUFDNUIsT0FBT0Msb0JBQW9CLE1BQU0sMkJBQTJCO0FBRTVELE1BQU1DLDZCQUE2QixHQUFHLElBQUlELG9CQUFvQixFQUFFO0FBQ2hFRCxJQUFJLENBQUNHLFFBQVEsQ0FBRSwrQkFBK0IsRUFBRUQsNkJBQTZCLENBQUU7QUFDL0UsZUFBZUEsNkJBQTZCIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/TinyProperty.js
// Copyright 2020-2023, University of Colorado Boulder

/**
 * A lightweight version of Property (that satisfies some of the interface), meant for high-performance applications
 * where validation, phet-io support and other things are not needed.
 *
 * This directly extends TinyEmitter in order to save memory.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class TinyProperty extends TinyEmitter {
  // Store the internal value -- NOT for general use (but used in Scenery for performance)

  // Forces use of the deep equality checks. Keeps some compatibility with the Property interface to have the equality
  // check in this type too. Not defining in the general case for memory usage, only using if we notice this flag set.

  /**
   * @param value - The initial value of the property
   * @param [onBeforeNotify]
   */
  constructor(value, onBeforeNotify) {
    super(onBeforeNotify);
    this._value = value;
  }

  /**
   * Returns the value.
   *
   * You can also use the es5 getter (property.value) but this means is provided for inner loops
   * or internal code that must be fast.
   */
  get() {
    return this._value;
  }

  /**
   * Returns the value.
   */
  get value() {
    return this.get();
  }

  /**
   * Sets the value.
   */
  set value(newValue) {
    this.set(newValue);
  }

  /**
   * Sets the value and notifies listeners, unless deferred or disposed. You can also use the es5 getter
   * (property.value) but this means is provided for inner loops or internal code that must be fast. If the value
   * hasn't changed, this is a no-op.
   */
  set(value) {
    if (!this.equalsValue(value)) {
      const oldValue = this._value;
      this.setPropertyValue(value);
      this.notifyListeners(oldValue);
    }
  }

  /**
   * Sets the value without notifying any listeners. This is a place to override if a subtype performs additional work
   * when setting the value.
   */
  setPropertyValue(value) {
    this._value = value;
  }

  /**
   * Returns true if and only if the specified value equals the value of this property
   */
  equalsValue(value) {
    return this.areValuesEqual(value, this._value);
  }

  /**
   * Determines equality semantics for the wrapped type, including whether notifications are sent out when the
   * wrapped value changes, and whether onValue is triggered.
   * (Property)
   *
   * useDeepEquality: true => Use the `equals` method on the values
   * useDeepEquality: false => Use === for equality test
   *
   * Alternatively different implementation can be provided by subclasses or instances to change the equals
   * definition. See #10 and #73 and #115
   */
  areValuesEqual(a, b) {
    if (this.useDeepEquality) {
      const aObject = a;
      const bObject = b;
      if (aObject && bObject && aObject.constructor === bObject.constructor) {
        assert && assert(!!aObject.equals, 'no equals function for 1st arg');
        assert && assert(!!bObject.equals, 'no equals function for 2nd arg');
        assert && assert(aObject.equals(bObject) === bObject.equals(aObject), 'incompatible equality checks');
        return aObject.equals(bObject);
      }
    }

    // Reference equality for objects, value equality for primitives
    return a === b;
  }

  /**
   * Directly notifies listeners of changes.
   */
  notifyListeners(oldValue) {
    // We use this._value here for performance, AND to avoid calling onAccessAttempt unnecessarily.
    this.emit(this._value, oldValue, this);
  }

  /**
   * Adds listener and calls it immediately. If listener is already registered, this is a no-op. The initial
   * notification provides the current value for newValue and null for oldValue.
   */
  link(listener) {
    this.addListener(listener);
    listener(this._value, null, this); // null should be used when an object is expected but unavailable
  }

  /**
   * Add an listener to the TinyProperty, without calling it back right away. This is used when you need to register a
   * listener without an immediate callback.
   */
  lazyLink(listener) {
    this.addListener(listener); // Because it's a lazy link, it will never be called with null
  }

  /**
   * Removes a listener. If listener is not registered, this is a no-op.
   */
  unlink(listener) {
    this.removeListener(listener);
  }

  /**
   * Removes all listeners. If no listeners are registered, this is a no-op.
   */
  unlinkAll() {
    this.removeAllListeners();
  }

  /**
   * Links an object's named attribute to this TinyProperty.  Returns a handle so it can be removed using
   * TinyProperty.unlink();
   * Example: modelVisibleProperty.linkAttribute(view, 'visible');
   *
   * NOTE: Duplicated with Property.linkAttribute
   */
  linkAttribute(object, attributeName) {
    const handle = value => {
      object[attributeName] = value;
    };
    this.link(handle);
    return handle;
  }

  /**
   * Returns true if the value can be set externally, using .value= or set()
   */
  isSettable() {
    return true;
  }

  /**
   * Releases references.
   */
  dispose() {
    // Remove any listeners that are still attached (note that the emitter dispose would do this also, but without the
    // potentially-needed extra logic of changeCount, etc.)
    this.unlinkAll();
    super.dispose();
  }
}
js_axon.register('TinyProperty', TinyProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVGlueUVtaXR0ZXIiLCJUaW55UHJvcGVydHkiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwib25CZWZvcmVOb3RpZnkiLCJfdmFsdWUiLCJnZXQiLCJuZXdWYWx1ZSIsInNldCIsImVxdWFsc1ZhbHVlIiwib2xkVmFsdWUiLCJzZXRQcm9wZXJ0eVZhbHVlIiwibm90aWZ5TGlzdGVuZXJzIiwiYXJlVmFsdWVzRXF1YWwiLCJhIiwiYiIsInVzZURlZXBFcXVhbGl0eSIsImFPYmplY3QiLCJiT2JqZWN0IiwiYXNzZXJ0IiwiZXF1YWxzIiwiZW1pdCIsImxpbmsiLCJsaXN0ZW5lciIsImFkZExpc3RlbmVyIiwibGF6eUxpbmsiLCJ1bmxpbmsiLCJyZW1vdmVMaXN0ZW5lciIsInVubGlua0FsbCIsInJlbW92ZUFsbExpc3RlbmVycyIsImxpbmtBdHRyaWJ1dGUiLCJvYmplY3QiLCJhdHRyaWJ1dGVOYW1lIiwiaGFuZGxlIiwiaXNTZXR0YWJsZSIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlRpbnlQcm9wZXJ0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBBIGxpZ2h0d2VpZ2h0IHZlcnNpb24gb2YgUHJvcGVydHkgKHRoYXQgc2F0aXNmaWVzIHNvbWUgb2YgdGhlIGludGVyZmFjZSksIG1lYW50IGZvciBoaWdoLXBlcmZvcm1hbmNlIGFwcGxpY2F0aW9uc1xuICogd2hlcmUgdmFsaWRhdGlvbiwgcGhldC1pbyBzdXBwb3J0IGFuZCBvdGhlciB0aGluZ3MgYXJlIG5vdCBuZWVkZWQuXG4gKlxuICogVGhpcyBkaXJlY3RseSBleHRlbmRzIFRpbnlFbWl0dGVyIGluIG9yZGVyIHRvIHNhdmUgbWVtb3J5LlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBUaW55RW1pdHRlciBmcm9tICcuL1RpbnlFbWl0dGVyLmpzJztcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi9UUHJvcGVydHkuanMnO1xuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5LCB7IFByb3BlcnR5TGF6eUxpbmtMaXN0ZW5lciwgUHJvcGVydHlMaW5rTGlzdGVuZXIsIFByb3BlcnR5TGlzdGVuZXIgfSBmcm9tICcuL1RSZWFkT25seVByb3BlcnR5LmpzJztcblxuZXhwb3J0IHR5cGUgQ29tcGFyYWJsZU9iamVjdCA9IHtcbiAgZXF1YWxzOiAoIGE6IHVua25vd24gKSA9PiBib29sZWFuO1xufTtcbmV4cG9ydCB0eXBlIFRpbnlQcm9wZXJ0eUVtaXR0ZXJQYXJhbWV0ZXJzPFQ+ID0gWyBULCBUIHwgbnVsbCwgVFJlYWRPbmx5UHJvcGVydHk8VD4gXTtcbmV4cG9ydCB0eXBlIFRpbnlQcm9wZXJ0eU9uQmVmb3JlTm90aWZ5PFQ+ID0gKCAuLi5hcmdzOiBUaW55UHJvcGVydHlFbWl0dGVyUGFyYW1ldGVyczxUPiApID0+IHZvaWQ7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbnlQcm9wZXJ0eTxUPiBleHRlbmRzIFRpbnlFbWl0dGVyPFRpbnlQcm9wZXJ0eUVtaXR0ZXJQYXJhbWV0ZXJzPFQ+PiBpbXBsZW1lbnRzIFRQcm9wZXJ0eTxUPiB7XG5cbiAgcHVibGljIF92YWx1ZTogVDsgLy8gU3RvcmUgdGhlIGludGVybmFsIHZhbHVlIC0tIE5PVCBmb3IgZ2VuZXJhbCB1c2UgKGJ1dCB1c2VkIGluIFNjZW5lcnkgZm9yIHBlcmZvcm1hbmNlKVxuXG4gIC8vIEZvcmNlcyB1c2Ugb2YgdGhlIGRlZXAgZXF1YWxpdHkgY2hlY2tzLiBLZWVwcyBzb21lIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgUHJvcGVydHkgaW50ZXJmYWNlIHRvIGhhdmUgdGhlIGVxdWFsaXR5XG4gIC8vIGNoZWNrIGluIHRoaXMgdHlwZSB0b28uIE5vdCBkZWZpbmluZyBpbiB0aGUgZ2VuZXJhbCBjYXNlIGZvciBtZW1vcnkgdXNhZ2UsIG9ubHkgdXNpbmcgaWYgd2Ugbm90aWNlIHRoaXMgZmxhZyBzZXQuXG4gIHByb3RlY3RlZCB1c2VEZWVwRXF1YWxpdHk/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgaW5pdGlhbCB2YWx1ZSBvZiB0aGUgcHJvcGVydHlcbiAgICogQHBhcmFtIFtvbkJlZm9yZU5vdGlmeV1cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggdmFsdWU6IFQsIG9uQmVmb3JlTm90aWZ5PzogVGlueVByb3BlcnR5T25CZWZvcmVOb3RpZnk8VD4gKSB7XG4gICAgc3VwZXIoIG9uQmVmb3JlTm90aWZ5ICk7XG5cbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZhbHVlLlxuICAgKlxuICAgKiBZb3UgY2FuIGFsc28gdXNlIHRoZSBlczUgZ2V0dGVyIChwcm9wZXJ0eS52YWx1ZSkgYnV0IHRoaXMgbWVhbnMgaXMgcHJvdmlkZWQgZm9yIGlubmVyIGxvb3BzXG4gICAqIG9yIGludGVybmFsIGNvZGUgdGhhdCBtdXN0IGJlIGZhc3QuXG4gICAqL1xuICBwdWJsaWMgZ2V0KCk6IFQge1xuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZS5cbiAgICovXG4gIHB1YmxpYyBnZXQgdmFsdWUoKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KCk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUuXG4gICAqL1xuICBwdWJsaWMgc2V0IHZhbHVlKCBuZXdWYWx1ZTogVCApIHtcbiAgICB0aGlzLnNldCggbmV3VmFsdWUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBhbmQgbm90aWZpZXMgbGlzdGVuZXJzLCB1bmxlc3MgZGVmZXJyZWQgb3IgZGlzcG9zZWQuIFlvdSBjYW4gYWxzbyB1c2UgdGhlIGVzNSBnZXR0ZXJcbiAgICogKHByb3BlcnR5LnZhbHVlKSBidXQgdGhpcyBtZWFucyBpcyBwcm92aWRlZCBmb3IgaW5uZXIgbG9vcHMgb3IgaW50ZXJuYWwgY29kZSB0aGF0IG11c3QgYmUgZmFzdC4gSWYgdGhlIHZhbHVlXG4gICAqIGhhc24ndCBjaGFuZ2VkLCB0aGlzIGlzIGEgbm8tb3AuXG4gICAqL1xuICBwdWJsaWMgc2V0KCB2YWx1ZTogVCApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmVxdWFsc1ZhbHVlKCB2YWx1ZSApICkge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLl92YWx1ZTtcblxuICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKCB2YWx1ZSApO1xuXG4gICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyggb2xkVmFsdWUgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgd2l0aG91dCBub3RpZnlpbmcgYW55IGxpc3RlbmVycy4gVGhpcyBpcyBhIHBsYWNlIHRvIG92ZXJyaWRlIGlmIGEgc3VidHlwZSBwZXJmb3JtcyBhZGRpdGlvbmFsIHdvcmtcbiAgICogd2hlbiBzZXR0aW5nIHRoZSB2YWx1ZS5cbiAgICovXG4gIHB1YmxpYyBzZXRQcm9wZXJ0eVZhbHVlKCB2YWx1ZTogVCApOiB2b2lkIHtcbiAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiBhbmQgb25seSBpZiB0aGUgc3BlY2lmaWVkIHZhbHVlIGVxdWFscyB0aGUgdmFsdWUgb2YgdGhpcyBwcm9wZXJ0eVxuICAgKi9cbiAgcHJvdGVjdGVkIGVxdWFsc1ZhbHVlKCB2YWx1ZTogVCApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5hcmVWYWx1ZXNFcXVhbCggdmFsdWUsIHRoaXMuX3ZhbHVlICk7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBlcXVhbGl0eSBzZW1hbnRpY3MgZm9yIHRoZSB3cmFwcGVkIHR5cGUsIGluY2x1ZGluZyB3aGV0aGVyIG5vdGlmaWNhdGlvbnMgYXJlIHNlbnQgb3V0IHdoZW4gdGhlXG4gICAqIHdyYXBwZWQgdmFsdWUgY2hhbmdlcywgYW5kIHdoZXRoZXIgb25WYWx1ZSBpcyB0cmlnZ2VyZWQuXG4gICAqIChQcm9wZXJ0eSlcbiAgICpcbiAgICogdXNlRGVlcEVxdWFsaXR5OiB0cnVlID0+IFVzZSB0aGUgYGVxdWFsc2AgbWV0aG9kIG9uIHRoZSB2YWx1ZXNcbiAgICogdXNlRGVlcEVxdWFsaXR5OiBmYWxzZSA9PiBVc2UgPT09IGZvciBlcXVhbGl0eSB0ZXN0XG4gICAqXG4gICAqIEFsdGVybmF0aXZlbHkgZGlmZmVyZW50IGltcGxlbWVudGF0aW9uIGNhbiBiZSBwcm92aWRlZCBieSBzdWJjbGFzc2VzIG9yIGluc3RhbmNlcyB0byBjaGFuZ2UgdGhlIGVxdWFsc1xuICAgKiBkZWZpbml0aW9uLiBTZWUgIzEwIGFuZCAjNzMgYW5kICMxMTVcbiAgICovXG4gIHB1YmxpYyBhcmVWYWx1ZXNFcXVhbCggYTogVCwgYjogVCApOiBib29sZWFuIHtcbiAgICBpZiAoIHRoaXMudXNlRGVlcEVxdWFsaXR5ICkge1xuICAgICAgY29uc3QgYU9iamVjdCA9IGEgYXMgdW5rbm93biBhcyBDb21wYXJhYmxlT2JqZWN0O1xuICAgICAgY29uc3QgYk9iamVjdCA9IGIgYXMgdW5rbm93biBhcyBDb21wYXJhYmxlT2JqZWN0O1xuXG4gICAgICBpZiAoIGFPYmplY3QgJiYgYk9iamVjdCAmJiBhT2JqZWN0LmNvbnN0cnVjdG9yID09PSBiT2JqZWN0LmNvbnN0cnVjdG9yICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhIWFPYmplY3QuZXF1YWxzLCAnbm8gZXF1YWxzIGZ1bmN0aW9uIGZvciAxc3QgYXJnJyApO1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhIWJPYmplY3QuZXF1YWxzLCAnbm8gZXF1YWxzIGZ1bmN0aW9uIGZvciAybmQgYXJnJyApO1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhT2JqZWN0LmVxdWFscyggYk9iamVjdCApID09PSBiT2JqZWN0LmVxdWFscyggYU9iamVjdCApLCAnaW5jb21wYXRpYmxlIGVxdWFsaXR5IGNoZWNrcycgKTtcbiAgICAgICAgcmV0dXJuIGFPYmplY3QuZXF1YWxzKCBiT2JqZWN0ICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUmVmZXJlbmNlIGVxdWFsaXR5IGZvciBvYmplY3RzLCB2YWx1ZSBlcXVhbGl0eSBmb3IgcHJpbWl0aXZlc1xuICAgIHJldHVybiBhID09PSBiO1xuICB9XG5cbiAgLyoqXG4gICAqIERpcmVjdGx5IG5vdGlmaWVzIGxpc3RlbmVycyBvZiBjaGFuZ2VzLlxuICAgKi9cbiAgcHVibGljIG5vdGlmeUxpc3RlbmVycyggb2xkVmFsdWU6IFQgKTogdm9pZCB7XG4gICAgLy8gV2UgdXNlIHRoaXMuX3ZhbHVlIGhlcmUgZm9yIHBlcmZvcm1hbmNlLCBBTkQgdG8gYXZvaWQgY2FsbGluZyBvbkFjY2Vzc0F0dGVtcHQgdW5uZWNlc3NhcmlseS5cbiAgICB0aGlzLmVtaXQoIHRoaXMuX3ZhbHVlLCBvbGRWYWx1ZSwgdGhpcyApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgbGlzdGVuZXIgYW5kIGNhbGxzIGl0IGltbWVkaWF0ZWx5LiBJZiBsaXN0ZW5lciBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHRoaXMgaXMgYSBuby1vcC4gVGhlIGluaXRpYWxcbiAgICogbm90aWZpY2F0aW9uIHByb3ZpZGVzIHRoZSBjdXJyZW50IHZhbHVlIGZvciBuZXdWYWx1ZSBhbmQgbnVsbCBmb3Igb2xkVmFsdWUuXG4gICAqL1xuICBwdWJsaWMgbGluayggbGlzdGVuZXI6IFByb3BlcnR5TGlua0xpc3RlbmVyPFQ+ICk6IHZvaWQge1xuICAgIHRoaXMuYWRkTGlzdGVuZXIoIGxpc3RlbmVyICk7XG5cbiAgICBsaXN0ZW5lciggdGhpcy5fdmFsdWUsIG51bGwsIHRoaXMgKTsgLy8gbnVsbCBzaG91bGQgYmUgdXNlZCB3aGVuIGFuIG9iamVjdCBpcyBleHBlY3RlZCBidXQgdW5hdmFpbGFibGVcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYW4gbGlzdGVuZXIgdG8gdGhlIFRpbnlQcm9wZXJ0eSwgd2l0aG91dCBjYWxsaW5nIGl0IGJhY2sgcmlnaHQgYXdheS4gVGhpcyBpcyB1c2VkIHdoZW4geW91IG5lZWQgdG8gcmVnaXN0ZXIgYVxuICAgKiBsaXN0ZW5lciB3aXRob3V0IGFuIGltbWVkaWF0ZSBjYWxsYmFjay5cbiAgICovXG4gIHB1YmxpYyBsYXp5TGluayggbGlzdGVuZXI6IFByb3BlcnR5TGF6eUxpbmtMaXN0ZW5lcjxUPiApOiB2b2lkIHtcbiAgICB0aGlzLmFkZExpc3RlbmVyKCBsaXN0ZW5lciBhcyBQcm9wZXJ0eUxpbmtMaXN0ZW5lcjxUPiApOyAvLyBCZWNhdXNlIGl0J3MgYSBsYXp5IGxpbmssIGl0IHdpbGwgbmV2ZXIgYmUgY2FsbGVkIHdpdGggbnVsbFxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBsaXN0ZW5lci4gSWYgbGlzdGVuZXIgaXMgbm90IHJlZ2lzdGVyZWQsIHRoaXMgaXMgYSBuby1vcC5cbiAgICovXG4gIHB1YmxpYyB1bmxpbmsoIGxpc3RlbmVyOiBQcm9wZXJ0eUxpc3RlbmVyPFQ+ICk6IHZvaWQge1xuICAgIHRoaXMucmVtb3ZlTGlzdGVuZXIoIGxpc3RlbmVyIGFzIFByb3BlcnR5TGlua0xpc3RlbmVyPFQ+ICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhbGwgbGlzdGVuZXJzLiBJZiBubyBsaXN0ZW5lcnMgYXJlIHJlZ2lzdGVyZWQsIHRoaXMgaXMgYSBuby1vcC5cbiAgICovXG4gIHB1YmxpYyB1bmxpbmtBbGwoKTogdm9pZCB7XG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaW5rcyBhbiBvYmplY3QncyBuYW1lZCBhdHRyaWJ1dGUgdG8gdGhpcyBUaW55UHJvcGVydHkuICBSZXR1cm5zIGEgaGFuZGxlIHNvIGl0IGNhbiBiZSByZW1vdmVkIHVzaW5nXG4gICAqIFRpbnlQcm9wZXJ0eS51bmxpbmsoKTtcbiAgICogRXhhbXBsZTogbW9kZWxWaXNpYmxlUHJvcGVydHkubGlua0F0dHJpYnV0ZSh2aWV3LCAndmlzaWJsZScpO1xuICAgKlxuICAgKiBOT1RFOiBEdXBsaWNhdGVkIHdpdGggUHJvcGVydHkubGlua0F0dHJpYnV0ZVxuICAgKi9cbiAgcHVibGljIGxpbmtBdHRyaWJ1dGU8QXR0ciBleHRlbmRzIHN0cmluZz4oIG9iamVjdDogeyBba2V5IGluIEF0dHJdOiBUIH0sIGF0dHJpYnV0ZU5hbWU6IEF0dHIgKTogKCB2YWx1ZTogVCApID0+IHZvaWQge1xuICAgIGNvbnN0IGhhbmRsZSA9ICggdmFsdWU6IFQgKSA9PiB7IG9iamVjdFsgYXR0cmlidXRlTmFtZSBdID0gdmFsdWU7IH07XG4gICAgdGhpcy5saW5rKCBoYW5kbGUgKTtcbiAgICByZXR1cm4gaGFuZGxlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgY2FuIGJlIHNldCBleHRlcm5hbGx5LCB1c2luZyAudmFsdWU9IG9yIHNldCgpXG4gICAqL1xuICBwdWJsaWMgaXNTZXR0YWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZWxlYXNlcyByZWZlcmVuY2VzLlxuICAgKi9cbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgLy8gUmVtb3ZlIGFueSBsaXN0ZW5lcnMgdGhhdCBhcmUgc3RpbGwgYXR0YWNoZWQgKG5vdGUgdGhhdCB0aGUgZW1pdHRlciBkaXNwb3NlIHdvdWxkIGRvIHRoaXMgYWxzbywgYnV0IHdpdGhvdXQgdGhlXG4gICAgLy8gcG90ZW50aWFsbHktbmVlZGVkIGV4dHJhIGxvZ2ljIG9mIGNoYW5nZUNvdW50LCBldGMuKVxuICAgIHRoaXMudW5saW5rQWxsKCk7XG5cbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cbn1cblxuYXhvbi5yZWdpc3RlciggJ1RpbnlQcm9wZXJ0eScsIFRpbnlQcm9wZXJ0eSApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsSUFBSSxNQUFNLFdBQVc7QUFDNUIsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQVUxQyxlQUFlLE1BQU1DLFlBQVksU0FBWUQsV0FBVyxDQUEyRDtFQUUvRjs7RUFFbEI7RUFDQTs7RUFHQTtBQUNGO0FBQ0E7QUFDQTtFQUNTRSxXQUFXQSxDQUFFQyxLQUFRLEVBQUVDLGNBQThDLEVBQUc7SUFDN0UsS0FBSyxDQUFFQSxjQUFjLENBQUU7SUFFdkIsSUFBSSxDQUFDQyxNQUFNLEdBQUdGLEtBQUs7RUFDckI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NHLEdBQUdBLENBQUEsRUFBTTtJQUNkLE9BQU8sSUFBSSxDQUFDRCxNQUFNO0VBQ3BCOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLElBQVdGLEtBQUtBLENBQUEsRUFBTTtJQUNwQixPQUFPLElBQUksQ0FBQ0csR0FBRyxFQUFFO0VBQ25COztFQUVBO0FBQ0Y7QUFDQTtFQUNFLElBQVdILEtBQUtBLENBQUVJLFFBQVcsRUFBRztJQUM5QixJQUFJLENBQUNDLEdBQUcsQ0FBRUQsUUFBUSxDQUFFO0VBQ3RCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDU0MsR0FBR0EsQ0FBRUwsS0FBUSxFQUFTO0lBQzNCLElBQUssQ0FBQyxJQUFJLENBQUNNLFdBQVcsQ0FBRU4sS0FBSyxDQUFFLEVBQUc7TUFDaEMsTUFBTU8sUUFBUSxHQUFHLElBQUksQ0FBQ0wsTUFBTTtNQUU1QixJQUFJLENBQUNNLGdCQUFnQixDQUFFUixLQUFLLENBQUU7TUFFOUIsSUFBSSxDQUFDUyxlQUFlLENBQUVGLFFBQVEsQ0FBRTtJQUNs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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/units.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * These are the units that can be associated with Property instances.
 *
 * When adding units to this file, please add abbreviations, preferably SI abbreviations.
 * And keep the array alphabetized by value.
 * See https://github.com/phetsims/phet-io/issues/530
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */


const units = {
  values: ['1/(cm*M)',
  // molar absorptivity
  '%',
  // percent
  'A',
  // amperes
  'AMU',
  // atomic mass unit
  'atm',
  // atmospheres
  'cm',
  // centimeters
  'cm^2',
  // centimeters squared
  'C',
  // coulombs
  '\u00B0',
  // °, degrees (angle)
  '\u00B0C',
  // °C, degrees Celsius
  'F',
  // farad
  'g',
  // grams
  'Hz',
  // hertz
  'J',
  // Joules
  'K',
  // Kelvin
  'kg',
  // kilograms
  'kg/m^3',
  // kg/cubic meter
  'kg\u00b7m/s',
  // kg·m/s, kilogram-meters/second
  'kPa',
  // kilopascals
  'L', 'L/s', 'm',
  // meters
  'm^3',
  // cubic meter
  'm/s',
  // meters/second
  'm/s/s',
  // meters/second/second
  'm/s^2',
  // meters/seconds squared
  'mA',
  // milliampere
  'mm',
  //millimeters
  'mol', 'mol/L', 'mol/s', 'M',
  // molar
  'N',
  // Newtons
  'N/m',
  // Newtons/meter
  'nm',
  // nanometers
  'nm/ps',
  // nanometers/picosecond
  'N\u00b7s/m',
  // N·s/m, Newton-seconds/meter
  '\u2126',
  // Ω, ohms - don't use the one in MathSymbols to prevent a dependency on scenery-phet
  '\u2126\u00b7cm',
  // Ω·cm, ohm-centimeters
  'Pa\u00b7s',
  // Pascal-seconds
  'particles/ps',
  // particles/picosecond
  'pm',
  // picometers
  'pm/ps',
  // picometers/picosecond
  'pm/s',
  // picometers/second
  'pm/s^2',
  // picometers/second-squared
  'pm^3',
  // picometers cubed
  'ps',
  // picoseconds
  'radians',
  // radians - note this has the same abbreviation as the radiation term "rad" so we use the full term
  'radians/s',
  // radians/second
  's',
  // seconds
  'V',
  // volts
  'view-coordinates/s', 'W' // watts
  ],

  isValidUnits: function (unit) {
    return _.includes(units.values, unit);
  }
};
js_axon.register('units', units);
/* harmony default export */ const js_units = (units);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwidW5pdHMiLCJ2YWx1ZXMiLCJpc1ZhbGlkVW5pdHMiLCJ1bml0IiwiXyIsImluY2x1ZGVzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJ1bml0cy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBUaGVzZSBhcmUgdGhlIHVuaXRzIHRoYXQgY2FuIGJlIGFzc29jaWF0ZWQgd2l0aCBQcm9wZXJ0eSBpbnN0YW5jZXMuXG4gKlxuICogV2hlbiBhZGRpbmcgdW5pdHMgdG8gdGhpcyBmaWxlLCBwbGVhc2UgYWRkIGFiYnJldmlhdGlvbnMsIHByZWZlcmFibHkgU0kgYWJicmV2aWF0aW9ucy5cbiAqIEFuZCBrZWVwIHRoZSBhcnJheSBhbHBoYWJldGl6ZWQgYnkgdmFsdWUuXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vaXNzdWVzLzUzMFxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcblxuY29uc3QgdW5pdHMgPSB7XG4gIHZhbHVlczogW1xuICAgICcxLyhjbSpNKScsIC8vIG1vbGFyIGFic29ycHRpdml0eVxuICAgICclJywgLy8gcGVyY2VudFxuICAgICdBJywgLy8gYW1wZXJlc1xuICAgICdBTVUnLCAvLyBhdG9taWMgbWFzcyB1bml0XG4gICAgJ2F0bScsIC8vIGF0bW9zcGhlcmVzXG4gICAgJ2NtJywgLy8gY2VudGltZXRlcnNcbiAgICAnY21eMicsIC8vIGNlbnRpbWV0ZXJzIHNxdWFyZWRcbiAgICAnQycsIC8vIGNvdWxvbWJzXG4gICAgJ1xcdTAwQjAnLCAvLyDCsCwgZGVncmVlcyAoYW5nbGUpXG4gICAgJ1xcdTAwQjBDJywgLy8gwrBDLCBkZWdyZWVzIENlbHNpdXNcbiAgICAnRicsIC8vIGZhcmFkXG4gICAgJ2cnLCAvLyBncmFtc1xuICAgICdIeicsIC8vIGhlcnR6XG4gICAgJ0onLCAvLyBKb3VsZXNcbiAgICAnSycsIC8vIEtlbHZpblxuICAgICdrZycsIC8vIGtpbG9ncmFtc1xuICAgICdrZy9tXjMnLCAvLyBrZy9jdWJpYyBtZXRlclxuICAgICdrZ1xcdTAwYjdtL3MnLCAvLyBrZ8K3bS9zLCBraWxvZ3JhbS1tZXRlcnMvc2Vjb25kXG4gICAgJ2tQYScsIC8vIGtpbG9wYXNjYWxzXG4gICAgJ0wnLFxuICAgICdML3MnLFxuICAgICdtJywgLy8gbWV0ZXJzXG4gICAgJ21eMycsIC8vIGN1YmljIG1ldGVyXG4gICAgJ20vcycsIC8vIG1ldGVycy9zZWNvbmRcbiAgICAnbS9zL3MnLCAvLyBtZXRlcnMvc2Vjb25kL3NlY29uZFxuICAgICdtL3NeMicsIC8vIG1ldGVycy9zZWNvbmRzIHNxdWFyZWRcbiAgICAnbUEnLCAvLyBtaWxsaWFtcGVyZVxuICAgICdtbScsIC8vbWlsbGltZXRlcnNcbiAgICAnbW9sJyxcbiAgICAnbW9sL0wnLFxuICAgICdtb2wvcycsXG4gICAgJ00nLCAvLyBtb2xhclxuICAgICdOJywgLy8gTmV3dG9uc1xuICAgICdOL20nLCAvLyBOZXd0b25zL21ldGVyXG4gICAgJ25tJywgLy8gbmFub21ldGVyc1xuICAgICdubS9wcycsIC8vIG5hbm9tZXRlcnMvcGljb3NlY29uZFxuICAgICdOXFx1MDBiN3MvbScsIC8vIE7Ct3MvbSwgTmV3dG9uLXNlY29uZHMvbWV0ZXJcbiAgICAnXFx1MjEyNicsIC8vIM6pLCBvaG1zIC0gZG9uJ3QgdXNlIHRoZSBvbmUgaW4gTWF0aFN5bWJvbHMgdG8gcHJldmVudCBhIGRlcGVuZGVuY3kgb24gc2NlbmVyeS1waGV0XG4gICAgJ1xcdTIxMjZcXHUwMGI3Y20nLCAvLyDOqcK3Y20sIG9obS1jZW50aW1ldGVyc1xuICAgICdQYVxcdTAwYjdzJywgLy8gUGFzY2FsLXNlY29uZHNcbiAgICAncGFydGljbGVzL3BzJywgLy8gcGFydGljbGVzL3BpY29zZWNvbmRcbiAgICAncG0nLCAvLyBwaWNvbWV0ZXJzXG4gICAgJ3BtL3BzJywgLy8gcGljb21ldGVycy9waWNvc2Vjb25kXG4gICAgJ3BtL3MnLCAvLyBwaWNvbWV0ZXJzL3NlY29uZFxuICAgICdwbS9zXjInLCAvLyBwaWNvbWV0ZXJzL3NlY29uZC1zcXVhcmVkXG4gICAgJ3BtXjMnLCAvLyBwaWNvbWV0ZXJzIGN1YmVkXG4gICAgJ3BzJywgLy8gcGljb3NlY29uZHNcbiAgICAncmFkaWFucycsIC8vIHJhZGlhbnMgLSBub3RlIHRoaXMgaGFzIHRoZSBzYW1lIGFiYnJldmlhdGlvbiBhcyB0aGUgcmFkaWF0aW9uIHRlcm0gXCJyYWRcIiBzbyB3ZSB1c2UgdGhlIGZ1bGwgdGVybVxuICAgICdyYWRpYW5zL3MnLCAvLyByYWRpYW5zL3NlY29uZFxuICAgICdzJywgLy8gc2Vjb25kc1xuICAgICdWJywgLy8gdm9sdHNcbiAgICAndmlldy1jb29yZGluYXRlcy9zJyxcbiAgICAnVycgLy8gd2F0dHNcbiAgXSxcblxuICBpc1ZhbGlkVW5pdHM6IGZ1bmN0aW9uKCB1bml0OiBzdHJpbmcgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIF8uaW5jbHVkZXMoIHVuaXRzLnZhbHVlcywgdW5pdCApO1xuICB9XG59O1xuXG5heG9uLnJlZ2lzdGVyKCAndW5pdHMnLCB1bml0cyApO1xuXG5leHBvcnQgZGVmYXVsdCB1bml0czsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxJQUFJLE1BQU0sV0FBVztBQUU1QixNQUFNQyxLQUFLLEdBQUc7RUFDWkMsTUFBTSxFQUFFLENBQ04sVUFBVTtFQUFFO0VBQ1osR0FBRztFQUFFO0VBQ0wsR0FBRztFQUFFO0VBQ0wsS0FBSztFQUFFO0VBQ1AsS0FBSztFQUFFO0VBQ1AsSUFBSTtFQUFFO0VBQ04sTUFBTTtFQUFFO0VBQ1IsR0FBRztFQUFFO0VBQ0wsUUFBUTtFQUFFO0VBQ1YsU0FBUztFQUFFO0VBQ1gsR0FBRztFQUFFO0VBQ0wsR0FBRztFQUFFO0VBQ0wsSUFBSTtFQUFFO0VBQ04sR0FBRztFQUFFO0VBQ0wsR0FBRztFQUFFO0VBQ0wsSUFBSTtFQUFFO0VBQ04sUUFBUTtFQUFFO0VBQ1YsYUFBYTtFQUFFO0VBQ2YsS0FBSztFQUFFO0VBQ1AsR0FBRyxFQUNILEtBQUssRUFDTCxHQUFHO0VBQUU7RUFDTCxLQUFLO0VBQUU7RUFDUCxLQUFLO0VBQUU7RUFDUCxPQUFPO0VBQUU7RUFDVCxPQUFPO0VBQUU7RUFDVCxJQUFJO0VBQUU7RUFDTixJQUFJO0VBQUU7RUFDTixLQUFLLEVBQ0wsT0FBTyxFQUNQLE9BQU8sRUFDUCxHQUFHO0VBQUU7RUFDTCxHQUFHO0VBQUU7RUFDTCxLQUFLO0VBQUU7RUFDUCxJQUFJO0VBQUU7RUFDTixPQUFPO0VBQUU7RUFDVCxZQUFZO0VBQUU7RUFDZCxRQUFRO0VBQUU7RUFDVixnQkFBZ0I7RUFBRTtFQUNsQixXQUFXO0VBQUU7RUFDYixjQUFjO0VBQUU7RUFDaEIsSUFBSTtFQUFFO0VBQ04sT0FBTztFQUFFO0VBQ1QsTUFBTTtFQUFFO0VBQ1IsUUFBUTtFQUFFO0VBQ1YsTUFBTTtFQUFFO0VBQ1IsSUFBSTtFQUFFO0VBQ04sU0FBUztFQUFFO0VBQ1gsV0FBVztFQUFFO0VBQ2IsR0FBRztFQUFFO0VBQ0wsR0FBRztFQUFFO0VBQ0wsb0JBQW9CLEVBQ3BCLEdBQUcsQ0FBQztFQUFBLENBQ0w7O0VBRURDLFlBQVksRUFBRSxTQUFBQSxDQUFVQyxJQUFZLEVBQVk7SUFDOUMsT0FBT0MsQ0FBQyxDQUFDQyxRQUFRLENBQUVMLEtBQUssQ0FBQ0MsTUFBTSxFQUFFRSxJQUFJLENBQUU7RUFDekM7QUFDRixDQUFDO0FBRURKLElBQUksQ0FBQ08sUUFBUSxDQUFFLE9BQU8sRUFBRU4sS0FBSyxDQUFFO0FBRS9CLGVBQWVBLEtBQUsifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/ReadOnlyProperty.js
// Copyright 2013-2023, University of Colorado Boulder
/**
 * An observable property which notifies listeners when the value changes.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Chris Malley (PixelZoom, Inc.)
 */


















// constants
const ReadOnlyProperty_VALIDATE_OPTIONS_FALSE = {
  validateValidator: false
};

// variables
let globalId = 0; // auto-incremented for unique IDs

// Cache each parameterized PropertyIO based on the parameter type, so that it is only created once
const ReadOnlyProperty_cache = new Map();
/**
 * Base class for Property, DerivedProperty, DynamicProperty.  Set methods are protected/not part of the public
 * interface.  Initial value and resetting is not defined here.
 */
class ReadOnlyProperty extends PhetioObject {
  // Unique identifier for this Property.

  // (phet-io) Units, if any.  See units.js for valid values

  // emit is called when the value changes (or on link)

  // whether we are in the process of notifying listeners; changed in some Property test files with @ts-expect-error

  // whether to allow reentry of calls to set

  // while deferred, new values neither take effect nor send notifications.  When isDeferred changes from
  // true to false, the final deferred value becomes the Property value.  An action is created which can be invoked to
  // send notifications.

  // the value that this Property will take after no longer deferred

  // whether a deferred value has been set

  static TANDEM_NAME_SUFFIX = 'Property';

  /**
   * This is protected to indicate to clients that subclasses should be used instead.
   * @param value - the initial value of the property
   * @param [providedOptions]
   */
  constructor(value, providedOptions) {
    const options = optionize()({
      units: null,
      reentrant: false,
      // phet-io
      tandem: js_Tandem.OPTIONAL,
      phetioOuterType: ReadOnlyProperty.PropertyIO,
      phetioValueType: IOType.ObjectIO
    }, providedOptions);

    // Support non-validated Property
    if (!Validation.containsValidatorKey(options)) {
      options.isValidValue = () => true;
    }
    assert && options.units && assert(js_units.isValidUnits(options.units), `invalid units: ${options.units}`);
    if (options.units) {
      options.phetioEventMetadata = options.phetioEventMetadata || {};
      assert && assert(!options.phetioEventMetadata.hasOwnProperty('units'), 'units should be supplied by Property, not elsewhere');
      options.phetioEventMetadata.units = options.units;
    }
    if (assert && providedOptions) {
      // @ts-expect-error -- for checking JS code
      assert && assert(!providedOptions.phetioType, 'Set phetioType via phetioValueType');
    }

    // Construct the IO Type
    if (options.phetioOuterType && options.phetioValueType) {
      options.phetioType = options.phetioOuterType(options.phetioValueType);
    }
    super(options);
    this.id = globalId++;
    this.units = options.units;

    // When running as phet-io, if the tandem is specified, the type must be specified.
    if (js_Tandem.VALIDATION && this.isPhetioInstrumented()) {
      // This assertion helps in instrumenting code that has the tandem but not type
      assert && assert(this.phetioType, `phetioType passed to Property must be specified. Tandem.phetioID: ${this.tandem.phetioID}`);
      assert && assert(options.phetioType.parameterTypes[0], `phetioType parameter type must be specified (only one). Tandem.phetioID: ${this.tandem.phetioID}`);
    }
    assert && assert(!this.isPhetioInstrumented() || options.tandem.name.endsWith(ReadOnlyProperty.TANDEM_NAME_SUFFIX) || options.tandem.name === 'property', `Property tandem.name must end with Property: ${options.tandem.phetioID}`);
    this.validValues = options.validValues;
    this.tinyProperty = new TinyProperty(value);

    // Since we are already in the heavyweight Property, we always assign TinyProperty.useDeepEquality for clarity.
    // @ts-expect-error
    this.tinyProperty.useDeepEquality = options.valueComparisonStrategy && options.valueComparisonStrategy === 'equalsFunction';
    this.notifying = false;
    this.reentrant = options.reentrant;
    this.isDeferred = false;
    this.deferredValue = null;
    this.hasDeferredValue = false;
    this.valueValidator = _.pick(options, Validation.VALIDATOR_KEYS);
    this.valueValidator.validationMessage = this.valueValidator.validationMessage || 'Property value not valid';
    if (this.valueValidator.phetioType) {
      // Validate the value type's phetioType of the Property, not the PropertyIO itself.
      // For example, for PropertyIO( BooleanIO ), assign this valueValidator's phetioType to be BooleanIO's validator.
      assert && assert(!!this.valueValidator.phetioType.parameterTypes[0], 'unexpected number of parameters for Property');

      // This is the validator for the value, not for the Property itself
      this.valueValidator.phetioType = this.valueValidator.phetioType.parameterTypes[0];
    }

    // Assertions regarding value validation
    if (assert) {
      Validation.validateValidator(this.valueValidator);

      // validate the initial value as well as any changes in the future
      this.link(value => js_validate(value, this.valueValidator, ReadOnlyProperty_VALIDATE_OPTIONS_FALSE));
      if (js_Tandem.PHET_IO_ENABLED && this.isPhetioInstrumented() && this.phetioState && js_Tandem.VALIDATION) {
        assert && assert(options.phetioValueType !== IOType.ObjectIO, 'Stateful PhET-iO Properties must specify a phetioValueType: ' + this.phetioID);
      }
    }
  }

  /**
   * Returns true if the value can be set externally, using .value= or set()
   */
  isSettable() {
    return false;
  }

  /**
   * Gets the value.
   * You can also use the es5 getter (property.value) but this means is provided for inner loops
   * or internal code that must be fast.
   */
  get() {
    return this.tinyProperty.get();
  }

  /**
   * Sets the value and notifies listeners, unless deferred or disposed. You can also use the es5 getter
   * (property.value) but this means is provided for inner loops or internal code that must be fast. If the value
   * hasn't changed, this is a no-op.  For PhET-iO instrumented Properties that are phetioState: true, the value is only
   * set by the state and cannot be modified by other code while isSettingPhetioStateProperty === true
   */
  set(value) {
    // state is managed by the PhetioStateEngine.
    // We still want to set Properties when clearing dynamic elements, see https://github.com/phetsims/phet-io/issues/1906
    const setManagedByPhetioState = _.hasIn(window, 'phet.joist.sim.isSettingPhetioStateProperty') && phet.joist.sim.isSettingPhetioStateProperty.value && _.hasIn(window, 'phet.joist.sim.isClearingPhetioDynamicElementsProperty') && !phet.joist.sim.isClearingPhetioDynamicElementsProperty.value && this.isPhetioInstrumented() && this.phetioState &&
    // However, DerivedProperty should be able to update during PhET-iO state set
    this.isSettable();
    if (!setManagedByPhetioState) {
      this.unguardedSet(value);
    }
  }

  /**
   * For usage by the IO Type during PhET-iO state setting.
   */
  unguardedSet(value) {
    if (!this.isDisposed) {
      if (this.isDeferred) {
        this.deferredValue = value;
        this.hasDeferredValue = true;
      } else if (!this.equalsValue(value)) {
        const oldValue = this.get();
        this.setPropertyValue(value);
        this._notifyListeners(oldValue);
      }
    }
  }

  /**
   * Sets the value without notifying any listeners. This is a place to override if a subtype performs additional work
   * when setting the value.
   */
  setPropertyValue(value) {
    this.tinyProperty.setPropertyValue(value);
  }

  /**
   * Returns true if and only if the specified value equals the value of this property
   */
  equalsValue(value) {
    return this.areValuesEqual(value, this.get());
  }

  /**
   * See TinyProperty.areValuesEqual
   */
  areValuesEqual(a, b) {
    return this.tinyProperty.areValuesEqual(a, b);
  }

  /**
   * NOTE: a few sims are calling this even though they shouldn't
   */
  _notifyListeners(oldValue) {
    const newValue = this.get();

    // Although this is not the idiomatic pattern (since it is guarded in the phetioStartEvent), this function is
    // called so many times that it is worth the optimization for PhET brand.
    js_Tandem.PHET_IO_ENABLED && this.isPhetioInstrumented() && this.phetioStartEvent(ReadOnlyProperty.CHANGED_EVENT_NAME, {
      getData: () => {
        const parameterType = this.phetioType.parameterTypes[0];
        return {
          oldValue: types_NullableIO(parameterType).toStateObject(oldValue),
          newValue: parameterType.toStateObject(newValue)
        };
      }
    });

    // notify listeners, optionally detect loops where this Property is set again before this completes.
    assert && assert(!this.notifying || this.reentrant, `reentry detected, value=${newValue}, oldValue=${oldValue}`);
    this.notifying = true;
    this.tinyProperty.emit(newValue, oldValue, this); // cannot use tinyProperty.notifyListeners because it uses the wrong this
    this.notifying = false;
    js_Tandem.PHET_IO_ENABLED && this.isPhetioInstrumented() && this.phetioEndEvent();
  }

  /**
   * Use this method when mutating a value (not replacing with a new instance) and you want to send notifications about the change.
   * This is different from the normal axon strategy, but may be necessary to prevent memory allocations.
   * This method is unsafe for removing listeners because it assumes the listener list not modified, to save another allocation
   * Only provides the new reference as a callback (no oldvalue)
   * See https://github.com/phetsims/axon/issues/6
   */
  notifyListenersStatic() {
    this._notifyListeners(null);
  }

  /**
   * When deferred, set values do not take effect or send out notifications.  After defer ends, the Property takes
   * its deferred value (if any), and a follow-up action (return value) can be invoked to send out notifications
   * once other Properties have also taken their deferred values.
   *
   * @param isDeferred - whether the Property should be deferred or not
   * @returns - function to notify listeners after calling setDeferred(false),
   *          - null if isDeferred is true, or if the value is unchanged since calling setDeferred(true)
   */
  setDeferred(isDeferred) {
    assert && assert(!this.isDisposed, 'cannot defer Property if already disposed.');
    if (isDeferred) {
      assert && assert(!this.isDeferred, 'Property already deferred');
      this.isDeferred = true;
    } else {
      assert && assert(this.isDeferred, 'Property wasn\'t deferred');
      this.isDeferred = false;
      const oldValue = this.get();

      // Take the new value
      if (this.hasDeferredValue) {
        this.setPropertyValue(this.deferredValue);
        this.hasDeferredValue = false;
        this.deferredValue = null;
      }

      // If the value has changed, prepare to send out notifications (after all other Properties in this transaction
      // have their final values)
      if (!this.equalsValue(oldValue)) {
        return () => !this.isDisposed && this._notifyListeners(oldValue);
      }
    }

    // no action to signify change
    return null;
  }
  get value() {
    return this.get();
  }
  set value(newValue) {
    this.set(newValue);
  }

  /**
   * This function registers an order dependency between this Property and another. Basically this says that when
   * setting PhET-iO state, each dependency must take its final value before this Property fires its notifications.
   * See propertyStateHandlerSingleton.registerPhetioOrderDependency and https://github.com/phetsims/axon/issues/276 for more info.
   */
  addPhetioStateDependencies(dependencies) {
    assert && assert(Array.isArray(dependencies), 'Array expected');
    for (let i = 0; i < dependencies.length; i++) {
      const dependencyProperty = dependencies[i];

      // only if running in PhET-iO brand and both Properties are instrumenting
      if (dependencyProperty instanceof ReadOnlyProperty && dependencyProperty.isPhetioInstrumented() && this.isPhetioInstrumented()) {
        // The dependency should undefer (taking deferred value) before this Property notifies.
        js_propertyStateHandlerSingleton.registerPhetioOrderDependency(dependencyProperty, js_PropertyStatePhase.UNDEFER, this, js_PropertyStatePhase.NOTIFY);
      }
    }
  }

  /**
   * Adds listener and calls it immediately. If listener is already registered, this is a no-op. The initial
   * notification provides the current value for newValue and null for oldValue.
   *
   * @param listener - a function that takes a new value, old value, and this Property as arguments
   * @param [options]
   */
  link(listener, options) {
    if (options && options.phetioDependencies) {
      this.addPhetioStateDependencies(options.phetioDependencies);
    }
    this.tinyProperty.addListener(listener); // cannot use tinyProperty.link() because of wrong this
    listener(this.get(), null, this); // null should be used when an object is expected but unavailable
  }

  /**
   * Add a listener to the Property, without calling it back right away. This is used when you need to register a
   * listener without an immediate callback.
   */
  lazyLink(listener, options) {
    if (options && options.phetioDependencies) {
      this.addPhetioStateDependencies(options.phetioDependencies);
    }
    this.tinyProperty.lazyLink(listener);
  }

  /**
   * Removes a listener. If listener is not registered, this is a no-op.
   */
  unlink(listener) {
    this.tinyProperty.unlink(listener);
  }

  /**
   * Removes all listeners. If no listeners are registered, this is a no-op.
   */
  unlinkAll() {
    this.tinyProperty.unlinkAll();
  }

  /**
   * Links an object's named attribute to this property.  Returns a handle so it can be removed using Property.unlink();
   * Example: modelVisibleProperty.linkAttribute(view,'visible');
   *
   * NOTE: Duplicated with TinyProperty.linkAttribute
   */
  linkAttribute(object, attributeName) {
    const handle = value => {
      object[attributeName] = value;
    };
    this.link(handle);
    return handle;
  }

  /**
   * Provide toString for console debugging, see http://stackoverflow.com/questions/2485632/valueof-vs-tostring-in-javascript
   */
  toString() {
    return `Property#${this.id}{${this.get()}}`;
  }

  /**
   * Convenience function for debugging a Property's value. It prints the new value on registration and when changed.
   * @param name - debug name to be printed on the console
   * @returns - the handle to the linked listener in case it needs to be removed later
   */
  debug(name) {
    const listener = value => console.log(name, value);
    this.link(listener);
    return listener;
  }
  isValueValid(value) {
    return this.getValidationError(value) === null;
  }
  getValidationError(value) {
    return Validation.getValidationError(value, this.valueValidator, ReadOnlyProperty_VALIDATE_OPTIONS_FALSE);
  }

  // Ensures that the Property is eligible for GC
  dispose() {
    // unregister any order dependencies for this Property for PhET-iO state
    if (this.isPhetioInstrumented()) {
      js_propertyStateHandlerSingleton.unregisterOrderDependenciesForProperty(this);
    }
    super.dispose();
    this.tinyProperty.dispose();
  }

  /**
   * Checks whether a listener is registered with this Property
   */
  hasListener(listener) {
    return this.tinyProperty.hasListener(listener);
  }

  /**
   * Returns the number of listeners.
   */
  getListenerCount() {
    return this.tinyProperty.getListenerCount();
  }

  /**
   * Invokes a callback once for each listener
   * @param callback - takes the listener as an argument
   */
  forEachListener(callback) {
    this.tinyProperty.forEachListener(callback);
  }

  /**
   * Returns true if there are any listeners.
   */
  hasListeners() {
    assert && assert(arguments.length === 0, 'Property.hasListeners should be called without arguments');
    return this.tinyProperty.hasListeners();
  }

  /**
   * An observable Property that triggers notifications when the value changes.
   * This caching implementation should be kept in sync with the other parametric IO Type caching implementations.
   */
  static PropertyIO(parameterType) {
    assert && assert(parameterType, 'PropertyIO needs parameterType');
    if (!ReadOnlyProperty_cache.has(parameterType)) {
      ReadOnlyProperty_cache.set(parameterType, new IOType(`PropertyIO<${parameterType.typeName}>`, {
        // We want PropertyIO to work for DynamicProperty and DerivedProperty, but they extend ReadOnlyProperty
        valueType: ReadOnlyProperty,
        documentation: 'Observable values that send out notifications when the value changes. This differs from the ' + 'traditional listener pattern in that added listeners also receive a callback with the current value ' + 'when the listeners are registered. This is a widely-used pattern in PhET-iO simulations.',
        methodOrder: ['link', 'lazyLink'],
        events: [ReadOnlyProperty.CHANGED_EVENT_NAME],
        parameterTypes: [parameterType],
        toStateObject: property => {
          assert && assert(parameterType.toStateObject, `toStateObject doesn't exist for ${parameterType.typeName}`);
          const stateObject = {
            value: parameterType.toStateObject(property.value),
            // Only include validValues if specified, so they only show up in PhET-iO Studio when supplied.
            validValues: property.validValues ? property.validValues.map(v => {
              return parameterType.toStateObject(v);
            }) : null,
            units: types_NullableIO(types_StringIO).toStateObject(property.units)
          };
          return stateObject;
        },
        applyState: (property, stateObject) => {
          const units = types_NullableIO(types_StringIO).fromStateObject(stateObject.units);
          assert && assert(property.units === units, 'Property units do not match');
          assert && assert(property.isSettable(), 'Property should be settable');
          property.unguardedSet(parameterType.fromStateObject(stateObject.value));
          if (stateObject.validValues) {
            property.validValues = stateObject.validValues.map(validValue => parameterType.fromStateObject(validValue));
          }
        },
        stateSchema: {
          value: parameterType,
          validValues: types_NullableIO(types_ArrayIO(parameterType)),
          units: types_NullableIO(types_StringIO)
        },
        methods: {
          getValue: {
            returnType: parameterType,
            parameterTypes: [],
            implementation: ReadOnlyProperty.prototype.get,
            documentation: 'Gets the current value.'
          },
          getValidationError: {
            returnType: types_NullableIO(types_StringIO),
            parameterTypes: [parameterType],
            implementation: ReadOnlyProperty.prototype.getValidationError,
            documentation: 'Checks to see if a proposed value is valid. Returns the first validation error, or null if the value is valid.'
          },
          setValue: {
            returnType: types_VoidIO,
            parameterTypes: [parameterType],
            implementation: function (value) {
              const validationError = Validation.getValidationError(value, this.valueValidator, ReadOnlyProperty_VALIDATE_OPTIONS_FALSE);
              if (validationError) {
                throw new Error(`Validation error: ${validationError}`);
              } else {
                this.set(value);
              }
            },
            documentation: 'Sets the value of the Property. If the value differs from the previous value, listeners are ' + 'notified with the new value.',
            invocableForReadOnlyElements: false
          },
          link: {
            returnType: types_VoidIO,
            // oldValue will start as "null" the first time called
            parameterTypes: [types_FunctionIO(types_VoidIO, [parameterType, types_NullableIO(parameterType)])],
            implementation: ReadOnlyProperty.prototype.link,
            documentation: 'Adds a listener which will be called when the value changes. On registration, the listener is ' + 'also called with the current value. The listener takes two arguments, the new value and the ' + 'previous value.'
          },
          lazyLink: {
            returnType: types_VoidIO,
            // oldValue will start as "null" the first time called
            parameterTypes: [types_FunctionIO(types_VoidIO, [parameterType, types_NullableIO(parameterType)])],
            implementation: ReadOnlyProperty.prototype.lazyLink,
            documentation: 'Adds a listener which will be called when the value changes. This method is like "link", but ' + 'without the current-value callback on registration. The listener takes two arguments, the new ' + 'value and the previous value.'
          },
          unlink: {
            returnType: types_VoidIO,
            parameterTypes: [types_FunctionIO(types_VoidIO, [parameterType])],
            implementation: ReadOnlyProperty.prototype.unlink,
            documentation: 'Removes a listener.'
          }
        }
      }));
    }
    return ReadOnlyProperty_cache.get(parameterType);
  }
  static CHANGED_EVENT_NAME = 'changed';
}
js_axon.register('ReadOnlyProperty', ReadOnlyProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQaGV0aW9PYmplY3QiLCJUYW5kZW0iLCJBcnJheUlPIiwiRnVuY3Rpb25JTyIsIklPVHlwZSIsIk51bGxhYmxlSU8iLCJTdHJpbmdJTyIsIlZvaWRJTyIsInByb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uIiwiUHJvcGVydHlTdGF0ZVBoYXNlIiwiVGlueVByb3BlcnR5IiwidW5pdHMiLCJ2YWxpZGF0ZSIsIm9wdGlvbml6ZSIsIlZhbGlkYXRpb24iLCJheG9uIiwiVkFMSURBVEVfT1BUSU9OU19GQUxTRSIsInZhbGlkYXRlVmFsaWRhdG9yIiwiZ2xvYmFsSWQiLCJjYWNoZSIsIk1hcCIsIlJlYWRPbmx5UHJvcGVydHkiLCJUQU5ERU1fTkFNRV9TVUZGSVgiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInJlZW50cmFudCIsInRhbmRlbSIsIk9QVElPTkFMIiwicGhldGlvT3V0ZXJUeXBlIiwiUHJvcGVydHlJTyIsInBoZXRpb1ZhbHVlVHlwZSIsIk9iamVjdElPIiwiY29udGFpbnNWYWxpZGF0b3JLZXkiLCJpc1ZhbGlkVmFsdWUiLCJhc3NlcnQiLCJpc1ZhbGlkVW5pdHMiLCJwaGV0aW9FdmVudE1ldGFkYXRhIiwiaGFzT3duUHJvcGVydHkiLCJwaGV0aW9UeXBlIiwiaWQiLCJWQUxJREFUSU9OIiwiaXNQaGV0aW9JbnN0cnVtZW50ZWQiLCJwaGV0aW9JRCIsInBhcmFtZXRlclR5cGVzIiwibmFtZSIsImVuZHNXaXRoIiwidmFsaWRWYWx1ZXMiLCJ0aW55UHJvcGVydHkiLCJ1c2VEZWVwRXF1YWxpdHkiLCJ2YWx1ZUNvbXBhcmlzb25TdHJhdGVneSIsIm5vdGlmeWluZyIsImlzRGVmZXJyZWQiLCJkZWZlcnJlZFZhbHVlIiwiaGFzRGVmZXJyZWRWYWx1ZSIsInZhbHVlVmFsaWRhdG9yIiwiXyIsInBpY2siLCJWQUxJREFUT1JfS0VZUyIsInZhbGlkYXRpb25NZXNzYWdlIiwibGluayIsIlBIRVRfSU9fRU5BQkxFRCIsInBoZXRpb1N0YXRlIiwiaXNTZXR0YWJsZSIsImdldCIsInNldCIsInNldE1hbmFnZWRCeVBoZXRpb1N0YXRlIiwiaGFzSW4iLCJ3aW5kb3ciLCJwaGV0Iiwiam9pc3QiLCJzaW0iLCJpc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5IiwiaXNDbGVhcmluZ1BoZXRpb0R5bmFtaWNFbGVtZW50c1Byb3BlcnR5IiwidW5ndWFyZGVkU2V0IiwiaXNEaXNwb3NlZCIsImVxdWFsc1ZhbHVlIiwib2xkVmFsdWUiLCJzZXRQcm9wZXJ0eVZhbHVlIiwiX25vdGlmeUxpc3RlbmVycyIsImFyZVZhbHVlc0VxdWFsIiwiYSIsImIiLCJuZXdWYWx1ZSIsInBoZXRpb1N0YXJ0RXZlbnQiLCJDSEFOR0VEX0VWRU5UX05BTUUiLCJnZXREYXRhIiwicGFyYW1ldGVyVHlwZSIsInRvU3RhdGVPYmplY3QiLCJlbWl0IiwicGhldGlvRW5kRXZlbnQiLCJub3RpZnlMaXN0ZW5lcnNTdGF0aWMiLCJzZXREZWZlcnJlZCIsImFkZFBoZXRpb1N0YXRlRGVwZW5kZW5jaWVzIiwiZGVwZW5kZW5jaWVzIiwiQXJyYXkiLCJpc0FycmF5IiwiaSIsImxlbmd0aCIsImRlcGVuZGVuY3lQcm9wZXJ0eSIsInJlZ2lzdGVyUGhldGlvT3JkZXJEZXBlbmRlbmN5IiwiVU5ERUZFUiIsIk5PVElGWSIsImxpc3RlbmVyIiwicGhldGlvRGVwZW5kZW5jaWVzIiwiYWRkTGlzdGVuZXIiLCJsYXp5TGluayIsInVubGluayIsInVubGlua0FsbCIsImxpbmtBdHRyaWJ1dGUiLCJvYmplY3QiLCJhdHRyaWJ1dGVOYW1lIiwiaGFuZGxlIiwidG9TdHJpbmciLCJkZWJ1ZyIsImNvbnNvbGUiLCJsb2ciLCJpc1ZhbHVlVmFsaWQiLCJnZXRWYWxpZGF0aW9uRXJyb3IiLCJkaXNwb3NlIiwidW5yZWdpc3Rlck9yZGVyRGVwZW5kZW5jaWVzRm9yUHJvcGVydHkiLCJoYXNMaXN0ZW5lciIsImdldExpc3RlbmVyQ291bnQiLCJmb3JFYWNoTGlzdGVuZXIiLCJjYWxsYmFjayIsImhhc0xpc3RlbmVycyIsImFyZ3VtZW50cyIsImhhcyIsInR5cGVOYW1lIiwidmFsdWVUeXBlIiwiZG9jdW1lbnRhdGlvbiIsIm1ldGhvZE9yZGVyIiwiZXZlbnRzIiwicHJvcGVydHkiLCJzdGF0ZU9iamVjdCIsIm1hcCIsInYiLCJhcHBseVN0YXRlIiwiZnJvbVN0YXRlT2JqZWN0IiwidmFsaWRWYWx1ZSIsInN0YXRlU2NoZW1hIiwibWV0aG9kcyIsImdldFZhbHVlIiwicmV0dXJuVHlwZSIsImltcGxlbWVudGF0aW9uIiwicHJvdG90eXBlIiwic2V0VmFsdWUiLCJ2YWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsImludm9jYWJsZUZvclJlYWRPbmx5RWxlbWVudHMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlJlYWRPbmx5UHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG4vKipcbiAqIEFuIG9ic2VydmFibGUgcHJvcGVydHkgd2hpY2ggbm90aWZpZXMgbGlzdGVuZXJzIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgQ2hyaXMgTWFsbGV5IChQaXhlbFpvb20sIEluYy4pXG4gKi9cblxuaW1wb3J0IFBoZXRpb09iamVjdCwgeyBQaGV0aW9PYmplY3RPcHRpb25zIH0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xuaW1wb3J0IEFycmF5SU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0FycmF5SU8uanMnO1xuaW1wb3J0IEZ1bmN0aW9uSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0Z1bmN0aW9uSU8uanMnO1xuaW1wb3J0IElPVHlwZSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvSU9UeXBlLmpzJztcbmltcG9ydCBOdWxsYWJsZUlPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdWxsYWJsZUlPLmpzJztcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xuaW1wb3J0IFZvaWRJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvVm9pZElPLmpzJztcbmltcG9ydCBwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbiBmcm9tICcuL3Byb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uLmpzJztcbmltcG9ydCBQcm9wZXJ0eVN0YXRlUGhhc2UgZnJvbSAnLi9Qcm9wZXJ0eVN0YXRlUGhhc2UuanMnO1xuaW1wb3J0IFRpbnlQcm9wZXJ0eSBmcm9tICcuL1RpbnlQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgdW5pdHMgZnJvbSAnLi91bml0cy5qcyc7XG5pbXBvcnQgdmFsaWRhdGUgZnJvbSAnLi92YWxpZGF0ZS5qcyc7XG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHksIHsgUHJvcGVydHlMYXp5TGlua0xpc3RlbmVyLCBQcm9wZXJ0eUxpbmtMaXN0ZW5lciwgUHJvcGVydHlMaXN0ZW5lciB9IGZyb20gJy4vVFJlYWRPbmx5UHJvcGVydHkuanMnO1xuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBWYWxpZGF0aW9uLCB7IFZhbGlkYXRvciB9IGZyb20gJy4vVmFsaWRhdGlvbi5qcyc7XG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5cbi8vIGNvbnN0YW50c1xuY29uc3QgVkFMSURBVEVfT1BUSU9OU19GQUxTRSA9IHsgdmFsaWRhdGVWYWxpZGF0b3I6IGZhbHNlIH07XG5cbi8vIHZhcmlhYmxlc1xubGV0IGdsb2JhbElkID0gMDsgLy8gYXV0by1pbmNyZW1lbnRlZCBmb3IgdW5pcXVlIElEc1xuXG4vLyBDYWNoZSBlYWNoIHBhcmFtZXRlcml6ZWQgUHJvcGVydHlJTyBiYXNlZCBvbiB0aGUgcGFyYW1ldGVyIHR5cGUsIHNvIHRoYXQgaXQgaXMgb25seSBjcmVhdGVkIG9uY2VcbmNvbnN0IGNhY2hlID0gbmV3IE1hcDxJT1R5cGUsIElPVHlwZT4oKTtcblxuZXhwb3J0IHR5cGUgUmVhZE9ubHlQcm9wZXJ0eVN0YXRlPFN0YXRlVHlwZT4gPSB7XG4gIHZhbHVlOiBTdGF0ZVR5cGU7XG5cbiAgLy8gT25seSBpbmNsdWRlIHZhbGlkVmFsdWVzIGlmIHNwZWNpZmllZCwgc28gdGhleSBvbmx5IHNob3cgdXAgaW4gUGhFVC1pTyBTdHVkaW8gd2hlbiBzdXBwbGllZC5cbiAgdmFsaWRWYWx1ZXM6IFN0YXRlVHlwZVtdIHwgbnVsbDtcblxuICB1bml0czogc3RyaW5nIHwgbnVsbDtcbn07XG5cbi8vIE9wdGlvbnMgZGVmaW5lZCBieSBQcm9wZXJ0eVxudHlwZSBTZWxmT3B0aW9ucyA9IHtcblxuICAvLyB1bml0cyBmb3IgdGhlIG51bWJlciwgc2VlIHVuaXRzLmpzLiBTaG91bGQgcHJlZmVyIGFiYnJldmlhdGVkIHVuaXRzLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vaXNzdWVzLzUzMFxuICB1bml0cz86IHN0cmluZyB8IG51bGw7XG5cbiAgLy8gV2hldGhlciByZWVudHJhbnQgY2FsbHMgdG8gJ3NldCcgYXJlIGFsbG93ZWQuXG4gIC8vIFVzZSB0aGlzIHRvIGRldGVjdCBvciBwcmV2ZW50IHVwZGF0ZSBjeWNsZXMuIFVwZGF0ZSBjeWNsZXMgbWF5IGJlIGR1ZSB0byBmbG9hdGluZyBwb2ludCBlcnJvcixcbiAgLy8gZmF1bHR5IGxvZ2ljLCBldGMuIFRoaXMgbWF5IGJlIG9mIHBhcnRpY3VsYXIgaW50ZXJlc3QgZm9yIFBoRVQtaU8gaW5zdHJ1bWVudGF0aW9uLCB3aGVyZSBzdWNoXG4gIC8vIGN5Y2xlcyBtYXkgcG9sbHV0ZSB0aGUgZGF0YSBzdHJlYW0uIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvMTc5XG4gIHJlZW50cmFudD86IGJvb2xlYW47XG5cbiAgLy8gQXQgdGhpcyBsZXZlbCwgaXQgZG9lc24ndCBtYXR0ZXIgd2hhdCB0aGUgc3RhdGUgdHlwZSBpcywgc28gaXQgZGVmYXVsdHMgdG8gSW50ZW50aW9uYWxBbnlcbiAgcGhldGlvVmFsdWVUeXBlPzogSU9UeXBlO1xuXG4gIC8vIFRoZSBJT1R5cGUgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgcGFyYW1ldGVyaXplZCBJT1R5cGUgYmFzZWQgb24gdGhlIHZhbHVlVHlwZS4gVGhlcmUgaXMgYSBnZW5lcmFsIGRlZmF1bHQsIGJ1dFxuICAvLyBzdWJ0eXBlcyBjYW4gaW1wbGVtZW50IHRoZWlyIG93biwgbW9yZSBzcGVjaWZpYyBJT1R5cGUuXG4gIHBoZXRpb091dGVyVHlwZT86ICggcGFyYW1ldGVyVHlwZTogSU9UeXBlICkgPT4gSU9UeXBlO1xufTtcblxuLy8gT3B0aW9ucyB0aGF0IGNhbiBiZSBwYXNzZWQgaW5cbmV4cG9ydCB0eXBlIFByb3BlcnR5T3B0aW9uczxUPiA9IFNlbGZPcHRpb25zICYgU3RyaWN0T21pdDxWYWxpZGF0b3I8VD4gJiBQaGV0aW9PYmplY3RPcHRpb25zLCAncGhldGlvVHlwZSc+O1xuXG5leHBvcnQgdHlwZSBMaW5rT3B0aW9ucyA9IHtcbiAgcGhldGlvRGVwZW5kZW5jaWVzPzogQXJyYXk8VFJlYWRPbmx5UHJvcGVydHk8dW5rbm93bj4+O1xufTtcblxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBQcm9wZXJ0eSwgRGVyaXZlZFByb3BlcnR5LCBEeW5hbWljUHJvcGVydHkuICBTZXQgbWV0aG9kcyBhcmUgcHJvdGVjdGVkL25vdCBwYXJ0IG9mIHRoZSBwdWJsaWNcbiAqIGludGVyZmFjZS4gIEluaXRpYWwgdmFsdWUgYW5kIHJlc2V0dGluZyBpcyBub3QgZGVmaW5lZCBoZXJlLlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZWFkT25seVByb3BlcnR5PFQ+IGV4dGVuZHMgUGhldGlvT2JqZWN0IGltcGxlbWVudHMgVFJlYWRPbmx5UHJvcGVydHk8VD4ge1xuXG4gIC8vIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGlzIFByb3BlcnR5LlxuICBwcml2YXRlIHJlYWRvbmx5IGlkOiBudW1iZXI7XG5cbiAgLy8gKHBoZXQtaW8pIFVuaXRzLCBpZiBhbnkuICBTZWUgdW5pdHMuanMgZm9yIHZhbGlkIHZhbHVlc1xuICBwdWJsaWMgcmVhZG9ubHkgdW5pdHM6IHN0cmluZyB8IG51bGw7XG5cbiAgcHVibGljIHZhbGlkVmFsdWVzPzogcmVhZG9ubHkgVFtdO1xuXG4gIC8vIGVtaXQgaXMgY2FsbGVkIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMgKG9yIG9uIGxpbmspXG4gIHByaXZhdGUgdGlueVByb3BlcnR5OiBUaW55UHJvcGVydHk8VD47XG5cbiAgLy8gd2hldGhlciB3ZSBhcmUgaW4gdGhlIHByb2Nlc3Mgb2Ygbm90aWZ5aW5nIGxpc3RlbmVyczsgY2hhbmdlZCBpbiBzb21lIFByb3BlcnR5IHRlc3QgZmlsZXMgd2l0aCBAdHMtZXhwZWN0LWVycm9yXG4gIHByaXZhdGUgbm90aWZ5aW5nOiBib29sZWFuO1xuXG4gIC8vIHdoZXRoZXIgdG8gYWxsb3cgcmVlbnRyeSBvZiBjYWxscyB0byBzZXRcbiAgcHJpdmF0ZSByZWFkb25seSByZWVudHJhbnQ6IGJvb2xlYW47XG5cbiAgLy8gd2hpbGUgZGVmZXJyZWQsIG5ldyB2YWx1ZXMgbmVpdGhlciB0YWtlIGVmZmVjdCBub3Igc2VuZCBub3RpZmljYXRpb25zLiAgV2hlbiBpc0RlZmVycmVkIGNoYW5nZXMgZnJvbVxuICAvLyB0cnVlIHRvIGZhbHNlLCB0aGUgZmluYWwgZGVmZXJyZWQgdmFsdWUgYmVjb21lcyB0aGUgUHJvcGVydHkgdmFsdWUuICBBbiBhY3Rpb24gaXMgY3JlYXRlZCB3aGljaCBjYW4gYmUgaW52b2tlZCB0b1xuICAvLyBzZW5kIG5vdGlmaWNhdGlvbnMuXG4gIHB1YmxpYyBpc0RlZmVycmVkOiBib29sZWFuO1xuXG4gIC8vIHRoZSB2YWx1ZSB0aGF0IHRoaXMgUHJvcGVydHkgd2lsbCB0YWtlIGFmdGVyIG5vIGxvbmdlciBkZWZlcnJlZFxuICBwcm90ZWN0ZWQgZGVmZXJyZWRWYWx1ZTogVCB8IG51bGw7XG5cbiAgLy8gd2hldGhlciBhIGRlZmVycmVkIHZhbHVlIGhhcyBiZWVuIHNldFxuICBwcm90ZWN0ZWQgaGFzRGVmZXJyZWRWYWx1ZTogYm9vbGVhbjtcblxuICBwcm90ZWN0ZWQgcmVhZG9ubHkgdmFsdWVWYWxpZGF0b3I6IFZhbGlkYXRvcjxUPjtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBUQU5ERU1fTkFNRV9TVUZGSVg6IHN0cmluZyA9ICdQcm9wZXJ0eSc7XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgcHJvdGVjdGVkIHRvIGluZGljYXRlIHRvIGNsaWVudHMgdGhhdCBzdWJjbGFzc2VzIHNob3VsZCBiZSB1c2VkIGluc3RlYWQuXG4gICAqIEBwYXJhbSB2YWx1ZSAtIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoZSBwcm9wZXJ0eVxuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc11cbiAgICovXG4gIHByb3RlY3RlZCBjb25zdHJ1Y3RvciggdmFsdWU6IFQsIHByb3ZpZGVkT3B0aW9ucz86IFByb3BlcnR5T3B0aW9uczxUPiApIHtcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFByb3BlcnR5T3B0aW9uczxUPiwgU2VsZk9wdGlvbnMsIFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIHtcblxuICAgICAgdW5pdHM6IG51bGwsXG4gICAgICByZWVudHJhbnQ6IGZhbHNlLFxuXG4gICAgICAvLyBwaGV0LWlvXG4gICAgICB0YW5kZW06IFRhbmRlbS5PUFRJT05BTCxcbiAgICAgIHBoZXRpb091dGVyVHlwZTogUmVhZE9ubHlQcm9wZXJ0eS5Qcm9wZXJ0eUlPLFxuICAgICAgcGhldGlvVmFsdWVUeXBlOiBJT1R5cGUuT2JqZWN0SU9cbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICAgIC8vIFN1cHBvcnQgbm9uLXZhbGlkYXRlZCBQcm9wZXJ0eVxuICAgIGlmICggIVZhbGlkYXRpb24uY29udGFpbnNWYWxpZGF0b3JLZXkoIG9wdGlvbnMgKSApIHtcblxuICAgICAgb3B0aW9ucy5pc1ZhbGlkVmFsdWUgPSAoKSA9PiB0cnVlO1xuICAgIH1cblxuICAgIGFzc2VydCAmJiBvcHRpb25zLnVuaXRzICYmIGFzc2VydCggdW5pdHMuaXNWYWxpZFVuaXRzKCBvcHRpb25zLnVuaXRzICksIGBpbnZhbGlkIHVuaXRzOiAke29wdGlvbnMudW5pdHN9YCApO1xuICAgIGlmICggb3B0aW9ucy51bml0cyApIHtcbiAgICAgIG9wdGlvbnMucGhldGlvRXZlbnRNZXRhZGF0YSA9IG9wdGlvbnMucGhldGlvRXZlbnRNZXRhZGF0YSB8fCB7fTtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoICFvcHRpb25zLnBoZXRpb0V2ZW50TWV0YWRhdGEuaGFzT3duUHJvcGVydHkoICd1bml0cycgKSwgJ3VuaXRzIHNob3VsZCBiZSBzdXBwbGllZCBieSBQcm9wZXJ0eSwgbm90IGVsc2V3aGVyZScgKTtcbiAgICAgIG9wdGlvbnMucGhldGlvRXZlbnRNZXRhZGF0YS51bml0cyA9IG9wdGlvbnMudW5pdHM7XG4gICAgfVxuXG4gICAgaWYgKCBhc3NlcnQgJiYgcHJvdmlkZWRPcHRpb25zICkge1xuXG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yIC0tIGZvciBjaGVja2luZyBKUyBjb2RlXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhcHJvdmlkZWRPcHRpb25zLnBoZXRpb1R5cGUsICdTZXQgcGhldGlvVHlwZSB2aWEgcGhldGlvVmFsdWVUeXBlJyApO1xuICAgIH1cblxuICAgIC8vIENvbnN0cnVjdCB0aGUgSU8gVHlwZVxuICAgIGlmICggb3B0aW9ucy5waGV0aW9PdXRlclR5cGUgJiYgb3B0aW9ucy5waGV0aW9WYWx1ZVR5cGUgKSB7XG4gICAgICBvcHRpb25zLnBoZXRpb1R5cGUgPSBvcHRpb25zLnBoZXRpb091dGVyVHlwZSggb3B0aW9ucy5waGV0aW9WYWx1ZVR5cGUgKTtcbiAgICB9XG4gICAgc3VwZXIoIG9wdGlvbnMgKTtcbiAgICB0aGlzLmlkID0gZ2xvYmFsSWQrKztcbiAgICB0aGlzLnVuaXRzID0gb3B0aW9ucy51bml0cztcblxuICAgIC8vIFdoZW4gcnVubmluZyBhcyBwaGV0LWlvLCBpZiB0aGUgdGFuZGVtIGlzIHNwZWNpZmllZCwgdGhlIHR5cGUgbXVzdCBiZSBzcGVjaWZpZWQuXG4gICAgaWYgKCBUYW5kZW0uVkFMSURBVElPTiAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgKSB7XG5cbiAgICAgIC8vIFRoaXMgYXNzZXJ0aW9uIGhlbHBzIGluIGluc3RydW1lbnRpbmcgY29kZSB0aGF0IGhhcyB0aGUgdGFuZGVtIGJ1dCBub3QgdHlwZVxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5waGV0aW9UeXBlLCBgcGhldGlvVHlwZSBwYXNzZWQgdG8gUHJvcGVydHkgbXVzdCBiZSBzcGVjaWZpZWQuIFRhbmRlbS5waGV0aW9JRDogJHt0aGlzLnRhbmRlbS5waGV0aW9JRH1gICk7XG5cbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMucGhldGlvVHlwZS5wYXJhbWV0ZXJUeXBlcyFbIDAgXSwgYHBoZXRpb1R5cGUgcGFyYW1ldGVyIHR5cGUgbXVzdCBiZSBzcGVjaWZpZWQgKG9ubHkgb25lKS4gVGFuZGVtLnBoZXRpb0lEOiAke3RoaXMudGFuZGVtLnBoZXRpb0lEfWAgKTtcbiAgICB9XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSB8fFxuICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMudGFuZGVtLm5hbWUuZW5kc1dpdGgoIFJlYWRPbmx5UHJvcGVydHkuVEFOREVNX05BTUVfU1VGRklYICkgfHxcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnRhbmRlbS5uYW1lID09PSAncHJvcGVydHknLFxuICAgICAgYFByb3BlcnR5IHRhbmRlbS5uYW1lIG11c3QgZW5kIHdpdGggUHJvcGVydHk6ICR7b3B0aW9ucy50YW5kZW0ucGhldGlvSUR9YCApO1xuXG4gICAgdGhpcy52YWxpZFZhbHVlcyA9IG9wdGlvbnMudmFsaWRWYWx1ZXM7XG5cbiAgICB0aGlzLnRpbnlQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIHZhbHVlICk7XG5cbiAgICAvLyBTaW5jZSB3ZSBhcmUgYWxyZWFkeSBpbiB0aGUgaGVhdnl3ZWlnaHQgUHJvcGVydHksIHdlIGFsd2F5cyBhc3NpZ24gVGlueVByb3BlcnR5LnVzZURlZXBFcXVhbGl0eSBmb3IgY2xhcml0eS5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgdGhpcy50aW55UHJvcGVydHkudXNlRGVlcEVxdWFsaXR5ID0gb3B0aW9ucy52YWx1ZUNvbXBhcmlzb25TdHJhdGVneSAmJiBvcHRpb25zLnZhbHVlQ29tcGFyaXNvblN0cmF0ZWd5ID09PSAnZXF1YWxzRnVuY3Rpb24nO1xuICAgIHRoaXMubm90aWZ5aW5nID0gZmFsc2U7XG4gICAgdGhpcy5yZWVudHJhbnQgPSBvcHRpb25zLnJlZW50cmFudDtcbiAgICB0aGlzLmlzRGVmZXJyZWQgPSBmYWxzZTtcbiAgICB0aGlzLmRlZmVycmVkVmFsdWUgPSBudWxsO1xuICAgIHRoaXMuaGFzRGVmZXJyZWRWYWx1ZSA9IGZhbHNlO1xuXG4gICAgdGhpcy52YWx1ZVZhbGlkYXRvciA9IF8ucGljayggb3B0aW9ucywgVmFsaWRhdGlvbi5WQUxJREFUT1JfS0VZUyApO1xuICAgIHRoaXMudmFsdWVWYWxpZGF0b3IudmFsaWRhdGlvbk1lc3NhZ2UgPSB0aGlzLnZhbHVlVmFsaWRhdG9yLnZhbGlkYXRpb25NZXNzYWdlIHx8ICdQcm9wZXJ0eSB2YWx1ZSBub3QgdmFsaWQnO1xuXG4gICAgaWYgKCB0aGlzLnZhbHVlVmFsaWRhdG9yLnBoZXRpb1R5cGUgKSB7XG5cbiAgICAgIC8vIFZhbGlkYXRlIHRoZSB2YWx1ZSB0eXBlJ3MgcGhldGlvVHlwZSBvZiB0aGUgUHJvcGVydHksIG5vdCB0aGUgUHJvcGVydHlJTyBpdHNlbGYuXG4gICAgICAvLyBGb3IgZXhhbXBsZSwgZm9yIFByb3BlcnR5SU8oIEJvb2xlYW5JTyApLCBhc3NpZ24gdGhpcyB2YWx1ZVZhbGlkYXRvcidzIHBoZXRpb1R5cGUgdG8gYmUgQm9vbGVhbklPJ3MgdmFsaWRhdG9yLlxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggISF0aGlzLnZhbHVlVmFsaWRhdG9yLnBoZXRpb1R5cGUucGFyYW1ldGVyVHlwZXMhWyAwIF0sICd1bmV4cGVjdGVkIG51bWJlciBvZiBwYXJhbWV0ZXJzIGZvciBQcm9wZXJ0eScgKTtcblxuICAgICAgLy8gVGhpcyBpcyB0aGUgdmFsaWRhdG9yIGZvciB0aGUgdmFsdWUsIG5vdCBmb3IgdGhlIFByb3BlcnR5IGl0c2VsZlxuICAgICAgdGhpcy52YWx1ZVZhbGlkYXRvci5waGV0aW9UeXBlID0gdGhpcy52YWx1ZVZhbGlkYXRvci5waGV0aW9UeXBlLnBhcmFtZXRlclR5cGVzIVsgMCBdO1xuICAgIH1cblxuICAgIC8vIEFzc2VydGlvbnMgcmVnYXJkaW5nIHZhbHVlIHZhbGlkYXRpb25cbiAgICBpZiAoIGFzc2VydCApIHtcblxuICAgICAgVmFsaWRhdGlvbi52YWxpZGF0ZVZhbGlkYXRvciggdGhpcy52YWx1ZVZhbGlkYXRvciApO1xuXG4gICAgICAvLyB2YWxpZGF0ZSB0aGUgaW5pdGlhbCB2YWx1ZSBhcyB3ZWxsIGFzIGFueSBjaGFuZ2VzIGluIHRoZSBmdXR1cmVcbiAgICAgIHRoaXMubGluayggKCB2YWx1ZTogVCApID0+IHZhbGlkYXRlKCB2YWx1ZSwgdGhpcy52YWx1ZVZhbGlkYXRvciwgVkFMSURBVEVfT1BUSU9OU19GQUxTRSApICk7XG5cbiAgICAgIGlmICggVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgJiYgdGhpcy5waGV0aW9TdGF0ZSAmJiBUYW5kZW0uVkFMSURBVElPTiApIHtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5waGV0aW9WYWx1ZVR5cGUgIT09IElPVHlwZS5PYmplY3RJTywgJ1N0YXRlZnVsIFBoRVQtaU8gUHJvcGVydGllcyBtdXN0IHNwZWNpZnkgYSBwaGV0aW9WYWx1ZVR5cGU6ICcgKyB0aGlzLnBoZXRpb0lEICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdmFsdWUgY2FuIGJlIHNldCBleHRlcm5hbGx5LCB1c2luZyAudmFsdWU9IG9yIHNldCgpXG4gICAqL1xuICBwdWJsaWMgaXNTZXR0YWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgdmFsdWUuXG4gICAqIFlvdSBjYW4gYWxzbyB1c2UgdGhlIGVzNSBnZXR0ZXIgKHByb3BlcnR5LnZhbHVlKSBidXQgdGhpcyBtZWFucyBpcyBwcm92aWRlZCBmb3IgaW5uZXIgbG9vcHNcbiAgICogb3IgaW50ZXJuYWwgY29kZSB0aGF0IG11c3QgYmUgZmFzdC5cbiAgICovXG4gIHB1YmxpYyBnZXQoKTogVCB7XG4gICAgcmV0dXJuIHRoaXMudGlueVByb3BlcnR5LmdldCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIGFuZCBub3RpZmllcyBsaXN0ZW5lcnMsIHVubGVzcyBkZWZlcnJlZCBvciBkaXNwb3NlZC4gWW91IGNhbiBhbHNvIHVzZSB0aGUgZXM1IGdldHRlclxuICAgKiAocHJvcGVydHkudmFsdWUpIGJ1dCB0aGlzIG1lYW5zIGlzIHByb3ZpZGVkIGZvciBpbm5lciBsb29wcyBvciBpbnRlcm5hbCBjb2RlIHRoYXQgbXVzdCBiZSBmYXN0LiBJZiB0aGUgdmFsdWVcbiAgICogaGFzbid0IGNoYW5nZWQsIHRoaXMgaXMgYSBuby1vcC4gIEZvciBQaEVULWlPIGluc3RydW1lbnRlZCBQcm9wZXJ0aWVzIHRoYXQgYXJlIHBoZXRpb1N0YXRlOiB0cnVlLCB0aGUgdmFsdWUgaXMgb25seVxuICAgKiBzZXQgYnkgdGhlIHN0YXRlIGFuZCBjYW5ub3QgYmUgbW9kaWZpZWQgYnkgb3RoZXIgY29kZSB3aGlsZSBpc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5ID09PSB0cnVlXG4gICAqL1xuICBwcm90ZWN0ZWQgc2V0KCB2YWx1ZTogVCApOiB2b2lkIHtcblxuICAgIC8vIHN0YXRlIGlzIG1hbmFnZWQgYnkgdGhlIFBoZXRpb1N0YXRlRW5naW5lLlxuICAgIC8vIFdlIHN0aWxsIHdhbnQgdG8gc2V0IFByb3BlcnRpZXMgd2hlbiBjbGVhcmluZyBkeW5hbWljIGVsZW1lbnRzLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vaXNzdWVzLzE5MDZcbiAgICBjb25zdCBzZXRNYW5hZ2VkQnlQaGV0aW9TdGF0ZSA9IF8uaGFzSW4oIHdpbmRvdywgJ3BoZXQuam9pc3Quc2ltLmlzU2V0dGluZ1BoZXRpb1N0YXRlUHJvcGVydHknICkgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBoZXQuam9pc3Quc2ltLmlzU2V0dGluZ1BoZXRpb1N0YXRlUHJvcGVydHkudmFsdWUgJiZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIF8uaGFzSW4oIHdpbmRvdywgJ3BoZXQuam9pc3Quc2ltLmlzQ2xlYXJpbmdQaGV0aW9EeW5hbWljRWxlbWVudHNQcm9wZXJ0eScgKSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIXBoZXQuam9pc3Quc2ltLmlzQ2xlYXJpbmdQaGV0aW9EeW5hbWljRWxlbWVudHNQcm9wZXJ0eS52YWx1ZSAmJlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpICYmIHRoaXMucGhldGlvU3RhdGUgJiZcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93ZXZlciwgRGVyaXZlZFByb3BlcnR5IHNob3VsZCBiZSBhYmxlIHRvIHVwZGF0ZSBkdXJpbmcgUGhFVC1pTyBzdGF0ZSBzZXRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaXNTZXR0YWJsZSgpO1xuXG4gICAgaWYgKCAhc2V0TWFuYWdlZEJ5UGhldGlvU3RhdGUgKSB7XG4gICAgICB0aGlzLnVuZ3VhcmRlZFNldCggdmFsdWUgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9yIHVzYWdlIGJ5IHRoZSBJTyBUeXBlIGR1cmluZyBQaEVULWlPIHN0YXRlIHNldHRpbmcuXG4gICAqL1xuICBwcm90ZWN0ZWQgdW5ndWFyZGVkU2V0KCB2YWx1ZTogVCApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmlzRGlzcG9zZWQgKSB7XG4gICAgICBpZiAoIHRoaXMuaXNEZWZlcnJlZCApIHtcbiAgICAgICAgdGhpcy5kZWZlcnJlZFZhbHVlID0gdmFsdWU7XG4gICAgICAgIHRoaXMuaGFzRGVmZXJyZWRWYWx1ZSA9IHRydWU7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICggIXRoaXMuZXF1YWxzVmFsdWUoIHZhbHVlICkgKSB7XG4gICAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5nZXQoKTtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKCB2YWx1ZSApO1xuICAgICAgICB0aGlzLl9ub3RpZnlMaXN0ZW5lcnMoIG9sZFZhbHVlICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIHdpdGhvdXQgbm90aWZ5aW5nIGFueSBsaXN0ZW5lcnMuIFRoaXMgaXMgYSBwbGFjZSB0byBvdmVycmlkZSBpZiBhIHN1YnR5cGUgcGVyZm9ybXMgYWRkaXRpb25hbCB3b3JrXG4gICAqIHdoZW4gc2V0dGluZyB0aGUgdmFsdWUuXG4gICAqL1xuICBwcm90ZWN0ZWQgc2V0UHJvcGVydHlWYWx1ZSggdmFsdWU6IFQgKTogdm9pZCB7XG4gICAgdGhpcy50aW55UHJvcGVydHkuc2V0UHJvcGVydHlWYWx1ZSggdmFsdWUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBlcXVhbHMgdGhlIHZhbHVlIG9mIHRoaXMgcHJvcGVydHlcbiAgICovXG4gIHByb3RlY3RlZCBlcXVhbHNWYWx1ZSggdmFsdWU6IFQgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYXJlVmFsdWVzRXF1YWwoIHZhbHVlLCB0aGlzLmdldCgpICk7XG4gIH1cblxuICAvKipcbiAgICogU2VlIFRpbnlQcm9wZXJ0eS5hcmVWYWx1ZXNFcXVhbFxuICAgKi9cbiAgcHVibGljIGFyZVZhbHVlc0VxdWFsKCBhOiBULCBiOiBUICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRpbnlQcm9wZXJ0eS5hcmVWYWx1ZXNFcXVhbCggYSwgYiApO1xuICB9XG5cbiAgLyoqXG4gICAqIE5PVEU6IGEgZmV3IHNpbXMgYXJlIGNhbGxpbmcgdGhpcyBldmVuIHRob3VnaCB0aGV5IHNob3VsZG4ndFxuICAgKi9cbiAgcHJpdmF0ZSBfbm90aWZ5TGlzdGVuZXJzKCBvbGRWYWx1ZTogVCB8IG51bGwgKTogdm9pZCB7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLmdldCgpO1xuXG4gICAgLy8gQWx0aG91Z2ggdGhpcyBpcyBub3QgdGhlIGlkaW9tYXRpYyBwYXR0ZXJuIChzaW5jZSBpdCBpcyBndWFyZGVkIGluIHRoZSBwaGV0aW9TdGFydEV2ZW50KSwgdGhpcyBmdW5jdGlvbiBpc1xuICAgIC8vIGNhbGxlZCBzbyBtYW55IHRpbWVzIHRoYXQgaXQgaXMgd29ydGggdGhlIG9wdGltaXphdGlvbiBmb3IgUGhFVCBicmFuZC5cbiAgICBUYW5kZW0uUEhFVF9JT19FTkFCTEVEICYmIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSAmJiB0aGlzLnBoZXRpb1N0YXJ0RXZlbnQoIFJlYWRPbmx5UHJvcGVydHkuQ0hBTkdFRF9FVkVOVF9OQU1FLCB7XG4gICAgICBnZXREYXRhOiAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHBhcmFtZXRlclR5cGUgPSB0aGlzLnBoZXRpb1R5cGUucGFyYW1ldGVyVHlwZXMhWyAwIF07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgb2xkVmFsdWU6IE51bGxhYmxlSU8oIHBhcmFtZXRlclR5cGUgKS50b1N0YXRlT2JqZWN0KCBvbGRWYWx1ZSApLFxuICAgICAgICAgIG5ld1ZhbHVlOiBwYXJhbWV0ZXJUeXBlLnRvU3RhdGVPYmplY3QoIG5ld1ZhbHVlIClcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICAvLyBub3RpZnkgbGlzdGVuZXJzLCBvcHRpb25hbGx5IGRldGVjdCBsb29wcyB3aGVyZSB0aGlzIFByb3BlcnR5IGlzIHNldCBhZ2FpbiBiZWZvcmUgdGhpcyBjb21wbGV0ZXMuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMubm90aWZ5aW5nIHx8IHRoaXMucmVlbnRyYW50LFxuICAgICAgYHJlZW50cnkgZGV0ZWN0ZWQsIHZhbHVlPSR7bmV3VmFsdWV9LCBvbGRWYWx1ZT0ke29sZFZhbHVlfWAgKTtcbiAgICB0aGlzLm5vdGlmeWluZyA9IHRydWU7XG4gICAgdGhpcy50aW55UHJvcGVydHkuZW1pdCggbmV3VmFsdWUsIG9sZFZhbHVlLCB0aGlzICk7IC8vIGNhbm5vdCB1c2UgdGlueVByb3BlcnR5Lm5vdGlmeUxpc3RlbmVycyBiZWNhdXNlIGl0IHVzZXMgdGhlIHdyb25nIHRoaXNcbiAgICB0aGlzLm5vdGlmeWluZyA9IGZhbHNlO1xuXG4gICAgVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgJiYgdGhpcy5waGV0aW9FbmRFdmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZSB0aGlzIG1ldGhvZCB3aGVuIG11dGF0aW5nIGEgdmFsdWUgKG5vdCByZXBsYWNpbmcgd2l0aCBhIG5ldyBpbnN0YW5jZSkgYW5kIHlvdSB3YW50IHRvIHNlbmQgbm90aWZpY2F0aW9ucyBhYm91dCB0aGUgY2hhbmdlLlxuICAgKiBUaGlzIGlzIGRpZmZlcmVudCBmcm9tIHRoZSBub3JtYWwgYXhvbiBzdHJhdGVneSwgYnV0IG1heSBiZSBuZWNlc3NhcnkgdG8gcHJldmVudCBtZW1vcnkgYWxsb2NhdGlvbnMuXG4gICAqIFRoaXMgbWV0aG9kIGlzIHVuc2FmZSBmb3IgcmVtb3ZpbmcgbGlzdGVuZXJzIGJlY2F1c2UgaXQgYXNzdW1lcyB0aGUgbGlzdGVuZXIgbGlzdCBub3QgbW9kaWZpZWQsIHRvIHNhdmUgYW5vdGhlciBhbGxvY2F0aW9uXG4gICAqIE9ubHkgcHJvdmlkZXMgdGhlIG5ldyByZWZlcmVuY2UgYXMgYSBjYWxsYmFjayAobm8gb2xkdmFsdWUpXG4gICAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvNlxuICAgKi9cbiAgcHVibGljIG5vdGlmeUxpc3RlbmVyc1N0YXRpYygpOiB2b2lkIHtcbiAgICB0aGlzLl9ub3RpZnlMaXN0ZW5lcnMoIG51bGwgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGVuIGRlZmVycmVkLCBzZXQgdmFsdWVzIGRvIG5vdCB0YWtlIGVmZmVjdCBvciBzZW5kIG91dCBub3RpZmljYXRpb25zLiAgQWZ0ZXIgZGVmZXIgZW5kcywgdGhlIFByb3BlcnR5IHRha2VzXG4gICAqIGl0cyBkZWZlcnJlZCB2YWx1ZSAoaWYgYW55KSwgYW5kIGEgZm9sbG93LXVwIGFjdGlvbiAocmV0dXJuIHZhbHVlKSBjYW4gYmUgaW52b2tlZCB0byBzZW5kIG91dCBub3RpZmljYXRpb25zXG4gICAqIG9uY2Ugb3RoZXIgUHJvcGVydGllcyBoYXZlIGFsc28gdGFrZW4gdGhlaXIgZGVmZXJyZWQgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0gaXNEZWZlcnJlZCAtIHdoZXRoZXIgdGhlIFByb3BlcnR5IHNob3VsZCBiZSBkZWZlcnJlZCBvciBub3RcbiAgICogQHJldHVybnMgLSBmdW5jdGlvbiB0byBub3RpZnkgbGlzdGVuZXJzIGFmdGVyIGNhbGxpbmcgc2V0RGVmZXJyZWQoZmFsc2UpLFxuICAgKiAgICAgICAgICAtIG51bGwgaWYgaXNEZWZlcnJlZCBpcyB0cnVlLCBvciBpZiB0aGUgdmFsdWUgaXMgdW5jaGFuZ2VkIHNpbmNlIGNhbGxpbmcgc2V0RGVmZXJyZWQodHJ1ZSlcbiAgICovXG4gIHB1YmxpYyBzZXREZWZlcnJlZCggaXNEZWZlcnJlZDogYm9vbGVhbiApOiAoICgpID0+IHZvaWQgKSB8IG51bGwge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmlzRGlzcG9zZWQsICdjYW5ub3QgZGVmZXIgUHJvcGVydHkgaWYgYWxyZWFkeSBkaXNwb3NlZC4nICk7XG4gICAgaWYgKCBpc0RlZmVycmVkICkge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuaXNEZWZlcnJlZCwgJ1Byb3BlcnR5IGFscmVhZHkgZGVmZXJyZWQnICk7XG4gICAgICB0aGlzLmlzRGVmZXJyZWQgPSB0cnVlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuaXNEZWZlcnJlZCwgJ1Byb3BlcnR5IHdhc25cXCd0IGRlZmVycmVkJyApO1xuICAgICAgdGhpcy5pc0RlZmVycmVkID0gZmFsc2U7XG5cbiAgICAgIGNvbnN0IG9sZFZhbHVlID0gdGhpcy5nZXQoKTtcblxuICAgICAgLy8gVGFrZSB0aGUgbmV3IHZhbHVlXG4gICAgICBpZiAoIHRoaXMuaGFzRGVmZXJyZWRWYWx1ZSApIHtcbiAgICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKCB0aGlzLmRlZmVycmVkVmFsdWUhICk7XG4gICAgICAgIHRoaXMuaGFzRGVmZXJyZWRWYWx1ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLmRlZmVycmVkVmFsdWUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB0aGUgdmFsdWUgaGFzIGNoYW5nZWQsIHByZXBhcmUgdG8gc2VuZCBvdXQgbm90aWZpY2F0aW9ucyAoYWZ0ZXIgYWxsIG90aGVyIFByb3BlcnRpZXMgaW4gdGhpcyB0cmFuc2FjdGlvblxuICAgICAgLy8gaGF2ZSB0aGVpciBmaW5hbCB2YWx1ZXMpXG4gICAgICBpZiAoICF0aGlzLmVxdWFsc1ZhbHVlKCBvbGRWYWx1ZSApICkge1xuICAgICAgICByZXR1cm4gKCkgPT4gIXRoaXMuaXNEaXNwb3NlZCAmJiB0aGlzLl9ub3RpZnlMaXN0ZW5lcnMoIG9sZFZhbHVlICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gbm8gYWN0aW9uIHRvIHNpZ25pZnkgY2hhbmdlXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHZhbHVlKCk6IFQge1xuICAgIHJldHVybiB0aGlzLmdldCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHNldCB2YWx1ZSggbmV3VmFsdWU6IFQgKSB7XG4gICAgdGhpcy5zZXQoIG5ld1ZhbHVlICk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBmdW5jdGlvbiByZWdpc3RlcnMgYW4gb3JkZXIgZGVwZW5kZW5jeSBiZXR3ZWVuIHRoaXMgUHJvcGVydHkgYW5kIGFub3RoZXIuIEJhc2ljYWxseSB0aGlzIHNheXMgdGhhdCB3aGVuXG4gICAqIHNldHRpbmcgUGhFVC1pTyBzdGF0ZSwgZWFjaCBkZXBlbmRlbmN5IG11c3QgdGFrZSBpdHMgZmluYWwgdmFsdWUgYmVmb3JlIHRoaXMgUHJvcGVydHkgZmlyZXMgaXRzIG5vdGlmaWNhdGlvbnMuXG4gICAqIFNlZSBwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbi5yZWdpc3RlclBoZXRpb09yZGVyRGVwZW5kZW5jeSBhbmQgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2F4b24vaXNzdWVzLzI3NiBmb3IgbW9yZSBpbmZvLlxuICAgKi9cbiAgcHVibGljIGFkZFBoZXRpb1N0YXRlRGVwZW5kZW5jaWVzKCBkZXBlbmRlbmNpZXM6IEFycmF5PFRSZWFkT25seVByb3BlcnR5PEludGVudGlvbmFsQW55Pj4gKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggQXJyYXkuaXNBcnJheSggZGVwZW5kZW5jaWVzICksICdBcnJheSBleHBlY3RlZCcgKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBkZXBlbmRlbmNpZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBjb25zdCBkZXBlbmRlbmN5UHJvcGVydHkgPSBkZXBlbmRlbmNpZXNbIGkgXTtcblxuICAgICAgLy8gb25seSBpZiBydW5uaW5nIGluIFBoRVQtaU8gYnJhbmQgYW5kIGJvdGggUHJvcGVydGllcyBhcmUgaW5zdHJ1bWVudGluZ1xuICAgICAgaWYgKCBkZXBlbmRlbmN5UHJvcGVydHkgaW5zdGFuY2VvZiBSZWFkT25seVByb3BlcnR5ICYmIGRlcGVuZGVuY3lQcm9wZXJ0eS5pc1BoZXRpb0luc3RydW1lbnRlZCgpICYmIHRoaXMuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSApIHtcblxuICAgICAgICAvLyBUaGUgZGVwZW5kZW5jeSBzaG91bGQgdW5kZWZlciAodGFraW5nIGRlZmVycmVkIHZhbHVlKSBiZWZvcmUgdGhpcyBQcm9wZXJ0eSBub3RpZmllcy5cbiAgICAgICAgcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24ucmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3koIGRlcGVuZGVuY3lQcm9wZXJ0eSwgUHJvcGVydHlTdGF0ZVBoYXNlLlVOREVGRVIsIHRoaXMsIFByb3BlcnR5U3RhdGVQaGFzZS5OT1RJRlkgKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBsaXN0ZW5lciBhbmQgY2FsbHMgaXQgaW1tZWRpYXRlbHkuIElmIGxpc3RlbmVyIGlzIGFscmVhZHkgcmVnaXN0ZXJlZCwgdGhpcyBpcyBhIG5vLW9wLiBUaGUgaW5pdGlhbFxuICAgKiBub3RpZmljYXRpb24gcHJvdmlkZXMgdGhlIGN1cnJlbnQgdmFsdWUgZm9yIG5ld1ZhbHVlIGFuZCBudWxsIGZvciBvbGRWYWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIGxpc3RlbmVyIC0gYSBmdW5jdGlvbiB0aGF0IHRha2VzIGEgbmV3IHZhbHVlLCBvbGQgdmFsdWUsIGFuZCB0aGlzIFByb3BlcnR5IGFzIGFyZ3VtZW50c1xuICAgKiBAcGFyYW0gW29wdGlvbnNdXG4gICAqL1xuICBwdWJsaWMgbGluayggbGlzdGVuZXI6IFByb3BlcnR5TGlua0xpc3RlbmVyPFQ+LCBvcHRpb25zPzogTGlua09wdGlvbnMgKTogdm9pZCB7XG4gICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMucGhldGlvRGVwZW5kZW5jaWVzICkge1xuICAgICAgdGhpcy5hZGRQaGV0aW9TdGF0ZURlcGVuZGVuY2llcyggb3B0aW9ucy5waGV0aW9EZXBlbmRlbmNpZXMgKTtcbiAgICB9XG5cbiAgICB0aGlzLnRpbnlQcm9wZXJ0eS5hZGRMaXN0ZW5lciggbGlzdGVuZXIgKTsgLy8gY2Fubm90IHVzZSB0aW55UHJvcGVydHkubGluaygpIGJlY2F1c2Ugb2Ygd3JvbmcgdGhpc1xuICAgIGxpc3RlbmVyKCB0aGlzLmdldCgpLCBudWxsLCB0aGlzICk7IC8vIG51bGwgc2hvdWxkIGJlIHVzZWQgd2hlbiBhbiBvYmplY3QgaXMgZXhwZWN0ZWQgYnV0IHVuYXZhaWxhYmxlXG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgbGlzdGVuZXIgdG8gdGhlIFByb3BlcnR5LCB3aXRob3V0IGNhbGxpbmcgaXQgYmFjayByaWdodCBhd2F5LiBUaGlzIGlzIHVzZWQgd2hlbiB5b3UgbmVlZCB0byByZWdpc3RlciBhXG4gICAqIGxpc3RlbmVyIHdpdGhvdXQgYW4gaW1tZWRpYXRlIGNhbGxiYWNrLlxuICAgKi9cbiAgcHVibGljIGxhenlMaW5rKCBsaXN0ZW5lcjogUHJvcGVydHlMYXp5TGlua0xpc3RlbmVyPFQ+LCBvcHRpb25zPzogTGlua09wdGlvbnMgKTogdm9pZCB7XG4gICAgaWYgKCBvcHRpb25zICYmIG9wdGlvbnMucGhldGlvRGVwZW5kZW5jaWVzICkge1xuICAgICAgdGhpcy5hZGRQaGV0aW9TdGF0ZURlcGVuZGVuY2llcyggb3B0aW9ucy5waGV0aW9EZXBlbmRlbmNpZXMgKTtcbiAgICB9XG4gICAgdGhpcy50aW55UHJvcGVydHkubGF6eUxpbmsoIGxpc3RlbmVyICk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyBhIGxpc3RlbmVyLiBJZiBsaXN0ZW5lciBpcyBub3QgcmVnaXN0ZXJlZCwgdGhpcyBpcyBhIG5vLW9wLlxuICAgKi9cbiAgcHVibGljIHVubGluayggbGlzdGVuZXI6IFByb3BlcnR5TGlzdGVuZXI8VD4gKTogdm9pZCB7XG4gICAgdGhpcy50aW55UHJvcGVydHkudW5saW5rKCBsaXN0ZW5lciApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIGxpc3RlbmVycy4gSWYgbm8gbGlzdGVuZXJzIGFyZSByZWdpc3RlcmVkLCB0aGlzIGlzIGEgbm8tb3AuXG4gICAqL1xuICBwdWJsaWMgdW5saW5rQWxsKCk6IHZvaWQge1xuICAgIHRoaXMudGlueVByb3BlcnR5LnVubGlua0FsbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpbmtzIGFuIG9iamVjdCdzIG5hbWVkIGF0dHJpYnV0ZSB0byB0aGlzIHByb3BlcnR5LiAgUmV0dXJucyBhIGhhbmRsZSBzbyBpdCBjYW4gYmUgcmVtb3ZlZCB1c2luZyBQcm9wZXJ0eS51bmxpbmsoKTtcbiAgICogRXhhbXBsZTogbW9kZWxWaXNpYmxlUHJvcGVydHkubGlua0F0dHJpYnV0ZSh2aWV3LCd2aXNpYmxlJyk7XG4gICAqXG4gICAqIE5PVEU6IER1cGxpY2F0ZWQgd2l0aCBUaW55UHJvcGVydHkubGlua0F0dHJpYnV0ZVxuICAgKi9cbiAgcHVibGljIGxpbmtBdHRyaWJ1dGUoIG9iamVjdDogSW50ZW50aW9uYWxBbnksIGF0dHJpYnV0ZU5hbWU6IHN0cmluZyApOiAoIHZhbHVlOiBUICkgPT4gdm9pZCB7XG4gICAgY29uc3QgaGFuZGxlID0gKCB2YWx1ZTogVCApID0+IHsgb2JqZWN0WyBhdHRyaWJ1dGVOYW1lIF0gPSB2YWx1ZTsgfTtcbiAgICB0aGlzLmxpbmsoIGhhbmRsZSApO1xuICAgIHJldHVybiBoYW5kbGU7XG4gIH1cblxuICAvKipcbiAgICogUHJvdmlkZSB0b1N0cmluZyBmb3IgY29uc29sZSBkZWJ1Z2dpbmcsIHNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI0ODU2MzIvdmFsdWVvZi12cy10b3N0cmluZy1pbi1qYXZhc2NyaXB0XG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFByb3BlcnR5IyR7dGhpcy5pZH17JHt0aGlzLmdldCgpfX1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBkZWJ1Z2dpbmcgYSBQcm9wZXJ0eSdzIHZhbHVlLiBJdCBwcmludHMgdGhlIG5ldyB2YWx1ZSBvbiByZWdpc3RyYXRpb24gYW5kIHdoZW4gY2hhbmdlZC5cbiAgICogQHBhcmFtIG5hbWUgLSBkZWJ1ZyBuYW1lIHRvIGJlIHByaW50ZWQgb24gdGhlIGNvbnNvbGVcbiAgICogQHJldHVybnMgLSB0aGUgaGFuZGxlIHRvIHRoZSBsaW5rZWQgbGlzdGVuZXIgaW4gY2FzZSBpdCBuZWVkcyB0byBiZSByZW1vdmVkIGxhdGVyXG4gICAqL1xuICBwdWJsaWMgZGVidWcoIG5hbWU6IHN0cmluZyApOiAoIHZhbHVlOiBUICkgPT4gdm9pZCB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSAoIHZhbHVlOiBUICkgPT4gY29uc29sZS5sb2coIG5hbWUsIHZhbHVlICk7XG4gICAgdGhpcy5saW5rKCBsaXN0ZW5lciApO1xuICAgIHJldHVybiBsaXN0ZW5lcjtcbiAgfVxuXG4gIHB1YmxpYyBpc1ZhbHVlVmFsaWQoIHZhbHVlOiBUICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldFZhbGlkYXRpb25FcnJvciggdmFsdWUgKSA9PT0gbnVsbDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRWYWxpZGF0aW9uRXJyb3IoIHZhbHVlOiBUICk6IHN0cmluZyB8IG51bGwge1xuICAgIHJldHVybiBWYWxpZGF0aW9uLmdldFZhbGlkYXRpb25FcnJvciggdmFsdWUsIHRoaXMudmFsdWVWYWxpZGF0b3IsIFZBTElEQVRFX09QVElPTlNfRkFMU0UgKTtcbiAgfVxuXG4gIC8vIEVuc3VyZXMgdGhhdCB0aGUgUHJvcGVydHkgaXMgZWxpZ2libGUgZm9yIEdDXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xuXG4gICAgLy8gdW5yZWdpc3RlciBhbnkgb3JkZXIgZGVwZW5kZW5jaWVzIGZvciB0aGlzIFByb3BlcnR5IGZvciBQaEVULWlPIHN0YXRlXG4gICAgaWYgKCB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgKSB7XG4gICAgICBwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbi51bnJlZ2lzdGVyT3JkZXJEZXBlbmRlbmNpZXNGb3JQcm9wZXJ0eSggdGhpcyApO1xuICAgIH1cblxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzLnRpbnlQcm9wZXJ0eS5kaXNwb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIHdoZXRoZXIgYSBsaXN0ZW5lciBpcyByZWdpc3RlcmVkIHdpdGggdGhpcyBQcm9wZXJ0eVxuICAgKi9cbiAgcHVibGljIGhhc0xpc3RlbmVyKCBsaXN0ZW5lcjogUHJvcGVydHlMaW5rTGlzdGVuZXI8VD4gKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGlueVByb3BlcnR5Lmhhc0xpc3RlbmVyKCBsaXN0ZW5lciApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBsaXN0ZW5lcnMuXG4gICAqL1xuICBwcml2YXRlIGdldExpc3RlbmVyQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy50aW55UHJvcGVydHkuZ2V0TGlzdGVuZXJDb3VudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEludm9rZXMgYSBjYWxsYmFjayBvbmNlIGZvciBlYWNoIGxpc3RlbmVyXG4gICAqIEBwYXJhbSBjYWxsYmFjayAtIHRha2VzIHRoZSBsaXN0ZW5lciBhcyBhbiBhcmd1bWVudFxuICAgKi9cbiAgcHVibGljIGZvckVhY2hMaXN0ZW5lciggY2FsbGJhY2s6ICggdmFsdWU6ICggLi4uYXJnczogWyBULCBUIHwgbnVsbCwgVGlueVByb3BlcnR5PFQ+IHwgUmVhZE9ubHlQcm9wZXJ0eTxUPiBdICkgPT4gdm9pZCApID0+IHZvaWQgKTogdm9pZCB7XG4gICAgdGhpcy50aW55UHJvcGVydHkuZm9yRWFjaExpc3RlbmVyKCBjYWxsYmFjayApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGVyZSBhcmUgYW55IGxpc3RlbmVycy5cbiAgICovXG4gIHB1YmxpYyBoYXNMaXN0ZW5lcnMoKTogYm9vbGVhbiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYXJndW1lbnRzLmxlbmd0aCA9PT0gMCwgJ1Byb3BlcnR5Lmhhc0xpc3RlbmVycyBzaG91bGQgYmUgY2FsbGVkIHdpdGhvdXQgYXJndW1lbnRzJyApO1xuICAgIHJldHVybiB0aGlzLnRpbnlQcm9wZXJ0eS5oYXNMaXN0ZW5lcnMoKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIEFuIG9ic2VydmFibGUgUHJvcGVydHkgdGhhdCB0cmlnZ2VycyBub3RpZmljYXRpb25zIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuXG4gICAqIFRoaXMgY2FjaGluZyBpbXBsZW1lbnRhdGlvbiBzaG91bGQgYmUga2VwdCBpbiBzeW5jIHdpdGggdGhlIG90aGVyIHBhcmFtZXRyaWMgSU8gVHlwZSBjYWNoaW5nIGltcGxlbWVudGF0aW9ucy5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgUHJvcGVydHlJTzxULCBTdGF0ZVR5cGU+KCBwYXJhbWV0ZXJUeXBlOiBJT1R5cGU8VCwgU3RhdGVUeXBlPiApOiBJT1R5cGUge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHBhcmFtZXRlclR5cGUsICdQcm9wZXJ0eUlPIG5lZWRzIHBhcmFtZXRlclR5cGUnICk7XG5cbiAgICBpZiAoICFjYWNoZS5oYXMoIHBhcmFtZXRlclR5cGUgKSApIHtcbiAgICAgIGNhY2hlLnNldCggcGFyYW1ldGVyVHlwZSwgbmV3IElPVHlwZTxSZWFkT25seVByb3BlcnR5PFQ+LCBSZWFkT25seVByb3BlcnR5U3RhdGU8U3RhdGVUeXBlPj4oIGBQcm9wZXJ0eUlPPCR7cGFyYW1ldGVyVHlwZS50eXBlTmFtZX0+YCwge1xuXG4gICAgICAgIC8vIFdlIHdhbnQgUHJvcGVydHlJTyB0byB3b3JrIGZvciBEeW5hbWljUHJvcGVydHkgYW5kIERlcml2ZWRQcm9wZXJ0eSwgYnV0IHRoZXkgZXh0ZW5kIFJlYWRPbmx5UHJvcGVydHlcbiAgICAgICAgdmFsdWVUeXBlOiBSZWFkT25seVByb3BlcnR5LFxuICAgICAgICBkb2N1bWVudGF0aW9uOiAnT2JzZXJ2YWJsZSB2YWx1ZXMgdGhhdCBzZW5kIG91dCBub3RpZmljYXRpb25zIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgZGlmZmVycyBmcm9tIHRoZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgJ3RyYWRpdGlvbmFsIGxpc3RlbmVyIHBhdHRlcm4gaW4gdGhhdCBhZGRlZCBsaXN0ZW5lcnMgYWxzbyByZWNlaXZlIGEgY2FsbGJhY2sgd2l0aCB0aGUgY3VycmVudCB2YWx1ZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgJ3doZW4gdGhlIGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZC4gVGhpcyBpcyBhIHdpZGVseS11c2VkIHBhdHRlcm4gaW4gUGhFVC1pTyBzaW11bGF0aW9ucy4nLFxuICAgICAgICBtZXRob2RPcmRlcjogWyAnbGluaycsICdsYXp5TGluaycgXSxcbiAgICAgICAgZXZlbnRzOiBbIFJlYWRPbmx5UHJvcGVydHkuQ0hBTkdFRF9FVkVOVF9OQU1FIF0sXG4gICAgICAgIHBhcmFtZXRlclR5cGVzOiBbIHBhcmFtZXRlclR5cGUgXSxcbiAgICAgICAgdG9TdGF0ZU9iamVjdDogcHJvcGVydHkgPT4ge1xuICAgICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHBhcmFtZXRlclR5cGUudG9TdGF0ZU9iamVjdCwgYHRvU3RhdGVPYmplY3QgZG9lc24ndCBleGlzdCBmb3IgJHtwYXJhbWV0ZXJUeXBlLnR5cGVOYW1lfWAgKTtcbiAgICAgICAgICBjb25zdCBzdGF0ZU9iamVjdDogUmVhZE9ubHlQcm9wZXJ0eVN0YXRlPFN0YXRlVHlwZT4gPSB7XG4gICAgICAgICAgICB2YWx1ZTogcGFyYW1ldGVyVHlwZS50b1N0YXRlT2JqZWN0KCBwcm9wZXJ0eS52YWx1ZSApLFxuXG4gICAgICAgICAgICAvLyBPbmx5IGluY2x1ZGUgdmFsaWRWYWx1ZXMgaWYgc3BlY2lmaWVkLCBzbyB0aGV5IG9ubHkgc2hvdyB1cCBpbiBQaEVULWlPIFN0dWRpbyB3aGVuIHN1cHBsaWVkLlxuICAgICAgICAgICAgdmFsaWRWYWx1ZXM6IHByb3BlcnR5LnZhbGlkVmFsdWVzID8gcHJvcGVydHkudmFsaWRWYWx1ZXMubWFwKCB2ID0+IHtcbiAgICAgICAgICAgICAgcmV0dXJuIHBhcmFtZXRlclR5cGUudG9TdGF0ZU9iamVjdCggdiApO1xuICAgICAgICAgICAgfSApIDogbnVsbCxcbiAgICAgICAgICAgIHVuaXRzOiBOdWxsYWJsZUlPKCBTdHJpbmdJTyApLnRvU3RhdGVPYmplY3QoIHByb3BlcnR5LnVuaXRzIClcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcmV0dXJuIHN0YXRlT2JqZWN0O1xuICAgICAgICB9LFxuICAgICAgICBhcHBseVN0YXRlOiAoIHByb3BlcnR5LCBzdGF0ZU9iamVjdCApID0+IHtcbiAgICAgICAgICBjb25zdCB1bml0cyA9IE51bGxhYmxlSU8oIFN0cmluZ0lPICkuZnJvbVN0YXRlT2JqZWN0KCBzdGF0ZU9iamVjdC51bml0cyApO1xuICAgICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHByb3BlcnR5LnVuaXRzID09PSB1bml0cywgJ1Byb3BlcnR5IHVuaXRzIGRvIG5vdCBtYXRjaCcgKTtcbiAgICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBwcm9wZXJ0eS5pc1NldHRhYmxlKCksICdQcm9wZXJ0eSBzaG91bGQgYmUgc2V0dGFibGUnICk7XG4gICAgICAgICAgcHJvcGVydHkudW5ndWFyZGVkU2V0KCBwYXJhbWV0ZXJUeXBlLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QudmFsdWUgKSApO1xuXG4gICAgICAgICAgaWYgKCBzdGF0ZU9iamVjdC52YWxpZFZhbHVlcyApIHtcbiAgICAgICAgICAgIHByb3BlcnR5LnZhbGlkVmFsdWVzID0gc3RhdGVPYmplY3QudmFsaWRWYWx1ZXMubWFwKCAoIHZhbGlkVmFsdWU6IFN0YXRlVHlwZSApID0+IHBhcmFtZXRlclR5cGUuZnJvbVN0YXRlT2JqZWN0KCB2YWxpZFZhbHVlICkgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIHN0YXRlU2NoZW1hOiB7XG4gICAgICAgICAgdmFsdWU6IHBhcmFtZXRlclR5cGUsXG4gICAgICAgICAgdmFsaWRWYWx1ZXM6IE51bGxhYmxlSU8oIEFycmF5SU8oIHBhcmFtZXRlclR5cGUgKSApLFxuICAgICAgICAgIHVuaXRzOiBOdWxsYWJsZUlPKCBTdHJpbmdJTyApXG4gICAgICAgIH0sXG4gICAgICAgIG1ldGhvZHM6IHtcbiAgICAgICAgICBnZXRWYWx1ZToge1xuICAgICAgICAgICAgcmV0dXJuVHlwZTogcGFyYW1ldGVyVHlwZSxcbiAgICAgICAgICAgIHBhcmFtZXRlclR5cGVzOiBbXSxcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uOiBSZWFkT25seVByb3BlcnR5LnByb3RvdHlwZS5nZXQsXG4gICAgICAgICAgICBkb2N1bWVudGF0aW9uOiAnR2V0cyB0aGUgY3VycmVudCB2YWx1ZS4nXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnZXRWYWxpZGF0aW9uRXJyb3I6IHtcbiAgICAgICAgICAgIHJldHVyblR5cGU6IE51bGxhYmxlSU8oIFN0cmluZ0lPICksXG4gICAgICAgICAgICBwYXJhbWV0ZXJUeXBlczogWyBwYXJhbWV0ZXJUeXBlIF0sXG4gICAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogUmVhZE9ubHlQcm9wZXJ0eS5wcm90b3R5cGUuZ2V0VmFsaWRhdGlvbkVycm9yLFxuICAgICAgICAgICAgZG9jdW1lbnRhdGlvbjogJ0NoZWNrcyB0byBzZWUgaWYgYSBwcm9wb3NlZCB2YWx1ZSBpcyB2YWxpZC4gUmV0dXJucyB0aGUgZmlyc3QgdmFsaWRhdGlvbiBlcnJvciwgb3IgbnVsbCBpZiB0aGUgdmFsdWUgaXMgdmFsaWQuJ1xuICAgICAgICAgIH0sXG5cbiAgICAgICAgICBzZXRWYWx1ZToge1xuICAgICAgICAgICAgcmV0dXJuVHlwZTogVm9pZElPLFxuICAgICAgICAgICAgcGFyYW1ldGVyVHlwZXM6IFsgcGFyYW1ldGVyVHlwZSBdLFxuICAgICAgICAgICAgaW1wbGVtZW50YXRpb246IGZ1bmN0aW9uKCB0aGlzOiBSZWFkT25seVByb3BlcnR5PHVua25vd24+LCB2YWx1ZTogVCApIHtcblxuICAgICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uRXJyb3IgPSBWYWxpZGF0aW9uLmdldFZhbGlkYXRpb25FcnJvciggdmFsdWUsIHRoaXMudmFsdWVWYWxpZGF0b3IsIFZBTElEQVRFX09QVElPTlNfRkFMU0UgKTtcblxuICAgICAgICAgICAgICBpZiAoIHZhbGlkYXRpb25FcnJvciApIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIGBWYWxpZGF0aW9uIGVycm9yOiAke3ZhbGlkYXRpb25FcnJvcn1gICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXQoIHZhbHVlICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb2N1bWVudGF0aW9uOiAnU2V0cyB0aGUgdmFsdWUgb2YgdGhlIFByb3BlcnR5LiBJZiB0aGUgdmFsdWUgZGlmZmVycyBmcm9tIHRoZSBwcmV2aW91cyB2YWx1ZSwgbGlzdGVuZXJzIGFyZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdub3RpZmllZCB3aXRoIHRoZSBuZXcgdmFsdWUuJyxcbiAgICAgICAgICAgIGludm9jYWJsZUZvclJlYWRPbmx5RWxlbWVudHM6IGZhbHNlXG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGxpbms6IHtcbiAgICAgICAgICAgIHJldHVyblR5cGU6IFZvaWRJTyxcblxuICAgICAgICAgICAgLy8gb2xkVmFsdWUgd2lsbCBzdGFydCBhcyBcIm51bGxcIiB0aGUgZmlyc3QgdGltZSBjYWxsZWRcbiAgICAgICAgICAgIHBhcmFtZXRlclR5cGVzOiBbIEZ1bmN0aW9uSU8oIFZvaWRJTywgWyBwYXJhbWV0ZXJUeXBlLCBOdWxsYWJsZUlPKCBwYXJhbWV0ZXJUeXBlICkgXSApIF0sXG4gICAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogUmVhZE9ubHlQcm9wZXJ0eS5wcm90b3R5cGUubGluayxcbiAgICAgICAgICAgIGRvY3VtZW50YXRpb246ICdBZGRzIGEgbGlzdGVuZXIgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gT24gcmVnaXN0cmF0aW9uLCB0aGUgbGlzdGVuZXIgaXMgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnYWxzbyBjYWxsZWQgd2l0aCB0aGUgY3VycmVudCB2YWx1ZS4gVGhlIGxpc3RlbmVyIHRha2VzIHR3byBhcmd1bWVudHMsIHRoZSBuZXcgdmFsdWUgYW5kIHRoZSAnICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdwcmV2aW91cyB2YWx1ZS4nXG4gICAgICAgICAgfSxcblxuICAgICAgICAgIGxhenlMaW5rOiB7XG4gICAgICAgICAgICByZXR1cm5UeXBlOiBWb2lkSU8sXG5cbiAgICAgICAgICAgIC8vIG9sZFZhbHVlIHdpbGwgc3RhcnQgYXMgXCJudWxsXCIgdGhlIGZpcnN0IHRpbWUgY2FsbGVkXG4gICAgICAgICAgICBwYXJhbWV0ZXJUeXBlczogWyBGdW5jdGlvbklPKCBWb2lkSU8sIFsgcGFyYW1ldGVyVHlwZSwgTnVsbGFibGVJTyggcGFyYW1ldGVyVHlwZSApIF0gKSBdLFxuICAgICAgICAgICAgaW1wbGVtZW50YXRpb246IFJlYWRPbmx5UHJvcGVydHkucHJvdG90eXBlLmxhenlMaW5rLFxuICAgICAgICAgICAgZG9jdW1lbnRhdGlvbjogJ0FkZHMgYSBsaXN0ZW5lciB3aGljaCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIG1ldGhvZCBpcyBsaWtlIFwibGlua1wiLCBidXQgJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnd2l0aG91dCB0aGUgY3VycmVudC12YWx1ZSBjYWxsYmFjayBvbiByZWdpc3RyYXRpb24uIFRoZSBsaXN0ZW5lciB0YWtlcyB0d28gYXJndW1lbnRzLCB0aGUgbmV3ICcgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ3ZhbHVlIGFuZCB0aGUgcHJldmlvdXMgdmFsdWUuJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgdW5saW5rOiB7XG4gICAgICAgICAgICByZXR1cm5UeXBlOiBWb2lkSU8sXG4gICAgICAgICAgICBwYXJhbWV0ZXJUeXBlczogWyBGdW5jdGlvbklPKCBWb2lkSU8sIFsgcGFyYW1ldGVyVHlwZSBdICkgXSxcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uOiBSZWFkT25seVByb3BlcnR5LnByb3RvdHlwZS51bmxpbmssXG4gICAgICAgICAgICBkb2N1bWVudGF0aW9uOiAnUmVtb3ZlcyBhIGxpc3RlbmVyLidcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gKSApO1xuICAgIH1cblxuICAgIHJldHVybiBjYWNoZS5nZXQoIHBhcmFtZXRlclR5cGUgKSE7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IENIQU5HRURfRVZFTlRfTkFNRSA9ICdjaGFuZ2VkJztcbn1cblxuYXhvbi5yZWdpc3RlciggJ1JlYWRPbmx5UHJvcGVydHknLCBSZWFkT25seVByb3BlcnR5ICk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFlBQVksTUFBK0IsaUNBQWlDO0FBQ25GLE9BQU9DLE1BQU0sTUFBTSwyQkFBMkI7QUFDOUMsT0FBT0MsT0FBTyxNQUFNLGtDQUFrQztBQUN0RCxPQUFPQyxVQUFVLE1BQU0scUNBQXFDO0FBQzVELE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsVUFBVSxNQUFNLHFDQUFxQztBQUM1RCxPQUFPQyxRQUFRLE1BQU0sbUNBQW1DO0FBQ3hELE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsNkJBQTZCLE1BQU0sb0NBQW9DO0FBQzlFLE9BQU9DLGtCQUFrQixNQUFNLHlCQUF5QjtBQUN4RCxPQUFPQyxZQUFZLE1BQU0sbUJBQW1CO0FBQzVDLE9BQU9DLEtBQUssTUFBTSxZQUFZO0FBQzlCLE9BQU9DLFFBQVEsTUFBTSxlQUFlO0FBRXBDLE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsT0FBT0MsVUFBVSxNQUFxQixpQkFBaUI7QUFHdkQsT0FBT0MsSUFBSSxNQUFNLFdBQVc7O0FBRTVCO0FBQ0EsTUFBTUMsc0JBQXNCLEdBQUc7RUFBRUMsaUJBQWlCLEVBQUU7QUFBTSxDQUFDOztBQUUzRDtBQUNBLElBQUlDLFFBQVEsR0FBRyxDQUFDLENBQUMsQ0FBQzs7QUFFbEI7QUFDQSxNQUFNQyxLQUFLLEdBQUcsSUFBSUMsR0FBRyxFQUFrQjtBQXNDdkM7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE1BQU1DLGdCQUFnQixTQUFZckIsWUFBWSxDQUFpQztFQUU1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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/Property.js
// Copyright 2022, University of Colorado Boulder




/**
 * Adds initial value and reset, and a mutable interface.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */
class Property extends ReadOnlyProperty {
  constructor(value, providedOptions) {
    super(value, providedOptions);
    this._initialValue = value;
  }

  /**
   * Returns the initial value of this Property.
   */
  getInitialValue() {
    return this._initialValue;
  }
  get initialValue() {
    return this.getInitialValue();
  }

  /**
   * Stores the specified value as the initial value, which will be taken on reset. Sims should use this sparingly,
   * typically only in situations where the initial value is unknowable at instantiation.
   */
  setInitialValue(initialValue) {
    this._initialValue = initialValue;
  }

  /**
   * Overridden to make public
   */
  get value() {
    return super.value;
  }

  /**
   * Overridden to make public
   * We ran performance tests on Chrome, and determined that calling super.value = newValue is statistically significantly
   * slower at the p = 0.10 level( looping over 10,000 value calls). Therefore, we prefer this optimization.
   */
  set value(newValue) {
    super.set(newValue);
  }
  reset() {
    this.set(this._initialValue);
  }

  /**
   * Overridden to make public
   */
  set(value) {
    super.set(value);
  }
  isSettable() {
    return true;
  }
}
js_axon.register('Property', Property);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFkT25seVByb3BlcnR5IiwiYXhvbiIsIlByb3BlcnR5IiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsInByb3ZpZGVkT3B0aW9ucyIsIl9pbml0aWFsVmFsdWUiLCJnZXRJbml0aWFsVmFsdWUiLCJpbml0aWFsVmFsdWUiLCJzZXRJbml0aWFsVmFsdWUiLCJuZXdWYWx1ZSIsInNldCIsInJlc2V0IiwiaXNTZXR0YWJsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG5pbXBvcnQgVFByb3BlcnR5IGZyb20gJy4vVFByb3BlcnR5LmpzJztcbmltcG9ydCBSZWFkT25seVByb3BlcnR5LCB7IFByb3BlcnR5T3B0aW9ucyB9IGZyb20gJy4vUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuXG4vKipcbiAqIEFkZHMgaW5pdGlhbCB2YWx1ZSBhbmQgcmVzZXQsIGFuZCBhIG11dGFibGUgaW50ZXJmYWNlLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb3BlcnR5PFQ+IGV4dGVuZHMgUmVhZE9ubHlQcm9wZXJ0eTxUPiBpbXBsZW1lbnRzIFRQcm9wZXJ0eTxUPiB7XG5cbiAgcHJvdGVjdGVkIF9pbml0aWFsVmFsdWU6IFQ7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCB2YWx1ZTogVCwgcHJvdmlkZWRPcHRpb25zPzogUHJvcGVydHlPcHRpb25zPFQ+ICkge1xuICAgIHN1cGVyKCB2YWx1ZSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICB0aGlzLl9pbml0aWFsVmFsdWUgPSB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbml0aWFsIHZhbHVlIG9mIHRoaXMgUHJvcGVydHkuXG4gICAqL1xuICBwdWJsaWMgZ2V0SW5pdGlhbFZhbHVlKCk6IFQge1xuICAgIHJldHVybiB0aGlzLl9pbml0aWFsVmFsdWU7XG4gIH1cblxuICBwdWJsaWMgZ2V0IGluaXRpYWxWYWx1ZSgpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbml0aWFsVmFsdWUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9yZXMgdGhlIHNwZWNpZmllZCB2YWx1ZSBhcyB0aGUgaW5pdGlhbCB2YWx1ZSwgd2hpY2ggd2lsbCBiZSB0YWtlbiBvbiByZXNldC4gU2ltcyBzaG91bGQgdXNlIHRoaXMgc3BhcmluZ2x5LFxuICAgKiB0eXBpY2FsbHkgb25seSBpbiBzaXR1YXRpb25zIHdoZXJlIHRoZSBpbml0aWFsIHZhbHVlIGlzIHVua25vd2FibGUgYXQgaW5zdGFudGlhdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzZXRJbml0aWFsVmFsdWUoIGluaXRpYWxWYWx1ZTogVCApOiB2b2lkIHtcbiAgICB0aGlzLl9pbml0aWFsVmFsdWUgPSBpbml0aWFsVmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGRlbiB0byBtYWtlIHB1YmxpY1xuICAgKi9cbiAgcHVibGljIG92ZXJyaWRlIGdldCB2YWx1ZSgpOiBUIHtcbiAgICByZXR1cm4gc3VwZXIudmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGRlbiB0byBtYWtlIHB1YmxpY1xuICAgKiBXZSByYW4gcGVyZm9ybWFuY2UgdGVzdHMgb24gQ2hyb21lLCBhbmQgZGV0ZXJtaW5lZCB0aGF0IGNhbGxpbmcgc3VwZXIudmFsdWUgPSBuZXdWYWx1ZSBpcyBzdGF0aXN0aWNhbGx5IHNpZ25pZmljYW50bHlcbiAgICogc2xvd2VyIGF0IHRoZSBwID0gMC4xMCBsZXZlbCggbG9vcGluZyBvdmVyIDEwLDAwMCB2YWx1ZSBjYWxscykuIFRoZXJlZm9yZSwgd2UgcHJlZmVyIHRoaXMgb3B0aW1pemF0aW9uLlxuICAgKi9cbiAgcHVibGljIG92ZXJyaWRlIHNldCB2YWx1ZSggbmV3VmFsdWU6IFQgKSB7XG4gICAgc3VwZXIuc2V0KCBuZXdWYWx1ZSApO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuc2V0KCB0aGlzLl9pbml0aWFsVmFsdWUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZGVuIHRvIG1ha2UgcHVibGljXG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgc2V0KCB2YWx1ZTogVCApOiB2b2lkIHtcbiAgICBzdXBlci5zZXQoIHZhbHVlICk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgaXNTZXR0YWJsZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSB7IFByb3BlcnR5T3B0aW9ucyB9O1xuXG5heG9uLnJlZ2lzdGVyKCAnUHJvcGVydHknLCBQcm9wZXJ0eSApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBR0EsT0FBT0EsZ0JBQWdCLE1BQTJCLHVCQUF1QjtBQUN6RSxPQUFPQyxJQUFJLE1BQU0sV0FBVzs7QUFFNUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsTUFBTUMsUUFBUSxTQUFZRixnQkFBZ0IsQ0FBNEI7RUFJNUVHLFdBQVdBLENBQUVDLEtBQVEsRUFBRUMsZUFBb0MsRUFBRztJQUNuRSxLQUFLLENBQUVELEtBQUssRUFBRUMsZUFBZSxDQUFFO0lBRS9CLElBQUksQ0FBQ0MsYUFBYSxHQUFHRixLQUFLO0VBQzVCOztFQUVBO0FBQ0Y7QUFDQTtFQUNTRyxlQUFlQSxDQUFBLEVBQU07SUFDMUIsT0FBTyxJQUFJLENBQUNELGFBQWE7RUFDM0I7RUFFQSxJQUFXRSxZQUFZQSxDQUFBLEVBQU07SUFDM0IsT0FBTyxJQUFJLENBQUNELGVBQWUsRUFBRTtFQUMvQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNTRSxlQUFlQSxDQUFFRCxZQUFlLEVBQVM7SUFDOUMsSUFBSSxDQUFDRixhQUFhLEdBQUdFLFlBQVk7RUFDbkM7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsSUFBb0JKLEtBQUtBLENBQUEsRUFBTTtJQUM3QixPQUFPLEtBQUssQ0FBQ0EsS0FBSztFQUNwQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsSUFBb0JBLEtBQUtBLENBQUVNLFFBQVcsRUFBRztJQUN2QyxLQUFLLENBQUNDLEdBQUcsQ0FBRUQsUUFBUSxDQUFFO0VBQ3ZCO0VBRU9FLEtBQUtBLENBQUEsRUFBUztJQUNuQixJQUFJLENBQUNELEdBQUcsQ0FBRSxJQUFJLENBQUNMLGFBQWEsQ0FBRTtFQUNoQzs7RUFFQTtBQUNGO0FBQ0E7RUFDa0JLLEdBQUdBLENBQUVQLEtBQVEsRUFBUztJQUNwQyxLQUFLLENBQUNPLEdBQUcsQ0FBRVAsS0FBSyxDQUFFO0VBQ3BCO0VBRWdCUyxVQUFVQSxDQUFBLEVBQVk7SUFDcEMsT0FBTyxJQUFJO0VBQ2I7QUFDRjtBQUlBWixJQUFJLENBQUNhLFFBQVEsQ0FBRSxVQUFVLEVBQUVaLFFBQVEsQ0FBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/BooleanProperty.js
// Copyright 2016-2022, University of Colorado Boulder

/**
 * Property whose value must be true or false. Truthy/falsy values are invalid.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Chris Malley (PixelZoom, Inc.)
 */





class BooleanProperty extends Property {
  constructor(value, providedOptions) {
    // Fill in superclass options that are controlled by BooleanProperty.
    const options = optionize()({
      valueType: 'boolean',
      phetioValueType: types_BooleanIO
    }, providedOptions);
    super(value, options);
  }
  toggle() {
    this.value = !this.value;
  }
}
js_axon.register('BooleanProperty', BooleanProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJCb29sZWFuSU8iLCJheG9uIiwiUHJvcGVydHkiLCJCb29sZWFuUHJvcGVydHkiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInZhbHVlVHlwZSIsInBoZXRpb1ZhbHVlVHlwZSIsInRvZ2dsZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQm9vbGVhblByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE2LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFByb3BlcnR5IHdob3NlIHZhbHVlIG11c3QgYmUgdHJ1ZSBvciBmYWxzZS4gVHJ1dGh5L2ZhbHN5IHZhbHVlcyBhcmUgaW52YWxpZC5cbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcbiAqL1xuXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcbmltcG9ydCBCb29sZWFuSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0Jvb2xlYW5JTy5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IFByb3BlcnR5LCB7IFByb3BlcnR5T3B0aW9ucyB9IGZyb20gJy4vUHJvcGVydHkuanMnO1xuXG50eXBlIFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcblxuLy8gY2xpZW50IGNhbm5vdCBzcGVjaWZ5IHN1cGVyY2xhc3Mgb3B0aW9ucyB0aGF0IGFyZSBjb250cm9sbGVkIGJ5IEJvb2xlYW5Qcm9wZXJ0eVxuZXhwb3J0IHR5cGUgQm9vbGVhblByb3BlcnR5T3B0aW9ucyA9IFNlbGZPcHRpb25zICYgU3RyaWN0T21pdDxQcm9wZXJ0eU9wdGlvbnM8Ym9vbGVhbj4sICdpc1ZhbGlkVmFsdWUnIHwgJ3ZhbHVlVHlwZScgfCAncGhldGlvVmFsdWVUeXBlJz47XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEJvb2xlYW5Qcm9wZXJ0eSBleHRlbmRzIFByb3BlcnR5PGJvb2xlYW4+IHtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoIHZhbHVlOiBib29sZWFuLCBwcm92aWRlZE9wdGlvbnM/OiBCb29sZWFuUHJvcGVydHlPcHRpb25zICkge1xuXG4gICAgLy8gRmlsbCBpbiBzdXBlcmNsYXNzIG9wdGlvbnMgdGhhdCBhcmUgY29udHJvbGxlZCBieSBCb29sZWFuUHJvcGVydHkuXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxCb29sZWFuUHJvcGVydHlPcHRpb25zLCBTZWxmT3B0aW9ucywgUHJvcGVydHlPcHRpb25zPGJvb2xlYW4+PigpKCB7XG4gICAgICB2YWx1ZVR5cGU6ICdib29sZWFuJyxcbiAgICAgIHBoZXRpb1ZhbHVlVHlwZTogQm9vbGVhbklPXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBzdXBlciggdmFsdWUsIG9wdGlvbnMgKTtcbiAgfVxuXG4gIHB1YmxpYyB0b2dnbGUoKTogdm9pZCB7XG4gICAgdGhpcy52YWx1ZSA9ICF0aGlzLnZhbHVlO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdCb29sZWFuUHJvcGVydHknLCBCb29sZWFuUHJvcGVydHkgKTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxTQUFTLE1BQTRCLGlDQUFpQztBQUU3RSxPQUFPQyxTQUFTLE1BQU0sb0NBQW9DO0FBQzFELE9BQU9DLElBQUksTUFBTSxXQUFXO0FBQzVCLE9BQU9DLFFBQVEsTUFBMkIsZUFBZTtBQU96RCxlQUFlLE1BQU1DLGVBQWUsU0FBU0QsUUFBUSxDQUFVO0VBRXRERSxXQUFXQSxDQUFFQyxLQUFjLEVBQUVDLGVBQXdDLEVBQUc7SUFFN0U7SUFDQSxNQUFNQyxPQUFPLEdBQUdSLFNBQVMsRUFBaUUsQ0FBRTtNQUMxRlMsU0FBUyxFQUFFLFNBQVM7TUFDcEJDLGVBQWUsRUFBRVQ7SUFDbkIsQ0FBQyxFQUFFTSxlQUFlLENBQUU7SUFFcEIsS0FBSyxDQUFFRCxLQUFLLEVBQUVFLE9BQU8sQ0FBRTtFQUN6QjtFQUVPRyxNQUFNQSxDQUFBLEVBQVM7SUFDcEIsSUFBSSxDQUFDTCxLQUFLLEdBQUcsQ0FBQyxJQUFJLENBQUNBLEtBQUs7RUFDMUI7QUFDRjtBQUVBSixJQUFJLENBQUNVLFFBQVEsQ0FBRSxpQkFBaUIsRUFBRVIsZUFBZSxDQUFFIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/stepTimer.js
// Copyright 2020-2022, University of Colorado Boulder




/**
 * Register and return a singleton timer, which can be used to schedule events. This ticks under the following circumstances:
 * 1) When a JOIST/Sim is active, during the step event
 * 2) In various accessibility tests that require timing
 * 3) In SCENERY/Display's animation loop, which is run by various test and example HTML files
 *
 * In order to run an event when a simulation is inactive and not stepping, see animationFrameTimer.
 *
 * Listeners added with addListener are called with a {number} dt argument (in seconds) via timer.emit in
 * Sim.stepSimulation. Listeners added with setTimeout/setInterval are called with no arguments. This is not specific
 * to the running screen, it is global across all screens.
 */
const stepTimer = new Timer();
js_axon.register('stepTimer', stepTimer);
/* harmony default export */ const js_stepTimer = (stepTimer);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVGltZXIiLCJzdGVwVGltZXIiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbInN0ZXBUaW1lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBUaW1lciBmcm9tICcuL1RpbWVyLmpzJztcblxuLyoqXG4gKiBSZWdpc3RlciBhbmQgcmV0dXJuIGEgc2luZ2xldG9uIHRpbWVyLCB3aGljaCBjYW4gYmUgdXNlZCB0byBzY2hlZHVsZSBldmVudHMuIFRoaXMgdGlja3MgdW5kZXIgdGhlIGZvbGxvd2luZyBjaXJjdW1zdGFuY2VzOlxuICogMSkgV2hlbiBhIEpPSVNUL1NpbSBpcyBhY3RpdmUsIGR1cmluZyB0aGUgc3RlcCBldmVudFxuICogMikgSW4gdmFyaW91cyBhY2Nlc3NpYmlsaXR5IHRlc3RzIHRoYXQgcmVxdWlyZSB0aW1pbmdcbiAqIDMpIEluIFNDRU5FUlkvRGlzcGxheSdzIGFuaW1hdGlvbiBsb29wLCB3aGljaCBpcyBydW4gYnkgdmFyaW91cyB0ZXN0IGFuZCBleGFtcGxlIEhUTUwgZmlsZXNcbiAqXG4gKiBJbiBvcmRlciB0byBydW4gYW4gZXZlbnQgd2hlbiBhIHNpbXVsYXRpb24gaXMgaW5hY3RpdmUgYW5kIG5vdCBzdGVwcGluZywgc2VlIGFuaW1hdGlvbkZyYW1lVGltZXIuXG4gKlxuICogTGlzdGVuZXJzIGFkZGVkIHdpdGggYWRkTGlzdGVuZXIgYXJlIGNhbGxlZCB3aXRoIGEge251bWJlcn0gZHQgYXJndW1lbnQgKGluIHNlY29uZHMpIHZpYSB0aW1lci5lbWl0IGluXG4gKiBTaW0uc3RlcFNpbXVsYXRpb24uIExpc3RlbmVycyBhZGRlZCB3aXRoIHNldFRpbWVvdXQvc2V0SW50ZXJ2YWwgYXJlIGNhbGxlZCB3aXRoIG5vIGFyZ3VtZW50cy4gVGhpcyBpcyBub3Qgc3BlY2lmaWNcbiAqIHRvIHRoZSBydW5uaW5nIHNjcmVlbiwgaXQgaXMgZ2xvYmFsIGFjcm9zcyBhbGwgc2NyZWVucy5cbiAqL1xuY29uc3Qgc3RlcFRpbWVyID0gbmV3IFRpbWVyKCk7XG5cbmF4b24ucmVnaXN0ZXIoICdzdGVwVGltZXInLCBzdGVwVGltZXIgKTtcbmV4cG9ydCBkZWZhdWx0IHN0ZXBUaW1lcjsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE9BQU9BLElBQUksTUFBTSxXQUFXO0FBQzVCLE9BQU9DLEtBQUssTUFBTSxZQUFZOztBQUU5QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNQyxTQUFTLEdBQUcsSUFBSUQsS0FBSyxFQUFFO0FBRTdCRCxJQUFJLENBQUNHLFFBQVEsQ0FBRSxXQUFXLEVBQUVELFNBQVMsQ0FBRTtBQUN2QyxlQUFlQSxTQUFTIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/CallbackTimer.js
// Copyright 2019-2022, University of Colorado Boulder

/**
 * CallbackTimer is a timer that calls a set of registered callbacks.
 * It utilizes AXON/stepTimer, but provides a higher level of abstraction, hiding the details of managing stepTimer.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */




class CallbackTimer {
  // initial delay between when start is called and the timer first fires, in ms

  // fire the timer at this continuous interval, in ms

  // identifier for timer associated with the initial delay

  // identifier for timer associated with the continuous interval

  // has the timer fired since it was started?

  constructor(providedOptions) {
    const options = optionize()({
      delay: 400,
      interval: 100
    }, providedOptions);

    // validate options
    assert && assert(options.delay >= 0, `bad value for delay: ${options.delay}`);
    assert && assert(options.interval > 0, `bad value for interval: ${options.interval}`);
    this.delay = options.delay;
    this.interval = options.interval;
    this.callbacks = [];
    if (options.callback) {
      this.callbacks.push(options.callback);
    }
    this.delayID = null;
    this.intervalID = null;
    this.fired = false;
  }
  isRunning() {
    return this.delayID !== null || this.intervalID !== null;
  }
  start() {
    if (!this.isRunning()) {
      this.fired = false;
      this.delayID = js_stepTimer.setTimeout(() => {
        this.delayID = null;
        this.intervalID = js_stepTimer.setInterval(() => this.fire(), this.interval);

        // fire after scheduling the intervalID, so that isRunning will be true for callbacks, see sun#216
        this.fire();
      }, this.delay);
    }
  }

  /**
   * Stops the timer.
   * @param fire - should we fire if we haven't fired already?
   */
  stop(fire) {
    if (this.isRunning()) {
      if (this.delayID) {
        js_stepTimer.clearTimeout(this.delayID);
        this.delayID = null;
      }
      if (this.intervalID) {
        js_stepTimer.clearInterval(this.intervalID);
        this.intervalID = null;
      }
      if (fire && !this.fired) {
        this.fire();
      }
    }
  }
  addCallback(callback) {
    if (!this.callbacks.includes(callback)) {
      this.callbacks.push(callback);
    }
  }
  removeCallback(callback) {
    const index = this.callbacks.indexOf(callback);
    if (index !== -1) {
      this.callbacks.splice(index, 1);
    }
  }

  /**
   * Calls all callbacks. Clients are free to call this when the timer is not running.
   */
  fire() {
    const callbacksCopy = this.callbacks.slice(0);
    for (let i = 0; i < callbacksCopy.length; i++) {
      callbacksCopy[i]();
    }
    this.fired = true;
  }
  dispose() {
    this.stop(false);
    this.callbacks.length = 0;
  }
}
js_axon.register('CallbackTimer', CallbackTimer);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJheG9uIiwic3RlcFRpbWVyIiwiQ2FsbGJhY2tUaW1lciIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImRlbGF5IiwiaW50ZXJ2YWwiLCJhc3NlcnQiLCJjYWxsYmFja3MiLCJjYWxsYmFjayIsInB1c2giLCJkZWxheUlEIiwiaW50ZXJ2YWxJRCIsImZpcmVkIiwiaXNSdW5uaW5nIiwic3RhcnQiLCJzZXRUaW1lb3V0Iiwic2V0SW50ZXJ2YWwiLCJmaXJlIiwic3RvcCIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJhZGRDYWxsYmFjayIsImluY2x1ZGVzIiwicmVtb3ZlQ2FsbGJhY2siLCJpbmRleCIsImluZGV4T2YiLCJzcGxpY2UiLCJjYWxsYmFja3NDb3B5Iiwic2xpY2UiLCJpIiwibGVuZ3RoIiwiZGlzcG9zZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ2FsbGJhY2tUaW1lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBDYWxsYmFja1RpbWVyIGlzIGEgdGltZXIgdGhhdCBjYWxscyBhIHNldCBvZiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAqIEl0IHV0aWxpemVzIEFYT04vc3RlcFRpbWVyLCBidXQgcHJvdmlkZXMgYSBoaWdoZXIgbGV2ZWwgb2YgYWJzdHJhY3Rpb24sIGhpZGluZyB0aGUgZGV0YWlscyBvZiBtYW5hZ2luZyBzdGVwVGltZXIuXG4gKlxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcbiAqL1xuXG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBzdGVwVGltZXIgZnJvbSAnLi9zdGVwVGltZXIuanMnO1xuaW1wb3J0IHsgVGltZXJMaXN0ZW5lciB9IGZyb20gJy4vVGltZXIuanMnO1xuXG5leHBvcnQgdHlwZSBDYWxsYmFja1RpbWVyQ2FsbGJhY2sgPSAoKSA9PiB2b2lkO1xuXG50eXBlIFNlbGZPcHRpb25zID0ge1xuXG4gIC8vIGNvbnZlbmllbmNlIGZvciBhZGRpbmcgMSBjYWxsYmFja1xuICBjYWxsYmFjaz86IENhbGxiYWNrVGltZXJDYWxsYmFjaztcblxuICAvLyBzdGFydCB0byBmaXJlIGNvbnRpbnVvdXNseSBhZnRlciBwcmVzc2luZyBmb3IgdGhpcyBsb25nLCBpbiBtc1xuICBkZWxheT86IG51bWJlcjtcblxuICAvLyBmaXJlIGNvbnRpbnVvdXNseSBhdCB0aGlzIGludGVydmFsLCBpbiBtc1xuICBpbnRlcnZhbD86IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIENhbGxiYWNrVGltZXJPcHRpb25zID0gU2VsZk9wdGlvbnM7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENhbGxiYWNrVGltZXIge1xuXG4gIHByaXZhdGUgcmVhZG9ubHkgY2FsbGJhY2tzOiBDYWxsYmFja1RpbWVyQ2FsbGJhY2tbXTtcblxuICAvLyBpbml0aWFsIGRlbGF5IGJldHdlZW4gd2hlbiBzdGFydCBpcyBjYWxsZWQgYW5kIHRoZSB0aW1lciBmaXJzdCBmaXJlcywgaW4gbXNcbiAgcHJpdmF0ZSByZWFkb25seSBkZWxheTogbnVtYmVyO1xuXG4gIC8vIGZpcmUgdGhlIHRpbWVyIGF0IHRoaXMgY29udGludW91cyBpbnRlcnZhbCwgaW4gbXNcbiAgcHJpdmF0ZSByZWFkb25seSBpbnRlcnZhbDogbnVtYmVyO1xuXG4gIC8vIGlkZW50aWZpZXIgZm9yIHRpbWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgaW5pdGlhbCBkZWxheVxuICBwcml2YXRlIGRlbGF5SUQ6IFRpbWVyTGlzdGVuZXIgfCBudWxsO1xuXG4gIC8vIGlkZW50aWZpZXIgZm9yIHRpbWVyIGFzc29jaWF0ZWQgd2l0aCB0aGUgY29udGludW91cyBpbnRlcnZhbFxuICBwcml2YXRlIGludGVydmFsSUQ6IFRpbWVyTGlzdGVuZXIgfCBudWxsO1xuXG4gIC8vIGhhcyB0aGUgdGltZXIgZmlyZWQgc2luY2UgaXQgd2FzIHN0YXJ0ZWQ/XG4gIHByaXZhdGUgZmlyZWQ6IGJvb2xlYW47XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm92aWRlZE9wdGlvbnM/OiBDYWxsYmFja1RpbWVyT3B0aW9ucyApIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8Q2FsbGJhY2tUaW1lck9wdGlvbnMsIFN0cmljdE9taXQ8U2VsZk9wdGlvbnMsICdjYWxsYmFjayc+PigpKCB7XG4gICAgICBkZWxheTogNDAwLFxuICAgICAgaW50ZXJ2YWw6IDEwMFxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xuXG4gICAgLy8gdmFsaWRhdGUgb3B0aW9uc1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMuZGVsYXkgPj0gMCwgYGJhZCB2YWx1ZSBmb3IgZGVsYXk6ICR7b3B0aW9ucy5kZWxheX1gICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5pbnRlcnZhbCA+IDAsIGBiYWQgdmFsdWUgZm9yIGludGVydmFsOiAke29wdGlvbnMuaW50ZXJ2YWx9YCApO1xuXG4gICAgdGhpcy5kZWxheSA9IG9wdGlvbnMuZGVsYXk7XG4gICAgdGhpcy5pbnRlcnZhbCA9IG9wdGlvbnMuaW50ZXJ2YWw7XG5cbiAgICB0aGlzLmNhbGxiYWNrcyA9IFtdO1xuICAgIGlmICggb3B0aW9ucy5jYWxsYmFjayApIHsgdGhpcy5jYWxsYmFja3MucHVzaCggb3B0aW9ucy5jYWxsYmFjayApOyB9XG5cbiAgICB0aGlzLmRlbGF5SUQgPSBudWxsO1xuICAgIHRoaXMuaW50ZXJ2YWxJRCA9IG51bGw7XG4gICAgdGhpcy5maXJlZCA9IGZhbHNlO1xuICB9XG5cbiAgcHVibGljIGlzUnVubmluZygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKCB0aGlzLmRlbGF5SUQgIT09IG51bGwgfHwgdGhpcy5pbnRlcnZhbElEICE9PSBudWxsICk7XG4gIH1cblxuICBwdWJsaWMgc3RhcnQoKTogdm9pZCB7XG4gICAgaWYgKCAhdGhpcy5pc1J1bm5pbmcoKSApIHtcbiAgICAgIHRoaXMuZmlyZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZGVsYXlJRCA9IHN0ZXBUaW1lci5zZXRUaW1lb3V0KCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZGVsYXlJRCA9IG51bGw7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJRCA9IHN0ZXBUaW1lci5zZXRJbnRlcnZhbCggKCkgPT4gdGhpcy5maXJlKCksIHRoaXMuaW50ZXJ2YWwgKTtcblxuICAgICAgICAvLyBmaXJlIGFmdGVyIHNjaGVkdWxpbmcgdGhlIGludGVydmFsSUQsIHNvIHRoYXQgaXNSdW5uaW5nIHdpbGwgYmUgdHJ1ZSBmb3IgY2FsbGJhY2tzLCBzZWUgc3VuIzIxNlxuICAgICAgICB0aGlzLmZpcmUoKTtcbiAgICAgIH0sIHRoaXMuZGVsYXkgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RvcHMgdGhlIHRpbWVyLlxuICAgKiBAcGFyYW0gZmlyZSAtIHNob3VsZCB3ZSBmaXJlIGlmIHdlIGhhdmVuJ3QgZmlyZWQgYWxyZWFkeT9cbiAgICovXG4gIHB1YmxpYyBzdG9wKCBmaXJlOiBib29sZWFuICk6IHZvaWQge1xuICAgIGlmICggdGhpcy5pc1J1bm5pbmcoKSApIHtcbiAgICAgIGlmICggdGhpcy5kZWxheUlEICkge1xuICAgICAgICBzdGVwVGltZXIuY2xlYXJUaW1lb3V0KCB0aGlzLmRlbGF5SUQgKTtcbiAgICAgICAgdGhpcy5kZWxheUlEID0gbnVsbDtcbiAgICAgIH1cbiAgICAgIGlmICggdGhpcy5pbnRlcnZhbElEICkge1xuICAgICAgICBzdGVwVGltZXIuY2xlYXJJbnRlcnZhbCggdGhpcy5pbnRlcnZhbElEICk7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWxJRCA9IG51bGw7XG4gICAgICB9XG4gICAgICBpZiAoIGZpcmUgJiYgIXRoaXMuZmlyZWQgKSB7XG4gICAgICAgIHRoaXMuZmlyZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBhZGRDYWxsYmFjayggY2FsbGJhY2s6IENhbGxiYWNrVGltZXJDYWxsYmFjayApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmNhbGxiYWNrcy5pbmNsdWRlcyggY2FsbGJhY2sgKSApIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrICk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlbW92ZUNhbGxiYWNrKCBjYWxsYmFjazogQ2FsbGJhY2tUaW1lckNhbGxiYWNrICk6IHZvaWQge1xuICAgIGNvbnN0IGluZGV4ID0gdGhpcy5jYWxsYmFja3MuaW5kZXhPZiggY2FsbGJhY2sgKTtcbiAgICBpZiAoIGluZGV4ICE9PSAtMSApIHtcbiAgICAgIHRoaXMuY2FsbGJhY2tzLnNwbGljZSggaW5kZXgsIDEgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgYWxsIGNhbGxiYWNrcy4gQ2xpZW50cyBhcmUgZnJlZSB0byBjYWxsIHRoaXMgd2hlbiB0aGUgdGltZXIgaXMgbm90IHJ1bm5pbmcuXG4gICAqL1xuICBwdWJsaWMgZmlyZSgpOiB2b2lkIHtcbiAgICBjb25zdCBjYWxsYmFja3NDb3B5ID0gdGhpcy5jYWxsYmFja3Muc2xpY2UoIDAgKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBjYWxsYmFja3NDb3B5Lmxlbmd0aDsgaSsrICkge1xuICAgICAgY2FsbGJhY2tzQ29weVsgaSBdKCk7XG4gICAgfVxuICAgIHRoaXMuZmlyZWQgPSB0cnVlO1xuICB9XG5cbiAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5zdG9wKCBmYWxzZSApO1xuICAgIHRoaXMuY2FsbGJhY2tzLmxlbmd0aCA9IDA7XG4gIH1cbn1c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
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/PhetioDataHandler.js
// Copyright 2022, University of Colorado Boulder

/**
 * Helper type that supports a `parameters` member.
 * This is mostly useful for PhET-iO instrumented sub-class to use that takes a variable number of parameters in their
 * IOType. With this function you gain parameter validation, PhET-iO documentation, and data stream support.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */








const PhetioDataHandler_VALIDATE_OPTIONS_FALSE = {
  validateValidator: false
};
// Simulations have thousands of Emitters, so we re-use objects where possible.
const EMPTY_ARRAY = [];
assert && Object.freeze(EMPTY_ARRAY);

// allowed keys to options.parameters
const PARAMETER_KEYS = ['name',
// required for phet-io instrumented Actions
'phetioType',
// required for phet-io instrumented Actions
'phetioDocumentation',
// optional, additional documentation for this specific parameter

// specify this to keep the parameter private to the PhET-iO API. To support emitting and executing over
// the PhET-iO API, phetioPrivate parameters must not ever be before a public one. For example
// `emit1( public1, private1, public2)` is not allowed. Instead it must be ordered like `emit( public1, public2, private1 )`
'phetioPrivate'].concat(Validation.VALIDATOR_KEYS);

// helper closures
const paramToPhetioType = param => param.phetioType;
const paramToName = param => param.name;
class PhetioDataHandler extends PhetioObject {
  constructor(providedOptions) {
    const options = optionize()({
      // see PARAMETER_KEYS for a list of legal keys, their types, and documentation
      parameters: EMPTY_ARRAY,
      // phet-io - see PhetioObject.js for doc
      tandem: js_Tandem.OPTIONAL,
      phetioPlayback: PhetioObject.DEFAULT_OPTIONS.phetioPlayback,
      phetioEventMetadata: PhetioObject.DEFAULT_OPTIONS.phetioEventMetadata,
      phetioDocumentation: ''
    }, providedOptions);
    assert && PhetioDataHandler.validateParameters(options.parameters, options.tandem.supplied);
    assert && assert(options.phetioType === undefined, 'PhetioDataHandler sets its own phetioType. Instead provide parameter phetioTypes through `options.parameters` with a phetioOuterType');

    // list of parameters, see options.parameters. Filter out phetioPrivate parameters, all `phetioPrivate`
    // parameters will not have a `phetioType`, see `validateParameters`.
    const phetioPublicParameters = options.parameters.filter(paramToPhetioType);
    options.phetioType = options.phetioOuterType(phetioPublicParameters.map(paramToPhetioType));

    // phetioPlayback events need to know the order the arguments occur in order to call EmitterIO.emit()
    // Indicate whether the event is for playback, but leave this "sparse"--only indicate when this happens to be true
    if (options.phetioPlayback) {
      options.phetioEventMetadata = options.phetioEventMetadata || {}; // phetioEventMetadata defaults to null

      assert && assert(!options.phetioEventMetadata.hasOwnProperty('dataKeys'), 'dataKeys should be supplied by PhetioDataHandler, not elsewhere');
      options.phetioEventMetadata.dataKeys = options.parameters.map(paramToName);
    }
    options.phetioDocumentation = PhetioDataHandler.getPhetioDocumentation(options.phetioDocumentation, phetioPublicParameters);
    super(options);

    // Note: one test indicates stripping this out via assert && in builds may save around 300kb heap
    this.parameters = options.parameters;
  }

  /**
   * @param parameters
   * @param tandemSupplied - proxy for whether the PhetioObject is instrumented.  We cannot call
   *                                 - PhetioObject.isPhetioInstrumented() until after the supercall, so we use this beforehand.
   */
  static validateParameters(parameters, tandemSupplied) {
    // validate the parameters object
    js_validate(parameters, {
      valueType: Array
    });

    // PhetioDataHandler only supports phetioPrivate parameters at the end of the emit call, so once we hit the first phetioPrivate
    // parameter, then assert that the rest of them afterwards are as well.
    let reachedPhetioPrivate = false;

    // we must iterate from the first parameter to the last parameter to support phetioPrivate
    for (let i = 0; i < parameters.length; i++) {
      const parameter = parameters[i]; // metadata about a single parameter

      assert && assert(Object.getPrototypeOf(parameter) === Object.prototype, 'Extra prototype on parameter object is a code smell');
      reachedPhetioPrivate = reachedPhetioPrivate || parameter.phetioPrivate;
      assert && reachedPhetioPrivate && assert(parameter.phetioPrivate, 'after first phetioPrivate parameter, all subsequent parameters must be phetioPrivate');
      assert && tandemSupplied && js_Tandem.VALIDATION && assert(parameter.phetioType || parameter.phetioPrivate, 'instrumented Emitters must include phetioType for each parameter or be marked as `phetioPrivate`.');
      assert && parameter.phetioType && assert(parameter.name, '`name` is a required parameter for phet-io instrumented parameters.');
      assert && js_assertMutuallyExclusiveOptions(parameter, ['phetioPrivate'], ['name', 'phetioType', 'phetioDocumentation']);
      assert && assert(_.intersection(Object.keys(parameter), Validation.VALIDATOR_KEYS).length > 0, `validator must be specified for parameter ${i}`);
      for (const key in parameter) {
        assert && assert(PARAMETER_KEYS.includes(key), `unrecognized parameter key: ${key}`);
      }

      // Changing after construction indicates a logic error.
      assert && Object.freeze(parameters[i]);

      // validate the options passed in to validate each PhetioDataHandler argument
      Validation.validateValidator(parameter);
    }

    // Changing after construction indicates a logic error.
    assert && Object.freeze(parameters);
  }

  /**
   * Validate that provided args match the expected schema given via options.parameters.
   */
  validateArguments(...args) {
    assert && assert(args.length === this.parameters.length, `Emitted unexpected number of args. Expected: ${this.parameters.length} and received ${args.length}`);
    for (let i = 0; i < this.parameters.length; i++) {
      const parameter = this.parameters[i];
      assert && js_validate(args[i], parameter, PhetioDataHandler_VALIDATE_OPTIONS_FALSE);

      // valueType overrides the phetioType validator so we don't use that one if there is a valueType
      if (parameter.phetioType && !parameter.valueType) {
        assert && js_validate(args[i], parameter.phetioType.validator, PhetioDataHandler_VALIDATE_OPTIONS_FALSE);
      }
    }
  }

  /**
   * Validate that provided args match the expected schema given via options.parameters.
   */
  getValidationErrors(...args) {
    assert && assert(args.length === this.parameters.length, `Emitted unexpected number of args. Expected: ${this.parameters.length} and received ${args.length}`);
    const errors = [];
    for (let i = 0; i < this.parameters.length; i++) {
      const parameter = this.parameters[i];
      let error = Validation.getValidationError(args[i], parameter, PhetioDataHandler_VALIDATE_OPTIONS_FALSE);
      error !== null && errors.push(error);

      // valueType overrides the phetioType validator so we don't use that one if there is a valueType
      if (parameter.phetioType && !parameter.valueType) {
        error = Validation.getValidationError(args[i], parameter.phetioType.validator, PhetioDataHandler_VALIDATE_OPTIONS_FALSE);
        error !== null && errors.push(error);
      }
    }
    return errors;
  }

  /**
   * Gets the data that will be emitted to the PhET-iO data stream, for an instrumented simulation.
   * @returns the data, keys dependent on parameter metadata
   */
  getPhetioData(...args) {
    assert && assert(js_Tandem.PHET_IO_ENABLED, 'should only get phet-io data in phet-io brand');

    // null if there are no arguments. dataStream.js omits null values for data
    let data = null;
    if (this.parameters.length > 0) {
      // Enumerate named argsObject for the data stream.
      data = {};
      for (let i = 0; i < this.parameters.length; i++) {
        const element = this.parameters[i];
        if (!element.phetioPrivate) {
          assert && assert(element.name, 'name required');
          data[element.name] = element.phetioType.toStateObject(args[i]);
        }
      }
    }
    return data;
  }

  /**
   * Get the phetioDocumentation compiled from all the parameters
   */
  static getPhetioDocumentation(currentPhetioDocumentation, parameters) {
    const paramToDocString = param => {
      const docText = param.phetioDocumentation ? ` - ${param.phetioDocumentation}` : '';
      return `<li>${param.name}: ${param.phetioType.typeName}${docText}</li>`;
    };
    return currentPhetioDocumentation + (parameters.length === 0 ? '<br>No parameters.' : `${'<br>The parameters are:<br/>' + '<ol>'}${parameters.map(paramToDocString).join('<br/>')}</ol>`);
  }
}
js_axon.register('PhetioDataHandler', PhetioDataHandler);
/* harmony default export */ const js_PhetioDataHandler = (PhetioDataHandler);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMiLCJvcHRpb25pemUiLCJQaGV0aW9PYmplY3QiLCJUYW5kZW0iLCJheG9uIiwidmFsaWRhdGUiLCJWYWxpZGF0aW9uIiwiVkFMSURBVEVfT1BUSU9OU19GQUxTRSIsInZhbGlkYXRlVmFsaWRhdG9yIiwiRU1QVFlfQVJSQVkiLCJhc3NlcnQiLCJPYmplY3QiLCJmcmVlemUiLCJQQVJBTUVURVJfS0VZUyIsImNvbmNhdCIsIlZBTElEQVRPUl9LRVlTIiwicGFyYW1Ub1BoZXRpb1R5cGUiLCJwYXJhbSIsInBoZXRpb1R5cGUiLCJwYXJhbVRvTmFtZSIsIm5hbWUiLCJQaGV0aW9EYXRhSGFuZGxlciIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInBhcmFtZXRlcnMiLCJ0YW5kZW0iLCJPUFRJT05BTCIsInBoZXRpb1BsYXliYWNrIiwiREVGQVVMVF9PUFRJT05TIiwicGhldGlvRXZlbnRNZXRhZGF0YSIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJ2YWxpZGF0ZVBhcmFtZXRlcnMiLCJzdXBwbGllZCIsInVuZGVmaW5lZCIsInBoZXRpb1B1YmxpY1BhcmFtZXRlcnMiLCJmaWx0ZXIiLCJwaGV0aW9PdXRlclR5cGUiLCJtYXAiLCJoYXNPd25Qcm9wZXJ0eSIsImRhdGFLZXlzIiwiZ2V0UGhldGlvRG9jdW1lbnRhdGlvbiIsInRhbmRlbVN1cHBsaWVkIiwidmFsdWVUeXBlIiwiQXJyYXkiLCJyZWFjaGVkUGhldGlvUHJpdmF0ZSIsImkiLCJsZW5ndGgiLCJwYXJhbWV0ZXIiLCJnZXRQcm90b3R5cGVPZiIsInByb3RvdHlwZSIsInBoZXRpb1ByaXZhdGUiLCJWQUxJREFUSU9OIiwiXyIsImludGVyc2VjdGlvbiIsImtleXMiLCJrZXkiLCJpbmNsdWRlcyIsInZhbGlkYXRlQXJndW1lbnRzIiwiYXJncyIsInZhbGlkYXRvciIsImdldFZhbGlkYXRpb25FcnJvcnMiLCJlcnJvcnMiLCJlcnJvciIsImdldFZhbGlkYXRpb25FcnJvciIsInB1c2giLCJnZXRQaGV0aW9EYXRhIiwiUEhFVF9JT19FTkFCTEVEIiwiZGF0YSIsImVsZW1lbnQiLCJ0b1N0YXRlT2JqZWN0IiwiY3VycmVudFBoZXRpb0RvY3VtZW50YXRpb24iLCJwYXJhbVRvRG9jU3RyaW5nIiwiZG9jVGV4dCIsInR5cGVOYW1lIiwiam9pbiIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGhldGlvRGF0YUhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEhlbHBlciB0eXBlIHRoYXQgc3VwcG9ydHMgYSBgcGFyYW1ldGVyc2AgbWVtYmVyLlxuICogVGhpcyBpcyBtb3N0bHkgdXNlZnVsIGZvciBQaEVULWlPIGluc3RydW1lbnRlZCBzdWItY2xhc3MgdG8gdXNlIHRoYXQgdGFrZXMgYSB2YXJpYWJsZSBudW1iZXIgb2YgcGFyYW1ldGVycyBpbiB0aGVpclxuICogSU9UeXBlLiBXaXRoIHRoaXMgZnVuY3Rpb24geW91IGdhaW4gcGFyYW1ldGVyIHZhbGlkYXRpb24sIFBoRVQtaU8gZG9jdW1lbnRhdGlvbiwgYW5kIGRhdGEgc3RyZWFtIHN1cHBvcnQuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgYXNzZXJ0TXV0dWFsbHlFeGNsdXNpdmVPcHRpb25zIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9hc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMuanMnO1xuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBQaGV0aW9PYmplY3QsIHsgUGhldGlvT2JqZWN0T3B0aW9ucyB9IGZyb20gJy4vUGhldGlvT2JqZWN0LmpzJztcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi9UYW5kZW0uanMnO1xuaW1wb3J0IElPVHlwZSBmcm9tICcuL3R5cGVzL0lPVHlwZS5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuLi8uLi9heG9uL2pzL2F4b24uanMnO1xuaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4uLy4uL2F4b24vanMvdmFsaWRhdGUuanMnO1xuaW1wb3J0IFZhbGlkYXRpb24sIHsgVmFsaWRhdG9yIH0gZnJvbSAnLi4vLi4vYXhvbi9qcy9WYWxpZGF0aW9uLmpzJztcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuXG5jb25zdCBWQUxJREFURV9PUFRJT05TX0ZBTFNFID0geyB2YWxpZGF0ZVZhbGlkYXRvcjogZmFsc2UgfTtcblxuZXhwb3J0IHR5cGUgUGFyYW1ldGVyID0ge1xuICBuYW1lPzogc3RyaW5nO1xuICBwaGV0aW9Eb2N1bWVudGF0aW9uPzogc3RyaW5nO1xuICBwaGV0aW9Qcml2YXRlPzogYm9vbGVhbjtcbn0gJiBWYWxpZGF0b3I7XG5cbi8vIFNpbXVsYXRpb25zIGhhdmUgdGhvdXNhbmRzIG9mIEVtaXR0ZXJzLCBzbyB3ZSByZS11c2Ugb2JqZWN0cyB3aGVyZSBwb3NzaWJsZS5cbmNvbnN0IEVNUFRZX0FSUkFZOiBQYXJhbWV0ZXJbXSA9IFtdO1xuYXNzZXJ0ICYmIE9iamVjdC5mcmVlemUoIEVNUFRZX0FSUkFZICk7XG5cbi8vIGFsbG93ZWQga2V5cyB0byBvcHRpb25zLnBhcmFtZXRlcnNcbmNvbnN0IFBBUkFNRVRFUl9LRVlTID0gW1xuICAnbmFtZScsIC8vIHJlcXVpcmVkIGZvciBwaGV0LWlvIGluc3RydW1lbnRlZCBBY3Rpb25zXG4gICdwaGV0aW9UeXBlJywgLy8gcmVxdWlyZWQgZm9yIHBoZXQtaW8gaW5zdHJ1bWVudGVkIEFjdGlvbnNcbiAgJ3BoZXRpb0RvY3VtZW50YXRpb24nLCAvLyBvcHRpb25hbCwgYWRkaXRpb25hbCBkb2N1bWVudGF0aW9uIGZvciB0aGlzIHNwZWNpZmljIHBhcmFtZXRlclxuXG4gIC8vIHNwZWNpZnkgdGhpcyB0byBrZWVwIHRoZSBwYXJhbWV0ZXIgcHJpdmF0ZSB0byB0aGUgUGhFVC1pTyBBUEkuIFRvIHN1cHBvcnQgZW1pdHRpbmcgYW5kIGV4ZWN1dGluZyBvdmVyXG4gIC8vIHRoZSBQaEVULWlPIEFQSSwgcGhldGlvUHJpdmF0ZSBwYXJhbWV0ZXJzIG11c3Qgbm90IGV2ZXIgYmUgYmVmb3JlIGEgcHVibGljIG9uZS4gRm9yIGV4YW1wbGVcbiAgLy8gYGVtaXQxKCBwdWJsaWMxLCBwcml2YXRlMSwgcHVibGljMilgIGlzIG5vdCBhbGxvd2VkLiBJbnN0ZWFkIGl0IG11c3QgYmUgb3JkZXJlZCBsaWtlIGBlbWl0KCBwdWJsaWMxLCBwdWJsaWMyLCBwcml2YXRlMSApYFxuICAncGhldGlvUHJpdmF0ZSdcblxuXS5jb25jYXQoIFZhbGlkYXRpb24uVkFMSURBVE9SX0tFWVMgKTtcblxuLy8gaGVscGVyIGNsb3N1cmVzXG5jb25zdCBwYXJhbVRvUGhldGlvVHlwZSA9ICggcGFyYW06IFBhcmFtZXRlciApID0+IHBhcmFtLnBoZXRpb1R5cGUhO1xuY29uc3QgcGFyYW1Ub05hbWUgPSAoIHBhcmFtOiBQYXJhbWV0ZXIgKSA9PiBwYXJhbS5uYW1lITtcblxudHlwZSBTZWxmT3B0aW9ucyA9IHtcbiAgcGFyYW1ldGVycz86IFBhcmFtZXRlcltdO1xuICBwaGV0aW9PdXRlclR5cGU6ICggdDogSU9UeXBlW10gKSA9PiBJT1R5cGU7XG59O1xuXG4vLyBVc2UgZWFjaCBzdWJ0eXBlIHNob3VsZCBwcm92aWRlIGl0cyBvd24gcGhldGlvT3V0ZXJUeXBlLiBUaGF0IGNvdXBsZWQgd2l0aCBwYXJhbWV0ZXIgSU9UeXBlcyB3aWxsIHJlc3VsdCBpbiB0aGVcbi8vIHBoZXRpb1R5cGUuIERvbid0IHBhc3MgdGhpcyBpbiFcbmV4cG9ydCB0eXBlIFBoZXRpb0RhdGFIYW5kbGVyT3B0aW9ucyA9IFNlbGZPcHRpb25zICYgU3RyaWN0T21pdDxQaGV0aW9PYmplY3RPcHRpb25zLCAncGhldGlvVHlwZSc+O1xuXG5jbGFzcyBQaGV0aW9EYXRhSGFuZGxlcjxUIGV4dGVuZHMgSW50ZW50aW9uYWxBbnlbXSA9IFtdPiBleHRlbmRzIFBoZXRpb09iamVjdCB7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBwYXJhbWV0ZXJzOiBQYXJhbWV0ZXJbXTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoIHByb3ZpZGVkT3B0aW9ucz86IFBoZXRpb0RhdGFIYW5kbGVyT3B0aW9ucyApIHtcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFBoZXRpb0RhdGFIYW5kbGVyT3B0aW9ucywgU2VsZk9wdGlvbnMsIFBoZXRpb09iamVjdE9wdGlvbnM+KCkoIHtcblxuICAgICAgLy8gc2VlIFBBUkFNRVRFUl9LRVlTIGZvciBhIGxpc3Qgb2YgbGVnYWwga2V5cywgdGhlaXIgdHlwZXMsIGFuZCBkb2N1bWVudGF0aW9uXG4gICAgICBwYXJhbWV0ZXJzOiBFTVBUWV9BUlJBWSxcblxuICAgICAgLy8gcGhldC1pbyAtIHNlZSBQaGV0aW9PYmplY3QuanMgZm9yIGRvY1xuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUSU9OQUwsXG4gICAgICBwaGV0aW9QbGF5YmFjazogUGhldGlvT2JqZWN0LkRFRkFVTFRfT1BUSU9OUy5waGV0aW9QbGF5YmFjayxcbiAgICAgIHBoZXRpb0V2ZW50TWV0YWRhdGE6IFBoZXRpb09iamVjdC5ERUZBVUxUX09QVElPTlMucGhldGlvRXZlbnRNZXRhZGF0YSxcbiAgICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICcnXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBhc3NlcnQgJiYgUGhldGlvRGF0YUhhbmRsZXIudmFsaWRhdGVQYXJhbWV0ZXJzKCBvcHRpb25zLnBhcmFtZXRlcnMsIG9wdGlvbnMudGFuZGVtLnN1cHBsaWVkICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5waGV0aW9UeXBlID09PSB1bmRlZmluZWQsXG4gICAgICAnUGhldGlvRGF0YUhhbmRsZXIgc2V0cyBpdHMgb3duIHBoZXRpb1R5cGUuIEluc3RlYWQgcHJvdmlkZSBwYXJhbWV0ZXIgcGhldGlvVHlwZXMgdGhyb3VnaCBgb3B0aW9ucy5wYXJhbWV0ZXJzYCB3aXRoIGEgcGhldGlvT3V0ZXJUeXBlJyApO1xuXG4gICAgLy8gbGlzdCBvZiBwYXJhbWV0ZXJzLCBzZWUgb3B0aW9ucy5wYXJhbWV0ZXJzLiBGaWx0ZXIgb3V0IHBoZXRpb1ByaXZhdGUgcGFyYW1ldGVycywgYWxsIGBwaGV0aW9Qcml2YXRlYFxuICAgIC8vIHBhcmFtZXRlcnMgd2lsbCBub3QgaGF2ZSBhIGBwaGV0aW9UeXBlYCwgc2VlIGB2YWxpZGF0ZVBhcmFtZXRlcnNgLlxuICAgIGNvbnN0IHBoZXRpb1B1YmxpY1BhcmFtZXRlcnMgPSBvcHRpb25zLnBhcmFtZXRlcnMuZmlsdGVyKCBwYXJhbVRvUGhldGlvVHlwZSApO1xuXG4gICAgb3B0aW9ucy5waGV0aW9UeXBlID0gb3B0aW9ucy5waGV0aW9PdXRlclR5cGUoIHBoZXRpb1B1YmxpY1BhcmFtZXRlcnMubWFwKCBwYXJhbVRvUGhldGlvVHlwZSApICk7XG5cbiAgICAvLyBwaGV0aW9QbGF5YmFjayBldmVudHMgbmVlZCB0byBrbm93IHRoZSBvcmRlciB0aGUgYXJndW1lbnRzIG9jY3VyIGluIG9yZGVyIHRvIGNhbGwgRW1pdHRlcklPLmVtaXQoKVxuICAgIC8vIEluZGljYXRlIHdoZXRoZXIgdGhlIGV2ZW50IGlzIGZvciBwbGF5YmFjaywgYnV0IGxlYXZlIHRoaXMgXCJzcGFyc2VcIi0tb25seSBpbmRpY2F0ZSB3aGVuIHRoaXMgaGFwcGVucyB0byBiZSB0cnVlXG4gICAgaWYgKCBvcHRpb25zLnBoZXRpb1BsYXliYWNrICkge1xuICAgICAgb3B0aW9ucy5waGV0aW9FdmVudE1ldGFkYXRhID0gb3B0aW9ucy5waGV0aW9FdmVudE1ldGFkYXRhIHx8IHt9OyAvLyBwaGV0aW9FdmVudE1ldGFkYXRhIGRlZmF1bHRzIHRvIG51bGxcblxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMucGhldGlvRXZlbnRNZXRhZGF0YS5oYXNPd25Qcm9wZXJ0eSggJ2RhdGFLZXlzJyApLFxuICAgICAgICAnZGF0YUtleXMgc2hvdWxkIGJlIHN1cHBsaWVkIGJ5IFBoZXRpb0RhdGFIYW5kbGVyLCBub3QgZWxzZXdoZXJlJyApO1xuXG4gICAgICBvcHRpb25zLnBoZXRpb0V2ZW50TWV0YWRhdGEuZGF0YUtleXMgPSBvcHRpb25zLnBhcmFtZXRlcnMubWFwKCBwYXJhbVRvTmFtZSApO1xuICAgIH1cbiAgICBvcHRpb25zLnBoZXRpb0RvY3VtZW50YXRpb24gPSBQaGV0aW9EYXRhSGFuZGxlci5nZXRQaGV0aW9Eb2N1bWVudGF0aW9uKCBvcHRpb25zLnBoZXRpb0RvY3VtZW50YXRpb24sIHBoZXRpb1B1YmxpY1BhcmFtZXRlcnMgKTtcblxuICAgIHN1cGVyKCBvcHRpb25zICk7XG5cbiAgICAvLyBOb3RlOiBvbmUgdGVzdCBpbmRpY2F0ZXMgc3RyaXBwaW5nIHRoaXMgb3V0IHZpYSBhc3NlcnQgJiYgaW4gYnVpbGRzIG1heSBzYXZlIGFyb3VuZCAzMDBrYiBoZWFwXG4gICAgdGhpcy5wYXJhbWV0ZXJzID0gb3B0aW9ucy5wYXJhbWV0ZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBwYXJhbWV0ZXJzXG4gICAqIEBwYXJhbSB0YW5kZW1TdXBwbGllZCAtIHByb3h5IGZvciB3aGV0aGVyIHRoZSBQaGV0aW9PYmplY3QgaXMgaW5zdHJ1bWVudGVkLiAgV2UgY2Fubm90IGNhbGxcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAtIFBoZXRpb09iamVjdC5pc1BoZXRpb0luc3RydW1lbnRlZCgpIHVudGlsIGFmdGVyIHRoZSBzdXBlcmNhbGwsIHNvIHdlIHVzZSB0aGlzIGJlZm9yZWhhbmQuXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyB2YWxpZGF0ZVBhcmFtZXRlcnMoIHBhcmFtZXRlcnM6IFBhcmFtZXRlcltdLCB0YW5kZW1TdXBwbGllZDogYm9vbGVhbiApOiB2b2lkIHtcblxuICAgIC8vIHZhbGlkYXRlIHRoZSBwYXJhbWV0ZXJzIG9iamVjdFxuICAgIHZhbGlkYXRlKCBwYXJhbWV0ZXJzLCB7IHZhbHVlVHlwZTogQXJyYXkgfSApO1xuXG4gICAgLy8gUGhldGlvRGF0YUhhbmRsZXIgb25seSBzdXBwb3J0cyBwaGV0aW9Qcml2YXRlIHBhcmFtZXRlcnMgYXQgdGhlIGVuZCBvZiB0aGUgZW1pdCBjYWxsLCBzbyBvbmNlIHdlIGhpdCB0aGUgZmlyc3QgcGhldGlvUHJpdmF0ZVxuICAgIC8vIHBhcmFtZXRlciwgdGhlbiBhc3NlcnQgdGhhdCB0aGUgcmVzdCBvZiB0aGVtIGFmdGVyd2FyZHMgYXJlIGFzIHdlbGwuXG4gICAgbGV0IHJlYWNoZWRQaGV0aW9Qcml2YXRlID0gZmFsc2U7XG5cbiAgICAvLyB3ZSBtdXN0IGl0ZXJhdGUgZnJvbSB0aGUgZmlyc3QgcGFyYW1ldGVyIHRvIHRoZSBsYXN0IHBhcmFtZXRlciB0byBzdXBwb3J0IHBoZXRpb1ByaXZhdGVcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBwYXJhbWV0ZXJzLmxlbmd0aDsgaSsrICkge1xuICAgICAgY29uc3QgcGFyYW1ldGVyID0gcGFyYW1ldGVyc1sgaSBdOyAvLyBtZXRhZGF0YSBhYm91dCBhIHNpbmdsZSBwYXJhbWV0ZXJcblxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggT2JqZWN0LmdldFByb3RvdHlwZU9mKCBwYXJhbWV0ZXIgKSA9PT0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAgICAgJ0V4dHJhIHByb3RvdHlwZSBvbiBwYXJhbWV0ZXIgb2JqZWN0IGlzIGEgY29kZSBzbWVsbCcgKTtcblxuICAgICAgcmVhY2hlZFBoZXRpb1ByaXZhdGUgPSByZWFjaGVkUGhldGlvUHJpdmF0ZSB8fCBwYXJhbWV0ZXIucGhldGlvUHJpdmF0ZSE7XG4gICAgICBhc3NlcnQgJiYgcmVhY2hlZFBoZXRpb1ByaXZhdGUgJiYgYXNzZXJ0KCBwYXJhbWV0ZXIucGhldGlvUHJpdmF0ZSxcbiAgICAgICAgJ2FmdGVyIGZpcnN0IHBoZXRpb1ByaXZhdGUgcGFyYW1ldGVyLCBhbGwgc3Vic2VxdWVudCBwYXJhbWV0ZXJzIG11c3QgYmUgcGhldGlvUHJpdmF0ZScgKTtcblxuICAgICAgYXNzZXJ0ICYmIHRhbmRlbVN1cHBsaWVkICYmIFRhbmRlbS5WQUxJREFUSU9OICYmIGFzc2VydCggcGFyYW1ldGVyLnBoZXRpb1R5cGUgfHwgcGFyYW1ldGVyLnBoZXRpb1ByaXZhdGUsXG4gICAgICAgICdpbnN0cnVtZW50ZWQgRW1pdHRlcnMgbXVzdCBpbmNsdWRlIHBoZXRpb1R5cGUgZm9yIGVhY2ggcGFyYW1ldGVyIG9yIGJlIG1hcmtlZCBhcyBgcGhldGlvUHJpdmF0ZWAuJyApO1xuICAgICAgYXNzZXJ0ICYmIHBhcmFtZXRlci5waGV0aW9UeXBlICYmIGFzc2VydCggcGFyYW1ldGVyLm5hbWUsXG4gICAgICAgICdgbmFtZWAgaXMgYSByZXF1aXJlZCBwYXJhbWV0ZXIgZm9yIHBoZXQtaW8gaW5zdHJ1bWVudGVkIHBhcmFtZXRlcnMuJyApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyggcGFyYW1ldGVyLCBbICdwaGV0aW9Qcml2YXRlJyBdLCBbXG4gICAgICAgICduYW1lJywgJ3BoZXRpb1R5cGUnLCAncGhldGlvRG9jdW1lbnRhdGlvbidcbiAgICAgIF0gKTtcblxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggXy5pbnRlcnNlY3Rpb24oIE9iamVjdC5rZXlzKCBwYXJhbWV0ZXIgKSwgVmFsaWRhdGlvbi5WQUxJREFUT1JfS0VZUyApLmxlbmd0aCA+IDAsXG4gICAgICAgIGB2YWxpZGF0b3IgbXVzdCBiZSBzcGVjaWZpZWQgZm9yIHBhcmFtZXRlciAke2l9YCApO1xuXG4gICAgICBmb3IgKCBjb25zdCBrZXkgaW4gcGFyYW1ldGVyICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBQQVJBTUVURVJfS0VZUy5pbmNsdWRlcygga2V5ICksIGB1bnJlY29nbml6ZWQgcGFyYW1ldGVyIGtleTogJHtrZXl9YCApO1xuICAgICAgfVxuXG4gICAgICAvLyBDaGFuZ2luZyBhZnRlciBjb25zdHJ1Y3Rpb24gaW5kaWNhdGVzIGEgbG9naWMgZXJyb3IuXG4gICAgICBhc3NlcnQgJiYgT2JqZWN0LmZyZWV6ZSggcGFyYW1ldGVyc1sgaSBdICk7XG5cbiAgICAgIC8vIHZhbGlkYXRlIHRoZSBvcHRpb25zIHBhc3NlZCBpbiB0byB2YWxpZGF0ZSBlYWNoIFBoZXRpb0RhdGFIYW5kbGVyIGFyZ3VtZW50XG4gICAgICBWYWxpZGF0aW9uLnZhbGlkYXRlVmFsaWRhdG9yKCBwYXJhbWV0ZXIgKTtcbiAgICB9XG5cbiAgICAvLyBDaGFuZ2luZyBhZnRlciBjb25zdHJ1Y3Rpb24gaW5kaWNhdGVzIGEgbG9naWMgZXJyb3IuXG4gICAgYXNzZXJ0ICYmIE9iamVjdC5mcmVlemUoIHBhcmFtZXRlcnMgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSB0aGF0IHByb3ZpZGVkIGFyZ3MgbWF0Y2ggdGhlIGV4cGVjdGVkIHNjaGVtYSBnaXZlbiB2aWEgb3B0aW9ucy5wYXJhbWV0ZXJzLlxuICAgKi9cbiAgcHJvdGVjdGVkIHZhbGlkYXRlQXJndW1lbnRzKCAuLi5hcmdzOiBUICk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGFyZ3MubGVuZ3RoID09PSB0aGlzLnBhcmFtZXRlcnMubGVuZ3RoLFxuICAgICAgYEVtaXR0ZWQgdW5leHBlY3RlZCBudW1iZXIgb2YgYXJncy4gRXhwZWN0ZWQ6ICR7dGhpcy5wYXJhbWV0ZXJzLmxlbmd0aH0gYW5kIHJlY2VpdmVkICR7YXJncy5sZW5ndGh9YFxuICAgICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5wYXJhbWV0ZXJzLmxlbmd0aDsgaSsrICkge1xuICAgICAgY29uc3QgcGFyYW1ldGVyID0gdGhpcy5wYXJhbWV0ZXJzWyBpIF07XG4gICAgICBhc3NlcnQgJiYgdmFsaWRhdGUoIGFyZ3NbIGkgXSwgcGFyYW1ldGVyLCBWQUxJREFURV9PUFRJT05TX0ZBTFNFICk7XG5cbiAgICAgIC8vIHZhbHVlVHlwZSBvdmVycmlkZXMgdGhlIHBoZXRpb1R5cGUgdmFsaWRhdG9yIHNvIHdlIGRvbid0IHVzZSB0aGF0IG9uZSBpZiB0aGVyZSBpcyBhIHZhbHVlVHlwZVxuICAgICAgaWYgKCBwYXJhbWV0ZXIucGhldGlvVHlwZSAmJiAhcGFyYW1ldGVyLnZhbHVlVHlwZSApIHtcbiAgICAgICAgYXNzZXJ0ICYmIHZhbGlkYXRlKCBhcmdzWyBpIF0sIHBhcmFtZXRlci5waGV0aW9UeXBlLnZhbGlkYXRvciwgVkFMSURBVEVfT1BUSU9OU19GQUxTRSApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBWYWxpZGF0ZSB0aGF0IHByb3ZpZGVkIGFyZ3MgbWF0Y2ggdGhlIGV4cGVjdGVkIHNjaGVtYSBnaXZlbiB2aWEgb3B0aW9ucy5wYXJhbWV0ZXJzLlxuICAgKi9cbiAgcHJvdGVjdGVkIGdldFZhbGlkYXRpb25FcnJvcnMoIC4uLmFyZ3M6IFQgKTogQXJyYXk8c3RyaW5nPiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYXJncy5sZW5ndGggPT09IHRoaXMucGFyYW1ldGVycy5sZW5ndGgsXG4gICAgICBgRW1pdHRlZCB1bmV4cGVjdGVkIG51bWJlciBvZiBhcmdzLiBFeHBlY3RlZDogJHt0aGlzLnBhcmFtZXRlcnMubGVuZ3RofSBhbmQgcmVjZWl2ZWQgJHthcmdzLmxlbmd0aH1gXG4gICAgKTtcbiAgICBjb25zdCBlcnJvcnMgPSBbXTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLnBhcmFtZXRlcnMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBjb25zdCBwYXJhbWV0ZXIgPSB0aGlzLnBhcmFtZXRlcnNbIGkgXTtcbiAgICAgIGxldCBlcnJvciA9IFZhbGlkYXRpb24uZ2V0VmFsaWRhdGlvbkVycm9yKCBhcmdzWyBpIF0sIHBhcmFtZXRlciwgVkFMSURBVEVfT1BUSU9OU19GQUxTRSApO1xuICAgICAgZXJyb3IgIT09IG51bGwgJiYgZXJyb3JzLnB1c2goIGVycm9yICk7XG5cbiAgICAgIC8vIHZhbHVlVHlwZSBvdmVycmlkZXMgdGhlIHBoZXRpb1R5cGUgdmFsaWRhdG9yIHNvIHdlIGRvbid0IHVzZSB0aGF0IG9uZSBpZiB0aGVyZSBpcyBhIHZhbHVlVHlwZVxuICAgICAgaWYgKCBwYXJhbWV0ZXIucGhldGlvVHlwZSAmJiAhcGFyYW1ldGVyLnZhbHVlVHlwZSApIHtcbiAgICAgICAgZXJyb3IgPSBWYWxpZGF0aW9uLmdldFZhbGlkYXRpb25FcnJvciggYXJnc1sgaSBdLCBwYXJhbWV0ZXIucGhldGlvVHlwZS52YWxpZGF0b3IsIFZBTElEQVRFX09QVElPTlNfRkFMU0UgKTtcbiAgICAgICAgZXJyb3IgIT09IG51bGwgJiYgZXJyb3JzLnB1c2goIGVycm9yICk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBlcnJvcnM7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgZGF0YSB0aGF0IHdpbGwgYmUgZW1pdHRlZCB0byB0aGUgUGhFVC1pTyBkYXRhIHN0cmVhbSwgZm9yIGFuIGluc3RydW1lbnRlZCBzaW11bGF0aW9uLlxuICAgKiBAcmV0dXJucyB0aGUgZGF0YSwga2V5cyBkZXBlbmRlbnQgb24gcGFyYW1ldGVyIG1ldGFkYXRhXG4gICAqL1xuICBwdWJsaWMgZ2V0UGhldGlvRGF0YSggLi4uYXJnczogVCApOiBudWxsIHwgUmVjb3JkPHN0cmluZywgdW5rbm93bj4ge1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCwgJ3Nob3VsZCBvbmx5IGdldCBwaGV0LWlvIGRhdGEgaW4gcGhldC1pbyBicmFuZCcgKTtcblxuICAgIC8vIG51bGwgaWYgdGhlcmUgYXJlIG5vIGFyZ3VtZW50cy4gZGF0YVN0cmVhbS5qcyBvbWl0cyBudWxsIHZhbHVlcyBmb3IgZGF0YVxuICAgIGxldCBkYXRhOiBSZWNvcmQ8c3RyaW5nLCBvYmplY3Q+IHwgbnVsbCA9IG51bGw7XG4gICAgaWYgKCB0aGlzLnBhcmFtZXRlcnMubGVuZ3RoID4gMCApIHtcblxuICAgICAgLy8gRW51bWVyYXRlIG5hbWVkIGFyZ3NPYmplY3QgZm9yIHRoZSBkYXRhIHN0cmVhbS5cbiAgICAgIGRhdGEgPSB7fTtcbiAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMucGFyYW1ldGVycy5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgY29uc3QgZWxlbWVudCA9IHRoaXMucGFyYW1ldGVyc1sgaSBdO1xuICAgICAgICBpZiAoICFlbGVtZW50LnBoZXRpb1ByaXZhdGUgKSB7XG4gICAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggZWxlbWVudC5uYW1lLCAnbmFtZSByZXF1aXJlZCcgKTtcbiAgICAgICAgICBkYXRhWyBlbGVtZW50Lm5hbWUhIF0gPSBlbGVtZW50LnBoZXRpb1R5cGUhLnRvU3RhdGVPYmplY3QoIGFyZ3NbIGkgXSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBkYXRhO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCB0aGUgcGhldGlvRG9jdW1lbnRhdGlvbiBjb21waWxlZCBmcm9tIGFsbCB0aGUgcGFyYW1ldGVyc1xuICAgKi9cbiAgcHJpdmF0ZSBzdGF0aWMgZ2V0UGhldGlvRG9jdW1lbnRhdGlvbiggY3VycmVudFBoZXRpb0RvY3VtZW50YXRpb246IHN0cmluZywgcGFyYW1ldGVyczogUGFyYW1ldGVyW10gKTogc3RyaW5nIHtcbiAgICBjb25zdCBwYXJhbVRvRG9jU3RyaW5nID0gKCBwYXJhbTogUGFyYW1ldGVyICkgPT4ge1xuXG4gICAgICBjb25zdCBkb2NUZXh0ID0gcGFyYW0ucGhldGlvRG9jdW1lbnRhdGlvbiA/IGAgLSAke3BhcmFtLnBoZXRpb0RvY3VtZW50YXRpb259YCA6ICcnO1xuXG4gICAgICByZXR1cm4gYDxsaT4ke3BhcmFtLm5hbWV9OiAke3BhcmFtLnBoZXRpb1R5cGUhLnR5cGVOYW1lfSR7ZG9jVGV4dH08L2xpPmA7XG4gICAgfTtcblxuICAgIHJldHVybiBjdXJyZW50UGhldGlvRG9jdW1lbnRhdGlvbiArICggcGFyYW1ldGVycy5sZW5ndGggPT09IDAgPyAnPGJyPk5vIHBhcmFtZXRlcnMuJyA6IGAkeyc8YnI+VGhlIHBhcmFtZXRlcnMgYXJlOjxici8+JyArXG4gICAgICAgICAgICc8b2w+J30ke3BhcmFtZXRlcnMubWFwKCBwYXJhbVRvRG9jU3RyaW5nICkuam9pbiggJzxici8+JyApfTwvb2w+YCApO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdQaGV0aW9EYXRhSGFuZGxlcicsIFBoZXRpb0RhdGFIYW5kbGVyICk7XG5leHBvcnQgZGVmYXVsdCBQaGV0aW9EYXRhSGFuZGxlcjsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsOEJBQThCLE1BQU0sc0RBQXNEO0FBQ2pHLE9BQU9DLFNBQVMsTUFBTSxpQ0FBaUM7QUFDdkQsT0FBT0MsWUFBWSxNQUErQixtQkFBbUI7QUFDckUsT0FBT0MsTUFBTSxNQUFNLGFBQWE7QUFFaEMsT0FBT0MsSUFBSSxNQUFNLHVCQUF1QjtBQUN4QyxPQUFPQyxRQUFRLE1BQU0sMkJBQTJCO0FBQ2hELE9BQU9DLFVBQVUsTUFBcUIsNkJBQTZCO0FBSW5FLE1BQU1DLHNCQUFzQixHQUFHO0VBQUVDLGlCQUFpQixFQUFFO0FBQU0sQ0FBQztBQVEzRDtBQUNBLE1BQU1DLFdBQXdCLEdBQUcsRUFBRTtBQUNuQ0MsTUFBTSxJQUFJQyxNQUFNLENBQUNDLE1BQU0sQ0FBRUgsV0FBVyxDQUFFOztBQUV0QztBQUNBLE1BQU1JLGNBQWMsR0FBRyxDQUNyQixNQUFNO0FBQUU7QUFDUixZQUFZO0FBQUU7QUFD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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/Emitter.js
// Copyright 2019-2022, University of Colorado Boulder

/**
 * Event & listener abstraction for a single "event" type. The type provides extra functionality beyond just notifying
 * listeners. It adds PhET-iO instrumentation capabilities as well as validation. For the lightest-weight, fastest
 * solution with the smallest memory footprint, see `TinyEmitter`.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */









// By default, Emitters are not stateful
const PHET_IO_STATE_DEFAULT = false;
class Emitter extends js_PhetioDataHandler {
  // provide Emitter functionality via composition

  /**
   * IO Type for Emitter.
   *
   * Providing validators to instrumented Emitters:
   * Instrumented Emitters should have their `validators` for each argument passed via EmitterIO (the phetioType).
   * To provide validators, there are two methods. First, by default each IOType has its own
   * validator that will be used. So specifying an argument object like `{ type: NumberIO }` will automatically use
   * `NumberIO.validator` as the validator. This can be overridden with the `validator` key (second option), like
   * { type: NumberIO, validator: { isValidValue: v=> typeof v === 'number' &&  v < 5 } }`
   * NOTE: currently the implementation is either/or, if a validator is provided via the `validator` key, the validator
   * from the `type` will be ignored.
   * see https://github.com/phetsims/axon/issues/204 for more details.
   *
   * @author Sam Reid (PhET Interactive Simulations)
   * @author Michael Kauzmann (PhET Interactive Simulations)
   * @author Andrew Adare (PhET Interactive Simulations)
   */
  static EmitterIO = parameterTypes => {
    const key = parameterTypes.map(getTypeName).join(',');
    if (!Emitter_cache.has(key)) {
      Emitter_cache.set(key, new IOType(`EmitterIO<${parameterTypes.map(getTypeName).join(', ')}>`, {
        valueType: Emitter,
        documentation: 'Emits when an event occurs and calls added listeners.',
        parameterTypes: parameterTypes,
        events: ['emitted'],
        metadataDefaults: {
          phetioState: PHET_IO_STATE_DEFAULT
        },
        methods: {
          addListener: {
            returnType: types_VoidIO,
            parameterTypes: [types_FunctionIO(types_VoidIO, parameterTypes)],
            implementation: Emitter.prototype.addListener,
            documentation: 'Adds a listener which will be called when the emitter emits.'
          },
          removeListener: {
            returnType: types_VoidIO,
            parameterTypes: [types_FunctionIO(types_VoidIO, parameterTypes)],
            implementation: Emitter.prototype.removeListener,
            documentation: 'Remove a listener.'
          },
          emit: {
            returnType: types_VoidIO,
            parameterTypes: parameterTypes,
            // Match `Emitter.emit`'s dynamic number of arguments
            implementation: function (...values) {
              const errors = this.getValidationErrors(...values);
              if (errors.length > 0) {
                throw new Error(`Validation errors: ${errors.join(', ')}`);
              } else {
                this.emit(values);
              }
            },
            documentation: 'Emits a single event to all listeners.',
            invocableForReadOnlyElements: false
          }
        }
      }));
    }
    return Emitter_cache.get(key);
  };
  constructor(providedOptions) {
    const options = optionize()({
      phetioOuterType: Emitter.EmitterIO,
      phetioState: PHET_IO_STATE_DEFAULT
    }, providedOptions);
    super(options);
    this.tinyEmitter = new TinyEmitter();
  }

  /**
   * Emit to notify listeners
   */
  emit(...args) {
    assert && assert(this.tinyEmitter instanceof TinyEmitter, 'Emitter should not emit until constructor complete');
    assert && this.validateArguments(...args);

    // Although this is not the idiomatic pattern (since it is guarded in the phetioStartEvent), this function is
    // called so many times that it is worth the optimization for PhET brand.
    js_Tandem.PHET_IO_ENABLED && this.isPhetioInstrumented() && this.phetioStartEvent('emitted', {
      data: this.getPhetioData(...args)
    });
    this.tinyEmitter.emit(...args);
    js_Tandem.PHET_IO_ENABLED && this.isPhetioInstrumented() && this.phetioEndEvent();
  }

  /**
   * Disposes an Emitter. All listeners are removed.
   */
  dispose() {
    this.tinyEmitter.dispose();
    super.dispose();
  }

  /**
   * Adds a listener which will be called during emit.
   */
  addListener(listener) {
    this.tinyEmitter.addListener(listener);
  }

  /**
   * Removes a listener
   */
  removeListener(listener) {
    this.tinyEmitter.removeListener(listener);
  }

  /**
   * Removes all the listeners
   */
  removeAllListeners() {
    this.tinyEmitter.removeAllListeners();
  }

  /**
   * Checks whether a listener is registered with this Emitter
   */
  hasListener(listener) {
    return this.tinyEmitter.hasListener(listener);
  }

  /**
   * Returns true if there are any listeners.
   */
  hasListeners() {
    return this.tinyEmitter.hasListeners();
  }

  /**
   * Returns the number of listeners.
   */
  getListenerCount() {
    return this.tinyEmitter.getListenerCount();
  }

  /**
   * Convenience function for debugging a Property's value. It prints the new value on registration and when changed.
   * @param name - debug name to be printed on the console
   * @returns - the handle to the listener added in case it needs to be removed later
   */
  debug(name) {
    const listener = (...args) => console.log(name, ...args);
    this.addListener(listener);
    return listener;
  }
}
const getTypeName = ioType => ioType.typeName;

// {Map.<string, IOType>} - Cache each parameterized IOType so that
// it is only created once.
const Emitter_cache = new Map();
js_axon.register('Emitter', Emitter);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJGdW5jdGlvbklPIiwiSU9UeXBlIiwiVm9pZElPIiwiUGhldGlvRGF0YUhhbmRsZXIiLCJheG9uIiwiVGlueUVtaXR0ZXIiLCJUYW5kZW0iLCJQSEVUX0lPX1NUQVRFX0RFRkFVTFQiLCJFbWl0dGVyIiwiRW1pdHRlcklPIiwicGFyYW1ldGVyVHlwZXMiLCJrZXkiLCJtYXAiLCJnZXRUeXBlTmFtZSIsImpvaW4iLCJjYWNoZSIsImhhcyIsInNldCIsInZhbHVlVHlwZSIsImRvY3VtZW50YXRpb24iLCJldmVudHMiLCJtZXRhZGF0YURlZmF1bHRzIiwicGhldGlvU3RhdGUiLCJtZXRob2RzIiwiYWRkTGlzdGVuZXIiLCJyZXR1cm5UeXBlIiwiaW1wbGVtZW50YXRpb24iLCJwcm90b3R5cGUiLCJyZW1vdmVMaXN0ZW5lciIsImVtaXQiLCJ2YWx1ZXMiLCJlcnJvcnMiLCJnZXRWYWxpZGF0aW9uRXJyb3JzIiwibGVuZ3RoIiwiRXJyb3IiLCJpbnZvY2FibGVGb3JSZWFkT25seUVsZW1lbnRzIiwiZ2V0IiwiY29uc3RydWN0b3IiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwicGhldGlvT3V0ZXJUeXBlIiwidGlueUVtaXR0ZXIiLCJhcmdzIiwiYXNzZXJ0IiwidmFsaWRhdGVBcmd1bWVudHMiLCJQSEVUX0lPX0VOQUJMRUQiLCJpc1BoZXRpb0luc3RydW1lbnRlZCIsInBoZXRpb1N0YXJ0RXZlbnQiLCJkYXRhIiwiZ2V0UGhldGlvRGF0YSIsInBoZXRpb0VuZEV2ZW50IiwiZGlzcG9zZSIsImxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiaGFzTGlzdGVuZXIiLCJoYXNMaXN0ZW5lcnMiLCJnZXRMaXN0ZW5lckNvdW50IiwiZGVidWciLCJuYW1lIiwiY29uc29sZSIsImxvZyIsImlvVHlwZSIsInR5cGVOYW1lIiwiTWFwIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFbWl0dGVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE5LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEV2ZW50ICYgbGlzdGVuZXIgYWJzdHJhY3Rpb24gZm9yIGEgc2luZ2xlIFwiZXZlbnRcIiB0eXBlLiBUaGUgdHlwZSBwcm92aWRlcyBleHRyYSBmdW5jdGlvbmFsaXR5IGJleW9uZCBqdXN0IG5vdGlmeWluZ1xuICogbGlzdGVuZXJzLiBJdCBhZGRzIFBoRVQtaU8gaW5zdHJ1bWVudGF0aW9uIGNhcGFiaWxpdGllcyBhcyB3ZWxsIGFzIHZhbGlkYXRpb24uIEZvciB0aGUgbGlnaHRlc3Qtd2VpZ2h0LCBmYXN0ZXN0XG4gKiBzb2x1dGlvbiB3aXRoIHRoZSBzbWFsbGVzdCBtZW1vcnkgZm9vdHByaW50LCBzZWUgYFRpbnlFbWl0dGVyYC5cbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBvcHRpb25pemUsIHsgRW1wdHlTZWxmT3B0aW9ucyB9IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xuaW1wb3J0IEZ1bmN0aW9uSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0Z1bmN0aW9uSU8uanMnO1xuaW1wb3J0IElPVHlwZSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvSU9UeXBlLmpzJztcbmltcG9ydCBWb2lkSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL1ZvaWRJTy5qcyc7XG5pbXBvcnQgUGhldGlvRGF0YUhhbmRsZXIsIHsgUGhldGlvRGF0YUhhbmRsZXJPcHRpb25zIH0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1BoZXRpb0RhdGFIYW5kbGVyLmpzJztcbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgVGlueUVtaXR0ZXIgZnJvbSAnLi9UaW55RW1pdHRlci5qcyc7XG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xuaW1wb3J0IFRFbWl0dGVyLCB7IFRFbWl0dGVyTGlzdGVuZXIsIFRFbWl0dGVyUGFyYW1ldGVyIH0gZnJvbSAnLi9URW1pdHRlci5qcyc7XG5cbi8vIEJ5IGRlZmF1bHQsIEVtaXR0ZXJzIGFyZSBub3Qgc3RhdGVmdWxcbmNvbnN0IFBIRVRfSU9fU1RBVEVfREVGQVVMVCA9IGZhbHNlO1xuXG50eXBlIFNlbGZPcHRpb25zID0gRW1wdHlTZWxmT3B0aW9ucztcbnR5cGUgRW1pdHRlck9wdGlvbnMgPSBTZWxmT3B0aW9ucyAmIFN0cmljdE9taXQ8UGhldGlvRGF0YUhhbmRsZXJPcHRpb25zLCAncGhldGlvT3V0ZXJUeXBlJz47XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEVtaXR0ZXI8VCBleHRlbmRzIFRFbWl0dGVyUGFyYW1ldGVyW10gPSBbXT4gZXh0ZW5kcyBQaGV0aW9EYXRhSGFuZGxlcjxUPiBpbXBsZW1lbnRzIFRFbWl0dGVyPFQ+IHtcblxuICAvLyBwcm92aWRlIEVtaXR0ZXIgZnVuY3Rpb25hbGl0eSB2aWEgY29tcG9zaXRpb25cbiAgcHJpdmF0ZSByZWFkb25seSB0aW55RW1pdHRlcjogVGlueUVtaXR0ZXI8VD47XG5cblxuICAvKipcbiAgICogSU8gVHlwZSBmb3IgRW1pdHRlci5cbiAgICpcbiAgICogUHJvdmlkaW5nIHZhbGlkYXRvcnMgdG8gaW5zdHJ1bWVudGVkIEVtaXR0ZXJzOlxuICAgKiBJbnN0cnVtZW50ZWQgRW1pdHRlcnMgc2hvdWxkIGhhdmUgdGhlaXIgYHZhbGlkYXRvcnNgIGZvciBlYWNoIGFyZ3VtZW50IHBhc3NlZCB2aWEgRW1pdHRlcklPICh0aGUgcGhldGlvVHlwZSkuXG4gICAqIFRvIHByb3ZpZGUgdmFsaWRhdG9ycywgdGhlcmUgYXJlIHR3byBtZXRob2RzLiBGaXJzdCwgYnkgZGVmYXVsdCBlYWNoIElPVHlwZSBoYXMgaXRzIG93blxuICAgKiB2YWxpZGF0b3IgdGhhdCB3aWxsIGJlIHVzZWQuIFNvIHNwZWNpZnlpbmcgYW4gYXJndW1lbnQgb2JqZWN0IGxpa2UgYHsgdHlwZTogTnVtYmVySU8gfWAgd2lsbCBhdXRvbWF0aWNhbGx5IHVzZVxuICAgKiBgTnVtYmVySU8udmFsaWRhdG9yYCBhcyB0aGUgdmFsaWRhdG9yLiBUaGlzIGNhbiBiZSBvdmVycmlkZGVuIHdpdGggdGhlIGB2YWxpZGF0b3JgIGtleSAoc2Vjb25kIG9wdGlvbiksIGxpa2VcbiAgICogeyB0eXBlOiBOdW1iZXJJTywgdmFsaWRhdG9yOiB7IGlzVmFsaWRWYWx1ZTogdj0+IHR5cGVvZiB2ID09PSAnbnVtYmVyJyAmJiAgdiA8IDUgfSB9YFxuICAgKiBOT1RFOiBjdXJyZW50bHkgdGhlIGltcGxlbWVudGF0aW9uIGlzIGVpdGhlci9vciwgaWYgYSB2YWxpZGF0b3IgaXMgcHJvdmlkZWQgdmlhIHRoZSBgdmFsaWRhdG9yYCBrZXksIHRoZSB2YWxpZGF0b3JcbiAgICogZnJvbSB0aGUgYHR5cGVgIHdpbGwgYmUgaWdub3JlZC5cbiAgICogc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9heG9uL2lzc3Vlcy8yMDQgZm9yIG1vcmUgZGV0YWlscy5cbiAgICpcbiAgICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAgICogQGF1dGhvciBNaWNoYWVsIEthdXptYW5uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICAgKiBAYXV0aG9yIEFuZHJldyBBZGFyZSAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRW1pdHRlcklPID0gKCBwYXJhbWV0ZXJUeXBlczogSU9UeXBlW10gKTogSU9UeXBlID0+IHtcblxuICAgIGNvbnN0IGtleSA9IHBhcmFtZXRlclR5cGVzLm1hcCggZ2V0VHlwZU5hbWUgKS5qb2luKCAnLCcgKTtcblxuICAgIGlmICggIWNhY2hlLmhhcygga2V5ICkgKSB7XG4gICAgICBjYWNoZS5zZXQoIGtleSwgbmV3IElPVHlwZSggYEVtaXR0ZXJJTzwke3BhcmFtZXRlclR5cGVzLm1hcCggZ2V0VHlwZU5hbWUgKS5qb2luKCAnLCAnICl9PmAsIHtcbiAgICAgICAgdmFsdWVUeXBlOiBFbWl0dGVyLFxuICAgICAgICBkb2N1bWVudGF0aW9uOiAnRW1pdHMgd2hlbiBhbiBldmVudCBvY2N1cnMgYW5kIGNhbGxzIGFkZGVkIGxpc3RlbmVycy4nLFxuICAgICAgICBwYXJhbWV0ZXJUeXBlczogcGFyYW1ldGVyVHlwZXMsXG4gICAgICAgIGV2ZW50czogWyAnZW1pdHRlZCcgXSxcbiAgICAgICAgbWV0YWRhdGFEZWZhdWx0czoge1xuICAgICAgICAgIHBoZXRpb1N0YXRlOiBQSEVUX0lPX1NUQVRFX0RFRkFVTFRcbiAgICAgICAgfSxcbiAgICAgICAgbWV0aG9kczoge1xuICAgICAgICAgIGFkZExpc3RlbmVyOiB7XG4gICAgICAgICAgICByZXR1cm5UeXBlOiBWb2lkSU8sXG4gICAgICAgICAgICBwYXJhbWV0ZXJUeXBlczogWyBGdW5jdGlvbklPKCBWb2lkSU8sIHBhcmFtZXRlclR5cGVzICkgXSxcbiAgICAgICAgICAgIGltcGxlbWVudGF0aW9uOiBFbWl0dGVyLnByb3RvdHlwZS5hZGRMaXN0ZW5lcixcbiAgICAgICAgICAgIGRvY3VtZW50YXRpb246ICdBZGRzIGEgbGlzdGVuZXIgd2hpY2ggd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgZW1pdHRlciBlbWl0cy4nXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZW1vdmVMaXN0ZW5lcjoge1xuICAgICAgICAgICAgcmV0dXJuVHlwZTogVm9pZElPLFxuICAgICAgICAgICAgcGFyYW1ldGVyVHlwZXM6IFsgRnVuY3Rpb25JTyggVm9pZElPLCBwYXJhbWV0ZXJUeXBlcyApIF0sXG4gICAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogRW1pdHRlci5wcm90b3R5cGUucmVtb3ZlTGlzdGVuZXIsXG4gICAgICAgICAgICBkb2N1bWVudGF0aW9uOiAnUmVtb3ZlIGEgbGlzdGVuZXIuJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZW1pdDoge1xuICAgICAgICAgICAgcmV0dXJuVHlwZTogVm9pZElPLFxuICAgICAgICAgICAgcGFyYW1ldGVyVHlwZXM6IHBhcmFtZXRlclR5cGVzLFxuXG4gICAgICAgICAgICAvLyBNYXRjaCBgRW1pdHRlci5lbWl0YCdzIGR5bmFtaWMgbnVtYmVyIG9mIGFyZ3VtZW50c1xuICAgICAgICAgICAgaW1wbGVtZW50YXRpb246IGZ1bmN0aW9uKCB0aGlzOiBFbWl0dGVyPHVua25vd25bXT4sIC4uLnZhbHVlczogdW5rbm93bltdICkge1xuICAgICAgICAgICAgICBjb25zdCBlcnJvcnMgPSB0aGlzLmdldFZhbGlkYXRpb25FcnJvcnMoIC4uLnZhbHVlcyApO1xuICAgICAgICAgICAgICBpZiAoIGVycm9ycy5sZW5ndGggPiAwICkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvciggYFZhbGlkYXRpb24gZXJyb3JzOiAke2Vycm9ycy5qb2luKCAnLCAnICl9YCApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMuZW1pdCggdmFsdWVzICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkb2N1bWVudGF0aW9uOiAnRW1pdHMgYSBzaW5nbGUgZXZlbnQgdG8gYWxsIGxpc3RlbmVycy4nLFxuICAgICAgICAgICAgaW52b2NhYmxlRm9yUmVhZE9ubHlFbGVtZW50czogZmFsc2VcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gKSApO1xuICAgIH1cbiAgICByZXR1cm4gY2FjaGUuZ2V0KCBrZXkgKSE7XG4gIH07XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcm92aWRlZE9wdGlvbnM/OiBFbWl0dGVyT3B0aW9ucyApIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RW1pdHRlck9wdGlvbnMsIFNlbGZPcHRpb25zLCBQaGV0aW9EYXRhSGFuZGxlck9wdGlvbnM+KCkoIHtcbiAgICAgIHBoZXRpb091dGVyVHlwZTogRW1pdHRlci5FbWl0dGVySU8sXG4gICAgICBwaGV0aW9TdGF0ZTogUEhFVF9JT19TVEFURV9ERUZBVUxUXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBzdXBlciggb3B0aW9ucyApO1xuICAgIHRoaXMudGlueUVtaXR0ZXIgPSBuZXcgVGlueUVtaXR0ZXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFbWl0IHRvIG5vdGlmeSBsaXN0ZW5lcnNcbiAgICovXG4gIHB1YmxpYyBlbWl0KCAuLi5hcmdzOiBUICk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMudGlueUVtaXR0ZXIgaW5zdGFuY2VvZiBUaW55RW1pdHRlciwgJ0VtaXR0ZXIgc2hvdWxkIG5vdCBlbWl0IHVudGlsIGNvbnN0cnVjdG9yIGNvbXBsZXRlJyApO1xuICAgIGFzc2VydCAmJiB0aGlzLnZhbGlkYXRlQXJndW1lbnRzKCAuLi5hcmdzICk7XG5cbiAgICAvLyBBbHRob3VnaCB0aGlzIGlzIG5vdCB0aGUgaWRpb21hdGljIHBhdHRlcm4gKHNpbmNlIGl0IGlzIGd1YXJkZWQgaW4gdGhlIHBoZXRpb1N0YXJ0RXZlbnQpLCB0aGlzIGZ1bmN0aW9uIGlzXG4gICAgLy8gY2FsbGVkIHNvIG1hbnkgdGltZXMgdGhhdCBpdCBpcyB3b3J0aCB0aGUgb3B0aW1pemF0aW9uIGZvciBQaEVUIGJyYW5kLlxuICAgIFRhbmRlbS5QSEVUX0lPX0VOQUJMRUQgJiYgdGhpcy5pc1BoZXRpb0luc3RydW1lbnRlZCgpICYmIHRoaXMucGhldGlvU3RhcnRFdmVudCggJ2VtaXR0ZWQnLCB7XG4gICAgICBkYXRhOiB0aGlzLmdldFBoZXRpb0RhdGEoIC4uLmFyZ3MgKVxuICAgIH0gKTtcblxuICAgIHRoaXMudGlueUVtaXR0ZXIuZW1pdCggLi4uYXJncyApO1xuXG4gICAgVGFuZGVtLlBIRVRfSU9fRU5BQkxFRCAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgJiYgdGhpcy5waGV0aW9FbmRFdmVudCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3Bvc2VzIGFuIEVtaXR0ZXIuIEFsbCBsaXN0ZW5lcnMgYXJlIHJlbW92ZWQuXG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnRpbnlFbWl0dGVyLmRpc3Bvc2UoKTtcbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIGxpc3RlbmVyIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGR1cmluZyBlbWl0LlxuICAgKi9cbiAgcHVibGljIGFkZExpc3RlbmVyKCBsaXN0ZW5lcjogVEVtaXR0ZXJMaXN0ZW5lcjxUPiApOiB2b2lkIHtcbiAgICB0aGlzLnRpbnlFbWl0dGVyLmFkZExpc3RlbmVyKCBsaXN0ZW5lciApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYSBsaXN0ZW5lclxuICAgKi9cbiAgcHVibGljIHJlbW92ZUxpc3RlbmVyKCBsaXN0ZW5lcjogVEVtaXR0ZXJMaXN0ZW5lcjxUPiApOiB2b2lkIHtcbiAgICB0aGlzLnRpbnlFbWl0dGVyLnJlbW92ZUxpc3RlbmVyKCBsaXN0ZW5lciApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHRoZSBsaXN0ZW5lcnNcbiAgICovXG4gIHB1YmxpYyByZW1vdmVBbGxMaXN0ZW5lcnMoKTogdm9pZCB7XG4gICAgdGhpcy50aW55RW1pdHRlci5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3Mgd2hldGhlciBhIGxpc3RlbmVyIGlzIHJlZ2lzdGVyZWQgd2l0aCB0aGlzIEVtaXR0ZXJcbiAgICovXG4gIHB1YmxpYyBoYXNMaXN0ZW5lciggbGlzdGVuZXI6IFRFbWl0dGVyTGlzdGVuZXI8VD4gKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMudGlueUVtaXR0ZXIuaGFzTGlzdGVuZXIoIGxpc3RlbmVyICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZXJlIGFyZSBhbnkgbGlzdGVuZXJzLlxuICAgKi9cbiAgcHVibGljIGhhc0xpc3RlbmVycygpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50aW55RW1pdHRlci5oYXNMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgbGlzdGVuZXJzLlxuICAgKi9cbiAgcHVibGljIGdldExpc3RlbmVyQ291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy50aW55RW1pdHRlci5nZXRMaXN0ZW5lckNvdW50KCk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVuaWVuY2UgZnVuY3Rpb24gZm9yIGRlYnVnZ2luZyBhIFByb3BlcnR5J3MgdmFsdWUuIEl0IHByaW50cyB0aGUgbmV3IHZhbHVlIG9uIHJlZ2lzdHJhdGlvbiBhbmQgd2hlbiBjaGFuZ2VkLlxuICAgKiBAcGFyYW0gbmFtZSAtIGRlYnVnIG5hbWUgdG8gYmUgcHJpbnRlZCBvbiB0aGUgY29uc29sZVxuICAgKiBAcmV0dXJucyAtIHRoZSBoYW5kbGUgdG8gdGhlIGxpc3RlbmVyIGFkZGVkIGluIGNhc2UgaXQgbmVlZHMgdG8gYmUgcmVtb3ZlZCBsYXRlclxuICAgKi9cbiAgcHVibGljIGRlYnVnKCBuYW1lOiBzdHJpbmcgKTogVEVtaXR0ZXJMaXN0ZW5lcjxUPiB7XG4gICAgY29uc3QgbGlzdGVuZXIgPSAoIC4uLmFyZ3M6IFQgKSA9PiBjb25zb2xlLmxvZyggbmFtZSwgLi4uYXJncyApO1xuICAgIHRoaXMuYWRkTGlzdGVuZXIoIGxpc3RlbmVyICk7XG4gICAgcmV0dXJuIGxpc3RlbmVyO1xuICB9XG59XG5cbmNvbnN0IGdldFR5cGVOYW1lID0gKCBpb1R5cGU6IElPVHlwZSApID0+IGlvVHlwZS50eXBlTmFtZTtcblxuLy8ge01hcC48c3RyaW5nLCBJT1R5cGU+fSAtIENhY2hlIGVhY2ggcGFyYW1ldGVyaXplZCBJT1R5cGUgc28gdGhhdFxuLy8gaXQgaXMgb25seSBjcmVhdGVkIG9uY2UuXG5jb25zdCBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBJT1R5cGU+KCk7XG5cbmF4b24ucmVnaXN0ZXIoICdFbWl0dGVyJywgRW1pdHRlciApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFNBQVMsTUFBNEIsaUNBQWlDO0FBRTdFLE9BQU9DLFVBQVUsTUFBTSxxQ0FBcUM7QUFDNUQsT0FBT0MsTUFBTSxNQUFNLGlDQUFpQztBQUNwRCxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLGlCQUFpQixNQUFvQyxzQ0FBc0M7QUFDbEcsT0FBT0MsSUFBSSxNQUFNLFdBQVc7QUFDNUIsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQUMxQyxPQUFPQyxNQUFNLE1BQU0sMkJBQTJCO0FBRzlDO0FBQ0EsTUFBTUMscUJBQXFCLEdBQUcsS0FBSztBQUtuQyxlQUFlLE1BQU1DLE9BQU8sU0FBNkNMLGlCQUFpQixDQUEyQjtFQUVuSDs7RUFJQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBdUJNLFNBQVMsR0FBS0MsY0FBd0IsSUFBYztJQUV6RSxNQUFNQyxHQUFHLEdBQUdELGNBQWMsQ0FBQ0UsR0FBRyxDQUFFQyxXQUFXLENBQUUsQ0FBQ0MsSUFBSSxDQUFFLEdBQUcsQ0FBRTtJQUV6RCxJQUFLLENBQUNDLEtBQUssQ0FBQ0MsR0FBRyxDQUFFTCxHQUFHLENBQUUsRUFBRztNQUN2QkksS0FBSyxDQUFDRSxHQUFHLENBQUVOLEdBQUcsRUFBRSxJQUFJVixNQUFNLENBQUcsYUFBWVMsY0FBYyxDQUFDRSxHQUFHLENBQUVDLFdBQVcsQ0FBRSxDQUFDQyxJQUFJLENBQUUsSUFBSSxDQUFHLEdBQUUsRUFBRTtRQUMxRkksU0FBUyxFQUFFVixPQUFPO1FBQ2xCVyxhQUFhLEVBQUUsdURBQXVEO1FBQ3RFVCxjQUFjLEVBQUVBLGNBQWM7UUFDOUJVLE1BQU0sRUFBRSxDQUFFLFNBQVMsQ0FBRTtRQUNyQkMsZ0JBQWdCLEVBQUU7VUFDaEJDLFdBQVcsRUFBRWY7UUFDZixDQUFDO1FBQ0RnQixPQUFPLEVBQUU7VUFDUEMsV0FBVyxFQUFFO1lBQ1hDLFVBQVUsRUFBRXZCLE1BQU07WUFDbEJRLGNBQWMsRUFBRSxDQUFFVixVQUFVLENBQUVFLE1BQU0sRUFBRVEsY0FBYyxDQUFFLENBQUU7WUFDeERnQixjQUFjLEVBQUVsQixPQUFPLENBQUNtQixTQUFTLENBQUNILFdBQVc7WUFDN0NMLGFBQWEsRUFBRTtVQUNqQixDQUFDO1VBQ0RTLGNBQWMsRUFBRTtZQUNkSCxVQUFVLEVBQUV2QixNQUFNO1lBQ2xCUSxjQUFjLEVBQUUsQ0FBRVYsVUFBVSxDQUFFRSxNQUFNLEVBQUVRLGNBQWMsQ0FBRSxDQUFFO1lBQ3hEZ0IsY0FBYyxFQUFFbEIsT0FBTyxDQUFDbUIsU0FBUyxDQUFDQyxjQUFjO1lBQ2hEVCxhQUFhLEVBQUU7VUFDakIsQ0FBQztVQUNEVSxJQUFJLEVBQUU7WUFDSkosVUFBVSxFQUFFdkIsTUFBTTtZQUNsQlEsY0FBYyxFQUFFQSxjQUFjO1lBRTlCO1lBQ0FnQixjQUFjLEVBQUUsU0FBQUEsQ0FBb0MsR0FBR0ksTUFBaUIsRUFBRztjQUN6RSxNQUFNQyxNQUFNLEdBQUcsSUFBSSxDQUFDQyxtQkFBbUIsQ0FBRSxHQUFHRixNQUFNLENBQUU7Y0FDcEQsSUFBS0MsTUFBTSxDQUFDRSxNQUFNLEdBQUcsQ0FBQyxFQUFHO2dCQUN2QixNQUFNLElBQUlDLEtBQUssQ0FBRyxzQkFBcUJILE1BQU0sQ0FBQ2pCLElBQUksQ0FBRSxJQUFJLENBQUcsRUFBQyxDQUFFO2NBQ2hFLENBQUMsTUFDSTtnQkFDSCxJQUFJLENBQUNlLElBQUksQ0FBRUMsTUFBTSxDQUFFO2NBQ3JCO1lBQ0YsQ0FBQztZQUNEWCxhQUFhLEVBQUUsd0NBQXdDO1lBQ3ZEZ0IsNEJBQTRCLEVBQUU7VUFDaEM7UUFDRjtNQUNGLENBQUMsQ0FBRSxDQUFFO0lBQ1A7SUFDQSxPQUFPcEIsS0FBSyxDQUFDcUIsR0FBRyxDQUFFekIsR0FBRyxDQUFFO0VBQ3pCLENBQUM7RUFFTTBCLFdBQVdBLENBQUVDLGVBQWdDLEVBQUc7SUFFckQsTUFBTUMsT0FBTyxHQUFHeEMsU0FBUyxFQUF5RCxDQUFFO01BQ2xGeUMsZUFBZSxFQUFFaEMsT0FBTyxDQUFDQyxTQUFTO01BQ2xDYSxXQUFXLEVBQUVmO0lBQ2YsQ0FBQyxFQUFFK0IsZUFBZSxDQUFFO0lBRXBCLEtBQUssQ0FBRUMsT0FBTyxDQUFFO0lBQ2hCLElBQUksQ0FBQ0UsV0FBVyxHQUFHLElBQUlwQyxXQUFXLEVBQUU7RUFDdEM7O0VBRUE7QUFDRjtBQUNBO0VBQ1N3QixJQUFJQSxDQUFFLEdBQUdhLElBQU8sRUFBUztJQUM5QkMsTUFBTSxJQUFJQSxNQUFNLENBQUUsSUFBSSxDQUFDRixXQUFXLFlBQVlwQyxXQUFXLEVBQUUsb0RBQW9ELENBQUU7SUFDakhzQyxNQUFNLElBQUksSUFBSSxDQUFDQyxpQkFBaUIsQ0FBRSxHQUFHRixJQUFJLENBQUU7O0lBRTNDO0lBQ0E7SUFDQXBDLE1BQU0sQ0FBQ3VDLGVBQWUsSUFBSSxJQUFJLENBQUNDLG9CQUFvQixFQUFFLElBQUksSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBRSxTQUFTLEVBQUU7TUFDekZDLElBQUksRUFBRSxJQUFJLENBQUNDLGFBQWEsQ0FBRSxHQUFHUCxJQUFJO0lBQ25DLENBQUMsQ0FBRTtJQUVILElBQUksQ0FBQ0QsV0FBVyxDQUFDWixJQUFJLENBQUUsR0FBR2EsSUFBSSxDQUFFO0lBRWhDcEMsTUFBTSxDQUFDdUMsZUFBZSxJQUFJLElBQUksQ0FBQ0Msb0JBQW9CLEVBQUUsSUFBSSxJQUFJLENBQUNJLGNBQWMsRUFBRTtFQUNoRjs7RUFFQTtBQUNGO0FBQ0E7RUFDa0JDLE9BQU9BLENBQUEsRUFBUztJQUM5QixJQUFJLENBQUNWLFdBQVcsQ0FBQ1UsT0FBTyxFQUFFO0lBQzFCLEtBQUssQ0FBQ0EsT0FBTyxFQUFFO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtFQUNTM0IsV0FBV0EsQ0FBRTRCLFFBQTZCLEVBQVM7SUFDeEQsSUFBSSxDQUFDWCxXQUFXLENBQUNqQixXQUFXLENBQUU0QixRQUFRLENBQUU7RUFDMUM7O0VBRUE7QUFDRjtBQUNBO0VBQ1N4QixjQUFjQSxDQUFFd0IsUUFBNkIsRUFBUztJQUMzRCxJQUFJLENBQUNYLFdBQVcsQ0FBQ2IsY0FBYyxDQUFFd0IsUUFBUSxDQUFFO0VBQzdDOztFQUVBO0FBQ0Y7QUFDQTtFQUNTQyxrQkFBa0JBLENBQUEsRUFBUztJQUNoQyxJQUFJLENBQUNaLFdBQVcsQ0FBQ1ksa0JBQWtCLEVBQUU7RUFDdkM7O0VBRUE7QUFDRjtBQUNBO0VBQ1NDLFdBQVdBLENBQUVGLFFBQTZCLEVBQVk7SUFDM0QsT0FBTyxJQUFJLENBQUNYLFdBQVcsQ0FBQ2EsV0FBVyxDQUFFRixRQUFRLENBQUU7RUFDakQ7O0VBRUE7QUFDRjtBQUNBO0VBQ1NHLFlBQVlBLENBQUEsRUFBWTtJQUM3QixPQUFPLElBQUksQ0FBQ2QsV0FBVyxDQUFDYyxZQUFZLEVBQUU7RUFDeEM7O0VBRUE7QUFDRjtBQUNBO0VBQ1NDLGdCQUFnQkEsQ0FBQSxFQUFXO0lBQ2hDLE9BQU8sSUFBSSxDQUFDZixXQUFXLENBQUNlLGdCQUFnQixFQUFFO0VBQzVDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDU0MsS0FBS0EsQ0FBRUMsSUFBWSxFQUF3QjtJQUNoRCxNQUFNTixRQUFRLEdBQUdBLENBQUUsR0FBR1YsSUFBTyxLQUFNaUIsT0FBTyxDQUFDQyxHQUFHLENBQUVGLElBQUksRUFBRSxHQUFHaEIsSUFBSSxDQUFFO0lBQy9ELElBQUksQ0FBQ2xCLFdBQVcsQ0FBRTRCLFFBQVEsQ0FBRTtJQUM1QixPQUFPQSxRQUFRO0VBQ2pCO0FBQ0Y7QUFFQSxNQUFNdkMsV0FBVyxHQUFLZ0QsTUFBYyxJQUFNQSxNQUFNLENBQUNDLFFBQVE7O0FBRXpEO0FBQ0E7QUFDQSxNQUFNL0MsS0FBSyxHQUFHLElBQUlnRCxHQUFHLEVBQWtCO0FBRXZDM0QsSUFBSSxDQUFDNEQsUUFBUSxDQUFFLFNBQVMsRUFBRXhELE9BQU8sQ0FBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/InfiniteNumberIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * IO Type for JS's built-in number type, but adds explicit support for positive and negative infinity.
 * Typical use cases should use NumberIO, but if you have a case that must support infinities, please
 * use this instead.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 */




const InfiniteNumberIO = new IOType('InfiniteNumberIO', {
  valueType: 'number',
  documentation: 'IO Type for Javascript\'s number primitive type',
  toStateObject: value => value === Number.POSITIVE_INFINITY ? 'POSITIVE_INFINITY' : value === Number.NEGATIVE_INFINITY ? 'NEGATIVE_INFINITY' : value,
  fromStateObject: stateObject => stateObject === 'POSITIVE_INFINITY' ? Number.POSITIVE_INFINITY : stateObject === 'NEGATIVE_INFINITY' ? Number.NEGATIVE_INFINITY : stateObject,
  stateSchema: StateSchema.asValue('\'POSITIVE_INFINITY\'|\'NEGATIVE_INFINITY\'|number', {
    isValidValue: value => value === 'POSITIVE_INFINITY' || value === 'NEGATIVE_INFINITY' || typeof value === 'number' && !isNaN(value)
  })
});
tandemNamespace.register('InfiniteNumberIO', InfiniteNumberIO);
/* harmony default export */ const types_InfiniteNumberIO = (InfiniteNumberIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJTdGF0ZVNjaGVtYSIsIkluZmluaXRlTnVtYmVySU8iLCJ2YWx1ZVR5cGUiLCJkb2N1bWVudGF0aW9uIiwidG9TdGF0ZU9iamVjdCIsInZhbHVlIiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJORUdBVElWRV9JTkZJTklUWSIsImZyb21TdGF0ZU9iamVjdCIsInN0YXRlT2JqZWN0Iiwic3RhdGVTY2hlbWEiLCJhc1ZhbHVlIiwiaXNWYWxpZFZhbHVlIiwiaXNOYU4iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkluZmluaXRlTnVtYmVySU8udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogSU8gVHlwZSBmb3IgSlMncyBidWlsdC1pbiBudW1iZXIgdHlwZSwgYnV0IGFkZHMgZXhwbGljaXQgc3VwcG9ydCBmb3IgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIGluZmluaXR5LlxuICogVHlwaWNhbCB1c2UgY2FzZXMgc2hvdWxkIHVzZSBOdW1iZXJJTywgYnV0IGlmIHlvdSBoYXZlIGEgY2FzZSB0aGF0IG11c3Qgc3VwcG9ydCBpbmZpbml0aWVzLCBwbGVhc2VcbiAqIHVzZSB0aGlzIGluc3RlYWQuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4uL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcbmltcG9ydCBTdGF0ZVNjaGVtYSBmcm9tICcuL1N0YXRlU2NoZW1hLmpzJztcblxuZXhwb3J0IHR5cGUgSW5maW5pdGVOdW1iZXJTdGF0ZU9iamVjdCA9IG51bWJlciB8ICdQT1NJVElWRV9JTkZJTklUWScgfCAnTkVHQVRJVkVfSU5GSU5JVFknO1xuXG5jb25zdCBJbmZpbml0ZU51bWJlcklPID0gbmV3IElPVHlwZTxudW1iZXIsIEluZmluaXRlTnVtYmVyU3RhdGVPYmplY3Q+KCAnSW5maW5pdGVOdW1iZXJJTycsIHtcbiAgdmFsdWVUeXBlOiAnbnVtYmVyJyxcbiAgZG9jdW1lbnRhdGlvbjogJ0lPIFR5cGUgZm9yIEphdmFzY3JpcHRcXCdzIG51bWJlciBwcmltaXRpdmUgdHlwZScsXG4gIHRvU3RhdGVPYmplY3Q6IHZhbHVlID0+IHZhbHVlID09PSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgPyAnUE9TSVRJVkVfSU5GSU5JVFknIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPT09IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA/ICdORUdBVElWRV9JTkZJTklUWScgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSxcbiAgZnJvbVN0YXRlT2JqZWN0OiBzdGF0ZU9iamVjdCA9PiBzdGF0ZU9iamVjdCA9PT0gJ1BPU0lUSVZFX0lORklOSVRZJyA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVPYmplY3QgPT09ICdORUdBVElWRV9JTkZJTklUWScgPyBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlT2JqZWN0LFxuICBzdGF0ZVNjaGVtYTogU3RhdGVTY2hlbWEuYXNWYWx1ZTxudW1iZXIsIEluZmluaXRlTnVtYmVyU3RhdGVPYmplY3Q+KCAnXFwnUE9TSVRJVkVfSU5GSU5JVFlcXCd8XFwnTkVHQVRJVkVfSU5GSU5JVFlcXCd8bnVtYmVyJywge1xuICAgIGlzVmFsaWRWYWx1ZTogKCB2YWx1ZTogSW5maW5pdGVOdW1iZXJTdGF0ZU9iamVjdCApID0+IHZhbHVlID09PSAnUE9TSVRJVkVfSU5GSU5JVFknIHx8IHZhbHVlID09PSAnTkVHQVRJVkVfSU5GSU5JVFknIHx8ICggdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4oIHZhbHVlICkgKVxuICB9IClcbn0gKTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnSW5maW5pdGVOdW1iZXJJTycsIEluZmluaXRlTnVtYmVySU8gKTtcbmV4cG9ydCBkZWZhdWx0IEluZmluaXRlTnVtYmVySU87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGVBQWUsTUFBTSx1QkFBdUI7QUFDbkQsT0FBT0MsTUFBTSxNQUFNLGFBQWE7QUFDaEMsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQUkxQyxNQUFNQyxnQkFBZ0IsR0FBRyxJQUFJRixNQUFNLENBQXFDLGtCQUFrQixFQUFFO0VBQzFGRyxTQUFTLEVBQUUsUUFBUTtFQUNuQkMsYUFBYSxFQUFFLGlEQUFpRDtFQUNoRUMsYUFBYSxFQUFFQyxLQUFLLElBQUlBLEtBQUssS0FBS0MsTUFBTSxDQUFDQyxpQkFBaUIsR0FBRyxtQkFBbUIsR0FDeERGLEtBQUssS0FBS0MsTUFBTSxDQUFDRSxpQkFBaUIsR0FBRyxtQkFBbUIsR0FDeERILEtBQUs7RUFDN0JJLGVBQWUsRUFBRUMsV0FBVyxJQUFJQSxXQUFXLEtBQUssbUJBQW1CLEdBQUdKLE1BQU0sQ0FBQ0MsaUJBQWlCLEdBQzlERyxXQUFXLEtBQUssbUJBQW1CLEdBQUdKLE1BQU0sQ0FBQ0UsaUJBQWlCLEdBQzlERSxXQUFXO0VBQzNDQyxXQUFXLEVBQUVYLFdBQVcsQ0FBQ1ksT0FBTyxDQUFxQyxvREFBb0QsRUFBRTtJQUN6SEMsWUFBWSxFQUFJUixLQUFnQyxJQUFNQSxLQUFLLEtBQUssbUJBQW1CLElBQUlBLEtBQUssS0FBSyxtQkFBbUIsSUFBTSxPQUFPQSxLQUFLLEtBQUssUUFBUSxJQUFJLENBQUNTLEtBQUssQ0FBRVQsS0FBSztFQUN0SyxDQUFDO0FBQ0gsQ0FBQyxDQUFFO0FBRUhQLGVBQWUsQ0FBQ2lCLFFBQVEsQ0FBRSxrQkFBa0IsRUFBRWQsZ0JBQWdCLENBQUU7QUFDaEUsZUFBZUEsZ0JBQWdCIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/dot.js
// Copyright 2013-2022, University of Colorado Boulder


const dot_dot = new js_Namespace('dot');

// TODO: performance: check browser speed to compare how fast this is. We may need to add a 32 option for GL ES.
dot_dot.register('FastArray', window.Float64Array ? window.Float64Array : window.Array);

// will be filled in by other modules
/* harmony default export */ const js_dot = (dot_dot);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJOYW1lc3BhY2UiLCJkb3QiLCJyZWdpc3RlciIsIndpbmRvdyIsIkZsb2F0NjRBcnJheSIsIkFycmF5Il0sInNvdXJjZXMiOlsiZG90LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG5cbmltcG9ydCBOYW1lc3BhY2UgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL05hbWVzcGFjZS5qcyc7XG5cbmNvbnN0IGRvdCA9IG5ldyBOYW1lc3BhY2UoICdkb3QnICk7XG5cbi8vIFRPRE86IHBlcmZvcm1hbmNlOiBjaGVjayBicm93c2VyIHNwZWVkIHRvIGNvbXBhcmUgaG93IGZhc3QgdGhpcyBpcy4gV2UgbWF5IG5lZWQgdG8gYWRkIGEgMzIgb3B0aW9uIGZvciBHTCBFUy5cbmRvdC5yZWdpc3RlciggJ0Zhc3RBcnJheScsIHdpbmRvdy5GbG9hdDY0QXJyYXkgPyB3aW5kb3cuRmxvYXQ2NEFycmF5IDogd2luZG93LkFycmF5ICk7XG5cbi8vIHdpbGwgYmUgZmlsbGVkIGluIGJ5IG90aGVyIG1vZHVsZXNcbmV4cG9ydCBkZWZhdWx0IGRvdDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUdBLE9BQU9BLFNBQVMsTUFBTSxpQ0FBaUM7QUFFdkQsTUFBTUMsR0FBRyxHQUFHLElBQUlELFNBQVMsQ0FBRSxLQUFLLENBQUU7O0FBRWxDO0FBQ0FDLEdBQUcsQ0FBQ0MsUUFBUSxDQUFFLFdBQVcsRUFBRUMsTUFBTSxDQUFDQyxZQUFZLEdBQUdELE1BQU0sQ0FBQ0MsWUFBWSxHQUFHRCxNQUFNLENBQUNFLEtBQUssQ0FBRTs7QUFFckY7QUFDQSxlQUFlSixHQUFHIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Range.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * A numeric range.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Andrew Adare
 * @author Chris Klusendorf (PhET Interactive Simulations)
 */




class Range {
  // the minimum value of the range

  // the maximum value of the range

  /**
   * @param min - the minimum value of the range
   * @param max - the maximum value of the range
   */
  constructor(min, max) {
    this._min = min;
    this._max = max;
  }

  /**
   * Getter for min
   */
  getMin() {
    return this._min;
  }
  get min() {
    return this.getMin();
  }
  set min(min) {
    this.setMin(min);
  }

  /**
   * TODO: Allow chaining, https://github.com/phetsims/sun/issues/792
   * Setter for min
   */
  setMin(min) {
    assert && assert(min <= this._max, `min must be <= max: ${min}`);
    this._min = min;
  }

  /**
   * Getter for max
   */
  getMax() {
    return this._max;
  }
  get max() {
    return this.getMax();
  }
  set max(max) {
    this.setMax(max);
  }

  /**
   * Setter for max
   */
  setMax(max) {
    assert && assert(this._min <= max, `max must be >= to min: ${max}`);
    this._max = max;
  }

  /**
   * Sets the minimum and maximum value of the range
   */
  setMinMax(min, max) {
    assert && assert(min <= max, `max must be >= to min. min: ${min}, max: ${max}`);
    this._min = min;
    this._max = max;
    return this;
  }

  /**
   * Makes a copy of this range
   */
  copy() {
    return new Range(this._min, this._max); // eslint-disable-line no-html-constructors
  }

  /**
   * Gets the length of this range, that is the difference between the maximum and minimum value of this range
   */
  getLength() {
    return this._max - this._min;
  }

  /**
   * Gets the center of this range, that is the average value of the maximum and minimum value of this range
   */
  getCenter() {
    return (this._max + this._min) / 2;
  }

  /**
   * Determines if this range contains the value
   */
  contains(value) {
    return value >= this._min && value <= this._max;
  }

  /**
   * Does this range contain the specified range?
   */
  containsRange(range) {
    return this._min <= range.min && this._max >= range.max;
  }

  /**
   * Determine if this range overlaps (intersects) with another range
   */
  intersects(range) {
    return this._max >= range.min && range.max >= this._min;
  }

  /**
   * Do the two ranges overlap with one another?  Note that this assumes that
   * This is a open interval.
   */
  intersectsExclusive(range) {
    return this._max > range.min && range.max > this._min;
  }

  /**
   *
   * REVIEW: The naming is not helping me understand that this function is just the immutable version of includeRange().
   *
   * The smallest range that contains both this range and the input range, returned as a copy.
   *
   * The method below is the immutable form of the function includeRange(). The method will return a new range, and will not modify
   * this range.
   */
  union(range) {
    return new Range(
    // eslint-disable-line no-html-constructors
    Math.min(this.min, range.min), Math.max(this.max, range.max));
  }

  /**
   * REVIEW: The naming is not helping me understand that this function is just the immutable version of constrainRange().
   *
   * The smallest range that is contained by both this range and the input range, returned as a copy.
   *
   * The method below the immutable form of the function constrainRange(). The method below will return a new range, and will not modify
   * this range.
   */
  intersection(range) {
    return new Range(
    // eslint-disable-line no-html-constructors
    Math.max(this.min, range.min), Math.min(this.max, range.max));
  }

  /**
   * Modifies this range so that it contains both its original range and the input range.
   *
   * This is the mutable form of the function union(). This will mutate (change) this range, in addition to returning
   * this range itself.
   */
  includeRange(range) {
    return this.setMinMax(Math.min(this.min, range.min), Math.max(this.max, range.max));
  }

  /**
   * Modifies this range so that it is the largest range contained both in its original range and in the input range.
   *
   * This is the mutable form of the function intersection(). This will mutate (change) this range, in addition to returning
   * this range itself.
   */
  constrainRange(range) {
    return this.setMinMax(Math.max(this.min, range.min), Math.min(this.max, range.max));
  }

  /**
   * REVIEW: do we also need a mutable form of shifted?
   *
   * Returns a new range that is the same as this range, but shifted by the specified amount.
   */
  shifted(n) {
    return new Range(this.min + n, this.max + n); // eslint-disable-line no-html-constructors
  }

  /**
   * Converts the attributes of this range to a string
   */
  toString() {
    return `[Range (min:${this._min} max:${this._max})]`;
  }

  /**
   * Constrains a value to the range.
   */
  constrainValue(value) {
    return Math.min(Math.max(value, this._min), this._max);
  }

  /**
   * Determines if this Range is equal to some object.
   */
  equals(object) {
    return this.constructor === object.constructor && this._min === object.min && this._max === object.max;
  }

  /**
   * Given a value, normalize it to this Range's length, returning a value between 0 and 1 for values contained in
   * the Range. If the value is not contained in Range, then the return value will not be between 0 and 1.
   */
  getNormalizedValue(value) {
    assert && assert(this.getLength() !== 0, 'cannot get normalized value without a range length');
    return (value - this.min) / this.getLength();
  }

  /**
   * Compute the opposite of a normalized value. Given a normalized value (between 0 and 1). Worked with any number
   * though, (even outside of the range). It is the client's responsibility to clamp if that is important to the
   * usage.
   */
  expandNormalizedValue(normalizedValue) {
    assert && assert(this.getLength() !== 0, 'cannot get expand normalized value without a range length');
    return normalizedValue * this.getLength() + this.min;
  }

  /**
   * In https://github.com/phetsims/dot/issues/57, defaultValue was moved to RangeWithValue.
   * This ES5 getter catches programming errors where defaultValue is still used with Range.
   */
  get defaultValue() {
    throw new Error('defaultValue is undefined, did you mean to use RangeWithValue?');
  }
  static RangeIO = new IOType('RangeIO', {
    valueType: Range,
    documentation: 'A range with "min" and a "max" members.',
    toStateObject: range => ({
      min: types_InfiniteNumberIO.toStateObject(range.min),
      max: types_InfiniteNumberIO.toStateObject(range.max)
    }),
    // eslint-disable-next-line no-html-constructors
    fromStateObject: stateObject => new Range(types_InfiniteNumberIO.fromStateObject(stateObject.min), types_InfiniteNumberIO.fromStateObject(stateObject.max)),
    stateSchema: {
      min: types_InfiniteNumberIO,
      max: types_InfiniteNumberIO
    }
  });
  static EVERYTHING = new Range(Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY); // eslint-disable-line no-html-constructors
  static NOTHING = new Range(Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY); // eslint-disable-line no-html-constructors
}

js_dot.register('Range', Range);
/* harmony default export */ const js_Range = (Range);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJT1R5cGUiLCJJbmZpbml0ZU51bWJlcklPIiwiZG90IiwiUmFuZ2UiLCJjb25zdHJ1Y3RvciIsIm1pbiIsIm1heCIsIl9taW4iLCJfbWF4IiwiZ2V0TWluIiwic2V0TWluIiwiYXNzZXJ0IiwiZ2V0TWF4Iiwic2V0TWF4Iiwic2V0TWluTWF4IiwiY29weSIsImdldExlbmd0aCIsImdldENlbnRlciIsImNvbnRhaW5zIiwidmFsdWUiLCJjb250YWluc1JhbmdlIiwicmFuZ2UiLCJpbnRlcnNlY3RzIiwiaW50ZXJzZWN0c0V4Y2x1c2l2ZSIsInVuaW9uIiwiTWF0aCIsImludGVyc2VjdGlvbiIsImluY2x1ZGVSYW5nZSIsImNvbnN0cmFpblJhbmdlIiwic2hpZnRlZCIsIm4iLCJ0b1N0cmluZyIsImNvbnN0cmFpblZhbHVlIiwiZXF1YWxzIiwib2JqZWN0IiwiZ2V0Tm9ybWFsaXplZFZhbHVlIiwiZXhwYW5kTm9ybWFsaXplZFZhbHVlIiwibm9ybWFsaXplZFZhbHVlIiwiZGVmYXVsdFZhbHVlIiwiRXJyb3IiLCJSYW5nZUlPIiwidmFsdWVUeXBlIiwiZG9jdW1lbnRhdGlvbiIsInRvU3RhdGVPYmplY3QiLCJmcm9tU3RhdGVPYmplY3QiLCJzdGF0ZU9iamVjdCIsInN0YXRlU2NoZW1hIiwiRVZFUllUSElORyIsIk51bWJlciIsIk5FR0FUSVZFX0lORklOSVRZIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJOT1RISU5HIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSYW5nZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBBIG51bWVyaWMgcmFuZ2UuXG4gKlxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcbiAqIEBhdXRob3IgQW5kcmV3IEFkYXJlXG4gKiBAYXV0aG9yIENocmlzIEtsdXNlbmRvcmYgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9JT1R5cGUuanMnO1xuaW1wb3J0IEluZmluaXRlTnVtYmVySU8sIHsgSW5maW5pdGVOdW1iZXJTdGF0ZU9iamVjdCB9IGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9JbmZpbml0ZU51bWJlcklPLmpzJztcbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuXG5leHBvcnQgdHlwZSBUUmFuZ2UgPSB7XG4gIG1pbjogbnVtYmVyO1xuICBtYXg6IG51bWJlcjtcbn07XG5cbmV4cG9ydCB0eXBlIFJhbmdlU3RhdGVPYmplY3QgPSB7XG4gIG1pbjogSW5maW5pdGVOdW1iZXJTdGF0ZU9iamVjdDtcbiAgbWF4OiBJbmZpbml0ZU51bWJlclN0YXRlT2JqZWN0O1xufTtcblxuY2xhc3MgUmFuZ2UgaW1wbGVtZW50cyBUUmFuZ2Uge1xuXG4gIC8vIHRoZSBtaW5pbXVtIHZhbHVlIG9mIHRoZSByYW5nZVxuICBwcml2YXRlIF9taW46IG51bWJlcjtcblxuICAvLyB0aGUgbWF4aW11bSB2YWx1ZSBvZiB0aGUgcmFuZ2VcbiAgcHJpdmF0ZSBfbWF4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBtaW4gLSB0aGUgbWluaW11bSB2YWx1ZSBvZiB0aGUgcmFuZ2VcbiAgICogQHBhcmFtIG1heCAtIHRoZSBtYXhpbXVtIHZhbHVlIG9mIHRoZSByYW5nZVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKSB7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICAgIHRoaXMuX21heCA9IG1heDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXR0ZXIgZm9yIG1pblxuICAgKi9cbiAgcHVibGljIGdldE1pbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9taW47XG4gIH1cblxuICBwdWJsaWMgZ2V0IG1pbigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmdldE1pbigpO1xuICB9XG5cbiAgcHVibGljIHNldCBtaW4oIG1pbjogbnVtYmVyICkge1xuICAgIHRoaXMuc2V0TWluKCBtaW4gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPOiBBbGxvdyBjaGFpbmluZywgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3N1bi9pc3N1ZXMvNzkyXG4gICAqIFNldHRlciBmb3IgbWluXG4gICAqL1xuICBwdWJsaWMgc2V0TWluKCBtaW46IG51bWJlciApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtaW4gPD0gdGhpcy5fbWF4LCBgbWluIG11c3QgYmUgPD0gbWF4OiAke21pbn1gICk7XG4gICAgdGhpcy5fbWluID0gbWluO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHRlciBmb3IgbWF4XG4gICAqL1xuICBwdWJsaWMgZ2V0TWF4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuX21heDtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWF4KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TWF4KCk7XG4gIH1cblxuICBwdWJsaWMgc2V0IG1heCggbWF4OiBudW1iZXIgKSB7XG4gICAgdGhpcy5zZXRNYXgoIG1heCApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHRlciBmb3IgbWF4XG4gICAqL1xuICBwdWJsaWMgc2V0TWF4KCBtYXg6IG51bWJlciApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLl9taW4gPD0gbWF4LCBgbWF4IG11c3QgYmUgPj0gdG8gbWluOiAke21heH1gICk7XG4gICAgdGhpcy5fbWF4ID0gbWF4O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIG1pbmltdW0gYW5kIG1heGltdW0gdmFsdWUgb2YgdGhlIHJhbmdlXG4gICAqL1xuICBwdWJsaWMgc2V0TWluTWF4KCBtaW46IG51bWJlciwgbWF4OiBudW1iZXIgKTogdGhpcyB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbWluIDw9IG1heCwgYG1heCBtdXN0IGJlID49IHRvIG1pbi4gbWluOiAke21pbn0sIG1heDogJHttYXh9YCApO1xuICAgIHRoaXMuX21pbiA9IG1pbjtcbiAgICB0aGlzLl9tYXggPSBtYXg7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyBhIGNvcHkgb2YgdGhpcyByYW5nZVxuICAgKi9cbiAgcHVibGljIGNvcHkoKTogUmFuZ2Uge1xuICAgIHJldHVybiBuZXcgUmFuZ2UoIHRoaXMuX21pbiwgdGhpcy5fbWF4ICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taHRtbC1jb25zdHJ1Y3RvcnNcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBsZW5ndGggb2YgdGhpcyByYW5nZSwgdGhhdCBpcyB0aGUgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSBtYXhpbXVtIGFuZCBtaW5pbXVtIHZhbHVlIG9mIHRoaXMgcmFuZ2VcbiAgICovXG4gIHB1YmxpYyBnZXRMZW5ndGgoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5fbWF4IC0gdGhpcy5fbWluO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNlbnRlciBvZiB0aGlzIHJhbmdlLCB0aGF0IGlzIHRoZSBhdmVyYWdlIHZhbHVlIG9mIHRoZSBtYXhpbXVtIGFuZCBtaW5pbXVtIHZhbHVlIG9mIHRoaXMgcmFuZ2VcbiAgICovXG4gIHB1YmxpYyBnZXRDZW50ZXIoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKCB0aGlzLl9tYXggKyB0aGlzLl9taW4gKSAvIDI7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIHJhbmdlIGNvbnRhaW5zIHRoZSB2YWx1ZVxuICAgKi9cbiAgcHVibGljIGNvbnRhaW5zKCB2YWx1ZTogbnVtYmVyICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoIHZhbHVlID49IHRoaXMuX21pbiApICYmICggdmFsdWUgPD0gdGhpcy5fbWF4ICk7XG4gIH1cblxuICAvKipcbiAgICogRG9lcyB0aGlzIHJhbmdlIGNvbnRhaW4gdGhlIHNwZWNpZmllZCByYW5nZT9cbiAgICovXG4gIHB1YmxpYyBjb250YWluc1JhbmdlKCByYW5nZTogUmFuZ2UgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICggdGhpcy5fbWluIDw9IHJhbmdlLm1pbiApICYmICggdGhpcy5fbWF4ID49IHJhbmdlLm1heCApO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZSBpZiB0aGlzIHJhbmdlIG92ZXJsYXBzIChpbnRlcnNlY3RzKSB3aXRoIGFub3RoZXIgcmFuZ2VcbiAgICovXG4gIHB1YmxpYyBpbnRlcnNlY3RzKCByYW5nZTogUmFuZ2UgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICggdGhpcy5fbWF4ID49IHJhbmdlLm1pbiApICYmICggcmFuZ2UubWF4ID49IHRoaXMuX21pbiApO1xuICB9XG5cbiAgLyoqXG4gICAqIERvIHRoZSB0d28gcmFuZ2VzIG92ZXJsYXAgd2l0aCBvbmUgYW5vdGhlcj8gIE5vdGUgdGhhdCB0aGlzIGFzc3VtZXMgdGhhdFxuICAgKiBUaGlzIGlzIGEgb3BlbiBpbnRlcnZhbC5cbiAgICovXG4gIHB1YmxpYyBpbnRlcnNlY3RzRXhjbHVzaXZlKCByYW5nZTogUmFuZ2UgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICggdGhpcy5fbWF4ID4gcmFuZ2UubWluICkgJiYgKCByYW5nZS5tYXggPiB0aGlzLl9taW4gKTtcbiAgfVxuXG4gIC8qKlxuICAgKlxuICAgKiBSRVZJRVc6IFRoZSBuYW1pbmcgaXMgbm90IGhlbHBpbmcgbWUgdW5kZXJzdGFuZCB0aGF0IHRoaXMgZnVuY3Rpb24gaXMganVzdCB0aGUgaW1tdXRhYmxlIHZlcnNpb24gb2YgaW5jbHVkZVJhbmdlKCkuXG4gICAqXG4gICAqIFRoZSBzbWFsbGVzdCByYW5nZSB0aGF0IGNvbnRhaW5zIGJvdGggdGhpcyByYW5nZSBhbmQgdGhlIGlucHV0IHJhbmdlLCByZXR1cm5lZCBhcyBhIGNvcHkuXG4gICAqXG4gICAqIFRoZSBtZXRob2QgYmVsb3cgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBpbmNsdWRlUmFuZ2UoKS4gVGhlIG1ldGhvZCB3aWxsIHJldHVybiBhIG5ldyByYW5nZSwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHJhbmdlLlxuICAgKi9cbiAgcHVibGljIHVuaW9uKCByYW5nZTogUmFuZ2UgKTogUmFuZ2Uge1xuICAgIHJldHVybiBuZXcgUmFuZ2UoIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taHRtbC1jb25zdHJ1Y3RvcnNcbiAgICAgIE1hdGgubWluKCB0aGlzLm1pbiwgcmFuZ2UubWluICksXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXgsIHJhbmdlLm1heCApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSRVZJRVc6IFRoZSBuYW1pbmcgaXMgbm90IGhlbHBpbmcgbWUgdW5kZXJzdGFuZCB0aGF0IHRoaXMgZnVuY3Rpb24gaXMganVzdCB0aGUgaW1tdXRhYmxlIHZlcnNpb24gb2YgY29uc3RyYWluUmFuZ2UoKS5cbiAgICpcbiAgICogVGhlIHNtYWxsZXN0IHJhbmdlIHRoYXQgaXMgY29udGFpbmVkIGJ5IGJvdGggdGhpcyByYW5nZSBhbmQgdGhlIGlucHV0IHJhbmdlLCByZXR1cm5lZCBhcyBhIGNvcHkuXG4gICAqXG4gICAqIFRoZSBtZXRob2QgYmVsb3cgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBjb25zdHJhaW5SYW5nZSgpLiBUaGUgbWV0aG9kIGJlbG93IHdpbGwgcmV0dXJuIGEgbmV3IHJhbmdlLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgcmFuZ2UuXG4gICAqL1xuICBwdWJsaWMgaW50ZXJzZWN0aW9uKCByYW5nZTogUmFuZ2UgKTogUmFuZ2Uge1xuICAgIHJldHVybiBuZXcgUmFuZ2UoIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taHRtbC1jb25zdHJ1Y3RvcnNcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1pbiwgcmFuZ2UubWluICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5tYXgsIHJhbmdlLm1heCApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGlzIHJhbmdlIHNvIHRoYXQgaXQgY29udGFpbnMgYm90aCBpdHMgb3JpZ2luYWwgcmFuZ2UgYW5kIHRoZSBpbnB1dCByYW5nZS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB1bmlvbigpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgcmFuZ2UsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIHJhbmdlIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBpbmNsdWRlUmFuZ2UoIHJhbmdlOiBSYW5nZSApOiBSYW5nZSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluLCByYW5nZS5taW4gKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heCwgcmFuZ2UubWF4IClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgcmFuZ2Ugc28gdGhhdCBpdCBpcyB0aGUgbGFyZ2VzdCByYW5nZSBjb250YWluZWQgYm90aCBpbiBpdHMgb3JpZ2luYWwgcmFuZ2UgYW5kIGluIHRoZSBpbnB1dCByYW5nZS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBpbnRlcnNlY3Rpb24oKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHJhbmdlLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyByYW5nZSBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgY29uc3RyYWluUmFuZ2UoIHJhbmdlOiBSYW5nZSApOiBSYW5nZSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWluLCByYW5nZS5taW4gKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1heCwgcmFuZ2UubWF4IClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJFVklFVzogZG8gd2UgYWxzbyBuZWVkIGEgbXV0YWJsZSBmb3JtIG9mIHNoaWZ0ZWQ/XG4gICAqXG4gICAqIFJldHVybnMgYSBuZXcgcmFuZ2UgdGhhdCBpcyB0aGUgc2FtZSBhcyB0aGlzIHJhbmdlLCBidXQgc2hpZnRlZCBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICovXG4gIHB1YmxpYyBzaGlmdGVkKCBuOiBudW1iZXIgKTogUmFuZ2Uge1xuICAgIHJldHVybiBuZXcgUmFuZ2UoIHRoaXMubWluICsgbiwgdGhpcy5tYXggKyBuICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taHRtbC1jb25zdHJ1Y3RvcnNcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGUgYXR0cmlidXRlcyBvZiB0aGlzIHJhbmdlIHRvIGEgc3RyaW5nXG4gICAqL1xuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFtSYW5nZSAobWluOiR7dGhpcy5fbWlufSBtYXg6JHt0aGlzLl9tYXh9KV1gO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cmFpbnMgYSB2YWx1ZSB0byB0aGUgcmFuZ2UuXG4gICAqL1xuICBwdWJsaWMgY29uc3RyYWluVmFsdWUoIHZhbHVlOiBudW1iZXIgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5taW4oIE1hdGgubWF4KCB2YWx1ZSwgdGhpcy5fbWluICksIHRoaXMuX21heCApO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgaWYgdGhpcyBSYW5nZSBpcyBlcXVhbCB0byBzb21lIG9iamVjdC5cbiAgICovXG4gIHB1YmxpYyBlcXVhbHMoIG9iamVjdDogSW50ZW50aW9uYWxBbnkgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuICggdGhpcy5jb25zdHJ1Y3RvciA9PT0gb2JqZWN0LmNvbnN0cnVjdG9yICkgJiZcbiAgICAgICAgICAgKCB0aGlzLl9taW4gPT09IG9iamVjdC5taW4gKSAmJlxuICAgICAgICAgICAoIHRoaXMuX21heCA9PT0gb2JqZWN0Lm1heCApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdpdmVuIGEgdmFsdWUsIG5vcm1hbGl6ZSBpdCB0byB0aGlzIFJhbmdlJ3MgbGVuZ3RoLCByZXR1cm5pbmcgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEgZm9yIHZhbHVlcyBjb250YWluZWQgaW5cbiAgICogdGhlIFJhbmdlLiBJZiB0aGUgdmFsdWUgaXMgbm90IGNvbnRhaW5lZCBpbiBSYW5nZSwgdGhlbiB0aGUgcmV0dXJuIHZhbHVlIHdpbGwgbm90IGJlIGJldHdlZW4gMCBhbmQgMS5cbiAgICovXG4gIHB1YmxpYyBnZXROb3JtYWxpemVkVmFsdWUoIHZhbHVlOiBudW1iZXIgKTogbnVtYmVyIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmdldExlbmd0aCgpICE9PSAwLCAnY2Fubm90IGdldCBub3JtYWxpemVkIHZhbHVlIHdpdGhvdXQgYSByYW5nZSBsZW5ndGgnICk7XG4gICAgcmV0dXJuICggdmFsdWUgLSB0aGlzLm1pbiApIC8gdGhpcy5nZXRMZW5ndGgoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wdXRlIHRoZSBvcHBvc2l0ZSBvZiBhIG5vcm1hbGl6ZWQgdmFsdWUuIEdpdmVuIGEgbm9ybWFsaXplZCB2YWx1ZSAoYmV0d2VlbiAwIGFuZCAxKS4gV29ya2VkIHdpdGggYW55IG51bWJlclxuICAgKiB0aG91Z2gsIChldmVuIG91dHNpZGUgb2YgdGhlIHJhbmdlKS4gSXQgaXMgdGhlIGNsaWVudCdzIHJlc3BvbnNpYmlsaXR5IHRvIGNsYW1wIGlmIHRoYXQgaXMgaW1wb3J0YW50IHRvIHRoZVxuICAgKiB1c2FnZS5cbiAgICovXG4gIHB1YmxpYyBleHBhbmROb3JtYWxpemVkVmFsdWUoIG5vcm1hbGl6ZWRWYWx1ZTogbnVtYmVyICk6IG51bWJlciB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5nZXRMZW5ndGgoKSAhPT0gMCwgJ2Nhbm5vdCBnZXQgZXhwYW5kIG5vcm1hbGl6ZWQgdmFsdWUgd2l0aG91dCBhIHJhbmdlIGxlbmd0aCcgKTtcbiAgICByZXR1cm4gbm9ybWFsaXplZFZhbHVlICogdGhpcy5nZXRMZW5ndGgoKSArIHRoaXMubWluO1xuICB9XG5cbiAgLyoqXG4gICAqIEluIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9kb3QvaXNzdWVzLzU3LCBkZWZhdWx0VmFsdWUgd2FzIG1vdmVkIHRvIFJhbmdlV2l0aFZhbHVlLlxuICAgKiBUaGlzIEVTNSBnZXR0ZXIgY2F0Y2hlcyBwcm9ncmFtbWluZyBlcnJvcnMgd2hlcmUgZGVmYXVsdFZhbHVlIGlzIHN0aWxsIHVzZWQgd2l0aCBSYW5nZS5cbiAgICovXG4gIHB1YmxpYyBnZXQgZGVmYXVsdFZhbHVlKCk6IG51bWJlciB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCAnZGVmYXVsdFZhbHVlIGlzIHVuZGVmaW5lZCwgZGlkIHlvdSBtZWFuIHRvIHVzZSBSYW5nZVdpdGhWYWx1ZT8nICk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIFJhbmdlSU8gPSBuZXcgSU9UeXBlPFJhbmdlLCBSYW5nZVN0YXRlT2JqZWN0PiggJ1JhbmdlSU8nLCB7XG4gICAgdmFsdWVUeXBlOiBSYW5nZSxcbiAgICBkb2N1bWVudGF0aW9uOiAnQSByYW5nZSB3aXRoIFwibWluXCIgYW5kIGEgXCJtYXhcIiBtZW1iZXJzLicsXG4gICAgdG9TdGF0ZU9iamVjdDogKCByYW5nZTogUmFuZ2UgKTogUmFuZ2VTdGF0ZU9iamVjdCA9PiAoIHtcbiAgICAgIG1pbjogSW5maW5pdGVOdW1iZXJJTy50b1N0YXRlT2JqZWN0KCByYW5nZS5taW4gKSxcbiAgICAgIG1heDogSW5maW5pdGVOdW1iZXJJTy50b1N0YXRlT2JqZWN0KCByYW5nZS5tYXggKVxuICAgIH0gKSxcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1odG1sLWNvbnN0cnVjdG9yc1xuICAgIGZyb21TdGF0ZU9iamVjdDogKCBzdGF0ZU9iamVjdDogUmFuZ2VTdGF0ZU9iamVjdCApID0+IG5ldyBSYW5nZShcbiAgICAgIEluZmluaXRlTnVtYmVySU8uZnJvbVN0YXRlT2JqZWN0KCBzdGF0ZU9iamVjdC5taW4gKSxcbiAgICAgIEluZmluaXRlTnVtYmVySU8uZnJvbVN0YXRlT2JqZWN0KCBzdGF0ZU9iamVjdC5tYXggKVxuICAgICksXG4gICAgc3RhdGVTY2hlbWE6IHtcbiAgICAgIG1pbjogSW5maW5pdGVOdW1iZXJJTyxcbiAgICAgIG1heDogSW5maW5pdGVOdW1iZXJJT1xuICAgIH1cbiAgfSApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgRVZFUllUSElORyA9IG5ldyBSYW5nZSggTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1odG1sLWNvbnN0cnVjdG9yc1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE5PVEhJTkcgPSBuZXcgUmFuZ2UoIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8taHRtbC1jb25zdHJ1Y3RvcnNcbn1cblxuZG90LnJlZ2lzdGVyKCAnUmFuZ2UnLCBSYW5nZSApO1xuXG5leHBvcnQgZGVmYXVsdCBSYW5nZTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUdBLE9BQU9BLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsZ0JBQWdCLE1BQXFDLDJDQUEyQztBQUN2RyxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQVkxQixNQUFNQyxLQUFLLENBQW1CO0VBRTVCOztFQUdBOztF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
;// CONCATENATED MODULE: ../chipper/dist/js/tandem/js/types/NumberIO.js
// Copyright 2018-2022, University of Colorado Boulder

/**
 * IO Type for JS's built-in number type.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Andrew Adare (PhET Interactive Simulations)
 */




const NumberIO = new IOType('NumberIO', {
  valueType: 'number',
  documentation: 'IO Type for Javascript\'s number primitive type',
  toStateObject: _.identity,
  fromStateObject: stateObject => stateObject,
  stateSchema: StateSchema.asValue('number', {
    isValidValue: value => typeof value === 'number' && !isNaN(value) && value !== Number.POSITIVE_INFINITY && value !== Number.NEGATIVE_INFINITY
  })
});
tandemNamespace.register('NumberIO', NumberIO);
/* harmony default export */ const types_NumberIO = (NumberIO);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ0YW5kZW1OYW1lc3BhY2UiLCJJT1R5cGUiLCJTdGF0ZVNjaGVtYSIsIk51bWJlcklPIiwidmFsdWVUeXBlIiwiZG9jdW1lbnRhdGlvbiIsInRvU3RhdGVPYmplY3QiLCJfIiwiaWRlbnRpdHkiLCJmcm9tU3RhdGVPYmplY3QiLCJzdGF0ZU9iamVjdCIsInN0YXRlU2NoZW1hIiwiYXNWYWx1ZSIsImlzVmFsaWRWYWx1ZSIsInZhbHVlIiwiaXNOYU4iLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsIk5FR0FUSVZFX0lORklOSVRZIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJOdW1iZXJJTy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOC0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBJTyBUeXBlIGZvciBKUydzIGJ1aWx0LWluIG51bWJlciB0eXBlLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIEFuZHJldyBBZGFyZSAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgdGFuZGVtTmFtZXNwYWNlIGZyb20gJy4uL3RhbmRlbU5hbWVzcGFjZS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4vSU9UeXBlLmpzJztcbmltcG9ydCBTdGF0ZVNjaGVtYSBmcm9tICcuL1N0YXRlU2NoZW1hLmpzJztcblxuY29uc3QgTnVtYmVySU8gPSBuZXcgSU9UeXBlPG51bWJlciwgbnVtYmVyPiggJ051bWJlcklPJywge1xuICB2YWx1ZVR5cGU6ICdudW1iZXInLFxuICBkb2N1bWVudGF0aW9uOiAnSU8gVHlwZSBmb3IgSmF2YXNjcmlwdFxcJ3MgbnVtYmVyIHByaW1pdGl2ZSB0eXBlJyxcbiAgdG9TdGF0ZU9iamVjdDogXy5pZGVudGl0eSxcbiAgZnJvbVN0YXRlT2JqZWN0OiBzdGF0ZU9iamVjdCA9PiBzdGF0ZU9iamVjdCxcbiAgc3RhdGVTY2hlbWE6IFN0YXRlU2NoZW1hLmFzVmFsdWU8bnVtYmVyLCBudW1iZXI+KCAnbnVtYmVyJywge1xuICAgIGlzVmFsaWRWYWx1ZTogKCB2YWx1ZTogbnVtYmVyICkgPT4gKCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTiggdmFsdWUgKSAmJiB2YWx1ZSAhPT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZICYmIHZhbHVlICE9PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgKVxuICB9IClcbn0gKTtcblxudGFuZGVtTmFtZXNwYWNlLnJlZ2lzdGVyKCAnTnVtYmVySU8nLCBOdW1iZXJJTyApO1xuZXhwb3J0IGRlZmF1bHQgTnVtYmVySU87Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFNLHVCQUF1QjtBQUNuRCxPQUFPQyxNQUFNLE1BQU0sYUFBYTtBQUNoQyxPQUFPQyxXQUFXLE1BQU0sa0JBQWtCO0FBRTFDLE1BQU1DLFFBQVEsR0FBRyxJQUFJRixNQUFNLENBQWtCLFVBQVUsRUFBRTtFQUN2REcsU0FBUyxFQUFFLFFBQVE7RUFDbkJDLGFBQWEsRUFBRSxpREFBaUQ7RUFDaEVDLGFBQWEsRUFBRUMsQ0FBQyxDQUFDQyxRQUFRO0VBQ3pCQyxlQUFlLEVBQUVDLFdBQVcsSUFBSUEsV0FBVztFQUMzQ0MsV0FBVyxFQUFFVCxXQUFXLENBQUNVLE9BQU8sQ0FBa0IsUUFBUSxFQUFFO0lBQzFEQyxZQUFZLEVBQUlDLEtBQWEsSUFBUSxPQUFPQSxLQUFLLEtBQUssUUFBUSxJQUFJLENBQUNDLEtBQUssQ0FBRUQsS0FBSyxDQUFFLElBQUlBLEtBQUssS0FBS0UsTUFBTSxDQUFDQyxpQkFBaUIsSUFBSUgsS0FBSyxLQUFLRSxNQUFNLENBQUNFO0VBQzlJLENBQUM7QUFDSCxDQUFDLENBQUU7QUFFSGxCLGVBQWUsQ0FBQ21CLFFBQVEsQ0FBRSxVQUFVLEVBQUVoQixRQUFRLENBQUU7QUFDaEQsZUFBZUEsUUFBUSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/NumberProperty.js
// Copyright 2016-2023, University of Colorado Boulder

/**
 * Property whose value must be a number.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Sam Reid (PhET Interactive Simulations)
 */












const VALID_INTEGER = {
  valueType: 'number',
  isValidValue: v => v % 1 === 0,
  validationMessage: 'Should be a valid integer'
};
const VALID_NON_NAN = {
  isValidValue: v => !isNaN(v),
  validationMessage: 'Should not be NaN'
};
const NumberProperty_VALIDATE_OPTIONS_FALSE = {
  validateValidator: false
};

// valid values for options.numberType to convey whether it is continuous or discrete with step size 1
const VALID_NUMBER_TYPES = ['FloatingPoint', 'Integer'];
// standardized tandem name for rangeProperty
const RANGE_PROPERTY_TANDEM_NAME = 'rangeProperty';
const DEFAULT_RANGE = js_Range.EVERYTHING;
// For the IOType
const PropertyIOImpl = Property.PropertyIO(types_NumberIO);
class NumberProperty extends Property {
  // Used by PhET-iO in NumberPropertyIO as metadata passed to the wrapper.
  // @readonly, but cannot set as such because it is set by PhET-iO state.

  // validation for NumberProperty and its rangeProperty, undefined if assertions are disabled

  constructor(value, providedOptions) {
    const options = optionize()({
      // NumberPropertyOptions
      numberType: 'FloatingPoint',
      range: DEFAULT_RANGE,
      // PropertyOptions
      validators: [],
      tandem: js_Tandem.OPTIONAL
    }, providedOptions);
    options.rangePropertyOptions = optionize()({
      phetioDocumentation: 'provides the range of possible values for the parent NumberProperty',
      phetioValueType: js_Range.RangeIO,
      phetioReadOnly: true,
      // If provided range is the default, don't instrument the PhET-iO RangeProperty
      tandem: options.range !== DEFAULT_RANGE ? options.tandem.createTandem(RANGE_PROPERTY_TANDEM_NAME) : js_Tandem.OPT_OUT
    }, options.rangePropertyOptions);
    if (assert && js_Tandem.VALIDATION && options.rangePropertyOptions.tandem && options.rangePropertyOptions.tandem.supplied) {
      assert && assert(options.rangePropertyOptions.tandem.name === RANGE_PROPERTY_TANDEM_NAME, `rangePropertyOptions.tandem.name must be ${RANGE_PROPERTY_TANDEM_NAME}: ${options.rangePropertyOptions.tandem.name}`);
    }

    // client cannot specify superclass options that are controlled by NumberProperty
    options.valueType = 'number';
    options.phetioOuterType = () => NumberProperty.NumberPropertyIO;
    options.phetioValueType = types_NumberIO; // not actually used, but for completeness, don't have ReadOnlyProperty storing the wrong default.

    const rangePropertyProvided = options.range && options.range instanceof ReadOnlyProperty;
    const ownsRangeProperty = !rangePropertyProvided;
    const rangeProperty = options.range instanceof ReadOnlyProperty ? options.range : new Property(options.range, options.rangePropertyOptions);
    options.validators.push(VALID_NON_NAN); // seems right for this to run first
    if (options.numberType === 'Integer') {
      options.validators.push(VALID_INTEGER);
    }
    options.validators.push({
      isValidValue: v => rangeProperty.value.contains(v),
      validationMessage: 'Number must be within rangeProperty value.'
    });
    super(value, options);
    this.numberType = options.numberType;
    this.rangeProperty = rangeProperty;
    if (assert && js_Tandem.VALIDATION && this.rangeProperty.isPhetioInstrumented()) {
      assert && assert(this.isPhetioInstrumented(), 'NumberProperty must be phet-io instrumented if the range is');
    }
    const rangePropertyObserver = () => {
      js_validate(this.value, this.valueValidator, NumberProperty_VALIDATE_OPTIONS_FALSE);
    };
    assert && this.rangeProperty.link(rangePropertyObserver);

    // For PhET-iO State, make sure that both the range and this value are correct before firing notifications (where the assertions are).
    this.rangeProperty.addPhetioStateDependencies([this]);
    this.addPhetioStateDependencies([this.rangeProperty]);

    // verify that validValues meet other NumberProperty-specific validation criteria
    if (options.validValues && this.validateNumberAndRangeProperty) {
      for (let i = 0; i < options.validValues.length; i++) {
        const validValue = options.validValues[i];
        this.validateNumberAndRangeProperty(validValue);
      }
    }
    this.disposeNumberProperty = () => {
      if (ownsRangeProperty) {
        this.rangeProperty.dispose();
      } else if (assert) {
        this.rangeProperty.unlink(rangePropertyObserver);
      }
    };
    this.resetNumberProperty = () => {
      ownsRangeProperty && this.rangeProperty.reset();
    };
  }
  get range() {
    return this.rangeProperty.value;
  }

  /**
   * Convenience function for setting the rangeProperty. Note: be careful using this function, as validation will occur
   * immediately, and if the value is outside of this new Range an error will occur. See this.setValueAndRange() for
   *  way to set both at once without assertion errors.
   */
  set range(range) {
    this.rangeProperty.value = range;
  }
  reset() {
    this.resetValueAndRange(); // even if we don't own the range, reset them together to prevent assertions, https://github.com/phetsims/axon/issues/427
    super.reset();
  }
  dispose() {
    this.disposeNumberProperty();
    super.dispose();
  }

  /**
   * An atomic setting function that will set a range and a value at the same time, to make sure that validation does
   * not fail after one but has been set not the other.
   */
  setValueAndRange(value, range) {
    assert && assert(range.contains(value), `value ${value} is not in range [${range.min},${range.max}]`);

    // defer notification of listeners
    this.setDeferred(true);
    this.rangeProperty.setDeferred(true);

    // set values
    this.set(value);
    this.rangeProperty.set(range);

    // notify listeners if the values have changed
    const notifyValueListeners = this.setDeferred(false);
    const notifyRangeListeners = this.rangeProperty.setDeferred(false);
    notifyValueListeners && notifyValueListeners();
    notifyRangeListeners && notifyRangeListeners();
  }

  /**
   * Resets the value and range atomically.
   * If you use setValueAndRange, you'll likely need to use this instead of reset.
   */
  resetValueAndRange() {
    this.setValueAndRange(this.initialValue, this.rangeProperty.initialValue);
  }

  /**
   * Get parent state and append NumberProperty-specific metadata to it.
   */
  toStateObject() {
    const parentStateObject = PropertyIOImpl.toStateObject(this);
    parentStateObject.numberType = this.numberType;
    parentStateObject.range = js_Range.RangeIO.toStateObject(this.rangeProperty.value);
    const hasRangePhetioID = this.rangeProperty && this.rangeProperty.isPhetioInstrumented();
    parentStateObject.rangePhetioID = hasRangePhetioID ? this.rangeProperty.tandem.phetioID : null;
    return parentStateObject;
  }
  static NumberPropertyIO = new IOType('NumberPropertyIO', {
    valueType: NumberProperty,
    supertype: PropertyIOImpl,
    parameterTypes: [types_NumberIO],
    documentation: `Extends PropertyIO to add values for the numeric range ( min, max ) and numberType ( '${VALID_NUMBER_TYPES.join('\' | \'')}' )`,
    toStateObject: numberProperty => {
      return numberProperty.toStateObject();
    },
    applyState: (numberProperty, stateObject) => {
      // nothing to do here for range, because in order to support range, this NumberProperty's rangeProperty must be instrumented.

      PropertyIOImpl.applyState(numberProperty, stateObject);
    },
    stateSchema: {
      numberType: types_StringIO,
      range: js_Range.RangeIO,
      rangePhetioID: types_NullableIO(types_StringIO),
      value: types_NumberIO
    }
  });
}
js_axon.register('NumberProperty', NumberProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSYW5nZSIsIm9wdGlvbml6ZSIsIlRhbmRlbSIsIklPVHlwZSIsIk51bGxhYmxlSU8iLCJOdW1iZXJJTyIsIlN0cmluZ0lPIiwiYXhvbiIsIlJlYWRPbmx5UHJvcGVydHkiLCJQcm9wZXJ0eSIsInZhbGlkYXRlIiwiVkFMSURfSU5URUdFUiIsInZhbHVlVHlwZSIsImlzVmFsaWRWYWx1ZSIsInYiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIlZBTElEX05PTl9OQU4iLCJpc05hTiIsIlZBTElEQVRFX09QVElPTlNfRkFMU0UiLCJ2YWxpZGF0ZVZhbGlkYXRvciIsIlZBTElEX05VTUJFUl9UWVBFUyIsIlJBTkdFX1BST1BFUlRZX1RBTkRFTV9OQU1FIiwiREVGQVVMVF9SQU5HRSIsIkVWRVJZVEhJTkciLCJQcm9wZXJ0eUlPSW1wbCIsIlByb3BlcnR5SU8iLCJOdW1iZXJQcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwidmFsdWUiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwibnVtYmVyVHlwZSIsInJhbmdlIiwidmFsaWRhdG9ycyIsInRhbmRlbSIsIk9QVElPTkFMIiwicmFuZ2VQcm9wZXJ0eU9wdGlvbnMiLCJwaGV0aW9Eb2N1bWVudGF0aW9uIiwicGhldGlvVmFsdWVUeXBlIiwiUmFuZ2VJTyIsInBoZXRpb1JlYWRPbmx5IiwiY3JlYXRlVGFuZGVtIiwiT1BUX09VVCIsImFzc2VydCIsIlZBTElEQVRJT04iLCJzdXBwbGllZCIsIm5hbWUiLCJwaGV0aW9PdXRlclR5cGUiLCJOdW1iZXJQcm9wZXJ0eUlPIiwicmFuZ2VQcm9wZXJ0eVByb3ZpZGVkIiwib3duc1JhbmdlUHJvcGVydHkiLCJyYW5nZVByb3BlcnR5IiwicHVzaCIsImNvbnRhaW5zIiwiaXNQaGV0aW9JbnN0cnVtZW50ZWQiLCJyYW5nZVByb3BlcnR5T2JzZXJ2ZXIiLCJ2YWx1ZVZhbGlkYXRvciIsImxpbmsiLCJhZGRQaGV0aW9TdGF0ZURlcGVuZGVuY2llcyIsInZhbGlkVmFsdWVzIiwidmFsaWRhdGVOdW1iZXJBbmRSYW5nZVByb3BlcnR5IiwiaSIsImxlbmd0aCIsInZhbGlkVmFsdWUiLCJkaXNwb3NlTnVtYmVyUHJvcGVydHkiLCJkaXNwb3NlIiwidW5saW5rIiwicmVzZXROdW1iZXJQcm9wZXJ0eSIsInJlc2V0IiwicmVzZXRWYWx1ZUFuZFJhbmdlIiwic2V0VmFsdWVBbmRSYW5nZSIsIm1pbiIsIm1heCIsInNldERlZmVycmVkIiwic2V0Iiwibm90aWZ5VmFsdWVMaXN0ZW5lcnMiLCJub3RpZnlSYW5nZUxpc3RlbmVycyIsImluaXRpYWxWYWx1ZSIsInRvU3RhdGVPYmplY3QiLCJwYXJlbnRTdGF0ZU9iamVjdCIsImhhc1JhbmdlUGhldGlvSUQiLCJyYW5nZVBoZXRpb0lEIiwicGhldGlvSUQiLCJzdXBlcnR5cGUiLCJwYXJhbWV0ZXJUeXBlcyIsImRvY3VtZW50YXRpb24iLCJqb2luIiwibnVtYmVyUHJvcGVydHkiLCJhcHBseVN0YXRlIiwic3RhdGVPYmplY3QiLCJzdGF0ZVNjaGVtYSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiTnVtYmVyUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTYtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogUHJvcGVydHkgd2hvc2UgdmFsdWUgbXVzdCBiZSBhIG51bWJlci5cbiAqXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgUmFuZ2UsIHsgUmFuZ2VTdGF0ZU9iamVjdCB9IGZyb20gJy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBUYW5kZW0gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1RhbmRlbS5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9JT1R5cGUuanMnO1xuaW1wb3J0IE51bGxhYmxlSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL051bGxhYmxlSU8uanMnO1xuaW1wb3J0IE51bWJlcklPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdW1iZXJJTy5qcyc7XG5pbXBvcnQgU3RyaW5nSU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL1N0cmluZ0lPLmpzJztcbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuL1JlYWRPbmx5UHJvcGVydHkuanMnO1xuaW1wb3J0IFByb3BlcnR5LCB7IFByb3BlcnR5T3B0aW9ucyB9IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IHZhbGlkYXRlIGZyb20gJy4vdmFsaWRhdGUuanMnO1xuaW1wb3J0IFRSYW5nZWRQcm9wZXJ0eSBmcm9tICcuL1RSYW5nZWRQcm9wZXJ0eS5qcyc7XG5cbmNvbnN0IFZBTElEX0lOVEVHRVIgPSB7IHZhbHVlVHlwZTogJ251bWJlcicsIGlzVmFsaWRWYWx1ZTogKCB2OiBudW1iZXIgKSA9PiB2ICUgMSA9PT0gMCwgdmFsaWRhdGlvbk1lc3NhZ2U6ICdTaG91bGQgYmUgYSB2YWxpZCBpbnRlZ2VyJyB9O1xuY29uc3QgVkFMSURfTk9OX05BTiA9IHsgaXNWYWxpZFZhbHVlOiAoIHY6IG51bWJlciApID0+ICFpc05hTiggdiApLCB2YWxpZGF0aW9uTWVzc2FnZTogJ1Nob3VsZCBub3QgYmUgTmFOJyB9O1xuY29uc3QgVkFMSURBVEVfT1BUSU9OU19GQUxTRSA9IHsgdmFsaWRhdGVWYWxpZGF0b3I6IGZhbHNlIH07XG5cbi8vIHZhbGlkIHZhbHVlcyBmb3Igb3B0aW9ucy5udW1iZXJUeXBlIHRvIGNvbnZleSB3aGV0aGVyIGl0IGlzIGNvbnRpbnVvdXMgb3IgZGlzY3JldGUgd2l0aCBzdGVwIHNpemUgMVxuY29uc3QgVkFMSURfTlVNQkVSX1RZUEVTID0gWyAnRmxvYXRpbmdQb2ludCcsICdJbnRlZ2VyJyBdIGFzIGNvbnN0O1xudHlwZSBOdW1iZXJUeXBlID0gdHlwZW9mIFZBTElEX05VTUJFUl9UWVBFU1tudW1iZXJdO1xuXG4vLyBzdGFuZGFyZGl6ZWQgdGFuZGVtIG5hbWUgZm9yIHJhbmdlUHJvcGVydHlcbmNvbnN0IFJBTkdFX1BST1BFUlRZX1RBTkRFTV9OQU1FID0gJ3JhbmdlUHJvcGVydHknO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9SQU5HRSA9IFJhbmdlLkVWRVJZVEhJTkc7XG5cbmV4cG9ydCB0eXBlIE51bWJlclByb3BlcnR5U3RhdGUgPSB7XG4gIG51bWJlclR5cGU6IHN0cmluZztcbiAgcmFuZ2U6IFJhbmdlU3RhdGVPYmplY3Q7XG4gIHJhbmdlUGhldGlvSUQ6IHN0cmluZyB8IG51bGw7XG59ICYgUmVhZE9ubHlQcm9wZXJ0eTxudW1iZXI+O1xuXG4vLyBGb3IgdGhlIElPVHlwZVxuY29uc3QgUHJvcGVydHlJT0ltcGwgPSBQcm9wZXJ0eS5Qcm9wZXJ0eUlPKCBOdW1iZXJJTyApO1xuXG50eXBlIFNlbGZPcHRpb25zID0ge1xuICBudW1iZXJUeXBlPzogTnVtYmVyVHlwZTtcbiAgcmFuZ2U/OiBSYW5nZSB8IFByb3BlcnR5PFJhbmdlPjtcblxuICAvLyBQYXNzZWQgdG8gdGhpcy5yYW5nZVByb3BlcnR5IGlmIE51bWJlclByb3BlcnR5IGNyZWF0ZXMgaXQuIElnbm9yZWQgaWYgYSBQcm9wZXJ0eSBpcyBwcm92aWRlZCB2aWEgb3B0aW9ucy5yYW5nZS5cbiAgcmFuZ2VQcm9wZXJ0eU9wdGlvbnM/OiBQcm9wZXJ0eU9wdGlvbnM8UmFuZ2U+O1xufTtcblxuZXhwb3J0IHR5cGUgTnVtYmVyUHJvcGVydHlPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBTdHJpY3RPbWl0PFByb3BlcnR5T3B0aW9uczxudW1iZXI+LCAncGhldGlvVmFsdWVUeXBlJyB8ICd2YWx1ZVR5cGUnPjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTnVtYmVyUHJvcGVydHkgZXh0ZW5kcyBQcm9wZXJ0eTxudW1iZXI+IGltcGxlbWVudHMgVFJhbmdlZFByb3BlcnR5IHtcblxuICAvLyBVc2VkIGJ5IFBoRVQtaU8gaW4gTnVtYmVyUHJvcGVydHlJTyBhcyBtZXRhZGF0YSBwYXNzZWQgdG8gdGhlIHdyYXBwZXIuXG4gIC8vIEByZWFkb25seSwgYnV0IGNhbm5vdCBzZXQgYXMgc3VjaCBiZWNhdXNlIGl0IGlzIHNldCBieSBQaEVULWlPIHN0YXRlLlxuICBwcml2YXRlIHJlYWRvbmx5IG51bWJlclR5cGU6IE51bWJlclR5cGU7XG5cbiAgLy8gdmFsaWRhdGlvbiBmb3IgTnVtYmVyUHJvcGVydHkgYW5kIGl0cyByYW5nZVByb3BlcnR5LCB1bmRlZmluZWQgaWYgYXNzZXJ0aW9ucyBhcmUgZGlzYWJsZWRcbiAgcHJpdmF0ZSByZWFkb25seSB2YWxpZGF0ZU51bWJlckFuZFJhbmdlUHJvcGVydHk6ICggKCB2YWx1ZTogbnVtYmVyICkgPT4gdm9pZCApIHwgdW5kZWZpbmVkO1xuXG4gIHB1YmxpYyByZWFkb25seSByYW5nZVByb3BlcnR5OiBQcm9wZXJ0eTxSYW5nZT47XG4gIHByaXZhdGUgcmVhZG9ubHkgZGlzcG9zZU51bWJlclByb3BlcnR5OiAoKSA9PiB2b2lkO1xuICBwcml2YXRlIHJlYWRvbmx5IHJlc2V0TnVtYmVyUHJvcGVydHk6ICgpID0+IHZvaWQ7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCB2YWx1ZTogbnVtYmVyLCBwcm92aWRlZE9wdGlvbnM/OiBOdW1iZXJQcm9wZXJ0eU9wdGlvbnMgKSB7XG5cbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPE51bWJlclByb3BlcnR5T3B0aW9ucywgU3RyaWN0T21pdDxTZWxmT3B0aW9ucywgJ3JhbmdlUHJvcGVydHlPcHRpb25zJz4sIFByb3BlcnR5T3B0aW9uczxudW1iZXI+PigpKCB7XG5cbiAgICAgIC8vIE51bWJlclByb3BlcnR5T3B0aW9uc1xuICAgICAgbnVtYmVyVHlwZTogJ0Zsb2F0aW5nUG9pbnQnLFxuICAgICAgcmFuZ2U6IERFRkFVTFRfUkFOR0UsXG5cbiAgICAgIC8vIFByb3BlcnR5T3B0aW9uc1xuICAgICAgdmFsaWRhdG9yczogW10sXG4gICAgICB0YW5kZW06IFRhbmRlbS5PUFRJT05BTFxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xuXG4gICAgb3B0aW9ucy5yYW5nZVByb3BlcnR5T3B0aW9ucyA9IG9wdGlvbml6ZTxQcm9wZXJ0eU9wdGlvbnM8UmFuZ2U+LCBFbXB0eVNlbGZPcHRpb25zLCBQcm9wZXJ0eU9wdGlvbnM8UmFuZ2U+PigpKCB7XG4gICAgICBwaGV0aW9Eb2N1bWVudGF0aW9uOiAncHJvdmlkZXMgdGhlIHJhbmdlIG9mIHBvc3NpYmxlIHZhbHVlcyBmb3IgdGhlIHBhcmVudCBOdW1iZXJQcm9wZXJ0eScsXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IFJhbmdlLlJhbmdlSU8sXG4gICAgICBwaGV0aW9SZWFkT25seTogdHJ1ZSxcblxuICAgICAgLy8gSWYgcHJvdmlkZWQgcmFuZ2UgaXMgdGhlIGRlZmF1bHQsIGRvbid0IGluc3RydW1lbnQgdGhlIFBoRVQtaU8gUmFuZ2VQcm9wZXJ0eVxuICAgICAgdGFuZGVtOiBvcHRpb25zLnJhbmdlICE9PSBERUZBVUxUX1JBTkdFID8gb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCBSQU5HRV9QUk9QRVJUWV9UQU5ERU1fTkFNRSApIDogVGFuZGVtLk9QVF9PVVRcbiAgICB9LCBvcHRpb25zLnJhbmdlUHJvcGVydHlPcHRpb25zICk7XG5cbiAgICBpZiAoIGFzc2VydCAmJiBUYW5kZW0uVkFMSURBVElPTiAmJiBvcHRpb25zLnJhbmdlUHJvcGVydHlPcHRpb25zLnRhbmRlbSAmJiBvcHRpb25zLnJhbmdlUHJvcGVydHlPcHRpb25zLnRhbmRlbS5zdXBwbGllZCApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMucmFuZ2VQcm9wZXJ0eU9wdGlvbnMudGFuZGVtLm5hbWUgPT09IFJBTkdFX1BST1BFUlRZX1RBTkRFTV9OQU1FLFxuICAgICAgICBgcmFuZ2VQcm9wZXJ0eU9wdGlvbnMudGFuZGVtLm5hbWUgbXVzdCBiZSAke1JBTkdFX1BST1BFUlRZX1RBTkRFTV9OQU1FfTogJHtvcHRpb25zLnJhbmdlUHJvcGVydHlPcHRpb25zLnRhbmRlbS5uYW1lfWAgKTtcbiAgICB9XG5cbiAgICAvLyBjbGllbnQgY2Fubm90IHNwZWNpZnkgc3VwZXJjbGFzcyBvcHRpb25zIHRoYXQgYXJlIGNvbnRyb2xsZWQgYnkgTnVtYmVyUHJvcGVydHlcbiAgICBvcHRpb25zLnZhbHVlVHlwZSA9ICdudW1iZXInO1xuICAgIG9wdGlvbnMucGhldGlvT3V0ZXJUeXBlID0gKCkgPT4gTnVtYmVyUHJvcGVydHkuTnVtYmVyUHJvcGVydHlJTztcbiAgICBvcHRpb25zLnBoZXRpb1ZhbHVlVHlwZSA9IE51bWJlcklPOyAvLyBub3QgYWN0dWFsbHkgdXNlZCwgYnV0IGZvciBjb21wbGV0ZW5lc3MsIGRvbid0IGhhdmUgUmVhZE9ubHlQcm9wZXJ0eSBzdG9yaW5nIHRoZSB3cm9uZyBkZWZhdWx0LlxuXG4gICAgY29uc3QgcmFuZ2VQcm9wZXJ0eVByb3ZpZGVkID0gb3B0aW9ucy5yYW5nZSAmJiBvcHRpb25zLnJhbmdlIGluc3RhbmNlb2YgUmVhZE9ubHlQcm9wZXJ0eTtcbiAgICBjb25zdCBvd25zUmFuZ2VQcm9wZXJ0eSA9ICFyYW5nZVByb3BlcnR5UHJvdmlkZWQ7XG5cbiAgICBjb25zdCByYW5nZVByb3BlcnR5ID0gb3B0aW9ucy5yYW5nZSBpbnN0YW5jZW9mIFJlYWRPbmx5UHJvcGVydHkgPyBvcHRpb25zLnJhbmdlIDogbmV3IFByb3BlcnR5KCBvcHRpb25zLnJhbmdlLCBvcHRpb25zLnJhbmdlUHJvcGVydHlPcHRpb25zICk7XG5cbiAgICBvcHRpb25zLnZhbGlkYXRvcnMucHVzaCggVkFMSURfTk9OX05BTiApOyAvLyBzZWVtcyByaWdodCBmb3IgdGhpcyB0byBydW4gZmlyc3RcbiAgICBpZiAoIG9wdGlvbnMubnVtYmVyVHlwZSA9PT0gJ0ludGVnZXInICkge1xuICAgICAgb3B0aW9ucy52YWxpZGF0b3JzLnB1c2goIFZBTElEX0lOVEVHRVIgKTtcbiAgICB9XG4gICAgb3B0aW9ucy52YWxpZGF0b3JzLnB1c2goIHtcbiAgICAgIGlzVmFsaWRWYWx1ZTogdiA9PiByYW5nZVByb3BlcnR5LnZhbHVlLmNvbnRhaW5zKCB2ICksXG4gICAgICB2YWxpZGF0aW9uTWVzc2FnZTogJ051bWJlciBtdXN0IGJlIHdpdGhpbiByYW5nZVByb3BlcnR5IHZhbHVlLidcbiAgICB9ICk7XG5cbiAgICBzdXBlciggdmFsdWUsIG9wdGlvbnMgKTtcblxuICAgIHRoaXMubnVtYmVyVHlwZSA9IG9wdGlvbnMubnVtYmVyVHlwZTtcbiAgICB0aGlzLnJhbmdlUHJvcGVydHkgPSByYW5nZVByb3BlcnR5O1xuXG4gICAgaWYgKCBhc3NlcnQgJiYgVGFuZGVtLlZBTElEQVRJT04gJiYgdGhpcy5yYW5nZVByb3BlcnR5LmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgKSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICdOdW1iZXJQcm9wZXJ0eSBtdXN0IGJlIHBoZXQtaW8gaW5zdHJ1bWVudGVkIGlmIHRoZSByYW5nZSBpcycgKTtcbiAgICB9XG5cbiAgICBjb25zdCByYW5nZVByb3BlcnR5T2JzZXJ2ZXIgPSAoKSA9PiB7XG4gICAgICB2YWxpZGF0ZSggdGhpcy52YWx1ZSwgdGhpcy52YWx1ZVZhbGlkYXRvciwgVkFMSURBVEVfT1BUSU9OU19GQUxTRSApO1xuICAgIH07XG4gICAgYXNzZXJ0ICYmIHRoaXMucmFuZ2VQcm9wZXJ0eS5saW5rKCByYW5nZVByb3BlcnR5T2JzZXJ2ZXIgKTtcblxuICAgIC8vIEZvciBQaEVULWlPIFN0YXRlLCBtYWtlIHN1cmUgdGhhdCBib3RoIHRoZSByYW5nZSBhbmQgdGhpcyB2YWx1ZSBhcmUgY29ycmVjdCBiZWZvcmUgZmlyaW5nIG5vdGlmaWNhdGlvbnMgKHdoZXJlIHRoZSBhc3NlcnRpb25zIGFyZSkuXG4gICAgdGhpcy5yYW5nZVByb3BlcnR5LmFkZFBoZXRpb1N0YXRlRGVwZW5kZW5jaWVzKCBbIHRoaXMgXSApO1xuICAgIHRoaXMuYWRkUGhldGlvU3RhdGVEZXBlbmRlbmNpZXMoIFsgdGhpcy5yYW5nZVByb3BlcnR5IF0gKTtcblxuICAgIC8vIHZlcmlmeSB0aGF0IHZhbGlkVmFsdWVzIG1lZXQgb3RoZXIgTnVtYmVyUHJvcGVydHktc3BlY2lmaWMgdmFsaWRhdGlvbiBjcml0ZXJpYVxuICAgIGlmICggb3B0aW9ucy52YWxpZFZhbHVlcyAmJiB0aGlzLnZhbGlkYXRlTnVtYmVyQW5kUmFuZ2VQcm9wZXJ0eSApIHtcbiAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG9wdGlvbnMudmFsaWRWYWx1ZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgIGNvbnN0IHZhbGlkVmFsdWUgPSBvcHRpb25zLnZhbGlkVmFsdWVzWyBpIF07XG4gICAgICAgIHRoaXMudmFsaWRhdGVOdW1iZXJBbmRSYW5nZVByb3BlcnR5KCB2YWxpZFZhbHVlICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5kaXNwb3NlTnVtYmVyUHJvcGVydHkgPSAoKSA9PiB7XG4gICAgICBpZiAoIG93bnNSYW5nZVByb3BlcnR5ICkge1xuICAgICAgICB0aGlzLnJhbmdlUHJvcGVydHkuZGlzcG9zZSgpO1xuICAgICAgfVxuICAgICAgZWxzZSBpZiAoIGFzc2VydCApIHtcbiAgICAgICAgdGhpcy5yYW5nZVByb3BlcnR5LnVubGluayggcmFuZ2VQcm9wZXJ0eU9ic2VydmVyICk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMucmVzZXROdW1iZXJQcm9wZXJ0eSA9ICgpID0+IHtcbiAgICAgIG93bnNSYW5nZVByb3BlcnR5ICYmIHRoaXMucmFuZ2VQcm9wZXJ0eS5yZXNldCgpO1xuICAgIH07XG4gIH1cblxuICBwdWJsaWMgZ2V0IHJhbmdlKCk6IFJhbmdlIHtcbiAgICByZXR1cm4gdGhpcy5yYW5nZVByb3BlcnR5LnZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGZ1bmN0aW9uIGZvciBzZXR0aW5nIHRoZSByYW5nZVByb3BlcnR5LiBOb3RlOiBiZSBjYXJlZnVsIHVzaW5nIHRoaXMgZnVuY3Rpb24sIGFzIHZhbGlkYXRpb24gd2lsbCBvY2N1clxuICAgKiBpbW1lZGlhdGVseSwgYW5kIGlmIHRoZSB2YWx1ZSBpcyBvdXRzaWRlIG9mIHRoaXMgbmV3IFJhbmdlIGFuIGVycm9yIHdpbGwgb2NjdXIuIFNlZSB0aGlzLnNldFZhbHVlQW5kUmFuZ2UoKSBmb3JcbiAgICogIHdheSB0byBzZXQgYm90aCBhdCBvbmNlIHdpdGhvdXQgYXNzZXJ0aW9uIGVycm9ycy5cbiAgICovXG4gIHB1YmxpYyBzZXQgcmFuZ2UoIHJhbmdlOiBSYW5nZSApIHtcbiAgICB0aGlzLnJhbmdlUHJvcGVydHkudmFsdWUgPSByYW5nZTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc2V0VmFsdWVBbmRSYW5nZSgpOyAvLyBldmVuIGlmIHdlIGRvbid0IG93biB0aGUgcmFuZ2UsIHJlc2V0IHRoZW0gdG9nZXRoZXIgdG8gcHJldmVudCBhc3NlcnRpb25zLCBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvNDI3XG4gICAgc3VwZXIucmVzZXQoKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xuICAgIHRoaXMuZGlzcG9zZU51bWJlclByb3BlcnR5KCk7XG4gICAgc3VwZXIuZGlzcG9zZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFuIGF0b21pYyBzZXR0aW5nIGZ1bmN0aW9uIHRoYXQgd2lsbCBzZXQgYSByYW5nZSBhbmQgYSB2YWx1ZSBhdCB0aGUgc2FtZSB0aW1lLCB0byBtYWtlIHN1cmUgdGhhdCB2YWxpZGF0aW9uIGRvZXNcbiAgICogbm90IGZhaWwgYWZ0ZXIgb25lIGJ1dCBoYXMgYmVlbiBzZXQgbm90IHRoZSBvdGhlci5cbiAgICovXG4gIHB1YmxpYyBzZXRWYWx1ZUFuZFJhbmdlKCB2YWx1ZTogbnVtYmVyLCByYW5nZTogUmFuZ2UgKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcmFuZ2UuY29udGFpbnMoIHZhbHVlICksIGB2YWx1ZSAke3ZhbHVlfSBpcyBub3QgaW4gcmFuZ2UgWyR7cmFuZ2UubWlufSwke3JhbmdlLm1heH1dYCApO1xuXG4gICAgLy8gZGVmZXIgbm90aWZpY2F0aW9uIG9mIGxpc3RlbmVyc1xuICAgIHRoaXMuc2V0RGVmZXJyZWQoIHRydWUgKTtcbiAgICB0aGlzLnJhbmdlUHJvcGVydHkuc2V0RGVmZXJyZWQoIHRydWUgKTtcblxuICAgIC8vIHNldCB2YWx1ZXNcbiAgICB0aGlzLnNldCggdmFsdWUgKTtcbiAgICB0aGlzLnJhbmdlUHJvcGVydHkuc2V0KCByYW5nZSApO1xuXG4gICAgLy8gbm90aWZ5IGxpc3RlbmVycyBpZiB0aGUgdmFsdWVzIGhhdmUgY2hhbmdlZFxuICAgIGNvbnN0IG5vdGlmeVZhbHVlTGlzdGVuZXJzID0gdGhpcy5zZXREZWZlcnJlZCggZmFsc2UgKTtcbiAgICBjb25zdCBub3RpZnlSYW5nZUxpc3RlbmVycyA9IHRoaXMucmFuZ2VQcm9wZXJ0eS5zZXREZWZlcnJlZCggZmFsc2UgKTtcbiAgICBub3RpZnlWYWx1ZUxpc3RlbmVycyAmJiBub3RpZnlWYWx1ZUxpc3RlbmVycygpO1xuICAgIG5vdGlmeVJhbmdlTGlzdGVuZXJzICYmIG5vdGlmeVJhbmdlTGlzdGVuZXJzKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSB2YWx1ZSBhbmQgcmFuZ2UgYXRvbWljYWxseS5cbiAgICogSWYgeW91IHVzZSBzZXRWYWx1ZUFuZFJhbmdlLCB5b3UnbGwgbGlrZWx5IG5lZWQgdG8gdXNlIHRoaXMgaW5zdGVhZCBvZiByZXNldC5cbiAgICovXG4gIHB1YmxpYyByZXNldFZhbHVlQW5kUmFuZ2UoKTogdm9pZCB7XG4gICAgdGhpcy5zZXRWYWx1ZUFuZFJhbmdlKCB0aGlzLmluaXRpYWxWYWx1ZSwgdGhpcy5yYW5nZVByb3BlcnR5LmluaXRpYWxWYWx1ZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBwYXJlbnQgc3RhdGUgYW5kIGFwcGVuZCBOdW1iZXJQcm9wZXJ0eS1zcGVjaWZpYyBtZXRhZGF0YSB0byBpdC5cbiAgICovXG4gIHB1YmxpYyB0b1N0YXRlT2JqZWN0KCk6IE51bWJlclByb3BlcnR5U3RhdGUge1xuICAgIGNvbnN0IHBhcmVudFN0YXRlT2JqZWN0ID0gUHJvcGVydHlJT0ltcGwudG9TdGF0ZU9iamVjdCggdGhpcyApO1xuXG4gICAgcGFyZW50U3RhdGVPYmplY3QubnVtYmVyVHlwZSA9IHRoaXMubnVtYmVyVHlwZTtcbiAgICBwYXJlbnRTdGF0ZU9iamVjdC5yYW5nZSA9IFJhbmdlLlJhbmdlSU8udG9TdGF0ZU9iamVjdCggdGhpcy5yYW5nZVByb3BlcnR5LnZhbHVlICk7XG5cbiAgICBjb25zdCBoYXNSYW5nZVBoZXRpb0lEID0gdGhpcy5yYW5nZVByb3BlcnR5ICYmIHRoaXMucmFuZ2VQcm9wZXJ0eS5pc1BoZXRpb0luc3RydW1lbnRlZCgpO1xuICAgIHBhcmVudFN0YXRlT2JqZWN0LnJhbmdlUGhldGlvSUQgPSBoYXNSYW5nZVBoZXRpb0lEID8gdGhpcy5yYW5nZVByb3BlcnR5LnRhbmRlbS5waGV0aW9JRCA6IG51bGw7XG5cbiAgICByZXR1cm4gcGFyZW50U3RhdGVPYmplY3Q7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIE51bWJlclByb3BlcnR5SU8gPSBuZXcgSU9UeXBlPE51bWJlclByb3BlcnR5LCBOdW1iZXJQcm9wZXJ0eVN0YXRlPiggJ051bWJlclByb3BlcnR5SU8nLCB7XG4gICAgdmFsdWVUeXBlOiBOdW1iZXJQcm9wZXJ0eSxcbiAgICBzdXBlcnR5cGU6IFByb3BlcnR5SU9JbXBsLFxuXG4gICAgcGFyYW1ldGVyVHlwZXM6IFsgTnVtYmVySU8gXSxcbiAgICBkb2N1bWVudGF0aW9uOiBgRXh0ZW5kcyBQcm9wZXJ0eUlPIHRvIGFkZCB2YWx1ZXMgZm9yIHRoZSBudW1lcmljIHJhbmdlICggbWluLCBtYXggKSBhbmQgbnVtYmVyVHlwZSAoICcke1xuICAgICAgVkFMSURfTlVNQkVSX1RZUEVTLmpvaW4oICdcXCcgfCBcXCcnICl9JyApYCxcbiAgICB0b1N0YXRlT2JqZWN0OiBudW1iZXJQcm9wZXJ0eSA9PiB7XG4gICAgICByZXR1cm4gbnVtYmVyUHJvcGVydHkudG9TdGF0ZU9iamVjdCgpO1xuICAgIH0sXG4gICAgYXBwbHlTdGF0ZTogKCBudW1iZXJQcm9wZXJ0eSwgc3RhdGVPYmplY3QgKSA9PiB7XG4gICAgICAvLyBub3RoaW5nIHRvIGRvIGhlcmUgZm9yIHJhbmdlLCBiZWNhdXNlIGluIG9yZGVyIHRvIHN1cHBvcnQgcmFuZ2UsIHRoaXMgTnVtYmVyUHJvcGVydHkncyByYW5nZVByb3BlcnR5IG11c3QgYmUgaW5zdHJ1bWVudGVkLlxuXG4gICAgICBQcm9wZXJ0eUlPSW1wbC5hcHBseVN0YXRlKCBudW1iZXJQcm9wZXJ0eSwgc3RhdGVPYmplY3QgKTtcbiAgICB9LFxuICAgIHN0YXRlU2NoZW1hOiB7XG4gICAgICBudW1iZXJUeXBlOiBTdHJpbmdJTyxcbiAgICAgIHJhbmdlOiBSYW5nZS5SYW5nZUlPLFxuICAgICAgcmFuZ2VQaGV0aW9JRDogTnVsbGFibGVJTyggU3RyaW5nSU8gKSxcbiAgICAgIHZhbHVlOiBOdW1iZXJJT1xuICAgIH1cbiAgfSApO1xufVxuXG5heG9uLnJlZ2lzdGVyKCAnTnVtYmVyUHJvcGVydHknLCBOdW1iZXJQcm9wZXJ0eSApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUE0Qix1QkFBdUI7QUFFL0QsT0FB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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/createObservableArray.js
// Copyright 2020-2023, University of Colorado Boulder

// createObservableArray conforms to the Proxy interface, which is polluted with `any` types.  Therefore we disable
// this rule for this file.
/* eslint-disable @typescript-eslint/no-explicit-any */
/**
 * Creates an object that has the same API as an Array, but also supports notifications and PhET-iO. When an item
 * is added or removed, the lengthProperty changes before elementAddedEmitter or elementRemovedEmitter emit.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */













const createObservableArray = providedOptions => {
  js_assertMutuallyExclusiveOptions(providedOptions, ['length'], ['elements']);
  const options = optionize()({
    // Also supports phetioType or validator options.  If both are supplied, only the phetioType is respected

    length: 0,
    elements: [],
    tandem: js_Tandem.OPTIONAL,
    phetioFeatured: false
  }, providedOptions);
  let emitterParameterOptions = null;
  if (options.phetioType) {
    assert && assert(options.phetioType.typeName.startsWith('ObservableArrayIO'));
    emitterParameterOptions = {
      name: 'value',
      phetioType: options.phetioType.parameterTypes[0]
    };
  }
  // NOTE: Improve with Validation
  else if (!Validation.getValidatorValidationError(options)) {
    const validator = _.pick(options, Validation.VALIDATOR_KEYS);
    emitterParameterOptions = js_merge({
      name: 'value'
    }, validator);
  } else {
    emitterParameterOptions = js_merge({
      name: 'value'
    }, {
      isValidValue: _.stubTrue
    });
  }

  // notifies when an element has been added
  const elementAddedEmitter = new Emitter({
    tandem: options.tandem.createTandem('elementAddedEmitter'),
    parameters: [emitterParameterOptions],
    phetioReadOnly: true,
    phetioFeatured: options.phetioFeatured
  });

  // notifies when an element has been removed
  const elementRemovedEmitter = new Emitter({
    tandem: options.tandem.createTandem('elementRemovedEmitter'),
    parameters: [emitterParameterOptions],
    phetioReadOnly: true,
    phetioFeatured: options.phetioFeatured
  });

  // observe this, but don't set it. Updated when Array modifiers are called (except array.length=...)
  const lengthProperty = new NumberProperty(0, {
    numberType: 'Integer',
    tandem: options.tandem.createTandem('lengthProperty'),
    phetioReadOnly: true,
    phetioFeatured: options.phetioFeatured
  });

  // The underlying array which is wrapped by the Proxy
  const targetArray = [];

  // Verify that lengthProperty is updated before listeners are notified, but not when setting PhET-iO State,
  // This is because we cannot specify ordering dependencies between Properties and ObservableArrays,
  // TODO: Maybe this can be improved when we have better support for this in https://github.com/phetsims/phet-io/issues/1661
  assert && elementAddedEmitter.addListener(() => {
    if (assert) {
      if (!_.hasIn(window, 'phet.joist.sim') || !phet.joist.sim.isSettingPhetioStateProperty.value) {
        assert && assert(lengthProperty.value === targetArray.length, 'lengthProperty out of sync while adding element');
      }
    }
  });
  assert && elementRemovedEmitter.addListener(() => {
    if (assert) {
      if (!_.hasIn(window, 'phet.joist.sim') || !phet.joist.sim.isSettingPhetioStateProperty.value) {
        assert && assert(lengthProperty.value === targetArray.length, 'lengthProperty out of sync while removing element');
      }
    }
  });

  // The Proxy which will intercept method calls and trigger notifications.
  const observableArray = new Proxy(targetArray, {
    /**
     * Trap for getting a property or method.
     * @param array - the targetArray
     * @param key
     * @param receiver
     * @returns - the requested value
     */
    get: function (array, key, receiver) {
      assert && assert(array === targetArray, 'array should match the targetArray');
      if (methods.hasOwnProperty(key)) {
        return methods[key];
      } else {
        return Reflect.get(array, key, receiver);
      }
    },
    /**
     * Trap for setting a property value.
     * @param array - the targetArray
     * @param key
     * @param newValue
     * @returns - success
     */
    set: function (array, key, newValue) {
      assert && assert(array === targetArray, 'array should match the targetArray');
      const oldValue = array[key];
      let removedElements = null;

      // See which items are removed
      if (key === 'length') {
        removedElements = array.slice(newValue);
      }
      const returnValue = Reflect.set(array, key, newValue);

      // If we're using the bracket operator [index] of Array, then parse the index between the brackets.
      const numberKey = Number(key);
      if (Number.isInteger(numberKey) && numberKey >= 0 && oldValue !== newValue) {
        lengthProperty.value = array.length;
        if (oldValue !== undefined) {
          elementRemovedEmitter.emit(array[key]);
        }
        if (newValue !== undefined) {
          elementAddedEmitter.emit(newValue);
        }
      } else if (key === 'length') {
        lengthProperty.value = newValue;
        assert && assert(removedElements, 'removedElements should be defined for key===length');
        removedElements && removedElements.forEach(element => elementRemovedEmitter.emit(element));
      }
      return returnValue;
    },
    /**
     * This is the trap for the delete operator.
     */
    deleteProperty: function (array, key) {
      assert && assert(array === targetArray, 'array should match the targetArray');

      // If we're using the bracket operator [index] of Array, then parse the index between the brackets.
      const numberKey = Number(key);
      let removed;
      if (Number.isInteger(numberKey) && numberKey >= 0) {
        removed = array[key];
      }
      const returnValue = Reflect.deleteProperty(array, key);
      if (removed !== undefined) {
        elementRemovedEmitter.emit(removed);
      }
      return returnValue;
    }
  });
  observableArray.targetArray = targetArray;
  observableArray.elementAddedEmitter = elementAddedEmitter;
  observableArray.elementRemovedEmitter = elementRemovedEmitter;
  observableArray.lengthProperty = lengthProperty;
  const init = () => {
    if (options.length >= 0) {
      observableArray.length = options.length;
    }
    if (options.elements.length > 0) {
      Array.prototype.push.apply(observableArray, options.elements);
    }
  };
  init();

  //TODO https://github.com/phetsims/axon/issues/334 Move to "prototype" above or drop support
  observableArray.reset = () => {
    observableArray.length = 0;
    init();
  };

  /******************************************
   * PhET-iO support
   *******************************************/
  if (options.tandem.supplied) {
    assert && assert(options.phetioType);
    observableArray.phetioElementType = options.phetioType.parameterTypes[0];

    // for managing state in phet-io
    // Use the same tandem and phetioState options so it can "masquerade" as the real object.  When PhetioObject is a mixin this can be changed.
    observableArray._observableArrayPhetioObject = new ObservableArrayPhetioObject(observableArray, options);
  }
  return observableArray;
};

/**
 * Manages state save/load. This implementation uses Proxy and hence cannot be instrumented as a PhetioObject.  This type
 * provides that functionality.
 */
class ObservableArrayPhetioObject extends PhetioObject {
  // internal, don't use

  /**
   * @param observableArray
   * @param [providedOptions] - same as the options to the parent ObservableArrayDef
   */
  constructor(observableArray, providedOptions) {
    super(providedOptions);
    this.observableArray = observableArray;
  }
}

// Methods shared by all ObservableArrayDef instances
const methods = {
  /******************************************
   * Overridden Array methods
   *******************************************/

  pop(...args) {
    const thisArray = this;
    const initialLength = thisArray.targetArray.length;
    const returnValue = Array.prototype.pop.apply(thisArray.targetArray, args);
    thisArray.lengthProperty.value = thisArray.length;
    initialLength > 0 && thisArray.elementRemovedEmitter.emit(returnValue);
    return returnValue;
  },
  shift(...args) {
    const thisArray = this;
    const initialLength = thisArray.targetArray.length;
    const returnValue = Array.prototype.shift.apply(thisArray.targetArray, args);
    thisArray.lengthProperty.value = thisArray.length;
    initialLength > 0 && thisArray.elementRemovedEmitter.emit(returnValue);
    return returnValue;
  },
  push(...args) {
    const thisArray = this;
    const returnValue = Array.prototype.push.apply(thisArray.targetArray, args);
    thisArray.lengthProperty.value = thisArray.length;
    for (let i = 0; i < arguments.length; i++) {
      thisArray.elementAddedEmitter.emit(args[i]);
    }
    return returnValue;
  },
  unshift(...args) {
    const thisArray = this;
    const returnValue = Array.prototype.unshift.apply(thisArray.targetArray, args);
    thisArray.lengthProperty.value = thisArray.length;
    for (let i = 0; i < args.length; i++) {
      thisArray.elementAddedEmitter.emit(args[i]);
    }
    return returnValue;
  },
  splice(...args) {
    const thisArray = this;
    const returnValue = Array.prototype.splice.apply(thisArray.targetArray, args);
    thisArray.lengthProperty.value = thisArray.length;
    const deletedElements = returnValue;
    for (let i = 2; i < args.length; i++) {
      thisArray.elementAddedEmitter.emit(args[i]);
    }
    deletedElements.forEach(deletedElement => thisArray.elementRemovedEmitter.emit(deletedElement));
    return returnValue;
  },
  copyWithin(...args) {
    const thisArray = this;
    const before = thisArray.targetArray.slice();
    const returnValue = Array.prototype.copyWithin.apply(thisArray.targetArray, args);
    reportDifference(before, thisArray);
    return returnValue;
  },
  fill(...args) {
    const thisArray = this;
    const before = thisArray.targetArray.slice();
    const returnValue = Array.prototype.fill.apply(thisArray.targetArray, args);
    reportDifference(before, thisArray);
    return returnValue;
  },
  /******************************************
   * For compatibility with ObservableArrayDef
   * TODO https://github.com/phetsims/axon/issues/334 consider deleting after migration
   * TODO https://github.com/phetsims/axon/issues/334 if not deleted, rename 'Item' with 'Element'
   *******************************************/
  get: function (index) {
    return this[index];
  },
  addItemAddedListener: function (listener) {
    this.elementAddedEmitter.addListener(listener);
  },
  removeItemAddedListener: function (listener) {
    this.elementAddedEmitter.removeListener(listener);
  },
  addItemRemovedListener: function (listener) {
    this.elementRemovedEmitter.addListener(listener);
  },
  removeItemRemovedListener: function (listener) {
    this.elementRemovedEmitter.removeListener(listener);
  },
  add: function (element) {
    this.push(element);
  },
  addAll: function (elements) {
    this.push(...elements);
  },
  remove: function (element) {
    js_arrayRemove(this, element);
  },
  removeAll: function (elements) {
    elements.forEach(element => js_arrayRemove(this, element));
  },
  clear: function () {
    while (this.length > 0) {
      this.pop();
    }
  },
  count: function (predicate) {
    let count = 0;
    for (let i = 0; i < this.length; i++) {
      if (predicate(this[i])) {
        count++;
      }
    }
    return count;
  },
  find: function (predicate, fromIndex) {
    assert && fromIndex !== undefined && assert(typeof fromIndex === 'number', 'fromIndex must be numeric, if provided');
    assert && typeof fromIndex === 'number' && assert(fromIndex >= 0 && fromIndex < this.length, `fromIndex out of bounds: ${fromIndex}`);
    return _.find(this, predicate, fromIndex);
  },
  shuffle: function (random) {
    assert && assert(random, 'random must be supplied');

    // preserve the same _array reference in case any clients got a reference to it with getArray()
    const shuffled = random.shuffle(this);

    // Act on the targetArray so that removal and add notifications aren't sent.
    this.targetArray.length = 0;
    Array.prototype.push.apply(this.targetArray, shuffled);
  },
  // TODO https://github.com/phetsims/axon/issues/334 This also seems important to eliminate
  getArrayCopy: function () {
    return this.slice();
  },
  dispose: function () {
    const thisArray = this;
    thisArray.elementAddedEmitter.dispose();
    thisArray.elementRemovedEmitter.dispose();
    thisArray.lengthProperty.dispose();
    thisArray._observableArrayPhetioObject && thisArray._observableArrayPhetioObject.dispose();
  },
  /******************************************
   * PhET-iO
   *******************************************/
  toStateObject: function () {
    return {
      array: this.map(item => this.phetioElementType.toStateObject(item))
    };
  },
  applyState: function (stateObject) {
    this.length = 0;
    const elements = stateObject.array.map(paramStateObject => this.phetioElementType.fromStateObject(paramStateObject));
    this.push(...elements);
  }
};

/**
 * For copyWithin and fill, which have more complex behavior, we treat the array as a black box, making a shallow copy
 * before the operation in order to identify what has been added and removed.
 */
const reportDifference = (shallowCopy, observableArray) => {
  const before = shallowCopy;
  const after = observableArray.targetArray.slice();
  for (let i = 0; i < before.length; i++) {
    const beforeElement = before[i];
    const afterIndex = after.indexOf(beforeElement);
    if (afterIndex >= 0) {
      before.splice(i, 1);
      after.splice(afterIndex, 1);
      i--;
    }
  }
  before.forEach(element => observableArray.elementRemovedEmitter.emit(element));
  after.forEach(element => observableArray.elementAddedEmitter.emit(element));
};

// {Map.<cacheKey:function(new:ObservableArrayIO), function(new:ObservableArrayIO)>} - Cache each parameterized ObservableArrayIO
// based on the parameter type, so that it is only created once.
const createObservableArray_cache = new Map();

/**
 * ObservableArrayIO is the IO Type for ObservableArrayDef. It delegates most of its implementation to ObservableArrayDef.
 * Instead of being a parametric type, it leverages the phetioElementType on ObservableArrayDef.
 */
const ObservableArrayIO = parameterType => {
  if (!createObservableArray_cache.has(parameterType)) {
    createObservableArray_cache.set(parameterType, new IOType(`ObservableArrayIO<${parameterType.typeName}>`, {
      valueType: ObservableArrayPhetioObject,
      parameterTypes: [parameterType],
      toStateObject: observableArrayPhetioObject => observableArrayPhetioObject.observableArray.toStateObject(),
      applyState: (observableArrayPhetioObject, state) => observableArrayPhetioObject.observableArray.applyState(state),
      stateSchema: {
        array: types_ArrayIO(parameterType)
      }
    }));
  }
  return createObservableArray_cache.get(parameterType);
};
createObservableArray.ObservableArrayIO = ObservableArrayIO;
js_axon.register('createObservableArray', createObservableArray);
/* harmony default export */ const js_createObservableArray = ((/* unused pure expression or super */ null && (createObservableArray)));

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcnJheVJlbW92ZSIsImFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyIsIm1lcmdlIiwib3B0aW9uaXplIiwiUGhldGlvT2JqZWN0IiwiVGFuZGVtIiwiQXJyYXlJTyIsIklPVHlwZSIsImF4b24iLCJFbWl0dGVyIiwiTnVtYmVyUHJvcGVydHkiLCJWYWxpZGF0aW9uIiwiY3JlYXRlT2JzZXJ2YWJsZUFycmF5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImxlbmd0aCIsImVsZW1lbnRzIiwidGFuZGVtIiwiT1BUSU9OQUwiLCJwaGV0aW9GZWF0dXJlZCIsImVtaXR0ZXJQYXJhbWV0ZXJPcHRpb25zIiwicGhldGlvVHlwZSIsImFzc2VydCIsInR5cGVOYW1lIiwic3RhcnRzV2l0aCIsIm5hbWUiLCJwYXJhbWV0ZXJUeXBlcyIsImdldFZhbGlkYXRvclZhbGlkYXRpb25FcnJvciIsInZhbGlkYXRvciIsIl8iLCJwaWNrIiwiVkFMSURBVE9SX0tFWVMiLCJpc1ZhbGlkVmFsdWUiLCJzdHViVHJ1ZSIsImVsZW1lbnRBZGRlZEVtaXR0ZXIiLCJjcmVhdGVUYW5kZW0iLCJwYXJhbWV0ZXJzIiwicGhldGlvUmVhZE9ubHkiLCJlbGVtZW50UmVtb3ZlZEVtaXR0ZXIiLCJsZW5ndGhQcm9wZXJ0eSIsIm51bWJlclR5cGUiLCJ0YXJnZXRBcnJheSIsImFkZExpc3RlbmVyIiwiaGFzSW4iLCJ3aW5kb3ciLCJwaGV0Iiwiam9pc3QiLCJzaW0iLCJpc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5IiwidmFsdWUiLCJvYnNlcnZhYmxlQXJyYXkiLCJQcm94eSIsImdldCIsImFycmF5Iiwia2V5IiwicmVjZWl2ZXIiLCJtZXRob2RzIiwiaGFzT3duUHJvcGVydHkiLCJSZWZsZWN0Iiwic2V0IiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsInJlbW92ZWRFbGVtZW50cyIsInNsaWNlIiwicmV0dXJuVmFsdWUiLCJudW1iZXJLZXkiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJ1bmRlZmluZWQiLCJlbWl0IiwiZm9yRWFjaCIsImVsZW1lbnQiLCJkZWxldGVQcm9wZXJ0eSIsInJlbW92ZWQiLCJpbml0IiwiQXJyYXkiLCJwcm90b3R5cGUiLCJwdXNoIiwiYXBwbHkiLCJyZXNldCIsInN1cHBsaWVkIiwicGhldGlvRWxlbWVudFR5cGUiLCJfb2JzZXJ2YWJsZUFycmF5UGhldGlvT2JqZWN0IiwiT2JzZXJ2YWJsZUFycmF5UGhldGlvT2JqZWN0IiwiY29uc3RydWN0b3IiLCJwb3AiLCJhcmdzIiwidGhpc0FycmF5IiwiaW5pdGlhbExlbmd0aCIsInNoaWZ0IiwiaSIsImFyZ3VtZW50cyIsInVuc2hpZnQiLCJzcGxpY2UiLCJkZWxldGVkRWxlbWVudHMiLCJkZWxldGVkRWxlbWVudCIsImNvcHlXaXRoaW4iLCJiZWZvcmUiLCJyZXBvcnREaWZmZXJlbmNlIiwiZmlsbCIsImluZGV4IiwiYWRkSXRlbUFkZGVkTGlzdGVuZXIiLCJsaXN0ZW5lciIsInJlbW92ZUl0ZW1BZGRlZExpc3RlbmVyIiwicmVtb3ZlTGlzdGVuZXIiLCJhZGRJdGVtUmVtb3ZlZExpc3RlbmVyIiwicmVtb3ZlSXRlbVJlbW92ZWRMaXN0ZW5lciIsImFkZCIsImFkZEFsbCIsInJlbW92ZSIsInJlbW92ZUFsbCIsImNsZWFyIiwiY291bnQiLCJwcmVkaWNhdGUiLCJmaW5kIiwiZnJvbUluZGV4Iiwic2h1ZmZsZSIsInJhbmRvbSIsInNodWZmbGVkIiwiZ2V0QXJyYXlDb3B5IiwiZGlzcG9zZSIsInRvU3RhdGVPYmplY3QiLCJtYXAiLCJpdGVtIiwiYXBwbHlTdGF0ZSIsInN0YXRlT2JqZWN0IiwicGFyYW1TdGF0ZU9iamVjdCIsImZyb21TdGF0ZU9iamVjdCIsInNoYWxsb3dDb3B5IiwiYWZ0ZXIiLCJiZWZvcmVFbGVtZW50IiwiYWZ0ZXJJbmRleCIsImluZGV4T2YiLCJjYWNoZSIsIk1hcCIsIk9ic2VydmFibGVBcnJheUlPIiwicGFyYW1ldGVyVHlwZSIsImhhcyIsInZhbHVlVHlwZSIsIm9ic2VydmFibGVBcnJheVBoZXRpb09iamVjdCIsInN0YXRlIiwic3RhdGVTY2hlbWEiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbImNyZWF0ZU9ic2VydmFibGVBcnJheS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLy8gY3JlYXRlT2JzZXJ2YWJsZUFycmF5IGNvbmZvcm1zIHRvIHRoZSBQcm94eSBpbnRlcmZhY2UsIHdoaWNoIGlzIHBvbGx1dGVkIHdpdGggYGFueWAgdHlwZXMuICBUaGVyZWZvcmUgd2UgZGlzYWJsZVxuLy8gdGhpcyBydWxlIGZvciB0aGlzIGZpbGUuXG4vKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovXG4vKipcbiAqIENyZWF0ZXMgYW4gb2JqZWN0IHRoYXQgaGFzIHRoZSBzYW1lIEFQSSBhcyBhbiBBcnJheSwgYnV0IGFsc28gc3VwcG9ydHMgbm90aWZpY2F0aW9ucyBhbmQgUGhFVC1pTy4gV2hlbiBhbiBpdGVtXG4gKiBpcyBhZGRlZCBvciByZW1vdmVkLCB0aGUgbGVuZ3RoUHJvcGVydHkgY2hhbmdlcyBiZWZvcmUgZWxlbWVudEFkZGVkRW1pdHRlciBvciBlbGVtZW50UmVtb3ZlZEVtaXR0ZXIgZW1pdC5cbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICovXG5cbmltcG9ydCBhcnJheVJlbW92ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvYXJyYXlSZW1vdmUuanMnO1xuaW1wb3J0IFN0cmljdE9taXQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL1N0cmljdE9taXQuanMnO1xuaW1wb3J0IGFzc2VydE11dHVhbGx5RXhjbHVzaXZlT3B0aW9ucyBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvYXNzZXJ0TXV0dWFsbHlFeGNsdXNpdmVPcHRpb25zLmpzJztcbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xuaW1wb3J0IG9wdGlvbml6ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBQaGV0aW9PYmplY3QgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XG5pbXBvcnQgVGFuZGVtIGZyb20gJy4uLy4uL3RhbmRlbS9qcy9UYW5kZW0uanMnO1xuaW1wb3J0IEFycmF5SU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0FycmF5SU8uanMnO1xuaW1wb3J0IElPVHlwZSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvSU9UeXBlLmpzJztcbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgRW1pdHRlciBmcm9tICcuL0VtaXR0ZXIuanMnO1xuaW1wb3J0IE51bWJlclByb3BlcnR5IGZyb20gJy4vTnVtYmVyUHJvcGVydHkuanMnO1xuaW1wb3J0IFZhbGlkYXRpb24gZnJvbSAnLi9WYWxpZGF0aW9uLmpzJztcbmltcG9ydCBURW1pdHRlciBmcm9tICcuL1RFbWl0dGVyLmpzJztcblxuLy8gTk9URTogSXMgdGhpcyB1cC10by1kYXRlIGFuZCBjb3JyZWN0PyBMb29rcyBsaWtlIHdlIHRhY2sgb24gcGhldC1pbyBzdHVmZiBkZXBlbmRpbmcgb24gdGhlIHBoZXRpb1R5cGUuXG50eXBlIE9ic2VydmFibGVBcnJheUxpc3RlbmVyPFQ+ID0gKCBlbGVtZW50OiBUICkgPT4gdm9pZDtcbnR5cGUgUHJlZGljYXRlPFQ+ID0gKCBlbGVtZW50OiBUICkgPT4gYm9vbGVhbjtcbnR5cGUgT2JzZXJ2YWJsZUFycmF5U3RhdGVPYmplY3Q8VD4gPSB7IGFycmF5OiBhbnlbXSB9OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIC0tIGZ1dHVyZXByb29mIHR5cGUgcGFyYW0gaWYgd2UgdHlwZSB0aGlzXG50eXBlIEZha2VSYW5kb208VD4gPSB7IHNodWZmbGU6ICggYXJyOiBUW10gKSA9PiBUW10gfTsgLy8gLy8gV2UgZG9uJ3QgaW1wb3J0IGJlY2F1c2Ugb2YgdGhlIHJlcG8gZGVwZW5kZW5jeVxuZXhwb3J0IHR5cGUgT2JzZXJ2YWJsZUFycmF5T3B0aW9uczxUPiA9IHtcbiAgbGVuZ3RoPzogbnVtYmVyO1xuICBlbGVtZW50cz86IFRbXTtcbiAgdGFuZGVtPzogVGFuZGVtO1xuXG4gIC8vIFBvc3NpYmx5IHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBFbWl0dGVyc1xuICBwaGV0aW9UeXBlPzogSU9UeXBlO1xuICBwaGV0aW9TdGF0ZT86IGJvb2xlYW47XG4gIHBoZXRpb0RvY3VtZW50YXRpb24/OiBzdHJpbmc7XG4gIHBoZXRpb0ZlYXR1cmVkPzogYm9vbGVhbjtcbn07XG50eXBlIE9ic2VydmFibGVBcnJheTxUPiA9IHtcbiAgZ2V0OiAoIGluZGV4OiBudW1iZXIgKSA9PiBUO1xuICBhZGRJdGVtQWRkZWRMaXN0ZW5lcjogKCBsaXN0ZW5lcjogT2JzZXJ2YWJsZUFycmF5TGlzdGVuZXI8VD4gKSA9PiB2b2lkO1xuICByZW1vdmVJdGVtQWRkZWRMaXN0ZW5lcjogKCBsaXN0ZW5lcjogT2JzZXJ2YWJsZUFycmF5TGlzdGVuZXI8VD4gKSA9PiB2b2lkO1xuICBhZGRJdGVtUmVtb3ZlZExpc3RlbmVyOiAoIGxpc3RlbmVyOiBPYnNlcnZhYmxlQXJyYXlMaXN0ZW5lcjxUPiApID0+IHZvaWQ7XG4gIHJlbW92ZUl0ZW1SZW1vdmVkTGlzdGVuZXI6ICggbGlzdGVuZXI6IE9ic2VydmFibGVBcnJheUxpc3RlbmVyPFQ+ICkgPT4gdm9pZDtcbiAgYWRkOiAoIGVsZW1lbnQ6IFQgKSA9PiB2b2lkO1xuICBhZGRBbGw6ICggZWxlbWVudHM6IFRbXSApID0+IHZvaWQ7XG4gIHJlbW92ZTogKCBlbGVtZW50OiBUICkgPT4gdm9pZDtcbiAgcmVtb3ZlQWxsOiAoIGVsZW1lbnRzOiBUW10gKSA9PiB2b2lkO1xuICBjbGVhcjogKCkgPT4gdm9pZDtcbiAgY291bnQ6ICggcHJlZGljYXRlOiBQcmVkaWNhdGU8VD4gKSA9PiBudW1iZXI7XG4gIGZpbmQ6ICggcHJlZGljYXRlOiBQcmVkaWNhdGU8VD4sIGZyb21JbmRleD86IG51bWJlciApID0+IFQgfCB1bmRlZmluZWQ7XG4gIHNodWZmbGU6ICggcmFuZG9tOiBGYWtlUmFuZG9tPFQ+ICkgPT4gdm9pZDtcbiAgZ2V0QXJyYXlDb3B5OiAoKSA9PiBUW107XG4gIGRpc3Bvc2U6ICgpID0+IHZvaWQ7XG4gIHRvU3RhdGVPYmplY3Q6ICgpID0+IE9ic2VydmFibGVBcnJheVN0YXRlT2JqZWN0PFQ+O1xuICBhcHBseVN0YXRlOiAoIHN0YXRlOiBPYnNlcnZhYmxlQXJyYXlTdGF0ZU9iamVjdDxUPiApID0+IHZvaWQ7XG5cbiAgLy8gbGlzdGVuIG9ubHkgcGxlYXNlXG4gIGVsZW1lbnRBZGRlZEVtaXR0ZXI6IFRFbWl0dGVyPFsgVCBdPjtcbiAgZWxlbWVudFJlbW92ZWRFbWl0dGVyOiBURW1pdHRlcjxbIFQgXT47XG4gIGxlbmd0aFByb3BlcnR5OiBOdW1iZXJQcm9wZXJ0eTtcblxuICAvL1RPRE8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2F4b24vaXNzdWVzLzMzNCBNb3ZlIHRvIFwicHJvdG90eXBlXCIgYWJvdmUgb3IgZHJvcCBzdXBwb3J0XG4gIHJlc2V0OiAoKSA9PiB2b2lkO1xuXG4gIC8vIFBvc3NpYmx5IHBhc3NlZCB0aHJvdWdoIHRvIHRoZSBFbWl0dGVyXG4gIHBoZXRpb0VsZW1lbnRUeXBlPzogSU9UeXBlO1xufSAmIFRbXTtcblxuLy8gVHlwZWQgZm9yIGludGVybmFsIHVzYWdlXG50eXBlIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8VD4gPSB7XG4gIC8vIE1ha2UgaXQgcG9zc2libGUgdG8gdXNlIHRoZSB0YXJnZXRBcnJheSBpbiB0aGUgb3ZlcnJpZGRlbiBtZXRob2RzLlxuICB0YXJnZXRBcnJheTogVFtdO1xuXG4gIF9vYnNlcnZhYmxlQXJyYXlQaGV0aW9PYmplY3Q/OiBPYnNlcnZhYmxlQXJyYXlQaGV0aW9PYmplY3Q8VD47XG59ICYgT2JzZXJ2YWJsZUFycmF5PFQ+O1xuXG50eXBlIFNwZWNpZmllZE9ic2VydmFibGVBcnJheU9wdGlvbnM8VD4gPSBTdHJpY3RPbWl0PE9ic2VydmFibGVBcnJheU9wdGlvbnM8VD4sICdwaGV0aW9UeXBlJyB8ICdwaGV0aW9TdGF0ZScgfCAncGhldGlvRG9jdW1lbnRhdGlvbic+O1xuXG5jb25zdCBjcmVhdGVPYnNlcnZhYmxlQXJyYXkgPSA8VD4oIHByb3ZpZGVkT3B0aW9ucz86IE9ic2VydmFibGVBcnJheU9wdGlvbnM8VD4gKTogT2JzZXJ2YWJsZUFycmF5PFQ+ID0+IHtcblxuICBhc3NlcnRNdXR1YWxseUV4Y2x1c2l2ZU9wdGlvbnMoIHByb3ZpZGVkT3B0aW9ucywgWyAnbGVuZ3RoJyBdLCBbICdlbGVtZW50cycgXSApO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8T2JzZXJ2YWJsZUFycmF5T3B0aW9uczxUPiwgU3BlY2lmaWVkT2JzZXJ2YWJsZUFycmF5T3B0aW9uczxUPj4oKSgge1xuXG4gICAgLy8gQWxzbyBzdXBwb3J0cyBwaGV0aW9UeXBlIG9yIHZhbGlkYXRvciBvcHRpb25zLiAgSWYgYm90aCBhcmUgc3VwcGxpZWQsIG9ubHkgdGhlIHBoZXRpb1R5cGUgaXMgcmVzcGVjdGVkXG5cbiAgICBsZW5ndGg6IDAsXG4gICAgZWxlbWVudHM6IFtdLFxuICAgIHRhbmRlbTogVGFuZGVtLk9QVElPTkFMLFxuICAgIHBoZXRpb0ZlYXR1cmVkOiBmYWxzZVxuICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICBsZXQgZW1pdHRlclBhcmFtZXRlck9wdGlvbnMgPSBudWxsO1xuICBpZiAoIG9wdGlvbnMucGhldGlvVHlwZSApIHtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMucGhldGlvVHlwZS50eXBlTmFtZS5zdGFydHNXaXRoKCAnT2JzZXJ2YWJsZUFycmF5SU8nICkgKTtcbiAgICBlbWl0dGVyUGFyYW1ldGVyT3B0aW9ucyA9IHsgbmFtZTogJ3ZhbHVlJywgcGhldGlvVHlwZTogb3B0aW9ucy5waGV0aW9UeXBlLnBhcmFtZXRlclR5cGVzIVsgMCBdIH07XG4gIH1cbiAgLy8gTk9URTogSW1wcm92ZSB3aXRoIFZhbGlkYXRpb25cbiAgZWxzZSBpZiAoICFWYWxpZGF0aW9uLmdldFZhbGlkYXRvclZhbGlkYXRpb25FcnJvciggb3B0aW9ucyApICkge1xuICAgIGNvbnN0IHZhbGlkYXRvciA9IF8ucGljayggb3B0aW9ucywgVmFsaWRhdGlvbi5WQUxJREFUT1JfS0VZUyApO1xuICAgIGVtaXR0ZXJQYXJhbWV0ZXJPcHRpb25zID0gbWVyZ2UoIHsgbmFtZTogJ3ZhbHVlJyB9LCB2YWxpZGF0b3IgKTtcbiAgfVxuICBlbHNlIHtcbiAgICBlbWl0dGVyUGFyYW1ldGVyT3B0aW9ucyA9IG1lcmdlKCB7IG5hbWU6ICd2YWx1ZScgfSwgeyBpc1ZhbGlkVmFsdWU6IF8uc3R1YlRydWUgfSApO1xuICB9XG5cbiAgLy8gbm90aWZpZXMgd2hlbiBhbiBlbGVtZW50IGhhcyBiZWVuIGFkZGVkXG4gIGNvbnN0IGVsZW1lbnRBZGRlZEVtaXR0ZXIgPSBuZXcgRW1pdHRlcjxbIFQgXT4oIHtcbiAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2VsZW1lbnRBZGRlZEVtaXR0ZXInICksXG4gICAgcGFyYW1ldGVyczogWyBlbWl0dGVyUGFyYW1ldGVyT3B0aW9ucyBdLFxuICAgIHBoZXRpb1JlYWRPbmx5OiB0cnVlLFxuICAgIHBoZXRpb0ZlYXR1cmVkOiBvcHRpb25zLnBoZXRpb0ZlYXR1cmVkXG4gIH0gKTtcblxuICAvLyBub3RpZmllcyB3aGVuIGFuIGVsZW1lbnQgaGFzIGJlZW4gcmVtb3ZlZFxuICBjb25zdCBlbGVtZW50UmVtb3ZlZEVtaXR0ZXIgPSBuZXcgRW1pdHRlcjxbIFQgXT4oIHtcbiAgICB0YW5kZW06IG9wdGlvbnMudGFuZGVtLmNyZWF0ZVRhbmRlbSggJ2VsZW1lbnRSZW1vdmVkRW1pdHRlcicgKSxcbiAgICBwYXJhbWV0ZXJzOiBbIGVtaXR0ZXJQYXJhbWV0ZXJPcHRpb25zIF0sXG4gICAgcGhldGlvUmVhZE9ubHk6IHRydWUsXG4gICAgcGhldGlvRmVhdHVyZWQ6IG9wdGlvbnMucGhldGlvRmVhdHVyZWRcbiAgfSApO1xuXG4gIC8vIG9ic2VydmUgdGhpcywgYnV0IGRvbid0IHNldCBpdC4gVXBkYXRlZCB3aGVuIEFycmF5IG1vZGlmaWVycyBhcmUgY2FsbGVkIChleGNlcHQgYXJyYXkubGVuZ3RoPS4uLilcbiAgY29uc3QgbGVuZ3RoUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIDAsIHtcbiAgICBudW1iZXJUeXBlOiAnSW50ZWdlcicsXG4gICAgdGFuZGVtOiBvcHRpb25zLnRhbmRlbS5jcmVhdGVUYW5kZW0oICdsZW5ndGhQcm9wZXJ0eScgKSxcbiAgICBwaGV0aW9SZWFkT25seTogdHJ1ZSxcbiAgICBwaGV0aW9GZWF0dXJlZDogb3B0aW9ucy5waGV0aW9GZWF0dXJlZFxuICB9ICk7XG5cbiAgLy8gVGhlIHVuZGVybHlpbmcgYXJyYXkgd2hpY2ggaXMgd3JhcHBlZCBieSB0aGUgUHJveHlcbiAgY29uc3QgdGFyZ2V0QXJyYXk6IFRbXSA9IFtdO1xuXG4gIC8vIFZlcmlmeSB0aGF0IGxlbmd0aFByb3BlcnR5IGlzIHVwZGF0ZWQgYmVmb3JlIGxpc3RlbmVycyBhcmUgbm90aWZpZWQsIGJ1dCBub3Qgd2hlbiBzZXR0aW5nIFBoRVQtaU8gU3RhdGUsXG4gIC8vIFRoaXMgaXMgYmVjYXVzZSB3ZSBjYW5ub3Qgc3BlY2lmeSBvcmRlcmluZyBkZXBlbmRlbmNpZXMgYmV0d2VlbiBQcm9wZXJ0aWVzIGFuZCBPYnNlcnZhYmxlQXJyYXlzLFxuICAvLyBUT0RPOiBNYXliZSB0aGlzIGNhbiBiZSBpbXByb3ZlZCB3aGVuIHdlIGhhdmUgYmV0dGVyIHN1cHBvcnQgZm9yIHRoaXMgaW4gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtaW8vaXNzdWVzLzE2NjFcbiAgYXNzZXJ0ICYmIGVsZW1lbnRBZGRlZEVtaXR0ZXIuYWRkTGlzdGVuZXIoICgpID0+IHtcbiAgICBpZiAoIGFzc2VydCApIHtcbiAgICAgIGlmICggIV8uaGFzSW4oIHdpbmRvdywgJ3BoZXQuam9pc3Quc2ltJyApIHx8ICFwaGV0LmpvaXN0LnNpbS5pc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5LnZhbHVlICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZW5ndGhQcm9wZXJ0eS52YWx1ZSA9PT0gdGFyZ2V0QXJyYXkubGVuZ3RoLCAnbGVuZ3RoUHJvcGVydHkgb3V0IG9mIHN5bmMgd2hpbGUgYWRkaW5nIGVsZW1lbnQnICk7XG4gICAgICB9XG4gICAgfVxuICB9ICk7XG4gIGFzc2VydCAmJiBlbGVtZW50UmVtb3ZlZEVtaXR0ZXIuYWRkTGlzdGVuZXIoICgpID0+IHtcbiAgICBpZiAoIGFzc2VydCApIHtcbiAgICAgIGlmICggIV8uaGFzSW4oIHdpbmRvdywgJ3BoZXQuam9pc3Quc2ltJyApIHx8ICFwaGV0LmpvaXN0LnNpbS5pc1NldHRpbmdQaGV0aW9TdGF0ZVByb3BlcnR5LnZhbHVlICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZW5ndGhQcm9wZXJ0eS52YWx1ZSA9PT0gdGFyZ2V0QXJyYXkubGVuZ3RoLCAnbGVuZ3RoUHJvcGVydHkgb3V0IG9mIHN5bmMgd2hpbGUgcmVtb3ZpbmcgZWxlbWVudCcgKTtcbiAgICAgIH1cbiAgICB9XG4gIH0gKTtcblxuICAvLyBUaGUgUHJveHkgd2hpY2ggd2lsbCBpbnRlcmNlcHQgbWV0aG9kIGNhbGxzIGFuZCB0cmlnZ2VyIG5vdGlmaWNhdGlvbnMuXG4gIGNvbnN0IG9ic2VydmFibGVBcnJheTogUHJpdmF0ZU9ic2VydmFibGVBcnJheTxUPiA9IG5ldyBQcm94eSggdGFyZ2V0QXJyYXksIHtcblxuICAgIC8qKlxuICAgICAqIFRyYXAgZm9yIGdldHRpbmcgYSBwcm9wZXJ0eSBvciBtZXRob2QuXG4gICAgICogQHBhcmFtIGFycmF5IC0gdGhlIHRhcmdldEFycmF5XG4gICAgICogQHBhcmFtIGtleVxuICAgICAqIEBwYXJhbSByZWNlaXZlclxuICAgICAqIEByZXR1cm5zIC0gdGhlIHJlcXVlc3RlZCB2YWx1ZVxuICAgICAqL1xuICAgIGdldDogZnVuY3Rpb24oIGFycmF5OiBUW10sIGtleToga2V5b2YgdHlwZW9mIG1ldGhvZHMsIHJlY2VpdmVyICk6IGFueSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhcnJheSA9PT0gdGFyZ2V0QXJyYXksICdhcnJheSBzaG91bGQgbWF0Y2ggdGhlIHRhcmdldEFycmF5JyApO1xuICAgICAgaWYgKCBtZXRob2RzLmhhc093blByb3BlcnR5KCBrZXkgKSApIHtcbiAgICAgICAgcmV0dXJuIG1ldGhvZHNbIGtleSBdO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiBSZWZsZWN0LmdldCggYXJyYXksIGtleSwgcmVjZWl2ZXIgKTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVHJhcCBmb3Igc2V0dGluZyBhIHByb3BlcnR5IHZhbHVlLlxuICAgICAqIEBwYXJhbSBhcnJheSAtIHRoZSB0YXJnZXRBcnJheVxuICAgICAqIEBwYXJhbSBrZXlcbiAgICAgKiBAcGFyYW0gbmV3VmFsdWVcbiAgICAgKiBAcmV0dXJucyAtIHN1Y2Nlc3NcbiAgICAgKi9cbiAgICBzZXQ6IGZ1bmN0aW9uKCBhcnJheTogVFtdLCBrZXk6IHN0cmluZyB8IHN5bWJvbCwgbmV3VmFsdWU6IGFueSApOiBib29sZWFuIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGFycmF5ID09PSB0YXJnZXRBcnJheSwgJ2FycmF5IHNob3VsZCBtYXRjaCB0aGUgdGFyZ2V0QXJyYXknICk7XG4gICAgICBjb25zdCBvbGRWYWx1ZSA9IGFycmF5WyBrZXkgYXMgYW55IF07XG5cbiAgICAgIGxldCByZW1vdmVkRWxlbWVudHMgPSBudWxsO1xuXG4gICAgICAvLyBTZWUgd2hpY2ggaXRlbXMgYXJlIHJlbW92ZWRcbiAgICAgIGlmICgga2V5ID09PSAnbGVuZ3RoJyApIHtcbiAgICAgICAgcmVtb3ZlZEVsZW1lbnRzID0gYXJyYXkuc2xpY2UoIG5ld1ZhbHVlICk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHJldHVyblZhbHVlID0gUmVmbGVjdC5zZXQoIGFycmF5LCBrZXksIG5ld1ZhbHVlICk7XG5cbiAgICAgIC8vIElmIHdlJ3JlIHVzaW5nIHRoZSBicmFja2V0IG9wZXJhdG9yIFtpbmRleF0gb2YgQXJyYXksIHRoZW4gcGFyc2UgdGhlIGluZGV4IGJldHdlZW4gdGhlIGJyYWNrZXRzLlxuICAgICAgY29uc3QgbnVtYmVyS2V5ID0gTnVtYmVyKCBrZXkgKTtcbiAgICAgIGlmICggTnVtYmVyLmlzSW50ZWdlciggbnVtYmVyS2V5ICkgJiYgbnVtYmVyS2V5ID49IDAgJiYgb2xkVmFsdWUgIT09IG5ld1ZhbHVlICkge1xuICAgICAgICBsZW5ndGhQcm9wZXJ0eS52YWx1ZSA9IGFycmF5Lmxlbmd0aDtcblxuICAgICAgICBpZiAoIG9sZFZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgZWxlbWVudFJlbW92ZWRFbWl0dGVyLmVtaXQoIGFycmF5WyBrZXkgYXMgYW55IF0gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIG5ld1ZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgZWxlbWVudEFkZGVkRW1pdHRlci5lbWl0KCBuZXdWYWx1ZSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIGlmICgga2V5ID09PSAnbGVuZ3RoJyApIHtcbiAgICAgICAgbGVuZ3RoUHJvcGVydHkudmFsdWUgPSBuZXdWYWx1ZTtcblxuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCByZW1vdmVkRWxlbWVudHMsICdyZW1vdmVkRWxlbWVudHMgc2hvdWxkIGJlIGRlZmluZWQgZm9yIGtleT09PWxlbmd0aCcgKTtcbiAgICAgICAgcmVtb3ZlZEVsZW1lbnRzICYmIHJlbW92ZWRFbGVtZW50cy5mb3JFYWNoKCBlbGVtZW50ID0+IGVsZW1lbnRSZW1vdmVkRW1pdHRlci5lbWl0KCBlbGVtZW50ICkgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgICB9LFxuXG4gICAgLyoqXG4gICAgICogVGhpcyBpcyB0aGUgdHJhcCBmb3IgdGhlIGRlbGV0ZSBvcGVyYXRvci5cbiAgICAgKi9cbiAgICBkZWxldGVQcm9wZXJ0eTogZnVuY3Rpb24oIGFycmF5OiBUW10sIGtleTogc3RyaW5nIHwgc3ltYm9sICk6IGJvb2xlYW4ge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggYXJyYXkgPT09IHRhcmdldEFycmF5LCAnYXJyYXkgc2hvdWxkIG1hdGNoIHRoZSB0YXJnZXRBcnJheScgKTtcblxuICAgICAgLy8gSWYgd2UncmUgdXNpbmcgdGhlIGJyYWNrZXQgb3BlcmF0b3IgW2luZGV4XSBvZiBBcnJheSwgdGhlbiBwYXJzZSB0aGUgaW5kZXggYmV0d2VlbiB0aGUgYnJhY2tldHMuXG4gICAgICBjb25zdCBudW1iZXJLZXkgPSBOdW1iZXIoIGtleSApO1xuXG4gICAgICBsZXQgcmVtb3ZlZDtcbiAgICAgIGlmICggTnVtYmVyLmlzSW50ZWdlciggbnVtYmVyS2V5ICkgJiYgbnVtYmVyS2V5ID49IDAgKSB7XG4gICAgICAgIHJlbW92ZWQgPSBhcnJheVsga2V5IGFzIGFueSBdO1xuICAgICAgfVxuICAgICAgY29uc3QgcmV0dXJuVmFsdWUgPSBSZWZsZWN0LmRlbGV0ZVByb3BlcnR5KCBhcnJheSwga2V5ICk7XG4gICAgICBpZiAoIHJlbW92ZWQgIT09IHVuZGVmaW5lZCApIHtcbiAgICAgICAgZWxlbWVudFJlbW92ZWRFbWl0dGVyLmVtaXQoIHJlbW92ZWQgKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICAgIH1cbiAgfSApIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8VD47XG5cbiAgb2JzZXJ2YWJsZUFycmF5LnRhcmdldEFycmF5ID0gdGFyZ2V0QXJyYXk7XG4gIG9ic2VydmFibGVBcnJheS5lbGVtZW50QWRkZWRFbWl0dGVyID0gZWxlbWVudEFkZGVkRW1pdHRlcjtcbiAgb2JzZXJ2YWJsZUFycmF5LmVsZW1lbnRSZW1vdmVkRW1pdHRlciA9IGVsZW1lbnRSZW1vdmVkRW1pdHRlcjtcbiAgb2JzZXJ2YWJsZUFycmF5Lmxlbmd0aFByb3BlcnR5ID0gbGVuZ3RoUHJvcGVydHk7XG5cbiAgY29uc3QgaW5pdCA9ICgpID0+IHtcbiAgICBpZiAoIG9wdGlvbnMubGVuZ3RoID49IDAgKSB7XG4gICAgICBvYnNlcnZhYmxlQXJyYXkubGVuZ3RoID0gb3B0aW9ucy5sZW5ndGg7XG4gICAgfVxuICAgIGlmICggb3B0aW9ucy5lbGVtZW50cy5sZW5ndGggPiAwICkge1xuICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoIG9ic2VydmFibGVBcnJheSwgb3B0aW9ucy5lbGVtZW50cyApO1xuICAgIH1cbiAgfTtcblxuICBpbml0KCk7XG5cbiAgLy9UT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9heG9uL2lzc3Vlcy8zMzQgTW92ZSB0byBcInByb3RvdHlwZVwiIGFib3ZlIG9yIGRyb3Agc3VwcG9ydFxuICBvYnNlcnZhYmxlQXJyYXkucmVzZXQgPSAoKSA9PiB7XG4gICAgb2JzZXJ2YWJsZUFycmF5Lmxlbmd0aCA9IDA7XG4gICAgaW5pdCgpO1xuICB9O1xuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogUGhFVC1pTyBzdXBwb3J0XG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuICBpZiAoIG9wdGlvbnMudGFuZGVtLnN1cHBsaWVkICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMucGhldGlvVHlwZSApO1xuXG4gICAgb2JzZXJ2YWJsZUFycmF5LnBoZXRpb0VsZW1lbnRUeXBlID0gb3B0aW9ucy5waGV0aW9UeXBlIS5wYXJhbWV0ZXJUeXBlcyFbIDAgXTtcblxuICAgIC8vIGZvciBtYW5hZ2luZyBzdGF0ZSBpbiBwaGV0LWlvXG4gICAgLy8gVXNlIHRoZSBzYW1lIHRhbmRlbSBhbmQgcGhldGlvU3RhdGUgb3B0aW9ucyBzbyBpdCBjYW4gXCJtYXNxdWVyYWRlXCIgYXMgdGhlIHJlYWwgb2JqZWN0LiAgV2hlbiBQaGV0aW9PYmplY3QgaXMgYSBtaXhpbiB0aGlzIGNhbiBiZSBjaGFuZ2VkLlxuICAgIG9ic2VydmFibGVBcnJheS5fb2JzZXJ2YWJsZUFycmF5UGhldGlvT2JqZWN0ID0gbmV3IE9ic2VydmFibGVBcnJheVBoZXRpb09iamVjdCggb2JzZXJ2YWJsZUFycmF5LCBvcHRpb25zICk7XG4gIH1cblxuICByZXR1cm4gb2JzZXJ2YWJsZUFycmF5O1xufTtcblxuLyoqXG4gKiBNYW5hZ2VzIHN0YXRlIHNhdmUvbG9hZC4gVGhpcyBpbXBsZW1lbnRhdGlvbiB1c2VzIFByb3h5IGFuZCBoZW5jZSBjYW5ub3QgYmUgaW5zdHJ1bWVudGVkIGFzIGEgUGhldGlvT2JqZWN0LiAgVGhpcyB0eXBlXG4gKiBwcm92aWRlcyB0aGF0IGZ1bmN0aW9uYWxpdHkuXG4gKi9cbmNsYXNzIE9ic2VydmFibGVBcnJheVBoZXRpb09iamVjdDxUPiBleHRlbmRzIFBoZXRpb09iamVjdCB7XG5cbiAgLy8gaW50ZXJuYWwsIGRvbid0IHVzZVxuICBwdWJsaWMgb2JzZXJ2YWJsZUFycmF5OiBPYnNlcnZhYmxlQXJyYXk8VD47XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBvYnNlcnZhYmxlQXJyYXlcbiAgICogQHBhcmFtIFtwcm92aWRlZE9wdGlvbnNdIC0gc2FtZSBhcyB0aGUgb3B0aW9ucyB0byB0aGUgcGFyZW50IE9ic2VydmFibGVBcnJheURlZlxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBvYnNlcnZhYmxlQXJyYXk6IE9ic2VydmFibGVBcnJheTxUPiwgcHJvdmlkZWRPcHRpb25zPzogT2JzZXJ2YWJsZUFycmF5T3B0aW9uczxUPiApIHtcblxuICAgIHN1cGVyKCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICAgIHRoaXMub2JzZXJ2YWJsZUFycmF5ID0gb2JzZXJ2YWJsZUFycmF5O1xuICB9XG59XG5cbi8vIE1ldGhvZHMgc2hhcmVkIGJ5IGFsbCBPYnNlcnZhYmxlQXJyYXlEZWYgaW5zdGFuY2VzXG5jb25zdCBtZXRob2RzID0ge1xuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogT3ZlcnJpZGRlbiBBcnJheSBtZXRob2RzXG4gICAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuXG4gIHBvcCggLi4uYXJnczogYW55W10gKTogYW55IHtcbiAgICBjb25zdCB0aGlzQXJyYXkgPSB0aGlzIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PjtcblxuICAgIGNvbnN0IGluaXRpYWxMZW5ndGggPSB0aGlzQXJyYXkudGFyZ2V0QXJyYXkubGVuZ3RoO1xuICAgIGNvbnN0IHJldHVyblZhbHVlID0gQXJyYXkucHJvdG90eXBlLnBvcC5hcHBseSggdGhpc0FycmF5LnRhcmdldEFycmF5LCBhcmdzIGFzIGFueSApO1xuICAgIHRoaXNBcnJheS5sZW5ndGhQcm9wZXJ0eS52YWx1ZSA9IHRoaXNBcnJheS5sZW5ndGg7XG4gICAgaW5pdGlhbExlbmd0aCA+IDAgJiYgdGhpc0FycmF5LmVsZW1lbnRSZW1vdmVkRW1pdHRlci5lbWl0KCByZXR1cm5WYWx1ZSApO1xuICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgfSxcblxuICBzaGlmdCggLi4uYXJnczogYW55W10gKTogYW55IHtcbiAgICBjb25zdCB0aGlzQXJyYXkgPSB0aGlzIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PjtcblxuICAgIGNvbnN0IGluaXRpYWxMZW5ndGggPSB0aGlzQXJyYXkudGFyZ2V0QXJyYXkubGVuZ3RoO1xuICAgIGNvbnN0IHJldHVyblZhbHVlID0gQXJyYXkucHJvdG90eXBlLnNoaWZ0LmFwcGx5KCB0aGlzQXJyYXkudGFyZ2V0QXJyYXksIGFyZ3MgYXMgYW55ICk7XG4gICAgdGhpc0FycmF5Lmxlbmd0aFByb3BlcnR5LnZhbHVlID0gdGhpc0FycmF5Lmxlbmd0aDtcbiAgICBpbml0aWFsTGVuZ3RoID4gMCAmJiB0aGlzQXJyYXkuZWxlbWVudFJlbW92ZWRFbWl0dGVyLmVtaXQoIHJldHVyblZhbHVlICk7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICB9LFxuXG4gIHB1c2goIC4uLmFyZ3M6IGFueVtdICk6IGFueSB7XG4gICAgY29uc3QgdGhpc0FycmF5ID0gdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT47XG5cbiAgICBjb25zdCByZXR1cm5WYWx1ZSA9IEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KCB0aGlzQXJyYXkudGFyZ2V0QXJyYXksIGFyZ3MgKTtcbiAgICB0aGlzQXJyYXkubGVuZ3RoUHJvcGVydHkudmFsdWUgPSB0aGlzQXJyYXkubGVuZ3RoO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIHRoaXNBcnJheS5lbGVtZW50QWRkZWRFbWl0dGVyLmVtaXQoIGFyZ3NbIGkgXSApO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gIH0sXG5cbiAgdW5zaGlmdCggLi4uYXJnczogYW55W10gKTogYW55IHtcbiAgICBjb25zdCB0aGlzQXJyYXkgPSB0aGlzIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PjtcblxuICAgIGNvbnN0IHJldHVyblZhbHVlID0gQXJyYXkucHJvdG90eXBlLnVuc2hpZnQuYXBwbHkoIHRoaXNBcnJheS50YXJnZXRBcnJheSwgYXJncyApO1xuICAgIHRoaXNBcnJheS5sZW5ndGhQcm9wZXJ0eS52YWx1ZSA9IHRoaXNBcnJheS5sZW5ndGg7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIHRoaXNBcnJheS5lbGVtZW50QWRkZWRFbWl0dGVyLmVtaXQoIGFyZ3NbIGkgXSApO1xuICAgIH1cbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gIH0sXG5cbiAgc3BsaWNlKCAuLi5hcmdzOiBhbnlbXSApOiBhbnkge1xuICAgIGNvbnN0IHRoaXNBcnJheSA9IHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+O1xuXG4gICAgY29uc3QgcmV0dXJuVmFsdWUgPSBBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KCB0aGlzQXJyYXkudGFyZ2V0QXJyYXksIGFyZ3MgYXMgYW55ICk7XG4gICAgdGhpc0FycmF5Lmxlbmd0aFByb3BlcnR5LnZhbHVlID0gdGhpc0FycmF5Lmxlbmd0aDtcbiAgICBjb25zdCBkZWxldGVkRWxlbWVudHMgPSByZXR1cm5WYWx1ZTtcbiAgICBmb3IgKCBsZXQgaSA9IDI7IGkgPCBhcmdzLmxlbmd0aDsgaSsrICkge1xuICAgICAgdGhpc0FycmF5LmVsZW1lbnRBZGRlZEVtaXR0ZXIuZW1pdCggYXJnc1sgaSBdICk7XG4gICAgfVxuICAgIGRlbGV0ZWRFbGVtZW50cy5mb3JFYWNoKCBkZWxldGVkRWxlbWVudCA9PiB0aGlzQXJyYXkuZWxlbWVudFJlbW92ZWRFbWl0dGVyLmVtaXQoIGRlbGV0ZWRFbGVtZW50ICkgKTtcbiAgICByZXR1cm4gcmV0dXJuVmFsdWU7XG4gIH0sXG5cbiAgY29weVdpdGhpbiggLi4uYXJnczogYW55W10gKTogYW55IHtcbiAgICBjb25zdCB0aGlzQXJyYXkgPSB0aGlzIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PjtcblxuICAgIGNvbnN0IGJlZm9yZSA9IHRoaXNBcnJheS50YXJnZXRBcnJheS5zbGljZSgpO1xuICAgIGNvbnN0IHJldHVyblZhbHVlID0gQXJyYXkucHJvdG90eXBlLmNvcHlXaXRoaW4uYXBwbHkoIHRoaXNBcnJheS50YXJnZXRBcnJheSwgYXJncyBhcyBhbnkgKTtcbiAgICByZXBvcnREaWZmZXJlbmNlKCBiZWZvcmUsIHRoaXNBcnJheSApO1xuICAgIHJldHVybiByZXR1cm5WYWx1ZTtcbiAgfSxcblxuICBmaWxsKCAuLi5hcmdzOiBhbnlbXSApOiBhbnkge1xuICAgIGNvbnN0IHRoaXNBcnJheSA9IHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+O1xuXG4gICAgY29uc3QgYmVmb3JlID0gdGhpc0FycmF5LnRhcmdldEFycmF5LnNsaWNlKCk7XG4gICAgY29uc3QgcmV0dXJuVmFsdWUgPSBBcnJheS5wcm90b3R5cGUuZmlsbC5hcHBseSggdGhpc0FycmF5LnRhcmdldEFycmF5LCBhcmdzIGFzIGFueSApO1xuICAgIHJlcG9ydERpZmZlcmVuY2UoIGJlZm9yZSwgdGhpc0FycmF5ICk7XG4gICAgcmV0dXJuIHJldHVyblZhbHVlO1xuICB9LFxuXG4gIC8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICogRm9yIGNvbXBhdGliaWxpdHkgd2l0aCBPYnNlcnZhYmxlQXJyYXlEZWZcbiAgICogVE9ETyBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvMzM0IGNvbnNpZGVyIGRlbGV0aW5nIGFmdGVyIG1pZ3JhdGlvblxuICAgKiBUT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9heG9uL2lzc3Vlcy8zMzQgaWYgbm90IGRlbGV0ZWQsIHJlbmFtZSAnSXRlbScgd2l0aCAnRWxlbWVudCdcbiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIGdldDogZnVuY3Rpb24oIGluZGV4OiBudW1iZXIgKSB7IHJldHVybiAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+IClbIGluZGV4IF07IH0sXG4gIGFkZEl0ZW1BZGRlZExpc3RlbmVyOiBmdW5jdGlvbiggbGlzdGVuZXI6IE9ic2VydmFibGVBcnJheUxpc3RlbmVyPGFueT4gKSB7ICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5lbGVtZW50QWRkZWRFbWl0dGVyLmFkZExpc3RlbmVyKCBsaXN0ZW5lciApOyB9LFxuICByZW1vdmVJdGVtQWRkZWRMaXN0ZW5lcjogZnVuY3Rpb24oIGxpc3RlbmVyOiBPYnNlcnZhYmxlQXJyYXlMaXN0ZW5lcjxhbnk+ICkgeyAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+ICkuZWxlbWVudEFkZGVkRW1pdHRlci5yZW1vdmVMaXN0ZW5lciggbGlzdGVuZXIgKTsgfSxcbiAgYWRkSXRlbVJlbW92ZWRMaXN0ZW5lcjogZnVuY3Rpb24oIGxpc3RlbmVyOiBPYnNlcnZhYmxlQXJyYXlMaXN0ZW5lcjxhbnk+ICkgeyAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+ICkuZWxlbWVudFJlbW92ZWRFbWl0dGVyLmFkZExpc3RlbmVyKCBsaXN0ZW5lciApOyB9LFxuICByZW1vdmVJdGVtUmVtb3ZlZExpc3RlbmVyOiBmdW5jdGlvbiggbGlzdGVuZXI6IE9ic2VydmFibGVBcnJheUxpc3RlbmVyPGFueT4gKSB7ICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5lbGVtZW50UmVtb3ZlZEVtaXR0ZXIucmVtb3ZlTGlzdGVuZXIoIGxpc3RlbmVyICk7IH0sXG4gIGFkZDogZnVuY3Rpb24oIGVsZW1lbnQ6IGFueSApIHsgKCB0aGlzIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PiApLnB1c2goIGVsZW1lbnQgKTt9LFxuICBhZGRBbGw6IGZ1bmN0aW9uKCBlbGVtZW50czogYW55W10gKSB7ICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5wdXNoKCAuLi5lbGVtZW50cyApO30sXG4gIHJlbW92ZTogZnVuY3Rpb24oIGVsZW1lbnQ6IGFueSApIHsgYXJyYXlSZW1vdmUoICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKSwgZWxlbWVudCApO30sXG4gIHJlbW92ZUFsbDogZnVuY3Rpb24oIGVsZW1lbnRzOiBhbnlbXSApIHtcbiAgICBlbGVtZW50cy5mb3JFYWNoKCBlbGVtZW50ID0+IGFycmF5UmVtb3ZlKCAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+ICksIGVsZW1lbnQgKSApO1xuICB9LFxuICBjbGVhcjogZnVuY3Rpb24oKSB7XG4gICAgd2hpbGUgKCAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+ICkubGVuZ3RoID4gMCApIHtcbiAgICAgICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5wb3AoKTtcbiAgICB9XG4gIH0sXG4gIGNvdW50OiBmdW5jdGlvbiggcHJlZGljYXRlOiBQcmVkaWNhdGU8YW55PiApIHtcbiAgICBsZXQgY291bnQgPSAwO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8ICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGlmICggcHJlZGljYXRlKCAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+IClbIGkgXSApICkge1xuICAgICAgICBjb3VudCsrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gY291bnQ7XG4gIH0sXG4gIGZpbmQ6IGZ1bmN0aW9uKCBwcmVkaWNhdGU6IFByZWRpY2F0ZTxhbnk+LCBmcm9tSW5kZXg/OiBudW1iZXIgKSB7XG4gICAgYXNzZXJ0ICYmICggZnJvbUluZGV4ICE9PSB1bmRlZmluZWQgKSAmJiBhc3NlcnQoIHR5cGVvZiBmcm9tSW5kZXggPT09ICdudW1iZXInLCAnZnJvbUluZGV4IG11c3QgYmUgbnVtZXJpYywgaWYgcHJvdmlkZWQnICk7XG4gICAgYXNzZXJ0ICYmICggdHlwZW9mIGZyb21JbmRleCA9PT0gJ251bWJlcicgKSAmJiBhc3NlcnQoIGZyb21JbmRleCA+PSAwICYmIGZyb21JbmRleCA8ICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5sZW5ndGgsXG4gICAgICBgZnJvbUluZGV4IG91dCBvZiBib3VuZHM6ICR7ZnJvbUluZGV4fWAgKTtcbiAgICByZXR1cm4gXy5maW5kKCAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+ICksIHByZWRpY2F0ZSwgZnJvbUluZGV4ICk7XG4gIH0sXG4gIHNodWZmbGU6IGZ1bmN0aW9uKCByYW5kb206IEZha2VSYW5kb208YW55PiApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByYW5kb20sICdyYW5kb20gbXVzdCBiZSBzdXBwbGllZCcgKTtcblxuICAgIC8vIHByZXNlcnZlIHRoZSBzYW1lIF9hcnJheSByZWZlcmVuY2UgaW4gY2FzZSBhbnkgY2xpZW50cyBnb3QgYSByZWZlcmVuY2UgdG8gaXQgd2l0aCBnZXRBcnJheSgpXG4gICAgY29uc3Qgc2h1ZmZsZWQgPSByYW5kb20uc2h1ZmZsZSggKCB0aGlzIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PiApICk7XG5cbiAgICAvLyBBY3Qgb24gdGhlIHRhcmdldEFycmF5IHNvIHRoYXQgcmVtb3ZhbCBhbmQgYWRkIG5vdGlmaWNhdGlvbnMgYXJlbid0IHNlbnQuXG4gICAgKCB0aGlzIGFzIFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PiApLnRhcmdldEFycmF5Lmxlbmd0aCA9IDA7XG4gICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS50YXJnZXRBcnJheSwgc2h1ZmZsZWQgKTtcbiAgfSxcblxuICAvLyBUT0RPIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9heG9uL2lzc3Vlcy8zMzQgVGhpcyBhbHNvIHNlZW1zIGltcG9ydGFudCB0byBlbGltaW5hdGVcbiAgZ2V0QXJyYXlDb3B5OiBmdW5jdGlvbigpIHsgcmV0dXJuICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5zbGljZSgpOyB9LFxuXG4gIGRpc3Bvc2U6IGZ1bmN0aW9uKCkge1xuICAgIGNvbnN0IHRoaXNBcnJheSA9IHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+O1xuICAgIHRoaXNBcnJheS5lbGVtZW50QWRkZWRFbWl0dGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzQXJyYXkuZWxlbWVudFJlbW92ZWRFbWl0dGVyLmRpc3Bvc2UoKTtcbiAgICB0aGlzQXJyYXkubGVuZ3RoUHJvcGVydHkuZGlzcG9zZSgpO1xuICAgIHRoaXNBcnJheS5fb2JzZXJ2YWJsZUFycmF5UGhldGlvT2JqZWN0ICYmIHRoaXNBcnJheS5fb2JzZXJ2YWJsZUFycmF5UGhldGlvT2JqZWN0LmRpc3Bvc2UoKTtcbiAgfSxcblxuICAvKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAqIFBoRVQtaU9cbiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4gIHRvU3RhdGVPYmplY3Q6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7IGFycmF5OiAoIHRoaXMgYXMgUHJpdmF0ZU9ic2VydmFibGVBcnJheTxhbnk+ICkubWFwKCBpdGVtID0+ICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5waGV0aW9FbGVtZW50VHlwZSEudG9TdGF0ZU9iamVjdCggaXRlbSApICkgfTtcbiAgfSxcbiAgYXBwbHlTdGF0ZTogZnVuY3Rpb24oIHN0YXRlT2JqZWN0OiBPYnNlcnZhYmxlQXJyYXlTdGF0ZU9iamVjdDxhbnk+ICkge1xuICAgICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5sZW5ndGggPSAwO1xuICAgIGNvbnN0IGVsZW1lbnRzID0gc3RhdGVPYmplY3QuYXJyYXkubWFwKCBwYXJhbVN0YXRlT2JqZWN0ID0+ICggdGhpcyBhcyBQcml2YXRlT2JzZXJ2YWJsZUFycmF5PGFueT4gKS5waGV0aW9FbGVtZW50VHlwZSEuZnJvbVN0YXRlT2JqZWN0KCBwYXJhbVN0YXRlT2JqZWN0ICkgKTtcbiAgICB0aGlzLnB1c2goIC4uLmVsZW1lbnRzICk7XG4gIH1cbn07XG5cbi8qKlxuICogRm9yIGNvcHlXaXRoaW4gYW5kIGZpbGwsIHdoaWNoIGhhdmUgbW9yZSBjb21wbGV4IGJlaGF2aW9yLCB3ZSB0cmVhdCB0aGUgYXJyYXkgYXMgYSBibGFjayBib3gsIG1ha2luZyBhIHNoYWxsb3cgY29weVxuICogYmVmb3JlIHRoZSBvcGVyYXRpb24gaW4gb3JkZXIgdG8gaWRlbnRpZnkgd2hhdCBoYXMgYmVlbiBhZGRlZCBhbmQgcmVtb3ZlZC5cbiAqL1xuY29uc3QgcmVwb3J0RGlmZmVyZW5jZSA9ICggc2hhbGxvd0NvcHk6IGFueVtdLCBvYnNlcnZhYmxlQXJyYXk6IFByaXZhdGVPYnNlcnZhYmxlQXJyYXk8YW55PiApID0+IHtcblxuICBjb25zdCBiZWZvcmUgPSBzaGFsbG93Q29weTtcbiAgY29uc3QgYWZ0ZXIgPSBvYnNlcnZhYmxlQXJyYXkudGFyZ2V0QXJyYXkuc2xpY2UoKTtcblxuICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBiZWZvcmUubGVuZ3RoOyBpKysgKSB7XG4gICAgY29uc3QgYmVmb3JlRWxlbWVudCA9IGJlZm9yZVsgaSBdO1xuICAgIGNvbnN0IGFmdGVySW5kZXggPSBhZnRlci5pbmRleE9mKCBiZWZvcmVFbGVtZW50ICk7XG4gICAgaWYgKCBhZnRlckluZGV4ID49IDAgKSB7XG4gICAgICBiZWZvcmUuc3BsaWNlKCBpLCAxICk7XG4gICAgICBhZnRlci5zcGxpY2UoIGFmdGVySW5kZXgsIDEgKTtcbiAgICAgIGktLTtcbiAgICB9XG4gIH1cbiAgYmVmb3JlLmZvckVhY2goIGVsZW1lbnQgPT4gb2JzZXJ2YWJsZUFycmF5LmVsZW1lbnRSZW1vdmVkRW1pdHRlci5lbWl0KCBlbGVtZW50ICkgKTtcbiAgYWZ0ZXIuZm9yRWFjaCggZWxlbWVudCA9PiBvYnNlcnZhYmxlQXJyYXkuZWxlbWVudEFkZGVkRW1pdHRlci5lbWl0KCBlbGVtZW50ICkgKTtcbn07XG5cbi8vIHtNYXAuPGNhY2hlS2V5OmZ1bmN0aW9uKG5ldzpPYnNlcnZhYmxlQXJyYXlJTyksIGZ1bmN0aW9uKG5ldzpPYnNlcnZhYmxlQXJyYXlJTyk+fSAtIENhY2hlIGVhY2ggcGFyYW1ldGVyaXplZCBPYnNlcnZhYmxlQXJyYXlJT1xuLy8gYmFzZWQgb24gdGhlIHBhcmFtZXRlciB0eXBlLCBzbyB0aGF0IGl0IGlzIG9ubHkgY3JlYXRlZCBvbmNlLlxuY29uc3QgY2FjaGUgPSBuZXcgTWFwKCk7XG5cbi8qKlxuICogT2JzZXJ2YWJsZUFycmF5SU8gaXMgdGhlIElPIFR5cGUgZm9yIE9ic2VydmFibGVBcnJheURlZi4gSXQgZGVsZWdhdGVzIG1vc3Qgb2YgaXRzIGltcGxlbWVudGF0aW9uIHRvIE9ic2VydmFibGVBcnJheURlZi5cbiAqIEluc3RlYWQgb2YgYmVpbmcgYSBwYXJhbWV0cmljIHR5cGUsIGl0IGxldmVyYWdlcyB0aGUgcGhldGlvRWxlbWVudFR5cGUgb24gT2JzZXJ2YWJsZUFycmF5RGVmLlxuICovXG5jb25zdCBPYnNlcnZhYmxlQXJyYXlJTyA9ICggcGFyYW1ldGVyVHlwZTogSU9UeXBlICk6IElPVHlwZSA9PiB7XG4gIGlmICggIWNhY2hlLmhhcyggcGFyYW1ldGVyVHlwZSApICkge1xuICAgIGNhY2hlLnNldCggcGFyYW1ldGVyVHlwZSwgbmV3IElPVHlwZSggYE9ic2VydmFibGVBcnJheUlPPCR7cGFyYW1ldGVyVHlwZS50eXBlTmFtZX0+YCwge1xuICAgICAgdmFsdWVUeXBlOiBPYnNlcnZhYmxlQXJyYXlQaGV0aW9PYmplY3QsXG4gICAgICBwYXJhbWV0ZXJUeXBlczogWyBwYXJhbWV0ZXJUeXBlIF0sXG4gICAgICB0b1N0YXRlT2JqZWN0OiAoIG9ic2VydmFibGVBcnJheVBoZXRpb09iamVjdDogT2JzZXJ2YWJsZUFycmF5UGhldGlvT2JqZWN0PGFueT4gKSA9PiBvYnNlcnZhYmxlQXJyYXlQaGV0aW9PYmplY3Qub2JzZXJ2YWJsZUFycmF5LnRvU3RhdGVPYmplY3QoKSxcbiAgICAgIGFwcGx5U3RhdGU6ICggb2JzZXJ2YWJsZUFycmF5UGhldGlvT2JqZWN0OiBPYnNlcnZhYmxlQXJyYXlQaGV0aW9PYmplY3Q8YW55Piwgc3RhdGU6IE9ic2VydmFibGVBcnJheVN0YXRlT2JqZWN0PGFueT4gKSA9PiBvYnNlcnZhYmxlQXJyYXlQaGV0aW9PYmplY3Qub2JzZXJ2YWJsZUFycmF5LmFwcGx5U3RhdGUoIHN0YXRlICksXG4gICAgICBzdGF0ZVNjaGVtYToge1xuICAgICAgICBhcnJheTogQXJyYXlJTyggcGFyYW1ldGVyVHlwZSApXG4gICAgICB9XG4gICAgfSApICk7XG4gIH1cbiAgcmV0dXJuIGNhY2hlLmdldCggcGFyYW1ldGVyVHlwZSApO1xufTtcblxuY3JlYXRlT2JzZXJ2YWJsZUFycmF5Lk9ic2VydmFibGVBcnJheUlPID0gT2JzZXJ2YWJsZUFycmF5SU87XG5cbmF4b24ucmVnaXN0ZXIoICdjcmVhdGVPYnNlcnZhYmxlQXJyYXknLCBjcmVhdGVPYnNlcnZhYmxlQXJyYXkgKTtcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZU9ic2VydmFibGVBcnJheTtcbmV4cG9ydCB7IE9ic2VydmFibGVBcnJheUlPIH07XG5leHBvcnQgdHlwZSB7IE9ic2VydmFibGVBcnJheSB9O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsV0FBVyxNQUFNLG1DQUFtQztBQUUzRCxPQUFPQyw4QkFBOEIsTUFBTSxzREFBc0Q7QUFDakcsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELE9BQU9DLFlBQVksTUFBTSxpQ0FBaUM7QUFDMUQsT0FBT0MsTUFBTSxNQUFNLDJCQUEyQjtBQUM5QyxPQUFPQyxPQUFPLE1BQU0sa0NBQWtDO0FBQ3RELE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsSUFBSSxNQUFNLFdBQVc7QUFDNUIsT0FBT0MsT0FBTyxNQUFNLGNBQWM7QUFDbEMsT0FBT0MsY0FBYyxNQUFNLHFCQUFx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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/DerivedProperty.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * A DerivedProperty is computed based on other Properties.  This implementation inherits from Property to (a) simplify
 * implementation and (b) ensure it remains consistent. Note that the setters should not be called directly, so the
 * setters (set, reset and es5 setter) throw an error if used directly.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */











const DERIVED_PROPERTY_IO_PREFIX = 'DerivedPropertyIO';
/**
 * Compute the derived value given a derivation and an array of dependencies
 */
function getDerivedValue(derivation, dependencies) {
  // @ts-expect-error
  return derivation(...dependencies.map(property => property.get()));
}

// Convenience type for a Derived property that has a known return type but unknown dependency types.

/**
 * T = type of the derived value
 * Parameters[] = types of the callback parameters, e.g. [ Vector2, number, boolean ]
 */
class DerivedProperty extends ReadOnlyProperty {
  /**
   * @param dependencies - Properties that this Property's value is derived from
   * @param derivation - function that derives this Property's value, expects args in the same order as dependencies
   * @param [providedOptions] - see Property
   */

  constructor(dependencies, derivation, providedOptions) {
    const options = optionize()({
      tandem: js_Tandem.OPTIONAL,
      phetioReadOnly: true,
      // derived properties can be read but not set by PhET-iO
      phetioOuterType: DerivedProperty.DerivedPropertyIO,
      phetioLinkDependencies: true
    }, providedOptions);
    assert && assert(dependencies.every(_.identity), 'dependencies should all be truthy');
    assert && assert(dependencies.length === _.uniq(dependencies).length, 'duplicate dependencies');
    const initialValue = getDerivedValue(derivation, dependencies);

    // We must pass supertype tandem to parent class so addInstance is called only once in the subclassiest constructor.
    super(initialValue, options);
    if (js_Tandem.VALIDATION && this.isPhetioInstrumented()) {
      // The phetioType should be a concrete (instantiated) DerivedPropertyIO, hence we must check its outer type
      assert && assert(this.phetioType.typeName.startsWith('DerivedPropertyIO'), 'phetioType should be DerivedPropertyIO');
    }
    this.dependencies = dependencies;
    this.derivation = derivation;
    this.derivedPropertyListener = this.getDerivedPropertyListener.bind(this);
    dependencies.forEach(dependency => {
      dependency.lazyLink(this.derivedPropertyListener);
      if (this.isPhetioInstrumented() && dependency instanceof PhetioObject && dependency.isPhetioInstrumented()) {
        if (dependency instanceof ReadOnlyProperty) {
          // Dependencies should have taken their correct values before this DerivedProperty undefers, so it will be sure
          // to have the right value.
          // NOTE: Do not mark the beforePhase as NOTIFY, as this will potentially cause interdependence bugs when used
          // with Multilinks. See Projectile Motion's use of MeasuringTapeNode for an example.
          js_propertyStateHandlerSingleton.registerPhetioOrderDependency(dependency, js_PropertyStatePhase.UNDEFER, this, js_PropertyStatePhase.UNDEFER);
        }
        if (options.phetioLinkDependencies) {
          const dependenciesTandem = options.tandem.createTandem('dependencies');
          this.addLinkedElement(dependency, {
            tandem: dependenciesTandem.createTandemFromPhetioID(dependency.tandem.phetioID)
          });
        }
      }
    });
  }

  /**
   * Determines whether this DerivedProperty has a specific dependency.
   */
  hasDependency(dependency) {
    return this.definedDependencies.includes(dependency);
  }

  /**
   * Returns dependencies that are guaranteed to be defined internally.
   */
  get definedDependencies() {
    assert && assert(this.dependencies !== null, 'Dependencies should be defined, has this Property been disposed?');
    return this.dependencies;
  }

  // for bind
  getDerivedPropertyListener() {
    // Just mark that there is a deferred value, then calculate the derivation below when setDeferred() is called.
    // This is in part supported by the PhET-iO state engine because it can account for intermediate states, such
    // that this Property won't notify until after it is undeferred and has taken its final value.
    if (this.isDeferred) {
      this.hasDeferredValue = true;
    } else {
      super.set(getDerivedValue(this.derivation, this.definedDependencies));
    }
  }

  /**
   * Allows forcing a recomputation (as a possible workaround to listener order).
   */
  recomputeDerivation() {
    this.getDerivedPropertyListener();
  }
  dispose() {
    const dependencies = this.definedDependencies;

    // Unlink from dependent Properties
    for (let i = 0; i < dependencies.length; i++) {
      const dependency = dependencies[i];
      if (dependency.hasListener(this.derivedPropertyListener)) {
        dependency.unlink(this.derivedPropertyListener);
      }
    }
    this.dependencies = null;
    super.dispose();
  }

  /**
   * Support deferred DerivedProperty by only calculating the derivation once when it is time to undefer it and fire
   * notifications. This way we don't have intermediate derivation calls during PhET-iO state setting.
   */
  setDeferred(isDeferred) {
    if (this.isDeferred && !isDeferred) {
      this.deferredValue = getDerivedValue(this.derivation, this.definedDependencies);
    }
    return super.setDeferred(isDeferred);
  }

  /**
   * Creates a derived boolean Property whose value is true iff firstProperty's value is equal to secondProperty's
   * value.
   */
  static valueEquals(firstProperty, secondProperty, options) {
    return new DerivedProperty([firstProperty, secondProperty], (u, v) => u === v, options);
  }

  /**
   * Creates a derived boolean Property whose value is true iff every input Property value is true.
   */
  static and(properties, options) {
    assert && assert(properties.length > 0, 'must provide a dependency');
    return DerivedProperty.deriveAny(properties, () => _.reduce(properties, andFunction, true), options);
  }

  /**
   * Creates a derived boolean Property whose value is true iff any input Property value is true.
   */
  static or(properties, options) {
    assert && assert(properties.length > 0, 'must provide a dependency');
    return DerivedProperty.deriveAny(properties, () => _.reduce(properties, orFunction, false), options);
  }

  /**
   * Creates a derived boolean Property whose value is the inverse of the provided property.
   */
  static not(propertyToInvert, options) {
    return new DerivedProperty([propertyToInvert], x => !x, options);
  }

  /**
   * Create a DerivedProperty from any number of dependencies.  This is parallel to Multilink.multilinkAny
   */
  static deriveAny(dependencies, derivation, providedOptions) {
    return new DerivedProperty(
    // @ts-expect-error we have to provide a mapping between an arbitrary length array and our max overload of 15 types.
    dependencies, derivation, providedOptions);
  }
}
const andFunction = (value, property) => {
  return value && property.value;
};
const orFunction = (value, property) => {
  assert && assert(typeof property.value === 'boolean', 'boolean value required');
  return value || property.value;
};

// Cache each parameterized DerivedPropertyIO so that it is only created once.
const DerivedProperty_cache = new Map();

/**
 * Parametric IO Type constructor.  Given a parameter type, this function returns an appropriate DerivedProperty
 * IO Type. Unlike PropertyIO, DerivedPropertyIO cannot be set by PhET-iO clients.
 * This caching implementation should be kept in sync with the other parametric IO Type caching implementations.
 */
DerivedProperty.DerivedPropertyIO = parameterType => {
  assert && assert(parameterType, 'DerivedPropertyIO needs parameterType');
  if (!DerivedProperty_cache.has(parameterType)) {
    DerivedProperty_cache.set(parameterType, new IOType(`${DERIVED_PROPERTY_IO_PREFIX}<${parameterType.typeName}>`, {
      valueType: DerivedProperty,
      parameterTypes: [parameterType],
      supertype: Property.PropertyIO(parameterType),
      documentation: 'Like PropertyIO, but not settable.  Instead it is derived from other DerivedPropertyIO or PropertyIO ' + 'instances',
      // Override the parent implementation as a no-op.  DerivedProperty values appear in the state, but should not be set
      // back into a running simulation. See https://github.com/phetsims/phet-io/issues/1292
      applyState: _.noop,
      methods: {
        setValue: {
          returnType: types_VoidIO,
          parameterTypes: [parameterType],
          // @ts-expect-error
          implementation: DerivedProperty.prototype.set,
          documentation: 'Errors out when you try to set a derived property.',
          invocableForReadOnlyElements: false
        }
      }
    }));
  }
  return DerivedProperty_cache.get(parameterType);
};

// Convenience classes for subclassing DerivedProperty
class DerivedProperty1 extends (/* unused pure expression or super */ null && (DerivedProperty)) {}
class DerivedProperty2 extends (/* unused pure expression or super */ null && (DerivedProperty)) {}
class DerivedProperty3 extends (/* unused pure expression or super */ null && (DerivedProperty)) {}
class DerivedProperty4 extends (/* unused pure expression or super */ null && (DerivedProperty)) {}
class DerivedProperty5 extends (/* unused pure expression or super */ null && (DerivedProperty)) {}
js_axon.register('DerivedProperty', DerivedProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUYW5kZW0iLCJJT1R5cGUiLCJWb2lkSU8iLCJheG9uIiwiUHJvcGVydHkiLCJwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbiIsIlByb3BlcnR5U3RhdGVQaGFzZSIsIm9wdGlvbml6ZSIsIlJlYWRPbmx5UHJvcGVydHkiLCJQaGV0aW9PYmplY3QiLCJERVJJVkVEX1BST1BFUlRZX0lPX1BSRUZJWCIsImdldERlcml2ZWRWYWx1ZSIsImRlcml2YXRpb24iLCJkZXBlbmRlbmNpZXMiLCJtYXAiLCJwcm9wZXJ0eSIsImdldCIsIkRlcml2ZWRQcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsInRhbmRlbSIsIk9QVElPTkFMIiwicGhldGlvUmVhZE9ubHkiLCJwaGV0aW9PdXRlclR5cGUiLCJEZXJpdmVkUHJvcGVydHlJTyIsInBoZXRpb0xpbmtEZXBlbmRlbmNpZXMiLCJhc3NlcnQiLCJldmVyeSIsIl8iLCJpZGVudGl0eSIsImxlbmd0aCIsInVuaXEiLCJpbml0aWFsVmFsdWUiLCJWQUxJREFUSU9OIiwiaXNQaGV0aW9JbnN0cnVtZW50ZWQiLCJwaGV0aW9UeXBlIiwidHlwZU5hbWUiLCJzdGFydHNXaXRoIiwiZGVyaXZlZFByb3BlcnR5TGlzdGVuZXIiLCJnZXREZXJpdmVkUHJvcGVydHlMaXN0ZW5lciIsImJpbmQiLCJmb3JFYWNoIiwiZGVwZW5kZW5jeSIsImxhenlMaW5rIiwicmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3kiLCJVTkRFRkVSIiwiZGVwZW5kZW5jaWVzVGFuZGVtIiwiY3JlYXRlVGFuZGVtIiwiYWRkTGlua2VkRWxlbWVudCIsImNyZWF0ZVRhbmRlbUZyb21QaGV0aW9JRCIsInBoZXRpb0lEIiwiaGFzRGVwZW5kZW5jeSIsImRlZmluZWREZXBlbmRlbmNpZXMiLCJpbmNsdWRlcyIsImlzRGVmZXJyZWQiLCJoYXNEZWZlcnJlZFZhbHVlIiwic2V0IiwicmVjb21wdXRlRGVyaXZhdGlvbiIsImRpc3Bvc2UiLCJpIiwiaGFzTGlzdGVuZXIiLCJ1bmxpbmsiLCJzZXREZWZlcnJlZCIsImRlZmVycmVkVmFsdWUiLCJ2YWx1ZUVxdWFscyIsImZpcnN0UHJvcGVydHkiLCJzZWNvbmRQcm9wZXJ0eSIsInUiLCJ2IiwiYW5kIiwicHJvcGVydGllcyIsImRlcml2ZUFueSIsInJlZHVjZSIsImFuZEZ1bmN0aW9uIiwib3IiLCJvckZ1bmN0aW9uIiwibm90IiwicHJvcGVydHlUb0ludmVydCIsIngiLCJ2YWx1ZSIsImNhY2hlIiwiTWFwIiwicGFyYW1ldGVyVHlwZSIsImhhcyIsInZhbHVlVHlwZSIsInBhcmFtZXRlclR5cGVzIiwic3VwZXJ0eXBlIiwiUHJvcGVydHlJTyIsImRvY3VtZW50YXRpb24iLCJhcHBseVN0YXRlIiwibm9vcCIsIm1ldGhvZHMiLCJzZXRWYWx1ZSIsInJldHVyblR5cGUiLCJpbXBsZW1lbnRhdGlvbiIsInByb3RvdHlwZSIsImludm9jYWJsZUZvclJlYWRPbmx5RWxlbWVudHMiLCJEZXJpdmVkUHJvcGVydHkxIiwiRGVyaXZlZFByb3BlcnR5MiIsIkRlcml2ZWRQcm9wZXJ0eTMiLCJEZXJpdmVkUHJvcGVydHk0IiwiRGVyaXZlZFByb3BlcnR5NSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRGVyaXZlZFByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEEgRGVyaXZlZFByb3BlcnR5IGlzIGNvbXB1dGVkIGJhc2VkIG9uIG90aGVyIFByb3BlcnRpZXMuICBUaGlzIGltcGxlbWVudGF0aW9uIGluaGVyaXRzIGZyb20gUHJvcGVydHkgdG8gKGEpIHNpbXBsaWZ5XG4gKiBpbXBsZW1lbnRhdGlvbiBhbmQgKGIpIGVuc3VyZSBpdCByZW1haW5zIGNvbnNpc3RlbnQuIE5vdGUgdGhhdCB0aGUgc2V0dGVycyBzaG91bGQgbm90IGJlIGNhbGxlZCBkaXJlY3RseSwgc28gdGhlXG4gKiBzZXR0ZXJzIChzZXQsIHJlc2V0IGFuZCBlczUgc2V0dGVyKSB0aHJvdyBhbiBlcnJvciBpZiB1c2VkIGRpcmVjdGx5LlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IFRhbmRlbSBmcm9tICcuLi8uLi90YW5kZW0vanMvVGFuZGVtLmpzJztcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XG5pbXBvcnQgVm9pZElPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9Wb2lkSU8uanMnO1xuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBQcm9wZXJ0eSwgeyBQcm9wZXJ0eU9wdGlvbnMgfSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCBwcm9wZXJ0eVN0YXRlSGFuZGxlclNpbmdsZXRvbiBmcm9tICcuL3Byb3BlcnR5U3RhdGVIYW5kbGVyU2luZ2xldG9uLmpzJztcbmltcG9ydCBQcm9wZXJ0eVN0YXRlUGhhc2UgZnJvbSAnLi9Qcm9wZXJ0eVN0YXRlUGhhc2UuanMnO1xuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4vVFJlYWRPbmx5UHJvcGVydHkuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5pbXBvcnQgb3B0aW9uaXplIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9vcHRpb25pemUuanMnO1xuaW1wb3J0IHsgRGVwZW5kZW5jaWVzLCBSUDEsIFJQMTAsIFJQMTEsIFJQMTIsIFJQMTMsIFJQMTQsIFJQMTUsIFJQMiwgUlAzLCBSUDQsIFJQNSwgUlA2LCBSUDcsIFJQOCwgUlA5IH0gZnJvbSAnLi9NdWx0aWxpbmsuanMnO1xuaW1wb3J0IFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi9SZWFkT25seVByb3BlcnR5LmpzJztcbmltcG9ydCBQaGV0aW9PYmplY3QgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL1BoZXRpb09iamVjdC5qcyc7XG5cbmNvbnN0IERFUklWRURfUFJPUEVSVFlfSU9fUFJFRklYID0gJ0Rlcml2ZWRQcm9wZXJ0eUlPJztcblxudHlwZSBTZWxmT3B0aW9ucyA9IHtcblxuICAvLyBXaGVuIHRydWUsIGlmIHRoaXMgRGVyaXZlZFByb3BlcnR5IGlzIFBoRVQtaU8gaW5zdHJ1bWVudCwgYWRkIGEgTGlua2VkRWxlbWVudCBmb3IgZWFjaCBQaEVULWlPIGluc3RydW1lbnRlZCBkZXBlbmRlbmN5LlxuICBwaGV0aW9MaW5rRGVwZW5kZW5jaWVzPzogYm9vbGVhbjtcbn07XG5cbmV4cG9ydCB0eXBlIERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gPSBTZWxmT3B0aW9ucyAmIFByb3BlcnR5T3B0aW9uczxUPjtcblxuLyoqXG4gKiBDb21wdXRlIHRoZSBkZXJpdmVkIHZhbHVlIGdpdmVuIGEgZGVyaXZhdGlvbiBhbmQgYW4gYXJyYXkgb2YgZGVwZW5kZW5jaWVzXG4gKi9cbmZ1bmN0aW9uIGdldERlcml2ZWRWYWx1ZTxULCBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVyaXZhdGlvbjogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSBdICkgPT4gVCwgZGVwZW5kZW5jaWVzOiBEZXBlbmRlbmNpZXM8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4gKTogVCB7XG5cbiAgLy8gQHRzLWV4cGVjdC1lcnJvclxuICByZXR1cm4gZGVyaXZhdGlvbiggLi4uZGVwZW5kZW5jaWVzLm1hcCggcHJvcGVydHkgPT4gcHJvcGVydHkuZ2V0KCkgKSApO1xufVxuXG4vLyBDb252ZW5pZW5jZSB0eXBlIGZvciBhIERlcml2ZWQgcHJvcGVydHkgdGhhdCBoYXMgYSBrbm93biByZXR1cm4gdHlwZSBidXQgdW5rbm93biBkZXBlbmRlbmN5IHR5cGVzLlxuZXhwb3J0IHR5cGUgVW5rbm93bkRlcml2ZWRQcm9wZXJ0eTxUPiA9IERlcml2ZWRQcm9wZXJ0eTxULCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duLCB1bmtub3duPjtcblxuLyoqXG4gKiBUID0gdHlwZSBvZiB0aGUgZGVyaXZlZCB2YWx1ZVxuICogUGFyYW1ldGVyc1tdID0gdHlwZXMgb2YgdGhlIGNhbGxiYWNrIHBhcmFtZXRlcnMsIGUuZy4gWyBWZWN0b3IyLCBudW1iZXIsIGJvb2xlYW4gXVxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBEZXJpdmVkUHJvcGVydHk8VCwgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4gZXh0ZW5kcyBSZWFkT25seVByb3BlcnR5PFQ+IGltcGxlbWVudHMgVFJlYWRPbmx5UHJvcGVydHk8VD4ge1xuICBwcml2YXRlIGRlcGVuZGVuY2llczogRGVwZW5kZW5jaWVzPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+IHwgbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1IF0gKSA9PiBUO1xuICBwcml2YXRlIHJlYWRvbmx5IGRlcml2ZWRQcm9wZXJ0eUxpc3RlbmVyOiAoKSA9PiB2b2lkO1xuICBwdWJsaWMgc3RhdGljIERlcml2ZWRQcm9wZXJ0eUlPOiAoIHBhcmFtZXRlclR5cGU6IElPVHlwZSApID0+IElPVHlwZTtcblxuICAvKipcbiAgICogQHBhcmFtIGRlcGVuZGVuY2llcyAtIFByb3BlcnRpZXMgdGhhdCB0aGlzIFByb3BlcnR5J3MgdmFsdWUgaXMgZGVyaXZlZCBmcm9tXG4gICAqIEBwYXJhbSBkZXJpdmF0aW9uIC0gZnVuY3Rpb24gdGhhdCBkZXJpdmVzIHRoaXMgUHJvcGVydHkncyB2YWx1ZSwgZXhwZWN0cyBhcmdzIGluIHRoZSBzYW1lIG9yZGVyIGFzIGRlcGVuZGVuY2llc1xuICAgKiBAcGFyYW0gW3Byb3ZpZGVkT3B0aW9uc10gLSBzZWUgUHJvcGVydHlcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDE8VDE+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMjxUMSwgVDI+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDM8VDEsIFQyLCBUMz4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDQ8VDEsIFQyLCBUMywgVDQ+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQNTxUMSwgVDIsIFQzLCBUNCwgVDU+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDY8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDc8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDc+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNyBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQODxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDg+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDggXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDk8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOT4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDkgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDEwPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMD4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTE8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTE+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTI8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMj4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDEzPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMz4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMyBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTQ8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQ+LCBkZXJpdmF0aW9uOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTU8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBEZXBlbmRlbmNpZXM8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4sIGRlcml2YXRpb246ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUgXSApID0+IFQsIHByb3ZpZGVkT3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8VD4gKTtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IERlcGVuZGVuY2llczxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiwgZGVyaXZhdGlvbjogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSBdICkgPT4gVCwgcHJvdmlkZWRPcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiApIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RGVyaXZlZFByb3BlcnR5T3B0aW9uczxUPiwgU2VsZk9wdGlvbnMsIFByb3BlcnR5T3B0aW9uczxUPj4oKSgge1xuICAgICAgdGFuZGVtOiBUYW5kZW0uT1BUSU9OQUwsXG4gICAgICBwaGV0aW9SZWFkT25seTogdHJ1ZSwgLy8gZGVyaXZlZCBwcm9wZXJ0aWVzIGNhbiBiZSByZWFkIGJ1dCBub3Qgc2V0IGJ5IFBoRVQtaU9cbiAgICAgIHBoZXRpb091dGVyVHlwZTogRGVyaXZlZFByb3BlcnR5LkRlcml2ZWRQcm9wZXJ0eUlPLFxuICAgICAgcGhldGlvTGlua0RlcGVuZGVuY2llczogdHJ1ZVxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZGVwZW5kZW5jaWVzLmV2ZXJ5KCBfLmlkZW50aXR5ICksICdkZXBlbmRlbmNpZXMgc2hvdWxkIGFsbCBiZSB0cnV0aHknICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gXy51bmlxKCBkZXBlbmRlbmNpZXMgKS5sZW5ndGgsICdkdXBsaWNhdGUgZGVwZW5kZW5jaWVzJyApO1xuXG4gICAgY29uc3QgaW5pdGlhbFZhbHVlID0gZ2V0RGVyaXZlZFZhbHVlKCBkZXJpdmF0aW9uLCBkZXBlbmRlbmNpZXMgKTtcblxuICAgIC8vIFdlIG11c3QgcGFzcyBzdXBlcnR5cGUgdGFuZGVtIHRvIHBhcmVudCBjbGFzcyBzbyBhZGRJbnN0YW5jZSBpcyBjYWxsZWQgb25seSBvbmNlIGluIHRoZSBzdWJjbGFzc2llc3QgY29uc3RydWN0b3IuXG4gICAgc3VwZXIoIGluaXRpYWxWYWx1ZSwgb3B0aW9ucyApO1xuXG4gICAgaWYgKCBUYW5kZW0uVkFMSURBVElPTiAmJiB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgKSB7XG5cbiAgICAgIC8vIFRoZSBwaGV0aW9UeXBlIHNob3VsZCBiZSBhIGNvbmNyZXRlIChpbnN0YW50aWF0ZWQpIERlcml2ZWRQcm9wZXJ0eUlPLCBoZW5jZSB3ZSBtdXN0IGNoZWNrIGl0cyBvdXRlciB0eXBlXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLnBoZXRpb1R5cGUudHlwZU5hbWUuc3RhcnRzV2l0aCggJ0Rlcml2ZWRQcm9wZXJ0eUlPJyApLCAncGhldGlvVHlwZSBzaG91bGQgYmUgRGVyaXZlZFByb3BlcnR5SU8nICk7XG4gICAgfVxuXG4gICAgdGhpcy5kZXBlbmRlbmNpZXMgPSBkZXBlbmRlbmNpZXM7XG4gICAgdGhpcy5kZXJpdmF0aW9uID0gZGVyaXZhdGlvbjtcbiAgICB0aGlzLmRlcml2ZWRQcm9wZXJ0eUxpc3RlbmVyID0gdGhpcy5nZXREZXJpdmVkUHJvcGVydHlMaXN0ZW5lci5iaW5kKCB0aGlzICk7XG5cbiAgICBkZXBlbmRlbmNpZXMuZm9yRWFjaCggZGVwZW5kZW5jeSA9PiB7XG5cbiAgICAgIGRlcGVuZGVuY3kubGF6eUxpbmsoIHRoaXMuZGVyaXZlZFByb3BlcnR5TGlzdGVuZXIgKTtcblxuICAgICAgaWYgKCB0aGlzLmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgJiYgZGVwZW5kZW5jeSBpbnN0YW5jZW9mIFBoZXRpb09iamVjdCAmJiBkZXBlbmRlbmN5LmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgKSB7XG4gICAgICAgIGlmICggZGVwZW5kZW5jeSBpbnN0YW5jZW9mIFJlYWRPbmx5UHJvcGVydHkgKSB7XG5cbiAgICAgICAgICAvLyBEZXBlbmRlbmNpZXMgc2hvdWxkIGhhdmUgdGFrZW4gdGhlaXIgY29ycmVjdCB2YWx1ZXMgYmVmb3JlIHRoaXMgRGVyaXZlZFByb3BlcnR5IHVuZGVmZXJzLCBzbyBpdCB3aWxsIGJlIHN1cmVcbiAgICAgICAgICAvLyB0byBoYXZlIHRoZSByaWdodCB2YWx1ZS5cbiAgICAgICAgICAvLyBOT1RFOiBEbyBub3QgbWFyayB0aGUgYmVmb3JlUGhhc2UgYXMgTk9USUZZLCBhcyB0aGlzIHdpbGwgcG90ZW50aWFsbHkgY2F1c2UgaW50ZXJkZXBlbmRlbmNlIGJ1Z3Mgd2hlbiB1c2VkXG4gICAgICAgICAgLy8gd2l0aCBNdWx0aWxpbmtzLiBTZWUgUHJvamVjdGlsZSBNb3Rpb24ncyB1c2Ugb2YgTWVhc3VyaW5nVGFwZU5vZGUgZm9yIGFuIGV4YW1wbGUuXG4gICAgICAgICAgcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24ucmVnaXN0ZXJQaGV0aW9PcmRlckRlcGVuZGVuY3koIGRlcGVuZGVuY3ksIFByb3BlcnR5U3RhdGVQaGFzZS5VTkRFRkVSLCB0aGlzLCBQcm9wZXJ0eVN0YXRlUGhhc2UuVU5ERUZFUiApO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBvcHRpb25zLnBoZXRpb0xpbmtEZXBlbmRlbmNpZXMgKSB7XG4gICAgICAgICAgY29uc3QgZGVwZW5kZW5jaWVzVGFuZGVtID0gb3B0aW9ucy50YW5kZW0uY3JlYXRlVGFuZGVtKCAnZGVwZW5kZW5jaWVzJyApO1xuICAgICAgICAgIHRoaXMuYWRkTGlua2VkRWxlbWVudCggZGVwZW5kZW5jeSwge1xuICAgICAgICAgICAgdGFuZGVtOiBkZXBlbmRlbmNpZXNUYW5kZW0uY3JlYXRlVGFuZGVtRnJvbVBoZXRpb0lEKCBkZXBlbmRlbmN5LnRhbmRlbS5waGV0aW9JRCApXG4gICAgICAgICAgfSApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSApO1xuICB9XG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgd2hldGhlciB0aGlzIERlcml2ZWRQcm9wZXJ0eSBoYXMgYSBzcGVjaWZpYyBkZXBlbmRlbmN5LlxuICAgKi9cbiAgcHVibGljIGhhc0RlcGVuZGVuY3koIGRlcGVuZGVuY3k6IFRSZWFkT25seVByb3BlcnR5PEludGVudGlvbmFsQW55PiApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5kZWZpbmVkRGVwZW5kZW5jaWVzLmluY2x1ZGVzKCBkZXBlbmRlbmN5ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBkZXBlbmRlbmNpZXMgdGhhdCBhcmUgZ3VhcmFudGVlZCB0byBiZSBkZWZpbmVkIGludGVybmFsbHkuXG4gICAqL1xuICBwcml2YXRlIGdldCBkZWZpbmVkRGVwZW5kZW5jaWVzKCk6IERlcGVuZGVuY2llczxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5kZXBlbmRlbmNpZXMgIT09IG51bGwsICdEZXBlbmRlbmNpZXMgc2hvdWxkIGJlIGRlZmluZWQsIGhhcyB0aGlzIFByb3BlcnR5IGJlZW4gZGlzcG9zZWQ/JyApO1xuICAgIHJldHVybiB0aGlzLmRlcGVuZGVuY2llcyE7XG4gIH1cblxuICAvLyBmb3IgYmluZFxuICBwcml2YXRlIGdldERlcml2ZWRQcm9wZXJ0eUxpc3RlbmVyKCk6IHZvaWQge1xuXG4gICAgLy8gSnVzdCBtYXJrIHRoYXQgdGhlcmUgaXMgYSBkZWZlcnJlZCB2YWx1ZSwgdGhlbiBjYWxjdWxhdGUgdGhlIGRlcml2YXRpb24gYmVsb3cgd2hlbiBzZXREZWZlcnJlZCgpIGlzIGNhbGxlZC5cbiAgICAvLyBUaGlzIGlzIGluIHBhcnQgc3VwcG9ydGVkIGJ5IHRoZSBQaEVULWlPIHN0YXRlIGVuZ2luZSBiZWNhdXNlIGl0IGNhbiBhY2NvdW50IGZvciBpbnRlcm1lZGlhdGUgc3RhdGVzLCBzdWNoXG4gICAgLy8gdGhhdCB0aGlzIFByb3BlcnR5IHdvbid0IG5vdGlmeSB1bnRpbCBhZnRlciBpdCBpcyB1bmRlZmVycmVkIGFuZCBoYXMgdGFrZW4gaXRzIGZpbmFsIHZhbHVlLlxuICAgIGlmICggdGhpcy5pc0RlZmVycmVkICkge1xuICAgICAgdGhpcy5oYXNEZWZlcnJlZFZhbHVlID0gdHJ1ZTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBzdXBlci5zZXQoIGdldERlcml2ZWRWYWx1ZSggdGhpcy5kZXJpdmF0aW9uLCB0aGlzLmRlZmluZWREZXBlbmRlbmNpZXMgKSApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvd3MgZm9yY2luZyBhIHJlY29tcHV0YXRpb24gKGFzIGEgcG9zc2libGUgd29ya2Fyb3VuZCB0byBsaXN0ZW5lciBvcmRlcikuXG4gICAqL1xuICBwdWJsaWMgcmVjb21wdXRlRGVyaXZhdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLmdldERlcml2ZWRQcm9wZXJ0eUxpc3RlbmVyKCk7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcblxuICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IHRoaXMuZGVmaW5lZERlcGVuZGVuY2llcztcblxuICAgIC8vIFVubGluayBmcm9tIGRlcGVuZGVudCBQcm9wZXJ0aWVzXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgY29uc3QgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY2llc1sgaSBdO1xuICAgICAgaWYgKCBkZXBlbmRlbmN5Lmhhc0xpc3RlbmVyKCB0aGlzLmRlcml2ZWRQcm9wZXJ0eUxpc3RlbmVyICkgKSB7XG4gICAgICAgIGRlcGVuZGVuY3kudW5saW5rKCB0aGlzLmRlcml2ZWRQcm9wZXJ0eUxpc3RlbmVyICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gbnVsbDtcblxuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdXBwb3J0IGRlZmVycmVkIERlcml2ZWRQcm9wZXJ0eSBieSBvbmx5IGNhbGN1bGF0aW5nIHRoZSBkZXJpdmF0aW9uIG9uY2Ugd2hlbiBpdCBpcyB0aW1lIHRvIHVuZGVmZXIgaXQgYW5kIGZpcmVcbiAgICogbm90aWZpY2F0aW9ucy4gVGhpcyB3YXkgd2UgZG9uJ3QgaGF2ZSBpbnRlcm1lZGlhdGUgZGVyaXZhdGlvbiBjYWxscyBkdXJpbmcgUGhFVC1pTyBzdGF0ZSBzZXR0aW5nLlxuICAgKi9cbiAgcHVibGljIG92ZXJyaWRlIHNldERlZmVycmVkKCBpc0RlZmVycmVkOiBib29sZWFuICk6ICggKCkgPT4gdm9pZCApIHwgbnVsbCB7XG4gICAgaWYgKCB0aGlzLmlzRGVmZXJyZWQgJiYgIWlzRGVmZXJyZWQgKSB7XG4gICAgICB0aGlzLmRlZmVycmVkVmFsdWUgPSBnZXREZXJpdmVkVmFsdWUoIHRoaXMuZGVyaXZhdGlvbiwgdGhpcy5kZWZpbmVkRGVwZW5kZW5jaWVzICk7XG4gICAgfVxuICAgIHJldHVybiBzdXBlci5zZXREZWZlcnJlZCggaXNEZWZlcnJlZCApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkZXJpdmVkIGJvb2xlYW4gUHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgdHJ1ZSBpZmYgZmlyc3RQcm9wZXJ0eSdzIHZhbHVlIGlzIGVxdWFsIHRvIHNlY29uZFByb3BlcnR5J3NcbiAgICogdmFsdWUuXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyB2YWx1ZUVxdWFscyggZmlyc3RQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8dW5rbm93bj4sIHNlY29uZFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTx1bmtub3duPiwgb3B0aW9ucz86IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8Ym9vbGVhbj4gKTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4ge1xuICAgIHJldHVybiBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIGZpcnN0UHJvcGVydHksIHNlY29uZFByb3BlcnR5IF0sICggdTogdW5rbm93biwgdjogdW5rbm93biApID0+IHUgPT09IHYsIG9wdGlvbnMgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgZGVyaXZlZCBib29sZWFuIFByb3BlcnR5IHdob3NlIHZhbHVlIGlzIHRydWUgaWZmIGV2ZXJ5IGlucHV0IFByb3BlcnR5IHZhbHVlIGlzIHRydWUuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGFuZCggcHJvcGVydGllczogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj5bXSwgb3B0aW9ucz86IFByb3BlcnR5T3B0aW9uczxib29sZWFuPiApOiBVbmtub3duRGVyaXZlZFByb3BlcnR5PGJvb2xlYW4+IHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBwcm9wZXJ0aWVzLmxlbmd0aCA+IDAsICdtdXN0IHByb3ZpZGUgYSBkZXBlbmRlbmN5JyApO1xuXG4gICAgcmV0dXJuIERlcml2ZWRQcm9wZXJ0eS5kZXJpdmVBbnkoIHByb3BlcnRpZXMsICgpID0+IF8ucmVkdWNlKCBwcm9wZXJ0aWVzLCBhbmRGdW5jdGlvbiwgdHJ1ZSApLCBvcHRpb25zICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGRlcml2ZWQgYm9vbGVhbiBQcm9wZXJ0eSB3aG9zZSB2YWx1ZSBpcyB0cnVlIGlmZiBhbnkgaW5wdXQgUHJvcGVydHkgdmFsdWUgaXMgdHJ1ZS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgb3IoIHByb3BlcnRpZXM6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+W10sIG9wdGlvbnM/OiBQcm9wZXJ0eU9wdGlvbnM8Ym9vbGVhbj4gKTogVW5rbm93bkRlcml2ZWRQcm9wZXJ0eTxib29sZWFuPiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcHJvcGVydGllcy5sZW5ndGggPiAwLCAnbXVzdCBwcm92aWRlIGEgZGVwZW5kZW5jeScgKTtcblxuICAgIHJldHVybiBEZXJpdmVkUHJvcGVydHkuZGVyaXZlQW55KCBwcm9wZXJ0aWVzLCAoKSA9PiBfLnJlZHVjZSggcHJvcGVydGllcywgb3JGdW5jdGlvbiwgZmFsc2UgKSwgb3B0aW9ucyApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBkZXJpdmVkIGJvb2xlYW4gUHJvcGVydHkgd2hvc2UgdmFsdWUgaXMgdGhlIGludmVyc2Ugb2YgdGhlIHByb3ZpZGVkIHByb3BlcnR5LlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBub3QoIHByb3BlcnR5VG9JbnZlcnQ6IFRSZWFkT25seVByb3BlcnR5PGJvb2xlYW4+LCBvcHRpb25zPzogRGVyaXZlZFByb3BlcnR5T3B0aW9uczxib29sZWFuPiApOiBEZXJpdmVkUHJvcGVydHk8Ym9vbGVhbiwgYm9vbGVhbiwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93bj4ge1xuICAgIHJldHVybiBuZXcgRGVyaXZlZFByb3BlcnR5KCBbIHByb3BlcnR5VG9JbnZlcnQgXSwgKCB4OiBib29sZWFuICkgPT4gIXgsIG9wdGlvbnMgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEZXJpdmVkUHJvcGVydHkgZnJvbSBhbnkgbnVtYmVyIG9mIGRlcGVuZGVuY2llcy4gIFRoaXMgaXMgcGFyYWxsZWwgdG8gTXVsdGlsaW5rLm11bHRpbGlua0FueVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBkZXJpdmVBbnk8VD4oIGRlcGVuZGVuY2llczogQXJyYXk8VFJlYWRPbmx5UHJvcGVydHk8dW5rbm93bj4+LCBkZXJpdmF0aW9uOiAoKSA9PiBULCBwcm92aWRlZE9wdGlvbnM/OiBEZXJpdmVkUHJvcGVydHlPcHRpb25zPFQ+ICk6IFVua25vd25EZXJpdmVkUHJvcGVydHk8VD4ge1xuICAgIHJldHVybiBuZXcgRGVyaXZlZFByb3BlcnR5KFxuICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB3ZSBoYXZlIHRvIHByb3ZpZGUgYSBtYXBwaW5nIGJldHdlZW4gYW4gYXJiaXRyYXJ5IGxlbmd0aCBhcnJheSBhbmQgb3VyIG1heCBvdmVybG9hZCBvZiAxNSB0eXBlcy5cbiAgICAgIGRlcGVuZGVuY2llcyxcblxuICAgICAgZGVyaXZhdGlvbiwgcHJvdmlkZWRPcHRpb25zICk7XG4gIH1cbn1cblxuY29uc3QgYW5kRnVuY3Rpb24gPSAoIHZhbHVlOiBib29sZWFuLCBwcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4gKSA9PiB7XG4gIHJldHVybiB2YWx1ZSAmJiBwcm9wZXJ0eS52YWx1ZTtcbn07XG5cbmNvbnN0IG9yRnVuY3Rpb24gPSAoIHZhbHVlOiBib29sZWFuLCBwcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8Ym9vbGVhbj4gKSA9PiB7XG4gIGFzc2VydCAmJiBhc3NlcnQoIHR5cGVvZiBwcm9wZXJ0eS52YWx1ZSA9PT0gJ2Jvb2xlYW4nLCAnYm9vbGVhbiB2YWx1ZSByZXF1aXJlZCcgKTtcbiAgcmV0dXJuIHZhbHVlIHx8IHByb3BlcnR5LnZhbHVlO1xufTtcblxuLy8gQ2FjaGUgZWFjaCBwYXJhbWV0ZXJpemVkIERlcml2ZWRQcm9wZXJ0eUlPIHNvIHRoYXQgaXQgaXMgb25seSBjcmVhdGVkIG9uY2UuXG5jb25zdCBjYWNoZSA9IG5ldyBNYXA8SU9UeXBlLCBJT1R5cGU+KCk7XG5cbi8qKlxuICogUGFyYW1ldHJpYyBJTyBUeXBlIGNvbnN0cnVjdG9yLiAgR2l2ZW4gYSBwYXJhbWV0ZXIgdHlwZSwgdGhpcyBmdW5jdGlvbiByZXR1cm5zIGFuIGFwcHJvcHJpYXRlIERlcml2ZWRQcm9wZXJ0eVxuICogSU8gVHlwZS4gVW5saWtlIFByb3BlcnR5SU8sIERlcml2ZWRQcm9wZXJ0eUlPIGNhbm5vdCBiZSBzZXQgYnkgUGhFVC1pTyBjbGllbnRzLlxuICogVGhpcyBjYWNoaW5nIGltcGxlbWVudGF0aW9uIHNob3VsZCBiZSBrZXB0IGluIHN5bmMgd2l0aCB0aGUgb3RoZXIgcGFyYW1ldHJpYyBJTyBUeXBlIGNhY2hpbmcgaW1wbGVtZW50YXRpb25zLlxuICovXG5EZXJpdmVkUHJvcGVydHkuRGVyaXZlZFByb3BlcnR5SU8gPSBwYXJhbWV0ZXJUeXBlID0+IHtcbiAgYXNzZXJ0ICYmIGFzc2VydCggcGFyYW1ldGVyVHlwZSwgJ0Rlcml2ZWRQcm9wZXJ0eUlPIG5lZWRzIHBhcmFtZXRlclR5cGUnICk7XG5cbiAgaWYgKCAhY2FjaGUuaGFzKCBwYXJhbWV0ZXJUeXBlICkgKSB7XG4gICAgY2FjaGUuc2V0KCBwYXJhbWV0ZXJUeXBlLCBuZXcgSU9UeXBlKCBgJHtERVJJVkVEX1BST1BFUlRZX0lPX1BSRUZJWH08JHtwYXJhbWV0ZXJUeXBlLnR5cGVOYW1lfT5gLCB7XG4gICAgICB2YWx1ZVR5cGU6IERlcml2ZWRQcm9wZXJ0eSxcbiAgICAgIHBhcmFtZXRlclR5cGVzOiBbIHBhcmFtZXRlclR5cGUgXSxcbiAgICAgIHN1cGVydHlwZTogUHJvcGVydHkuUHJvcGVydHlJTyggcGFyYW1ldGVyVHlwZSApLFxuICAgICAgZG9jdW1lbnRhdGlvbjogJ0xpa2UgUHJvcGVydHlJTywgYnV0IG5vdCBzZXR0YWJsZS4gIEluc3RlYWQgaXQgaXMgZGVyaXZlZCBmcm9tIG90aGVyIERlcml2ZWRQcm9wZXJ0eUlPIG9yIFByb3BlcnR5SU8gJyArXG4gICAgICAgICAgICAgICAgICAgICAnaW5zdGFuY2VzJyxcblxuICAgICAgLy8gT3ZlcnJpZGUgdGhlIHBhcmVudCBpbXBsZW1lbnRhdGlvbiBhcyBhIG5vLW9wLiAgRGVyaXZlZFByb3BlcnR5IHZhbHVlcyBhcHBlYXIgaW4gdGhlIHN0YXRlLCBidXQgc2hvdWxkIG5vdCBiZSBzZXRcbiAgICAgIC8vIGJhY2sgaW50byBhIHJ1bm5pbmcgc2ltdWxhdGlvbi4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0LWlvL2lzc3Vlcy8xMjkyXG4gICAgICBhcHBseVN0YXRlOiBfLm5vb3AsXG4gICAgICBtZXRob2RzOiB7XG4gICAgICAgIHNldFZhbHVlOiB7XG4gICAgICAgICAgcmV0dXJuVHlwZTogVm9pZElPLFxuICAgICAgICAgIHBhcmFtZXRlclR5cGVzOiBbIHBhcmFtZXRlclR5cGUgXSxcblxuICAgICAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgICAgICBpbXBsZW1lbnRhdGlvbjogRGVyaXZlZFByb3BlcnR5LnByb3RvdHlwZS5zZXQsXG4gICAgICAgICAgZG9jdW1lbnRhdGlvbjogJ0Vycm9ycyBvdXQgd2hlbiB5b3UgdHJ5IHRvIHNldCBhIGRlcml2ZWQgcHJvcGVydHkuJyxcbiAgICAgICAgICBpbnZvY2FibGVGb3JSZWFkT25seUVsZW1lbnRzOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSApICk7XG4gIH1cblxuICByZXR1cm4gY2FjaGUuZ2V0KCBwYXJhbWV0ZXJUeXBlICkhO1xufTtcblxuXG4vLyBDb252ZW5pZW5jZSBjbGFzc2VzIGZvciBzdWJjbGFzc2luZyBEZXJpdmVkUHJvcGVydHlcbmV4cG9ydCBjbGFzcyBEZXJpdmVkUHJvcGVydHkxPFQsIFQxPiBleHRlbmRzIERlcml2ZWRQcm9wZXJ0eTxULCBUMSwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyPiB7fVxuXG5leHBvcnQgY2xhc3MgRGVyaXZlZFByb3BlcnR5MjxULCBUMSwgVDI+IGV4dGVuZHMgRGVyaXZlZFByb3BlcnR5PFQsIFQxLCBUMiwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXI+IHt9XG5cbmV4cG9ydCBjbGFzcyBEZXJpdmVkUHJvcGVydHkzPFQsIFQxLCBUMiwgVDM+IGV4dGVuZHMgRGVyaXZlZFByb3BlcnR5PFQsIFQxLCBUMiwgVDMsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXI+IHt9XG5cbmV4cG9ydCBjbGFzcyBEZXJpdmVkUHJvcGVydHk0PFQsIFQxLCBUMiwgVDMsIFQ0PiBleHRlbmRzIERlcml2ZWRQcm9wZXJ0eTxULCBUMSwgVDIsIFQzLCBUNCwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyPiB7fVxuXG5leHBvcnQgY2xhc3MgRGVyaXZlZFByb3BlcnR5NTxULCBUMSwgVDIsIFQzLCBUNCwgVDU+IGV4dGVuZHMgRGVyaXZlZFByb3BlcnR5PFQsIFQxLCBUMiwgVDMsIFQ0LCBUNSwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXIsIG5ldmVyLCBuZXZlciwgbmV2ZXI+IHt9XG5cbmF4b24ucmVnaXN0ZXIoICdEZXJpdmVkUHJvcGVydHknLCBEZXJpdmVkUHJvcGVydHkgKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsTUFBTSxNQUFNLDJCQUEyQjtBQUM5QyxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsSUFBSSxNQUFNLFdBQVc7QUFDNUIsT0FBT0MsUUFBUSxNQUEyQixlQUFlO0FBQ3pELE9BQU9DLDZCQUE2QixNQUFNLG9DQUFvQztBQUM5RSxPQUFPQyxrQkFBa0IsTUFBTSx5QkFBeUI7QUFHeEQsT0FBT0MsU0FBUyxNQUFNLGlDQUFpQztBQUV2RCxPQUFPQyxnQkFBZ0IsTUFBTSx1QkFBdUI7QUFDcEQsT0FBT0MsWUFBWSxNQUFNLGlDQUFpQztBQUUxRCxNQUFNQywwQkFBMEIsR0FBRyxtQkFBbUI7QUFVdEQ7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsZUFBZUEsQ0FBdUVDLFVBQW9HLEVBQUVDLFlBQTRGLEVBQU07RUFFclM7RUFDQSxPQUFPRCxVQUFVLENBQUUsR0FBR0MsWUFBWSxDQUFDQyxHQUFHLENBQUVDLFFBQVEsSUFBSUEsUUFBUSxDQUFDQyxHQUFHLEVBQUUsQ0FBRSxDQUFFO0FBQ3hFOztBQUVBOztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxNQUFNQyxlQUFlLFNBQThFVCxnQkFBZ0IsQ0FBb0M7RUFNcEs7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7RUFpQlNVLFdBQVdBLENBQUVMLFlBQTRGLEVBQUVELFVBQW9HLEVBQUVPLGVBQTJDLEVBQUc7SUFFcFEsTUFBTUMsT0FBTyxHQUFHYixTQUFTLEVBQThELENBQUU7TUFDdkZjLE1BQU0sRUFBRXJCLE1BQU0sQ0FBQ3NCLFFBQVE7TUFDdkJDLGNBQWMsRUFBRSxJQUFJO01BQUU7TUFDdEJDLGVBQWUsRUFBRVAsZUFBZSxDQUFDUSxpQkFBaUI7TUFDbERDLHNCQUFzQixFQUFFO0lBQzFCLENBQUMsRUFBRVAsZUFBZSxDQUFFO0lBRXBCUSxNQUFNLElBQUlBLE1BQU0sQ0FBRWQsWUFBWSxDQUFDZSxLQUFLLENBQUVDLENBQUMsQ0FBQ0MsUUFBUSxDQUFFLEVBQUUsbUNBQW1DLENBQUU7SUFDekZILE1BQU0sSUFBSUEsTUFBTSxDQUFFZCxZQUFZLENBQUNrQixNQUFNLEtBQUtGLENBQUMsQ0FBQ0csSUFBSSxDQUFFbkIsWUFBWSxDQUFFLENBQUNrQixNQUFNLEVBQUUsd0JBQXdCLENBQUU7SUFFbkcsTUFBTUUsWUFBWSxHQUFHdEIsZUFBZSxDQUFFQyxVQUFVLEVBQUVDLFlBQVksQ0FBRTs7SUFFaEU7SUFDQSxLQUFLLENBQUVvQixZQUFZLEVBQUViLE9BQU8sQ0FBRTtJQUU5QixJQUFLcEIsTUFBTSxDQUFDa0MsVUFBVSxJQUFJLElBQUksQ0FBQ0Msb0JBQW9CLEVBQUUsRUFBRztNQUV0RDtNQUNBUixNQUFNLElBQUlBLE1BQU0sQ0FBRSxJQUFJLENBQUNTLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDQyxVQUFVLENBQUUsbUJBQW1CLENBQUUsRUFBRSx3Q0FBd0MsQ0FBRTtJQUMxSDtJQUVBLElBQUksQ0FBQ3pCLFlBQVksR0FBR0EsWUFBWTtJQUNoQyxJQUFJLENBQUNELFVBQVUsR0FBR0EsVUFBVTtJQUM1QixJQUFJLENBQUMyQix1QkFBdUIsR0FBRyxJQUFJLENBQUNDLDBCQUEwQixDQUFDQyxJQUFJLENBQUUsSUFBSSxDQUFFO0lBRTNFNUIsWUFBWSxDQUFDNkIsT0FBTyxDQUFFQyxVQUFVLElBQUk7TUFFbENBLFVBQVUsQ0FBQ0MsUUFBUSxDQUFFLElBQUksQ0FBQ0wsdUJBQXVCLENBQUU7TUFFbkQsSUFBSyxJQUFJLENBQUNKLG9CQUFvQixFQUFFLElBQUlRLFVBQVUsWUFBWWxDLFlBQVksSUFBSWtDLFVBQVUsQ0FBQ1Isb0JBQW9CLEVBQUUsRUFBRztRQUM1RyxJQUFLUSxVQUFVLFlBQVluQyxnQkFBZ0IsRUFBRztVQUU1QztVQUNBO1VBQ0E7VUFDQTtVQUNBSCw2QkFBNkIsQ0FBQ3dDLDZCQUE2QixDQUFFRixVQUFVLEVBQUVyQyxrQkFBa0IsQ0FBQ3dDLE9BQU8sRUFBRSxJQUFJLEVBQUV4QyxrQkFBa0IsQ0FBQ3dDLE9BQU8sQ0FBRTtRQUN6STtRQUVBLElBQUsxQixPQUFPLENBQUNNLHNCQUFzQixFQUFHO1VBQ3BDLE1BQU1xQixrQkFBa0IsR0FBRzNCLE9BQU8sQ0FBQ0MsTUFBTSxDQUFDMkIsWUFBWSxDQUFFLGNBQWMsQ0FBRTtVQUN4RSxJQUFJLENBQUNDLGdCQUFnQixDQUFFTixVQUFVLEVBQUU7WUFDakN0QixNQUFNLEVBQUUwQixrQkFBa0IsQ0FBQ0csd0JBQXdCLENBQUVQLFVBQVUsQ0FBQ3RCLE1BQU0sQ0FBQzhCLFFBQVE7VUFDakYsQ0FBQyxDQUFFO1FBQ0w7TUFDRjtJQUNGLENBQUMsQ0FBRTtFQUNMOztFQUVBO0FBQ0Y7QUFDQTtFQUNTQyxhQUFhQSxDQUFFVCxVQUE2QyxFQUFZO0lBQzdFLE9BQU8sSUFBSSxDQUFDVSxtQkFBbUIsQ0FBQ0MsUUFBUSxDQUFFWCxVQUFVLENBQUU7RUFDeEQ7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsSUFBWVUsbUJBQW1CQSxDQUFBLEVBQW1GO0lBQ2hIMUIsTUFBTSxJQUFJQSxNQUFNLENBQUUsSUFBSSxDQUFDZCxZQUFZLEtBQUssSUFBSSxFQUFFLGtFQUFrRSxDQUFFO0lBQ2xILE9BQU8sSUFBSSxDQUFDQSxZQUFZO0VBQzFCOztFQUVBO0VBQ1EyQiwwQkFBMEJBLENBQUEsRUFBUztJQUV6QztJQUNBO0lBQ0E7SUFDQSxJQUFLLElBQUksQ0FBQ2UsVUFBVSxFQUFHO01BQ3JCLElBQUksQ0FBQ0MsZ0JBQWdCLEdBQUcsSUFBSTtJQUM5QixDQUFDLE1BQ0k7TUFDSCxLQUFLLENBQUNDLEdBQUcsQ0FBRTlDLGVBQWUsQ0FBRSxJQUFJLENBQUNDLFVBQVUsRUFBRSxJQUFJLENBQUN5QyxtQkFBbUIsQ0FBRSxDQUFFO0lBQzNFO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ1NLLG1CQUFtQkEsQ0FBQSxFQUFTO0lBQ2pDLElBQUksQ0FBQ2xCLDBCQUEwQixFQUFFO0VBQ25DO0VBRWdCbUIsT0FBT0EsQ0FBQSxFQUFTO0lBRTlCLE1BQU05QyxZQUFZLEdBQUcsSUFBSSxDQUFDd0MsbUJBQW1COztJQUU3QztJQUNBLEtBQU0sSUFBSU8sQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHL0MsWUFBWSxDQUFDa0IsTUFBTSxFQUFFNkIsQ0FBQyxFQUFFLEVBQUc7TUFDOUMsTUFBTWpCLFVBQVUsR0FBRzlCLFlBQVksQ0FBRStDLENBQUMsQ0FBRTtNQUNwQyxJQUFLakIsVUFBVSxDQUFDa0IsV0FBVyxDQUFFLElBQUksQ0FBQ3RCLHVCQUF1QixDQUFFLEVBQUc7UUFDNURJLFVBQVUsQ0FBQ21CLE1BQU0sQ0FBRSxJQUFJLENBQUN2Qix1QkFBdUIsQ0FBRTtNQUNuRDtJQUNGO0lBQ0EsSUFBSSxDQUFDMUIsWUFBWSxHQUFHLElBQUk7SUFFeEIsS0FBSyxDQUFDOEMsT0FBTyxFQUFFO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ2tCSSxXQUFXQSxDQUFFUixVQUFtQixFQUEwQjtJQUN4RSxJQUFLLElBQUksQ0FBQ0EsVUFBVSxJQUFJLENBQUNBLFVBQVUsRUFBRztNQUNwQyxJQUFJLENBQUNTLGFBQWEsR0FBR3JELGVBQWUsQ0FBRSxJQUFJLENBQUNDLFVBQVUsRUFBRSxJQUFJLENBQUN5QyxtQkFBbUIsQ0FBRTtJQUNuRjtJQUNBLE9BQU8sS0FBSyxDQUFDVSxXQUFXLENBQUVSLFVBQVUsQ0FBRTtFQUN4Qzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNFLE9BQWVVLFdBQVdBLENBQUVDLGFBQXlDLEVBQUVDLGNBQTBDLEVBQUUvQyxPQUF5QyxFQUErQjtJQUN6TCxPQUFPLElBQUlILGVBQWUsQ0FBRSxDQUFFaUQsYUFBYSxFQUFFQyxjQUFjLENBQUUsRUFBRSxDQUFFQyxDQUFVLEVBQUVDLENBQVUsS0FBTUQsQ0FBQyxLQUFLQyxDQUFDLEVBQUVqRCxPQUFPLENBQUU7RUFDakg7O0VBRUE7QUFDRjtBQUNBO0VBQ0UsT0FBY2tELEdBQUdBLENBQUVDLFVBQXdDLEVBQUVuRCxPQUFrQyxFQUFvQztJQUNqSU8sTUFBTSxJQUFJQSxNQUFNLENBQUU0QyxVQUFVLENBQUN4QyxNQUFNLEdBQUcsQ0FBQyxFQUFFLDJCQUEyQixDQUFFO0lBRXRFLE9BQU9kLGVBQWUsQ0FBQ3VELFNBQVMsQ0FBRUQsVUFBVSxFQUFFLE1BQU0xQyxDQUFDLENBQUM0QyxNQUFNLENBQUVGLFVBQVUsRUFBRUcsV0FBVyxFQUFFLElBQUksQ0FBRSxFQUFFdEQsT0FBTyxDQUFFO0VBQzFHOztFQUVBO0FBQ0Y7QUFDQTtFQUNFLE9BQWN1RCxFQUFFQSxDQUFFSixVQUF3QyxFQUFFbkQsT0FBa0MsRUFBb0M7SUFDaElPLE1BQU0sSUFBSUEsTUFBTSxDQUFFNEMsVUFBVSxDQUFDeEMsTUFBTSxHQUFHLENBQUMsRUFBRSwyQkFBMkIsQ0FBRTtJQUV0RSxPQUFPZCxlQUFlLENBQUN1RCxTQUFTLENBQUVELFVBQVUsRUFBRSxNQUFNMUMsQ0FBQyxDQUFDNEMsTUFBTSxDQUFFRixVQUFVLEVBQUVLLFVBQVUsRUFBRSxLQUFLLENBQUUsRUFBRXhELE9BQU8sQ0FBRTtFQUMxRzs7RUFFQTtBQUNGO0FBQ0E7RUFDRSxPQUFjeUQsR0FBR0EsQ0FBRUMsZ0JBQTRDLEVBQUUxRCxPQUF5QyxFQUFvSztJQUM1USxPQUFPLElBQUlILGVBQWUsQ0FBRSxDQUFFNkQsZ0JBQWdCLENBQUUsRUFBSUMsQ0FBVSxJQUFNLENBQUNBLENBQUMsRUFBRTNELE9BQU8sQ0FBRTtFQUNuRjs7RUFFQTtBQUNGO0FBQ0E7RUFDRSxPQUFjb0QsU0FBU0EsQ0FBSzNELFlBQStDLEVBQUVELFVBQW1CLEVBQUVPLGVBQTJDLEVBQThCO0lBQ3pLLE9BQU8sSUFBSUYsZUFBZTtJQUN4QjtJQUNBSixZQUFZLEVBRVpELFVBQVUsRUFBRU8sZUFBZSxDQUFFO0VBQ2pDO0FBQ0Y7QUFFQSxNQUFNdUQsV0FBVyxHQUFHQSxDQUFFTSxLQUFjLEVBQUVqRSxRQUFvQyxLQUFNO0VBQzlFLE9BQU9pRSxLQUFLLElBQUlqRSxRQUFRLENBQUNpRSxLQUFLO0FBQ2hDLENBQUM7QUFFRCxNQUFNSixVQUFVLEdBQUdBLENBQUVJLEtBQWMsRUFBRWpFLFFBQW9DLEtBQU07RUFDN0VZLE1BQU0sSUFBSUEsTUFBTSxDQUFFLE9BQU9aLFFBQVEsQ0FBQ2lFLEtBQUssS0FBSyxTQUFTLEVBQUUsd0JBQXdCLENBQUU7RUFDakYsT0FBT0EsS0FBSyxJQUFJakUsUUFBUSxDQUFDaUUsS0FBSztBQUNoQyxDQUFDOztBQUVEO0FBQ0EsTUFBTUMsS0FBSyxHQUFHLElBQUlDLEdBQUcsRUFBa0I7O0FBRXZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQWpFLGVBQWUsQ0FBQ1EsaUJBQWlCLEdBQUcwRCxhQUFhLElBQUk7RUFDbkR4RCxNQUFNLElBQUlBLE1BQU0sQ0FBRXdELGFBQWEsRUFBRSx1Q0FBdUMsQ0FBRTtFQUUxRSxJQUFLLENBQUNGLEtBQUssQ0FBQ0csR0FBRyxDQUFFRCxhQUFhLENBQUUsRUFBRztJQUNqQ0YsS0FBSyxDQUFDeEIsR0FBRyxDQUFFMEIsYUFBYSxFQUFFLElBQUlsRixNQUFNLENBQUcsR0FBRVMsMEJBQTJCLElBQUd5RSxhQUFhLENBQUM5QyxRQUFTLEdBQUUsRUFBRTtNQUNoR2dELFNBQVMsRUFBRXBFLGVBQWU7TUFDMUJxRSxjQUFjLEVBQUUsQ0FBRUgsYUFBYSxDQUFFO01BQ2pDSSxTQUFTLEVBQUVuRixRQUFRLENBQUNvRixVQUFVLENBQUVMLGFBQWEsQ0FBRTtNQUMvQ00sYUFBYSxFQUFFLHVHQUF1RyxHQUN2RyxXQUFXO01BRTFCO01BQ0E7TUFDQUMsVUFBVSxFQUFFN0QsQ0FBQyxDQUFDOEQsSUFBSTtNQUNsQkMsT0FBTyxFQUFFO1FBQ1BDLFFBQVEsRUFBRTtVQUNSQyxVQUFVLEVBQUU1RixNQUFNO1VBQ2xCb0YsY0FBYyxFQUFFLENBQUVILGFBQWEsQ0FBRTtVQUVqQztVQUNBWSxjQUFjLEVBQUU5RSxlQUFlLENBQUMrRSxTQUFTLENBQUN2QyxHQUFHO1VBQzdDZ0MsYUFBYSxFQUFFLG9EQUFvRDtVQUNuRVEsNEJBQTRCLEVBQUU7UUFDaEM7TUFDRjtJQUNGLENBQUMsQ0FBRSxDQUFFO0VBQ1A7RUFFQSxPQUFPaEIsS0FBSyxDQUFDakUsR0FBRyxDQUFFbUUsYUFBYSxDQUFFO0FBQ25DLENBQUM7O0FBR0Q7QUFDQSxPQUFPLE1BQU1lLGdCQUFnQixTQUFnQmpGLGVBQWUsQ0FBMEc7QUFFdEssT0FBTyxNQUFNa0YsZ0JBQWdCLFNBQW9CbEYsZUFBZSxDQUF1RztBQUV2SyxPQUFPLE1BQU1tRixnQkFBZ0IsU0FBd0JuRixlQUFlLENBQW9HO0FBRXhLLE9BQU8sTUFBTW9GLGdCQUFnQixTQUE0QnBGLGVBQWUsQ0FBaUc7QUFFekssT0FBTyxNQUFNcUYsZ0JBQWdCLFNBQWdDckYsZUFBZSxDQUE4RjtBQUUxS2QsSUFBSSxDQUFDb0csUUFBUSxDQUFFLGlCQUFpQixFQUFFdEYsZUFBZSxDQUFFIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/DynamicProperty.js
// Copyright 2017-2022, University of Colorado Boulder

/**
 * Creates a Property that does synchronization of values with a swappable Property that itself can change.
 * Handles the case where you need a Property that can switch between acting like multiple other Properties.
 *
 * With no other options specified, the value of this Property is:
 * - null, if valuePropertyProperty.value === null
 * - valuePropertyProperty.value.value otherwise
 *
 * The value of this Property (generalized, with the options available) is:
 * - derive( defaultValue ), if valuePropertyProperty.value === null
 * - map( derive( valuePropertyProperty.value ).value ) otherwise
 *
 * Generally, this DynamicProperty uses one-way synchronization (it only listens to the source), but if the
 * 'bidirectional' option is true, it will use two-way synchronization (changes to this Property will change the active
 * source). Thus when this Property changes value (when bidirectional is true), it will set:
 * - derive( valuePropertyProperty.value ).value = inverseMap( this.value ), if valuePropertyProperty.value !== null
 *
 *******************************
 * General example
 *******************************
 *   const firstProperty = new Property( Color.RED );
 *   const secondProperty = new Property( Color.BLUE );
 *   const currentProperty = new Property( firstProperty ); // {Property.<Property.<Color>>}
 *
 *   const backgroundFill = new DynamicProperty( currentProperty ) // Turns into a {Property.<Color>}
 *   backgroundFill.value; // Color.RED, since: currentProperty.value === firstProperty and
 *                                              firstProperty.value === Color.RED
 *   firstProperty.value = Color.YELLOW;
 *   backgroundFill.value; // Color.YELLOW - It's connected to firstProperty right now
 *
 *   currentProperty.value = secondProperty;
 *   backgroundFill.value; // Color.BLUE - It's the secondProperty's value
 *
 *   secondProperty.value = Color.MAGENTA;
 *   backgroundFill.value; // Color.MAGENTA - Yes, it's listening to the other Property now.
 *
 * Also supports falling back to null if our main Property is set to null:
 *   currentProperty.value = null;
 *   backgroundFill.value; // null
 *
 *******************************
 * 'derive' option
 *******************************
 * Additionally, DynamicProperty supports the ability to derive the Property value from our main Property's value.
 * For example, say you have multiple scenes each with the type:
 *   scene: {
 *     backgroundColorProperty: {Property.<Color>}
 *   }
 * and you have a currentSceneProperty: {Property.<Scene>}, you may want to create:
 *   const currentBackgroundColorProperty = new DynamicProperty( currentSceneProperty, {
 *     derive: 'backgroundColorProperty'
 *   } );
 * This would always report the current scene's current background color.
 * What if you sometimes don't have a scene active, e.g. {Property.<Scene|null>}? You can provide a default value:
 *  new DynamicProperty( currentSceneProperty, {
 *    derive: 'backgroundColorProperty',
 *    defaultValue: Color.BLACK
 *  } );
 * So that if the currentSceneProperty's value is null, the value of our DynamicProperty will be Color.BLACK.
 *
 *******************************
 * 'bidirectional' option
 *******************************
 * If you would like for direct changes to this Property to change the original source (bidirectional synchronization),
 * then pass bidirectional:true:
 *   const firstProperty = new Property( 5 );
 *   const secondProperty = new Property( 10 );
 *   const numberPropertyProperty = new Property( firstProperty );
 *   const dynamicProperty = new DynamicProperty( numberPropertyProperty, { bidirectional: true } );
 *   dynamicProperty.value = 2; // allowed now that it is bidirectional, otherwise prohibited
 *   firstProperty.value; // 2
 *   numberPropertyProperty.value = secondProperty; // change which Property is active
 *   dynamicProperty.value; // 10, from the new Property
 *   dynamicProperty.value = 0;
 *   secondProperty.value; // 0, set above.
 *   firstProperty.value; // still 2 from above, since our dynamic Property switched to the other Property
 *
 *******************************
 * 'map' and 'inverseMap' options
 *******************************
 * DynamicProperty also supports mapping values to different types. For example, say we have a
 * numberPropertyProperty {Property.<Property.<number>>}, but want to have a {Property.<string>} as the output. Then:
 *   new DynamicProperty( numberPropertyProperty, {
 *     map: function( number ) { return '' + number; }
 *   } );
 * will do the trick. If this needs to be done with a bidirectional DynamicProperty, also include inverseMap:
 *   new DynamicProperty( numberPropertyProperty, {
 *     bidirectional: true,
 *     map: function( number ) { return '' + number; },
 *     inverseMap: function( string ) { return Number.parseFloat( string ); }
 *   } );
 * so that changes to the dynamic Property will result in a change in the numberPropertyProperty's value.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */




// ThisValueType: The value type of the resulting DynamicProperty
// InnerValueType: The value type of the inner (derived) Property, whose value gets mapped to ThisValueType and back
// OuterValueType: The value type of the main passed-in Property (whose value may be derived to the InnerValueType)
// e.g.:
// class Foo { colorProperty: Property<Color> }
// new DynamicProperty<number, Color, Foo>( someFooProperty, {
//   derive: 'colorProperty',
//   map: ( color: Color ) => color.alpha
// } );
// Here, ThisValueType=number (we're a Property<number>). You've passed in a Property<Foo>, so OuterValueType is a Foo.
// InnerValueType is what we get from our derive (Color), and what the parameter of our map is.
class DynamicProperty extends ReadOnlyProperty {
  // Set to true when this Property's value is changing from an external source.

  /**
   * @param valuePropertyProperty - If the value is null, it is considered disconnected.
   * @param [providedOptions] - options
   */
  constructor(valuePropertyProperty, providedOptions) {
    const options = optionize()({
      bidirectional: false,
      defaultValue: null,
      derive: _.identity,
      map: _.identity,
      inverseMap: _.identity
    }, providedOptions);
    const optionsDerive = options.derive;
    const optionsMap = options.map;
    const optionsInverseMap = options.inverseMap;
    const derive = typeof optionsDerive === 'function' ? optionsDerive : u => u[optionsDerive];
    const map = typeof optionsMap === 'function' ? optionsMap : v => v[optionsMap];
    const inverseMap = typeof optionsInverseMap === 'function' ? optionsInverseMap : t => t[optionsInverseMap];

    // Use the Property's initial value
    const initialValue = valuePropertyProperty.value === null ? map(options.defaultValue) : map(derive(valuePropertyProperty.value).value);
    super(initialValue, options);
    this.defaultValue = options.defaultValue;
    this.derive = derive;
    this.map = map;
    this.inverseMap = inverseMap;
    this.bidirectional = options.bidirectional;
    this.valuePropertyProperty = valuePropertyProperty;
    this.isExternallyChanging = false;
    this.propertyPropertyListener = this.onPropertyPropertyChange.bind(this);
    this.propertyListener = this.onPropertyChange.bind(this);

    // Rehook our listener to whatever is the active Property.
    valuePropertyProperty.link(this.propertyListener);

    // If we aren't bidirectional, we should never add this listener.
    if (options.bidirectional) {
      // No unlink needed, since our own disposal will remove this listener.
      this.lazyLink(this.onSelfChange.bind(this));
    }
  }

  /**
   * Listener added to the active inner Property.
   *
   * @param value - Should be either our defaultValue (if valuePropertyProperty.value is null), or
   *                derive( valuePropertyProperty.value ).value otherwise.
   * @param oldValue - Ignored for our purposes, but is the 2nd parameter for Property listeners.
   * @param innerProperty
   */
  onPropertyPropertyChange(value, oldValue, innerProperty) {
    // If the value of the inner Property is already the inverse of our value, we will never attempt to update our
    // own value in an attempt to limit "ping-ponging" cases mainly due to numerical error. Otherwise it would be
    // possible, given certain values and map/inverse, for both Properties to toggle back-and-forth.
    // See https://github.com/phetsims/axon/issues/197 for more details.
    if (this.bidirectional && this.valuePropertyProperty.value !== null && innerProperty) {
      const currentProperty = this.derive(this.valuePropertyProperty.value);
      // Notably, we only want to cancel interactions if the Property that sent the notification is still the Property
      // we are paying attention to.
      if (currentProperty === innerProperty && innerProperty.areValuesEqual(this.inverseMap(this.value), innerProperty.get())) {
        return;
      }
    }

    // Since we override the setter here, we need to call the version on the prototype
    super.set(this.map(value));
  }

  /**
   * Listener added to the outer Property.
   *
   * @param newPropertyValue - If derive is not provided then it should be a {Property.<*>|null}
   * @param oldPropertyValue - If derive is not provided then it should be a {Property.<*>|null}.
   *                                              We additionally handle the initial link() case where this is
   *                                              undefined.
   */
  onPropertyChange(newPropertyValue, oldPropertyValue) {
    if (oldPropertyValue) {
      this.derive(oldPropertyValue).unlink(this.propertyPropertyListener);
    }
    if (newPropertyValue) {
      this.derive(newPropertyValue).link(this.propertyPropertyListener);
    } else {
      // Switch to null when our Property's value is null.
      this.onPropertyPropertyChange(this.defaultValue, null, null);
    }
  }

  /**
   * Listener added to ourself when we are bidirectional
   */
  onSelfChange(value) {
    assert && assert(this.bidirectional);
    if (this.valuePropertyProperty.value !== null) {
      const innerProperty = this.derive(this.valuePropertyProperty.value);

      // If our new value is the result of map() from the inner Property's value, we don't want to propagate that
      // change back to the innerProperty in the case where the map/inverseMap are not exact matches (generally due
      // to floating-point issues).
      // See https://github.com/phetsims/axon/issues/197 for more details.
      if (!this.areValuesEqual(value, this.map(innerProperty.value))) {
        // We'll fail at runtime if needed, this cast is needed since sometimes we can do non-bidirectional work on
        // things like a DerivedProperty
        innerProperty.value = this.inverseMap(value);
      }
    }
  }

  /**
   * Disposes this Property
   */
  dispose() {
    this.valuePropertyProperty.unlink(this.propertyListener);
    if (this.valuePropertyProperty.value !== null) {
      this.derive(this.valuePropertyProperty.value).unlink(this.propertyPropertyListener);
    }
    super.dispose();
  }

  /**
   * Resets the current property (if it's a Property instead of a TinyProperty)
   */
  reset() {
    assert && assert(this.bidirectional, 'Cannot reset a non-bidirectional DynamicProperty');
    if (this.valuePropertyProperty.value !== null) {
      const property = this.derive(this.valuePropertyProperty.value);
      property.reset();
    }
  }

  /**
   * Prevent setting this Property manually if it is not marked as bidirectional.
   */
  set(value) {
    assert && assert(this.bidirectional, `Cannot set values directly to a non-bidirectional DynamicProperty, tried to set: ${value}`);
    this.isExternallyChanging = true;
    super.set(value);
    this.isExternallyChanging = false;
  }

  /**
   * Overridden to make public
   */
  get value() {
    return super.value;
  }

  /**
   * Overridden to make public
   * We ran performance tests on Chrome, and determined that calling super.value = newValue is statistically significantly
   * slower at the p = 0.10 level( looping over 10,000 value calls). Therefore, we prefer this optimization.
   */
  set value(value) {
    this.set(value);
  }

  /**
   * Returns true if this Property value can be set externally, by set() or .value =
   */
  isSettable() {
    return super.isSettable() || this.bidirectional;
  }
}
js_axon.register('DynamicProperty', DynamicProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiUmVhZE9ubHlQcm9wZXJ0eSIsIm9wdGlvbml6ZSIsIkR5bmFtaWNQcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwidmFsdWVQcm9wZXJ0eVByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImJpZGlyZWN0aW9uYWwiLCJkZWZhdWx0VmFsdWUiLCJkZXJpdmUiLCJfIiwiaWRlbnRpdHkiLCJtYXAiLCJpbnZlcnNlTWFwIiwib3B0aW9uc0Rlcml2ZSIsIm9wdGlvbnNNYXAiLCJvcHRpb25zSW52ZXJzZU1hcCIsInUiLCJ2IiwidCIsImluaXRpYWxWYWx1ZSIsInZhbHVlIiwiaXNFeHRlcm5hbGx5Q2hhbmdpbmciLCJwcm9wZXJ0eVByb3BlcnR5TGlzdGVuZXIiLCJvblByb3BlcnR5UHJvcGVydHlDaGFuZ2UiLCJiaW5kIiwicHJvcGVydHlMaXN0ZW5lciIsIm9uUHJvcGVydHlDaGFuZ2UiLCJsaW5rIiwibGF6eUxpbmsiLCJvblNlbGZDaGFuZ2UiLCJvbGRWYWx1ZSIsImlubmVyUHJvcGVydHkiLCJjdXJyZW50UHJvcGVydHkiLCJhcmVWYWx1ZXNFcXVhbCIsImdldCIsInNldCIsIm5ld1Byb3BlcnR5VmFsdWUiLCJvbGRQcm9wZXJ0eVZhbHVlIiwidW5saW5rIiwiYXNzZXJ0IiwiZGlzcG9zZSIsInJlc2V0IiwicHJvcGVydHkiLCJpc1NldHRhYmxlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJEeW5hbWljUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTctMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ3JlYXRlcyBhIFByb3BlcnR5IHRoYXQgZG9lcyBzeW5jaHJvbml6YXRpb24gb2YgdmFsdWVzIHdpdGggYSBzd2FwcGFibGUgUHJvcGVydHkgdGhhdCBpdHNlbGYgY2FuIGNoYW5nZS5cbiAqIEhhbmRsZXMgdGhlIGNhc2Ugd2hlcmUgeW91IG5lZWQgYSBQcm9wZXJ0eSB0aGF0IGNhbiBzd2l0Y2ggYmV0d2VlbiBhY3RpbmcgbGlrZSBtdWx0aXBsZSBvdGhlciBQcm9wZXJ0aWVzLlxuICpcbiAqIFdpdGggbm8gb3RoZXIgb3B0aW9ucyBzcGVjaWZpZWQsIHRoZSB2YWx1ZSBvZiB0aGlzIFByb3BlcnR5IGlzOlxuICogLSBudWxsLCBpZiB2YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUgPT09IG51bGxcbiAqIC0gdmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlLnZhbHVlIG90aGVyd2lzZVxuICpcbiAqIFRoZSB2YWx1ZSBvZiB0aGlzIFByb3BlcnR5IChnZW5lcmFsaXplZCwgd2l0aCB0aGUgb3B0aW9ucyBhdmFpbGFibGUpIGlzOlxuICogLSBkZXJpdmUoIGRlZmF1bHRWYWx1ZSApLCBpZiB2YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUgPT09IG51bGxcbiAqIC0gbWFwKCBkZXJpdmUoIHZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSApLnZhbHVlICkgb3RoZXJ3aXNlXG4gKlxuICogR2VuZXJhbGx5LCB0aGlzIER5bmFtaWNQcm9wZXJ0eSB1c2VzIG9uZS13YXkgc3luY2hyb25pemF0aW9uIChpdCBvbmx5IGxpc3RlbnMgdG8gdGhlIHNvdXJjZSksIGJ1dCBpZiB0aGVcbiAqICdiaWRpcmVjdGlvbmFsJyBvcHRpb24gaXMgdHJ1ZSwgaXQgd2lsbCB1c2UgdHdvLXdheSBzeW5jaHJvbml6YXRpb24gKGNoYW5nZXMgdG8gdGhpcyBQcm9wZXJ0eSB3aWxsIGNoYW5nZSB0aGUgYWN0aXZlXG4gKiBzb3VyY2UpLiBUaHVzIHdoZW4gdGhpcyBQcm9wZXJ0eSBjaGFuZ2VzIHZhbHVlICh3aGVuIGJpZGlyZWN0aW9uYWwgaXMgdHJ1ZSksIGl0IHdpbGwgc2V0OlxuICogLSBkZXJpdmUoIHZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSApLnZhbHVlID0gaW52ZXJzZU1hcCggdGhpcy52YWx1ZSApLCBpZiB2YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUgIT09IG51bGxcbiAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogR2VuZXJhbCBleGFtcGxlXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogICBjb25zdCBmaXJzdFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBDb2xvci5SRUQgKTtcbiAqICAgY29uc3Qgc2Vjb25kUHJvcGVydHkgPSBuZXcgUHJvcGVydHkoIENvbG9yLkJMVUUgKTtcbiAqICAgY29uc3QgY3VycmVudFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBmaXJzdFByb3BlcnR5ICk7IC8vIHtQcm9wZXJ0eS48UHJvcGVydHkuPENvbG9yPj59XG4gKlxuICogICBjb25zdCBiYWNrZ3JvdW5kRmlsbCA9IG5ldyBEeW5hbWljUHJvcGVydHkoIGN1cnJlbnRQcm9wZXJ0eSApIC8vIFR1cm5zIGludG8gYSB7UHJvcGVydHkuPENvbG9yPn1cbiAqICAgYmFja2dyb3VuZEZpbGwudmFsdWU7IC8vIENvbG9yLlJFRCwgc2luY2U6IGN1cnJlbnRQcm9wZXJ0eS52YWx1ZSA9PT0gZmlyc3RQcm9wZXJ0eSBhbmRcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0UHJvcGVydHkudmFsdWUgPT09IENvbG9yLlJFRFxuICogICBmaXJzdFByb3BlcnR5LnZhbHVlID0gQ29sb3IuWUVMTE9XO1xuICogICBiYWNrZ3JvdW5kRmlsbC52YWx1ZTsgLy8gQ29sb3IuWUVMTE9XIC0gSXQncyBjb25uZWN0ZWQgdG8gZmlyc3RQcm9wZXJ0eSByaWdodCBub3dcbiAqXG4gKiAgIGN1cnJlbnRQcm9wZXJ0eS52YWx1ZSA9IHNlY29uZFByb3BlcnR5O1xuICogICBiYWNrZ3JvdW5kRmlsbC52YWx1ZTsgLy8gQ29sb3IuQkxVRSAtIEl0J3MgdGhlIHNlY29uZFByb3BlcnR5J3MgdmFsdWVcbiAqXG4gKiAgIHNlY29uZFByb3BlcnR5LnZhbHVlID0gQ29sb3IuTUFHRU5UQTtcbiAqICAgYmFja2dyb3VuZEZpbGwudmFsdWU7IC8vIENvbG9yLk1BR0VOVEEgLSBZZXMsIGl0J3MgbGlzdGVuaW5nIHRvIHRoZSBvdGhlciBQcm9wZXJ0eSBub3cuXG4gKlxuICogQWxzbyBzdXBwb3J0cyBmYWxsaW5nIGJhY2sgdG8gbnVsbCBpZiBvdXIgbWFpbiBQcm9wZXJ0eSBpcyBzZXQgdG8gbnVsbDpcbiAqICAgY3VycmVudFByb3BlcnR5LnZhbHVlID0gbnVsbDtcbiAqICAgYmFja2dyb3VuZEZpbGwudmFsdWU7IC8vIG51bGxcbiAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogJ2Rlcml2ZScgb3B0aW9uXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogQWRkaXRpb25hbGx5LCBEeW5hbWljUHJvcGVydHkgc3VwcG9ydHMgdGhlIGFiaWxpdHkgdG8gZGVyaXZlIHRoZSBQcm9wZXJ0eSB2YWx1ZSBmcm9tIG91ciBtYWluIFByb3BlcnR5J3MgdmFsdWUuXG4gKiBGb3IgZXhhbXBsZSwgc2F5IHlvdSBoYXZlIG11bHRpcGxlIHNjZW5lcyBlYWNoIHdpdGggdGhlIHR5cGU6XG4gKiAgIHNjZW5lOiB7XG4gKiAgICAgYmFja2dyb3VuZENvbG9yUHJvcGVydHk6IHtQcm9wZXJ0eS48Q29sb3I+fVxuICogICB9XG4gKiBhbmQgeW91IGhhdmUgYSBjdXJyZW50U2NlbmVQcm9wZXJ0eToge1Byb3BlcnR5LjxTY2VuZT59LCB5b3UgbWF5IHdhbnQgdG8gY3JlYXRlOlxuICogICBjb25zdCBjdXJyZW50QmFja2dyb3VuZENvbG9yUHJvcGVydHkgPSBuZXcgRHluYW1pY1Byb3BlcnR5KCBjdXJyZW50U2NlbmVQcm9wZXJ0eSwge1xuICogICAgIGRlcml2ZTogJ2JhY2tncm91bmRDb2xvclByb3BlcnR5J1xuICogICB9ICk7XG4gKiBUaGlzIHdvdWxkIGFsd2F5cyByZXBvcnQgdGhlIGN1cnJlbnQgc2NlbmUncyBjdXJyZW50IGJhY2tncm91bmQgY29sb3IuXG4gKiBXaGF0IGlmIHlvdSBzb21ldGltZXMgZG9uJ3QgaGF2ZSBhIHNjZW5lIGFjdGl2ZSwgZS5nLiB7UHJvcGVydHkuPFNjZW5lfG51bGw+fT8gWW91IGNhbiBwcm92aWRlIGEgZGVmYXVsdCB2YWx1ZTpcbiAqICBuZXcgRHluYW1pY1Byb3BlcnR5KCBjdXJyZW50U2NlbmVQcm9wZXJ0eSwge1xuICogICAgZGVyaXZlOiAnYmFja2dyb3VuZENvbG9yUHJvcGVydHknLFxuICogICAgZGVmYXVsdFZhbHVlOiBDb2xvci5CTEFDS1xuICogIH0gKTtcbiAqIFNvIHRoYXQgaWYgdGhlIGN1cnJlbnRTY2VuZVByb3BlcnR5J3MgdmFsdWUgaXMgbnVsbCwgdGhlIHZhbHVlIG9mIG91ciBEeW5hbWljUHJvcGVydHkgd2lsbCBiZSBDb2xvci5CTEFDSy5cbiAqXG4gKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICogJ2JpZGlyZWN0aW9uYWwnIG9wdGlvblxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIElmIHlvdSB3b3VsZCBsaWtlIGZvciBkaXJlY3QgY2hhbmdlcyB0byB0aGlzIFByb3BlcnR5IHRvIGNoYW5nZSB0aGUgb3JpZ2luYWwgc291cmNlIChiaWRpcmVjdGlvbmFsIHN5bmNocm9uaXphdGlvbiksXG4gKiB0aGVuIHBhc3MgYmlkaXJlY3Rpb25hbDp0cnVlOlxuICogICBjb25zdCBmaXJzdFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCA1ICk7XG4gKiAgIGNvbnN0IHNlY29uZFByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCAxMCApO1xuICogICBjb25zdCBudW1iZXJQcm9wZXJ0eVByb3BlcnR5ID0gbmV3IFByb3BlcnR5KCBmaXJzdFByb3BlcnR5ICk7XG4gKiAgIGNvbnN0IGR5bmFtaWNQcm9wZXJ0eSA9IG5ldyBEeW5hbWljUHJvcGVydHkoIG51bWJlclByb3BlcnR5UHJvcGVydHksIHsgYmlkaXJlY3Rpb25hbDogdHJ1ZSB9ICk7XG4gKiAgIGR5bmFtaWNQcm9wZXJ0eS52YWx1ZSA9IDI7IC8vIGFsbG93ZWQgbm93IHRoYXQgaXQgaXMgYmlkaXJlY3Rpb25hbCwgb3RoZXJ3aXNlIHByb2hpYml0ZWRcbiAqICAgZmlyc3RQcm9wZXJ0eS52YWx1ZTsgLy8gMlxuICogICBudW1iZXJQcm9wZXJ0eVByb3BlcnR5LnZhbHVlID0gc2Vjb25kUHJvcGVydHk7IC8vIGNoYW5nZSB3aGljaCBQcm9wZXJ0eSBpcyBhY3RpdmVcbiAqICAgZHluYW1pY1Byb3BlcnR5LnZhbHVlOyAvLyAxMCwgZnJvbSB0aGUgbmV3IFByb3BlcnR5XG4gKiAgIGR5bmFtaWNQcm9wZXJ0eS52YWx1ZSA9IDA7XG4gKiAgIHNlY29uZFByb3BlcnR5LnZhbHVlOyAvLyAwLCBzZXQgYWJvdmUuXG4gKiAgIGZpcnN0UHJvcGVydHkudmFsdWU7IC8vIHN0aWxsIDIgZnJvbSBhYm92ZSwgc2luY2Ugb3VyIGR5bmFtaWMgUHJvcGVydHkgc3dpdGNoZWQgdG8gdGhlIG90aGVyIFByb3BlcnR5XG4gKlxuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqICdtYXAnIGFuZCAnaW52ZXJzZU1hcCcgb3B0aW9uc1xuICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAqIER5bmFtaWNQcm9wZXJ0eSBhbHNvIHN1cHBvcnRzIG1hcHBpbmcgdmFsdWVzIHRvIGRpZmZlcmVudCB0eXBlcy4gRm9yIGV4YW1wbGUsIHNheSB3ZSBoYXZlIGFcbiAqIG51bWJlclByb3BlcnR5UHJvcGVydHkge1Byb3BlcnR5LjxQcm9wZXJ0eS48bnVtYmVyPj59LCBidXQgd2FudCB0byBoYXZlIGEge1Byb3BlcnR5LjxzdHJpbmc+fSBhcyB0aGUgb3V0cHV0LiBUaGVuOlxuICogICBuZXcgRHluYW1pY1Byb3BlcnR5KCBudW1iZXJQcm9wZXJ0eVByb3BlcnR5LCB7XG4gKiAgICAgbWFwOiBmdW5jdGlvbiggbnVtYmVyICkgeyByZXR1cm4gJycgKyBudW1iZXI7IH1cbiAqICAgfSApO1xuICogd2lsbCBkbyB0aGUgdHJpY2suIElmIHRoaXMgbmVlZHMgdG8gYmUgZG9uZSB3aXRoIGEgYmlkaXJlY3Rpb25hbCBEeW5hbWljUHJvcGVydHksIGFsc28gaW5jbHVkZSBpbnZlcnNlTWFwOlxuICogICBuZXcgRHluYW1pY1Byb3BlcnR5KCBudW1iZXJQcm9wZXJ0eVByb3BlcnR5LCB7XG4gKiAgICAgYmlkaXJlY3Rpb25hbDogdHJ1ZSxcbiAqICAgICBtYXA6IGZ1bmN0aW9uKCBudW1iZXIgKSB7IHJldHVybiAnJyArIG51bWJlcjsgfSxcbiAqICAgICBpbnZlcnNlTWFwOiBmdW5jdGlvbiggc3RyaW5nICkgeyByZXR1cm4gTnVtYmVyLnBhcnNlRmxvYXQoIHN0cmluZyApOyB9XG4gKiAgIH0gKTtcbiAqIHNvIHRoYXQgY2hhbmdlcyB0byB0aGUgZHluYW1pYyBQcm9wZXJ0eSB3aWxsIHJlc3VsdCBpbiBhIGNoYW5nZSBpbiB0aGUgbnVtYmVyUHJvcGVydHlQcm9wZXJ0eSdzIHZhbHVlLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgS2V5c01hdGNoaW5nIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9LZXlzTWF0Y2hpbmcuanMnO1xuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBUUHJvcGVydHkgZnJvbSAnLi9UUHJvcGVydHkuanMnO1xuaW1wb3J0IFByb3BlcnR5LCB7IFByb3BlcnR5T3B0aW9ucyB9IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi9SZWFkT25seVByb3BlcnR5LmpzJztcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgTGlua2FibGVQcm9wZXJ0eSBmcm9tICcuL0xpbmthYmxlUHJvcGVydHkuanMnO1xuXG5leHBvcnQgdHlwZSBUTnVsbGFibGVQcm9wZXJ0eTxUPiA9IFRSZWFkT25seVByb3BlcnR5PFQgfCBudWxsPiB8IFRSZWFkT25seVByb3BlcnR5PFQ+O1xuXG50eXBlIFNlbGZPcHRpb25zPFRoaXNWYWx1ZVR5cGUsIElubmVyVmFsdWVUeXBlLCBPdXRlclZhbHVlVHlwZT4gPSB7XG4gIC8vIElmIHNldCB0byB0cnVlIHRoZW4gY2hhbmdlcyB0byB0aGlzIFByb3BlcnR5IChpZiB2YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUgaXMgbm9uLW51bGwgYXQgdGhlIHRpbWUpIHdpbGwgYWxzbyBiZVxuICAvLyBtYWRlIHRvIGRlcml2ZSggdmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlICkuXG4gIGJpZGlyZWN0aW9uYWw/OiBib29sZWFuO1xuXG4gIC8vIElmIHZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSA9PT0gbnVsbCwgdGhpcyBkeW5hbWljUHJvcGVydHkgd2lsbCBhY3QgaW5zdGVhZCBsaWtlXG4gIC8vIGRlcml2ZSggdmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlICkgPT09IG5ldyBQcm9wZXJ0eSggZGVmYXVsdFZhbHVlICkuIE5vdGUgdGhhdCBpZiBhIGN1c3RvbSBtYXAgZnVuY3Rpb24gaXNcbiAgLy8gcHJvdmlkZWQsIGl0IHdpbGwgYmUgYXBwbGllZCB0byB0aGlzIGRlZmF1bHRWYWx1ZSB0byBkZXRlcm1pbmUgb3VyIFByb3BlcnR5J3MgdmFsdWUuXG4gIGRlZmF1bHRWYWx1ZT86IElubmVyVmFsdWVUeXBlO1xuXG4gIC8vIE1hcHMgYSBub24tbnVsbCB2YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUgaW50byB0aGUgUHJvcGVydHkgdG8gYmUgdXNlZC4gU2VlIHRvcC1sZXZlbCBkb2N1bWVudGF0aW9uIGZvciB1c2FnZS5cbiAgLy8gSWYgaXQncyBhIHN0cmluZywgaXQgd2lsbCBncmFiIHRoYXQgbmFtZWQgcHJvcGVydHkgb3V0IChlLmcuIGl0J3MgbGlrZSBwYXNzaW5nIHUgPT4gdVsgZGVyaXZlIF0pXG4gIGRlcml2ZT86ICggKCBvdXRlclZhbHVlOiBPdXRlclZhbHVlVHlwZSApID0+IFRSZWFkT25seVByb3BlcnR5PElubmVyVmFsdWVUeXBlPiApIHwgS2V5c01hdGNoaW5nPE91dGVyVmFsdWVUeXBlLCBUUHJvcGVydHk8SW5uZXJWYWx1ZVR5cGU+PjtcblxuICAvLyBNYXBzIG91ciBpbnB1dCBQcm9wZXJ0eSB2YWx1ZSB0by9mcm9tIHRoaXMgUHJvcGVydHkncyB2YWx1ZS4gU2VlIHRvcC1sZXZlbCBkb2N1bWVudGF0aW9uIGZvciB1c2FnZS5cbiAgLy8gSWYgaXQncyBhIHN0cmluZywgaXQgd2lsbCBncmFiIHRoYXQgbmFtZWQgcHJvcGVydHkgb3V0IChlLmcuIGl0J3MgbGlrZSBwYXNzaW5nIHUgPT4gdVsgZGVyaXZlIF0pXG4gIG1hcD86ICggKCBpbm5lclZhbHVlOiBJbm5lclZhbHVlVHlwZSApID0+IFRoaXNWYWx1ZVR5cGUgKSB8IEtleXNNYXRjaGluZzxJbm5lclZhbHVlVHlwZSwgVGhpc1ZhbHVlVHlwZT47XG4gIGludmVyc2VNYXA/OiAoICggdmFsdWU6IFRoaXNWYWx1ZVR5cGUgKSA9PiBJbm5lclZhbHVlVHlwZSApIHwgS2V5c01hdGNoaW5nPFRoaXNWYWx1ZVR5cGUsIElubmVyVmFsdWVUeXBlPjtcbn07XG5cbmV4cG9ydCB0eXBlIER5bmFtaWNQcm9wZXJ0eU9wdGlvbnM8VGhpc1ZhbHVlVHlwZSwgSW5uZXJWYWx1ZVR5cGUsIE91dGVyVmFsdWVUeXBlPiA9IFNlbGZPcHRpb25zPFRoaXNWYWx1ZVR5cGUsIElubmVyVmFsdWVUeXBlLCBPdXRlclZhbHVlVHlwZT4gJiBQcm9wZXJ0eU9wdGlvbnM8VGhpc1ZhbHVlVHlwZT47XG5cbi8vIFRoaXNWYWx1ZVR5cGU6IFRoZSB2YWx1ZSB0eXBlIG9mIHRoZSByZXN1bHRpbmcgRHluYW1pY1Byb3BlcnR5XG4vLyBJbm5lclZhbHVlVHlwZTogVGhlIHZhbHVlIHR5cGUgb2YgdGhlIGlubmVyIChkZXJpdmVkKSBQcm9wZXJ0eSwgd2hvc2UgdmFsdWUgZ2V0cyBtYXBwZWQgdG8gVGhpc1ZhbHVlVHlwZSBhbmQgYmFja1xuLy8gT3V0ZXJWYWx1ZVR5cGU6IFRoZSB2YWx1ZSB0eXBlIG9mIHRoZSBtYWluIHBhc3NlZC1pbiBQcm9wZXJ0eSAod2hvc2UgdmFsdWUgbWF5IGJlIGRlcml2ZWQgdG8gdGhlIElubmVyVmFsdWVUeXBlKVxuLy8gZS5nLjpcbi8vIGNsYXNzIEZvbyB7IGNvbG9yUHJvcGVydHk6IFByb3BlcnR5PENvbG9yPiB9XG4vLyBuZXcgRHluYW1pY1Byb3BlcnR5PG51bWJlciwgQ29sb3IsIEZvbz4oIHNvbWVGb29Qcm9wZXJ0eSwge1xuLy8gICBkZXJpdmU6ICdjb2xvclByb3BlcnR5Jyxcbi8vICAgbWFwOiAoIGNvbG9yOiBDb2xvciApID0+IGNvbG9yLmFscGhhXG4vLyB9ICk7XG4vLyBIZXJlLCBUaGlzVmFsdWVUeXBlPW51bWJlciAod2UncmUgYSBQcm9wZXJ0eTxudW1iZXI+KS4gWW91J3ZlIHBhc3NlZCBpbiBhIFByb3BlcnR5PEZvbz4sIHNvIE91dGVyVmFsdWVUeXBlIGlzIGEgRm9vLlxuLy8gSW5uZXJWYWx1ZVR5cGUgaXMgd2hhdCB3ZSBnZXQgZnJvbSBvdXIgZGVyaXZlIChDb2xvciksIGFuZCB3aGF0IHRoZSBwYXJhbWV0ZXIgb2Ygb3VyIG1hcCBpcy5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIER5bmFtaWNQcm9wZXJ0eTxUaGlzVmFsdWVUeXBlLCBJbm5lclZhbHVlVHlwZSwgT3V0ZXJWYWx1ZVR5cGU+IGV4dGVuZHMgUmVhZE9ubHlQcm9wZXJ0eTxUaGlzVmFsdWVUeXBlPiBpbXBsZW1lbnRzIExpbmthYmxlUHJvcGVydHk8VGhpc1ZhbHVlVHlwZT4ge1xuXG4gIC8vIFNldCB0byB0cnVlIHdoZW4gdGhpcyBQcm9wZXJ0eSdzIHZhbHVlIGlzIGNoYW5naW5nIGZyb20gYW4gZXh0ZXJuYWwgc291cmNlLlxuICBwcml2YXRlIGlzRXh0ZXJuYWxseUNoYW5naW5nOiBib29sZWFuO1xuXG4gIHByaXZhdGUgZGVmYXVsdFZhbHVlOiBJbm5lclZhbHVlVHlwZTtcbiAgcHJvdGVjdGVkIGRlcml2ZTogKCB1OiBPdXRlclZhbHVlVHlwZSApID0+IFRSZWFkT25seVByb3BlcnR5PElubmVyVmFsdWVUeXBlPjtcbiAgcHJvdGVjdGVkIG1hcDogKCB2OiBJbm5lclZhbHVlVHlwZSApID0+IFRoaXNWYWx1ZVR5cGU7XG4gIHByb3RlY3RlZCBpbnZlcnNlTWFwOiAoIHQ6IFRoaXNWYWx1ZVR5cGUgKSA9PiBJbm5lclZhbHVlVHlwZTtcbiAgcHJvdGVjdGVkIGJpZGlyZWN0aW9uYWw6IGJvb2xlYW47XG4gIHByaXZhdGUgdmFsdWVQcm9wZXJ0eVByb3BlcnR5OiBUTnVsbGFibGVQcm9wZXJ0eTxPdXRlclZhbHVlVHlwZT47XG4gIHByaXZhdGUgcHJvcGVydHlQcm9wZXJ0eUxpc3RlbmVyOiAoIHZhbHVlOiBJbm5lclZhbHVlVHlwZSwgb2xkVmFsdWU6IElubmVyVmFsdWVUeXBlIHwgbnVsbCwgaW5uZXJQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8SW5uZXJWYWx1ZVR5cGU+IHwgbnVsbCApID0+IHZvaWQ7XG4gIHByaXZhdGUgcHJvcGVydHlMaXN0ZW5lcjogKCBuZXdQcm9wZXJ0eVZhbHVlOiBPdXRlclZhbHVlVHlwZSB8IG51bGwsIG9sZFByb3BlcnR5VmFsdWU6IE91dGVyVmFsdWVUeXBlIHwgbnVsbCB8IHVuZGVmaW5lZCApID0+IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB2YWx1ZVByb3BlcnR5UHJvcGVydHkgLSBJZiB0aGUgdmFsdWUgaXMgbnVsbCwgaXQgaXMgY29uc2lkZXJlZCBkaXNjb25uZWN0ZWQuXG4gICAqIEBwYXJhbSBbcHJvdmlkZWRPcHRpb25zXSAtIG9wdGlvbnNcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggdmFsdWVQcm9wZXJ0eVByb3BlcnR5OiBUTnVsbGFibGVQcm9wZXJ0eTxPdXRlclZhbHVlVHlwZT4gfCBUUmVhZE9ubHlQcm9wZXJ0eTxPdXRlclZhbHVlVHlwZT4sIHByb3ZpZGVkT3B0aW9ucz86IER5bmFtaWNQcm9wZXJ0eU9wdGlvbnM8VGhpc1ZhbHVlVHlwZSwgSW5uZXJWYWx1ZVR5cGUsIE91dGVyVmFsdWVUeXBlPiApIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8RHluYW1pY1Byb3BlcnR5T3B0aW9uczxUaGlzVmFsdWVUeXBlLCBJbm5lclZhbHVlVHlwZSwgT3V0ZXJWYWx1ZVR5cGU+LCBTZWxmT3B0aW9uczxUaGlzVmFsdWVUeXBlLCBJbm5lclZhbHVlVHlwZSwgT3V0ZXJWYWx1ZVR5cGU+LCBQcm9wZXJ0eU9wdGlvbnM8VGhpc1ZhbHVlVHlwZT4+KCkoIHtcbiAgICAgIGJpZGlyZWN0aW9uYWw6IGZhbHNlLFxuICAgICAgZGVmYXVsdFZhbHVlOiBudWxsIGFzIHVua25vd24gYXMgSW5uZXJWYWx1ZVR5cGUsXG4gICAgICBkZXJpdmU6IF8uaWRlbnRpdHksXG4gICAgICBtYXA6IF8uaWRlbnRpdHksXG4gICAgICBpbnZlcnNlTWFwOiBfLmlkZW50aXR5XG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBjb25zdCBvcHRpb25zRGVyaXZlID0gb3B0aW9ucy5kZXJpdmU7XG4gICAgY29uc3Qgb3B0aW9uc01hcCA9IG9wdGlvbnMubWFwO1xuICAgIGNvbnN0IG9wdGlvbnNJbnZlcnNlTWFwID0gb3B0aW9ucy5pbnZlcnNlTWFwO1xuXG4gICAgY29uc3QgZGVyaXZlOiAoICggdTogT3V0ZXJWYWx1ZVR5cGUgKSA9PiBUUmVhZE9ubHlQcm9wZXJ0eTxJbm5lclZhbHVlVHlwZT4gKSA9IHR5cGVvZiBvcHRpb25zRGVyaXZlID09PSAnZnVuY3Rpb24nID8gb3B0aW9uc0Rlcml2ZSA6ICggKCB1OiBPdXRlclZhbHVlVHlwZSApID0+IHVbIG9wdGlvbnNEZXJpdmUgXSBhcyB1bmtub3duIGFzIFRQcm9wZXJ0eTxJbm5lclZhbHVlVHlwZT4gKTtcbiAgICBjb25zdCBtYXA6ICggKCB2OiBJbm5lclZhbHVlVHlwZSApID0+IFRoaXNWYWx1ZVR5cGUgKSA9IHR5cGVvZiBvcHRpb25zTWFwID09PSAnZnVuY3Rpb24nID8gb3B0aW9uc01hcCA6ICggKCB2OiBJbm5lclZhbHVlVHlwZSApID0+IHZbIG9wdGlvbnNNYXAgXSBhcyB1bmtub3duIGFzIFRoaXNWYWx1ZVR5cGUgKTtcbiAgICBjb25zdCBpbnZlcnNlTWFwOiAoICggdDogVGhpc1ZhbHVlVHlwZSApID0+IElubmVyVmFsdWVUeXBlICkgPSB0eXBlb2Ygb3B0aW9uc0ludmVyc2VNYXAgPT09ICdmdW5jdGlvbicgPyBvcHRpb25zSW52ZXJzZU1hcCA6ICggKCB0OiBUaGlzVmFsdWVUeXBlICkgPT4gdFsgb3B0aW9uc0ludmVyc2VNYXAgXSBhcyB1bmtub3duIGFzIElubmVyVmFsdWVUeXBlICk7XG5cbiAgICAvLyBVc2UgdGhlIFByb3BlcnR5J3MgaW5pdGlhbCB2YWx1ZVxuICAgIGNvbnN0IGluaXRpYWxWYWx1ZSA9IHZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSA9PT0gbnVsbCA/XG4gICAgICAgICAgICAgICAgICAgICAgICAgbWFwKCBvcHRpb25zLmRlZmF1bHRWYWx1ZSApIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICBtYXAoIGRlcml2ZSggdmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlICkudmFsdWUgKTtcblxuICAgIHN1cGVyKCBpbml0aWFsVmFsdWUsIG9wdGlvbnMgKTtcblxuICAgIHRoaXMuZGVmYXVsdFZhbHVlID0gb3B0aW9ucy5kZWZhdWx0VmFsdWU7XG4gICAgdGhpcy5kZXJpdmUgPSBkZXJpdmU7XG4gICAgdGhpcy5tYXAgPSBtYXA7XG4gICAgdGhpcy5pbnZlcnNlTWFwID0gaW52ZXJzZU1hcDtcbiAgICB0aGlzLmJpZGlyZWN0aW9uYWwgPSBvcHRpb25zLmJpZGlyZWN0aW9uYWw7XG4gICAgdGhpcy52YWx1ZVByb3BlcnR5UHJvcGVydHkgPSB2YWx1ZVByb3BlcnR5UHJvcGVydHk7XG4gICAgdGhpcy5pc0V4dGVybmFsbHlDaGFuZ2luZyA9IGZhbHNlO1xuXG4gICAgdGhpcy5wcm9wZXJ0eVByb3BlcnR5TGlzdGVuZXIgPSB0aGlzLm9uUHJvcGVydHlQcm9wZXJ0eUNoYW5nZS5iaW5kKCB0aGlzICk7XG4gICAgdGhpcy5wcm9wZXJ0eUxpc3RlbmVyID0gdGhpcy5vblByb3BlcnR5Q2hhbmdlLmJpbmQoIHRoaXMgKTtcblxuICAgIC8vIFJlaG9vayBvdXIgbGlzdGVuZXIgdG8gd2hhdGV2ZXIgaXMgdGhlIGFjdGl2ZSBQcm9wZXJ0eS5cbiAgICB2YWx1ZVByb3BlcnR5UHJvcGVydHkubGluayggdGhpcy5wcm9wZXJ0eUxpc3RlbmVyICk7XG5cbiAgICAvLyBJZiB3ZSBhcmVuJ3QgYmlkaXJlY3Rpb25hbCwgd2Ugc2hvdWxkIG5ldmVyIGFkZCB0aGlzIGxpc3RlbmVyLlxuICAgIGlmICggb3B0aW9ucy5iaWRpcmVjdGlvbmFsICkge1xuICAgICAgLy8gTm8gdW5saW5rIG5lZWRlZCwgc2luY2Ugb3VyIG93biBkaXNwb3NhbCB3aWxsIHJlbW92ZSB0aGlzIGxpc3RlbmVyLlxuICAgICAgdGhpcy5sYXp5TGluayggdGhpcy5vblNlbGZDaGFuZ2UuYmluZCggdGhpcyApICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIExpc3RlbmVyIGFkZGVkIHRvIHRoZSBhY3RpdmUgaW5uZXIgUHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB2YWx1ZSAtIFNob3VsZCBiZSBlaXRoZXIgb3VyIGRlZmF1bHRWYWx1ZSAoaWYgdmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlIGlzIG51bGwpLCBvclxuICAgKiAgICAgICAgICAgICAgICBkZXJpdmUoIHZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSApLnZhbHVlIG90aGVyd2lzZS5cbiAgICogQHBhcmFtIG9sZFZhbHVlIC0gSWdub3JlZCBmb3Igb3VyIHB1cnBvc2VzLCBidXQgaXMgdGhlIDJuZCBwYXJhbWV0ZXIgZm9yIFByb3BlcnR5IGxpc3RlbmVycy5cbiAgICogQHBhcmFtIGlubmVyUHJvcGVydHlcbiAgICovXG4gIHByaXZhdGUgb25Qcm9wZXJ0eVByb3BlcnR5Q2hhbmdlKCB2YWx1ZTogSW5uZXJWYWx1ZVR5cGUsIG9sZFZhbHVlOiBJbm5lclZhbHVlVHlwZSB8IG51bGwsIGlubmVyUHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PElubmVyVmFsdWVUeXBlPiB8IG51bGwgKTogdm9pZCB7XG5cbiAgICAvLyBJZiB0aGUgdmFsdWUgb2YgdGhlIGlubmVyIFByb3BlcnR5IGlzIGFscmVhZHkgdGhlIGludmVyc2Ugb2Ygb3VyIHZhbHVlLCB3ZSB3aWxsIG5ldmVyIGF0dGVtcHQgdG8gdXBkYXRlIG91clxuICAgIC8vIG93biB2YWx1ZSBpbiBhbiBhdHRlbXB0IHRvIGxpbWl0IFwicGluZy1wb25naW5nXCIgY2FzZXMgbWFpbmx5IGR1ZSB0byBudW1lcmljYWwgZXJyb3IuIE90aGVyd2lzZSBpdCB3b3VsZCBiZVxuICAgIC8vIHBvc3NpYmxlLCBnaXZlbiBjZXJ0YWluIHZhbHVlcyBhbmQgbWFwL2ludmVyc2UsIGZvciBib3RoIFByb3BlcnRpZXMgdG8gdG9nZ2xlIGJhY2stYW5kLWZvcnRoLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvMTk3IGZvciBtb3JlIGRldGFpbHMuXG4gICAgaWYgKCB0aGlzLmJpZGlyZWN0aW9uYWwgJiYgdGhpcy52YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUgIT09IG51bGwgJiYgaW5uZXJQcm9wZXJ0eSApIHtcbiAgICAgIGNvbnN0IGN1cnJlbnRQcm9wZXJ0eSA9IHRoaXMuZGVyaXZlKCB0aGlzLnZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSApO1xuICAgICAgLy8gTm90YWJseSwgd2Ugb25seSB3YW50IHRvIGNhbmNlbCBpbnRlcmFjdGlvbnMgaWYgdGhlIFByb3BlcnR5IHRoYXQgc2VudCB0aGUgbm90aWZpY2F0aW9uIGlzIHN0aWxsIHRoZSBQcm9wZXJ0eVxuICAgICAgLy8gd2UgYXJlIHBheWluZyBhdHRlbnRpb24gdG8uXG4gICAgICBpZiAoIGN1cnJlbnRQcm9wZXJ0eSA9PT0gaW5uZXJQcm9wZXJ0eSAmJiBpbm5lclByb3BlcnR5LmFyZVZhbHVlc0VxdWFsKCB0aGlzLmludmVyc2VNYXAoIHRoaXMudmFsdWUgKSwgaW5uZXJQcm9wZXJ0eS5nZXQoKSApICkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2luY2Ugd2Ugb3ZlcnJpZGUgdGhlIHNldHRlciBoZXJlLCB3ZSBuZWVkIHRvIGNhbGwgdGhlIHZlcnNpb24gb24gdGhlIHByb3RvdHlwZVxuICAgIHN1cGVyLnNldCggdGhpcy5tYXAoIHZhbHVlICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0ZW5lciBhZGRlZCB0byB0aGUgb3V0ZXIgUHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSBuZXdQcm9wZXJ0eVZhbHVlIC0gSWYgZGVyaXZlIGlzIG5vdCBwcm92aWRlZCB0aGVuIGl0IHNob3VsZCBiZSBhIHtQcm9wZXJ0eS48Kj58bnVsbH1cbiAgICogQHBhcmFtIG9sZFByb3BlcnR5VmFsdWUgLSBJZiBkZXJpdmUgaXMgbm90IHByb3ZpZGVkIHRoZW4gaXQgc2hvdWxkIGJlIGEge1Byb3BlcnR5LjwqPnxudWxsfS5cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgV2UgYWRkaXRpb25hbGx5IGhhbmRsZSB0aGUgaW5pdGlhbCBsaW5rKCkgY2FzZSB3aGVyZSB0aGlzIGlzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVuZGVmaW5lZC5cbiAgICovXG4gIHByaXZhdGUgb25Qcm9wZXJ0eUNoYW5nZSggbmV3UHJvcGVydHlWYWx1ZTogT3V0ZXJWYWx1ZVR5cGUgfCBudWxsLCBvbGRQcm9wZXJ0eVZhbHVlOiBPdXRlclZhbHVlVHlwZSB8IG51bGwgfCB1bmRlZmluZWQgKTogdm9pZCB7XG4gICAgaWYgKCBvbGRQcm9wZXJ0eVZhbHVlICkge1xuICAgICAgdGhpcy5kZXJpdmUoIG9sZFByb3BlcnR5VmFsdWUgKS51bmxpbmsoIHRoaXMucHJvcGVydHlQcm9wZXJ0eUxpc3RlbmVyICk7XG4gICAgfVxuICAgIGlmICggbmV3UHJvcGVydHlWYWx1ZSApIHtcbiAgICAgIHRoaXMuZGVyaXZlKCBuZXdQcm9wZXJ0eVZhbHVlICkubGluayggdGhpcy5wcm9wZXJ0eVByb3BlcnR5TGlzdGVuZXIgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBTd2l0Y2ggdG8gbnVsbCB3aGVuIG91ciBQcm9wZXJ0eSdzIHZhbHVlIGlzIG51bGwuXG4gICAgICB0aGlzLm9uUHJvcGVydHlQcm9wZXJ0eUNoYW5nZSggdGhpcy5kZWZhdWx0VmFsdWUsIG51bGwsIG51bGwgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVuZXIgYWRkZWQgdG8gb3Vyc2VsZiB3aGVuIHdlIGFyZSBiaWRpcmVjdGlvbmFsXG4gICAqL1xuICBwcml2YXRlIG9uU2VsZkNoYW5nZSggdmFsdWU6IFRoaXNWYWx1ZVR5cGUgKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5iaWRpcmVjdGlvbmFsICk7XG5cbiAgICBpZiAoIHRoaXMudmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlICE9PSBudWxsICkge1xuICAgICAgY29uc3QgaW5uZXJQcm9wZXJ0eSA9IHRoaXMuZGVyaXZlKCB0aGlzLnZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSApO1xuXG4gICAgICAvLyBJZiBvdXIgbmV3IHZhbHVlIGlzIHRoZSByZXN1bHQgb2YgbWFwKCkgZnJvbSB0aGUgaW5uZXIgUHJvcGVydHkncyB2YWx1ZSwgd2UgZG9uJ3Qgd2FudCB0byBwcm9wYWdhdGUgdGhhdFxuICAgICAgLy8gY2hhbmdlIGJhY2sgdG8gdGhlIGlubmVyUHJvcGVydHkgaW4gdGhlIGNhc2Ugd2hlcmUgdGhlIG1hcC9pbnZlcnNlTWFwIGFyZSBub3QgZXhhY3QgbWF0Y2hlcyAoZ2VuZXJhbGx5IGR1ZVxuICAgICAgLy8gdG8gZmxvYXRpbmctcG9pbnQgaXNzdWVzKS5cbiAgICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvMTk3IGZvciBtb3JlIGRldGFpbHMuXG4gICAgICBpZiAoICF0aGlzLmFyZVZhbHVlc0VxdWFsKCB2YWx1ZSwgdGhpcy5tYXAoIGlubmVyUHJvcGVydHkudmFsdWUgKSApICkge1xuICAgICAgICAvLyBXZSdsbCBmYWlsIGF0IHJ1bnRpbWUgaWYgbmVlZGVkLCB0aGlzIGNhc3QgaXMgbmVlZGVkIHNpbmNlIHNvbWV0aW1lcyB3ZSBjYW4gZG8gbm9uLWJpZGlyZWN0aW9uYWwgd29yayBvblxuICAgICAgICAvLyB0aGluZ3MgbGlrZSBhIERlcml2ZWRQcm9wZXJ0eVxuICAgICAgICAoIGlubmVyUHJvcGVydHkgYXMgVFByb3BlcnR5PElubmVyVmFsdWVUeXBlPiApLnZhbHVlID0gdGhpcy5pbnZlcnNlTWFwKCB2YWx1ZSApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwb3NlcyB0aGlzIFByb3BlcnR5XG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnZhbHVlUHJvcGVydHlQcm9wZXJ0eS51bmxpbmsoIHRoaXMucHJvcGVydHlMaXN0ZW5lciApO1xuXG4gICAgaWYgKCB0aGlzLnZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSAhPT0gbnVsbCApIHtcbiAgICAgIHRoaXMuZGVyaXZlKCB0aGlzLnZhbHVlUHJvcGVydHlQcm9wZXJ0eS52YWx1ZSApLnVubGluayggdGhpcy5wcm9wZXJ0eVByb3BlcnR5TGlzdGVuZXIgKTtcbiAgICB9XG5cbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXRzIHRoZSBjdXJyZW50IHByb3BlcnR5IChpZiBpdCdzIGEgUHJvcGVydHkgaW5zdGVhZCBvZiBhIFRpbnlQcm9wZXJ0eSlcbiAgICovXG4gIHB1YmxpYyByZXNldCgpOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmJpZGlyZWN0aW9uYWwsICdDYW5ub3QgcmVzZXQgYSBub24tYmlkaXJlY3Rpb25hbCBEeW5hbWljUHJvcGVydHknICk7XG5cbiAgICBpZiAoIHRoaXMudmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlICE9PSBudWxsICkge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB0aGlzLmRlcml2ZSggdGhpcy52YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUgKTtcbiAgICAgICggcHJvcGVydHkgYXMgUHJvcGVydHk8SW5uZXJWYWx1ZVR5cGU+ICkucmVzZXQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJldmVudCBzZXR0aW5nIHRoaXMgUHJvcGVydHkgbWFudWFsbHkgaWYgaXQgaXMgbm90IG1hcmtlZCBhcyBiaWRpcmVjdGlvbmFsLlxuICAgKi9cbiAgcHVibGljIG92ZXJyaWRlIHNldCggdmFsdWU6IFRoaXNWYWx1ZVR5cGUgKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5iaWRpcmVjdGlvbmFsLFxuICAgICAgYENhbm5vdCBzZXQgdmFsdWVzIGRpcmVjdGx5IHRvIGEgbm9uLWJpZGlyZWN0aW9uYWwgRHluYW1pY1Byb3BlcnR5LCB0cmllZCB0byBzZXQ6ICR7dmFsdWV9YCApO1xuXG4gICAgdGhpcy5pc0V4dGVybmFsbHlDaGFuZ2luZyA9IHRydWU7XG4gICAgc3VwZXIuc2V0KCB2YWx1ZSApO1xuXG4gICAgdGhpcy5pc0V4dGVybmFsbHlDaGFuZ2luZyA9IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRkZW4gdG8gbWFrZSBwdWJsaWNcbiAgICovXG4gIHB1YmxpYyBvdmVycmlkZSBnZXQgdmFsdWUoKTogVGhpc1ZhbHVlVHlwZSB7XG4gICAgcmV0dXJuIHN1cGVyLnZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRkZW4gdG8gbWFrZSBwdWJsaWNcbiAgICogV2UgcmFuIHBlcmZvcm1hbmNlIHRlc3RzIG9uIENocm9tZSwgYW5kIGRldGVybWluZWQgdGhhdCBjYWxsaW5nIHN1cGVyLnZhbHVlID0gbmV3VmFsdWUgaXMgc3RhdGlzdGljYWxseSBzaWduaWZpY2FudGx5XG4gICAqIHNsb3dlciBhdCB0aGUgcCA9IDAuMTAgbGV2ZWwoIGxvb3Bpbmcgb3ZlciAxMCwwMDAgdmFsdWUgY2FsbHMpLiBUaGVyZWZvcmUsIHdlIHByZWZlciB0aGlzIG9wdGltaXphdGlvbi5cbiAgICovXG4gIHB1YmxpYyBvdmVycmlkZSBzZXQgdmFsdWUoIHZhbHVlOiBUaGlzVmFsdWVUeXBlICkge1xuICAgIHRoaXMuc2V0KCB2YWx1ZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIFByb3BlcnR5IHZhbHVlIGNhbiBiZSBzZXQgZXh0ZXJuYWxseSwgYnkgc2V0KCkgb3IgLnZhbHVlID1cbiAgICovXG4gIHB1YmxpYyBvdmVycmlkZSBpc1NldHRhYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBzdXBlci5pc1NldHRhYmxlKCkgfHwgdGhpcy5iaWRpcmVjdGlvbmFsO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdEeW5hbWljUHJvcGVydHknLCBEeW5hbWljUHJvcGVydHkgKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/EnumerationDeprecatedProperty.js
// Copyright 2019-2022, University of Colorado Boulder

/**
 * Property whose value is a member of an Enumeration.
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */








/**
 * @deprecated
 */
class EnumerationDeprecatedProperty extends Property {
  /**
   * @param {EnumerationDeprecated} enumeration
   * @param {*} initialValue - one of the values from enumeration
   * @param {Object} [options]
   */
  constructor(enumeration, initialValue, options) {
    js_deprecationWarning('Use EnumerationProperty. EnumerationDeprecated should be exchanged for classes that extend EnumerationValue, see WilderEnumerationPatterns for examples.');
    assert && assert(enumeration instanceof js_EnumerationDeprecated, 'likely you are using the new and improved Enumeration, better use EnumerationProperty too.');
    assert && assert(enumeration.VALUES.includes(initialValue), `invalid initialValue: ${initialValue}`);
    if (options) {
      // client cannot specify superclass options that are not supported by EnumerationDeprecatedProperty
      assert && assert(!options.hasOwnProperty('isValidValue'), 'EnumerationDeprecatedProperty does not support isValidValue');

      // client cannot specify superclass options that are controlled by EnumerationDeprecatedProperty
      assert && assert(!options.hasOwnProperty('valueType'), 'EnumerationDeprecatedProperty sets valueType');
      assert && assert(!options.hasOwnProperty('phetioType'), 'EnumerationDeprecatedProperty sets phetioType');
    }
    options = js_merge({
      valueType: enumeration,
      phetioValueType: types_EnumerationIO(enumeration),
      validValues: enumeration.VALUES // for PhET-iO documentation and support
    }, options);
    super(initialValue, options);

    // @public (read-only)
    this.enumeration = enumeration;
  }
}
js_axon.register('EnumerationDeprecatedProperty', EnumerationDeprecatedProperty);
/* harmony default export */ const js_EnumerationDeprecatedProperty = ((/* unused pure expression or super */ null && (EnumerationDeprecatedProperty)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXByZWNhdGlvbldhcm5pbmciLCJFbnVtZXJhdGlvbkRlcHJlY2F0ZWQiLCJtZXJnZSIsIkVudW1lcmF0aW9uSU8iLCJheG9uIiwiUHJvcGVydHkiLCJFbnVtZXJhdGlvbkRlcHJlY2F0ZWRQcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwiZW51bWVyYXRpb24iLCJpbml0aWFsVmFsdWUiLCJvcHRpb25zIiwiYXNzZXJ0IiwiVkFMVUVTIiwiaW5jbHVkZXMiLCJoYXNPd25Qcm9wZXJ0eSIsInZhbHVlVHlwZSIsInBoZXRpb1ZhbHVlVHlwZSIsInZhbGlkVmFsdWVzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFbnVtZXJhdGlvbkRlcHJlY2F0ZWRQcm9wZXJ0eS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBQcm9wZXJ0eSB3aG9zZSB2YWx1ZSBpcyBhIG1lbWJlciBvZiBhbiBFbnVtZXJhdGlvbi5cbiAqXG4gKiBAYXV0aG9yIENocmlzIE1hbGxleSAoUGl4ZWxab29tLCBJbmMuKVxuICovXG5cbmltcG9ydCBkZXByZWNhdGlvbldhcm5pbmcgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL2RlcHJlY2F0aW9uV2FybmluZy5qcyc7XG5pbXBvcnQgRW51bWVyYXRpb25EZXByZWNhdGVkIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvbkRlcHJlY2F0ZWQuanMnO1xuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XG5pbXBvcnQgRW51bWVyYXRpb25JTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvRW51bWVyYXRpb25JTy5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuXG4vKipcbiAqIEBkZXByZWNhdGVkXG4gKi9cbmNsYXNzIEVudW1lcmF0aW9uRGVwcmVjYXRlZFByb3BlcnR5IGV4dGVuZHMgUHJvcGVydHkge1xuXG4gIC8qKlxuICAgKiBAcGFyYW0ge0VudW1lcmF0aW9uRGVwcmVjYXRlZH0gZW51bWVyYXRpb25cbiAgICogQHBhcmFtIHsqfSBpbml0aWFsVmFsdWUgLSBvbmUgb2YgdGhlIHZhbHVlcyBmcm9tIGVudW1lcmF0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICovXG4gIGNvbnN0cnVjdG9yKCBlbnVtZXJhdGlvbiwgaW5pdGlhbFZhbHVlLCBvcHRpb25zICkge1xuICAgIGRlcHJlY2F0aW9uV2FybmluZyggJ1VzZSBFbnVtZXJhdGlvblByb3BlcnR5LiBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgc2hvdWxkIGJlIGV4Y2hhbmdlZCBmb3IgY2xhc3NlcyB0aGF0IGV4dGVuZCBFbnVtZXJhdGlvblZhbHVlLCBzZWUgV2lsZGVyRW51bWVyYXRpb25QYXR0ZXJucyBmb3IgZXhhbXBsZXMuJyApO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZW51bWVyYXRpb24gaW5zdGFuY2VvZiBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQsICdsaWtlbHkgeW91IGFyZSB1c2luZyB0aGUgbmV3IGFuZCBpbXByb3ZlZCBFbnVtZXJhdGlvbiwgYmV0dGVyIHVzZSBFbnVtZXJhdGlvblByb3BlcnR5IHRvby4nICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZW51bWVyYXRpb24uVkFMVUVTLmluY2x1ZGVzKCBpbml0aWFsVmFsdWUgKSwgYGludmFsaWQgaW5pdGlhbFZhbHVlOiAke2luaXRpYWxWYWx1ZX1gICk7XG5cbiAgICBpZiAoIG9wdGlvbnMgKSB7XG5cbiAgICAgIC8vIGNsaWVudCBjYW5ub3Qgc3BlY2lmeSBzdXBlcmNsYXNzIG9wdGlvbnMgdGhhdCBhcmUgbm90IHN1cHBvcnRlZCBieSBFbnVtZXJhdGlvbkRlcHJlY2F0ZWRQcm9wZXJ0eVxuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoICdpc1ZhbGlkVmFsdWUnICksICdFbnVtZXJhdGlvbkRlcHJlY2F0ZWRQcm9wZXJ0eSBkb2VzIG5vdCBzdXBwb3J0IGlzVmFsaWRWYWx1ZScgKTtcblxuICAgICAgLy8gY2xpZW50IGNhbm5vdCBzcGVjaWZ5IHN1cGVyY2xhc3Mgb3B0aW9ucyB0aGF0IGFyZSBjb250cm9sbGVkIGJ5IEVudW1lcmF0aW9uRGVwcmVjYXRlZFByb3BlcnR5XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhb3B0aW9ucy5oYXNPd25Qcm9wZXJ0eSggJ3ZhbHVlVHlwZScgKSwgJ0VudW1lcmF0aW9uRGVwcmVjYXRlZFByb3BlcnR5IHNldHMgdmFsdWVUeXBlJyApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoICdwaGV0aW9UeXBlJyApLCAnRW51bWVyYXRpb25EZXByZWNhdGVkUHJvcGVydHkgc2V0cyBwaGV0aW9UeXBlJyApO1xuICAgIH1cblxuICAgIG9wdGlvbnMgPSBtZXJnZSgge1xuICAgICAgdmFsdWVUeXBlOiBlbnVtZXJhdGlvbixcbiAgICAgIHBoZXRpb1ZhbHVlVHlwZTogRW51bWVyYXRpb25JTyggZW51bWVyYXRpb24gKSxcbiAgICAgIHZhbGlkVmFsdWVzOiBlbnVtZXJhdGlvbi5WQUxVRVMgLy8gZm9yIFBoRVQtaU8gZG9jdW1lbnRhdGlvbiBhbmQgc3VwcG9ydFxuICAgIH0sIG9wdGlvbnMgKTtcblxuICAgIHN1cGVyKCBpbml0aWFsVmFsdWUsIG9wdGlvbnMgKTtcblxuICAgIC8vIEBwdWJsaWMgKHJlYWQtb25seSlcbiAgICB0aGlzLmVudW1lcmF0aW9uID0gZW51bWVyYXRpb247XG4gIH1cbn1cblxuYXhvbi5yZWdpc3RlciggJ0VudW1lcmF0aW9uRGVwcmVjYXRlZFByb3BlcnR5JywgRW51bWVyYXRpb25EZXByZWNhdGVkUHJvcGVydHkgKTtcbmV4cG9ydCBkZWZhdWx0IEVudW1lcmF0aW9uRGVwcmVjYXRlZFByb3BlcnR5OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxrQkFBa0IsTUFBTSwwQ0FBMEM7QUFDekUsT0FBT0MscUJBQXFCLE1BQU0sNkNBQTZDO0FBQy9FLE9BQU9DLEtBQUssTUFBTSw2QkFBNkI7QUFDL0MsT0FBT0MsYUFBYSxNQUFNLHdDQUF3QztBQUNsRSxPQUFPQyxJQUFJLE1BQU0sV0FBVztBQUM1QixPQUFPQyxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0EsTUFBTUMsNkJBQTZCLFNBQVNELFFBQVEsQ0FBQztFQUVuRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VFLFdBQVdBLENBQUVDLFdBQVcsRUFBRUMsWUFBWSxFQUFFQyxPQUFPLEVBQUc7SUFDaERWLGtCQUFrQixDQUFFLDBKQUEwSixDQUFFO0lBRWhMVyxNQUFNLElBQUlBLE1BQU0sQ0FBRUgsV0FBVyxZQUFZUCxxQkFBcUIsRUFBRSw0RkFBNEYsQ0FBRTtJQUM5SlUsTUFBTSxJQUFJQSxNQUFNLENBQUVILFdBQVcsQ0FBQ0ksTUFBTSxDQUFDQyxRQUFRLENBQUVKLFlBQVksQ0FBRSxFQUFHLHlCQUF3QkEsWUFBYSxFQUFDLENBQUU7SUFFeEcsSUFBS0MsT0FBTyxFQUFHO01BRWI7TUFDQUMsTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQ0QsT0FBTyxDQUFDSSxjQUFjLENBQUUsY0FBYyxDQUFFLEVBQUUsNkRBQTZELENBQUU7O01BRTVIO01BQ0FILE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUNELE9BQU8sQ0FBQ0ksY0FBYyxDQUFFLFdBQVcsQ0FBRSxFQUFFLDhDQUE4QyxDQUFFO01BQzFHSCxNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDRCxPQUFPLENBQUNJLGNBQWMsQ0FBRSxZQUFZLENBQUUsRUFBRSwrQ0FBK0MsQ0FBRTtJQUM5RztJQUVBSixPQUFPLEdBQUdSLEtBQUssQ0FBRTtNQUNmYSxTQUFTLEVBQUVQLFdBQVc7TUFDdEJRLGVBQWUsRUFBRWIsYUFBYSxDQUFFSyxXQUFXLENBQUU7TUFDN0NTLFdBQVcsRUFBRVQsV0FBVyxDQUFDSSxNQUFNLENBQUM7SUFDbEMsQ0FBQyxFQUFFRixPQUFPLENBQUU7SUFFWixLQUFLLENBQUVELFlBQVksRUFBRUMsT0FBTyxDQUFFOztJQUU5QjtJQUNBLElBQUksQ0FBQ0YsV0FBVyxHQUFHQSxXQUFXO0VBQ2hDO0FBQ0Y7QUFFQUosSUFBSSxDQUFDYyxRQUFRLENBQUUsK0JBQStCLEVBQUVaLDZCQUE2QixDQUFFO0FBQy9FLGVBQWVBLDZCQUE2QiJ9
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/MappedProperty.js
// Copyright 2022, University of Colorado Boulder

/**
 * Similar to DerivedProperty, but restricted to one Property and provides value-mapped and bidirectional support.
 * It's basically a DynamicProperty where you don't need to wrap it in an additional Property, and is typed a bit easier
 *
 * For example:
 *
 * const stringProperty = new Property<string>( 'hello' );
 * const lengthProperty = new MappedProperty( stringProperty, {
 *   map: ( str: string ) => str.length
 * } );
 * lengthProperty.value; // 5
 * stringProperty.value = 'hi';
 * lengthProperty.value; // 2
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */




class MappedProperty extends DynamicProperty {
  constructor(property, providedOptions) {
    super(new TinyProperty(property), providedOptions);
  }
}
js_axon.register('MappedProperty', MappedProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiRHluYW1pY1Byb3BlcnR5IiwiVGlueVByb3BlcnR5IiwiTWFwcGVkUHJvcGVydHkiLCJjb25zdHJ1Y3RvciIsInByb3BlcnR5IiwicHJvdmlkZWRPcHRpb25zIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNYXBwZWRQcm9wZXJ0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogU2ltaWxhciB0byBEZXJpdmVkUHJvcGVydHksIGJ1dCByZXN0cmljdGVkIHRvIG9uZSBQcm9wZXJ0eSBhbmQgcHJvdmlkZXMgdmFsdWUtbWFwcGVkIGFuZCBiaWRpcmVjdGlvbmFsIHN1cHBvcnQuXG4gKiBJdCdzIGJhc2ljYWxseSBhIER5bmFtaWNQcm9wZXJ0eSB3aGVyZSB5b3UgZG9uJ3QgbmVlZCB0byB3cmFwIGl0IGluIGFuIGFkZGl0aW9uYWwgUHJvcGVydHksIGFuZCBpcyB0eXBlZCBhIGJpdCBlYXNpZXJcbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBjb25zdCBzdHJpbmdQcm9wZXJ0eSA9IG5ldyBQcm9wZXJ0eTxzdHJpbmc+KCAnaGVsbG8nICk7XG4gKiBjb25zdCBsZW5ndGhQcm9wZXJ0eSA9IG5ldyBNYXBwZWRQcm9wZXJ0eSggc3RyaW5nUHJvcGVydHksIHtcbiAqICAgbWFwOiAoIHN0cjogc3RyaW5nICkgPT4gc3RyLmxlbmd0aFxuICogfSApO1xuICogbGVuZ3RoUHJvcGVydHkudmFsdWU7IC8vIDVcbiAqIHN0cmluZ1Byb3BlcnR5LnZhbHVlID0gJ2hpJztcbiAqIGxlbmd0aFByb3BlcnR5LnZhbHVlOyAvLyAyXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBLZXlzTWF0Y2hpbmcgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0tleXNNYXRjaGluZy5qcyc7XG5pbXBvcnQgU3RyaWN0T21pdCBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvU3RyaWN0T21pdC5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IFRSZWFkT25seVByb3BlcnR5IGZyb20gJy4vVFJlYWRPbmx5UHJvcGVydHkuanMnO1xuaW1wb3J0IER5bmFtaWNQcm9wZXJ0eSwgeyBEeW5hbWljUHJvcGVydHlPcHRpb25zIH0gZnJvbSAnLi9EeW5hbWljUHJvcGVydHkuanMnO1xuaW1wb3J0IFRpbnlQcm9wZXJ0eSBmcm9tICcuL1RpbnlQcm9wZXJ0eS5qcyc7XG5cbnR5cGUgU2VsZk9wdGlvbnM8VGhpc1ZhbHVlVHlwZSwgSW5wdXRWYWx1ZVR5cGU+ID0ge1xuICAvLyBJZiBzZXQgdG8gdHJ1ZSB0aGVuIGNoYW5nZXMgdG8gdGhpcyBQcm9wZXJ0eSAoaWYgdmFsdWVQcm9wZXJ0eVByb3BlcnR5LnZhbHVlIGlzIG5vbi1udWxsIGF0IHRoZSB0aW1lKSB3aWxsIGFsc28gYmVcbiAgLy8gbWFkZSB0byB2YWx1ZVByb3BlcnR5UHJvcGVydHkudmFsdWUuXG4gIGJpZGlyZWN0aW9uYWw/OiBib29sZWFuO1xuXG4gIC8vIE1hcHMgb3VyIGlucHV0IFByb3BlcnR5IHZhbHVlIHRvL2Zyb20gdGhpcyBQcm9wZXJ0eSdzIHZhbHVlLiBTZWUgdG9wLWxldmVsIGRvY3VtZW50YXRpb24gZm9yIHVzYWdlLlxuICAvLyBJZiBpdCdzIGEgc3RyaW5nLCBpdCB3aWxsIGdyYWIgdGhhdCBuYW1lZCBwcm9wZXJ0eSBvdXQgKGUuZy4gaXQncyBsaWtlIHBhc3NpbmcgdSA9PiB1WyBkZXJpdmUgXSlcbiAgbWFwPzogKCAoIGlucHV0VmFsdWU6IElucHV0VmFsdWVUeXBlICkgPT4gVGhpc1ZhbHVlVHlwZSApIHwgS2V5c01hdGNoaW5nPElucHV0VmFsdWVUeXBlLCBUaGlzVmFsdWVUeXBlPjtcbiAgaW52ZXJzZU1hcD86ICggKCB0aGlzVmFsdWU6IFRoaXNWYWx1ZVR5cGUgKSA9PiBJbnB1dFZhbHVlVHlwZSApIHwgS2V5c01hdGNoaW5nPFRoaXNWYWx1ZVR5cGUsIElucHV0VmFsdWVUeXBlPjtcbn07XG5cbnR5cGUgU3VwZXJPcHRpb25zPFRoaXNWYWx1ZVR5cGUsIElucHV0VmFsdWVUeXBlPiA9IFN0cmljdE9taXQ8RHluYW1pY1Byb3BlcnR5T3B0aW9uczxUaGlzVmFsdWVUeXBlLCBJbnB1dFZhbHVlVHlwZSwgVFJlYWRPbmx5UHJvcGVydHk8SW5wdXRWYWx1ZVR5cGU+PiwgJ2RlZmF1bHRWYWx1ZScgfCAnZGVyaXZlJz47XG5cbmV4cG9ydCB0eXBlIE1hcHBlZFByb3BlcnR5T3B0aW9uczxUaGlzVmFsdWVUeXBlLCBJbnB1dFZhbHVlVHlwZT4gPSBTZWxmT3B0aW9uczxUaGlzVmFsdWVUeXBlLCBJbnB1dFZhbHVlVHlwZT4gJiBTdXBlck9wdGlvbnM8VGhpc1ZhbHVlVHlwZSwgSW5wdXRWYWx1ZVR5cGU+O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXBwZWRQcm9wZXJ0eTxUaGlzVmFsdWVUeXBlLCBJbnB1dFZhbHVlVHlwZT4gZXh0ZW5kcyBEeW5hbWljUHJvcGVydHk8VGhpc1ZhbHVlVHlwZSwgSW5wdXRWYWx1ZVR5cGUsIFRSZWFkT25seVByb3BlcnR5PElucHV0VmFsdWVUeXBlPj4ge1xuICBwdWJsaWMgY29uc3RydWN0b3IoIHByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxJbnB1dFZhbHVlVHlwZT4sIHByb3ZpZGVkT3B0aW9ucz86IE1hcHBlZFByb3BlcnR5T3B0aW9uczxUaGlzVmFsdWVUeXBlLCBJbnB1dFZhbHVlVHlwZT4gKSB7XG4gICAgc3VwZXIoIG5ldyBUaW55UHJvcGVydHkoIHByb3BlcnR5ICksIHByb3ZpZGVkT3B0aW9ucyApO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdNYXBwZWRQcm9wZXJ0eScsIE1hcHBlZFByb3BlcnR5ICk7XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUlBLE9BQU9BLElBQUksTUFBTSxXQUFXO0FBRTVCLE9BQU9DLGVBQWUsTUFBa0Msc0JBQXNCO0FBQzlFLE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7QUFpQjVDLGVBQWUsTUFBTUMsY0FBYyxTQUF3Q0YsZUFBZSxDQUFtRTtFQUNwSkcsV0FBV0EsQ0FBRUMsUUFBMkMsRUFBRUMsZUFBc0UsRUFBRztJQUN4SSxLQUFLLENBQUUsSUFBSUosWUFBWSxDQUFFRyxRQUFRLENBQUUsRUFBRUMsZUFBZSxDQUFFO0VBQ3hEO0FBQ0Y7QUFFQU4sSUFBSSxDQUFDTyxRQUFRLENBQUUsZ0JBQWdCLEVBQUVKLGNBQWMsQ0FBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/Multilink.js
// Copyright 2014-2022, University of Colorado Boulder

/**
 * Multilink is used to link to multiple properties.  It is very similar to a DerivedProperty, but has no value and
 * does not conform to the Property API because it is intended for use with callbacks that do not compute a value.
 *
 * For situations where a reference to the Multilink instance is not needed (for calling dispose), use convenience
 * methods Multilink.multilink or Property.lazyLink to avoid these types of lint errors:
 *
 * // lint error: Do not use 'new' for side effects (no-new)
 * new Multilink( ... );
 *
 * // lint error: 'multilink' is assigned a value but never used (no-unused-vars)
 * const multilink = new Multilink( ... );
 *
 * @author Sam Reid (PhET Interactive Simulations)
 */


class Multilink {
  // Keep track of listeners so they can be detached

  // whether the Multilink has been disposed

  /**
   * @param dependencies
   * @param callback function that expects args in the same order as dependencies
   * @param [lazy] Optional parameter that can be set to true if this should be a lazy multilink (no immediate callback)
   */

  constructor(dependencies, callback, lazy) {
    this.dependencies = dependencies;
    assert && assert(dependencies.every(_.identity), 'dependencies should all be truthy');
    assert && assert(dependencies.length === _.uniq(dependencies).length, 'duplicate dependencies');
    this.dependencyListeners = new Map();

    // When a dependency value changes, update the list of dependencies and call back to the callback
    dependencies.forEach(dependency => {
      const listener = () => {
        // don't call listener if this Multilink has been disposed, see https://github.com/phetsims/axon/issues/192
        if (!this.isDisposed) {
          const values = dependencies.map(dependency => dependency.get());
          callback(...values);
        }
      };
      this.dependencyListeners.set(dependency, listener);
      dependency.lazyLink(listener, {
        // All other dependencies should undefer (taking deferred value) before this dependency notifies. This is
        // crucial to prevent this Multilink callback from firing with intermediate (buggy) states before all dependencies
        // have taken their final value.
        phetioDependencies: _.without(dependencies, dependency)
      });
    });

    // Send initial call back but only if we are non-lazy
    if (!lazy) {
      const values = dependencies.map(dependency => dependency.get());
      callback(...values);
    }
    this.isDisposed = false;
  }

  /**
   * Returns dependencies that are guaranteed to be defined internally.
   */
  get definedDependencies() {
    assert && assert(this.dependencies !== null, 'Dependencies should be defined, has this Property been disposed?');
    return this.dependencies;
  }
  dispose() {
    assert && assert(this.dependencies, 'A Multilink cannot be disposed twice.');
    const dependencies = this.definedDependencies;

    // Unlink from dependent properties
    for (let i = 0; i < dependencies.length; i++) {
      const dependency = dependencies[i];
      const listener = this.dependencyListeners.get(dependency);
      assert && assert(listener, 'The listener should exist');
      if (dependency.hasListener(listener)) {
        dependency.unlink(listener);
      }
    }
    this.dependencies = null;
    this.dependencyListeners.clear();
    this.isDisposed = true;
  }

  /**
   * Registers a listener with multiple properties, then notifies the listener immediately.
   * @param dependencies
   * @param callback function that takes values from the properties and returns nothing
   */

  // eslint-disable-line @typescript-eslint/explicit-member-accessibility
  static multilink(dependencies, callback) {
    // eslint-disable-line @typescript-eslint/explicit-member-accessibility
    return new Multilink(dependencies, callback, false);
  }

  /**
   * Create a Multilink from a dynamic or unknown number of dependencies.
   */
  static multilinkAny(dependencies, callback) {
    // @ts-expect-error
    return new Multilink(dependencies, callback);
  }

  /**
   * Registers a listener with multiple properties *without* an immediate callback with current values.
   * @param dependencies
   * @param callback function that takes values from the properties and returns nothing
   */

  // eslint-disable-line @typescript-eslint/explicit-member-accessibility
  static lazyMultilink(dependencies, callback) {
    // eslint-disable-line @typescript-eslint/explicit-member-accessibility
    return new Multilink(dependencies, callback, true);
  }

  /**
   * Unlinks a listener that was added with multilink or lazyMultilink.
   */
  static unmultilink(multilink) {
    multilink.dispose();
  }
}
js_axon.register('Multilink', Multilink);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiTXVsdGlsaW5rIiwiY29uc3RydWN0b3IiLCJkZXBlbmRlbmNpZXMiLCJjYWxsYmFjayIsImxhenkiLCJhc3NlcnQiLCJldmVyeSIsIl8iLCJpZGVudGl0eSIsImxlbmd0aCIsInVuaXEiLCJkZXBlbmRlbmN5TGlzdGVuZXJzIiwiTWFwIiwiZm9yRWFjaCIsImRlcGVuZGVuY3kiLCJsaXN0ZW5lciIsImlzRGlzcG9zZWQiLCJ2YWx1ZXMiLCJtYXAiLCJnZXQiLCJzZXQiLCJsYXp5TGluayIsInBoZXRpb0RlcGVuZGVuY2llcyIsIndpdGhvdXQiLCJkZWZpbmVkRGVwZW5kZW5jaWVzIiwiZGlzcG9zZSIsImkiLCJoYXNMaXN0ZW5lciIsInVubGluayIsImNsZWFyIiwibXVsdGlsaW5rIiwibXVsdGlsaW5rQW55IiwibGF6eU11bHRpbGluayIsInVubXVsdGlsaW5rIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNdWx0aWxpbmsudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogTXVsdGlsaW5rIGlzIHVzZWQgdG8gbGluayB0byBtdWx0aXBsZSBwcm9wZXJ0aWVzLiAgSXQgaXMgdmVyeSBzaW1pbGFyIHRvIGEgRGVyaXZlZFByb3BlcnR5LCBidXQgaGFzIG5vIHZhbHVlIGFuZFxuICogZG9lcyBub3QgY29uZm9ybSB0byB0aGUgUHJvcGVydHkgQVBJIGJlY2F1c2UgaXQgaXMgaW50ZW5kZWQgZm9yIHVzZSB3aXRoIGNhbGxiYWNrcyB0aGF0IGRvIG5vdCBjb21wdXRlIGEgdmFsdWUuXG4gKlxuICogRm9yIHNpdHVhdGlvbnMgd2hlcmUgYSByZWZlcmVuY2UgdG8gdGhlIE11bHRpbGluayBpbnN0YW5jZSBpcyBub3QgbmVlZGVkIChmb3IgY2FsbGluZyBkaXNwb3NlKSwgdXNlIGNvbnZlbmllbmNlXG4gKiBtZXRob2RzIE11bHRpbGluay5tdWx0aWxpbmsgb3IgUHJvcGVydHkubGF6eUxpbmsgdG8gYXZvaWQgdGhlc2UgdHlwZXMgb2YgbGludCBlcnJvcnM6XG4gKlxuICogLy8gbGludCBlcnJvcjogRG8gbm90IHVzZSAnbmV3JyBmb3Igc2lkZSBlZmZlY3RzIChuby1uZXcpXG4gKiBuZXcgTXVsdGlsaW5rKCAuLi4gKTtcbiAqXG4gKiAvLyBsaW50IGVycm9yOiAnbXVsdGlsaW5rJyBpcyBhc3NpZ25lZCBhIHZhbHVlIGJ1dCBuZXZlciB1c2VkIChuby11bnVzZWQtdmFycylcbiAqIGNvbnN0IG11bHRpbGluayA9IG5ldyBNdWx0aWxpbmsoIC4uLiApO1xuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuL1RSZWFkT25seVByb3BlcnR5LmpzJztcblxuLy8gU2hvcnRoYW5kIHRvIG1ha2UgdGhlIHR5cGUgZGVmaW5pdGlvbnMgbW9yZSBsZWdpYmxlXG50eXBlIFJPUDxUPiA9IFRSZWFkT25seVByb3BlcnR5PFQ+O1xuXG4vLyBFeHBvcnRlZCBmb3IgdGhlIGNvbnZlbmllbmNlIHVzYWdlIHNpdGVzIGluIE11bHRpbGluay5tdWx0aWxpbmtcbmV4cG9ydCB0eXBlIFJQMTxUMT4gPSBSZWFkb25seTxbIFJPUDxUMT4gXT47XG5leHBvcnQgdHlwZSBSUDI8VDEsIFQyPiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiBdPjtcbmV4cG9ydCB0eXBlIFJQMzxUMSwgVDIsIFQzPiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiBdPjtcbmV4cG9ydCB0eXBlIFJQNDxUMSwgVDIsIFQzLCBUND4gPSBSZWFkb25seTxbIFJPUDxUMT4sIFJPUDxUMj4sIFJPUDxUMz4sIFJPUDxUND4gXT47XG5leHBvcnQgdHlwZSBSUDU8VDEsIFQyLCBUMywgVDQsIFQ1PiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiBdPjtcbmV4cG9ydCB0eXBlIFJQNjxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2PiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiBdPjtcbmV4cG9ydCB0eXBlIFJQNzxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNz4gPSBSZWFkb25seTxbIFJPUDxUMT4sIFJPUDxUMj4sIFJPUDxUMz4sIFJPUDxUND4sIFJPUDxUNT4sIFJPUDxUNj4sIFJPUDxUNz4gXT47XG5leHBvcnQgdHlwZSBSUDg8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4PiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiBdPjtcbmV4cG9ydCB0eXBlIFJQOTxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5PiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiwgUk9QPFQ5PiBdPjtcbmV4cG9ydCB0eXBlIFJQMTA8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwPiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiwgUk9QPFQ5PiwgUk9QPFQxMD4gXT47XG5leHBvcnQgdHlwZSBSUDExPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExPiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiwgUk9QPFQ5PiwgUk9QPFQxMD4sIFJPUDxUMTE+IF0+O1xuZXhwb3J0IHR5cGUgUlAxMjxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyPiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiwgUk9QPFQ5PiwgUk9QPFQxMD4sIFJPUDxUMTE+LCBST1A8VDEyPiBdPjtcbmV4cG9ydCB0eXBlIFJQMTM8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzPiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiwgUk9QPFQ5PiwgUk9QPFQxMD4sIFJPUDxUMTE+LCBST1A8VDEyPiwgUk9QPFQxMz4gXT47XG5leHBvcnQgdHlwZSBSUDE0PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0PiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiwgUk9QPFQ5PiwgUk9QPFQxMD4sIFJPUDxUMTE+LCBST1A8VDEyPiwgUk9QPFQxMz4sIFJPUDxUMTQ+IF0+O1xuZXhwb3J0IHR5cGUgUlAxNTxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiA9IFJlYWRvbmx5PFsgUk9QPFQxPiwgUk9QPFQyPiwgUk9QPFQzPiwgUk9QPFQ0PiwgUk9QPFQ1PiwgUk9QPFQ2PiwgUk9QPFQ3PiwgUk9QPFQ4PiwgUk9QPFQ5PiwgUk9QPFQxMD4sIFJPUDxUMTE+LCBST1A8VDEyPiwgUk9QPFQxMz4sIFJPUDxUMTQ+LCBST1A8VDE1PiBdPjtcblxuZXhwb3J0IHR5cGUgRGVwZW5kZW5jaWVzPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+ID1cbiAgUlAxPFQxPiB8XG4gIFJQMjxUMSwgVDI+IHxcbiAgUlAzPFQxLCBUMiwgVDM+IHxcbiAgUlA0PFQxLCBUMiwgVDMsIFQ0PiB8XG4gIFJQNTxUMSwgVDIsIFQzLCBUNCwgVDU+IHxcbiAgUlA2PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDY+IHxcbiAgUlA3PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3PiB8XG4gIFJQODxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDg+IHxcbiAgUlA5PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDk+IHxcbiAgUlAxMDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTA+IHxcbiAgUlAxMTxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMT4gfFxuICBSUDEyPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTI+IHxcbiAgUlAxMzxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTM+IHxcbiAgUlAxNDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxND4gfFxuICBSUDE1PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+O1xuXG4vLyBNYXJrZXItbGlrZSBpbnRlcmZhY2UgZm9yIHVzZSB3aXRoIE11bHRpbGluay51bm11bHRpbGluay4gIFRoaXMgcHJvdmlkZXMgdHlwZSBzYWZldHkgdG8gbWFrZSBzdXJlIHVubXVsdGlsaW5rIGlzIGNhbGxlZFxuLy8gd2l0aCBhIHR5cGUtc2FmZSBhcmd1bWVudC5cbmV4cG9ydCB0eXBlIFVua25vd25NdWx0aWxpbmsgPSBNdWx0aWxpbms8dW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93biwgdW5rbm93bj47XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiB7XG5cbiAgcHJpdmF0ZSBkZXBlbmRlbmNpZXM6IERlcGVuZGVuY2llczxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiB8IG51bGw7XG5cbiAgLy8gS2VlcCB0cmFjayBvZiBsaXN0ZW5lcnMgc28gdGhleSBjYW4gYmUgZGV0YWNoZWRcbiAgcHJpdmF0ZSBkZXBlbmRlbmN5TGlzdGVuZXJzOiBNYXA8VFJlYWRPbmx5UHJvcGVydHk8dW5rbm93bj4sICgpID0+IHZvaWQ+O1xuXG4gIC8vIHdoZXRoZXIgdGhlIE11bHRpbGluayBoYXMgYmVlbiBkaXNwb3NlZFxuICBwcml2YXRlIGlzRGlzcG9zZWQ/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBAcGFyYW0gZGVwZW5kZW5jaWVzXG4gICAqIEBwYXJhbSBjYWxsYmFjayBmdW5jdGlvbiB0aGF0IGV4cGVjdHMgYXJncyBpbiB0aGUgc2FtZSBvcmRlciBhcyBkZXBlbmRlbmNpZXNcbiAgICogQHBhcmFtIFtsYXp5XSBPcHRpb25hbCBwYXJhbWV0ZXIgdGhhdCBjYW4gYmUgc2V0IHRvIHRydWUgaWYgdGhpcyBzaG91bGQgYmUgYSBsYXp5IG11bHRpbGluayAobm8gaW1tZWRpYXRlIGNhbGxiYWNrKVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTxUMT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDI8VDEsIFQyPiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDM8VDEsIFQyLCBUMz4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzIF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQNDxUMSwgVDIsIFQzLCBUND4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDU8VDEsIFQyLCBUMywgVDQsIFQ1PiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDY8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2IF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQNzxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNz4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNyBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDg8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4PiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDk8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5IF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTA8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwPiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDExPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExPiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExIF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTI8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMj4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyIF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTM8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzPiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMyBdICkgPT4gdm9pZCwgbGF6eT86IGJvb2xlYW4gKSA7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBSUDE0PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0PiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0IF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IFJQMTU8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1IF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIDtcbiAgcHVibGljIGNvbnN0cnVjdG9yKCBkZXBlbmRlbmNpZXM6IERlcGVuZGVuY2llczxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUgXSApID0+IHZvaWQsIGxhenk/OiBib29sZWFuICk7XG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZGVwZW5kZW5jaWVzOiBEZXBlbmRlbmNpZXM8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1IF0gKSA9PiB2b2lkLCBsYXp5PzogYm9vbGVhbiApIHtcblxuICAgIHRoaXMuZGVwZW5kZW5jaWVzID0gZGVwZW5kZW5jaWVzO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZGVwZW5kZW5jaWVzLmV2ZXJ5KCBfLmlkZW50aXR5ICksICdkZXBlbmRlbmNpZXMgc2hvdWxkIGFsbCBiZSB0cnV0aHknICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZGVwZW5kZW5jaWVzLmxlbmd0aCA9PT0gXy51bmlxKCBkZXBlbmRlbmNpZXMgKS5sZW5ndGgsICdkdXBsaWNhdGUgZGVwZW5kZW5jaWVzJyApO1xuXG4gICAgdGhpcy5kZXBlbmRlbmN5TGlzdGVuZXJzID0gbmV3IE1hcCgpO1xuXG4gICAgLy8gV2hlbiBhIGRlcGVuZGVuY3kgdmFsdWUgY2hhbmdlcywgdXBkYXRlIHRoZSBsaXN0IG9mIGRlcGVuZGVuY2llcyBhbmQgY2FsbCBiYWNrIHRvIHRoZSBjYWxsYmFja1xuICAgIGRlcGVuZGVuY2llcy5mb3JFYWNoKCBkZXBlbmRlbmN5ID0+IHtcbiAgICAgIGNvbnN0IGxpc3RlbmVyID0gKCkgPT4ge1xuXG4gICAgICAgIC8vIGRvbid0IGNhbGwgbGlzdGVuZXIgaWYgdGhpcyBNdWx0aWxpbmsgaGFzIGJlZW4gZGlzcG9zZWQsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvYXhvbi9pc3N1ZXMvMTkyXG4gICAgICAgIGlmICggIXRoaXMuaXNEaXNwb3NlZCApIHtcblxuICAgICAgICAgIGNvbnN0IHZhbHVlcyA9IGRlcGVuZGVuY2llcy5tYXAoIGRlcGVuZGVuY3kgPT4gZGVwZW5kZW5jeS5nZXQoKSApIGFzIFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSBdO1xuICAgICAgICAgIGNhbGxiYWNrKCAuLi52YWx1ZXMgKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHRoaXMuZGVwZW5kZW5jeUxpc3RlbmVycy5zZXQoIGRlcGVuZGVuY3ksIGxpc3RlbmVyICk7XG4gICAgICBkZXBlbmRlbmN5LmxhenlMaW5rKCBsaXN0ZW5lciwge1xuXG4gICAgICAgIC8vIEFsbCBvdGhlciBkZXBlbmRlbmNpZXMgc2hvdWxkIHVuZGVmZXIgKHRha2luZyBkZWZlcnJlZCB2YWx1ZSkgYmVmb3JlIHRoaXMgZGVwZW5kZW5jeSBub3RpZmllcy4gVGhpcyBpc1xuICAgICAgICAvLyBjcnVjaWFsIHRvIHByZXZlbnQgdGhpcyBNdWx0aWxpbmsgY2FsbGJhY2sgZnJvbSBmaXJpbmcgd2l0aCBpbnRlcm1lZGlhdGUgKGJ1Z2d5KSBzdGF0ZXMgYmVmb3JlIGFsbCBkZXBlbmRlbmNpZXNcbiAgICAgICAgLy8gaGF2ZSB0YWtlbiB0aGVpciBmaW5hbCB2YWx1ZS5cbiAgICAgICAgcGhldGlvRGVwZW5kZW5jaWVzOiBfLndpdGhvdXQoIGRlcGVuZGVuY2llcywgZGVwZW5kZW5jeSApXG4gICAgICB9ICk7XG4gICAgfSApO1xuXG4gICAgLy8gU2VuZCBpbml0aWFsIGNhbGwgYmFjayBidXQgb25seSBpZiB3ZSBhcmUgbm9uLWxhenlcbiAgICBpZiAoICFsYXp5ICkge1xuXG4gICAgICBjb25zdCB2YWx1ZXMgPSBkZXBlbmRlbmNpZXMubWFwKCBkZXBlbmRlbmN5ID0+IGRlcGVuZGVuY3kuZ2V0KCkgKSBhcyBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTUgXTtcbiAgICAgIGNhbGxiYWNrKCAuLi52YWx1ZXMgKTtcbiAgICB9XG5cbiAgICB0aGlzLmlzRGlzcG9zZWQgPSBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGRlcGVuZGVuY2llcyB0aGF0IGFyZSBndWFyYW50ZWVkIHRvIGJlIGRlZmluZWQgaW50ZXJuYWxseS5cbiAgICovXG4gIHByaXZhdGUgZ2V0IGRlZmluZWREZXBlbmRlbmNpZXMoKTogRGVwZW5kZW5jaWVzPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+IHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmRlcGVuZGVuY2llcyAhPT0gbnVsbCwgJ0RlcGVuZGVuY2llcyBzaG91bGQgYmUgZGVmaW5lZCwgaGFzIHRoaXMgUHJvcGVydHkgYmVlbiBkaXNwb3NlZD8nICk7XG4gICAgcmV0dXJuIHRoaXMuZGVwZW5kZW5jaWVzITtcbiAgfVxuXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuZGVwZW5kZW5jaWVzLCAnQSBNdWx0aWxpbmsgY2Fubm90IGJlIGRpc3Bvc2VkIHR3aWNlLicgKTtcblxuICAgIGNvbnN0IGRlcGVuZGVuY2llcyA9IHRoaXMuZGVmaW5lZERlcGVuZGVuY2llcztcblxuICAgIC8vIFVubGluayBmcm9tIGRlcGVuZGVudCBwcm9wZXJ0aWVzXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZGVwZW5kZW5jaWVzLmxlbmd0aDsgaSsrICkge1xuICAgICAgY29uc3QgZGVwZW5kZW5jeSA9IGRlcGVuZGVuY2llc1sgaSBdO1xuICAgICAgY29uc3QgbGlzdGVuZXIgPSB0aGlzLmRlcGVuZGVuY3lMaXN0ZW5lcnMuZ2V0KCBkZXBlbmRlbmN5ICkhO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggbGlzdGVuZXIsICdUaGUgbGlzdGVuZXIgc2hvdWxkIGV4aXN0JyApO1xuXG4gICAgICBpZiAoIGRlcGVuZGVuY3kuaGFzTGlzdGVuZXIoIGxpc3RlbmVyICkgKSB7XG4gICAgICAgIGRlcGVuZGVuY3kudW5saW5rKCBsaXN0ZW5lciApO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmRlcGVuZGVuY2llcyA9IG51bGw7XG4gICAgdGhpcy5kZXBlbmRlbmN5TGlzdGVuZXJzLmNsZWFyKCk7XG4gICAgdGhpcy5pc0Rpc3Bvc2VkID0gdHJ1ZTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHdpdGggbXVsdGlwbGUgcHJvcGVydGllcywgdGhlbiBub3RpZmllcyB0aGUgbGlzdGVuZXIgaW1tZWRpYXRlbHkuXG4gICAqIEBwYXJhbSBkZXBlbmRlbmNpZXNcbiAgICogQHBhcmFtIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdmFsdWVzIGZyb20gdGhlIHByb3BlcnRpZXMgYW5kIHJldHVybnMgbm90aGluZ1xuICAgKi9cbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDE8VDE+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQMjxUMSwgVDI+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDM8VDEsIFQyLCBUMz4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDQ8VDEsIFQyLCBUMywgVDQ+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQNTxUMSwgVDIsIFQzLCBUNCwgVDU+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDY8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDc8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDc+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQODxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDg+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDk8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDEwPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMD4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQMTE8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTE+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQMTI8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMj4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDEzPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMz4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQMTQ8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQ+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQMTU8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIG11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBEZXBlbmRlbmNpZXM8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gICAgcmV0dXJuIG5ldyBNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llcywgY2FsbGJhY2ssIGZhbHNlICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgTXVsdGlsaW5rIGZyb20gYSBkeW5hbWljIG9yIHVua25vd24gbnVtYmVyIG9mIGRlcGVuZGVuY2llcy5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbXVsdGlsaW5rQW55KCBkZXBlbmRlbmNpZXM6IFJlYWRvbmx5PFRSZWFkT25seVByb3BlcnR5PHVua25vd24+W10+LCBjYWxsYmFjazogKCkgPT4gdm9pZCApOiBVbmtub3duTXVsdGlsaW5rIHtcblxuICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICByZXR1cm4gbmV3IE11bHRpbGluayggZGVwZW5kZW5jaWVzLCBjYWxsYmFjayApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHdpdGggbXVsdGlwbGUgcHJvcGVydGllcyAqd2l0aG91dCogYW4gaW1tZWRpYXRlIGNhbGxiYWNrIHdpdGggY3VycmVudCB2YWx1ZXMuXG4gICAqIEBwYXJhbSBkZXBlbmRlbmNpZXNcbiAgICogQHBhcmFtIGNhbGxiYWNrIGZ1bmN0aW9uIHRoYXQgdGFrZXMgdmFsdWVzIGZyb20gdGhlIHByb3BlcnRpZXMgYW5kIHJldHVybnMgbm90aGluZ1xuICAgKi9cbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlAxPFQxPiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlAyPFQxLCBUMj4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbGF6eU11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDM8VDEsIFQyLCBUMz4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlA0PFQxLCBUMiwgVDMsIFQ0PiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlA1PFQxLCBUMiwgVDMsIFQ0LCBUNT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUgXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbGF6eU11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDY8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNj4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlA3PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3PiwgY2FsbGJhY2s6ICggLi4ucGFyYW1zOiBbIFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlA4PFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOD4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDggXSApID0+IHZvaWQgKTogTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICBzdGF0aWMgbGF6eU11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PiggZGVwZW5kZW5jaWVzOiBSUDk8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlAxMDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTA+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlAxMTxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSBdICkgPT4gdm9pZCApOiBNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gIHN0YXRpYyBsYXp5TXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQMTI8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMj4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlAxMzxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTM+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzIF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogUlAxNDxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxND4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCBdICkgPT4gdm9pZCApOiBNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT47IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gIHN0YXRpYyBsYXp5TXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXM6IFJQMTU8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4sIGNhbGxiYWNrOiAoIC4uLnBhcmFtczogWyBUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1IF0gKSA9PiB2b2lkICk6IE11bHRpbGluazxUMSwgVDIsIFQzLCBUNCwgVDUsIFQ2LCBUNywgVDgsIFQ5LCBUMTAsIFQxMSwgVDEyLCBUMTMsIFQxNCwgVDE1PjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgc3RhdGljIGxhenlNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4oIGRlcGVuZGVuY2llczogRGVwZW5kZW5jaWVzPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+LCBjYWxsYmFjazogKCAuLi5wYXJhbXM6IFsgVDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNSBdICkgPT4gdm9pZCApOiBNdWx0aWxpbms8VDEsIFQyLCBUMywgVDQsIFQ1LCBUNiwgVDcsIFQ4LCBUOSwgVDEwLCBUMTEsIFQxMiwgVDEzLCBUMTQsIFQxNT4geyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tZW1iZXItYWNjZXNzaWJpbGl0eVxuICAgIHJldHVybiBuZXcgTXVsdGlsaW5rPFQxLCBUMiwgVDMsIFQ0LCBUNSwgVDYsIFQ3LCBUOCwgVDksIFQxMCwgVDExLCBUMTIsIFQxMywgVDE0LCBUMTU+KCBkZXBlbmRlbmNpZXMsIGNhbGxiYWNrLCB0cnVlICk7XG4gIH1cblxuICAvKipcbiAgICogVW5saW5rcyBhIGxpc3RlbmVyIHRoYXQgd2FzIGFkZGVkIHdpdGggbXVsdGlsaW5rIG9yIGxhenlNdWx0aWxpbmsuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHVubXVsdGlsaW5rKCBtdWx0aWxpbms6IFVua25vd25NdWx0aWxpbmsgKTogdm9pZCB7XG4gICAgbXVsdGlsaW5rLmRpc3Bvc2UoKTtcbiAgfVxufVxuXG5heG9uLnJlZ2lzdGVyKCAnTXVsdGlsaW5rJywgTXVsdGlsaW5rICk7XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxJQUFJLE1BQU0sV0FBVztBQTRDNUIsZUFBZSxNQUFNQyxTQUFTLENBQW1FO0VBSS9GOztFQUdBOztFQUdBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0VBaUJTQyxXQUFXQSxDQUFFQyxZQUE0RixFQUFFQyxRQUFxRyxFQUFFQyxJQUFjLEVBQUc7SUFFeE8sSUFBSSxDQUFDRixZQUFZLEdBQUdBLFlBQVk7SUFFaENHLE1BQU0sSUFBSUEsTUFBTSxDQUFFSCxZQUFZLENBQUNJLEtB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
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/Pool.js
// Copyright 2022-2023, University of Colorado Boulder

/**
 * PROTOTYPE version for better support
 *
 * Object pooling mixin, for cases where creating new objects is expensive, and we'd rather mark some objects as able
 * to be reused (i.e. 'in the pool'). This provides a pool of objects for each type it is invoked on. It allows for
 * getting "new" objects that can either be constructed OR pulled in from a pool, and requires that the objects are
 * essentially able to "re-run" the constructor. Then when putting the object back in the pool, references should be
 * released, so memory isn't leaked.
 *
 * With this style of pooling, the following should be standard boilerplate within the class:

 freeToPool() {
    MyType.pool.freeToPool( this );
  }

 public static pool = new Pool( MyType );

 * and can additionally implement TPoolable to make it clear that the type is pooled
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class Pool {
  objects = [];
  constructor(type, providedOptions) {
    const options = optionize()({
      defaultArguments: [],
      initialize: type.prototype.initialize,
      maxSize: 100,
      initialSize: 0,
      useDefaultConstruction: false
    }, providedOptions);
    assert && assert(options.maxSize >= 0);
    assert && assert(options.initialSize >= 0);
    this._maxPoolSize = options.maxSize;

    // There is a madness to this craziness. We'd want to use the method noted at
    // https://stackoverflow.com/questions/1606797/use-of-apply-with-new-operator-is-this-possible, but the type is
    // not provided in the arguments array below. By calling bind on itself, we're able to get a version of bind that
    // inserts the constructor as the first argument of the .apply called later so we don't create garbage by having
    // to pack `arguments` into an array AND THEN concatenate it with a new first element (the type itself).
    this.partialConstructor = Function.prototype.bind.bind(type, type);

    // Basically our type constructor, but with the default arguments included already.
    this.DefaultConstructor = this.partialConstructor(...options.defaultArguments); // eslint-disable-line @typescript-eslint/no-unnecessary-type-assertion

    this.initialize = options.initialize;
    this.useDefaultConstruction = options.useDefaultConstruction;

    // Initialize the pool (if it should have objects)
    while (this.objects.length < options.initialSize) {
      this.objects.push(this.createDefaultObject());
    }
  }
  createDefaultObject() {
    return new this.DefaultConstructor();
  }

  /**
   * Returns an object with arbitrary state (possibly constructed with the default arguments).
   */
  fetch() {
    return this.objects.length ? this.objects.pop() : this.createDefaultObject();
  }

  /**
   * Returns an object that behaves as if it was constructed with the given arguments. May result in a new object
   * being created (if the pool is empty), or it may use the constructor to mutate an object from the pool.
   */
  create(...args) {
    let result;
    if (this.objects.length) {
      result = this.objects.pop();
      this.initialize.apply(result, args);
    } else if (this.useDefaultConstruction) {
      result = this.createDefaultObject();
      this.initialize.apply(result, args);
    } else {
      result = new (this.partialConstructor(...args))();
    }
    return result;
  }

  /**
   * Returns the current size of the pool.
   */
  get poolSize() {
    return this.objects.length;
  }

  /**
   * Sets the maximum pool size.
   */
  set maxPoolSize(value) {
    assert && assert(value === Number.POSITIVE_INFINITY || Number.isInteger(value) && value >= 0, 'maxPoolSize should be a non-negative integer or infinity');
    this._maxPoolSize = value;
  }

  /**
   * Returns the maximum pool size.
   */
  get maxPoolSize() {
    return this._maxPoolSize;
  }
  freeToPool(object) {
    if (this.objects.length < this.maxPoolSize) {
      this.objects.push(object);
    }
  }
  forEach(callback) {
    this.objects.forEach(callback);
  }
}
js_phetCore.register('Pool', Pool);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIm9wdGlvbml6ZSIsIlBvb2wiLCJvYmplY3RzIiwiY29uc3RydWN0b3IiLCJ0eXBlIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImRlZmF1bHRBcmd1bWVudHMiLCJpbml0aWFsaXplIiwicHJvdG90eXBlIiwibWF4U2l6ZSIsImluaXRpYWxTaXplIiwidXNlRGVmYXVsdENvbnN0cnVjdGlvbiIsImFzc2VydCIsIl9tYXhQb29sU2l6ZSIsInBhcnRpYWxDb25zdHJ1Y3RvciIsIkZ1bmN0aW9uIiwiYmluZCIsIkRlZmF1bHRDb25zdHJ1Y3RvciIsImxlbmd0aCIsInB1c2giLCJjcmVhdGVEZWZhdWx0T2JqZWN0IiwiZmV0Y2giLCJwb3AiLCJjcmVhdGUiLCJhcmdzIiwicmVzdWx0IiwiYXBwbHkiLCJwb29sU2l6ZSIsIm1heFBvb2xTaXplIiwidmFsdWUiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsImlzSW50ZWdlciIsImZyZWVUb1Bvb2wiLCJvYmplY3QiLCJmb3JFYWNoIiwiY2FsbGJhY2siLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlBvb2wudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogUFJPVE9UWVBFIHZlcnNpb24gZm9yIGJldHRlciBzdXBwb3J0XG4gKlxuICogT2JqZWN0IHBvb2xpbmcgbWl4aW4sIGZvciBjYXNlcyB3aGVyZSBjcmVhdGluZyBuZXcgb2JqZWN0cyBpcyBleHBlbnNpdmUsIGFuZCB3ZSdkIHJhdGhlciBtYXJrIHNvbWUgb2JqZWN0cyBhcyBhYmxlXG4gKiB0byBiZSByZXVzZWQgKGkuZS4gJ2luIHRoZSBwb29sJykuIFRoaXMgcHJvdmlkZXMgYSBwb29sIG9mIG9iamVjdHMgZm9yIGVhY2ggdHlwZSBpdCBpcyBpbnZva2VkIG9uLiBJdCBhbGxvd3MgZm9yXG4gKiBnZXR0aW5nIFwibmV3XCIgb2JqZWN0cyB0aGF0IGNhbiBlaXRoZXIgYmUgY29uc3RydWN0ZWQgT1IgcHVsbGVkIGluIGZyb20gYSBwb29sLCBhbmQgcmVxdWlyZXMgdGhhdCB0aGUgb2JqZWN0cyBhcmVcbiAqIGVzc2VudGlhbGx5IGFibGUgdG8gXCJyZS1ydW5cIiB0aGUgY29uc3RydWN0b3IuIFRoZW4gd2hlbiBwdXR0aW5nIHRoZSBvYmplY3QgYmFjayBpbiB0aGUgcG9vbCwgcmVmZXJlbmNlcyBzaG91bGQgYmVcbiAqIHJlbGVhc2VkLCBzbyBtZW1vcnkgaXNuJ3QgbGVha2VkLlxuICpcbiAqIFdpdGggdGhpcyBzdHlsZSBvZiBwb29saW5nLCB0aGUgZm9sbG93aW5nIHNob3VsZCBiZSBzdGFuZGFyZCBib2lsZXJwbGF0ZSB3aXRoaW4gdGhlIGNsYXNzOlxuXG4gZnJlZVRvUG9vbCgpIHtcbiAgICBNeVR5cGUucG9vbC5mcmVlVG9Qb29sKCB0aGlzICk7XG4gIH1cblxuIHB1YmxpYyBzdGF0aWMgcG9vbCA9IG5ldyBQb29sKCBNeVR5cGUgKTtcblxuICogYW5kIGNhbiBhZGRpdGlvbmFsbHkgaW1wbGVtZW50IFRQb29sYWJsZSB0byBtYWtlIGl0IGNsZWFyIHRoYXQgdGhlIHR5cGUgaXMgcG9vbGVkXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBDb25zdHJ1Y3RvciBmcm9tICcuL3R5cGVzL0NvbnN0cnVjdG9yLmpzJztcbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi9vcHRpb25pemUuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4vdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuXG5leHBvcnQgdHlwZSBQb29sYWJsZU9wdGlvbnM8VCBleHRlbmRzIENvbnN0cnVjdG9yLCBQYXJhbXMgZXh0ZW5kcyBJbnRlbnRpb25hbEFueVtdID0gQ29uc3RydWN0b3JQYXJhbWV0ZXJzPFQ+PiA9IHtcbiAgLy8gSWYgYW4gb2JqZWN0IG5lZWRzIHRvIGJlIGNyZWF0ZWQgd2l0aG91dCBhIGRpcmVjdCBjYWxsIChzYXksIHRvIGZpbGwgdGhlIHBvb2wgaW5pdGlhbGx5KSwgdGhlc2UgYXJlIHRoZSBhcmd1bWVudHNcbiAgLy8gdGhhdCB3aWxsIGJlIHBhc3NlZCBpbnRvIHRoZSBjb25zdHJ1Y3RvclxuICBkZWZhdWx0QXJndW1lbnRzPzogUGFyYW1zO1xuXG4gIC8vIFRoZSBmdW5jdGlvbiB0byBjYWxsIG9uIHRoZSBvYmplY3RzIHRvIHJlaW5pdGlhbGl6ZSB0aGVtICh0aGF0IGlzIGVpdGhlciB0aGUgY29uc3RydWN0b3IsIG9yIGFjdHMgbGlrZSB0aGVcbiAgLy8gY29uc3RydWN0b3IpLlxuICBpbml0aWFsaXplPzogUG9vbGFibGVJbml0aWFsaXplcjxULCBQYXJhbXM+O1xuXG4gIC8vIEEgbGltaXQgZm9yIHRoZSBwb29sIHNpemUgKHNvIHdlIGRvbid0IGxlYWsgbWVtb3J5IGJ5IGdyb3dpbmcgdGhlIHBvb2wgZmFzdGVyIHRoYW4gd2UgdGFrZSB0aGluZ3MgZnJvbSBpdCkuIENhbiBiZVxuICAvLyBjdXN0b21pemVkIGJ5IHNldHRpbmcgVHlwZS5tYXhQb29sU2l6ZVxuICBtYXhTaXplPzogbnVtYmVyO1xuXG4gIC8vIFRoZSBpbml0aWFsIHNpemUgb2YgdGhlIHBvb2wuIFRvIGZpbGwgaXQsIG9iamVjdHMgd2lsbCBiZSBjcmVhdGVkIHdpdGggdGhlIGRlZmF1bHQgYXJndW1lbnRzLlxuICBpbml0aWFsU2l6ZT86IG51bWJlcjtcblxuICAvLyBJZiB0cnVlLCB3aGVuIGNvbnN0cnVjdGluZyB0aGUgZGVmYXVsdCBhcmd1bWVudHMgd2lsbCBhbHdheXMgYmUgdXNlZCAoYW5kIHRoZW4gaW5pdGlhbGl6ZWQgd2l0aCB0aGUgaW5pdGlhbGl6ZXIpXG4gIC8vIGluc3RlYWQgb2YganVzdCBwcm92aWRpbmcgdGhlIGFyZ3VtZW50cyBzdHJhaWdodCB0byB0aGUgY29uc3RydWN0b3IuXG4gIHVzZURlZmF1bHRDb25zdHJ1Y3Rpb24/OiBib29sZWFuO1xufTtcbnR5cGUgUG9vbGFibGVJbml0aWFsaXplcjxUIGV4dGVuZHMgQ29uc3RydWN0b3IsIFBhcmFtcyBleHRlbmRzIEludGVudGlvbmFsQW55W10gPSBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8VD4+ID0gKCAuLi5hcmdzOiBQYXJhbXMgKSA9PiBJbnN0YW5jZVR5cGU8VD47XG5cbmV4cG9ydCB0eXBlIFRQb29sYWJsZSA9IHtcblxuICAvLyBBZGRzIHRoaXMgb2JqZWN0IGludG8gdGhlIHBvb2wsIHNvIHRoYXQgaXQgY2FuIGJlIHJldXNlZCBlbHNld2hlcmUuIEdlbmVyYWxseSB3aGVuIHRoaXMgaXMgZG9uZSwgbm8gb3RoZXJcbiAgLy8gcmVmZXJlbmNlcyB0byB0aGUgb2JqZWN0IHNob3VsZCBiZSBoZWxkIChzaW5jZSB0aGV5IHNob3VsZCBub3QgYmUgdXNlZCBhdCBhbGwpLlxuICBmcmVlVG9Qb29sOiAoKSA9PiB2b2lkO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9vbDxUIGV4dGVuZHMgQ29uc3RydWN0b3IsIFBhcmFtcyBleHRlbmRzIEludGVudGlvbmFsQW55W10gPSBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8VD4+IHtcbiAgcHJpdmF0ZSByZWFkb25seSBvYmplY3RzOiBJbnN0YW5jZVR5cGU8VD5bXSA9IFtdO1xuXG4gIHByaXZhdGUgX21heFBvb2xTaXplOiBudW1iZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGFydGlhbENvbnN0cnVjdG9yOiAoIC4uLmFyZ3M6IEludGVudGlvbmFsQW55W10gKSA9PiBJbnRlbnRpb25hbEFueTtcbiAgcHJpdmF0ZSByZWFkb25seSBEZWZhdWx0Q29uc3RydWN0b3I6IEludGVudGlvbmFsQW55O1xuICBwcml2YXRlIHJlYWRvbmx5IGluaXRpYWxpemU6IFBvb2xhYmxlSW5pdGlhbGl6ZXI8VCwgUGFyYW1zPjtcbiAgcHJpdmF0ZSByZWFkb25seSB1c2VEZWZhdWx0Q29uc3RydWN0aW9uOiBib29sZWFuO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggdHlwZTogVCwgcHJvdmlkZWRPcHRpb25zPzogUG9vbGFibGVPcHRpb25zPFQsIFBhcmFtcz4gKSB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxQb29sYWJsZU9wdGlvbnM8VCwgUGFyYW1zPiwgUG9vbGFibGVPcHRpb25zPFQsIFBhcmFtcz4+KCkoIHtcblxuICAgICAgZGVmYXVsdEFyZ3VtZW50czogW10gYXMgdW5rbm93biBhcyBQYXJhbXMsXG4gICAgICBpbml0aWFsaXplOiAoIHR5cGUucHJvdG90eXBlIGFzIHVua25vd24gYXMgeyBpbml0aWFsaXplOiBQb29sYWJsZUluaXRpYWxpemVyPFQsIFBhcmFtcz4gfSApLmluaXRpYWxpemUsXG4gICAgICBtYXhTaXplOiAxMDAsXG4gICAgICBpbml0aWFsU2l6ZTogMCxcbiAgICAgIHVzZURlZmF1bHRDb25zdHJ1Y3Rpb246IGZhbHNlXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLm1heFNpemUgPj0gMCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG9wdGlvbnMuaW5pdGlhbFNpemUgPj0gMCApO1xuXG4gICAgdGhpcy5fbWF4UG9vbFNpemUgPSBvcHRpb25zLm1heFNpemU7XG5cbiAgICAvLyBUaGVyZSBpcyBhIG1hZG5lc3MgdG8gdGhpcyBjcmF6aW5lc3MuIFdlJ2Qgd2FudCB0byB1c2UgdGhlIG1ldGhvZCBub3RlZCBhdFxuICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzE2MDY3OTcvdXNlLW9mLWFwcGx5LXdpdGgtbmV3LW9wZXJhdG9yLWlzLXRoaXMtcG9zc2libGUsIGJ1dCB0aGUgdHlwZSBpc1xuICAgIC8vIG5vdCBwcm92aWRlZCBpbiB0aGUgYXJndW1lbnRzIGFycmF5IGJlbG93LiBCeSBjYWxsaW5nIGJpbmQgb24gaXRzZWxmLCB3ZSdyZSBhYmxlIHRvIGdldCBhIHZlcnNpb24gb2YgYmluZCB0aGF0XG4gICAgLy8gaW5zZXJ0cyB0aGUgY29uc3RydWN0b3IgYXMgdGhlIGZpcnN0IGFyZ3VtZW50IG9mIHRoZSAuYXBwbHkgY2FsbGVkIGxhdGVyIHNvIHdlIGRvbid0IGNyZWF0ZSBnYXJiYWdlIGJ5IGhhdmluZ1xuICAgIC8vIHRvIHBhY2sgYGFyZ3VtZW50c2AgaW50byBhbiBhcnJheSBBTkQgVEhFTiBjb25jYXRlbmF0ZSBpdCB3aXRoIGEgbmV3IGZpcnN0IGVsZW1lbnQgKHRoZSB0eXBlIGl0c2VsZikuXG4gICAgdGhpcy5wYXJ0aWFsQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5iaW5kKCB0eXBlLCB0eXBlICk7XG5cbiAgICAvLyBCYXNpY2FsbHkgb3VyIHR5cGUgY29uc3RydWN0b3IsIGJ1dCB3aXRoIHRoZSBkZWZhdWx0IGFyZ3VtZW50cyBpbmNsdWRlZCBhbHJlYWR5LlxuICAgIHRoaXMuRGVmYXVsdENvbnN0cnVjdG9yID0gdGhpcy5wYXJ0aWFsQ29uc3RydWN0b3IoIC4uLm9wdGlvbnMuZGVmYXVsdEFyZ3VtZW50cyEgKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW5uZWNlc3NhcnktdHlwZS1hc3NlcnRpb25cblxuICAgIHRoaXMuaW5pdGlhbGl6ZSA9IG9wdGlvbnMuaW5pdGlhbGl6ZTtcbiAgICB0aGlzLnVzZURlZmF1bHRDb25zdHJ1Y3Rpb24gPSBvcHRpb25zLnVzZURlZmF1bHRDb25zdHJ1Y3Rpb247XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBwb29sIChpZiBpdCBzaG91bGQgaGF2ZSBvYmplY3RzKVxuICAgIHdoaWxlICggdGhpcy5vYmplY3RzLmxlbmd0aCA8IG9wdGlvbnMuaW5pdGlhbFNpemUgKSB7XG4gICAgICB0aGlzLm9iamVjdHMucHVzaCggdGhpcy5jcmVhdGVEZWZhdWx0T2JqZWN0KCkgKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZURlZmF1bHRPYmplY3QoKTogSW5zdGFuY2VUeXBlPFQ+IHtcbiAgICByZXR1cm4gbmV3ICggdGhpcy5EZWZhdWx0Q29uc3RydWN0b3IgKSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggYXJiaXRyYXJ5IHN0YXRlIChwb3NzaWJseSBjb25zdHJ1Y3RlZCB3aXRoIHRoZSBkZWZhdWx0IGFyZ3VtZW50cykuXG4gICAqL1xuICBwdWJsaWMgZmV0Y2goKTogSW5zdGFuY2VUeXBlPFQ+IHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3RzLmxlbmd0aCA/IHRoaXMub2JqZWN0cy5wb3AoKSEgOiB0aGlzLmNyZWF0ZURlZmF1bHRPYmplY3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIG9iamVjdCB0aGF0IGJlaGF2ZXMgYXMgaWYgaXQgd2FzIGNvbnN0cnVjdGVkIHdpdGggdGhlIGdpdmVuIGFyZ3VtZW50cy4gTWF5IHJlc3VsdCBpbiBhIG5ldyBvYmplY3RcbiAgICogYmVpbmcgY3JlYXRlZCAoaWYgdGhlIHBvb2wgaXMgZW1wdHkpLCBvciBpdCBtYXkgdXNlIHRoZSBjb25zdHJ1Y3RvciB0byBtdXRhdGUgYW4gb2JqZWN0IGZyb20gdGhlIHBvb2wuXG4gICAqL1xuICBwdWJsaWMgY3JlYXRlKCAuLi5hcmdzOiBQYXJhbXMgKTogSW5zdGFuY2VUeXBlPFQ+IHtcbiAgICBsZXQgcmVzdWx0O1xuXG4gICAgaWYgKCB0aGlzLm9iamVjdHMubGVuZ3RoICkge1xuICAgICAgcmVzdWx0ID0gdGhpcy5vYmplY3RzLnBvcCgpO1xuICAgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KCByZXN1bHQsIGFyZ3MgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHRoaXMudXNlRGVmYXVsdENvbnN0cnVjdGlvbiApIHtcbiAgICAgIHJlc3VsdCA9IHRoaXMuY3JlYXRlRGVmYXVsdE9iamVjdCgpO1xuICAgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KCByZXN1bHQsIGFyZ3MgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXN1bHQgPSBuZXcgKCB0aGlzLnBhcnRpYWxDb25zdHJ1Y3RvciggLi4uYXJncyApICkoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGN1cnJlbnQgc2l6ZSBvZiB0aGUgcG9vbC5cbiAgICovXG4gIHB1YmxpYyBnZXQgcG9vbFNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5vYmplY3RzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtYXhpbXVtIHBvb2wgc2l6ZS5cbiAgICovXG4gIHB1YmxpYyBzZXQgbWF4UG9vbFNpemUoIHZhbHVlOiBudW1iZXIgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdmFsdWUgPT09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB8fCAoIE51bWJlci5pc0ludGVnZXIoIHZhbHVlICkgJiYgdmFsdWUgPj0gMCApLCAnbWF4UG9vbFNpemUgc2hvdWxkIGJlIGEgbm9uLW5lZ2F0aXZlIGludGVnZXIgb3IgaW5maW5pdHknICk7XG5cbiAgICB0aGlzLl9tYXhQb29sU2l6ZSA9IHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG1heGltdW0gcG9vbCBzaXplLlxuICAgKi9cbiAgcHVibGljIGdldCBtYXhQb29sU2l6ZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLl9tYXhQb29sU2l6ZTtcbiAgfVxuXG4gIHB1YmxpYyBmcmVlVG9Qb29sKCBvYmplY3Q6IEluc3RhbmNlVHlwZTxUPiApOiB2b2lkIHtcbiAgICBpZiAoIHRoaXMub2JqZWN0cy5sZW5ndGggPCB0aGlzLm1heFBvb2xTaXplICkge1xuICAgICAgdGhpcy5vYmplY3RzLnB1c2goIG9iamVjdCApO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBmb3JFYWNoKCBjYWxsYmFjazogKCBvYmplY3Q6IEluc3RhbmNlVHlwZTxUPiApID0+IHZvaWQgKTogdm9pZCB7XG4gICAgdGhpcy5vYmplY3RzLmZvckVhY2goIGNhbGxiYWNrICk7XG4gIH1cbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdQb29sJywgUG9vbCApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsT0FBT0EsUUFBUSxNQUFNLGVBQWU7QUFDcEMsT0FBT0MsU0FBUyxNQUFNLGdCQUFnQjtBQWdDdEMsZUFBZSxNQUFNQyxJQUFJLENBQW9GO0VBQzFGQyxPQUFPLEdBQXNCLEVBQUU7RUFRekNDLFdBQVdBLENBQUVDLElBQU8sRUFBRUMsZUFBNEMsRUFBRztJQUMxRSxNQUFNQyxPQUFPLEdBQUdOLFNBQVMsRUFBMEQsQ0FBRTtNQUVuRk8sZ0JBQWdCLEVBQUUsRUFBdUI7TUFDekNDLFVBQVUsRUFBSUosSUFBSSxDQUFDSyxTQUFTLENBQWdFRCxVQUFVO01BQ3RHRSxPQUFPLEVBQUUsR0FBRztNQUNaQyxXQUFXLEVBQUUsQ0FBQztNQUNkQyxzQkFBc0IsRUFBRTtJQUMxQixDQUFDLEVBQUVQLGVBQWUsQ0FBRTtJQUVwQlEsTUFBTSxJQUFJQSxNQUFNLENBQUVQLE9BQU8sQ0FBQ0ksT0FBTyxJQUFJLENBQUMsQ0FBRTtJQUN4Q0csTUFBTSxJQUFJQSxNQUFNLENBQUVQLE9BQU8sQ0FBQ0ssV0FBVyxJQUFJLENBQUMsQ0FBRTtJQUU1QyxJQUFJLENBQUNHLFlBQVksR0FBR1IsT0FBTyxDQUFDSSxPQUFPOztJQUVuQztJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0EsSUFBSSxDQUFDSyxrQkFBa0IsR0FBR0MsUUFBUSxDQUFDUCxTQUFTLENBQUNRLElBQUksQ0FBQ0EsSUFBSSxDQUFFYixJQUFJLEVBQUVBLElBQUksQ0FBRTs7SUFFcEU7SUFDQSxJQUFJLENBQUNjLGtC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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Vector4.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Basic 4-dimensional vector, represented as (x,y).
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */





class Vector4 {
  // The X coordinate of the vector.

  // The Y coordinate of the vector.

  // The Z coordinate of the vector.

  // The W coordinate of the vector.

  /**
   * Creates a 4-dimensional vector with the specified X, Y, Z and W values.
   *
   * @param x - X coordinate
   * @param y - Y coordinate
   * @param z - Z coordinate
   * @param w - W coordinate
   */
  constructor(x, y, z, w) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
  }

  /**
   * The magnitude (Euclidean/L2 Norm) of this vector, i.e. $\sqrt{x^2+y^2+z^2+w^2}$.
   */
  getMagnitude() {
    return Math.sqrt(this.magnitudeSquared);
  }
  get magnitude() {
    return this.getMagnitude();
  }

  /**
   * The squared magnitude (square of the Euclidean/L2 Norm) of this vector, i.e. $x^2+y^2+z^2+w^2$.
   */
  getMagnitudeSquared() {
    return this.dot(this);
  }
  get magnitudeSquared() {
    return this.getMagnitudeSquared();
  }

  /**
   * The Euclidean distance between this vector (treated as a point) and another point.
   */
  distance(point) {
    return this.minus(point).magnitude;
  }

  /**
   * The Euclidean distance between this vector (treated as a point) and another point (x,y,z,w).
   */
  distanceXYZW(x, y, z, w) {
    const dx = this.x - x;
    const dy = this.y - y;
    const dz = this.z - z;
    const dw = this.w - w;
    return Math.sqrt(dx * dx + dy * dy + dz * dz + dw * dw);
  }

  /**
   * The squared Euclidean distance between this vector (treated as a point) and another point.
   */
  distanceSquared(point) {
    return this.minus(point).magnitudeSquared;
  }

  /**
   * The squared Euclidean distance between this vector (treated as a point) and another point (x,y,z,w).
   */
  distanceSquaredXYZW(x, y, z, w) {
    const dx = this.x - x;
    const dy = this.y - y;
    const dz = this.z - z;
    const dw = this.w - w;
    return dx * dx + dy * dy + dz * dz + dw * dw;
  }

  /**
   * The dot-product (Euclidean inner product) between this vector and another vector v.
   */
  dot(v) {
    return this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;
  }

  /**
   * The dot-product (Euclidean inner product) between this vector and another vector (x,y,z,w).
   */
  dotXYZW(x, y, z, w) {
    return this.x * x + this.y * y + this.z * z + this.w * w;
  }

  /**
   * The angle between this vector and another vector, in the range $\theta\in[0, \pi]$.
   *
   * Equal to $\theta = \cos^{-1}( \hat{u} \cdot \hat{v} )$ where $\hat{u}$ is this vector (normalized) and $\hat{v}$
   * is the input vector (normalized).
   */
  angleBetween(v) {
    // @ts-expect-error TODO: import with circular protection
    return Math.acos(js_dot.clamp(this.normalized().dot(v.normalized()), -1, 1));
  }

  /**
   * Exact equality comparison between this vector and another vector.
   *
   * @param other
   * @returns - Whether the two vectors have equal components
   */
  equals(other) {
    return this.x === other.x && this.y === other.y && this.z === other.z && this.w === other.w;
  }

  /**
   * Approximate equality comparison between this vector and another vector.
   *
   * @returns - Whether difference between the two vectors has no component with an absolute value greater
   *                      than epsilon.
   */
  equalsEpsilon(other, epsilon) {
    if (!epsilon) {
      epsilon = 0;
    }
    return Math.abs(this.x - other.x) + Math.abs(this.y - other.y) + Math.abs(this.z - other.z) + Math.abs(this.w - other.w) <= epsilon;
  }

  /**
   * Returns false if any component is NaN, infinity, or -infinity. Otherwise returns true.
   */
  isFinite() {
    return isFinite(this.x) && isFinite(this.y) && isFinite(this.z) && isFinite(this.w);
  }

  /*---------------------------------------------------------------------------*
   * Immutables
   *---------------------------------------------------------------------------*/

  /**
   * Creates a copy of this vector, or if a vector is passed in, set that vector's values to ours.
   *
   * This is the immutable form of the function set(), if a vector is provided. This will return a new vector, and
   * will not modify this vector.
   *
   * @param  [vector] - If not provided, creates a v4 with filled in values. Otherwise, fills in the
   *                    values of the provided vector so that it equals this vector.
   */
  copy(vector) {
    if (vector) {
      return vector.set(this);
    } else {
      return v4(this.x, this.y, this.z, this.w);
    }
  }

  /**
   * Normalized (re-scaled) copy of this vector such that its magnitude is 1. If its initial magnitude is zero, an
   * error is thrown.
   *
   * This is the immutable form of the function normalize(). This will return a new vector, and will not modify this
   * vector.
   */
  normalized() {
    const magnitude = this.magnitude;
    assert && assert(magnitude !== 0, 'Cannot normalize a zero-magnitude vector');
    return this.dividedScalar(magnitude);
  }

  /**
   * Returns a copy of this vector with each component rounded by Utils.roundSymmetric.
   *
   * This is the immutable form of the function roundSymmetric(). This will return a new vector, and will not modify
   * this vector.
   */
  roundedSymmetric() {
    return this.copy().roundSymmetric();
  }

  /**
   * Re-scaled copy of this vector such that it has the desired magnitude. If its initial magnitude is zero, an error
   * is thrown. If the passed-in magnitude is negative, the direction of the resulting vector will be reversed.
   *
   * This is the immutable form of the function setMagnitude(). This will return a new vector, and will not modify
   * this vector.
   *
   */
  withMagnitude(magnitude) {
    return this.copy().setMagnitude(magnitude);
  }

  /**
   * Copy of this vector, scaled by the desired scalar value.
   *
   * This is the immutable form of the function multiplyScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  timesScalar(scalar) {
    return v4(this.x * scalar, this.y * scalar, this.z * scalar, this.w * scalar);
  }

  /**
   * Same as timesScalar.
   *
   * This is the immutable form of the function multiply(). This will return a new vector, and will not modify
   * this vector.
   */
  times(scalar) {
    return this.timesScalar(scalar);
  }

  /**
   * Copy of this vector, multiplied component-wise by the passed-in vector v.
   *
   * This is the immutable form of the function componentMultiply(). This will return a new vector, and will not modify
   * this vector.
   */
  componentTimes(v) {
    return v4(this.x * v.x, this.y * v.y, this.z * v.z, this.w * v.w);
  }

  /**
   * Addition of this vector and another vector, returning a copy.
   *
   * This is the immutable form of the function add(). This will return a new vector, and will not modify
   * this vector.
   */
  plus(v) {
    return v4(this.x + v.x, this.y + v.y, this.z + v.z, this.w + v.w);
  }

  /**
   * Addition of this vector and another vector (x,y,z,w), returning a copy.
   *
   * This is the immutable form of the function addXYZW(). This will return a new vector, and will not modify
   * this vector.
   */
  plusXYZW(x, y, z, w) {
    return v4(this.x + x, this.y + y, this.z + z, this.w + w);
  }

  /**
   * Addition of this vector with a scalar (adds the scalar to every component), returning a copy.
   *
   * This is the immutable form of the function addScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  plusScalar(scalar) {
    return v4(this.x + scalar, this.y + scalar, this.z + scalar, this.w + scalar);
  }

  /**
   * Subtraction of this vector by another vector v, returning a copy.
   *
   * This is the immutable form of the function subtract(). This will return a new vector, and will not modify
   * this vector.
   */
  minus(v) {
    return v4(this.x - v.x, this.y - v.y, this.z - v.z, this.w - v.w);
  }

  /**
   * Subtraction of this vector by another vector (x,y,z,w), returning a copy.
   *
   * This is the immutable form of the function subtractXYZW(). This will return a new vector, and will not modify
   * this vector.
   */
  minusXYZW(x, y, z, w) {
    return v4(this.x - x, this.y - y, this.z - z, this.w - w);
  }

  /**
   * Subtraction of this vector by a scalar (subtracts the scalar from every component), returning a copy.
   *
   * This is the immutable form of the function subtractScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  minusScalar(scalar) {
    return v4(this.x - scalar, this.y - scalar, this.z - scalar, this.w - scalar);
  }

  /**
   * Division of this vector by a scalar (divides every component by the scalar), returning a copy.
   *
   * This is the immutable form of the function divideScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  dividedScalar(scalar) {
    return v4(this.x / scalar, this.y / scalar, this.z / scalar, this.w / scalar);
  }

  /**
   * Negated copy of this vector (multiplies every component by -1).
   *
   * This is the immutable form of the function negate(). This will return a new vector, and will not modify
   * this vector.
   *
   */
  negated() {
    return v4(-this.x, -this.y, -this.z, -this.w);
  }

  /**
   * A linear interpolation between this vector (ratio=0) and another vector (ratio=1).
   *
   * @param vector
   * @param ratio - Not necessarily constrained in [0, 1]
   */
  blend(vector, ratio) {
    return this.plus(vector.minus(this).times(ratio));
  }

  /**
   * The average (midpoint) between this vector and another vector.
   */
  average(vector) {
    return this.blend(vector, 0.5);
  }

  /**
   * Debugging string for the vector.
   */
  toString() {
    return `Vector4(${this.x}, ${this.y}, ${this.z}, ${this.w})`;
  }

  /**
   * Converts this to a 3-dimensional vector, discarding the w-component.
   */
  toVector3() {
    return new Vector3(this.x, this.y, this.z);
  }

  /*---------------------------------------------------------------------------*
   * Mutables
   * - all mutation should go through setXYZW / setX / setY / setZ / setW
   *---------------------------------------------------------------------------*/

  /**
   * Sets all of the components of this vector, returning this.
   */
  setXYZW(x, y, z, w) {
    this.x = x;
    this.y = y;
    this.z = z;
    this.w = w;
    return this;
  }

  /**
   * Sets the x-component of this vector, returning this.
   */
  setX(x) {
    this.x = x;
    return this;
  }

  /**
   * Sets the y-component of this vector, returning this.
   */
  setY(y) {
    this.y = y;
    return this;
  }

  /**
   * Sets the z-component of this vector, returning this.
   */
  setZ(z) {
    this.z = z;
    return this;
  }

  /**
   * Sets the w-component of this vector, returning this.
   */
  setW(w) {
    this.w = w;
    return this;
  }

  /**
   * Sets this vector to be a copy of another vector.
   *
   * This is the mutable form of the function copy(). This will mutate (change) this vector, in addition to returning
   * this vector itself.
   */
  set(v) {
    return this.setXYZW(v.x, v.y, v.z, v.w);
  }

  /**
   * Sets the magnitude of this vector. If the passed-in magnitude is negative, this flips the vector and sets its
   * magnitude to abs( magnitude ).
   *
   * This is the mutable form of the function withMagnitude(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  setMagnitude(magnitude) {
    const scale = magnitude / this.magnitude;
    return this.multiplyScalar(scale);
  }

  /**
   * Adds another vector to this vector, changing this vector.
   *
   * This is the mutable form of the function plus(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  add(v) {
    return this.setXYZW(this.x + v.x, this.y + v.y, this.z + v.z, this.w + v.w);
  }

  /**
   * Adds another vector (x,y,z,w) to this vector, changing this vector.
   *
   * This is the mutable form of the function plusXYZW(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  addXYZW(x, y, z, w) {
    return this.setXYZW(this.x + x, this.y + y, this.z + z, this.w + w);
  }

  /**
   * Adds a scalar to this vector (added to every component), changing this vector.
   *
   * This is the mutable form of the function plusScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  addScalar(scalar) {
    return this.setXYZW(this.x + scalar, this.y + scalar, this.z + scalar, this.w + scalar);
  }

  /**
   * Subtracts this vector by another vector, changing this vector.
   *
   * This is the mutable form of the function minus(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtract(v) {
    return this.setXYZW(this.x - v.x, this.y - v.y, this.z - v.z, this.w - v.w);
  }

  /**
   * Subtracts this vector by another vector (x,y,z,w), changing this vector.
   *
   * This is the mutable form of the function minusXYZW(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtractXYZW(x, y, z, w) {
    return this.setXYZW(this.x - x, this.y - y, this.z - z, this.w - w);
  }

  /**
   * Subtracts this vector by a scalar (subtracts each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function minusScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtractScalar(scalar) {
    return this.setXYZW(this.x - scalar, this.y - scalar, this.z - scalar, this.w - scalar);
  }

  /**
   * Multiplies this vector by a scalar (multiplies each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function timesScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  multiplyScalar(scalar) {
    return this.setXYZW(this.x * scalar, this.y * scalar, this.z * scalar, this.w * scalar);
  }

  /**
   * Multiplies this vector by a scalar (multiplies each component by the scalar), changing this vector.
   * Same as multiplyScalar.
   *
   * This is the mutable form of the function times(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  multiply(scalar) {
    return this.multiplyScalar(scalar);
  }

  /**
   * Multiplies this vector by another vector component-wise, changing this vector.
   *
   * This is the mutable form of the function componentTimes(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  componentMultiply(v) {
    return this.setXYZW(this.x * v.x, this.y * v.y, this.z * v.z, this.w * v.w);
  }

  /**
   * Divides this vector by a scalar (divides each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function dividedScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  divideScalar(scalar) {
    return this.setXYZW(this.x / scalar, this.y / scalar, this.z / scalar, this.w / scalar);
  }

  /**
   * Negates this vector (multiplies each component by -1), changing this vector.
   *
   * This is the mutable form of the function negated(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  negate() {
    return this.setXYZW(-this.x, -this.y, -this.z, -this.w);
  }

  /**
   * Normalizes this vector (rescales to where the magnitude is 1), changing this vector.
   *
   * This is the mutable form of the function normalized(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  normalize() {
    const mag = this.magnitude;
    if (mag === 0) {
      throw new Error('Cannot normalize a zero-magnitude vector');
    }
    return this.divideScalar(mag);
  }

  /**
   * Rounds each component of this vector with Utils.roundSymmetric.
   *
   * This is the mutable form of the function roundedSymmetric(). This will mutate (change) this vector, in addition
   * to returning the vector itself.
   */
  roundSymmetric() {
    return this.setXYZW(js_Utils.roundSymmetric(this.x), js_Utils.roundSymmetric(this.y), js_Utils.roundSymmetric(this.z), js_Utils.roundSymmetric(this.w));
  }
  freeToPool() {
    Vector4.pool.freeToPool(this);
  }
  static pool = new Pool(Vector4, {
    maxSize: 1000,
    initialize: Vector4.prototype.setXYZW,
    defaultArguments: [0, 0, 0, 0]
  });

  // eslint-disable-line uppercase-statics-should-be-readonly
}

// (read-only) - Helps to identify the dimension of the vector
Vector4.prototype.isVector4 = true;
Vector4.prototype.dimension = 4;
js_dot.register('Vector4', Vector4);
const v4 = Vector4.pool.create.bind(Vector4.pool);
js_dot.register('v4', v4);
class ImmutableVector4 extends Vector4 {
  /**
   * Throw errors whenever a mutable method is called on our immutable vector
   */
  static mutableOverrideHelper(mutableFunctionName) {
    ImmutableVector4.prototype[mutableFunctionName] = () => {
      throw new Error(`Cannot call mutable method '${mutableFunctionName}' on immutable Vector3`);
    };
  }
}
ImmutableVector4.mutableOverrideHelper('setXYZW');
ImmutableVector4.mutableOverrideHelper('setX');
ImmutableVector4.mutableOverrideHelper('setY');
ImmutableVector4.mutableOverrideHelper('setZ');
ImmutableVector4.mutableOverrideHelper('setW');
Vector4.ZERO = assert ? new ImmutableVector4(0, 0, 0, 0) : new Vector4(0, 0, 0, 0);
Vector4.X_UNIT = assert ? new ImmutableVector4(1, 0, 0, 0) : new Vector4(1, 0, 0, 0);
Vector4.Y_UNIT = assert ? new ImmutableVector4(0, 1, 0, 0) : new Vector4(0, 1, 0, 0);
Vector4.Z_UNIT = assert ? new ImmutableVector4(0, 0, 1, 0) : new Vector4(0, 0, 1, 0);
Vector4.W_UNIT = assert ? new ImmutableVector4(0, 0, 0, 1) : new Vector4(0, 0, 0, 1);

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsIlZlY3RvcjMiLCJkb3QiLCJQb29sIiwiVmVjdG9yNCIsImNvbnN0cnVjdG9yIiwieCIsInkiLCJ6IiwidyIsImdldE1hZ25pdHVkZSIsIk1hdGgiLCJzcXJ0IiwibWFnbml0dWRlU3F1YXJlZCIsIm1hZ25pdHVkZSIsImdldE1hZ25pdHVkZVNxdWFyZWQiLCJkaXN0YW5jZSIsInBvaW50IiwibWludXMiLCJkaXN0YW5jZVhZWlciLCJkeCIsImR5IiwiZHoiLCJkdyIsImRpc3RhbmNlU3F1YXJlZCIsImRpc3RhbmNlU3F1YXJlZFhZWlciLCJ2IiwiZG90WFlaVyIsImFuZ2xlQmV0d2VlbiIsImFjb3MiLCJjbGFtcCIsIm5vcm1hbGl6ZWQiLCJlcXVhbHMiLCJvdGhlciIsImVxdWFsc0Vwc2lsb24iLCJlcHNpbG9uIiwiYWJzIiwiaXNGaW5pdGUiLCJjb3B5IiwidmVjdG9yIiwic2V0IiwidjQiLCJhc3NlcnQiLCJkaXZpZGVkU2NhbGFyIiwicm91bmRlZFN5bW1ldHJpYyIsInJvdW5kU3ltbWV0cmljIiwid2l0aE1hZ25pdHVkZSIsInNldE1hZ25pdHVkZSIsInRpbWVzU2NhbGFyIiwic2NhbGFyIiwidGltZXMiLCJjb21wb25lbnRUaW1lcyIsInBsdXMiLCJwbHVzWFlaVyIsInBsdXNTY2FsYXIiLCJtaW51c1hZWlciLCJtaW51c1NjYWxhciIsIm5lZ2F0ZWQiLCJibGVuZCIsInJhdGlvIiwiYXZlcmFnZSIsInRvU3RyaW5nIiwidG9WZWN0b3IzIiwic2V0WFlaVyIsInNldFgiLCJzZXRZIiwic2V0WiIsInNldFciLCJzY2FsZSIsIm11bHRpcGx5U2NhbGFyIiwiYWRkIiwiYWRkWFlaVyIsImFkZFNjYWxhciIsInN1YnRyYWN0Iiwic3VidHJhY3RYWVpXIiwic3VidHJhY3RTY2FsYXIiLCJtdWx0aXBseSIsImNvbXBvbmVudE11bHRpcGx5IiwiZGl2aWRlU2NhbGFyIiwibmVnYXRlIiwibm9ybWFsaXplIiwibWFnIiwiRXJyb3IiLCJmcmVlVG9Qb29sIiwicG9vbCIsIm1heFNpemUiLCJpbml0aWFsaXplIiwicHJvdG90eXBlIiwiZGVmYXVsdEFyZ3VtZW50cyIsImlzVmVjdG9yNCIsImRpbWVuc2lvbiIsInJlZ2lzdGVyIiwiY3JlYXRlIiwiYmluZCIsIkltbXV0YWJsZVZlY3RvcjQiLCJtdXRhYmxlT3ZlcnJpZGVIZWxwZXIiLCJtdXRhYmxlRnVuY3Rpb25OYW1lIiwiWkVSTyIsIlhfVU5JVCIsIllfVU5JVCIsIlpfVU5JVCIsIldfVU5JVCJdLCJzb3VyY2VzIjpbIlZlY3RvcjQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQmFzaWMgNC1kaW1lbnNpb25hbCB2ZWN0b3IsIHJlcHJlc2VudGVkIGFzICh4LHkpLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscy5qcyc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuL1ZlY3RvcjMuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgUG9vbCwgeyBUUG9vbGFibGUgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvUG9vbC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZlY3RvcjQgaW1wbGVtZW50cyBUUG9vbGFibGUge1xuXG4gIC8vIFRoZSBYIGNvb3JkaW5hdGUgb2YgdGhlIHZlY3Rvci5cbiAgcHVibGljIHg6IG51bWJlcjtcblxuICAvLyBUaGUgWSBjb29yZGluYXRlIG9mIHRoZSB2ZWN0b3IuXG4gIHB1YmxpYyB5OiBudW1iZXI7XG5cbiAgLy8gVGhlIFogY29vcmRpbmF0ZSBvZiB0aGUgdmVjdG9yLlxuICBwdWJsaWMgejogbnVtYmVyO1xuXG4gIC8vIFRoZSBXIGNvb3JkaW5hdGUgb2YgdGhlIHZlY3Rvci5cbiAgcHVibGljIHc6IG51bWJlcjtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIDQtZGltZW5zaW9uYWwgdmVjdG9yIHdpdGggdGhlIHNwZWNpZmllZCBYLCBZLCBaIGFuZCBXIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHggLSBYIGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHkgLSBZIGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHogLSBaIGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHcgLSBXIGNvb3JkaW5hdGVcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciwgdzogbnVtYmVyICkge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHRoaXMudyA9IHc7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUaGUgbWFnbml0dWRlIChFdWNsaWRlYW4vTDIgTm9ybSkgb2YgdGhpcyB2ZWN0b3IsIGkuZS4gJFxcc3FydHt4XjIreV4yK3peMit3XjJ9JC5cbiAgICovXG4gIHB1YmxpYyBnZXRNYWduaXR1ZGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KCB0aGlzLm1hZ25pdHVkZVNxdWFyZWQgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWFnbml0dWRlKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TWFnbml0dWRlKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNxdWFyZWQgbWFnbml0dWRlIChzcXVhcmUgb2YgdGhlIEV1Y2xpZGVhbi9MMiBOb3JtKSBvZiB0aGlzIHZlY3RvciwgaS5lLiAkeF4yK3leMit6XjIrd14yJC5cbiAgICovXG4gIHB1YmxpYyBnZXRNYWduaXR1ZGVTcXVhcmVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZG90KCB0aGlzIGFzIHVua25vd24gYXMgVmVjdG9yNCApO1xuICB9XG5cbiAgcHVibGljIGdldCBtYWduaXR1ZGVTcXVhcmVkKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TWFnbml0dWRlU3F1YXJlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciAodHJlYXRlZCBhcyBhIHBvaW50KSBhbmQgYW5vdGhlciBwb2ludC5cbiAgICovXG4gIHB1YmxpYyBkaXN0YW5jZSggcG9pbnQ6IFZlY3RvcjQgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5taW51cyggcG9pbnQgKS5tYWduaXR1ZGU7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgdmVjdG9yICh0cmVhdGVkIGFzIGEgcG9pbnQpIGFuZCBhbm90aGVyIHBvaW50ICh4LHkseix3KS5cbiAgICovXG4gIHB1YmxpYyBkaXN0YW5jZVhZWlcoIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHc6IG51bWJlciApOiBudW1iZXIge1xuICAgIGNvbnN0IGR4ID0gdGhpcy54IC0geDtcbiAgICBjb25zdCBkeSA9IHRoaXMueSAtIHk7XG4gICAgY29uc3QgZHogPSB0aGlzLnogLSB6O1xuICAgIGNvbnN0IGR3ID0gdGhpcy53IC0gdztcbiAgICByZXR1cm4gTWF0aC5zcXJ0KCBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHogKyBkdyAqIGR3ICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNxdWFyZWQgRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgKHRyZWF0ZWQgYXMgYSBwb2ludCkgYW5kIGFub3RoZXIgcG9pbnQuXG4gICAqL1xuICBwdWJsaWMgZGlzdGFuY2VTcXVhcmVkKCBwb2ludDogVmVjdG9yNCApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLm1pbnVzKCBwb2ludCApLm1hZ25pdHVkZVNxdWFyZWQ7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNxdWFyZWQgRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgKHRyZWF0ZWQgYXMgYSBwb2ludCkgYW5kIGFub3RoZXIgcG9pbnQgKHgseSx6LHcpLlxuICAgKi9cbiAgcHVibGljIGRpc3RhbmNlU3F1YXJlZFhZWlcoIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHc6IG51bWJlciApOiBudW1iZXIge1xuICAgIGNvbnN0IGR4ID0gdGhpcy54IC0geDtcbiAgICBjb25zdCBkeSA9IHRoaXMueSAtIHk7XG4gICAgY29uc3QgZHogPSB0aGlzLnogLSB6O1xuICAgIGNvbnN0IGR3ID0gdGhpcy53IC0gdztcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHkgKyBkeiAqIGR6ICsgZHcgKiBkdztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgZG90LXByb2R1Y3QgKEV1Y2xpZGVhbiBpbm5lciBwcm9kdWN0KSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3RvciB2LlxuICAgKi9cbiAgcHVibGljIGRvdCggdjogVmVjdG9yNCApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnggKiB2LnggKyB0aGlzLnkgKiB2LnkgKyB0aGlzLnogKiB2LnogKyB0aGlzLncgKiB2Lnc7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRvdC1wcm9kdWN0IChFdWNsaWRlYW4gaW5uZXIgcHJvZHVjdCkgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IgKHgseSx6LHcpLlxuICAgKi9cbiAgcHVibGljIGRvdFhZWlcoIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHc6IG51bWJlciApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnggKiB4ICsgdGhpcy55ICogeSArIHRoaXMueiAqIHogKyB0aGlzLncgKiB3O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBhbmdsZSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3RvciwgaW4gdGhlIHJhbmdlICRcXHRoZXRhXFxpblswLCBcXHBpXSQuXG4gICAqXG4gICAqIEVxdWFsIHRvICRcXHRoZXRhID0gXFxjb3Neey0xfSggXFxoYXR7dX0gXFxjZG90IFxcaGF0e3Z9ICkkIHdoZXJlICRcXGhhdHt1fSQgaXMgdGhpcyB2ZWN0b3IgKG5vcm1hbGl6ZWQpIGFuZCAkXFxoYXR7dn0kXG4gICAqIGlzIHRoZSBpbnB1dCB2ZWN0b3IgKG5vcm1hbGl6ZWQpLlxuICAgKi9cbiAgcHVibGljIGFuZ2xlQmV0d2VlbiggdjogVmVjdG9yNCApOiBudW1iZXIge1xuICAgIC8vIEB0cy1leHBlY3QtZXJyb3IgVE9ETzogaW1wb3J0IHdpdGggY2lyY3VsYXIgcHJvdGVjdGlvblxuICAgIHJldHVybiBNYXRoLmFjb3MoIGRvdC5jbGFtcCggdGhpcy5ub3JtYWxpemVkKCkuZG90KCB2Lm5vcm1hbGl6ZWQoKSApLCAtMSwgMSApICk7XG4gIH1cblxuICAvKipcbiAgICogRXhhY3QgZXF1YWxpdHkgY29tcGFyaXNvbiBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3Rvci5cbiAgICpcbiAgICogQHBhcmFtIG90aGVyXG4gICAqIEByZXR1cm5zIC0gV2hldGhlciB0aGUgdHdvIHZlY3RvcnMgaGF2ZSBlcXVhbCBjb21wb25lbnRzXG4gICAqL1xuICBwdWJsaWMgZXF1YWxzKCBvdGhlcjogVmVjdG9yNCApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlci54ICYmIHRoaXMueSA9PT0gb3RoZXIueSAmJiB0aGlzLnogPT09IG90aGVyLnogJiYgdGhpcy53ID09PSBvdGhlci53O1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcHJveGltYXRlIGVxdWFsaXR5IGNvbXBhcmlzb24gYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gICAqXG4gICAqIEByZXR1cm5zIC0gV2hldGhlciBkaWZmZXJlbmNlIGJldHdlZW4gdGhlIHR3byB2ZWN0b3JzIGhhcyBubyBjb21wb25lbnQgd2l0aCBhbiBhYnNvbHV0ZSB2YWx1ZSBncmVhdGVyXG4gICAqICAgICAgICAgICAgICAgICAgICAgIHRoYW4gZXBzaWxvbi5cbiAgICovXG4gIHB1YmxpYyBlcXVhbHNFcHNpbG9uKCBvdGhlcjogVmVjdG9yNCwgZXBzaWxvbjogbnVtYmVyICk6IGJvb2xlYW4ge1xuICAgIGlmICggIWVwc2lsb24gKSB7XG4gICAgICBlcHNpbG9uID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGguYWJzKCB0aGlzLnggLSBvdGhlci54ICkgKyBNYXRoLmFicyggdGhpcy55IC0gb3RoZXIueSApICsgTWF0aC5hYnMoIHRoaXMueiAtIG90aGVyLnogKSArIE1hdGguYWJzKCB0aGlzLncgLSBvdGhlci53ICkgPD0gZXBzaWxvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZhbHNlIGlmIGFueSBjb21wb25lbnQgaXMgTmFOLCBpbmZpbml0eSwgb3IgLWluZmluaXR5LiBPdGhlcndpc2UgcmV0dXJucyB0cnVlLlxuICAgKi9cbiAgcHVibGljIGlzRmluaXRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc0Zpbml0ZSggdGhpcy54ICkgJiYgaXNGaW5pdGUoIHRoaXMueSApICYmIGlzRmluaXRlKCB0aGlzLnogKSAmJiBpc0Zpbml0ZSggdGhpcy53ICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogSW1tdXRhYmxlc1xuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoaXMgdmVjdG9yLCBvciBpZiBhIHZlY3RvciBpcyBwYXNzZWQgaW4sIHNldCB0aGF0IHZlY3RvcidzIHZhbHVlcyB0byBvdXJzLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2V0KCksIGlmIGEgdmVjdG9yIGlzIHByb3ZpZGVkLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kXG4gICAqIHdpbGwgbm90IG1vZGlmeSB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogQHBhcmFtICBbdmVjdG9yXSAtIElmIG5vdCBwcm92aWRlZCwgY3JlYXRlcyBhIHY0IHdpdGggZmlsbGVkIGluIHZhbHVlcy4gT3RoZXJ3aXNlLCBmaWxscyBpbiB0aGVcbiAgICogICAgICAgICAgICAgICAgICAgIHZhbHVlcyBvZiB0aGUgcHJvdmlkZWQgdmVjdG9yIHNvIHRoYXQgaXQgZXF1YWxzIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIGNvcHkoIHZlY3Rvcj86IFZlY3RvcjQgKTogVmVjdG9yNCB7XG4gICAgaWYgKCB2ZWN0b3IgKSB7XG4gICAgICByZXR1cm4gdmVjdG9yLnNldCggdGhpcyBhcyB1bmtub3duIGFzIFZlY3RvcjQgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdjQoIHRoaXMueCwgdGhpcy55LCB0aGlzLnosIHRoaXMudyApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVkIChyZS1zY2FsZWQpIGNvcHkgb2YgdGhpcyB2ZWN0b3Igc3VjaCB0aGF0IGl0cyBtYWduaXR1ZGUgaXMgMS4gSWYgaXRzIGluaXRpYWwgbWFnbml0dWRlIGlzIHplcm8sIGFuXG4gICAqIGVycm9yIGlzIHRocm93bi5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG5vcm1hbGl6ZSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeSB0aGlzXG4gICAqIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBub3JtYWxpemVkKCk6IFZlY3RvcjQge1xuICAgIGNvbnN0IG1hZ25pdHVkZSA9IHRoaXMubWFnbml0dWRlO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1hZ25pdHVkZSAhPT0gMCwgJ0Nhbm5vdCBub3JtYWxpemUgYSB6ZXJvLW1hZ25pdHVkZSB2ZWN0b3InICk7XG4gICAgcmV0dXJuIHRoaXMuZGl2aWRlZFNjYWxhciggbWFnbml0dWRlICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyB2ZWN0b3Igd2l0aCBlYWNoIGNvbXBvbmVudCByb3VuZGVkIGJ5IFV0aWxzLnJvdW5kU3ltbWV0cmljLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcm91bmRTeW1tZXRyaWMoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgcm91bmRlZFN5bW1ldHJpYygpOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy5jb3B5KCkucm91bmRTeW1tZXRyaWMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZS1zY2FsZWQgY29weSBvZiB0aGlzIHZlY3RvciBzdWNoIHRoYXQgaXQgaGFzIHRoZSBkZXNpcmVkIG1hZ25pdHVkZS4gSWYgaXRzIGluaXRpYWwgbWFnbml0dWRlIGlzIHplcm8sIGFuIGVycm9yXG4gICAqIGlzIHRocm93bi4gSWYgdGhlIHBhc3NlZC1pbiBtYWduaXR1ZGUgaXMgbmVnYXRpdmUsIHRoZSBkaXJlY3Rpb24gb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3Igd2lsbCBiZSByZXZlcnNlZC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNldE1hZ25pdHVkZSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICovXG4gIHB1YmxpYyB3aXRoTWFnbml0dWRlKCBtYWduaXR1ZGU6IG51bWJlciApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy5jb3B5KCkuc2V0TWFnbml0dWRlKCBtYWduaXR1ZGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3B5IG9mIHRoaXMgdmVjdG9yLCBzY2FsZWQgYnkgdGhlIGRlc2lyZWQgc2NhbGFyIHZhbHVlLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gbXVsdGlwbHlTY2FsYXIoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgdGltZXNTY2FsYXIoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB2NCggdGhpcy54ICogc2NhbGFyLCB0aGlzLnkgKiBzY2FsYXIsIHRoaXMueiAqIHNjYWxhciwgdGhpcy53ICogc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogU2FtZSBhcyB0aW1lc1NjYWxhci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG11bHRpcGx5KCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHRpbWVzKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy50aW1lc1NjYWxhciggc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogQ29weSBvZiB0aGlzIHZlY3RvciwgbXVsdGlwbGllZCBjb21wb25lbnQtd2lzZSBieSB0aGUgcGFzc2VkLWluIHZlY3RvciB2LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29tcG9uZW50TXVsdGlwbHkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgY29tcG9uZW50VGltZXMoIHY6IFZlY3RvcjQgKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHY0KCB0aGlzLnggKiB2LngsIHRoaXMueSAqIHYueSwgdGhpcy56ICogdi56LCB0aGlzLncgKiB2LncgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRpdGlvbiBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IsIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBhZGQoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgcGx1cyggdjogVmVjdG9yNCApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdjQoIHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55LCB0aGlzLnogKyB2LnosIHRoaXMudyArIHYudyApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uIG9mIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3RvciAoeCx5LHosdyksIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBhZGRYWVpXKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHBsdXNYWVpXKCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCB3OiBudW1iZXIgKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHY0KCB0aGlzLnggKyB4LCB0aGlzLnkgKyB5LCB0aGlzLnogKyB6LCB0aGlzLncgKyB3ICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkaXRpb24gb2YgdGhpcyB2ZWN0b3Igd2l0aCBhIHNjYWxhciAoYWRkcyB0aGUgc2NhbGFyIHRvIGV2ZXJ5IGNvbXBvbmVudCksIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBhZGRTY2FsYXIoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgcGx1c1NjYWxhciggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHY0KCB0aGlzLnggKyBzY2FsYXIsIHRoaXMueSArIHNjYWxhciwgdGhpcy56ICsgc2NhbGFyLCB0aGlzLncgKyBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdGlvbiBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciB2LCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc3VidHJhY3QoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgbWludXMoIHY6IFZlY3RvcjQgKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHY0KCB0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSwgdGhpcy56IC0gdi56LCB0aGlzLncgLSB2LncgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdGlvbiBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoeCx5LHosdyksIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzdWJ0cmFjdFhZWlcoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgbWludXNYWVpXKCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCB3OiBudW1iZXIgKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHY0KCB0aGlzLnggLSB4LCB0aGlzLnkgLSB5LCB0aGlzLnogLSB6LCB0aGlzLncgLSB3ICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3Rpb24gb2YgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKHN1YnRyYWN0cyB0aGUgc2NhbGFyIGZyb20gZXZlcnkgY29tcG9uZW50KSwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHN1YnRyYWN0U2NhbGFyKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIG1pbnVzU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdjQoIHRoaXMueCAtIHNjYWxhciwgdGhpcy55IC0gc2NhbGFyLCB0aGlzLnogLSBzY2FsYXIsIHRoaXMudyAtIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIERpdmlzaW9uIG9mIHRoaXMgdmVjdG9yIGJ5IGEgc2NhbGFyIChkaXZpZGVzIGV2ZXJ5IGNvbXBvbmVudCBieSB0aGUgc2NhbGFyKSwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGRpdmlkZVNjYWxhcigpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBkaXZpZGVkU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdjQoIHRoaXMueCAvIHNjYWxhciwgdGhpcy55IC8gc2NhbGFyLCB0aGlzLnogLyBzY2FsYXIsIHRoaXMudyAvIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIE5lZ2F0ZWQgY29weSBvZiB0aGlzIHZlY3RvciAobXVsdGlwbGllcyBldmVyeSBjb21wb25lbnQgYnkgLTEpLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gbmVnYXRlKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKi9cbiAgcHVibGljIG5lZ2F0ZWQoKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHY0KCAtdGhpcy54LCAtdGhpcy55LCAtdGhpcy56LCAtdGhpcy53ICk7XG4gIH1cblxuICAvKipcbiAgICogQSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHRoaXMgdmVjdG9yIChyYXRpbz0wKSBhbmQgYW5vdGhlciB2ZWN0b3IgKHJhdGlvPTEpLlxuICAgKlxuICAgKiBAcGFyYW0gdmVjdG9yXG4gICAqIEBwYXJhbSByYXRpbyAtIE5vdCBuZWNlc3NhcmlseSBjb25zdHJhaW5lZCBpbiBbMCwgMV1cbiAgICovXG4gIHB1YmxpYyBibGVuZCggdmVjdG9yOiBWZWN0b3I0LCByYXRpbzogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLnBsdXMoIHZlY3Rvci5taW51cyggdGhpcyBhcyB1bmtub3duIGFzIFZlY3RvcjQgKS50aW1lcyggcmF0aW8gKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBhdmVyYWdlIChtaWRwb2ludCkgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgYXZlcmFnZSggdmVjdG9yOiBWZWN0b3I0ICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLmJsZW5kKCB2ZWN0b3IsIDAuNSApO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYnVnZ2luZyBzdHJpbmcgZm9yIHRoZSB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFZlY3RvcjQoJHt0aGlzLnh9LCAke3RoaXMueX0sICR7dGhpcy56fSwgJHt0aGlzLnd9KWA7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGhpcyB0byBhIDMtZGltZW5zaW9uYWwgdmVjdG9yLCBkaXNjYXJkaW5nIHRoZSB3LWNvbXBvbmVudC5cbiAgICovXG4gIHB1YmxpYyB0b1ZlY3RvcjMoKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IzKCB0aGlzLngsIHRoaXMueSwgdGhpcy56ICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogTXV0YWJsZXNcbiAgICogLSBhbGwgbXV0YXRpb24gc2hvdWxkIGdvIHRocm91Z2ggc2V0WFlaVyAvIHNldFggLyBzZXRZIC8gc2V0WiAvIHNldFdcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBTZXRzIGFsbCBvZiB0aGUgY29tcG9uZW50cyBvZiB0aGlzIHZlY3RvciwgcmV0dXJuaW5nIHRoaXMuXG4gICAqL1xuICBwdWJsaWMgc2V0WFlaVyggeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciwgdzogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHRoaXMueCA9IHg7XG4gICAgdGhpcy55ID0geTtcbiAgICB0aGlzLnogPSB6O1xuICAgIHRoaXMudyA9IHc7XG4gICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWZWN0b3I0O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHgtY29tcG9uZW50IG9mIHRoaXMgdmVjdG9yLCByZXR1cm5pbmcgdGhpcy5cbiAgICovXG4gIHB1YmxpYyBzZXRYKCB4OiBudW1iZXIgKTogVmVjdG9yNCB7XG4gICAgdGhpcy54ID0geDtcbiAgICByZXR1cm4gdGhpcyBhcyB1bmtub3duIGFzIFZlY3RvcjQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgeS1jb21wb25lbnQgb2YgdGhpcyB2ZWN0b3IsIHJldHVybmluZyB0aGlzLlxuICAgKi9cbiAgcHVibGljIHNldFkoIHk6IG51bWJlciApOiBWZWN0b3I0IHtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHJldHVybiB0aGlzIGFzIHVua25vd24gYXMgVmVjdG9yNDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB6LWNvbXBvbmVudCBvZiB0aGlzIHZlY3RvciwgcmV0dXJuaW5nIHRoaXMuXG4gICAqL1xuICBwdWJsaWMgc2V0WiggejogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHRoaXMueiA9IHo7XG4gICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWZWN0b3I0O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHctY29tcG9uZW50IG9mIHRoaXMgdmVjdG9yLCByZXR1cm5pbmcgdGhpcy5cbiAgICovXG4gIHB1YmxpYyBzZXRXKCB3OiBudW1iZXIgKTogVmVjdG9yNCB7XG4gICAgdGhpcy53ID0gdztcbiAgICByZXR1cm4gdGhpcyBhcyB1bmtub3duIGFzIFZlY3RvcjQ7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIHZlY3RvciB0byBiZSBhIGNvcHkgb2YgYW5vdGhlciB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29weSgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHNldCggdjogVmVjdG9yNCApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVpXKCB2LngsIHYueSwgdi56LCB2LncgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtYWduaXR1ZGUgb2YgdGhpcyB2ZWN0b3IuIElmIHRoZSBwYXNzZWQtaW4gbWFnbml0dWRlIGlzIG5lZ2F0aXZlLCB0aGlzIGZsaXBzIHRoZSB2ZWN0b3IgYW5kIHNldHMgaXRzXG4gICAqIG1hZ25pdHVkZSB0byBhYnMoIG1hZ25pdHVkZSApLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNYWduaXR1ZGUoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzZXRNYWduaXR1ZGUoIG1hZ25pdHVkZTogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIGNvbnN0IHNjYWxlID0gbWFnbml0dWRlIC8gdGhpcy5tYWduaXR1ZGU7XG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoIHNjYWxlICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhbm90aGVyIHZlY3RvciB0byB0aGlzIHZlY3RvciwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcGx1cygpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGFkZCggdjogVmVjdG9yNCApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVpXKCB0aGlzLnggKyB2LngsIHRoaXMueSArIHYueSwgdGhpcy56ICsgdi56LCB0aGlzLncgKyB2LncgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFub3RoZXIgdmVjdG9yICh4LHkseix3KSB0byB0aGlzIHZlY3RvciwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcGx1c1hZWlcoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBhZGRYWVpXKCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyLCB3OiBudW1iZXIgKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFlaVyggdGhpcy54ICsgeCwgdGhpcy55ICsgeSwgdGhpcy56ICsgeiwgdGhpcy53ICsgdyApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBzY2FsYXIgdG8gdGhpcyB2ZWN0b3IgKGFkZGVkIHRvIGV2ZXJ5IGNvbXBvbmVudCksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHBsdXNTY2FsYXIoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBhZGRTY2FsYXIoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLnNldFhZWlcoIHRoaXMueCArIHNjYWxhciwgdGhpcy55ICsgc2NhbGFyLCB0aGlzLnogKyBzY2FsYXIsIHRoaXMudyArIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnRyYWN0cyB0aGlzIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gbWludXMoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzdWJ0cmFjdCggdjogVmVjdG9yNCApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVpXKCB0aGlzLnggLSB2LngsIHRoaXMueSAtIHYueSwgdGhpcy56IC0gdi56LCB0aGlzLncgLSB2LncgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdHMgdGhpcyB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgKHgseSx6LHcpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBtaW51c1hZWlcoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzdWJ0cmFjdFhZWlcoIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIsIHc6IG51bWJlciApOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVpXKCB0aGlzLnggLSB4LCB0aGlzLnkgLSB5LCB0aGlzLnogLSB6LCB0aGlzLncgLSB3ICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3RzIHRoaXMgdmVjdG9yIGJ5IGEgc2NhbGFyIChzdWJ0cmFjdHMgZWFjaCBjb21wb25lbnQgYnkgdGhlIHNjYWxhciksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG1pbnVzU2NhbGFyKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc3VidHJhY3RTY2FsYXIoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLnNldFhZWlcoIHRoaXMueCAtIHNjYWxhciwgdGhpcy55IC0gc2NhbGFyLCB0aGlzLnogLSBzY2FsYXIsIHRoaXMudyAtIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIE11bHRpcGxpZXMgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKG11bHRpcGxpZXMgZWFjaCBjb21wb25lbnQgYnkgdGhlIHNjYWxhciksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHRpbWVzU2NhbGFyKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgbXVsdGlwbHlTY2FsYXIoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLnNldFhZWlcoIHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyLCB0aGlzLnogKiBzY2FsYXIsIHRoaXMudyAqIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIE11bHRpcGxpZXMgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKG11bHRpcGxpZXMgZWFjaCBjb21wb25lbnQgYnkgdGhlIHNjYWxhciksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKiBTYW1lIGFzIG11bHRpcGx5U2NhbGFyLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHRpbWVzKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgbXVsdGlwbHkoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyKCBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdWx0aXBsaWVzIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIGNvbXBvbmVudC13aXNlLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBjb21wb25lbnRUaW1lcygpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGNvbXBvbmVudE11bHRpcGx5KCB2OiBWZWN0b3I0ICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLnNldFhZWlcoIHRoaXMueCAqIHYueCwgdGhpcy55ICogdi55LCB0aGlzLnogKiB2LnosIHRoaXMudyAqIHYudyApO1xuICB9XG5cbiAgLyoqXG4gICAqIERpdmlkZXMgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKGRpdmlkZXMgZWFjaCBjb21wb25lbnQgYnkgdGhlIHNjYWxhciksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGRpdmlkZWRTY2FsYXIoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBkaXZpZGVTY2FsYXIoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLnNldFhZWlcoIHRoaXMueCAvIHNjYWxhciwgdGhpcy55IC8gc2NhbGFyLCB0aGlzLnogLyBzY2FsYXIsIHRoaXMudyAvIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIE5lZ2F0ZXMgdGhpcyB2ZWN0b3IgKG11bHRpcGxpZXMgZWFjaCBjb21wb25lbnQgYnkgLTEpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBuZWdhdGVkKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgbmVnYXRlKCk6IFZlY3RvcjQge1xuICAgIHJldHVybiB0aGlzLnNldFhZWlcoIC10aGlzLngsIC10aGlzLnksIC10aGlzLnosIC10aGlzLncgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIHRoaXMgdmVjdG9yIChyZXNjYWxlcyB0byB3aGVyZSB0aGUgbWFnbml0dWRlIGlzIDEpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBub3JtYWxpemVkKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgbm9ybWFsaXplKCk6IFZlY3RvcjQge1xuICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlO1xuICAgIGlmICggbWFnID09PSAwICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCAnQ2Fubm90IG5vcm1hbGl6ZSBhIHplcm8tbWFnbml0dWRlIHZlY3RvcicgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKCBtYWcgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSb3VuZHMgZWFjaCBjb21wb25lbnQgb2YgdGhpcyB2ZWN0b3Igd2l0aCBVdGlscy5yb3VuZFN5bW1ldHJpYy5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiByb3VuZGVkU3ltbWV0cmljKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uXG4gICAqIHRvIHJldHVybmluZyB0aGUgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyByb3VuZFN5bW1ldHJpYygpOiBWZWN0b3I0IHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVpXKCBVdGlscy5yb3VuZFN5bW1ldHJpYyggdGhpcy54ICksIFV0aWxzLnJvdW5kU3ltbWV0cmljKCB0aGlzLnkgKSwgVXRpbHMucm91bmRTeW1tZXRyaWMoIHRoaXMueiApLCBVdGlscy5yb3VuZFN5bW1ldHJpYyggdGhpcy53ICkgKTtcbiAgfVxuXG4gIHB1YmxpYyBmcmVlVG9Qb29sKCk6IHZvaWQge1xuICAgIFZlY3RvcjQucG9vbC5mcmVlVG9Qb29sKCB0aGlzICk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHBvb2wgPSBuZXcgUG9vbCggVmVjdG9yNCwge1xuICAgIG1heFNpemU6IDEwMDAsXG4gICAgaW5pdGlhbGl6ZTogVmVjdG9yNC5wcm90b3R5cGUuc2V0WFlaVyxcbiAgICBkZWZhdWx0QXJndW1lbnRzOiBbIDAsIDAsIDAsIDAgXVxuICB9ICk7XG5cbiAgcHVibGljIGlzVmVjdG9yNCE6IGJvb2xlYW47XG4gIHB1YmxpYyBkaW1lbnNpb24hOiBudW1iZXI7XG4gIHB1YmxpYyBzdGF0aWMgWkVSTzogVmVjdG9yNDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBYX1VOSVQ6IFZlY3RvcjQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG4gIHB1YmxpYyBzdGF0aWMgWV9VTklUOiBWZWN0b3I0OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIFpfVU5JVDogVmVjdG9yNDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBXX1VOSVQ6IFZlY3RvcjQ7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG59XG5cbi8vIChyZWFkLW9ubHkpIC0gSGVscHMgdG8gaWRlbnRpZnkgdGhlIGRpbWVuc2lvbiBvZiB0aGUgdmVjdG9yXG5WZWN0b3I0LnByb3RvdHlwZS5pc1ZlY3RvcjQgPSB0cnVlO1xuVmVjdG9yNC5wcm90b3R5cGUuZGltZW5zaW9uID0gNDtcblxuZG90LnJlZ2lzdGVyKCAnVmVjdG9yNCcsIFZlY3RvcjQgKTtcblxuY29uc3QgdjQgPSBWZWN0b3I0LnBvb2wuY3JlYXRlLmJpbmQoIFZlY3RvcjQucG9vbCApO1xuZG90LnJlZ2lzdGVyKCAndjQnLCB2NCApO1xuXG5jbGFzcyBJbW11dGFibGVWZWN0b3I0IGV4dGVuZHMgVmVjdG9yNCB7XG4gIC8qKlxuICAgKiBUaHJvdyBlcnJvcnMgd2hlbmV2ZXIgYSBtdXRhYmxlIG1ldGhvZCBpcyBjYWxsZWQgb24gb3VyIGltbXV0YWJsZSB2ZWN0b3JcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbXV0YWJsZU92ZXJyaWRlSGVscGVyKCBtdXRhYmxlRnVuY3Rpb25OYW1lOiAnc2V0WCcgfCAnc2V0WScgfCAnc2V0WicgfCAnc2V0VycgfCAnc2V0WFlaVycgKTogdm9pZCB7XG4gICAgSW1tdXRhYmxlVmVjdG9yNC5wcm90b3R5cGVbIG11dGFibGVGdW5jdGlvbk5hbWUgXSA9ICgpID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvciggYENhbm5vdCBjYWxsIG11dGFibGUgbWV0aG9kICcke211dGFibGVGdW5jdGlvbk5hbWV9JyBvbiBpbW11dGFibGUgVmVjdG9yM2AgKTtcbiAgICB9O1xuICB9XG59XG5cbkltbXV0YWJsZVZlY3RvcjQubXV0YWJsZU92ZXJyaWRlSGVscGVyKCAnc2V0WFlaVycgKTtcbkltbXV0YWJsZVZlY3RvcjQubXV0YWJsZU92ZXJyaWRlSGVscGVyKCAnc2V0WCcgKTtcbkltbXV0YWJsZVZlY3RvcjQubXV0YWJsZU92ZXJyaWRlSGVscGVyKCAnc2V0WScgKTtcbkltbXV0YWJsZVZlY3RvcjQubXV0YWJsZU92ZXJyaWRlSGVscGVyKCAnc2V0WicgKTtcbkltbXV0YWJsZVZlY3RvcjQubXV0YWJsZU92ZXJyaWRlSGVscGVyKCAnc2V0VycgKTtcblxuVmVjdG9yNC5aRVJPID0gYXNzZXJ0ID8gbmV3IEltbXV0YWJsZVZlY3RvcjQoIDAsIDAsIDAsIDAgKSA6IG5ldyBWZWN0b3I0KCAwLCAwLCAwLCAwICk7XG5WZWN0b3I0LlhfVU5JVCA9IGFzc2VydCA/IG5ldyBJbW11dGFibGVWZWN0b3I0KCAxLCAwLCAwLCAwICkgOiBuZXcgVmVjdG9yNCggMSwgMCwgMCwgMCApO1xuVmVjdG9yNC5ZX1VOSVQgPSBhc3NlcnQgPyBuZXcgSW1tdXRhYmxlVmVjdG9yNCggMCwgMSwgMCwgMCApIDogbmV3IFZlY3RvcjQoIDAsIDEsIDAsIDAgKTtcblZlY3RvcjQuWl9VTklUID0gYXNzZXJ0ID8gbmV3IEltbXV0YWJsZVZlY3RvcjQoIDAsIDAsIDEsIDAgKSA6IG5ldyBWZWN0b3I0KCAwLCAwLCAxLCAwICk7XG5WZWN0b3I0LldfVU5JVCA9IGFzc2VydCA/IG5ldyBJbW11dGFibGVWZWN0b3I0KCAwLCAwLCAwLCAxICkgOiBu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QyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsR0FBRyxJQUFJMUYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRTtBQUN4RkEsT0FBTyxDQUFDK0YsTUFBTSxHQUFHekQsTUFBTSxHQUFHLElBQUlvRCxnQkFBZ0IsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsR0FBRyxJQUFJMUYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRTtBQUN4RkEsT0FBTyxDQUFDZ0csTUFBTSxHQUFHMUQsTUFBTSxHQUFHLElBQUlvRCxnQkFBZ0IsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsR0FBRyxJQUFJMUYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRTtBQUN4RkEsT0FBTyxDQUFDaUcsTUFBTSxHQUFHM0QsTUFBTSxHQUFHLElBQUlvRCxnQkFBZ0IsQ0FBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUUsR0FBRyxJQUFJMUYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRTtBQUV4RixTQUFTcUMsRUFBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Vector3.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * Basic 3-dimensional vector, represented as (x,y,z).
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */








const ADDING_ACCUMULATOR = (vector, nextVector) => {
  return vector.add(nextVector);
};
class Vector3 {
  // The X coordinate of the vector.

  // The Y coordinate of the vector.

  // The Z coordinate of the vector.

  /**
   * Creates a 3-dimensional vector with the specified X, Y and Z values.
   *
   * @param x - X coordinate
   * @param y - Y coordinate
   * @param z - Z coordinate
   */
  constructor(x, y, z) {
    this.x = x;
    this.y = y;
    this.z = z;
  }

  /**
   * The magnitude (Euclidean/L2 Norm) of this vector, i.e. $\sqrt{x^2+y^2+z^2}$.
   */
  getMagnitude() {
    return Math.sqrt(this.magnitudeSquared);
  }
  get magnitude() {
    return this.getMagnitude();
  }

  /**
   * T squared magnitude (square of the Euclidean/L2 Norm) of this vector, i.e. $x^2+y^2+z^2$.
   */
  getMagnitudeSquared() {
    return this.dot(this);
  }
  get magnitudeSquared() {
    return this.getMagnitudeSquared();
  }

  /**
   * The Euclidean distance between this vector (treated as a point) and another point.
   */
  distance(point) {
    return Math.sqrt(this.distanceSquared(point));
  }

  /**
   * The Euclidean distance between this vector (treated as a point) and another point (x,y,z).
   */
  distanceXYZ(x, y, z) {
    const dx = this.x - x;
    const dy = this.y - y;
    const dz = this.z - z;
    return Math.sqrt(dx * dx + dy * dy + dz * dz);
  }

  /**
   * The squared Euclidean distance between this vector (treated as a point) and another point.
   */
  distanceSquared(point) {
    const dx = this.x - point.x;
    const dy = this.y - point.y;
    const dz = this.z - point.z;
    return dx * dx + dy * dy + dz * dz;
  }

  /**
   * The squared Euclidean distance between this vector (treated as a point) and another point (x,y,z).
   */
  distanceSquaredXYZ(x, y, z) {
    const dx = this.x - x;
    const dy = this.y - y;
    const dz = this.z - z;
    return dx * dx + dy * dy + dz * dz;
  }

  /**
   * The dot-product (Euclidean inner product) between this vector and another vector v.
   */
  dot(v) {
    return this.x * v.x + this.y * v.y + this.z * v.z;
  }

  /**
   * The dot-product (Euclidean inner product) between this vector and another vector (x,y,z).
   */
  dotXYZ(x, y, z) {
    return this.x * x + this.y * y + this.z * z;
  }

  /**
   * The angle between this vector and another vector, in the range $\theta\in[0, \pi]$.
   *
   * Equal to $\theta = \cos^{-1}( \hat{u} \cdot \hat{v} )$ where $\hat{u}$ is this vector (normalized) and $\hat{v}$
   * is the input vector (normalized).
   */
  angleBetween(v) {
    return Math.acos(js_Utils.clamp(this.normalized().dot(v.normalized()), -1, 1));
  }

  /**
   * Exact equality comparison between this vector and another vector.
   *
   * @returns - Whether the two vectors have equal components
   */
  equals(other) {
    return this.x === other.x && this.y === other.y && this.z === other.z;
  }

  /**
   * Approximate equality comparison between this vector and another vector.
   *
   * @returns - Whether difference between the two vectors has no component with an absolute value greater
   *                      than epsilon.
   */
  equalsEpsilon(other, epsilon) {
    if (!epsilon) {
      epsilon = 0;
    }
    return Math.abs(this.x - other.x) + Math.abs(this.y - other.y) + Math.abs(this.z - other.z) <= epsilon;
  }

  /**
   * Returns false if any component is NaN, infinity, or -infinity. Otherwise returns true.
   */
  isFinite() {
    return isFinite(this.x) && isFinite(this.y) && isFinite(this.z);
  }

  /*---------------------------------------------------------------------------*
   * Immutables
   *---------------------------------------------------------------------------*/

  /**
   * Creates a copy of this vector, or if a vector is passed in, set that vector's values to ours.
   *
   * This is the immutable form of the function set(), if a vector is provided. This will return a new vector, and
   * will not modify this vector.
   *
   * @param [vector] - If not provided, creates a new Vector3 with filled in values. Otherwise, fills in the
   *                   values of the provided vector so that it equals this vector.
   */
  copy(vector) {
    if (vector) {
      return vector.set(this);
    } else {
      return v3(this.x, this.y, this.z);
    }
  }

  /**
   * The Euclidean 3-dimensional cross-product of this vector by the passed-in vector.
   */
  cross(v) {
    return v3(this.y * v.z - this.z * v.y, this.z * v.x - this.x * v.z, this.x * v.y - this.y * v.x);
  }

  /**
   * Normalized (re-scaled) copy of this vector such that its magnitude is 1. If its initial magnitude is zero, an
   * error is thrown.
   *
   * This is the immutable form of the function normalize(). This will return a new vector, and will not modify this
   * vector.
   */
  normalized() {
    const mag = this.magnitude;
    if (mag === 0) {
      throw new Error('Cannot normalize a zero-magnitude vector');
    } else {
      return v3(this.x / mag, this.y / mag, this.z / mag);
    }
  }

  /**
   *
   * This is the immutable form of the function roundSymmetric(). This will return a new vector, and will not modify
   * this vector.
   */
  roundedSymmetric() {
    return this.copy().roundSymmetric();
  }

  /**
   * Re-scaled copy of this vector such that it has the desired magnitude. If its initial magnitude is zero, an error
   * is thrown. If the passed-in magnitude is negative, the direction of the resulting vector will be reversed.
   *
   * This is the immutable form of the function setMagnitude(). This will return a new vector, and will not modify
   * this vector.
   */
  withMagnitude(magnitude) {
    return this.copy().setMagnitude(magnitude);
  }

  /**
   * Copy of this vector, scaled by the desired scalar value.
   *
   * This is the immutable form of the function multiplyScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  timesScalar(scalar) {
    return v3(this.x * scalar, this.y * scalar, this.z * scalar);
  }

  /**
   * Same as timesScalar.
   *
   * This is the immutable form of the function multiply(). This will return a new vector, and will not modify
   * this vector.
   */
  times(scalar) {
    return this.timesScalar(scalar);
  }

  /**
   * Copy of this vector, multiplied component-wise by the passed-in vector v.
   *
   * This is the immutable form of the function componentMultiply(). This will return a new vector, and will not modify
   * this vector.
   */
  componentTimes(v) {
    return v3(this.x * v.x, this.y * v.y, this.z * v.z);
  }

  /**
   * Addition of this vector and another vector, returning a copy.
   *
   * This is the immutable form of the function add(). This will return a new vector, and will not modify
   * this vector.
   */
  plus(v) {
    return v3(this.x + v.x, this.y + v.y, this.z + v.z);
  }

  /**
   * Addition of this vector and another vector (x,y,z), returning a copy.
   *
   * This is the immutable form of the function addXYZ(). This will return a new vector, and will not modify
   * this vector.
   */
  plusXYZ(x, y, z) {
    return v3(this.x + x, this.y + y, this.z + z);
  }

  /**
   * Addition of this vector with a scalar (adds the scalar to every component), returning a copy.
   *
   * This is the immutable form of the function addScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  plusScalar(scalar) {
    return v3(this.x + scalar, this.y + scalar, this.z + scalar);
  }

  /**
   * Subtraction of this vector by another vector v, returning a copy.
   *
   * This is the immutable form of the function subtract(). This will return a new vector, and will not modify
   * this vector.
   */
  minus(v) {
    return v3(this.x - v.x, this.y - v.y, this.z - v.z);
  }

  /**
   * Subtraction of this vector by another vector (x,y,z), returning a copy.
   *
   * This is the immutable form of the function subtractXYZ(). This will return a new vector, and will not modify
   * this vector.
   */
  minusXYZ(x, y, z) {
    return v3(this.x - x, this.y - y, this.z - z);
  }

  /**
   * Subtraction of this vector by a scalar (subtracts the scalar from every component), returning a copy.
   *
   * This is the immutable form of the function subtractScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  minusScalar(scalar) {
    return v3(this.x - scalar, this.y - scalar, this.z - scalar);
  }

  /**
   * Division of this vector by a scalar (divides every component by the scalar), returning a copy.
   *
   * This is the immutable form of the function divideScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  dividedScalar(scalar) {
    return v3(this.x / scalar, this.y / scalar, this.z / scalar);
  }

  /**
   * Negated copy of this vector (multiplies every component by -1).
   *
   * This is the immutable form of the function negate(). This will return a new vector, and will not modify
   * this vector.
   *
   */
  negated() {
    return v3(-this.x, -this.y, -this.z);
  }

  /**
   * A linear interpolation between this vector (ratio=0) and another vector (ratio=1).
   *
   * @param vector
   * @param ratio - Not necessarily constrained in [0, 1]
   */
  blend(vector, ratio) {
    return this.plus(vector.minus(this).times(ratio));
  }

  /**
   * The average (midpoint) between this vector and another vector.
   */
  average(vector) {
    return this.blend(vector, 0.5);
  }

  /**
   * Take a component-based mean of all vectors provided.
   */
  static average(vectors) {
    const added = _.reduce(vectors, ADDING_ACCUMULATOR, new Vector3(0, 0, 0));
    return added.divideScalar(vectors.length);
  }

  /**
   * Debugging string for the vector.
   */
  toString() {
    return `Vector3(${this.x}, ${this.y}, ${this.z})`;
  }

  /**
   * Converts this to a 2-dimensional vector, discarding the z-component.
   */
  toVector2() {
    return v2(this.x, this.y);
  }

  /**
   * Converts this to a 4-dimensional vector, with the w-component equal to 1 (useful for homogeneous coordinates).
   */
  toVector4() {
    return v4(this.x, this.y, this.z, 1);
  }

  /*---------------------------------------------------------------------------*
   * Mutables
   * - all mutation should go through setXYZ / setX / setY / setZ
   *---------------------------------------------------------------------------*/

  /**
   * Sets all of the components of this vector, returning this.
   */
  setXYZ(x, y, z) {
    this.x = x;
    this.y = y;
    this.z = z;
    return this;
  }

  /**
   * Sets the x-component of this vector, returning this.
   */
  setX(x) {
    this.x = x;
    return this;
  }

  /**
   * Sets the y-component of this vector, returning this.
   */
  setY(y) {
    this.y = y;
    return this;
  }

  /**
   * Sets the z-component of this vector, returning this.
   */
  setZ(z) {
    this.z = z;
    return this;
  }

  /**
   * Sets this vector to be a copy of another vector.
   *
   * This is the mutable form of the function copy(). This will mutate (change) this vector, in addition to returning
   * this vector itself.
   */
  set(v) {
    return this.setXYZ(v.x, v.y, v.z);
  }

  /**
   * Sets the magnitude of this vector. If the passed-in magnitude is negative, this flips the vector and sets its
   * magnitude to abs( magnitude ).
   *
   * This is the mutable form of the function withMagnitude(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  setMagnitude(magnitude) {
    const scale = magnitude / this.magnitude;
    return this.multiplyScalar(scale);
  }

  /**
   * Adds another vector to this vector, changing this vector.
   *
   * This is the mutable form of the function plus(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  add(v) {
    return this.setXYZ(this.x + v.x, this.y + v.y, this.z + v.z);
  }

  /**
   * Adds another vector (x,y,z) to this vector, changing this vector.
   *
   * This is the mutable form of the function plusXYZ(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  addXYZ(x, y, z) {
    return this.setXYZ(this.x + x, this.y + y, this.z + z);
  }

  /**
   * Adds a scalar to this vector (added to every component), changing this vector.
   *
   * This is the mutable form of the function plusScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  addScalar(scalar) {
    return this.setXYZ(this.x + scalar, this.y + scalar, this.z + scalar);
  }

  /**
   * Subtracts this vector by another vector, changing this vector.
   *
   * This is the mutable form of the function minus(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtract(v) {
    return this.setXYZ(this.x - v.x, this.y - v.y, this.z - v.z);
  }

  /**
   * Subtracts this vector by another vector (x,y,z), changing this vector.
   *
   * This is the mutable form of the function minusXYZ(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtractXYZ(x, y, z) {
    return this.setXYZ(this.x - x, this.y - y, this.z - z);
  }

  /**
   * Subtracts this vector by a scalar (subtracts each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function minusScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtractScalar(scalar) {
    return this.setXYZ(this.x - scalar, this.y - scalar, this.z - scalar);
  }

  /**
   * Multiplies this vector by a scalar (multiplies each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function timesScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  multiplyScalar(scalar) {
    return this.setXYZ(this.x * scalar, this.y * scalar, this.z * scalar);
  }

  /**
   * Multiplies this vector by a scalar (multiplies each component by the scalar), changing this vector.
   * Same as multiplyScalar.
   *
   * This is the mutable form of the function times(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  multiply(scalar) {
    return this.multiplyScalar(scalar);
  }

  /**
   * Multiplies this vector by another vector component-wise, changing this vector.
   *
   * This is the mutable form of the function componentTimes(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  componentMultiply(v) {
    return this.setXYZ(this.x * v.x, this.y * v.y, this.z * v.z);
  }

  /**
   * Divides this vector by a scalar (divides each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function dividedScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  divideScalar(scalar) {
    return this.setXYZ(this.x / scalar, this.y / scalar, this.z / scalar);
  }

  /**
   * Negates this vector (multiplies each component by -1), changing this vector.
   *
   * This is the mutable form of the function negated(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  negate() {
    return this.setXYZ(-this.x, -this.y, -this.z);
  }

  /**
   * Sets our value to the Euclidean 3-dimensional cross-product of this vector by the passed-in vector.
   */
  setCross(v) {
    return this.setXYZ(this.y * v.z - this.z * v.y, this.z * v.x - this.x * v.z, this.x * v.y - this.y * v.x);
  }

  /**
   * Normalizes this vector (rescales to where the magnitude is 1), changing this vector.
   *
   * This is the mutable form of the function normalized(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  normalize() {
    const mag = this.magnitude;
    if (mag === 0) {
      throw new Error('Cannot normalize a zero-magnitude vector');
    } else {
      return this.divideScalar(mag);
    }
  }

  /**
   * Rounds each component of this vector with Utils.roundSymmetric.
   *
   * This is the mutable form of the function roundedSymmetric(). This will mutate (change) this vector, in addition
   * to returning the vector itself.
   */
  roundSymmetric() {
    return this.setXYZ(js_Utils.roundSymmetric(this.x), js_Utils.roundSymmetric(this.y), js_Utils.roundSymmetric(this.z));
  }

  /**
   * Returns a duck-typed object meant for use with tandem/phet-io serialization.
   */
  toStateObject() {
    return {
      x: this.x,
      y: this.y,
      z: this.z
    };
  }
  freeToPool() {
    Vector3.pool.freeToPool(this);
  }
  static pool = new Pool(Vector3, {
    maxSize: 1000,
    initialize: Vector3.prototype.setXYZ,
    defaultArguments: [0, 0, 0]
  });

  // static methods

  /**
   * Spherical linear interpolation between two unit vectors.
   *
   * @param start - Start unit vector
   * @param end - End unit vector
   * @param ratio  - Between 0 (at start vector) and 1 (at end vector)
   * @returns Spherical linear interpolation between the start and end
   */
  static slerp(start, end, ratio) {
    // @ts-expect-error TODO: import with circular protection
    return js_dot.Quaternion.slerp(new js_dot.Quaternion(), js_dot.Quaternion.getRotationQuaternion(start, end), ratio).timesVector3(start);
  }

  /**
   * Constructs a Vector3 from a duck-typed object, for use with tandem/phet-io deserialization.
   */
  static fromStateObject(stateObject) {
    return v3(stateObject.x, stateObject.y, stateObject.z);
  }
}

// (read-only) - Helps to identify the dimension of the vector
Vector3.prototype.isVector3 = true;
Vector3.prototype.dimension = 3;
js_dot.register('Vector3', Vector3);
const v3 = Vector3.pool.create.bind(Vector3.pool);
js_dot.register('v3', v3);
class ImmutableVector3 extends Vector3 {
  /**
   * Throw errors whenever a mutable method is called on our immutable vector
   */
  static mutableOverrideHelper(mutableFunctionName) {
    ImmutableVector3.prototype[mutableFunctionName] = () => {
      throw new Error(`Cannot call mutable method '${mutableFunctionName}' on immutable Vector3`);
    };
  }
}
ImmutableVector3.mutableOverrideHelper('setXYZ');
ImmutableVector3.mutableOverrideHelper('setX');
ImmutableVector3.mutableOverrideHelper('setY');
ImmutableVector3.mutableOverrideHelper('setZ');
Vector3.ZERO = assert ? new ImmutableVector3(0, 0, 0) : new Vector3(0, 0, 0);
Vector3.X_UNIT = assert ? new ImmutableVector3(1, 0, 0) : new Vector3(1, 0, 0);
Vector3.Y_UNIT = assert ? new ImmutableVector3(0, 1, 0) : new Vector3(0, 1, 0);
Vector3.Z_UNIT = assert ? new ImmutableVector3(0, 0, 1) : new Vector3(0, 0, 1);
Vector3.Vector3IO = new IOType('Vector3IO', {
  valueType: Vector3,
  documentation: 'Basic 3-dimensional vector, represented as (x,y,z)',
  toStateObject: vector3 => vector3.toStateObject(),
  fromStateObject: Vector3.fromStateObject,
  stateSchema: {
    x: types_NumberIO,
    y: types_NumberIO,
    z: types_NumberIO
  }
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwiSU9UeXBlIiwiTnVtYmVySU8iLCJkb3QiLCJVdGlscyIsInYyIiwidjQiLCJBRERJTkdfQUNDVU1VTEFUT1IiLCJ2ZWN0b3IiLCJuZXh0VmVjdG9yIiwiYWRkIiwiVmVjdG9yMyIsImNvbnN0cnVjdG9yIiwieCIsInkiLCJ6IiwiZ2V0TWFnbml0dWRlIiwiTWF0aCIsInNxcnQiLCJtYWduaXR1ZGVTcXVhcmVkIiwibWFnbml0dWRlIiwiZ2V0TWFnbml0dWRlU3F1YXJlZCIsImRpc3RhbmNlIiwicG9pbnQiLCJkaXN0YW5jZVNxdWFyZWQiLCJkaXN0YW5jZVhZWiIsImR4IiwiZHkiLCJkeiIsImRpc3RhbmNlU3F1YXJlZFhZWiIsInYiLCJkb3RYWVoiLCJhbmdsZUJldHdlZW4iLCJhY29zIiwiY2xhbXAiLCJub3JtYWxpemVkIiwiZXF1YWxzIiwib3RoZXIiLCJlcXVhbHNFcHNpbG9uIiwiZXBzaWxvbiIsImFicyIsImlzRmluaXRlIiwiY29weSIsInNldCIsInYzIiwiY3Jvc3MiLCJtYWciLCJFcnJvciIsInJvdW5kZWRTeW1tZXRyaWMiLCJyb3VuZFN5bW1ldHJpYyIsIndpdGhNYWduaXR1ZGUiLCJzZXRNYWduaXR1ZGUiLCJ0aW1lc1NjYWxhciIsInNjYWxhciIsInRpbWVzIiwiY29tcG9uZW50VGltZXMiLCJwbHVzIiwicGx1c1hZWiIsInBsdXNTY2FsYXIiLCJtaW51cyIsIm1pbnVzWFlaIiwibWludXNTY2FsYXIiLCJkaXZpZGVkU2NhbGFyIiwibmVnYXRlZCIsImJsZW5kIiwicmF0aW8iLCJhdmVyYWdlIiwidmVjdG9ycyIsImFkZGVkIiwiXyIsInJlZHVjZSIsImRpdmlkZVNjYWxhciIsImxlbmd0aCIsInRvU3RyaW5nIiwidG9WZWN0b3IyIiwidG9WZWN0b3I0Iiwic2V0WFlaIiwic2V0WCIsInNldFkiLCJzZXRaIiwic2NhbGUiLCJtdWx0aXBseVNjYWxhciIsImFkZFhZWiIsImFkZFNjYWxhciIsInN1YnRyYWN0Iiwic3VidHJhY3RYWVoiLCJzdWJ0cmFjdFNjYWxhciIsIm11bHRpcGx5IiwiY29tcG9uZW50TXVsdGlwbHkiLCJuZWdhdGUiLCJzZXRDcm9zcyIsIm5vcm1hbGl6ZSIsInRvU3RhdGVPYmplY3QiLCJmcmVlVG9Qb29sIiwicG9vbCIsIm1heFNpemUiLCJpbml0aWFsaXplIiwicHJvdG90eXBlIiwiZGVmYXVsdEFyZ3VtZW50cyIsInNsZXJwIiwic3RhcnQiLCJlbmQiLCJRdWF0ZXJuaW9uIiwiZ2V0Um90YXRpb25RdWF0ZXJuaW9uIiwidGltZXNWZWN0b3IzIiwiZnJvbVN0YXRlT2JqZWN0Iiwic3RhdGVPYmplY3QiLCJpc1ZlY3RvcjMiLCJkaW1lbnNpb24iLCJyZWdpc3RlciIsImNyZWF0ZSIsImJpbmQiLCJJbW11dGFibGVWZWN0b3IzIiwibXV0YWJsZU92ZXJyaWRlSGVscGVyIiwibXV0YWJsZUZ1bmN0aW9uTmFtZSIsIlpFUk8iLCJhc3NlcnQiLCJYX1VOSVQiLCJZX1VOSVQiLCJaX1VOSVQiLCJWZWN0b3IzSU8iLCJ2YWx1ZVR5cGUiLCJkb2N1bWVudGF0aW9uIiwidmVjdG9yMyIsInN0YXRlU2NoZW1hIl0sInNvdXJjZXMiOlsiVmVjdG9yMy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBCYXNpYyAzLWRpbWVuc2lvbmFsIHZlY3RvciwgcmVwcmVzZW50ZWQgYXMgKHgseSx6KS5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IFBvb2wsIHsgVFBvb2xhYmxlIH0gZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL1Bvb2wuanMnO1xuaW1wb3J0IElPVHlwZSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvSU9UeXBlLmpzJztcbmltcG9ydCBOdW1iZXJJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvTnVtYmVySU8uanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscy5qcyc7XG5pbXBvcnQgVmVjdG9yMiwgeyB2MiB9IGZyb20gJy4vVmVjdG9yMi5qcyc7XG5pbXBvcnQgVmVjdG9yNCwgeyB2NCB9IGZyb20gJy4vVmVjdG9yNC5qcyc7XG5cbmNvbnN0IEFERElOR19BQ0NVTVVMQVRPUiA9ICggdmVjdG9yOiBWZWN0b3IzLCBuZXh0VmVjdG9yOiBWZWN0b3IzICkgPT4ge1xuICByZXR1cm4gdmVjdG9yLmFkZCggbmV4dFZlY3RvciApO1xufTtcblxuZXhwb3J0IHR5cGUgVmVjdG9yM1N0YXRlT2JqZWN0ID0ge1xuICB4OiBudW1iZXI7XG4gIHk6IG51bWJlcjtcbiAgejogbnVtYmVyO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yMyBpbXBsZW1lbnRzIFRQb29sYWJsZSB7XG5cbiAgLy8gVGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgdmVjdG9yLlxuICBwdWJsaWMgeDogbnVtYmVyO1xuXG4gIC8vIFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHZlY3Rvci5cbiAgcHVibGljIHk6IG51bWJlcjtcblxuICAvLyBUaGUgWiBjb29yZGluYXRlIG9mIHRoZSB2ZWN0b3IuXG4gIHB1YmxpYyB6OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSAzLWRpbWVuc2lvbmFsIHZlY3RvciB3aXRoIHRoZSBzcGVjaWZpZWQgWCwgWSBhbmQgWiB2YWx1ZXMuXG4gICAqXG4gICAqIEBwYXJhbSB4IC0gWCBjb29yZGluYXRlXG4gICAqIEBwYXJhbSB5IC0gWSBjb29yZGluYXRlXG4gICAqIEBwYXJhbSB6IC0gWiBjb29yZGluYXRlXG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIgKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMueiA9IHo7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBUaGUgbWFnbml0dWRlIChFdWNsaWRlYW4vTDIgTm9ybSkgb2YgdGhpcyB2ZWN0b3IsIGkuZS4gJFxcc3FydHt4XjIreV4yK3peMn0kLlxuICAgKi9cbiAgcHVibGljIGdldE1hZ25pdHVkZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoIHRoaXMubWFnbml0dWRlU3F1YXJlZCApO1xuICB9XG5cbiAgcHVibGljIGdldCBtYWduaXR1ZGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5nZXRNYWduaXR1ZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUIHNxdWFyZWQgbWFnbml0dWRlIChzcXVhcmUgb2YgdGhlIEV1Y2xpZGVhbi9MMiBOb3JtKSBvZiB0aGlzIHZlY3RvciwgaS5lLiAkeF4yK3leMit6XjIkLlxuICAgKi9cbiAgcHVibGljIGdldE1hZ25pdHVkZVNxdWFyZWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5kb3QoIHRoaXMgYXMgdW5rbm93biBhcyBWZWN0b3IzICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IG1hZ25pdHVkZVNxdWFyZWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5nZXRNYWduaXR1ZGVTcXVhcmVkKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgdmVjdG9yICh0cmVhdGVkIGFzIGEgcG9pbnQpIGFuZCBhbm90aGVyIHBvaW50LlxuICAgKi9cbiAgcHVibGljIGRpc3RhbmNlKCBwb2ludDogVmVjdG9yMyApOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLnNxcnQoIHRoaXMuZGlzdGFuY2VTcXVhcmVkKCBwb2ludCApICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgdmVjdG9yICh0cmVhdGVkIGFzIGEgcG9pbnQpIGFuZCBhbm90aGVyIHBvaW50ICh4LHkseikuXG4gICAqL1xuICBwdWJsaWMgZGlzdGFuY2VYWVooIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIgKTogbnVtYmVyIHtcbiAgICBjb25zdCBkeCA9IHRoaXMueCAtIHg7XG4gICAgY29uc3QgZHkgPSB0aGlzLnkgLSB5O1xuICAgIGNvbnN0IGR6ID0gdGhpcy56IC0gejtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KCBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3F1YXJlZCBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciAodHJlYXRlZCBhcyBhIHBvaW50KSBhbmQgYW5vdGhlciBwb2ludC5cbiAgICovXG4gIHB1YmxpYyBkaXN0YW5jZVNxdWFyZWQoIHBvaW50OiBWZWN0b3IzICk6IG51bWJlciB7XG4gICAgY29uc3QgZHggPSB0aGlzLnggLSBwb2ludC54O1xuICAgIGNvbnN0IGR5ID0gdGhpcy55IC0gcG9pbnQueTtcbiAgICBjb25zdCBkeiA9IHRoaXMueiAtIHBvaW50Lno7XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5ICsgZHogKiBkejtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3F1YXJlZCBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiB0aGlzIHZlY3RvciAodHJlYXRlZCBhcyBhIHBvaW50KSBhbmQgYW5vdGhlciBwb2ludCAoeCx5LHopLlxuICAgKi9cbiAgcHVibGljIGRpc3RhbmNlU3F1YXJlZFhZWiggeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciApOiBudW1iZXIge1xuICAgIGNvbnN0IGR4ID0gdGhpcy54IC0geDtcbiAgICBjb25zdCBkeSA9IHRoaXMueSAtIHk7XG4gICAgY29uc3QgZHogPSB0aGlzLnogLSB6O1xuICAgIHJldHVybiBkeCAqIGR4ICsgZHkgKiBkeSArIGR6ICogZHo7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRvdC1wcm9kdWN0IChFdWNsaWRlYW4gaW5uZXIgcHJvZHVjdCkgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3Igdi5cbiAgICovXG4gIHB1YmxpYyBkb3QoIHY6IFZlY3RvcjMgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55ICsgdGhpcy56ICogdi56O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkb3QtcHJvZHVjdCAoRXVjbGlkZWFuIGlubmVyIHByb2R1Y3QpIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yICh4LHkseikuXG4gICAqL1xuICBwdWJsaWMgZG90WFlaKCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyICk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMueCAqIHggKyB0aGlzLnkgKiB5ICsgdGhpcy56ICogejtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYW5nbGUgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IsIGluIHRoZSByYW5nZSAkXFx0aGV0YVxcaW5bMCwgXFxwaV0kLlxuICAgKlxuICAgKiBFcXVhbCB0byAkXFx0aGV0YSA9IFxcY29zXnstMX0oIFxcaGF0e3V9IFxcY2RvdCBcXGhhdHt2fSApJCB3aGVyZSAkXFxoYXR7dX0kIGlzIHRoaXMgdmVjdG9yIChub3JtYWxpemVkKSBhbmQgJFxcaGF0e3Z9JFxuICAgKiBpcyB0aGUgaW5wdXQgdmVjdG9yIChub3JtYWxpemVkKS5cbiAgICovXG4gIHB1YmxpYyBhbmdsZUJldHdlZW4oIHY6IFZlY3RvcjMgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5hY29zKCBVdGlscy5jbGFtcCggdGhpcy5ub3JtYWxpemVkKCkuZG90KCB2Lm5vcm1hbGl6ZWQoKSApLCAtMSwgMSApICk7XG4gIH1cblxuICAvKipcbiAgICogRXhhY3QgZXF1YWxpdHkgY29tcGFyaXNvbiBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3Rvci5cbiAgICpcbiAgICogQHJldHVybnMgLSBXaGV0aGVyIHRoZSB0d28gdmVjdG9ycyBoYXZlIGVxdWFsIGNvbXBvbmVudHNcbiAgICovXG4gIHB1YmxpYyBlcXVhbHMoIG90aGVyOiBWZWN0b3IzICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnggPT09IG90aGVyLnggJiYgdGhpcy55ID09PSBvdGhlci55ICYmIHRoaXMueiA9PT0gb3RoZXIuejtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHByb3hpbWF0ZSBlcXVhbGl0eSBjb21wYXJpc29uIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yLlxuICAgKlxuICAgKiBAcmV0dXJucyAtIFdoZXRoZXIgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB0d28gdmVjdG9ycyBoYXMgbm8gY29tcG9uZW50IHdpdGggYW4gYWJzb2x1dGUgdmFsdWUgZ3JlYXRlclxuICAgKiAgICAgICAgICAgICAgICAgICAgICB0aGFuIGVwc2lsb24uXG4gICAqL1xuICBwdWJsaWMgZXF1YWxzRXBzaWxvbiggb3RoZXI6IFZlY3RvcjMsIGVwc2lsb246IG51bWJlciApOiBib29sZWFuIHtcbiAgICBpZiAoICFlcHNpbG9uICkge1xuICAgICAgZXBzaWxvbiA9IDA7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLmFicyggdGhpcy54IC0gb3RoZXIueCApICsgTWF0aC5hYnMoIHRoaXMueSAtIG90aGVyLnkgKSArIE1hdGguYWJzKCB0aGlzLnogLSBvdGhlci56ICkgPD0gZXBzaWxvbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGZhbHNlIGlmIGFueSBjb21wb25lbnQgaXMgTmFOLCBpbmZpbml0eSwgb3IgLWluZmluaXR5LiBPdGhlcndpc2UgcmV0dXJucyB0cnVlLlxuICAgKi9cbiAgcHVibGljIGlzRmluaXRlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBpc0Zpbml0ZSggdGhpcy54ICkgJiYgaXNGaW5pdGUoIHRoaXMueSApICYmIGlzRmluaXRlKCB0aGlzLnogKTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxuICAgKiBJbW11dGFibGVzXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhpcyB2ZWN0b3IsIG9yIGlmIGEgdmVjdG9yIGlzIHBhc3NlZCBpbiwgc2V0IHRoYXQgdmVjdG9yJ3MgdmFsdWVzIHRvIG91cnMuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXQoKSwgaWYgYSB2ZWN0b3IgaXMgcHJvdmlkZWQuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmRcbiAgICogd2lsbCBub3QgbW9kaWZ5IHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0gW3ZlY3Rvcl0gLSBJZiBub3QgcHJvdmlkZWQsIGNyZWF0ZXMgYSBuZXcgVmVjdG9yMyB3aXRoIGZpbGxlZCBpbiB2YWx1ZXMuIE90aGVyd2lzZSwgZmlsbHMgaW4gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgIHZhbHVlcyBvZiB0aGUgcHJvdmlkZWQgdmVjdG9yIHNvIHRoYXQgaXQgZXF1YWxzIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIGNvcHkoIHZlY3Rvcj86IFZlY3RvcjMgKTogVmVjdG9yMyB7XG4gICAgaWYgKCB2ZWN0b3IgKSB7XG4gICAgICByZXR1cm4gdmVjdG9yLnNldCggdGhpcyBhcyB1bmtub3duIGFzIFZlY3RvcjMgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdjMoIHRoaXMueCwgdGhpcy55LCB0aGlzLnogKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIEV1Y2xpZGVhbiAzLWRpbWVuc2lvbmFsIGNyb3NzLXByb2R1Y3Qgb2YgdGhpcyB2ZWN0b3IgYnkgdGhlIHBhc3NlZC1pbiB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgY3Jvc3MoIHY6IFZlY3RvcjMgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHYzKFxuICAgICAgdGhpcy55ICogdi56IC0gdGhpcy56ICogdi55LFxuICAgICAgdGhpcy56ICogdi54IC0gdGhpcy54ICogdi56LFxuICAgICAgdGhpcy54ICogdi55IC0gdGhpcy55ICogdi54XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVkIChyZS1zY2FsZWQpIGNvcHkgb2YgdGhpcyB2ZWN0b3Igc3VjaCB0aGF0IGl0cyBtYWduaXR1ZGUgaXMgMS4gSWYgaXRzIGluaXRpYWwgbWFnbml0dWRlIGlzIHplcm8sIGFuXG4gICAqIGVycm9yIGlzIHRocm93bi5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG5vcm1hbGl6ZSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeSB0aGlzXG4gICAqIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBub3JtYWxpemVkKCk6IFZlY3RvcjMge1xuICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlO1xuICAgIGlmICggbWFnID09PSAwICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCAnQ2Fubm90IG5vcm1hbGl6ZSBhIHplcm8tbWFnbml0dWRlIHZlY3RvcicgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdjMoIHRoaXMueCAvIG1hZywgdGhpcy55IC8gbWFnLCB0aGlzLnogLyBtYWcgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHJvdW5kU3ltbWV0cmljKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHJvdW5kZWRTeW1tZXRyaWMoKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHRoaXMuY29weSgpLnJvdW5kU3ltbWV0cmljKCk7XG4gIH1cblxuICAvKipcbiAgICogUmUtc2NhbGVkIGNvcHkgb2YgdGhpcyB2ZWN0b3Igc3VjaCB0aGF0IGl0IGhhcyB0aGUgZGVzaXJlZCBtYWduaXR1ZGUuIElmIGl0cyBpbml0aWFsIG1hZ25pdHVkZSBpcyB6ZXJvLCBhbiBlcnJvclxuICAgKiBpcyB0aHJvd24uIElmIHRoZSBwYXNzZWQtaW4gbWFnbml0dWRlIGlzIG5lZ2F0aXZlLCB0aGUgZGlyZWN0aW9uIG9mIHRoZSByZXN1bHRpbmcgdmVjdG9yIHdpbGwgYmUgcmV2ZXJzZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXRNYWduaXR1ZGUoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgd2l0aE1hZ25pdHVkZSggbWFnbml0dWRlOiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHRoaXMuY29weSgpLnNldE1hZ25pdHVkZSggbWFnbml0dWRlICk7XG4gIH1cblxuICAvKipcbiAgICogQ29weSBvZiB0aGlzIHZlY3Rvciwgc2NhbGVkIGJ5IHRoZSBkZXNpcmVkIHNjYWxhciB2YWx1ZS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG11bHRpcGx5U2NhbGFyKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHRpbWVzU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdjMoIHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyLCB0aGlzLnogKiBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW1lIGFzIHRpbWVzU2NhbGFyLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gbXVsdGlwbHkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgdGltZXMoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjMge1xuICAgIHJldHVybiB0aGlzLnRpbWVzU2NhbGFyKCBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3B5IG9mIHRoaXMgdmVjdG9yLCBtdWx0aXBsaWVkIGNvbXBvbmVudC13aXNlIGJ5IHRoZSBwYXNzZWQtaW4gdmVjdG9yIHYuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBjb21wb25lbnRNdWx0aXBseSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBjb21wb25lbnRUaW1lcyggdjogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdjMoIHRoaXMueCAqIHYueCwgdGhpcy55ICogdi55LCB0aGlzLnogKiB2LnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRpdGlvbiBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IsIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBhZGQoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgcGx1cyggdjogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdjMoIHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55LCB0aGlzLnogKyB2LnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRpdGlvbiBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IgKHgseSx6KSwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGFkZFhZWigpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBwbHVzWFlaKCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyICk6IFZlY3RvcjMge1xuICAgIHJldHVybiB2MyggdGhpcy54ICsgeCwgdGhpcy55ICsgeSwgdGhpcy56ICsgeiApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZGl0aW9uIG9mIHRoaXMgdmVjdG9yIHdpdGggYSBzY2FsYXIgKGFkZHMgdGhlIHNjYWxhciB0byBldmVyeSBjb21wb25lbnQpLCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gYWRkU2NhbGFyKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHBsdXNTY2FsYXIoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjMge1xuICAgIHJldHVybiB2MyggdGhpcy54ICsgc2NhbGFyLCB0aGlzLnkgKyBzY2FsYXIsIHRoaXMueiArIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnRyYWN0aW9uIG9mIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yIHYsIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzdWJ0cmFjdCgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBtaW51cyggdjogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdjMoIHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55LCB0aGlzLnogLSB2LnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdGlvbiBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoeCx5LHopLCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc3VidHJhY3RYWVooKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgbWludXNYWVooIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHYzKCB0aGlzLnggLSB4LCB0aGlzLnkgLSB5LCB0aGlzLnogLSB6ICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3Rpb24gb2YgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKHN1YnRyYWN0cyB0aGUgc2NhbGFyIGZyb20gZXZlcnkgY29tcG9uZW50KSwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHN1YnRyYWN0U2NhbGFyKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIG1pbnVzU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdjMoIHRoaXMueCAtIHNjYWxhciwgdGhpcy55IC0gc2NhbGFyLCB0aGlzLnogLSBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXZpc2lvbiBvZiB0aGlzIHZlY3RvciBieSBhIHNjYWxhciAoZGl2aWRlcyBldmVyeSBjb21wb25lbnQgYnkgdGhlIHNjYWxhciksIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaXZpZGVTY2FsYXIoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgZGl2aWRlZFNjYWxhciggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHYzKCB0aGlzLnggLyBzY2FsYXIsIHRoaXMueSAvIHNjYWxhciwgdGhpcy56IC8gc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogTmVnYXRlZCBjb3B5IG9mIHRoaXMgdmVjdG9yIChtdWx0aXBsaWVzIGV2ZXJ5IGNvbXBvbmVudCBieSAtMSkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBuZWdhdGUoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqL1xuICBwdWJsaWMgbmVnYXRlZCgpOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdjMoIC10aGlzLngsIC10aGlzLnksIC10aGlzLnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdGhpcyB2ZWN0b3IgKHJhdGlvPTApIGFuZCBhbm90aGVyIHZlY3RvciAocmF0aW89MSkuXG4gICAqXG4gICAqIEBwYXJhbSB2ZWN0b3JcbiAgICogQHBhcmFtIHJhdGlvIC0gTm90IG5lY2Vzc2FyaWx5IGNvbnN0cmFpbmVkIGluIFswLCAxXVxuICAgKi9cbiAgcHVibGljIGJsZW5kKCB2ZWN0b3I6IFZlY3RvcjMsIHJhdGlvOiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHRoaXMucGx1cyggdmVjdG9yLm1pbnVzKCB0aGlzIGFzIHVua25vd24gYXMgVmVjdG9yMyApLnRpbWVzKCByYXRpbyApICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGF2ZXJhZ2UgKG1pZHBvaW50KSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBhdmVyYWdlKCB2ZWN0b3I6IFZlY3RvcjMgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHRoaXMuYmxlbmQoIHZlY3RvciwgMC41ICk7XG4gIH1cblxuICAvKipcbiAgICogVGFrZSBhIGNvbXBvbmVudC1iYXNlZCBtZWFuIG9mIGFsbCB2ZWN0b3JzIHByb3ZpZGVkLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhdmVyYWdlKCB2ZWN0b3JzOiBWZWN0b3IzW10gKTogVmVjdG9yMyB7XG4gICAgY29uc3QgYWRkZWQgPSBfLnJlZHVjZSggdmVjdG9ycywgQURESU5HX0FDQ1VNVUxBVE9SLCBuZXcgVmVjdG9yMyggMCwgMCwgMCApICk7XG4gICAgcmV0dXJuIGFkZGVkLmRpdmlkZVNjYWxhciggdmVjdG9ycy5sZW5ndGggKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWJ1Z2dpbmcgc3RyaW5nIGZvciB0aGUgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBWZWN0b3IzKCR7dGhpcy54fSwgJHt0aGlzLnl9LCAke3RoaXMuen0pYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGlzIHRvIGEgMi1kaW1lbnNpb25hbCB2ZWN0b3IsIGRpc2NhcmRpbmcgdGhlIHotY29tcG9uZW50LlxuICAgKi9cbiAgcHVibGljIHRvVmVjdG9yMigpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdjIoIHRoaXMueCwgdGhpcy55ICk7XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGhpcyB0byBhIDQtZGltZW5zaW9uYWwgdmVjdG9yLCB3aXRoIHRoZSB3LWNvbXBvbmVudCBlcXVhbCB0byAxICh1c2VmdWwgZm9yIGhvbW9nZW5lb3VzIGNvb3JkaW5hdGVzKS5cbiAgICovXG4gIHB1YmxpYyB0b1ZlY3RvcjQoKTogVmVjdG9yNCB7XG4gICAgcmV0dXJuIHY0KCB0aGlzLngsIHRoaXMueSwgdGhpcy56LCAxICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogTXV0YWJsZXNcbiAgICogLSBhbGwgbXV0YXRpb24gc2hvdWxkIGdvIHRocm91Z2ggc2V0WFlaIC8gc2V0WCAvIHNldFkgLyBzZXRaXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogU2V0cyBhbGwgb2YgdGhlIGNvbXBvbmVudHMgb2YgdGhpcyB2ZWN0b3IsIHJldHVybmluZyB0aGlzLlxuICAgKi9cbiAgcHVibGljIHNldFhZWiggeDogbnVtYmVyLCB5OiBudW1iZXIsIHo6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgdGhpcy56ID0gejtcbiAgICByZXR1cm4gdGhpcyBhcyB1bmtub3duIGFzIFZlY3RvcjM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgeC1jb21wb25lbnQgb2YgdGhpcyB2ZWN0b3IsIHJldHVybmluZyB0aGlzLlxuICAgKi9cbiAgcHVibGljIHNldFgoIHg6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHJldHVybiB0aGlzIGFzIHVua25vd24gYXMgVmVjdG9yMztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB5LWNvbXBvbmVudCBvZiB0aGlzIHZlY3RvciwgcmV0dXJuaW5nIHRoaXMuXG4gICAqL1xuICBwdWJsaWMgc2V0WSggeTogbnVtYmVyICk6IFZlY3RvcjMge1xuICAgIHRoaXMueSA9IHk7XG4gICAgcmV0dXJuIHRoaXMgYXMgdW5rbm93biBhcyBWZWN0b3IzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHotY29tcG9uZW50IG9mIHRoaXMgdmVjdG9yLCByZXR1cm5pbmcgdGhpcy5cbiAgICovXG4gIHB1YmxpYyBzZXRaKCB6OiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgdGhpcy56ID0gejtcbiAgICByZXR1cm4gdGhpcyBhcyB1bmtub3duIGFzIFZlY3RvcjM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIHZlY3RvciB0byBiZSBhIGNvcHkgb2YgYW5vdGhlciB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29weSgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHNldCggdjogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooIHYueCwgdi55LCB2LnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtYWduaXR1ZGUgb2YgdGhpcyB2ZWN0b3IuIElmIHRoZSBwYXNzZWQtaW4gbWFnbml0dWRlIGlzIG5lZ2F0aXZlLCB0aGlzIGZsaXBzIHRoZSB2ZWN0b3IgYW5kIHNldHMgaXRzXG4gICAqIG1hZ25pdHVkZSB0byBhYnMoIG1hZ25pdHVkZSApLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNYWduaXR1ZGUoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzZXRNYWduaXR1ZGUoIG1hZ25pdHVkZTogbnVtYmVyICk6IFZlY3RvcjMge1xuICAgIGNvbnN0IHNjYWxlID0gbWFnbml0dWRlIC8gdGhpcy5tYWduaXR1ZGU7XG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoIHNjYWxlICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhbm90aGVyIHZlY3RvciB0byB0aGlzIHZlY3RvciwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcGx1cygpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGFkZCggdjogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooIHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55LCB0aGlzLnogKyB2LnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFub3RoZXIgdmVjdG9yICh4LHkseikgdG8gdGhpcyB2ZWN0b3IsIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHBsdXNYWVooKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBhZGRYWVooIHg6IG51bWJlciwgeTogbnVtYmVyLCB6OiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFlaKCB0aGlzLnggKyB4LCB0aGlzLnkgKyB5LCB0aGlzLnogKyB6ICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIHNjYWxhciB0byB0aGlzIHZlY3RvciAoYWRkZWQgdG8gZXZlcnkgY29tcG9uZW50KSwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcGx1c1NjYWxhcigpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGFkZFNjYWxhciggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFlaKCB0aGlzLnggKyBzY2FsYXIsIHRoaXMueSArIHNjYWxhciwgdGhpcy56ICsgc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3RzIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBtaW51cygpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHN1YnRyYWN0KCB2OiBWZWN0b3IzICk6IFZlY3RvcjMge1xuICAgIHJldHVybiB0aGlzLnNldFhZWiggdGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnksIHRoaXMueiAtIHYueiApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnRyYWN0cyB0aGlzIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoeCx5LHopLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBtaW51c1hZWigpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHN1YnRyYWN0WFlaKCB4OiBudW1iZXIsIHk6IG51bWJlciwgejogbnVtYmVyICk6IFZlY3RvcjMge1xuICAgIHJldHVybiB0aGlzLnNldFhZWiggdGhpcy54IC0geCwgdGhpcy55IC0geSwgdGhpcy56IC0geiApO1xuICB9XG5cbiAgLyoqXG4gICAqIFN1YnRyYWN0cyB0aGlzIHZlY3RvciBieSBhIHNjYWxhciAoc3VidHJhY3RzIGVhY2ggY29tcG9uZW50IGJ5IHRoZSBzY2FsYXIpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBtaW51c1NjYWxhcigpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHN1YnRyYWN0U2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooIHRoaXMueCAtIHNjYWxhciwgdGhpcy55IC0gc2NhbGFyLCB0aGlzLnogLSBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdWx0aXBsaWVzIHRoaXMgdmVjdG9yIGJ5IGEgc2NhbGFyIChtdWx0aXBsaWVzIGVhY2ggY29tcG9uZW50IGJ5IHRoZSBzY2FsYXIpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB0aW1lc1NjYWxhcigpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIG11bHRpcGx5U2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooIHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyLCB0aGlzLnogKiBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdWx0aXBsaWVzIHRoaXMgdmVjdG9yIGJ5IGEgc2NhbGFyIChtdWx0aXBsaWVzIGVhY2ggY29tcG9uZW50IGJ5IHRoZSBzY2FsYXIpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICogU2FtZSBhcyBtdWx0aXBseVNjYWxhci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB0aW1lcygpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIG11bHRpcGx5KCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhciggc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbGllcyB0aGlzIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciBjb21wb25lbnQtd2lzZSwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29tcG9uZW50VGltZXMoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBjb21wb25lbnRNdWx0aXBseSggdjogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooIHRoaXMueCAqIHYueCwgdGhpcy55ICogdi55LCB0aGlzLnogKiB2LnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXZpZGVzIHRoaXMgdmVjdG9yIGJ5IGEgc2NhbGFyIChkaXZpZGVzIGVhY2ggY29tcG9uZW50IGJ5IHRoZSBzY2FsYXIpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaXZpZGVkU2NhbGFyKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgZGl2aWRlU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooIHRoaXMueCAvIHNjYWxhciwgdGhpcy55IC8gc2NhbGFyLCB0aGlzLnogLyBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOZWdhdGVzIHRoaXMgdmVjdG9yIChtdWx0aXBsaWVzIGVhY2ggY29tcG9uZW50IGJ5IC0xKSwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gbmVnYXRlZCgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIG5lZ2F0ZSgpOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooIC10aGlzLngsIC10aGlzLnksIC10aGlzLnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIG91ciB2YWx1ZSB0byB0aGUgRXVjbGlkZWFuIDMtZGltZW5zaW9uYWwgY3Jvc3MtcHJvZHVjdCBvZiB0aGlzIHZlY3RvciBieSB0aGUgcGFzc2VkLWluIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBzZXRDcm9zcyggdjogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWVooXG4gICAgICB0aGlzLnkgKiB2LnogLSB0aGlzLnogKiB2LnksXG4gICAgICB0aGlzLnogKiB2LnggLSB0aGlzLnggKiB2LnosXG4gICAgICB0aGlzLnggKiB2LnkgLSB0aGlzLnkgKiB2LnhcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZXMgdGhpcyB2ZWN0b3IgKHJlc2NhbGVzIHRvIHdoZXJlIHRoZSBtYWduaXR1ZGUgaXMgMSksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG5vcm1hbGl6ZWQoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBub3JtYWxpemUoKTogVmVjdG9yMyB7XG4gICAgY29uc3QgbWFnID0gdGhpcy5tYWduaXR1ZGU7XG4gICAgaWYgKCBtYWcgPT09IDAgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoICdDYW5ub3Qgbm9ybWFsaXplIGEgemVyby1tYWduaXR1ZGUgdmVjdG9yJyApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmRpdmlkZVNjYWxhciggbWFnICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJvdW5kcyBlYWNoIGNvbXBvbmVudCBvZiB0aGlzIHZlY3RvciB3aXRoIFV0aWxzLnJvdW5kU3ltbWV0cmljLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHJvdW5kZWRTeW1tZXRyaWMoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb25cbiAgICogdG8gcmV0dXJuaW5nIHRoZSB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHJvdW5kU3ltbWV0cmljKCk6IFZlY3RvcjMge1xuICAgIHJldHVybiB0aGlzLnNldFhZWiggVXRpbHMucm91bmRTeW1tZXRyaWMoIHRoaXMueCApLCBVdGlscy5yb3VuZFN5bW1ldHJpYyggdGhpcy55ICksIFV0aWxzLnJvdW5kU3ltbWV0cmljKCB0aGlzLnogKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBkdWNrLXR5cGVkIG9iamVjdCBtZWFudCBmb3IgdXNlIHdpdGggdGFuZGVtL3BoZXQtaW8gc2VyaWFsaXphdGlvbi5cbiAgICovXG4gIHB1YmxpYyB0b1N0YXRlT2JqZWN0KCk6IFZlY3RvcjNTdGF0ZU9iamVjdCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHg6IHRoaXMueCxcbiAgICAgIHk6IHRoaXMueSxcbiAgICAgIHo6IHRoaXMuelxuICAgIH07XG4gIH1cblxuICBwdWJsaWMgZnJlZVRvUG9vbCgpOiB2b2lkIHtcbiAgICBWZWN0b3IzLnBvb2wuZnJlZVRvUG9vbCggdGhpcyApO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBwb29sID0gbmV3IFBvb2woIFZlY3RvcjMsIHtcbiAgICBtYXhTaXplOiAxMDAwLFxuICAgIGluaXRpYWxpemU6IFZlY3RvcjMucHJvdG90eXBlLnNldFhZWixcbiAgICBkZWZhdWx0QXJndW1lbnRzOiBbIDAsIDAsIDAgXVxuICB9ICk7XG5cbiAgLy8gc3RhdGljIG1ldGhvZHNcblxuICAvKipcbiAgICogU3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHVuaXQgdmVjdG9ycy5cbiAgICpcbiAgICogQHBhcmFtIHN0YXJ0IC0gU3RhcnQgdW5pdCB2ZWN0b3JcbiAgICogQHBhcmFtIGVuZCAtIEVuZCB1bml0IHZlY3RvclxuICAgKiBAcGFyYW0gcmF0aW8gIC0gQmV0d2VlbiAwIChhdCBzdGFydCB2ZWN0b3IpIGFuZCAxIChhdCBlbmQgdmVjdG9yKVxuICAgKiBAcmV0dXJucyBTcGhlcmljYWwgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0aGUgc3RhcnQgYW5kIGVuZFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzbGVycCggc3RhcnQ6IFZlY3RvcjMsIGVuZDogVmVjdG9yMywgcmF0aW86IG51bWJlciApOiBWZWN0b3IzIHtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IGltcG9ydCB3aXRoIGNpcmN1bGFyIHByb3RlY3Rpb25cbiAgICByZXR1cm4gZG90LlF1YXRlcm5pb24uc2xlcnAoIG5ldyBkb3QuUXVhdGVybmlvbigpLCBkb3QuUXVhdGVybmlvbi5nZXRSb3RhdGlvblF1YXRlcm5pb24oIHN0YXJ0LCBlbmQgKSwgcmF0aW8gKS50aW1lc1ZlY3RvcjMoIHN0YXJ0ICk7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIFZlY3RvcjMgZnJvbSBhIGR1Y2stdHlwZWQgb2JqZWN0LCBmb3IgdXNlIHdpdGggdGFuZGVtL3BoZXQtaW8gZGVzZXJpYWxpemF0aW9uLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tU3RhdGVPYmplY3QoIHN0YXRlT2JqZWN0OiBWZWN0b3IzU3RhdGVPYmplY3QgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHYzKFxuICAgICAgc3RhdGVPYmplY3QueCxcbiAgICAgIHN0YXRlT2JqZWN0LnksXG4gICAgICBzdGF0ZU9iamVjdC56XG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1ZlY3RvcjMhOiBib29sZWFuO1xuICBwdWJsaWMgZGltZW5zaW9uITogbnVtYmVyO1xuICBwdWJsaWMgc3RhdGljIFpFUk86IFZlY3RvcjM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG4gIHB1YmxpYyBzdGF0aWMgWF9VTklUOiBWZWN0b3IzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIFlfVU5JVDogVmVjdG9yMzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBaX1VOSVQ6IFZlY3RvcjM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG4gIHB1YmxpYyBzdGF0aWMgVmVjdG9yM0lPOiBJT1R5cGU7XG59XG5cbi8vIChyZWFkLW9ubHkpIC0gSGVscHMgdG8gaWRlbnRpZnkgdGhlIGRpbWVuc2lvbiBvZiB0aGUgdmVjdG9yXG5WZWN0b3IzLnByb3RvdHlwZS5pc1ZlY3RvcjMgPSB0cnVlO1xuVmVjdG9yMy5wcm90b3R5cGUuZGltZW5zaW9uID0gMztcblxuZG90LnJlZ2lzdGVyKCAnVmVjdG9yMycsIFZlY3RvcjMgKTtcblxuY29uc3QgdjMgPSBWZWN0b3IzLnBvb2wuY3JlYXRlLmJpbmQoIFZlY3RvcjMucG9vbCApO1xuZG90LnJlZ2lzdGVyKCAndjMnLCB2MyApO1xuXG5jbGFzcyBJbW11dGFibGVWZWN0b3IzIGV4dGVuZHMgVmVjdG9yMyB7XG4gIC8qKlxuICAgKiBUaHJvdyBlcnJvcnMgd2hlbmV2ZXIgYSBtdXRhYmxlIG1ldGhvZCBpcyBjYWxsZWQgb24gb3VyIGltbXV0YWJsZSB2ZWN0b3JcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbXV0YWJsZU92ZXJyaWRlSGVscGVyKCBtdXRhYmxlRnVuY3Rpb25OYW1lOiAnc2V0WCcgfCAnc2V0WScgfCAnc2V0WicgfCAnc2V0WFlaJyApOiB2b2lkIHtcbiAgICBJbW11dGFibGVWZWN0b3IzLnByb3RvdHlwZVsgbXV0YWJsZUZ1bmN0aW9uTmFtZSBdID0gKCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCBgQ2Fubm90IGNhbGwgbXV0YWJsZSBtZXRob2QgJyR7bXV0YWJsZUZ1bmN0aW9uTmFtZX0nIG9uIGltbXV0YWJsZSBWZWN0b3IzYCApO1xuICAgIH07XG4gIH1cbn1cblxuSW1tdXRhYmxlVmVjdG9yMy5tdXRhYmxlT3ZlcnJpZGVIZWxwZXIoICdzZXRYWVonICk7XG5JbW11dGFibGVWZWN0b3IzLm11dGFibGVPdmVycmlkZUhlbHBlciggJ3NldFgnICk7XG5JbW11dGFibGVWZWN0b3IzLm11dGFibGVPdmVycmlkZUhlbHBlciggJ3NldFknICk7XG5JbW11dGFibGVWZWN0b3IzLm11dGFibGVPdmVycmlkZUhlbHBlciggJ3NldFonICk7XG5cblZlY3RvcjMuWkVSTyA9IGFzc2VydCA/IG5ldyBJbW11dGFibGVWZWN0b3IzKCAwLCAwLCAwICkgOiBuZXcgVmVjdG9yMyggMCwgMCwgMCApO1xuVmVjdG9yMy5YX1VOSVQgPSBhc3NlcnQgPyBuZXcgSW1tdXRhYmxlVmVjdG9yMyggMSwgMCwgMCApIDogbmV3IFZlY3RvcjMoIDEsIDAsIDAgKTtcblZlY3RvcjMuWV9VTklUID0gYXNzZXJ0ID8gbmV3IEltbXV0YWJsZVZlY3RvcjMoIDAsIDEsIDAgKSA6IG5ldyBWZWN0b3IzKCAwLCAxLCAwICk7XG5WZWN0b3IzLlpfVU5JVCA9IGFzc2VydCA/IG5ldyBJbW11dGFibGVWZWN0b3IzKCAwLCAwLCAxICkgOiBuZXcgVmVjdG9yMyggMCwgMCwgMSApO1xuXG5WZWN0b3IzLlZlY3RvcjNJTyA9IG5ldyBJT1R5cGUoICdWZWN0b3IzSU8nLCB7XG4gIHZhbHVlVHlwZTogVmVjdG9yMyxcbiAgZG9jdW1lbnRhdGlvbjogJ0Jhc2ljIDMtZGltZW5zaW9uYWwgdmVjdG9yLCByZXByZXNlbnRlZCBhcyAoeCx5LHopJyxcbiAgdG9TdGF0ZU9iamVjdDogKCB2ZWN0b3IzOiBWZWN0b3IzICkgPT4gdmVjdG9yMy50b1N0YXRlT2JqZWN0KCksXG4gIGZyb21TdGF0ZU9iamVjdDogVmVjdG9yMy5mcm9tU3RhdGVPYmplY3QsXG4gIHN0YXRlU2NoZW1hOiB7XG4gICAgeDogTnVtYmVySU8sXG4gICAgeTogTnVtYmVySU8sXG4gICAgejogTnVtYmVySU9cbiAgfVxufSApO1xuXG5leHBvcnQgeyB2MyB9O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLElBQUksTUFBcUIsNEJBQTRCO0FBQzVELE9BQU9DLE1BQU0sTUFBTSxpQ0FBaUM7QUFDcEQsT0FBT0MsUUFBUSxNQUFNLG1DQUFtQztBQUN4RCxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUMxQixPQUFPQyxLQUFLLE1BQU0sWUFBWTtBQUM5QixTQUFrQkMsRUFBRSxRQUFRLGNBQWM7QUFDMUMsU0FBa0JDLEVBQUUsUUFBUSxjQUFjO0FBRTFDLE1BQU1DLGtCQUFrQixHQUFHQSxDQUFFQyxNQUFlLEVBQUVDLFVBQW1CLEtBQU07RUFDckUsT0FBT0QsTUFBTSxDQUFDRSxHQUFHLENBQUVELFVBQVUsQ0FBRTtBQUNqQyxDQUFDO0FBUUQsZUFBZSxNQUFNRSxPQUFPLENBQXNCO0VBRWhEOztFQUdBOztFQUdBOztFQUdBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1NDLFdBQVdBLENBQUVDLENBQVMsRUFBRUMsQ0FBUyxFQUFFQyxDQUFTLEVBQUc7SUFDcEQsSUFBSSxDQUFDRixDQUFDLEdBQUdBLENBQUM7SUFDVixJQUFJLENBQUNDLENBQUMsR0FBR0EsQ0FBQztJQUNWLElBQUksQ0FBQ0MsQ0FBQyxHQUFHQSxDQUFDO0VBQ1o7O0VBR0E7QUFDRjtBQUNBO0VBQ1NDLFlBQVlBLENBQUEsRUFBVztJQUM1QixPQUFPQyxJQUFJLENBQUNDLElBQUksQ0FBRSxJQUFJLENBQUNDLGdCQUFnQixDQUFFO0VBQzNDO0VBRUEsSUFB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Vector2.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Basic 2-dimensional vector, represented as (x,y).  Values can be numeric, or NaN or infinite.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */







const Vector2_ADDING_ACCUMULATOR = (vector, nextVector) => {
  return vector.add(nextVector);
};
class Vector2 {
  // The X coordinate of the vector.

  // The Y coordinate of the vector.

  /**
   * Creates a 2-dimensional vector with the specified X and Y values.
   *
   * @param x - X coordinate
   * @param y - Y coordinate
   */
  constructor(x, y) {
    this.x = x;
    this.y = y;
  }

  /**
   * The magnitude (Euclidean/L2 Norm) of this vector, i.e. $\sqrt{x^2+y^2}$.
   */
  getMagnitude() {
    return Math.sqrt(this.magnitudeSquared);
  }
  get magnitude() {
    return this.getMagnitude();
  }

  /**
   * The squared magnitude (square of the Euclidean/L2 Norm) of this vector, i.e. $x^2+y^2$.
   */
  getMagnitudeSquared() {
    return this.x * this.x + this.y * this.y;
  }
  get magnitudeSquared() {
    return this.getMagnitudeSquared();
  }

  /**
   * The Euclidean distance between this vector (treated as a point) and another point.
   */
  distance(point) {
    return Math.sqrt(this.distanceSquared(point));
  }

  /**
   * The Euclidean distance between this vector (treated as a point) and another point (x,y).
   */
  distanceXY(x, y) {
    const dx = this.x - x;
    const dy = this.y - y;
    return Math.sqrt(dx * dx + dy * dy);
  }

  /**
   * The squared Euclidean distance between this vector (treated as a point) and another point.
   */
  distanceSquared(point) {
    const dx = this.x - point.x;
    const dy = this.y - point.y;
    return dx * dx + dy * dy;
  }

  /**
   * The squared Euclidean distance between this vector (treated as a point) and another point with coordinates (x,y).
   */
  distanceSquaredXY(x, y) {
    const dx = this.x - x;
    const dy = this.y - y;
    return dx * dx + dy * dy;
  }

  /**
   * The dot-product (Euclidean inner product) between this vector and another vector v.
   */
  dot(v) {
    return this.x * v.x + this.y * v.y;
  }

  /**
   * The dot-product (Euclidean inner product) between this vector and another vector (x,y).
   */
  dotXY(x, y) {
    return this.x * x + this.y * y;
  }

  /**
   * The angle $\theta$ of this vector, such that this vector is equal to
   * $$ u = \begin{bmatrix} r\cos\theta \\ r\sin\theta \end{bmatrix} $$
   * for the magnitude $r \ge 0$ of the vector, with $\theta\in(-\pi,\pi]$
   */
  getAngle() {
    return Math.atan2(this.y, this.x);
  }
  get angle() {
    return this.getAngle();
  }

  /**
   * The angle between this vector and another vector, in the range $\theta\in[0, \pi]$.
   *
   * Equal to $\theta = \cos^{-1}( \hat{u} \cdot \hat{v} )$ where $\hat{u}$ is this vector (normalized) and $\hat{v}$
   * is the input vector (normalized).
   */
  angleBetween(v) {
    const thisMagnitude = this.magnitude;
    const vMagnitude = v.magnitude;
    // @ts-expect-error TODO: import with circular protection
    return Math.acos(js_dot.clamp((this.x * v.x + this.y * v.y) / (thisMagnitude * vMagnitude), -1, 1));
  }

  /**
   * Exact equality comparison between this vector and another vector.
    * @returns - Whether the two vectors have equal components
   */
  equals(other) {
    return this.x === other.x && this.y === other.y;
  }

  /**
   * Approximate equality comparison between this vector and another vector.
   *
   * @returns - Whether difference between the two vectors has no component with an absolute value greater than epsilon.
   */
  equalsEpsilon(other, epsilon) {
    if (!epsilon) {
      epsilon = 0;
    }
    return Math.max(Math.abs(this.x - other.x), Math.abs(this.y - other.y)) <= epsilon;
  }

  /**
   * Returns false if either component is NaN, infinity, or -infinity. Otherwise returns true.
   */
  isFinite() {
    return isFinite(this.x) && isFinite(this.y);
  }

  /*---------------------------------------------------------------------------*
   * Immutables
   *---------------------------------------------------------------------------*/

  /**
   * Creates a copy of this vector, or if a vector is passed in, set that vector's values to ours.
   *
   * This is the immutable form of the function set(), if a vector is provided. This will return a new vector, and
   * will not modify this vector.
   *
   * @param [vector] - If not provided, creates a new Vector2 with filled in values. Otherwise, fills in the
   *                   values of the provided vector so that it equals this vector.
   */
  copy(vector) {
    if (vector) {
      return vector.set(this);
    } else {
      return v2(this.x, this.y);
    }
  }

  /**
   * The scalar value of the z-component of the equivalent 3-dimensional cross product:
   * $$ f( u, v ) = \left( \begin{bmatrix} u_x \\ u_y \\ 0 \end{bmatrix} \times \begin{bmatrix} v_x \\ v_y \\ 0 \end{bmatrix} \right)_z = u_x v_y - u_y v_x $$
   */
  crossScalar(v) {
    return this.x * v.y - this.y * v.x;
  }

  /**
   * Normalized (re-scaled) copy of this vector such that its magnitude is 1. If its initial magnitude is zero, an
   * error is thrown.
   *
   * This is the immutable form of the function normalize(). This will return a new vector, and will not modify this
   * vector.
   */
  normalized() {
    const mag = this.magnitude;
    if (mag === 0) {
      throw new Error('Cannot normalize a zero-magnitude vector');
    } else {
      return v2(this.x / mag, this.y / mag);
    }
  }

  /**
   * Returns a copy of this vector with each component rounded by Utils.roundSymmetric.
   *
   * This is the immutable form of the function roundSymmetric(). This will return a new vector, and will not modify
   * this vector.
   */
  roundedSymmetric() {
    return this.copy().roundSymmetric();
  }

  /**
   * Re-scaled copy of this vector such that it has the desired magnitude. If its initial magnitude is zero, an error
   * is thrown. If the passed-in magnitude is negative, the direction of the resulting vector will be reversed.
   *
   * This is the immutable form of the function setMagnitude(). This will return a new vector, and will not modify
   * this vector.
   */
  withMagnitude(magnitude) {
    return this.copy().setMagnitude(magnitude);
  }

  /**
   * Copy of this vector, scaled by the desired scalar value.
   *
   * This is the immutable form of the function multiplyScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  timesScalar(scalar) {
    return v2(this.x * scalar, this.y * scalar);
  }

  /**
   * Same as timesScalar.
   *
   * This is the immutable form of the function multiply(). This will return a new vector, and will not modify
   * this vector.
   */
  times(scalar) {
    return this.timesScalar(scalar);
  }

  /**
   * Copy of this vector, multiplied component-wise by the passed-in vector v.
   *
   * This is the immutable form of the function componentMultiply(). This will return a new vector, and will not modify
   * this vector.
   */
  componentTimes(v) {
    return v2(this.x * v.x, this.y * v.y);
  }

  /**
   * Addition of this vector and another vector, returning a copy.
   *
   * This is the immutable form of the function add(). This will return a new vector, and will not modify
   * this vector.
   */
  plus(v) {
    return v2(this.x + v.x, this.y + v.y);
  }

  /**
   * Addition of this vector and another vector (x,y), returning a copy.
   *
   * This is the immutable form of the function addXY(). This will return a new vector, and will not modify
   * this vector.
   */
  plusXY(x, y) {
    return v2(this.x + x, this.y + y);
  }

  /**
   * Addition of this vector with a scalar (adds the scalar to every component), returning a copy.
   *
   * This is the immutable form of the function addScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  plusScalar(scalar) {
    return v2(this.x + scalar, this.y + scalar);
  }

  /**
   * Subtraction of this vector by another vector v, returning a copy.
   *
   * This is the immutable form of the function subtract(). This will return a new vector, and will not modify
   * this vector.
   */
  minus(v) {
    return v2(this.x - v.x, this.y - v.y);
  }

  /**
   * Subtraction of this vector by another vector (x,y), returning a copy.
   *
   * This is the immutable form of the function subtractXY(). This will return a new vector, and will not modify
   * this vector.
   */
  minusXY(x, y) {
    return v2(this.x - x, this.y - y);
  }

  /**
   * Subtraction of this vector by a scalar (subtracts the scalar from every component), returning a copy.
   *
   * This is the immutable form of the function subtractScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  minusScalar(scalar) {
    return v2(this.x - scalar, this.y - scalar);
  }

  /**
   * Division of this vector by a scalar (divides every component by the scalar), returning a copy.
   *
   * This is the immutable form of the function divideScalar(). This will return a new vector, and will not modify
   * this vector.
   */
  dividedScalar(scalar) {
    return v2(this.x / scalar, this.y / scalar);
  }

  /**
   * Negated copy of this vector (multiplies every component by -1).
   *
   * This is the immutable form of the function negate(). This will return a new vector, and will not modify
   * this vector.
   */
  negated() {
    return v2(-this.x, -this.y);
  }

  /**
   * Rotated by -pi/2 (perpendicular to this vector), returned as a copy.
   */
  getPerpendicular() {
    return v2(this.y, -this.x);
  }
  get perpendicular() {
    return this.getPerpendicular();
  }

  /**
   * Rotated by an arbitrary angle, in radians. Returned as a copy.
   *
   * This is the immutable form of the function rotate(). This will return a new vector, and will not modify
   * this vector.
   *
   * @param angle - In radians
   */
  rotated(angle) {
    const newAngle = this.angle + angle;
    const mag = this.magnitude;
    return v2(mag * Math.cos(newAngle), mag * Math.sin(newAngle));
  }

  /**
   * Mutable method that rotates this vector about an x,y point.
   *
   * @param x - origin of rotation in x
   * @param y - origin of rotation in y
   * @param angle - radians to rotate
   * @returns this for chaining
   */
  rotateAboutXY(x, y, angle) {
    const dx = this.x - x;
    const dy = this.y - y;
    const cos = Math.cos(angle);
    const sin = Math.sin(angle);
    this.x = x + dx * cos - dy * sin;
    this.y = y + dx * sin + dy * cos;
    return this;
  }

  /**
   * Same as rotateAboutXY but with a point argument.
   */
  rotateAboutPoint(point, angle) {
    return this.rotateAboutXY(point.x, point.y, angle);
  }

  /**
   * Immutable method that returns a new Vector2 that is rotated about the given point.
   *
   * @param x - origin for rotation in x
   * @param y - origin for rotation in y
   * @param angle - radians to rotate
   */
  rotatedAboutXY(x, y, angle) {
    return v2(this.x, this.y).rotateAboutXY(x, y, angle);
  }

  /**
   * Immutable method that returns a new Vector2 rotated about the given point.
   */
  rotatedAboutPoint(point, angle) {
    return this.rotatedAboutXY(point.x, point.y, angle);
  }

  /**
   * A linear interpolation between this vector (ratio=0) and another vector (ratio=1).
   *
   * @param vector
   * @param ratio - Not necessarily constrained in [0, 1]
   */
  blend(vector, ratio) {
    return v2(this.x + (vector.x - this.x) * ratio, this.y + (vector.y - this.y) * ratio);
  }

  /**
   * The average (midpoint) between this vector and another vector.
   */
  average(vector) {
    return this.blend(vector, 0.5);
  }

  /**
   * Take a component-based mean of all vectors provided.
   */
  static average(vectors) {
    const added = _.reduce(vectors, Vector2_ADDING_ACCUMULATOR, new Vector2(0, 0));
    return added.divideScalar(vectors.length);
  }

  /**
   * Debugging string for the vector.
   */
  toString() {
    return `Vector2(${this.x}, ${this.y})`;
  }

  /**
   * Converts this to a 3-dimensional vector, with the z-component equal to 0.
   */
  toVector3() {
    return new Vector3(this.x, this.y, 0);
  }

  /*---------------------------------------------------------------------------*
   * Mutables
   * - all mutation should go through setXY / setX / setY
   *---------------------------------------------------------------------------*/

  /**
   * Sets all of the components of this vector, returning this.
   */
  setXY(x, y) {
    this.x = x;
    this.y = y;
    return this;
  }

  /**
   * Sets the x-component of this vector, returning this.
   */
  setX(x) {
    this.x = x;
    return this;
  }

  /**
   * Sets the y-component of this vector, returning this.
   */
  setY(y) {
    this.y = y;
    return this;
  }

  /**
   * Sets this vector to be a copy of another vector.
   *
   * This is the mutable form of the function copy(). This will mutate (change) this vector, in addition to returning
   * this vector itself.
   */
  set(v) {
    return this.setXY(v.x, v.y);
  }

  /**
   * Sets the magnitude of this vector. If the passed-in magnitude is negative, this flips the vector and sets its
   * magnitude to abs( magnitude ).
   *
   * This is the mutable form of the function withMagnitude(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  setMagnitude(magnitude) {
    const scale = magnitude / this.magnitude;
    return this.multiplyScalar(scale);
  }

  /**
   * Adds another vector to this vector, changing this vector.
   *
   * This is the mutable form of the function plus(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  add(v) {
    return this.setXY(this.x + v.x, this.y + v.y);
  }

  /**
   * Adds another vector (x,y) to this vector, changing this vector.
   *
   * This is the mutable form of the function plusXY(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  addXY(x, y) {
    return this.setXY(this.x + x, this.y + y);
  }

  /**
   * Adds a scalar to this vector (added to every component), changing this vector.
   *
   * This is the mutable form of the function plusScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  addScalar(scalar) {
    return this.setXY(this.x + scalar, this.y + scalar);
  }

  /**
   * Subtracts this vector by another vector, changing this vector.
   *
   * This is the mutable form of the function minus(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtract(v) {
    return this.setXY(this.x - v.x, this.y - v.y);
  }

  /**
   * Subtracts this vector by another vector (x,y), changing this vector.
   *
   * This is the mutable form of the function minusXY(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtractXY(x, y) {
    return this.setXY(this.x - x, this.y - y);
  }

  /**
   * Subtracts this vector by a scalar (subtracts each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function minusScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  subtractScalar(scalar) {
    return this.setXY(this.x - scalar, this.y - scalar);
  }

  /**
   * Multiplies this vector by a scalar (multiplies each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function timesScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  multiplyScalar(scalar) {
    return this.setXY(this.x * scalar, this.y * scalar);
  }

  /**
   * Multiplies this vector by a scalar (multiplies each component by the scalar), changing this vector.
   * Same as multiplyScalar.
   *
   * This is the mutable form of the function times(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  multiply(scalar) {
    return this.multiplyScalar(scalar);
  }

  /**
   * Multiplies this vector by another vector component-wise, changing this vector.
   *
   * This is the mutable form of the function componentTimes(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  componentMultiply(v) {
    return this.setXY(this.x * v.x, this.y * v.y);
  }

  /**
   * Divides this vector by a scalar (divides each component by the scalar), changing this vector.
   *
   * This is the mutable form of the function dividedScalar(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  divideScalar(scalar) {
    return this.setXY(this.x / scalar, this.y / scalar);
  }

  /**
   * Negates this vector (multiplies each component by -1), changing this vector.
   *
   * This is the mutable form of the function negated(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  negate() {
    return this.setXY(-this.x, -this.y);
  }

  /**
   * Normalizes this vector (rescales to where the magnitude is 1), changing this vector.
   *
   * This is the mutable form of the function normalized(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   */
  normalize() {
    const mag = this.magnitude;
    if (mag === 0) {
      throw new Error('Cannot normalize a zero-magnitude vector');
    } else {
      return this.divideScalar(mag);
    }
  }

  /**
   * Rounds each component of this vector with Utils.roundSymmetric.
   *
   * This is the mutable form of the function roundedSymmetric(). This will mutate (change) this vector, in addition
   * to returning the vector itself.
   */
  roundSymmetric() {
    return this.setXY(js_Utils.roundSymmetric(this.x), js_Utils.roundSymmetric(this.y));
  }

  /**
   * Rotates this vector by the angle (in radians), changing this vector.
   *
   * This is the mutable form of the function rotated(). This will mutate (change) this vector, in addition to
   * returning this vector itself.
   *
   * @param angle - In radians
   */
  rotate(angle) {
    const newAngle = this.angle + angle;
    const mag = this.magnitude;
    return this.setXY(mag * Math.cos(newAngle), mag * Math.sin(newAngle));
  }

  /**
   * Sets this vector's value to be the x,y values matching the given magnitude and angle (in radians), changing
   * this vector, and returning itself.
   *
   * @param magnitude
   * @param angle - In radians
   */
  setPolar(magnitude, angle) {
    return this.setXY(magnitude * Math.cos(angle), magnitude * Math.sin(angle));
  }

  /**
   * Returns a duck-typed object meant for use with tandem/phet-io serialization. Although this is redundant with
   * stateSchema, it is a nice feature of such a heavily-used type to be able to call toStateObject directly on the type.
   *
   * @returns - see stateSchema for schema
   */
  toStateObject() {
    return {
      x: this.x,
      y: this.y
    };
  }
  freeToPool() {
    Vector2.pool.freeToPool(this);
  }
  static pool = new Pool(Vector2, {
    maxSize: 1000,
    initialize: Vector2.prototype.setXY,
    defaultArguments: [0, 0]
  });

  // static methods

  /**
   * Returns a Vector2 with the specified magnitude $r$ and angle $\theta$ (in radians), with the formula:
   * $$ f( r, \theta ) = \begin{bmatrix} r\cos\theta \\ r\sin\theta \end{bmatrix} $$
   */
  static createPolar(magnitude, angle) {
    return new Vector2(0, 0).setPolar(magnitude, angle);
  }

  /**
   * Constructs a Vector2 from a duck-typed object, for use with tandem/phet-io deserialization.
   *
   * @param stateObject - see stateSchema for schema
   */
  static fromStateObject(stateObject) {
    return v2(stateObject.x, stateObject.y);
  }

  /**
   * Allocation-free implementation that gets the angle between two vectors
   *
   * @returns the angle between the vectors
   */
  static getAngleBetweenVectors(startVector, endVector) {
    const dx = endVector.x - startVector.x;
    const dy = endVector.y - startVector.y;
    return Math.atan2(dy, dx);
  }

  /**
   * Allocation-free way to get the distance between vectors.
   *
   * @returns the angle between the vectors
   */
  static getDistanceBetweenVectors(startVector, endVector) {
    const dx = endVector.x - startVector.x;
    const dy = endVector.y - startVector.y;
    return Math.sqrt(dx * dx + dy * dy);
  }
}

// (read-only) - Helps to identify the dimension of the vector
Vector2.prototype.isVector2 = true;
Vector2.prototype.dimension = 2;
js_dot.register('Vector2', Vector2);
const v2 = Vector2.pool.create.bind(Vector2.pool);
js_dot.register('v2', v2);
class ImmutableVector2 extends Vector2 {
  /**
   * Throw errors whenever a mutable method is called on our immutable vector
   */
  static mutableOverrideHelper(mutableFunctionName) {
    ImmutableVector2.prototype[mutableFunctionName] = () => {
      throw new Error(`Cannot call mutable method '${mutableFunctionName}' on immutable Vector2`);
    };
  }
}
ImmutableVector2.mutableOverrideHelper('setXY');
ImmutableVector2.mutableOverrideHelper('setX');
ImmutableVector2.mutableOverrideHelper('setY');
Vector2.ZERO = assert ? new ImmutableVector2(0, 0) : new Vector2(0, 0);
Vector2.X_UNIT = assert ? new ImmutableVector2(1, 0) : new Vector2(1, 0);
Vector2.Y_UNIT = assert ? new ImmutableVector2(0, 1) : new Vector2(0, 1);
Vector2.Vector2IO = new IOType('Vector2IO', {
  valueType: Vector2,
  stateSchema: {
    x: types_NumberIO,
    y: types_NumberIO
  },
  toStateObject: vector2 => vector2.toStateObject(),
  fromStateObject: stateObject => Vector2.fromStateObject(stateObject),
  documentation: 'A numerical object with x and y properties, like {x:3,y:4}'
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sIiwiSU9UeXBlIiwiTnVtYmVySU8iLCJkb3QiLCJVdGlscyIsIlZlY3RvcjMiLCJBRERJTkdfQUNDVU1VTEFUT1IiLCJ2ZWN0b3IiLCJuZXh0VmVjdG9yIiwiYWRkIiwiVmVjdG9yMiIsImNvbnN0cnVjdG9yIiwieCIsInkiLCJnZXRNYWduaXR1ZGUiLCJNYXRoIiwic3FydCIsIm1hZ25pdHVkZVNxdWFyZWQiLCJtYWduaXR1ZGUiLCJnZXRNYWduaXR1ZGVTcXVhcmVkIiwiZGlzdGFuY2UiLCJwb2ludCIsImRpc3RhbmNlU3F1YXJlZCIsImRpc3RhbmNlWFkiLCJkeCIsImR5IiwiZGlzdGFuY2VTcXVhcmVkWFkiLCJ2IiwiZG90WFkiLCJnZXRBbmdsZSIsImF0YW4yIiwiYW5nbGUiLCJhbmdsZUJldHdlZW4iLCJ0aGlzTWFnbml0dWRlIiwidk1hZ25pdHVkZSIsImFjb3MiLCJjbGFtcCIsImVxdWFscyIsIm90aGVyIiwiZXF1YWxzRXBzaWxvbiIsImVwc2lsb24iLCJtYXgiLCJhYnMiLCJpc0Zpbml0ZSIsImNvcHkiLCJzZXQiLCJ2MiIsImNyb3NzU2NhbGFyIiwibm9ybWFsaXplZCIsIm1hZyIsIkVycm9yIiwicm91bmRlZFN5bW1ldHJpYyIsInJvdW5kU3ltbWV0cmljIiwid2l0aE1hZ25pdHVkZSIsInNldE1hZ25pdHVkZSIsInRpbWVzU2NhbGFyIiwic2NhbGFyIiwidGltZXMiLCJjb21wb25lbnRUaW1lcyIsInBsdXMiLCJwbHVzWFkiLCJwbHVzU2NhbGFyIiwibWludXMiLCJtaW51c1hZIiwibWludXNTY2FsYXIiLCJkaXZpZGVkU2NhbGFyIiwibmVnYXRlZCIsImdldFBlcnBlbmRpY3VsYXIiLCJwZXJwZW5kaWN1bGFyIiwicm90YXRlZCIsIm5ld0FuZ2xlIiwiY29zIiwic2luIiwicm90YXRlQWJvdXRYWSIsInJvdGF0ZUFib3V0UG9pbnQiLCJyb3RhdGVkQWJvdXRYWSIsInJvdGF0ZWRBYm91dFBvaW50IiwiYmxlbmQiLCJyYXRpbyIsImF2ZXJhZ2UiLCJ2ZWN0b3JzIiwiYWRkZWQiLCJfIiwicmVkdWNlIiwiZGl2aWRlU2NhbGFyIiwibGVuZ3RoIiwidG9TdHJpbmciLCJ0b1ZlY3RvcjMiLCJzZXRYWSIsInNldFgiLCJzZXRZIiwic2NhbGUiLCJtdWx0aXBseVNjYWxhciIsImFkZFhZIiwiYWRkU2NhbGFyIiwic3VidHJhY3QiLCJzdWJ0cmFjdFhZIiwic3VidHJhY3RTY2FsYXIiLCJtdWx0aXBseSIsImNvbXBvbmVudE11bHRpcGx5IiwibmVnYXRlIiwibm9ybWFsaXplIiwicm90YXRlIiwic2V0UG9sYXIiLCJ0b1N0YXRlT2JqZWN0IiwiZnJlZVRvUG9vbCIsInBvb2wiLCJtYXhTaXplIiwiaW5pdGlhbGl6ZSIsInByb3RvdHlwZSIsImRlZmF1bHRBcmd1bWVudHMiLCJjcmVhdGVQb2xhciIsImZyb21TdGF0ZU9iamVjdCIsInN0YXRlT2JqZWN0IiwiZ2V0QW5nbGVCZXR3ZWVuVmVjdG9ycyIsInN0YXJ0VmVjdG9yIiwiZW5kVmVjdG9yIiwiZ2V0RGlzdGFuY2VCZXR3ZWVuVmVjdG9ycyIsImlzVmVjdG9yMiIsImRpbWVuc2lvbiIsInJlZ2lzdGVyIiwiY3JlYXRlIiwiYmluZCIsIkltbXV0YWJsZVZlY3RvcjIiLCJtdXRhYmxlT3ZlcnJpZGVIZWxwZXIiLCJtdXRhYmxlRnVuY3Rpb25OYW1lIiwiWkVSTyIsImFzc2VydCIsIlhfVU5JVCIsIllfVU5JVCIsIlZlY3RvcjJJTyIsInZhbHVlVHlwZSIsInN0YXRlU2NoZW1hIiwidmVjdG9yMiIsImRvY3VtZW50YXRpb24iXSwic291cmNlcyI6WyJWZWN0b3IyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEJhc2ljIDItZGltZW5zaW9uYWwgdmVjdG9yLCByZXByZXNlbnRlZCBhcyAoeCx5KS4gIFZhbHVlcyBjYW4gYmUgbnVtZXJpYywgb3IgTmFOIG9yIGluZmluaXRlLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgUG9vbCwgeyBUUG9vbGFibGUgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvUG9vbC5qcyc7XG5pbXBvcnQgSU9UeXBlIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9JT1R5cGUuanMnO1xuaW1wb3J0IE51bWJlcklPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9OdW1iZXJJTy5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcbmltcG9ydCBVdGlscyBmcm9tICcuL1V0aWxzLmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5cbmNvbnN0IEFERElOR19BQ0NVTVVMQVRPUiA9ICggdmVjdG9yOiBWZWN0b3IyLCBuZXh0VmVjdG9yOiBWZWN0b3IyICkgPT4ge1xuICByZXR1cm4gdmVjdG9yLmFkZCggbmV4dFZlY3RvciApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVmVjdG9yMiBpbXBsZW1lbnRzIFRQb29sYWJsZSB7XG5cbiAgLy8gVGhlIFggY29vcmRpbmF0ZSBvZiB0aGUgdmVjdG9yLlxuICBwdWJsaWMgeDogbnVtYmVyO1xuXG4gIC8vIFRoZSBZIGNvb3JkaW5hdGUgb2YgdGhlIHZlY3Rvci5cbiAgcHVibGljIHk6IG51bWJlcjtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIDItZGltZW5zaW9uYWwgdmVjdG9yIHdpdGggdGhlIHNwZWNpZmllZCBYIGFuZCBZIHZhbHVlcy5cbiAgICpcbiAgICogQHBhcmFtIHggLSBYIGNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHkgLSBZIGNvb3JkaW5hdGVcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggeDogbnVtYmVyLCB5OiBudW1iZXIgKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBtYWduaXR1ZGUgKEV1Y2xpZGVhbi9MMiBOb3JtKSBvZiB0aGlzIHZlY3RvciwgaS5lLiAkXFxzcXJ0e3heMit5XjJ9JC5cbiAgICovXG4gIHB1YmxpYyBnZXRNYWduaXR1ZGUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KCB0aGlzLm1hZ25pdHVkZVNxdWFyZWQgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgbWFnbml0dWRlKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmdldE1hZ25pdHVkZSgpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBzcXVhcmVkIG1hZ25pdHVkZSAoc3F1YXJlIG9mIHRoZSBFdWNsaWRlYW4vTDIgTm9ybSkgb2YgdGhpcyB2ZWN0b3IsIGkuZS4gJHheMit5XjIkLlxuICAgKi9cbiAgcHVibGljIGdldE1hZ25pdHVkZVNxdWFyZWQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55O1xuICB9XG5cbiAgcHVibGljIGdldCBtYWduaXR1ZGVTcXVhcmVkKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmdldE1hZ25pdHVkZVNxdWFyZWQoKTsgfVxuXG4gIC8qKlxuICAgKiBUaGUgRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgKHRyZWF0ZWQgYXMgYSBwb2ludCkgYW5kIGFub3RoZXIgcG9pbnQuXG4gICAqL1xuICBwdWJsaWMgZGlzdGFuY2UoIHBvaW50OiBWZWN0b3IyICk6IG51bWJlciB7XG4gICAgcmV0dXJuIE1hdGguc3FydCggdGhpcy5kaXN0YW5jZVNxdWFyZWQoIHBvaW50ICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgKHRyZWF0ZWQgYXMgYSBwb2ludCkgYW5kIGFub3RoZXIgcG9pbnQgKHgseSkuXG4gICAqL1xuICBwdWJsaWMgZGlzdGFuY2VYWSggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogbnVtYmVyIHtcbiAgICBjb25zdCBkeCA9IHRoaXMueCAtIHg7XG4gICAgY29uc3QgZHkgPSB0aGlzLnkgLSB5O1xuICAgIHJldHVybiBNYXRoLnNxcnQoIGR4ICogZHggKyBkeSAqIGR5ICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNxdWFyZWQgRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gdGhpcyB2ZWN0b3IgKHRyZWF0ZWQgYXMgYSBwb2ludCkgYW5kIGFub3RoZXIgcG9pbnQuXG4gICAqL1xuICBwdWJsaWMgZGlzdGFuY2VTcXVhcmVkKCBwb2ludDogVmVjdG9yMiApOiBudW1iZXIge1xuICAgIGNvbnN0IGR4ID0gdGhpcy54IC0gcG9pbnQueDtcbiAgICBjb25zdCBkeSA9IHRoaXMueSAtIHBvaW50Lnk7XG4gICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzcXVhcmVkIEV1Y2xpZGVhbiBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgdmVjdG9yICh0cmVhdGVkIGFzIGEgcG9pbnQpIGFuZCBhbm90aGVyIHBvaW50IHdpdGggY29vcmRpbmF0ZXMgKHgseSkuXG4gICAqL1xuICBwdWJsaWMgZGlzdGFuY2VTcXVhcmVkWFkoIHg6IG51bWJlciwgeTogbnVtYmVyICk6IG51bWJlciB7XG4gICAgY29uc3QgZHggPSB0aGlzLnggLSB4O1xuICAgIGNvbnN0IGR5ID0gdGhpcy55IC0geTtcbiAgICByZXR1cm4gZHggKiBkeCArIGR5ICogZHk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGRvdC1wcm9kdWN0IChFdWNsaWRlYW4gaW5uZXIgcHJvZHVjdCkgYmV0d2VlbiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3Igdi5cbiAgICovXG4gIHB1YmxpYyBkb3QoIHY6IFZlY3RvcjIgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55O1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBkb3QtcHJvZHVjdCAoRXVjbGlkZWFuIGlubmVyIHByb2R1Y3QpIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yICh4LHkpLlxuICAgKi9cbiAgcHVibGljIGRvdFhZKCB4OiBudW1iZXIsIHk6IG51bWJlciApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnggKiB4ICsgdGhpcy55ICogeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgYW5nbGUgJFxcdGhldGEkIG9mIHRoaXMgdmVjdG9yLCBzdWNoIHRoYXQgdGhpcyB2ZWN0b3IgaXMgZXF1YWwgdG9cbiAgICogJCQgdSA9IFxcYmVnaW57Ym1hdHJpeH0gclxcY29zXFx0aGV0YSBcXFxcIHJcXHNpblxcdGhldGEgXFxlbmR7Ym1hdHJpeH0gJCRcbiAgICogZm9yIHRoZSBtYWduaXR1ZGUgJHIgXFxnZSAwJCBvZiB0aGUgdmVjdG9yLCB3aXRoICRcXHRoZXRhXFxpbigtXFxwaSxcXHBpXSRcbiAgICovXG4gIHB1YmxpYyBnZXRBbmdsZSgpOiBudW1iZXIge1xuICAgIHJldHVybiBNYXRoLmF0YW4yKCB0aGlzLnksIHRoaXMueCApO1xuICB9XG5cbiAgcHVibGljIGdldCBhbmdsZSgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmdldEFuZ2xlKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGFuZ2xlIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yLCBpbiB0aGUgcmFuZ2UgJFxcdGhldGFcXGluWzAsIFxccGldJC5cbiAgICpcbiAgICogRXF1YWwgdG8gJFxcdGhldGEgPSBcXGNvc157LTF9KCBcXGhhdHt1fSBcXGNkb3QgXFxoYXR7dn0gKSQgd2hlcmUgJFxcaGF0e3V9JCBpcyB0aGlzIHZlY3RvciAobm9ybWFsaXplZCkgYW5kICRcXGhhdHt2fSRcbiAgICogaXMgdGhlIGlucHV0IHZlY3RvciAobm9ybWFsaXplZCkuXG4gICAqL1xuICBwdWJsaWMgYW5nbGVCZXR3ZWVuKCB2OiBWZWN0b3IyICk6IG51bWJlciB7XG4gICAgY29uc3QgdGhpc01hZ25pdHVkZSA9IHRoaXMubWFnbml0dWRlO1xuICAgIGNvbnN0IHZNYWduaXR1ZGUgPSB2Lm1hZ25pdHVkZTtcbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFRPRE86IGltcG9ydCB3aXRoIGNpcmN1bGFyIHByb3RlY3Rpb25cbiAgICByZXR1cm4gTWF0aC5hY29zKCBkb3QuY2xhbXAoICggdGhpcy54ICogdi54ICsgdGhpcy55ICogdi55ICkgLyAoIHRoaXNNYWduaXR1ZGUgKiB2TWFnbml0dWRlICksIC0xLCAxICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGFjdCBlcXVhbGl0eSBjb21wYXJpc29uIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yLlxuXG4gICAqIEByZXR1cm5zIC0gV2hldGhlciB0aGUgdHdvIHZlY3RvcnMgaGF2ZSBlcXVhbCBjb21wb25lbnRzXG4gICAqL1xuICBwdWJsaWMgZXF1YWxzKCBvdGhlcjogVmVjdG9yMiApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlci54ICYmIHRoaXMueSA9PT0gb3RoZXIueTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHByb3hpbWF0ZSBlcXVhbGl0eSBjb21wYXJpc29uIGJldHdlZW4gdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yLlxuICAgKlxuICAgKiBAcmV0dXJucyAtIFdoZXRoZXIgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB0d28gdmVjdG9ycyBoYXMgbm8gY29tcG9uZW50IHdpdGggYW4gYWJzb2x1dGUgdmFsdWUgZ3JlYXRlciB0aGFuIGVwc2lsb24uXG4gICAqL1xuICBwdWJsaWMgZXF1YWxzRXBzaWxvbiggb3RoZXI6IFZlY3RvcjIsIGVwc2lsb246IG51bWJlciApOiBib29sZWFuIHtcbiAgICBpZiAoICFlcHNpbG9uICkge1xuICAgICAgZXBzaWxvbiA9IDA7XG4gICAgfVxuICAgIHJldHVybiBNYXRoLm1heCggTWF0aC5hYnMoIHRoaXMueCAtIG90aGVyLnggKSwgTWF0aC5hYnMoIHRoaXMueSAtIG90aGVyLnkgKSApIDw9IGVwc2lsb247XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBmYWxzZSBpZiBlaXRoZXIgY29tcG9uZW50IGlzIE5hTiwgaW5maW5pdHksIG9yIC1pbmZpbml0eS4gT3RoZXJ3aXNlIHJldHVybnMgdHJ1ZS5cbiAgICovXG4gIHB1YmxpYyBpc0Zpbml0ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNGaW5pdGUoIHRoaXMueCApICYmIGlzRmluaXRlKCB0aGlzLnkgKTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxuICAgKiBJbW11dGFibGVzXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhpcyB2ZWN0b3IsIG9yIGlmIGEgdmVjdG9yIGlzIHBhc3NlZCBpbiwgc2V0IHRoYXQgdmVjdG9yJ3MgdmFsdWVzIHRvIG91cnMuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXQoKSwgaWYgYSB2ZWN0b3IgaXMgcHJvdmlkZWQuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmRcbiAgICogd2lsbCBub3QgbW9kaWZ5IHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0gW3ZlY3Rvcl0gLSBJZiBub3QgcHJvdmlkZWQsIGNyZWF0ZXMgYSBuZXcgVmVjdG9yMiB3aXRoIGZpbGxlZCBpbiB2YWx1ZXMuIE90aGVyd2lzZSwgZmlsbHMgaW4gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgIHZhbHVlcyBvZiB0aGUgcHJvdmlkZWQgdmVjdG9yIHNvIHRoYXQgaXQgZXF1YWxzIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIGNvcHkoIHZlY3Rvcj86IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgaWYgKCB2ZWN0b3IgKSB7XG4gICAgICByZXR1cm4gdmVjdG9yLnNldCggdGhpcyApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB2MiggdGhpcy54LCB0aGlzLnkgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNjYWxhciB2YWx1ZSBvZiB0aGUgei1jb21wb25lbnQgb2YgdGhlIGVxdWl2YWxlbnQgMy1kaW1lbnNpb25hbCBjcm9zcyBwcm9kdWN0OlxuICAgKiAkJCBmKCB1LCB2ICkgPSBcXGxlZnQoIFxcYmVnaW57Ym1hdHJpeH0gdV94IFxcXFwgdV95IFxcXFwgMCBcXGVuZHtibWF0cml4fSBcXHRpbWVzIFxcYmVnaW57Ym1hdHJpeH0gdl94IFxcXFwgdl95IFxcXFwgMCBcXGVuZHtibWF0cml4fSBcXHJpZ2h0KV96ID0gdV94IHZfeSAtIHVfeSB2X3ggJCRcbiAgICovXG4gIHB1YmxpYyBjcm9zc1NjYWxhciggdjogVmVjdG9yMiApOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLnggKiB2LnkgLSB0aGlzLnkgKiB2Lng7XG4gIH1cblxuICAvKipcbiAgICogTm9ybWFsaXplZCAocmUtc2NhbGVkKSBjb3B5IG9mIHRoaXMgdmVjdG9yIHN1Y2ggdGhhdCBpdHMgbWFnbml0dWRlIGlzIDEuIElmIGl0cyBpbml0aWFsIG1hZ25pdHVkZSBpcyB6ZXJvLCBhblxuICAgKiBlcnJvciBpcyB0aHJvd24uXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBub3JtYWxpemUoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnkgdGhpc1xuICAgKiB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgbm9ybWFsaXplZCgpOiBWZWN0b3IyIHtcbiAgICBjb25zdCBtYWcgPSB0aGlzLm1hZ25pdHVkZTtcbiAgICBpZiAoIG1hZyA9PT0gMCApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciggJ0Nhbm5vdCBub3JtYWxpemUgYSB6ZXJvLW1hZ25pdHVkZSB2ZWN0b3InICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHYyKCB0aGlzLnggLyBtYWcsIHRoaXMueSAvIG1hZyApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIHZlY3RvciB3aXRoIGVhY2ggY29tcG9uZW50IHJvdW5kZWQgYnkgVXRpbHMucm91bmRTeW1tZXRyaWMuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiByb3VuZFN5bW1ldHJpYygpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyByb3VuZGVkU3ltbWV0cmljKCk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLmNvcHkoKS5yb3VuZFN5bW1ldHJpYygpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlLXNjYWxlZCBjb3B5IG9mIHRoaXMgdmVjdG9yIHN1Y2ggdGhhdCBpdCBoYXMgdGhlIGRlc2lyZWQgbWFnbml0dWRlLiBJZiBpdHMgaW5pdGlhbCBtYWduaXR1ZGUgaXMgemVybywgYW4gZXJyb3JcbiAgICogaXMgdGhyb3duLiBJZiB0aGUgcGFzc2VkLWluIG1hZ25pdHVkZSBpcyBuZWdhdGl2ZSwgdGhlIGRpcmVjdGlvbiBvZiB0aGUgcmVzdWx0aW5nIHZlY3RvciB3aWxsIGJlIHJldmVyc2VkLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2V0TWFnbml0dWRlKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHdpdGhNYWduaXR1ZGUoIG1hZ25pdHVkZTogbnVtYmVyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLmNvcHkoKS5zZXRNYWduaXR1ZGUoIG1hZ25pdHVkZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvcHkgb2YgdGhpcyB2ZWN0b3IsIHNjYWxlZCBieSB0aGUgZGVzaXJlZCBzY2FsYXIgdmFsdWUuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBtdWx0aXBseVNjYWxhcigpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyB0aW1lc1NjYWxhciggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHYyKCB0aGlzLnggKiBzY2FsYXIsIHRoaXMueSAqIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhbWUgYXMgdGltZXNTY2FsYXIuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBtdWx0aXBseSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyB0aW1lcyggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMudGltZXNTY2FsYXIoIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvcHkgb2YgdGhpcyB2ZWN0b3IsIG11bHRpcGxpZWQgY29tcG9uZW50LXdpc2UgYnkgdGhlIHBhc3NlZC1pbiB2ZWN0b3Igdi5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGNvbXBvbmVudE11bHRpcGx5KCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIGNvbXBvbmVudFRpbWVzKCB2OiBWZWN0b3IyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiB2MiggdGhpcy54ICogdi54LCB0aGlzLnkgKiB2LnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRpdGlvbiBvZiB0aGlzIHZlY3RvciBhbmQgYW5vdGhlciB2ZWN0b3IsIHJldHVybmluZyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBhZGQoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgcGx1cyggdjogVmVjdG9yMiApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdjIoIHRoaXMueCArIHYueCwgdGhpcy55ICsgdi55ICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkaXRpb24gb2YgdGhpcyB2ZWN0b3IgYW5kIGFub3RoZXIgdmVjdG9yICh4LHkpLCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gYWRkWFkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgcGx1c1hZKCB4OiBudW1iZXIsIHk6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdjIoIHRoaXMueCArIHgsIHRoaXMueSArIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRpdGlvbiBvZiB0aGlzIHZlY3RvciB3aXRoIGEgc2NhbGFyIChhZGRzIHRoZSBzY2FsYXIgdG8gZXZlcnkgY29tcG9uZW50KSwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGFkZFNjYWxhcigpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBwbHVzU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdjIoIHRoaXMueCArIHNjYWxhciwgdGhpcy55ICsgc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3Rpb24gb2YgdGhpcyB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgdiwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHN1YnRyYWN0KCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIG1pbnVzKCB2OiBWZWN0b3IyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiB2MiggdGhpcy54IC0gdi54LCB0aGlzLnkgLSB2LnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdGlvbiBvZiB0aGlzIHZlY3RvciBieSBhbm90aGVyIHZlY3RvciAoeCx5KSwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHN1YnRyYWN0WFkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyB2ZWN0b3IsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgbWludXNYWSggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHYyKCB0aGlzLnggLSB4LCB0aGlzLnkgLSB5ICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3Rpb24gb2YgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKHN1YnRyYWN0cyB0aGUgc2NhbGFyIGZyb20gZXZlcnkgY29tcG9uZW50KSwgcmV0dXJuaW5nIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHN1YnRyYWN0U2NhbGFyKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIG1pbnVzU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdjIoIHRoaXMueCAtIHNjYWxhciwgdGhpcy55IC0gc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogRGl2aXNpb24gb2YgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKGRpdmlkZXMgZXZlcnkgY29tcG9uZW50IGJ5IHRoZSBzY2FsYXIpLCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZGl2aWRlU2NhbGFyKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIGRpdmlkZWRTY2FsYXIoIHNjYWxhcjogbnVtYmVyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiB2MiggdGhpcy54IC8gc2NhbGFyLCB0aGlzLnkgLyBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOZWdhdGVkIGNvcHkgb2YgdGhpcyB2ZWN0b3IgKG11bHRpcGxpZXMgZXZlcnkgY29tcG9uZW50IGJ5IC0xKS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG5lZ2F0ZSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IHZlY3RvciwgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBuZWdhdGVkKCk6IFZlY3RvcjIge1xuICAgIHJldHVybiB2MiggLXRoaXMueCwgLXRoaXMueSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJvdGF0ZWQgYnkgLXBpLzIgKHBlcnBlbmRpY3VsYXIgdG8gdGhpcyB2ZWN0b3IpLCByZXR1cm5lZCBhcyBhIGNvcHkuXG4gICAqL1xuICBwdWJsaWMgZ2V0UGVycGVuZGljdWxhcigpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdjIoIHRoaXMueSwgLXRoaXMueCApO1xuICB9XG5cbiAgcHVibGljIGdldCBwZXJwZW5kaWN1bGFyKCk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLmdldFBlcnBlbmRpY3VsYXIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSb3RhdGVkIGJ5IGFuIGFyYml0cmFyeSBhbmdsZSwgaW4gcmFkaWFucy4gUmV0dXJuZWQgYXMgYSBjb3B5LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcm90YXRlKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgdmVjdG9yLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0gYW5nbGUgLSBJbiByYWRpYW5zXG4gICAqL1xuICBwdWJsaWMgcm90YXRlZCggYW5nbGU6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICBjb25zdCBuZXdBbmdsZSA9IHRoaXMuYW5nbGUgKyBhbmdsZTtcbiAgICBjb25zdCBtYWcgPSB0aGlzLm1hZ25pdHVkZTtcbiAgICByZXR1cm4gdjIoIG1hZyAqIE1hdGguY29zKCBuZXdBbmdsZSApLCBtYWcgKiBNYXRoLnNpbiggbmV3QW5nbGUgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIE11dGFibGUgbWV0aG9kIHRoYXQgcm90YXRlcyB0aGlzIHZlY3RvciBhYm91dCBhbiB4LHkgcG9pbnQuXG4gICAqXG4gICAqIEBwYXJhbSB4IC0gb3JpZ2luIG9mIHJvdGF0aW9uIGluIHhcbiAgICogQHBhcmFtIHkgLSBvcmlnaW4gb2Ygcm90YXRpb24gaW4geVxuICAgKiBAcGFyYW0gYW5nbGUgLSByYWRpYW5zIHRvIHJvdGF0ZVxuICAgKiBAcmV0dXJucyB0aGlzIGZvciBjaGFpbmluZ1xuICAgKi9cbiAgcHVibGljIHJvdGF0ZUFib3V0WFkoIHg6IG51bWJlciwgeTogbnVtYmVyLCBhbmdsZTogbnVtYmVyICk6IFZlY3RvcjIge1xuICAgIGNvbnN0IGR4ID0gdGhpcy54IC0geDtcbiAgICBjb25zdCBkeSA9IHRoaXMueSAtIHk7XG4gICAgY29uc3QgY29zID0gTWF0aC5jb3MoIGFuZ2xlICk7XG4gICAgY29uc3Qgc2luID0gTWF0aC5zaW4oIGFuZ2xlICk7XG4gICAgdGhpcy54ID0geCArIGR4ICogY29zIC0gZHkgKiBzaW47XG4gICAgdGhpcy55ID0geSArIGR4ICogc2luICsgZHkgKiBjb3M7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW1lIGFzIHJvdGF0ZUFib3V0WFkgYnV0IHdpdGggYSBwb2ludCBhcmd1bWVudC5cbiAgICovXG4gIHB1YmxpYyByb3RhdGVBYm91dFBvaW50KCBwb2ludDogVmVjdG9yMiwgYW5nbGU6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5yb3RhdGVBYm91dFhZKCBwb2ludC54LCBwb2ludC55LCBhbmdsZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIEltbXV0YWJsZSBtZXRob2QgdGhhdCByZXR1cm5zIGEgbmV3IFZlY3RvcjIgdGhhdCBpcyByb3RhdGVkIGFib3V0IHRoZSBnaXZlbiBwb2ludC5cbiAgICpcbiAgICogQHBhcmFtIHggLSBvcmlnaW4gZm9yIHJvdGF0aW9uIGluIHhcbiAgICogQHBhcmFtIHkgLSBvcmlnaW4gZm9yIHJvdGF0aW9uIGluIHlcbiAgICogQHBhcmFtIGFuZ2xlIC0gcmFkaWFucyB0byByb3RhdGVcbiAgICovXG4gIHB1YmxpYyByb3RhdGVkQWJvdXRYWSggeDogbnVtYmVyLCB5OiBudW1iZXIsIGFuZ2xlOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHYyKCB0aGlzLngsIHRoaXMueSApLnJvdGF0ZUFib3V0WFkoIHgsIHksIGFuZ2xlICk7XG4gIH1cblxuICAvKipcbiAgICogSW1tdXRhYmxlIG1ldGhvZCB0aGF0IHJldHVybnMgYSBuZXcgVmVjdG9yMiByb3RhdGVkIGFib3V0IHRoZSBnaXZlbiBwb2ludC5cbiAgICovXG4gIHB1YmxpYyByb3RhdGVkQWJvdXRQb2ludCggcG9pbnQ6IFZlY3RvcjIsIGFuZ2xlOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMucm90YXRlZEFib3V0WFkoIHBvaW50LngsIHBvaW50LnksIGFuZ2xlICk7XG4gIH1cblxuICAvKipcbiAgICogQSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHRoaXMgdmVjdG9yIChyYXRpbz0wKSBhbmQgYW5vdGhlciB2ZWN0b3IgKHJhdGlvPTEpLlxuICAgKlxuICAgKiBAcGFyYW0gdmVjdG9yXG4gICAqIEBwYXJhbSByYXRpbyAtIE5vdCBuZWNlc3NhcmlseSBjb25zdHJhaW5lZCBpbiBbMCwgMV1cbiAgICovXG4gIHB1YmxpYyBibGVuZCggdmVjdG9yOiBWZWN0b3IyLCByYXRpbzogbnVtYmVyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiB2MiggdGhpcy54ICsgKCB2ZWN0b3IueCAtIHRoaXMueCApICogcmF0aW8sIHRoaXMueSArICggdmVjdG9yLnkgLSB0aGlzLnkgKSAqIHJhdGlvICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIGF2ZXJhZ2UgKG1pZHBvaW50KSBiZXR3ZWVuIHRoaXMgdmVjdG9yIGFuZCBhbm90aGVyIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBhdmVyYWdlKCB2ZWN0b3I6IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuYmxlbmQoIHZlY3RvciwgMC41ICk7XG4gIH1cblxuICAvKipcbiAgICogVGFrZSBhIGNvbXBvbmVudC1iYXNlZCBtZWFuIG9mIGFsbCB2ZWN0b3JzIHByb3ZpZGVkLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBhdmVyYWdlKCB2ZWN0b3JzOiBWZWN0b3IyW10gKTogVmVjdG9yMiB7XG4gICAgY29uc3QgYWRkZWQgPSBfLnJlZHVjZSggdmVjdG9ycywgQURESU5HX0FDQ1VNVUxBVE9SLCBuZXcgVmVjdG9yMiggMCwgMCApICk7XG4gICAgcmV0dXJuIGFkZGVkLmRpdmlkZVNjYWxhciggdmVjdG9ycy5sZW5ndGggKTtcbiAgfVxuXG5cbiAgLyoqXG4gICAqIERlYnVnZ2luZyBzdHJpbmcgZm9yIHRoZSB2ZWN0b3IuXG4gICAqL1xuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFZlY3RvcjIoJHt0aGlzLnh9LCAke3RoaXMueX0pYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGlzIHRvIGEgMy1kaW1lbnNpb25hbCB2ZWN0b3IsIHdpdGggdGhlIHotY29tcG9uZW50IGVxdWFsIHRvIDAuXG4gICAqL1xuICBwdWJsaWMgdG9WZWN0b3IzKCk6IFZlY3RvcjMge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMyggdGhpcy54LCB0aGlzLnksIDAgKTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxuICAgKiBNdXRhYmxlc1xuICAgKiAtIGFsbCBtdXRhdGlvbiBzaG91bGQgZ28gdGhyb3VnaCBzZXRYWSAvIHNldFggLyBzZXRZXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogU2V0cyBhbGwgb2YgdGhlIGNvbXBvbmVudHMgb2YgdGhpcyB2ZWN0b3IsIHJldHVybmluZyB0aGlzLlxuICAgKi9cbiAgcHVibGljIHNldFhZKCB4OiBudW1iZXIsIHk6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICB0aGlzLnggPSB4O1xuICAgIHRoaXMueSA9IHk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgeC1jb21wb25lbnQgb2YgdGhpcyB2ZWN0b3IsIHJldHVybmluZyB0aGlzLlxuICAgKi9cbiAgcHVibGljIHNldFgoIHg6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICB0aGlzLnggPSB4O1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgeS1jb21wb25lbnQgb2YgdGhpcyB2ZWN0b3IsIHJldHVybmluZyB0aGlzLlxuICAgKi9cbiAgcHVibGljIHNldFkoIHk6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyB2ZWN0b3IgdG8gYmUgYSBjb3B5IG9mIGFub3RoZXIgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGNvcHkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzZXQoIHY6IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHYueCwgdi55ICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgbWFnbml0dWRlIG9mIHRoaXMgdmVjdG9yLiBJZiB0aGUgcGFzc2VkLWluIG1hZ25pdHVkZSBpcyBuZWdhdGl2ZSwgdGhpcyBmbGlwcyB0aGUgdmVjdG9yIGFuZCBzZXRzIGl0c1xuICAgKiBtYWduaXR1ZGUgdG8gYWJzKCBtYWduaXR1ZGUgKS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB3aXRoTWFnbml0dWRlKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc2V0TWFnbml0dWRlKCBtYWduaXR1ZGU6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICBjb25zdCBzY2FsZSA9IG1hZ25pdHVkZSAvIHRoaXMubWFnbml0dWRlO1xuXG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoIHNjYWxlICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhbm90aGVyIHZlY3RvciB0byB0aGlzIHZlY3RvciwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcGx1cygpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGFkZCggdjogVmVjdG9yMiApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWSggdGhpcy54ICsgdi54LCB0aGlzLnkgKyB2LnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFub3RoZXIgdmVjdG9yICh4LHkpIHRvIHRoaXMgdmVjdG9yLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBwbHVzWFkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBhZGRYWSggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHRoaXMueCArIHgsIHRoaXMueSArIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgc2NhbGFyIHRvIHRoaXMgdmVjdG9yIChhZGRlZCB0byBldmVyeSBjb21wb25lbnQpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBwbHVzU2NhbGFyKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgYWRkU2NhbGFyKCBzY2FsYXI6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWSggdGhpcy54ICsgc2NhbGFyLCB0aGlzLnkgKyBzY2FsYXIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdHMgdGhpcyB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IsIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG1pbnVzKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc3VidHJhY3QoIHY6IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHRoaXMueCAtIHYueCwgdGhpcy55IC0gdi55ICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3RzIHRoaXMgdmVjdG9yIGJ5IGFub3RoZXIgdmVjdG9yICh4LHkpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBtaW51c1hZKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc3VidHJhY3RYWSggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHRoaXMueCAtIHgsIHRoaXMueSAtIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdWJ0cmFjdHMgdGhpcyB2ZWN0b3IgYnkgYSBzY2FsYXIgKHN1YnRyYWN0cyBlYWNoIGNvbXBvbmVudCBieSB0aGUgc2NhbGFyKSwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gbWludXNTY2FsYXIoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzdWJ0cmFjdFNjYWxhciggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHRoaXMueCAtIHNjYWxhciwgdGhpcy55IC0gc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbGllcyB0aGlzIHZlY3RvciBieSBhIHNjYWxhciAobXVsdGlwbGllcyBlYWNoIGNvbXBvbmVudCBieSB0aGUgc2NhbGFyKSwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gdGltZXNTY2FsYXIoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBtdWx0aXBseVNjYWxhciggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbGllcyB0aGlzIHZlY3RvciBieSBhIHNjYWxhciAobXVsdGlwbGllcyBlYWNoIGNvbXBvbmVudCBieSB0aGUgc2NhbGFyKSwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqIFNhbWUgYXMgbXVsdGlwbHlTY2FsYXIuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gdGltZXMoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBtdWx0aXBseSggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMubXVsdGlwbHlTY2FsYXIoIHNjYWxhciApO1xuICB9XG5cbiAgLyoqXG4gICAqIE11bHRpcGxpZXMgdGhpcyB2ZWN0b3IgYnkgYW5vdGhlciB2ZWN0b3IgY29tcG9uZW50LXdpc2UsIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGNvbXBvbmVudFRpbWVzKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgY29tcG9uZW50TXVsdGlwbHkoIHY6IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHRoaXMueCAqIHYueCwgdGhpcy55ICogdi55ICk7XG4gIH1cblxuICAvKipcbiAgICogRGl2aWRlcyB0aGlzIHZlY3RvciBieSBhIHNjYWxhciAoZGl2aWRlcyBlYWNoIGNvbXBvbmVudCBieSB0aGUgc2NhbGFyKSwgY2hhbmdpbmcgdGhpcyB2ZWN0b3IuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZGl2aWRlZFNjYWxhcigpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgdmVjdG9yLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyB2ZWN0b3IgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGRpdmlkZVNjYWxhciggc2NhbGFyOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIHRoaXMueCAvIHNjYWxhciwgdGhpcy55IC8gc2NhbGFyICk7XG4gIH1cblxuICAvKipcbiAgICogTmVnYXRlcyB0aGlzIHZlY3RvciAobXVsdGlwbGllcyBlYWNoIGNvbXBvbmVudCBieSAtMSksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIG5lZ2F0ZWQoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBuZWdhdGUoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIC10aGlzLngsIC10aGlzLnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3JtYWxpemVzIHRoaXMgdmVjdG9yIChyZXNjYWxlcyB0byB3aGVyZSB0aGUgbWFnbml0dWRlIGlzIDEpLCBjaGFuZ2luZyB0aGlzIHZlY3Rvci5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBub3JtYWxpemVkKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uIHRvXG4gICAqIHJldHVybmluZyB0aGlzIHZlY3RvciBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgbm9ybWFsaXplKCk6IFZlY3RvcjIge1xuICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlO1xuICAgIGlmICggbWFnID09PSAwICkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCAnQ2Fubm90IG5vcm1hbGl6ZSBhIHplcm8tbWFnbml0dWRlIHZlY3RvcicgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5kaXZpZGVTY2FsYXIoIG1hZyApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSb3VuZHMgZWFjaCBjb21wb25lbnQgb2YgdGhpcyB2ZWN0b3Igd2l0aCBVdGlscy5yb3VuZFN5bW1ldHJpYy5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiByb3VuZGVkU3ltbWV0cmljKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyB2ZWN0b3IsIGluIGFkZGl0aW9uXG4gICAqIHRvIHJldHVybmluZyB0aGUgdmVjdG9yIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyByb3VuZFN5bW1ldHJpYygpOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRYWSggVXRpbHMucm91bmRTeW1tZXRyaWMoIHRoaXMueCApLCBVdGlscy5yb3VuZFN5bW1ldHJpYyggdGhpcy55ICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSb3RhdGVzIHRoaXMgdmVjdG9yIGJ5IHRoZSBhbmdsZSAoaW4gcmFkaWFucyksIGNoYW5naW5nIHRoaXMgdmVjdG9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHJvdGF0ZWQoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIHZlY3RvciwgaW4gYWRkaXRpb24gdG9cbiAgICogcmV0dXJuaW5nIHRoaXMgdmVjdG9yIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIGFuZ2xlIC0gSW4gcmFkaWFuc1xuICAgKi9cbiAgcHVibGljIHJvdGF0ZSggYW5nbGU6IG51bWJlciApOiBWZWN0b3IyIHtcbiAgICBjb25zdCBuZXdBbmdsZSA9IHRoaXMuYW5nbGUgKyBhbmdsZTtcbiAgICBjb25zdCBtYWcgPSB0aGlzLm1hZ25pdHVkZTtcbiAgICByZXR1cm4gdGhpcy5zZXRYWSggbWFnICogTWF0aC5jb3MoIG5ld0FuZ2xlICksIG1hZyAqIE1hdGguc2luKCBuZXdBbmdsZSApICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIHZlY3RvcidzIHZhbHVlIHRvIGJlIHRoZSB4LHkgdmFsdWVzIG1hdGNoaW5nIHRoZSBnaXZlbiBtYWduaXR1ZGUgYW5kIGFuZ2xlIChpbiByYWRpYW5zKSwgY2hhbmdpbmdcbiAgICogdGhpcyB2ZWN0b3IsIGFuZCByZXR1cm5pbmcgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0gbWFnbml0dWRlXG4gICAqIEBwYXJhbSBhbmdsZSAtIEluIHJhZGlhbnNcbiAgICovXG4gIHB1YmxpYyBzZXRQb2xhciggbWFnbml0dWRlOiBudW1iZXIsIGFuZ2xlOiBudW1iZXIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0WFkoIG1hZ25pdHVkZSAqIE1hdGguY29zKCBhbmdsZSApLCBtYWduaXR1ZGUgKiBNYXRoLnNpbiggYW5nbGUgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBkdWNrLXR5cGVkIG9iamVjdCBtZWFudCBmb3IgdXNlIHdpdGggdGFuZGVtL3BoZXQtaW8gc2VyaWFsaXphdGlvbi4gQWx0aG91Z2ggdGhpcyBpcyByZWR1bmRhbnQgd2l0aFxuICAgKiBzdGF0ZVNjaGVtYSwgaXQgaXMgYSBuaWNlIGZlYXR1cmUgb2Ygc3VjaCBhIGhlYXZpbHktdXNlZCB0eXBlIHRvIGJlIGFibGUgdG8gY2FsbCB0b1N0YXRlT2JqZWN0IGRpcmVjdGx5IG9uIHRoZSB0eXBlLlxuICAgKlxuICAgKiBAcmV0dXJucyAtIHNlZSBzdGF0ZVNjaGVtYSBmb3Igc2NoZW1hXG4gICAqL1xuICBwdWJsaWMgdG9TdGF0ZU9iamVjdCgpOiBWZWN0b3IyU3RhdGVPYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICB4OiB0aGlzLngsXG4gICAgICB5OiB0aGlzLnlcbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGZyZWVUb1Bvb2woKTogdm9pZCB7XG4gICAgVmVjdG9yMi5wb29sLmZyZWVUb1Bvb2woIHRoaXMgKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgcG9vbCA9IG5ldyBQb29sKCBWZWN0b3IyLCB7XG4gICAgbWF4U2l6ZTogMTAwMCxcbiAgICBpbml0aWFsaXplOiBWZWN0b3IyLnByb3RvdHlwZS5zZXRYWSxcbiAgICBkZWZhdWx0QXJndW1lbnRzOiBbIDAsIDAgXVxuICB9ICk7XG5cbiAgLy8gc3RhdGljIG1ldGhvZHNcblxuICAvKipcbiAgICogUmV0dXJucyBhIFZlY3RvcjIgd2l0aCB0aGUgc3BlY2lmaWVkIG1hZ25pdHVkZSAkciQgYW5kIGFuZ2xlICRcXHRoZXRhJCAoaW4gcmFkaWFucyksIHdpdGggdGhlIGZvcm11bGE6XG4gICAqICQkIGYoIHIsIFxcdGhldGEgKSA9IFxcYmVnaW57Ym1hdHJpeH0gclxcY29zXFx0aGV0YSBcXFxcIHJcXHNpblxcdGhldGEgXFxlbmR7Ym1hdHJpeH0gJCRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY3JlYXRlUG9sYXIoIG1hZ25pdHVkZTogbnVtYmVyLCBhbmdsZTogbnVtYmVyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMiggMCwgMCApLnNldFBvbGFyKCBtYWduaXR1ZGUsIGFuZ2xlICk7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIFZlY3RvcjIgZnJvbSBhIGR1Y2stdHlwZWQgb2JqZWN0LCBmb3IgdXNlIHdpdGggdGFuZGVtL3BoZXQtaW8gZGVzZXJpYWxpemF0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0gc3RhdGVPYmplY3QgLSBzZWUgc3RhdGVTY2hlbWEgZm9yIHNjaGVtYVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tU3RhdGVPYmplY3QoIHN0YXRlT2JqZWN0OiBWZWN0b3IyU3RhdGVPYmplY3QgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHYyKFxuICAgICAgc3RhdGVPYmplY3QueCxcbiAgICAgIHN0YXRlT2JqZWN0LnlcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG9jYXRpb24tZnJlZSBpbXBsZW1lbnRhdGlvbiB0aGF0IGdldHMgdGhlIGFuZ2xlIGJldHdlZW4gdHdvIHZlY3RvcnNcbiAgICpcbiAgICogQHJldHVybnMgdGhlIGFuZ2xlIGJldHdlZW4gdGhlIHZlY3RvcnNcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgZ2V0QW5nbGVCZXR3ZWVuVmVjdG9ycyggc3RhcnRWZWN0b3I6IFZlY3RvcjIsIGVuZFZlY3RvcjogVmVjdG9yMiApOiBudW1iZXIge1xuICAgIGNvbnN0IGR4ID0gZW5kVmVjdG9yLnggLSBzdGFydFZlY3Rvci54O1xuICAgIGNvbnN0IGR5ID0gZW5kVmVjdG9yLnkgLSBzdGFydFZlY3Rvci55O1xuICAgIHJldHVybiBNYXRoLmF0YW4yKCBkeSwgZHggKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvY2F0aW9uLWZyZWUgd2F5IHRvIGdldCB0aGUgZGlzdGFuY2UgYmV0d2VlbiB2ZWN0b3JzLlxuICAgKlxuICAgKiBAcmV0dXJucyB0aGUgYW5nbGUgYmV0d2VlbiB0aGUgdmVjdG9yc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyBnZXREaXN0YW5jZUJldHdlZW5WZWN0b3JzKCBzdGFydFZlY3RvcjogVmVjdG9yMiwgZW5kVmVjdG9yOiBWZWN0b3IyICk6IG51bWJlciB7XG4gICAgY29uc3QgZHggPSBlbmRWZWN0b3IueCAtIHN0YXJ0VmVjdG9yLng7XG4gICAgY29uc3QgZHkgPSBlbmRWZWN0b3IueSAtIHN0YXJ0VmVjdG9yLnk7XG4gICAgcmV0dXJuIE1hdGguc3FydCggZHggKiBkeCArIGR5ICogZHkgKTtcbiAgfVxuXG4gIHB1YmxpYyBpc1ZlY3RvcjIhOiBib29sZWFuO1xuICBwdWJsaWMgZGltZW5zaW9uITogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBJbW11dGFibGVWZWN0b3IyIHplcm8gdmVjdG9yOiAkXFxiZWdpbntibWF0cml4fSAwXFxcXDAgXFxlbmR7Ym1hdHJpeH0kXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIFpFUk86IFZlY3RvcjI7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG5cbiAgLyoqXG4gICAqIEltbXV0YWJsZVZlY3RvcjIgdmVjdG9yOiAkXFxiZWdpbntibWF0cml4fSAxXFxcXDAgXFxlbmR7Ym1hdHJpeH0kXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIFhfVU5JVDogVmVjdG9yMjsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcblxuICAvKipcbiAgICogSW1tdXRhYmxlVmVjdG9yMiB2ZWN0b3I6ICRcXGJlZ2lue2JtYXRyaXh9IDBcXFxcMSBcXGVuZHtibWF0cml4fSRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgWV9VTklUOiBWZWN0b3IyOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuXG4gIHB1YmxpYyBzdGF0aWMgVmVjdG9yMklPOiBJT1R5cGU7XG59XG5cbi8vIChyZWFkLW9ubHkpIC0gSGVscHMgdG8gaWRlbnRpZnkgdGhlIGRpbWVuc2lvbiBvZiB0aGUgdmVjdG9yXG5WZWN0b3IyLnByb3RvdHlwZS5pc1ZlY3RvcjIgPSB0cnVlO1xuVmVjdG9yMi5wcm90b3R5cGUuZGltZW5zaW9uID0gMjtcblxuZG90LnJlZ2lzdGVyKCAnVmVjdG9yMicsIFZlY3RvcjIgKTtcblxuY29uc3QgdjIgPSBWZWN0b3IyLnBvb2wuY3JlYXRlLmJpbmQoIFZlY3RvcjIucG9vbCApO1xuZG90LnJlZ2lzdGVyKCAndjInLCB2MiApO1xuXG5jbGFzcyBJbW11dGFibGVWZWN0b3IyIGV4dGVuZHMgVmVjdG9yMiB7XG4gIC8qKlxuICAgKiBUaHJvdyBlcnJvcnMgd2hlbmV2ZXIgYSBtdXRhYmxlIG1ldGhvZCBpcyBjYWxsZWQgb24gb3VyIGltbXV0YWJsZSB2ZWN0b3JcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgbXV0YWJsZU92ZXJyaWRlSGVscGVyKCBtdXRhYmxlRnVuY3Rpb25OYW1lOiAnc2V0WCcgfCAnc2V0WScgfCAnc2V0WFknICk6IHZvaWQge1xuICAgIEltbXV0YWJsZVZlY3RvcjIucHJvdG90eXBlWyBtdXRhYmxlRnVuY3Rpb25OYW1lIF0gPSAoKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGBDYW5ub3QgY2FsbCBtdXRhYmxlIG1ldGhvZCAnJHttdXRhYmxlRnVuY3Rpb25OYW1lfScgb24gaW1tdXRhYmxlIFZlY3RvcjJgICk7XG4gICAgfTtcbiAgfVxufVxuXG5JbW11dGFibGVWZWN0b3IyLm11dGFibGVPdmVycmlkZUhlbHBlciggJ3NldFhZJyApO1xuSW1tdXRhYmxlVmVjdG9yMi5tdXRhYmxlT3ZlcnJpZGVIZWxwZXIoICdzZXRYJyApO1xuSW1tdXRhYmxlVmVjdG9yMi5tdXRhYmxlT3ZlcnJpZGVIZWxwZXIoICdzZXRZJyApO1xuXG5WZWN0b3IyLlpFUk8gPSBhc3NlcnQgPyBuZXcgSW1tdXRhYmxlVmVjdG9yMiggMCwgMCApIDogbmV3IFZlY3RvcjIoIDAsIDAgKTtcblZlY3RvcjIuWF9VTklUID0gYXNzZXJ0ID8gbmV3IEltbXV0YWJsZVZlY3RvcjIoIDEsIDAgKSA6IG5ldyBWZWN0b3IyKCAxLCAwICk7XG5WZWN0b3IyLllfVU5JVCA9IGFzc2VydCA/IG5ldyBJbW11dGFibGVWZWN0b3IyKCAwLCAxICkgOiBuZXcgVmVjdG9yMiggMCwgMSApO1xuXG5leHBvcnQgdHlwZSBWZWN0b3IyU3RhdGVPYmplY3QgPSB7XG4gIHg6IG51bWJlcjtcbiAgeTogbnVtYmVyO1xufTtcblxuVmVjdG9yMi5WZWN0b3IySU8gPSBuZXcgSU9UeXBlPFZlY3RvcjIsIFZlY3RvcjJTdGF0ZU9iamVjdD4oICdWZWN0b3IySU8nLCB7XG4gIHZhbHVlVHlwZTogVmVjdG9yMixcbiAgc3RhdGVTY2hlbWE6IHtcbiAgICB4OiBOdW1iZXJJTyxcbiAgICB5OiBOdW1iZXJJT1xuICB9LFxuICB0b1N0YXRlT2JqZWN0OiAoIHZlY3RvcjI6IFZlY3RvcjIgKSA9PiB2ZWN0b3IyLnRvU3RhdGVPYmplY3QoKSxcbiAgZnJvbVN0YXRlT2JqZWN0OiAoIHN0YXRlT2JqZWN0OiBWZWN0b3IyU3RhdGVPYmplY3QgKSA9PiBWZWN0b3IyLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QgKSxcbiAgZG9jdW1lbnRhdGlvbjogJ0EgbnVtZXJpY2FsIG9iamVjdCB3aXRoIHggYW5kIHkgcHJvcGVydGllcywgbGlrZSB7eDozLHk6NH0nXG59ICk7XG5cbmV4cG9ydCB7IHYyIH07XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsSUFBSSxNQUFxQiw0QkFBNEI7QUFDNUQsT0FBT0MsTUFBTSxNQUFNLGlDQUFpQztBQUNwRCxPQUFPQyxRQUFRLE1BQU0sbUNBQW1DO0FBQ3hELE9BQU9DLEdBQUcsTUFBTSxVQUFVO0FBQzFCLE9BQU9DLEtBQUssTUFBTSxZQUFZO0FBQzlCLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBRWxDLE1BQU1DLGtCQUFrQixHQUFHQSxDQUFFQyxNQUFlLEVBQUVDLFVBQW1CLEtBQU07RUFDckUsT0FBT0QsTUFBTSxDQUFDRSxHQUFHLENBQUVELFVBQVUsQ0FBRTtBQUNqQyxDQUFDO0FBRUQsZUFBZSxNQUFNRSxPQUFPLENBQXNCO0VBRWhE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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Utils.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * Utility functions for Dot, placed into the phet.dot.X namespace.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */





// constants
const EPSILON = Number.MIN_VALUE;
const TWO_PI = 2 * Math.PI;

// "static" variables used in boxMullerTransform
let generate;
let z0;
let z1;
const Utils = {
  /**
   * Returns the original value if it is inclusively within the [max,min] range. If it's below the range, min is
   * returned, and if it's above the range, max is returned.
   * @public
   *
   * @param {number} value
   * @param {number} min
   * @param {number} max
   * @returns {number}
   */
  clamp(value, min, max) {
    if (value < min) {
      return min;
    } else if (value > max) {
      return max;
    } else {
      return value;
    }
  },
  /**
   * Returns a number in the range $n\in[\mathrm{min},\mathrm{max})$ with the same equivalence class as the input
   * value mod (max-min), i.e. for a value $m$, $m\equiv n\ (\mathrm{mod}\ \mathrm{max}-\mathrm{min})$.
   * @public
   *
   * The 'down' indicates that if the value is equal to min or max, the max is returned.
   *
   * @param {number} value
   * @param {number} min
   * @param {number} max
   * @returns {number}
   */
  moduloBetweenDown(value, min, max) {
    assert && assert(max > min, 'max > min required for moduloBetween');
    const divisor = max - min;

    // get a partial result of value-min between [0,divisor)
    let partial = (value - min) % divisor;
    if (partial < 0) {
      // since if value-min < 0, the remainder will give us a negative number
      partial += divisor;
    }
    return partial + min; // add back in the minimum value
  },

  /**
   * Returns a number in the range $n\in(\mathrm{min},\mathrm{max}]$ with the same equivalence class as the input
   * value mod (max-min), i.e. for a value $m$, $m\equiv n\ (\mathrm{mod}\ \mathrm{max}-\mathrm{min})$.
   * @public
   *
   * The 'up' indicates that if the value is equal to min or max, the min is returned.
   *
   * @param {number} value
   * @param {number} min
   * @param {number} max
   * @returns {number}
   */
  moduloBetweenUp(value, min, max) {
    return -Utils.moduloBetweenDown(-value, -max, -min);
  },
  /**
   * Returns an array of integers from A to B (inclusive), e.g. rangeInclusive( 4, 7 ) maps to [ 4, 5, 6, 7 ].
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @returns {Array.<number>}
   */
  rangeInclusive(a, b) {
    if (b < a) {
      return [];
    }
    const result = new Array(b - a + 1);
    for (let i = a; i <= b; i++) {
      result[i - a] = i;
    }
    return result;
  },
  /**
   * Returns an array of integers from A to B (exclusive), e.g. rangeExclusive( 4, 7 ) maps to [ 5, 6 ].
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @returns {Array.<number>}
   */
  rangeExclusive(a, b) {
    return Utils.rangeInclusive(a + 1, b - 1);
  },
  /**
   * Converts degrees to radians.
   * @public
   *
   * @param {number} degrees
   * @returns {number}
   */
  toRadians(degrees) {
    return Math.PI * degrees / 180;
  },
  /**
   * Converts radians to degrees.
   * @public
   *
   * @param {number} radians
   * @returns {number}
   */
  toDegrees(radians) {
    return 180 * radians / Math.PI;
  },
  /**
   * Workaround for broken modulo operator.
   * E.g. on iOS9, 1e10 % 1e10 -> 2.65249474e-315
   * See https://github.com/phetsims/dot/issues/75
   * @param {number} a
   * @param {number} b
   * @returns {number}
   */
  mod(a, b) {
    if (a / b % 1 === 0) {
      return 0; // a is a multiple of b
    } else {
      return a % b;
    }
  },
  /**
   * Greatest Common Divisor, using https://en.wikipedia.org/wiki/Euclidean_algorithm. See
   * https://en.wikipedia.org/wiki/Greatest_common_divisor
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @returns {number}
   */
  gcd(a, b) {
    return Math.abs(b === 0 ? a : this.gcd(b, Utils.mod(a, b)));
  },
  /**
   * Least Common Multiple, https://en.wikipedia.org/wiki/Least_common_multiple
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @returns {number} lcm, an integer
   */
  lcm(a, b) {
    return Utils.roundSymmetric(Math.abs(a * b) / Utils.gcd(a, b));
  },
  /**
   * Intersection point between the lines defined by the line segments p1-2 and p3-p4. If the
   * lines are not properly defined, null is returned. If there are no intersections or infinitely many,
   * e.g. parallel lines, null is returned.
   * @public
   *
   * @param {Vector2} p1
   * @param {Vector2} p2
   * @param {Vector2} p3
   * @param {Vector2} p4
   * @returns {Vector2|null}
   */
  lineLineIntersection(p1, p2, p3, p4) {
    const epsilon = 1e-10;

    // If the endpoints are the same, they don't properly define a line
    if (p1.equals(p2) || p3.equals(p4)) {
      return null;
    }

    // Taken from an answer in
    // http://stackoverflow.com/questions/385305/efficient-maths-algorithm-to-calculate-intersections
    const x12 = p1.x - p2.x;
    const x34 = p3.x - p4.x;
    const y12 = p1.y - p2.y;
    const y34 = p3.y - p4.y;
    const denom = x12 * y34 - y12 * x34;

    // If the denominator is 0, lines are parallel or coincident
    if (Math.abs(denom) < epsilon) {
      return null;
    }

    // define intersection using determinants, see https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection
    const a = p1.x * p2.y - p1.y * p2.x;
    const b = p3.x * p4.y - p3.y * p4.x;
    return new Vector2((a * x34 - x12 * b) / denom, (a * y34 - y12 * b) / denom);
  },
  /**
   * Returns the center of a circle that will lie on 3 points (if it exists), otherwise null (if collinear).
   * @public
   *
   * @param {Vector2} p1
   * @param {Vector2} p2
   * @param {Vector2} p3
   * @returns {Vector2|null}
   */
  circleCenterFromPoints(p1, p2, p3) {
    // TODO: Can we make scratch vectors here, avoiding the circular reference?

    // midpoints between p1-p2 and p2-p3
    const p12 = new Vector2((p1.x + p2.x) / 2, (p1.y + p2.y) / 2);
    const p23 = new Vector2((p2.x + p3.x) / 2, (p2.y + p3.y) / 2);

    // perpendicular points from the minpoints
    const p12x = new Vector2(p12.x + (p2.y - p1.y), p12.y - (p2.x - p1.x));
    const p23x = new Vector2(p23.x + (p3.y - p2.y), p23.y - (p3.x - p2.x));
    return Utils.lineLineIntersection(p12, p12x, p23, p23x);
  },
  /**
   * Returns whether the point p is inside the circle defined by the other three points (p1, p2, p3).
   * @public
   *
   * NOTE: p1,p2,p3 should be specified in a counterclockwise (mathematically) order, and thus should have a positive
   * signed area.
   *
   * See notes in https://en.wikipedia.org/wiki/Delaunay_triangulation.
   *
   * @param {Vector2} p1
   * @param {Vector2} p2
   * @param {Vector2} p3
   * @param {Vector2} p
   * @returns {boolean}
   */
  pointInCircleFromPoints(p1, p2, p3, p) {
    assert && assert(Utils.triangleAreaSigned(p1, p2, p3) > 0, 'Defined points should be in a counterclockwise order');
    const m00 = p1.x - p.x;
    const m01 = p1.y - p.y;
    const m02 = (p1.x - p.x) * (p1.x - p.x) + (p1.y - p.y) * (p1.y - p.y);
    const m10 = p2.x - p.x;
    const m11 = p2.y - p.y;
    const m12 = (p2.x - p.x) * (p2.x - p.x) + (p2.y - p.y) * (p2.y - p.y);
    const m20 = p3.x - p.x;
    const m21 = p3.y - p.y;
    const m22 = (p3.x - p.x) * (p3.x - p.x) + (p3.y - p.y) * (p3.y - p.y);
    const determinant = m00 * m11 * m22 + m01 * m12 * m20 + m02 * m10 * m21 - m02 * m11 * m20 - m01 * m10 * m22 - m00 * m12 * m21;
    return determinant > 0;
  },
  /**
   * Ray-sphere intersection, returning information about the closest intersection. Assumes the sphere is centered
   * at the origin (for ease of computation), transform the ray to compensate if needed.
   * @public
   *
   * If there is no intersection, null is returned. Otherwise an object will be returned like:
   * <pre class="brush: js">
   * {
   *   distance: {number}, // distance from the ray position to the intersection
   *   hitPoint: {Vector3}, // location of the intersection
   *   normal: {Vector3}, // the normal of the sphere's surface at the intersection
   *   fromOutside: {boolean}, // whether the ray intersected the sphere from outside the sphere first
   * }
   * </pre>
   *
   * @param {number} radius
   * @param {Ray3} ray
   * @param {number} epsilon
   * @returns {Object}
   */
  // assumes a sphere with the specified radius, centered at the origin
  sphereRayIntersection(radius, ray, epsilon) {
    epsilon = epsilon === undefined ? 1e-5 : epsilon;

    // center is the origin for now, but leaving in computations so that we can change that in the future. optimize away if needed
    const center = new Vector3(0, 0, 0);
    const rayDir = ray.direction;
    const pos = ray.position;
    const centerToRay = pos.minus(center);

    // basically, we can use the quadratic equation to solve for both possible hit points (both +- roots are the hit points)
    const tmp = rayDir.dot(centerToRay);
    const centerToRayDistSq = centerToRay.magnitudeSquared;
    const det = 4 * tmp * tmp - 4 * (centerToRayDistSq - radius * radius);
    if (det < epsilon) {
      // ray misses sphere entirely
      return null;
    }
    const base = rayDir.dot(center) - rayDir.dot(pos);
    const sqt = Math.sqrt(det) / 2;

    // the "first" entry point distance into the sphere. if we are inside the sphere, it is behind us
    const ta = base - sqt;

    // the "second" entry point distance
    const tb = base + sqt;
    if (tb < epsilon) {
      // sphere is behind ray, so don't return an intersection
      return null;
    }
    const hitPositionB = ray.pointAtDistance(tb);
    const normalB = hitPositionB.minus(center).normalized();
    if (ta < epsilon) {
      // we are inside the sphere
      // in => out
      return {
        distance: tb,
        hitPoint: hitPositionB,
        normal: normalB.negated(),
        fromOutside: false
      };
    } else {
      // two possible hits
      const hitPositionA = ray.pointAtDistance(ta);
      const normalA = hitPositionA.minus(center).normalized();

      // close hit, we have out => in
      return {
        distance: ta,
        hitPoint: hitPositionA,
        normal: normalA,
        fromOutside: true
      };
    }
  },
  /**
   * Returns an array of the real roots of the quadratic equation $ax + b=0$, or null if every value is a solution.
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @returns {Array.<number>|null} - The real roots of the equation, or null if all values are roots. If the root has
   *                                  a multiplicity larger than 1, it will be repeated that many times.
   */
  solveLinearRootsReal(a, b) {
    if (a === 0) {
      if (b === 0) {
        return null;
      } else {
        return [];
      }
    } else {
      return [-b / a];
    }
  },
  /**
   * Returns an array of the real roots of the quadratic equation $ax^2 + bx + c=0$, or null if every value is a
   * solution. If a is nonzero, there should be between 0 and 2 (inclusive) values returned.
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @param {number} c
   * @returns {Array.<number>|null} - The real roots of the equation, or null if all values are roots. If the root has
   *                                  a multiplicity larger than 1, it will be repeated that many times.
   */
  solveQuadraticRootsReal(a, b, c) {
    // Check for a degenerate case where we don't have a quadratic, or if the order of magnitude is such where the
    // linear solution would be expected
    const epsilon = 1E7;
    if (a === 0 || Math.abs(b / a) > epsilon || Math.abs(c / a) > epsilon) {
      return Utils.solveLinearRootsReal(b, c);
    }
    const discriminant = b * b - 4 * a * c;
    if (discriminant < 0) {
      return [];
    }
    const sqrt = Math.sqrt(discriminant);
    // TODO: how to handle if discriminant is 0? give unique root or double it?
    // TODO: probably just use Complex for the future
    return [(-b - sqrt) / (2 * a), (-b + sqrt) / (2 * a)];
  },
  /**
   * Returns an array of the real roots of the cubic equation $ax^3 + bx^2 + cx + d=0$, or null if every value is a
   * solution. If a is nonzero, there should be between 0 and 3 (inclusive) values returned.
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @param {number} c
   * @param {number} d
   * @param {number} [discriminantThreshold] - for determining whether we have a single real root
   * @returns {Array.<number>|null} - The real roots of the equation, or null if all values are roots. If the root has
   *                                  a multiplicity larger than 1, it will be repeated that many times.
   */
  solveCubicRootsReal(a, b, c, d, discriminantThreshold = 1e-7) {
    let roots;

    // TODO: a Complex type!

    // Check for a degenerate case where we don't have a cubic
    if (a === 0) {
      roots = Utils.solveQuadraticRootsReal(b, c, d);
    } else {
      //We need to test whether a is several orders of magnitude less than b, c, d
      const epsilon = 1E7;
      if (a === 0 || Math.abs(b / a) > epsilon || Math.abs(c / a) > epsilon || Math.abs(d / a) > epsilon) {
        roots = Utils.solveQuadraticRootsReal(b, c, d);
      } else {
        if (d === 0 || Math.abs(a / d) > epsilon || Math.abs(b / d) > epsilon || Math.abs(c / d) > epsilon) {
          roots = [0].concat(Utils.solveQuadraticRootsReal(a, b, c));
        } else {
          b /= a;
          c /= a;
          d /= a;
          const q = (3.0 * c - b * b) / 9;
          const r = (-(27 * d) + b * (9 * c - 2 * (b * b))) / 54;
          const discriminant = q * q * q + r * r;
          const b3 = b / 3;
          if (discriminant > discriminantThreshold) {
            // a single real root
            const dsqrt = Math.sqrt(discriminant);
            roots = [Utils.cubeRoot(r + dsqrt) + Utils.cubeRoot(r - dsqrt) - b3];
          } else if (discriminant > -discriminantThreshold) {
            // would truly be discriminant==0, but floating-point error
            // contains a double root (but with three roots)
            const rsqrt = Utils.cubeRoot(r);
            const doubleRoot = -b3 - rsqrt;
            roots = [-b3 + 2 * rsqrt, doubleRoot, doubleRoot];
          } else {
            // all unique (three roots)
            let qX = -q * q * q;
            qX = Math.acos(r / Math.sqrt(qX));
            const rr = 2 * Math.sqrt(-q);
            roots = [-b3 + rr * Math.cos(qX / 3), -b3 + rr * Math.cos((qX + 2 * Math.PI) / 3), -b3 + rr * Math.cos((qX + 4 * Math.PI) / 3)];
          }
        }
      }
    }
    assert && roots && roots.forEach(root => assert(isFinite(root), 'All returned solveCubicRootsReal roots should be finite'));
    return roots;
  },
  /**
   * Returns the unique real cube root of x, such that $y^3=x$.
   * @public
   *
   * @param {number} x
   * @returns {number}
   */
  cubeRoot(x) {
    return x >= 0 ? Math.pow(x, 1 / 3) : -Math.pow(-x, 1 / 3);
  },
  /**
   * Defines and evaluates a linear mapping. The mapping is defined so that $f(a_1)=b_1$ and $f(a_2)=b_2$, and other
   * values are interpolated along the linear equation. The returned value is $f(a_3)$.
   * @public
   *
   * @param {number} a1
   * @param {number} a2
   * @param {number} b1
   * @param {number} b2
   * @param {number} a3
   * @returns {number}
   */
  linear(a1, a2, b1, b2, a3) {
    assert && assert(typeof a3 === 'number', 'linear requires a number to evaluate');
    return (b2 - b1) / (a2 - a1) * (a3 - a1) + b1;
  },
  /**
   * Rounds using "Round half away from zero" algorithm. See dot#35.
   * @public
   *
   * JavaScript's Math.round is not symmetric for positive and negative numbers, it uses IEEE 754 "Round half up".
   * See https://en.wikipedia.org/wiki/Rounding#Round_half_up.
   * For sims, we want to treat positive and negative values symmetrically, which is IEEE 754 "Round half away from zero",
   * See https://en.wikipedia.org/wiki/Rounding#Round_half_away_from_zero
   *
   * Note that -0 is rounded to 0, since we typically do not want to display -0 in sims.
   *
   * @param {number} value                               `
   * @returns {number}
   */
  roundSymmetric(value) {
    return (value < 0 ? -1 : 1) * Math.round(Math.abs(value)); // eslint-disable-line bad-sim-text
  },

  /**
   * A predictable implementation of toFixed.
   * @public
   *
   * JavaScript's toFixed is notoriously buggy, behavior differs depending on browser,
   * because the spec doesn't specify whether to round or floor.
   * Rounding is symmetric for positive and negative values, see Utils.roundSymmetric.
   *
   * @param {number} value
   * @param {number} decimalPlaces
   * @returns {string}
   */
  toFixed(value, decimalPlaces) {
    const multiplier = Math.pow(10, decimalPlaces);
    const newValue = Utils.roundSymmetric(value * multiplier) / multiplier;
    return newValue.toFixed(decimalPlaces); // eslint-disable-line bad-sim-text
  },

  /**
   * A predictable implementation of toFixed, where the result is returned as a number instead of a string.
   * @public
   *
   * JavaScript's toFixed is notoriously buggy, behavior differs depending on browser,
   * because the spec doesn't specify whether to round or floor.
   * Rounding is symmetric for positive and negative values, see Utils.roundSymmetric.
   *
   * @param {number} value
   * @param {number} decimalPlaces
   * @returns {number}
   */
  toFixedNumber(value, decimalPlaces) {
    return parseFloat(Utils.toFixed(value, decimalPlaces));
  },
  /**
   * Returns true if two numbers are within epsilon of each other.
   *
   * @param {number} a
   * @param {number} b
   * @param {number} epsilon
   * @returns {boolean}
   */
  equalsEpsilon(a, b, epsilon) {
    return Math.abs(a - b) <= epsilon;
  },
  /**
   * Computes the intersection of the two line segments $(x_1,y_1)(x_2,y_2)$ and $(x_3,y_3)(x_4,y_4)$. If there is no
   * intersection, null is returned.
   * @public
   *
   * @param {number} x1
   * @param {number} y1
   * @param {number} x2
   * @param {number} y2
   * @param {number} x3
   * @param {number} y3
   * @param {number} x4
   * @param {number} y4
   * @returns {Vector2|null}
   */
  lineSegmentIntersection(x1, y1, x2, y2, x3, y3, x4, y4) {
    // @private
    // Determines counterclockwiseness. Positive if counterclockwise, negative if clockwise, zero if straight line
    // Point1(a,b), Point2(c,d), Point3(e,f)
    // See http://jeffe.cs.illinois.edu/teaching/373/notes/x05-convexhull.pdf
    // @returns {number}
    const ccw = (a, b, c, d, e, f) => (f - b) * (c - a) - (d - b) * (e - a);

    // Check if intersection doesn't exist. See http://jeffe.cs.illinois.edu/teaching/373/notes/x06-sweepline.pdf
    // If point1 and point2 are on opposite sides of line 3 4, exactly one of the two triples 1, 3, 4 and 2, 3, 4
    // is in counterclockwise order.
    if (ccw(x1, y1, x3, y3, x4, y4) * ccw(x2, y2, x3, y3, x4, y4) > 0 || ccw(x3, y3, x1, y1, x2, y2) * ccw(x4, y4, x1, y1, x2, y2) > 0) {
      return null;
    }
    const denom = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);
    // If denominator is 0, the lines are parallel or coincident
    if (Math.abs(denom) < 1e-10) {
      return null;
    }

    // Check if there is an exact endpoint overlap (and then return an exact answer).
    if (x1 === x3 && y1 === y3 || x1 === x4 && y1 === y4) {
      return new Vector2(x1, y1);
    } else if (x2 === x3 && y2 === y3 || x2 === x4 && y2 === y4) {
      return new Vector2(x2, y2);
    }

    // Use determinants to calculate intersection, see https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection
    const intersectionX = ((x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4)) / denom;
    const intersectionY = ((x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4)) / denom;
    return new Vector2(intersectionX, intersectionY);
  },
  /**
   * Squared distance from a point to a line segment squared.
   * See http://stackoverflow.com/questions/849211/shortest-distance-between-a-point-and-a-line-segment
   * @public
   *
   * @param {Vector2} point - The point
   * @param {Vector2} a - Starting point of the line segment
   * @param {Vector2} b - Ending point of the line segment
   * @returns {number}
   */
  distToSegmentSquared(point, a, b) {
    // the square of the distance between a and b,
    const segmentSquaredLength = a.distanceSquared(b);

    // if the segment length is zero, the a and b point are coincident. return the squared distance between a and point
    if (segmentSquaredLength === 0) {
      return point.distanceSquared(a);
    }

    // the t value parametrize the projection of the point onto the a b line
    const t = ((point.x - a.x) * (b.x - a.x) + (point.y - a.y) * (b.y - a.y)) / segmentSquaredLength;
    let distanceSquared;
    if (t < 0) {
      // if t<0, the projection point is outside the ab line, beyond a
      distanceSquared = point.distanceSquared(a);
    } else if (t > 1) {
      // if t>1, the projection past is outside the ab segment, beyond b,
      distanceSquared = point.distanceSquared(b);
    } else {
      // if 0<t<1, the projection point lies along the line joining a and b.
      distanceSquared = point.distanceSquared(new Vector2(a.x + t * (b.x - a.x), a.y + t * (b.y - a.y)));
    }
    return distanceSquared;
  },
  /**
   * distance from a point to a line segment squared.
   * @public
   *
   * @param {Vector2} point - The point
   * @param {Vector2} a - Starting point of the line segment
   * @param {Vector2} b - Ending point of the line segment
   * @returns {number}
   */
  distToSegment(point, a, b) {
    return Math.sqrt(this.distToSegmentSquared(point, a, b));
  },
  /**
   * Determines whether the three points are approximately collinear.
   * @public
   *
   * @param {Vector2} a
   * @param {Vector2} b
   * @param {Vector2} c
   * @param {number} [epsilon]
   * @returns {boolean}
   */
  arePointsCollinear(a, b, c, epsilon) {
    if (epsilon === undefined) {
      epsilon = 0;
    }
    return Utils.triangleArea(a, b, c) <= epsilon;
  },
  /**
   * The area inside the triangle defined by the three vertices.
   * @public
   *
   * @param {Vector2} a
   * @param {Vector2} b
   * @param {Vector2} c
   * @returns {number}
   */
  triangleArea(a, b, c) {
    return Math.abs(Utils.triangleAreaSigned(a, b, c));
  },
  /**
   * The area inside the triangle defined by the three vertices, but with the sign determined by whether the vertices
   * provided are clockwise or counter-clockwise.
   * @public
   *
   * If the vertices are counterclockwise (in a right-handed coordinate system), then the signed area will be
   * positive.
   *
   * @param {Vector2} a
   * @param {Vector2} b
   * @param {Vector2} c
   * @returns {number}
   */
  triangleAreaSigned(a, b, c) {
    return a.x * (b.y - c.y) + b.x * (c.y - a.y) + c.x * (a.y - b.y);
  },
  /**
   * Returns the centroid of the simple planar polygon using Green's Theorem P=-y/2, Q=x/2 (similar to how kite
   * computes areas). See also https://en.wikipedia.org/wiki/Shoelace_formula.
   * @public
   *
   * @param {Array.<Vector2>} vertices
   * @returns {Vector2}
   */
  centroidOfPolygon(vertices) {
    const centroid = new Vector2(0, 0);
    let area = 0;
    vertices.forEach((v0, i) => {
      const v1 = vertices[(i + 1) % vertices.length];
      const doubleShoelace = v0.x * v1.y - v1.x * v0.y;
      area += doubleShoelace / 2;

      // Compute the centroid of the flat intersection with https://en.wikipedia.org/wiki/Centroid#Of_a_polygon
      centroid.addXY((v0.x + v1.x) * doubleShoelace, (v0.y + v1.y) * doubleShoelace);
    });
    centroid.divideScalar(6 * area);
    return centroid;
  },
  /**
   * Function that returns the hyperbolic cosine of a number
   * @public
   *
   * @param {number} value
   * @returns {number}
   */
  cosh(value) {
    return (Math.exp(value) + Math.exp(-value)) / 2;
  },
  /**
   * Function that returns the hyperbolic sine of a number
   * @public
   *
   * @param {number} value
   * @returns {number}
   */
  sinh(value) {
    return (Math.exp(value) - Math.exp(-value)) / 2;
  },
  /**
   * Log base-10, since it wasn't included in every supported browser.
   * @public
   *
   * @param {number} val
   * @returns {number}
   */
  log10(val) {
    return Math.log(val) / Math.LN10;
  },
  /**
   * Generates a random Gaussian sample with the given mean and standard deviation.
   * This method relies on the "static" variables generate, z0, and z1 defined above.
   * Random.js is the primary client of this function, but it is defined here so it can be
   * used other places more easily if need be.
   * Code inspired by example here: https://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform.
   * @public
   *
   * @param {number} mu - The mean of the Gaussian
   * @param {number} sigma - The standard deviation of the Gaussian
   * @param {Random} random - the source of randomness
   * @returns {number}
   */
  boxMullerTransform(mu, sigma, random) {
    generate = !generate;
    if (!generate) {
      return z1 * sigma + mu;
    }
    let u1;
    let u2;
    do {
      u1 = random.nextDouble();
      u2 = random.nextDouble();
    } while (u1 <= EPSILON);
    z0 = Math.sqrt(-2.0 * Math.log(u1)) * Math.cos(TWO_PI * u2);
    z1 = Math.sqrt(-2.0 * Math.log(u1)) * Math.sin(TWO_PI * u2);
    return z0 * sigma + mu;
  },
  /**
   * Determines the number of decimal places in a value.
   * @public
   *
   * @param {number} value - a finite number, scientific notation is not supported for decimal numbers
   * @returns {number}
   */
  numberOfDecimalPlaces(value) {
    assert && assert(typeof value === 'number' && isFinite(value), `value must be a finite number ${value}`);
    if (Math.floor(value) === value) {
      return 0;
    } else {
      const string = value.toString();

      // Handle scientific notation
      if (string.includes('e')) {
        // e.g. '1e-21', '5.6e+34', etc.
        const split = string.split('e');
        const mantissa = split[0]; // The left part, e.g. '1' or '5.6'
        const exponent = Number(split[1]); // The right part, e.g. '-21' or '+34'

        // How many decimal places are there in the left part
        const mantissaDecimalPlaces = mantissa.includes('.') ? mantissa.split('.')[1].length : 0;

        // We adjust the number of decimal places by the exponent, e.g. '1.5e1' has zero decimal places, and
        // '1.5e-2' has three.
        return Math.max(mantissaDecimalPlaces - exponent, 0);
      } else {
        // Handle decimal notation. Since we're not an integer, we should be guaranteed to have a decimal
        return string.split('.')[1].length;
      }
    }
  },
  /**
   * Rounds a value to a multiple of a specified interval.
   * Examples:
   * roundToInterval( 0.567, 0.01 ) -> 0.57
   * roundToInterval( 0.567, 0.02 ) -> 0.56
   * roundToInterval( 5.67, 0.5 ) -> 5.5
   *
   * @param {number} value
   * @param {number} interval
   * @returns {number}
   */
  roundToInterval(value, interval) {
    return Utils.toFixedNumber(Utils.roundSymmetric(value / interval) * interval, Utils.numberOfDecimalPlaces(interval));
  }
};
js_dot.register('Utils', Utils);

// make these available in the main namespace directly (for now)
js_dot.clamp = Utils.clamp;
js_dot.moduloBetweenDown = Utils.moduloBetweenDown;
js_dot.moduloBetweenUp = Utils.moduloBetweenUp;
js_dot.rangeInclusive = Utils.rangeInclusive;
js_dot.rangeExclusive = Utils.rangeExclusive;
js_dot.toRadians = Utils.toRadians;
js_dot.toDegrees = Utils.toDegrees;
js_dot.lineLineIntersection = Utils.lineLineIntersection;
js_dot.lineSegmentIntersection = Utils.lineSegmentIntersection;
js_dot.sphereRayIntersection = Utils.sphereRayIntersection;
js_dot.solveQuadraticRootsReal = Utils.solveQuadraticRootsReal;
js_dot.solveCubicRootsReal = Utils.solveCubicRootsReal;
js_dot.cubeRoot = Utils.cubeRoot;
js_dot.linear = Utils.linear;
js_dot.boxMullerTransform = Utils.boxMullerTransform;
/* harmony default export */ const js_Utils = (Utils);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJWZWN0b3IyIiwiVmVjdG9yMyIsIkVQU0lMT04iLCJOdW1iZXIiLCJNSU5fVkFMVUUiLCJUV09fUEkiLCJNYXRoIiwiUEkiLCJnZW5lcmF0ZSIsInowIiwiejEiLCJVdGlscyIsImNsYW1wIiwidmFsdWUiLCJtaW4iLCJtYXgiLCJtb2R1bG9CZXR3ZWVuRG93biIsImFzc2VydCIsImRpdmlzb3IiLCJwYXJ0aWFsIiwibW9kdWxvQmV0d2VlblVwIiwicmFuZ2VJbmNsdXNpdmUiLCJhIiwiYiIsInJlc3VsdCIsIkFycmF5IiwiaSIsInJhbmdlRXhjbHVzaXZlIiwidG9SYWRpYW5zIiwiZGVncmVlcyIsInRvRGVncmVlcyIsInJhZGlhbnMiLCJtb2QiLCJnY2QiLCJhYnMiLCJsY20iLCJyb3VuZFN5bW1ldHJpYyIsImxpbmVMaW5lSW50ZXJzZWN0aW9uIiwicDEiLCJwMiIsInAzIiwicDQiLCJlcHNpbG9uIiwiZXF1YWxzIiwieDEyIiwieCIsIngzNCIsInkxMiIsInkiLCJ5MzQiLCJkZW5vbSIsImNpcmNsZUNlbnRlckZyb21Qb2ludHMiLCJwMTIiLCJwMjMiLCJwMTJ4IiwicDIzeCIsInBvaW50SW5DaXJjbGVGcm9tUG9pbnRzIiwicCIsInRyaWFuZ2xlQXJlYVNpZ25lZCIsIm0wMCIsIm0wMSIsIm0wMiIsIm0xMCIsIm0xMSIsIm0xMiIsIm0yMCIsIm0yMSIsIm0yMiIsImRldGVybWluYW50Iiwic3BoZXJlUmF5SW50ZXJzZWN0aW9uIiwicmFkaXVzIiwicmF5IiwidW5kZWZpbmVkIiwiY2VudGVyIiwicmF5RGlyIiwiZGlyZWN0aW9uIiwicG9zIiwicG9zaXRpb24iLCJjZW50ZXJUb1JheSIsIm1pbnVzIiwidG1wIiwiY2VudGVyVG9SYXlEaXN0U3EiLCJtYWduaXR1ZGVTcXVhcmVkIiwiZGV0IiwiYmFzZSIsInNxdCIsInNxcnQiLCJ0YSIsInRiIiwiaGl0UG9zaXRpb25CIiwicG9pbnRBdERpc3RhbmNlIiwibm9ybWFsQiIsIm5vcm1hbGl6ZWQiLCJkaXN0YW5jZSIsImhpdFBvaW50Iiwibm9ybWFsIiwibmVnYXRlZCIsImZyb21PdXRzaWRlIiwiaGl0UG9zaXRpb25BIiwibm9ybWFsQSIsInNvbHZlTGluZWFyUm9vdHNSZWFsIiwic29sdmVRdWFkcmF0aWNSb290c1JlYWwiLCJjIiwiZGlzY3JpbWluYW50Iiwic29sdmVDdWJpY1Jvb3RzUmVhbCIsImQiLCJkaXNjcmltaW5hbnRUaHJlc2hvbGQiLCJyb290cyIsImNvbmNhdCIsInEiLCJyIiwiYjMiLCJkc3FydCIsImN1YmVSb290IiwicnNxcnQiLCJkb3VibGVSb290IiwicVgiLCJhY29zIiwicnIiLCJjb3MiLCJmb3JFYWNoIiwicm9vdCIsImlzRmluaXRlIiwicG93IiwibGluZWFyIiwiYTEiLCJhMiIsImIxIiwiYjIiLCJhMyIsInJvdW5kIiwidG9GaXhlZCIsImRlY2ltYWxQbGFjZXMiLCJtdWx0aXBsaWVyIiwibmV3VmFsdWUiLCJ0b0ZpeGVkTnVtYmVyIiwicGFyc2VGbG9hdCIsImVxdWFsc0Vwc2lsb24iLCJsaW5lU2VnbWVudEludGVyc2VjdGlvbiIsIngxIiwieTEiLCJ4MiIsInkyIiwieDMiLCJ5MyIsIng0IiwieTQiLCJjY3ciLCJlIiwiZiIsImludGVyc2VjdGlvblgiLCJpbnRlcnNlY3Rpb25ZIiwiZGlzdFRvU2VnbWVudFNxdWFyZWQiLCJwb2ludCIsInNlZ21lbnRTcXVhcmVkTGVuZ3RoIiwiZGlzdGFuY2VTcXVhcmVkIiwidCIsImRpc3RUb1NlZ21lbnQiLCJhcmVQb2ludHNDb2xsaW5lYXIiLCJ0cmlhbmdsZUFyZWEiLCJjZW50cm9pZE9mUG9seWdvbiIsInZlcnRpY2VzIiwiY2VudHJvaWQiLCJhcmVhIiwidjAiLCJ2MSIsImxlbmd0aCIsImRvdWJsZVNob2VsYWNlIiwiYWRkWFkiLCJkaXZpZGVTY2FsYXIiLCJjb3NoIiwiZXhwIiwic2luaCIsImxvZzEwIiwidmFsIiwibG9nIiwiTE4xMCIsImJveE11bGxlclRyYW5zZm9ybSIsIm11Iiwic2lnbWEiLCJyYW5kb20iLCJ1MSIsInUyIiwibmV4dERvdWJsZSIsInNpbiIsIm51bWJlck9mRGVjaW1hbFBsYWNlcyIsImZsb29yIiwic3RyaW5nIiwidG9TdHJpbmciLCJpbmNsdWRlcyIsInNwbGl0IiwibWFudGlzc2EiLCJleHBvbmVudCIsIm1hbnRpc3NhRGVjaW1hbFBsYWNlcyIsInJvdW5kVG9JbnRlcnZhbCIsImludGVydmFsIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJVdGlscy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBVdGlsaXR5IGZ1bmN0aW9ucyBmb3IgRG90LCBwbGFjZWQgaW50byB0aGUgcGhldC5kb3QuWCBuYW1lc3BhY2UuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi9WZWN0b3IyLmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5cbi8vIGNvbnN0YW50c1xuY29uc3QgRVBTSUxPTiA9IE51bWJlci5NSU5fVkFMVUU7XG5jb25zdCBUV09fUEkgPSAyICogTWF0aC5QSTtcblxuLy8gXCJzdGF0aWNcIiB2YXJpYWJsZXMgdXNlZCBpbiBib3hNdWxsZXJUcmFuc2Zvcm1cbmxldCBnZW5lcmF0ZTtcbmxldCB6MDtcbmxldCB6MTtcblxuY29uc3QgVXRpbHMgPSB7XG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvcmlnaW5hbCB2YWx1ZSBpZiBpdCBpcyBpbmNsdXNpdmVseSB3aXRoaW4gdGhlIFttYXgsbWluXSByYW5nZS4gSWYgaXQncyBiZWxvdyB0aGUgcmFuZ2UsIG1pbiBpc1xuICAgKiByZXR1cm5lZCwgYW5kIGlmIGl0J3MgYWJvdmUgdGhlIHJhbmdlLCBtYXggaXMgcmV0dXJuZWQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgY2xhbXAoIHZhbHVlLCBtaW4sIG1heCApIHtcbiAgICBpZiAoIHZhbHVlIDwgbWluICkge1xuICAgICAgcmV0dXJuIG1pbjtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHZhbHVlID4gbWF4ICkge1xuICAgICAgcmV0dXJuIG1heDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbnVtYmVyIGluIHRoZSByYW5nZSAkblxcaW5bXFxtYXRocm17bWlufSxcXG1hdGhybXttYXh9KSQgd2l0aCB0aGUgc2FtZSBlcXVpdmFsZW5jZSBjbGFzcyBhcyB0aGUgaW5wdXRcbiAgICogdmFsdWUgbW9kIChtYXgtbWluKSwgaS5lLiBmb3IgYSB2YWx1ZSAkbSQsICRtXFxlcXVpdiBuXFwgKFxcbWF0aHJte21vZH1cXCBcXG1hdGhybXttYXh9LVxcbWF0aHJte21pbn0pJC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGUgJ2Rvd24nIGluZGljYXRlcyB0aGF0IGlmIHRoZSB2YWx1ZSBpcyBlcXVhbCB0byBtaW4gb3IgbWF4LCB0aGUgbWF4IGlzIHJldHVybmVkLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtb2R1bG9CZXR3ZWVuRG93biggdmFsdWUsIG1pbiwgbWF4ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1heCA+IG1pbiwgJ21heCA+IG1pbiByZXF1aXJlZCBmb3IgbW9kdWxvQmV0d2VlbicgKTtcblxuICAgIGNvbnN0IGRpdmlzb3IgPSBtYXggLSBtaW47XG5cbiAgICAvLyBnZXQgYSBwYXJ0aWFsIHJlc3VsdCBvZiB2YWx1ZS1taW4gYmV0d2VlbiBbMCxkaXZpc29yKVxuICAgIGxldCBwYXJ0aWFsID0gKCB2YWx1ZSAtIG1pbiApICUgZGl2aXNvcjtcbiAgICBpZiAoIHBhcnRpYWwgPCAwICkge1xuICAgICAgLy8gc2luY2UgaWYgdmFsdWUtbWluIDwgMCwgdGhlIHJlbWFpbmRlciB3aWxsIGdpdmUgdXMgYSBuZWdhdGl2ZSBudW1iZXJcbiAgICAgIHBhcnRpYWwgKz0gZGl2aXNvcjtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFydGlhbCArIG1pbjsgLy8gYWRkIGJhY2sgaW4gdGhlIG1pbmltdW0gdmFsdWVcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyBhIG51bWJlciBpbiB0aGUgcmFuZ2UgJG5cXGluKFxcbWF0aHJte21pbn0sXFxtYXRocm17bWF4fV0kIHdpdGggdGhlIHNhbWUgZXF1aXZhbGVuY2UgY2xhc3MgYXMgdGhlIGlucHV0XG4gICAqIHZhbHVlIG1vZCAobWF4LW1pbiksIGkuZS4gZm9yIGEgdmFsdWUgJG0kLCAkbVxcZXF1aXYgblxcIChcXG1hdGhybXttb2R9XFwgXFxtYXRocm17bWF4fS1cXG1hdGhybXttaW59KSQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhlICd1cCcgaW5kaWNhdGVzIHRoYXQgaWYgdGhlIHZhbHVlIGlzIGVxdWFsIHRvIG1pbiBvciBtYXgsIHRoZSBtaW4gaXMgcmV0dXJuZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG1vZHVsb0JldHdlZW5VcCggdmFsdWUsIG1pbiwgbWF4ICkge1xuICAgIHJldHVybiAtVXRpbHMubW9kdWxvQmV0d2VlbkRvd24oIC12YWx1ZSwgLW1heCwgLW1pbiApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGludGVnZXJzIGZyb20gQSB0byBCIChpbmNsdXNpdmUpLCBlLmcuIHJhbmdlSW5jbHVzaXZlKCA0LCA3ICkgbWFwcyB0byBbIDQsIDUsIDYsIDcgXS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYVxuICAgKiBAcGFyYW0ge251bWJlcn0gYlxuICAgKiBAcmV0dXJucyB7QXJyYXkuPG51bWJlcj59XG4gICAqL1xuICByYW5nZUluY2x1c2l2ZSggYSwgYiApIHtcbiAgICBpZiAoIGIgPCBhICkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBjb25zdCByZXN1bHQgPSBuZXcgQXJyYXkoIGIgLSBhICsgMSApO1xuICAgIGZvciAoIGxldCBpID0gYTsgaSA8PSBiOyBpKysgKSB7XG4gICAgICByZXN1bHRbIGkgLSBhIF0gPSBpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIGludGVnZXJzIGZyb20gQSB0byBCIChleGNsdXNpdmUpLCBlLmcuIHJhbmdlRXhjbHVzaXZlKCA0LCA3ICkgbWFwcyB0byBbIDUsIDYgXS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYVxuICAgKiBAcGFyYW0ge251bWJlcn0gYlxuICAgKiBAcmV0dXJucyB7QXJyYXkuPG51bWJlcj59XG4gICAqL1xuICByYW5nZUV4Y2x1c2l2ZSggYSwgYiApIHtcbiAgICByZXR1cm4gVXRpbHMucmFuZ2VJbmNsdXNpdmUoIGEgKyAxLCBiIC0gMSApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyBkZWdyZWVzIHRvIHJhZGlhbnMuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRlZ3JlZXNcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIHRvUmFkaWFucyggZGVncmVlcyApIHtcbiAgICByZXR1cm4gTWF0aC5QSSAqIGRlZ3JlZXMgLyAxODA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENvbnZlcnRzIHJhZGlhbnMgdG8gZGVncmVlcy5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaWFuc1xuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgdG9EZWdyZWVzKCByYWRpYW5zICkge1xuICAgIHJldHVybiAxODAgKiByYWRpYW5zIC8gTWF0aC5QSTtcbiAgfSxcblxuICAvKipcbiAgICogV29ya2Fyb3VuZCBmb3IgYnJva2VuIG1vZHVsbyBvcGVyYXRvci5cbiAgICogRS5nLiBvbiBpT1M5LCAxZTEwICUgMWUxMCAtPiAyLjY1MjQ5NDc0ZS0zMTVcbiAgICogU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9kb3QvaXNzdWVzLzc1XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtb2QoIGEsIGIgKSB7XG4gICAgaWYgKCBhIC8gYiAlIDEgPT09IDAgKSB7XG4gICAgICByZXR1cm4gMDsgLy8gYSBpcyBhIG11bHRpcGxlIG9mIGJcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gYSAlIGI7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHcmVhdGVzdCBDb21tb24gRGl2aXNvciwgdXNpbmcgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRXVjbGlkZWFuX2FsZ29yaXRobS4gU2VlXG4gICAqIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0dyZWF0ZXN0X2NvbW1vbl9kaXZpc29yXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGJcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdjZCggYSwgYiApIHtcbiAgICByZXR1cm4gTWF0aC5hYnMoIGIgPT09IDAgPyBhIDogdGhpcy5nY2QoIGIsIFV0aWxzLm1vZCggYSwgYiApICkgKTtcbiAgfSxcblxuICAvKipcbiAgICogTGVhc3QgQ29tbW9uIE11bHRpcGxlLCBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MZWFzdF9jb21tb25fbXVsdGlwbGVcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYVxuICAgKiBAcGFyYW0ge251bWJlcn0gYlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSBsY20sIGFuIGludGVnZXJcbiAgICovXG4gIGxjbSggYSwgYiApIHtcbiAgICByZXR1cm4gVXRpbHMucm91bmRTeW1tZXRyaWMoIE1hdGguYWJzKCBhICogYiApIC8gVXRpbHMuZ2NkKCBhLCBiICkgKTtcbiAgfSxcblxuICAvKipcbiAgICogSW50ZXJzZWN0aW9uIHBvaW50IGJldHdlZW4gdGhlIGxpbmVzIGRlZmluZWQgYnkgdGhlIGxpbmUgc2VnbWVudHMgcDEtMiBhbmQgcDMtcDQuIElmIHRoZVxuICAgKiBsaW5lcyBhcmUgbm90IHByb3Blcmx5IGRlZmluZWQsIG51bGwgaXMgcmV0dXJuZWQuIElmIHRoZXJlIGFyZSBubyBpbnRlcnNlY3Rpb25zIG9yIGluZmluaXRlbHkgbWFueSxcbiAgICogZS5nLiBwYXJhbGxlbCBsaW5lcywgbnVsbCBpcyByZXR1cm5lZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHAxXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gcDJcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBwM1xuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHA0XG4gICAqIEByZXR1cm5zIHtWZWN0b3IyfG51bGx9XG4gICAqL1xuICBsaW5lTGluZUludGVyc2VjdGlvbiggcDEsIHAyLCBwMywgcDQgKSB7XG4gICAgY29uc3QgZXBzaWxvbiA9IDFlLTEwO1xuXG4gICAgLy8gSWYgdGhlIGVuZHBvaW50cyBhcmUgdGhlIHNhbWUsIHRoZXkgZG9uJ3QgcHJvcGVybHkgZGVmaW5lIGEgbGluZVxuICAgIGlmICggcDEuZXF1YWxzKCBwMiApIHx8IHAzLmVxdWFscyggcDQgKSApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIFRha2VuIGZyb20gYW4gYW5zd2VyIGluXG4gICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8zODUzMDUvZWZmaWNpZW50LW1hdGhzLWFsZ29yaXRobS10by1jYWxjdWxhdGUtaW50ZXJzZWN0aW9uc1xuICAgIGNvbnN0IHgxMiA9IHAxLnggLSBwMi54O1xuICAgIGNvbnN0IHgzNCA9IHAzLnggLSBwNC54O1xuICAgIGNvbnN0IHkxMiA9IHAxLnkgLSBwMi55O1xuICAgIGNvbnN0IHkzNCA9IHAzLnkgLSBwNC55O1xuXG4gICAgY29uc3QgZGVub20gPSB4MTIgKiB5MzQgLSB5MTIgKiB4MzQ7XG5cbiAgICAvLyBJZiB0aGUgZGVub21pbmF0b3IgaXMgMCwgbGluZXMgYXJlIHBhcmFsbGVsIG9yIGNvaW5jaWRlbnRcbiAgICBpZiAoIE1hdGguYWJzKCBkZW5vbSApIDwgZXBzaWxvbiApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIC8vIGRlZmluZSBpbnRlcnNlY3Rpb24gdXNpbmcgZGV0ZXJtaW5hbnRzLCBzZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvTGluZSVFMiU4MCU5M2xpbmVfaW50ZXJzZWN0aW9uXG4gICAgY29uc3QgYSA9IHAxLnggKiBwMi55IC0gcDEueSAqIHAyLng7XG4gICAgY29uc3QgYiA9IHAzLnggKiBwNC55IC0gcDMueSAqIHA0Lng7XG5cbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoXG4gICAgICAoIGEgKiB4MzQgLSB4MTIgKiBiICkgLyBkZW5vbSxcbiAgICAgICggYSAqIHkzNCAtIHkxMiAqIGIgKSAvIGRlbm9tXG4gICAgKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgY2VudGVyIG9mIGEgY2lyY2xlIHRoYXQgd2lsbCBsaWUgb24gMyBwb2ludHMgKGlmIGl0IGV4aXN0cyksIG90aGVyd2lzZSBudWxsIChpZiBjb2xsaW5lYXIpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gcDFcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBwMlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHAzXG4gICAqIEByZXR1cm5zIHtWZWN0b3IyfG51bGx9XG4gICAqL1xuICBjaXJjbGVDZW50ZXJGcm9tUG9pbnRzKCBwMSwgcDIsIHAzICkge1xuICAgIC8vIFRPRE86IENhbiB3ZSBtYWtlIHNjcmF0Y2ggdmVjdG9ycyBoZXJlLCBhdm9pZGluZyB0aGUgY2lyY3VsYXIgcmVmZXJlbmNlP1xuXG4gICAgLy8gbWlkcG9pbnRzIGJldHdlZW4gcDEtcDIgYW5kIHAyLXAzXG4gICAgY29uc3QgcDEyID0gbmV3IFZlY3RvcjIoICggcDEueCArIHAyLnggKSAvIDIsICggcDEueSArIHAyLnkgKSAvIDIgKTtcbiAgICBjb25zdCBwMjMgPSBuZXcgVmVjdG9yMiggKCBwMi54ICsgcDMueCApIC8gMiwgKCBwMi55ICsgcDMueSApIC8gMiApO1xuXG4gICAgLy8gcGVycGVuZGljdWxhciBwb2ludHMgZnJvbSB0aGUgbWlucG9pbnRzXG4gICAgY29uc3QgcDEyeCA9IG5ldyBWZWN0b3IyKCBwMTIueCArICggcDIueSAtIHAxLnkgKSwgcDEyLnkgLSAoIHAyLnggLSBwMS54ICkgKTtcbiAgICBjb25zdCBwMjN4ID0gbmV3IFZlY3RvcjIoIHAyMy54ICsgKCBwMy55IC0gcDIueSApLCBwMjMueSAtICggcDMueCAtIHAyLnggKSApO1xuXG4gICAgcmV0dXJuIFV0aWxzLmxpbmVMaW5lSW50ZXJzZWN0aW9uKCBwMTIsIHAxMngsIHAyMywgcDIzeCApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhlIHBvaW50IHAgaXMgaW5zaWRlIHRoZSBjaXJjbGUgZGVmaW5lZCBieSB0aGUgb3RoZXIgdGhyZWUgcG9pbnRzIChwMSwgcDIsIHAzKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBOT1RFOiBwMSxwMixwMyBzaG91bGQgYmUgc3BlY2lmaWVkIGluIGEgY291bnRlcmNsb2Nrd2lzZSAobWF0aGVtYXRpY2FsbHkpIG9yZGVyLCBhbmQgdGh1cyBzaG91bGQgaGF2ZSBhIHBvc2l0aXZlXG4gICAqIHNpZ25lZCBhcmVhLlxuICAgKlxuICAgKiBTZWUgbm90ZXMgaW4gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvRGVsYXVuYXlfdHJpYW5ndWxhdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBwMVxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHAyXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gcDNcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBwXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgcG9pbnRJbkNpcmNsZUZyb21Qb2ludHMoIHAxLCBwMiwgcDMsIHAgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggVXRpbHMudHJpYW5nbGVBcmVhU2lnbmVkKCBwMSwgcDIsIHAzICkgPiAwLFxuICAgICAgJ0RlZmluZWQgcG9pbnRzIHNob3VsZCBiZSBpbiBhIGNvdW50ZXJjbG9ja3dpc2Ugb3JkZXInICk7XG5cbiAgICBjb25zdCBtMDAgPSBwMS54IC0gcC54O1xuICAgIGNvbnN0IG0wMSA9IHAxLnkgLSBwLnk7XG4gICAgY29uc3QgbTAyID0gKCBwMS54IC0gcC54ICkgKiAoIHAxLnggLSBwLnggKSArICggcDEueSAtIHAueSApICogKCBwMS55IC0gcC55ICk7XG4gICAgY29uc3QgbTEwID0gcDIueCAtIHAueDtcbiAgICBjb25zdCBtMTEgPSBwMi55IC0gcC55O1xuICAgIGNvbnN0IG0xMiA9ICggcDIueCAtIHAueCApICogKCBwMi54IC0gcC54ICkgKyAoIHAyLnkgLSBwLnkgKSAqICggcDIueSAtIHAueSApO1xuICAgIGNvbnN0IG0yMCA9IHAzLnggLSBwLng7XG4gICAgY29uc3QgbTIxID0gcDMueSAtIHAueTtcbiAgICBjb25zdCBtMjIgPSAoIHAzLnggLSBwLnggKSAqICggcDMueCAtIHAueCApICsgKCBwMy55IC0gcC55ICkgKiAoIHAzLnkgLSBwLnkgKTtcblxuICAgIGNvbnN0IGRldGVybWluYW50ID0gbTAwICogbTExICogbTIyICsgbTAxICogbTEyICogbTIwICsgbTAyICogbTEwICogbTIxIC0gbTAyICogbTExICogbTIwIC0gbTAxICogbTEwICogbTIyIC0gbTAwICogbTEyICogbTIxO1xuICAgIHJldHVybiBkZXRlcm1pbmFudCA+IDA7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJheS1zcGhlcmUgaW50ZXJzZWN0aW9uLCByZXR1cm5pbmcgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGNsb3Nlc3QgaW50ZXJzZWN0aW9uLiBBc3N1bWVzIHRoZSBzcGhlcmUgaXMgY2VudGVyZWRcbiAgICogYXQgdGhlIG9yaWdpbiAoZm9yIGVhc2Ugb2YgY29tcHV0YXRpb24pLCB0cmFuc2Zvcm0gdGhlIHJheSB0byBjb21wZW5zYXRlIGlmIG5lZWRlZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBJZiB0aGVyZSBpcyBubyBpbnRlcnNlY3Rpb24sIG51bGwgaXMgcmV0dXJuZWQuIE90aGVyd2lzZSBhbiBvYmplY3Qgd2lsbCBiZSByZXR1cm5lZCBsaWtlOlxuICAgKiA8cHJlIGNsYXNzPVwiYnJ1c2g6IGpzXCI+XG4gICAqIHtcbiAgICogICBkaXN0YW5jZToge251bWJlcn0sIC8vIGRpc3RhbmNlIGZyb20gdGhlIHJheSBwb3NpdGlvbiB0byB0aGUgaW50ZXJzZWN0aW9uXG4gICAqICAgaGl0UG9pbnQ6IHtWZWN0b3IzfSwgLy8gbG9jYXRpb24gb2YgdGhlIGludGVyc2VjdGlvblxuICAgKiAgIG5vcm1hbDoge1ZlY3RvcjN9LCAvLyB0aGUgbm9ybWFsIG9mIHRoZSBzcGhlcmUncyBzdXJmYWNlIGF0IHRoZSBpbnRlcnNlY3Rpb25cbiAgICogICBmcm9tT3V0c2lkZToge2Jvb2xlYW59LCAvLyB3aGV0aGVyIHRoZSByYXkgaW50ZXJzZWN0ZWQgdGhlIHNwaGVyZSBmcm9tIG91dHNpZGUgdGhlIHNwaGVyZSBmaXJzdFxuICAgKiB9XG4gICAqIDwvcHJlPlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzXG4gICAqIEBwYXJhbSB7UmF5M30gcmF5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlcHNpbG9uXG4gICAqIEByZXR1cm5zIHtPYmplY3R9XG4gICAqL1xuICAvLyBhc3N1bWVzIGEgc3BoZXJlIHdpdGggdGhlIHNwZWNpZmllZCByYWRpdXMsIGNlbnRlcmVkIGF0IHRoZSBvcmlnaW5cbiAgc3BoZXJlUmF5SW50ZXJzZWN0aW9uKCByYWRpdXMsIHJheSwgZXBzaWxvbiApIHtcbiAgICBlcHNpbG9uID0gZXBzaWxvbiA9PT0gdW5kZWZpbmVkID8gMWUtNSA6IGVwc2lsb247XG5cbiAgICAvLyBjZW50ZXIgaXMgdGhlIG9yaWdpbiBmb3Igbm93LCBidXQgbGVhdmluZyBpbiBjb21wdXRhdGlvbnMgc28gdGhhdCB3ZSBjYW4gY2hhbmdlIHRoYXQgaW4gdGhlIGZ1dHVyZS4gb3B0aW1pemUgYXdheSBpZiBuZWVkZWRcbiAgICBjb25zdCBjZW50ZXIgPSBuZXcgVmVjdG9yMyggMCwgMCwgMCApO1xuXG4gICAgY29uc3QgcmF5RGlyID0gcmF5LmRpcmVjdGlvbjtcbiAgICBjb25zdCBwb3MgPSByYXkucG9zaXRpb247XG4gICAgY29uc3QgY2VudGVyVG9SYXkgPSBwb3MubWludXMoIGNlbnRlciApO1xuXG4gICAgLy8gYmFzaWNhbGx5LCB3ZSBjYW4gdXNlIHRoZSBxdWFkcmF0aWMgZXF1YXRpb24gdG8gc29sdmUgZm9yIGJvdGggcG9zc2libGUgaGl0IHBvaW50cyAoYm90aCArLSByb290cyBhcmUgdGhlIGhpdCBwb2ludHMpXG4gICAgY29uc3QgdG1wID0gcmF5RGlyLmRvdCggY2VudGVyVG9SYXkgKTtcbiAgICBjb25zdCBjZW50ZXJUb1JheURpc3RTcSA9IGNlbnRlclRvUmF5Lm1hZ25pdHVkZVNxdWFyZWQ7XG4gICAgY29uc3QgZGV0ID0gNCAqIHRtcCAqIHRtcCAtIDQgKiAoIGNlbnRlclRvUmF5RGlzdFNxIC0gcmFkaXVzICogcmFkaXVzICk7XG4gICAgaWYgKCBkZXQgPCBlcHNpbG9uICkge1xuICAgICAgLy8gcmF5IG1pc3NlcyBzcGhlcmUgZW50aXJlbHlcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGJhc2UgPSByYXlEaXIuZG90KCBjZW50ZXIgKSAtIHJheURpci5kb3QoIHBvcyApO1xuICAgIGNvbnN0IHNxdCA9IE1hdGguc3FydCggZGV0ICkgLyAyO1xuXG4gICAgLy8gdGhlIFwiZmlyc3RcIiBlbnRyeSBwb2ludCBkaXN0YW5jZSBpbnRvIHRoZSBzcGhlcmUuIGlmIHdlIGFyZSBpbnNpZGUgdGhlIHNwaGVyZSwgaXQgaXMgYmVoaW5kIHVzXG4gICAgY29uc3QgdGEgPSBiYXNlIC0gc3F0O1xuXG4gICAgLy8gdGhlIFwic2Vjb25kXCIgZW50cnkgcG9pbnQgZGlzdGFuY2VcbiAgICBjb25zdCB0YiA9IGJhc2UgKyBzcXQ7XG5cbiAgICBpZiAoIHRiIDwgZXBzaWxvbiApIHtcbiAgICAgIC8vIHNwaGVyZSBpcyBiZWhpbmQgcmF5LCBzbyBkb24ndCByZXR1cm4gYW4gaW50ZXJzZWN0aW9uXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBoaXRQb3NpdGlvbkIgPSByYXkucG9pbnRBdERpc3RhbmNlKCB0YiApO1xuICAgIGNvbnN0IG5vcm1hbEIgPSBoaXRQb3NpdGlvbkIubWludXMoIGNlbnRlciApLm5vcm1hbGl6ZWQoKTtcblxuICAgIGlmICggdGEgPCBlcHNpbG9uICkge1xuICAgICAgLy8gd2UgYXJlIGluc2lkZSB0aGUgc3BoZXJlXG4gICAgICAvLyBpbiA9PiBvdXRcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGRpc3RhbmNlOiB0YixcbiAgICAgICAgaGl0UG9pbnQ6IGhpdFBvc2l0aW9uQixcbiAgICAgICAgbm9ybWFsOiBub3JtYWxCLm5lZ2F0ZWQoKSxcbiAgICAgICAgZnJvbU91dHNpZGU6IGZhbHNlXG4gICAgICB9O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIHR3byBwb3NzaWJsZSBoaXRzXG4gICAgICBjb25zdCBoaXRQb3NpdGlvbkEgPSByYXkucG9pbnRBdERpc3RhbmNlKCB0YSApO1xuICAgICAgY29uc3Qgbm9ybWFsQSA9IGhpdFBvc2l0aW9uQS5taW51cyggY2VudGVyICkubm9ybWFsaXplZCgpO1xuXG4gICAgICAvLyBjbG9zZSBoaXQsIHdlIGhhdmUgb3V0ID0+IGluXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaXN0YW5jZTogdGEsXG4gICAgICAgIGhpdFBvaW50OiBoaXRQb3NpdGlvbkEsXG4gICAgICAgIG5vcm1hbDogbm9ybWFsQSxcbiAgICAgICAgZnJvbU91dHNpZGU6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSByZWFsIHJvb3RzIG9mIHRoZSBxdWFkcmF0aWMgZXF1YXRpb24gJGF4ICsgYj0wJCwgb3IgbnVsbCBpZiBldmVyeSB2YWx1ZSBpcyBhIHNvbHV0aW9uLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiXG4gICAqIEByZXR1cm5zIHtBcnJheS48bnVtYmVyPnxudWxsfSAtIFRoZSByZWFsIHJvb3RzIG9mIHRoZSBlcXVhdGlvbiwgb3IgbnVsbCBpZiBhbGwgdmFsdWVzIGFyZSByb290cy4gSWYgdGhlIHJvb3QgaGFzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgbXVsdGlwbGljaXR5IGxhcmdlciB0aGFuIDEsIGl0IHdpbGwgYmUgcmVwZWF0ZWQgdGhhdCBtYW55IHRpbWVzLlxuICAgKi9cbiAgc29sdmVMaW5lYXJSb290c1JlYWwoIGEsIGIgKSB7XG4gICAgaWYgKCBhID09PSAwICkge1xuICAgICAgaWYgKCBiID09PSAwICkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZXR1cm4gW107XG4gICAgICB9XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIFsgLWIgLyBhIF07XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHRoZSByZWFsIHJvb3RzIG9mIHRoZSBxdWFkcmF0aWMgZXF1YXRpb24gJGF4XjIgKyBieCArIGM9MCQsIG9yIG51bGwgaWYgZXZlcnkgdmFsdWUgaXMgYVxuICAgKiBzb2x1dGlvbi4gSWYgYSBpcyBub256ZXJvLCB0aGVyZSBzaG91bGQgYmUgYmV0d2VlbiAwIGFuZCAyIChpbmNsdXNpdmUpIHZhbHVlcyByZXR1cm5lZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYVxuICAgKiBAcGFyYW0ge251bWJlcn0gYlxuICAgKiBAcGFyYW0ge251bWJlcn0gY1xuICAgKiBAcmV0dXJucyB7QXJyYXkuPG51bWJlcj58bnVsbH0gLSBUaGUgcmVhbCByb290cyBvZiB0aGUgZXF1YXRpb24sIG9yIG51bGwgaWYgYWxsIHZhbHVlcyBhcmUgcm9vdHMuIElmIHRoZSByb290IGhhc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhIG11bHRpcGxpY2l0eSBsYXJnZXIgdGhhbiAxLCBpdCB3aWxsIGJlIHJlcGVhdGVkIHRoYXQgbWFueSB0aW1lcy5cbiAgICovXG4gIHNvbHZlUXVhZHJhdGljUm9vdHNSZWFsKCBhLCBiLCBjICkge1xuICAgIC8vIENoZWNrIGZvciBhIGRlZ2VuZXJhdGUgY2FzZSB3aGVyZSB3ZSBkb24ndCBoYXZlIGEgcXVhZHJhdGljLCBvciBpZiB0aGUgb3JkZXIgb2YgbWFnbml0dWRlIGlzIHN1Y2ggd2hlcmUgdGhlXG4gICAgLy8gbGluZWFyIHNvbHV0aW9uIHdvdWxkIGJlIGV4cGVjdGVkXG4gICAgY29uc3QgZXBzaWxvbiA9IDFFNztcbiAgICBpZiAoIGEgPT09IDAgfHwgTWF0aC5hYnMoIGIgLyBhICkgPiBlcHNpbG9uIHx8IE1hdGguYWJzKCBjIC8gYSApID4gZXBzaWxvbiApIHtcbiAgICAgIHJldHVybiBVdGlscy5zb2x2ZUxpbmVhclJvb3RzUmVhbCggYiwgYyApO1xuICAgIH1cblxuICAgIGNvbnN0IGRpc2NyaW1pbmFudCA9IGIgKiBiIC0gNCAqIGEgKiBjO1xuICAgIGlmICggZGlzY3JpbWluYW50IDwgMCApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgY29uc3Qgc3FydCA9IE1hdGguc3FydCggZGlzY3JpbWluYW50ICk7XG4gICAgLy8gVE9ETzogaG93IHRvIGhhbmRsZSBpZiBkaXNjcmltaW5hbnQgaXMgMD8gZ2l2ZSB1bmlxdWUgcm9vdCBvciBkb3VibGUgaXQ/XG4gICAgLy8gVE9ETzogcHJvYmFibHkganVzdCB1c2UgQ29tcGxleCBmb3IgdGhlIGZ1dHVyZVxuICAgIHJldHVybiBbXG4gICAgICAoIC1iIC0gc3FydCApIC8gKCAyICogYSApLFxuICAgICAgKCAtYiArIHNxcnQgKSAvICggMiAqIGEgKVxuICAgIF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gYXJyYXkgb2YgdGhlIHJlYWwgcm9vdHMgb2YgdGhlIGN1YmljIGVxdWF0aW9uICRheF4zICsgYnheMiArIGN4ICsgZD0wJCwgb3IgbnVsbCBpZiBldmVyeSB2YWx1ZSBpcyBhXG4gICAqIHNvbHV0aW9uLiBJZiBhIGlzIG5vbnplcm8sIHRoZXJlIHNob3VsZCBiZSBiZXR3ZWVuIDAgYW5kIDMgKGluY2x1c2l2ZSkgdmFsdWVzIHJldHVybmVkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbZGlzY3JpbWluYW50VGhyZXNob2xkXSAtIGZvciBkZXRlcm1pbmluZyB3aGV0aGVyIHdlIGhhdmUgYSBzaW5nbGUgcmVhbCByb290XG4gICAqIEByZXR1cm5zIHtBcnJheS48bnVtYmVyPnxudWxsfSAtIFRoZSByZWFsIHJvb3RzIG9mIHRoZSBlcXVhdGlvbiwgb3IgbnVsbCBpZiBhbGwgdmFsdWVzIGFyZSByb290cy4gSWYgdGhlIHJvb3QgaGFzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGEgbXVsdGlwbGljaXR5IGxhcmdlciB0aGFuIDEsIGl0IHdpbGwgYmUgcmVwZWF0ZWQgdGhhdCBtYW55IHRpbWVzLlxuICAgKi9cbiAgc29sdmVDdWJpY1Jvb3RzUmVhbCggYSwgYiwgYywgZCwgZGlzY3JpbWluYW50VGhyZXNob2xkID0gMWUtNyApIHtcblxuICAgIGxldCByb290cztcblxuICAgIC8vIFRPRE86IGEgQ29tcGxleCB0eXBlIVxuXG4gICAgLy8gQ2hlY2sgZm9yIGEgZGVnZW5lcmF0ZSBjYXNlIHdoZXJlIHdlIGRvbid0IGhhdmUgYSBjdWJpY1xuICAgIGlmICggYSA9PT0gMCApIHtcbiAgICAgIHJvb3RzID0gVXRpbHMuc29sdmVRdWFkcmF0aWNSb290c1JlYWwoIGIsIGMsIGQgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvL1dlIG5lZWQgdG8gdGVzdCB3aGV0aGVyIGEgaXMgc2V2ZXJhbCBvcmRlcnMgb2YgbWFnbml0dWRlIGxlc3MgdGhhbiBiLCBjLCBkXG4gICAgICBjb25zdCBlcHNpbG9uID0gMUU3O1xuXG4gICAgICBpZiAoIGEgPT09IDAgfHwgTWF0aC5hYnMoIGIgLyBhICkgPiBlcHNpbG9uIHx8IE1hdGguYWJzKCBjIC8gYSApID4gZXBzaWxvbiB8fCBNYXRoLmFicyggZCAvIGEgKSA+IGVwc2lsb24gKSB7XG4gICAgICAgIHJvb3RzID0gVXRpbHMuc29sdmVRdWFkcmF0aWNSb290c1JlYWwoIGIsIGMsIGQgKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBpZiAoIGQgPT09IDAgfHwgTWF0aC5hYnMoIGEgLyBkICkgPiBlcHNpbG9uIHx8IE1hdGguYWJzKCBiIC8gZCApID4gZXBzaWxvbiB8fCBNYXRoLmFicyggYyAvIGQgKSA+IGVwc2lsb24gKSB7XG4gICAgICAgICAgcm9vdHMgPSBbIDAgXS5jb25jYXQoIFV0aWxzLnNvbHZlUXVhZHJhdGljUm9vdHNSZWFsKCBhLCBiLCBjICkgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICBiIC89IGE7XG4gICAgICAgICAgYyAvPSBhO1xuICAgICAgICAgIGQgLz0gYTtcblxuICAgICAgICAgIGNvbnN0IHEgPSAoIDMuMCAqIGMgLSAoIGIgKiBiICkgKSAvIDk7XG4gICAgICAgICAgY29uc3QgciA9ICggLSggMjcgKiBkICkgKyBiICogKCA5ICogYyAtIDIgKiAoIGIgKiBiICkgKSApIC8gNTQ7XG4gICAgICAgICAgY29uc3QgZGlzY3JpbWluYW50ID0gcSAqIHEgKiBxICsgciAqIHI7XG4gICAgICAgICAgY29uc3QgYjMgPSBiIC8gMztcblxuICAgICAgICAgIGlmICggZGlzY3JpbWluYW50ID4gZGlzY3JpbWluYW50VGhyZXNob2xkICkge1xuICAgICAgICAgICAgLy8gYSBzaW5nbGUgcmVhbCByb290XG4gICAgICAgICAgICBjb25zdCBkc3FydCA9IE1hdGguc3FydCggZGlzY3JpbWluYW50ICk7XG4gICAgICAgICAgICByb290cyA9IFsgVXRpbHMuY3ViZVJvb3QoIHIgKyBkc3FydCApICsgVXRpbHMuY3ViZVJvb3QoIHIgLSBkc3FydCApIC0gYjMgXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSBpZiAoIGRpc2NyaW1pbmFudCA+IC1kaXNjcmltaW5hbnRUaHJlc2hvbGQgKSB7IC8vIHdvdWxkIHRydWx5IGJlIGRpc2NyaW1pbmFudD09MCwgYnV0IGZsb2F0aW5nLXBvaW50IGVycm9yXG4gICAgICAgICAgICAvLyBjb250YWlucyBhIGRvdWJsZSByb290IChidXQgd2l0aCB0aHJlZSByb290cylcbiAgICAgICAgICAgIGNvbnN0IHJzcXJ0ID0gVXRpbHMuY3ViZVJvb3QoIHIgKTtcbiAgICAgICAgICAgIGNvbnN0IGRvdWJsZVJvb3QgPSAtYjMgLSByc3FydDtcbiAgICAgICAgICAgIHJvb3RzID0gWyAtYjMgKyAyICogcnNxcnQsIGRvdWJsZVJvb3QsIGRvdWJsZVJvb3QgXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAvLyBhbGwgdW5pcXVlICh0aHJlZSByb290cylcbiAgICAgICAgICAgIGxldCBxWCA9IC1xICogcSAqIHE7XG4gICAgICAgICAgICBxWCA9IE1hdGguYWNvcyggciAvIE1hdGguc3FydCggcVggKSApO1xuICAgICAgICAgICAgY29uc3QgcnIgPSAyICogTWF0aC5zcXJ0KCAtcSApO1xuICAgICAgICAgICAgcm9vdHMgPSBbXG4gICAgICAgICAgICAgIC1iMyArIHJyICogTWF0aC5jb3MoIHFYIC8gMyApLFxuICAgICAgICAgICAgICAtYjMgKyByciAqIE1hdGguY29zKCAoIHFYICsgMiAqIE1hdGguUEkgKSAvIDMgKSxcbiAgICAgICAgICAgICAgLWIzICsgcnIgKiBNYXRoLmNvcyggKCBxWCArIDQgKiBNYXRoLlBJICkgLyAzIClcbiAgICAgICAgICAgIF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXNzZXJ0ICYmIHJvb3RzICYmIHJvb3RzLmZvckVhY2goIHJvb3QgPT4gYXNzZXJ0KCBpc0Zpbml0ZSggcm9vdCApLCAnQWxsIHJldHVybmVkIHNvbHZlQ3ViaWNSb290c1JlYWwgcm9vdHMgc2hvdWxkIGJlIGZpbml0ZScgKSApO1xuXG4gICAgcmV0dXJuIHJvb3RzO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB1bmlxdWUgcmVhbCBjdWJlIHJvb3Qgb2YgeCwgc3VjaCB0aGF0ICR5XjM9eCQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGN1YmVSb290KCB4ICkge1xuICAgIHJldHVybiB4ID49IDAgPyBNYXRoLnBvdyggeCwgMSAvIDMgKSA6IC1NYXRoLnBvdyggLXgsIDEgLyAzICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlZmluZXMgYW5kIGV2YWx1YXRlcyBhIGxpbmVhciBtYXBwaW5nLiBUaGUgbWFwcGluZyBpcyBkZWZpbmVkIHNvIHRoYXQgJGYoYV8xKT1iXzEkIGFuZCAkZihhXzIpPWJfMiQsIGFuZCBvdGhlclxuICAgKiB2YWx1ZXMgYXJlIGludGVycG9sYXRlZCBhbG9uZyB0aGUgbGluZWFyIGVxdWF0aW9uLiBUaGUgcmV0dXJuZWQgdmFsdWUgaXMgJGYoYV8zKSQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGExXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhMlxuICAgKiBAcGFyYW0ge251bWJlcn0gYjFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGIyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhM1xuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgbGluZWFyKCBhMSwgYTIsIGIxLCBiMiwgYTMgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdHlwZW9mIGEzID09PSAnbnVtYmVyJywgJ2xpbmVhciByZXF1aXJlcyBhIG51bWJlciB0byBldmFsdWF0ZScgKTtcbiAgICByZXR1cm4gKCBiMiAtIGIxICkgLyAoIGEyIC0gYTEgKSAqICggYTMgLSBhMSApICsgYjE7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJvdW5kcyB1c2luZyBcIlJvdW5kIGhhbGYgYXdheSBmcm9tIHplcm9cIiBhbGdvcml0aG0uIFNlZSBkb3QjMzUuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogSmF2YVNjcmlwdCdzIE1hdGgucm91bmQgaXMgbm90IHN5bW1ldHJpYyBmb3IgcG9zaXRpdmUgYW5kIG5lZ2F0aXZlIG51bWJlcnMsIGl0IHVzZXMgSUVFRSA3NTQgXCJSb3VuZCBoYWxmIHVwXCIuXG4gICAqIFNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Sb3VuZGluZyNSb3VuZF9oYWxmX3VwLlxuICAgKiBGb3Igc2ltcywgd2Ugd2FudCB0byB0cmVhdCBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgdmFsdWVzIHN5bW1ldHJpY2FsbHksIHdoaWNoIGlzIElFRUUgNzU0IFwiUm91bmQgaGFsZiBhd2F5IGZyb20gemVyb1wiLFxuICAgKiBTZWUgaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUm91bmRpbmcjUm91bmRfaGFsZl9hd2F5X2Zyb21femVyb1xuICAgKlxuICAgKiBOb3RlIHRoYXQgLTAgaXMgcm91bmRlZCB0byAwLCBzaW5jZSB3ZSB0eXBpY2FsbHkgZG8gbm90IHdhbnQgdG8gZGlzcGxheSAtMCBpbiBzaW1zLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgcm91bmRTeW1tZXRyaWMoIHZhbHVlICkge1xuICAgIHJldHVybiAoICggdmFsdWUgPCAwICkgPyAtMSA6IDEgKSAqIE1hdGgucm91bmQoIE1hdGguYWJzKCB2YWx1ZSApICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XG4gIH0sXG5cbiAgLyoqXG4gICAqIEEgcHJlZGljdGFibGUgaW1wbGVtZW50YXRpb24gb2YgdG9GaXhlZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBKYXZhU2NyaXB0J3MgdG9GaXhlZCBpcyBub3RvcmlvdXNseSBidWdneSwgYmVoYXZpb3IgZGlmZmVycyBkZXBlbmRpbmcgb24gYnJvd3NlcixcbiAgICogYmVjYXVzZSB0aGUgc3BlYyBkb2Vzbid0IHNwZWNpZnkgd2hldGhlciB0byByb3VuZCBvciBmbG9vci5cbiAgICogUm91bmRpbmcgaXMgc3ltbWV0cmljIGZvciBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgdmFsdWVzLCBzZWUgVXRpbHMucm91bmRTeW1tZXRyaWMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbFBsYWNlc1xuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgdG9GaXhlZCggdmFsdWUsIGRlY2ltYWxQbGFjZXMgKSB7XG4gICAgY29uc3QgbXVsdGlwbGllciA9IE1hdGgucG93KCAxMCwgZGVjaW1hbFBsYWNlcyApO1xuICAgIGNvbnN0IG5ld1ZhbHVlID0gVXRpbHMucm91bmRTeW1tZXRyaWMoIHZhbHVlICogbXVsdGlwbGllciApIC8gbXVsdGlwbGllcjtcbiAgICByZXR1cm4gbmV3VmFsdWUudG9GaXhlZCggZGVjaW1hbFBsYWNlcyApOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxuICB9LFxuXG4gIC8qKlxuICAgKiBBIHByZWRpY3RhYmxlIGltcGxlbWVudGF0aW9uIG9mIHRvRml4ZWQsIHdoZXJlIHRoZSByZXN1bHQgaXMgcmV0dXJuZWQgYXMgYSBudW1iZXIgaW5zdGVhZCBvZiBhIHN0cmluZy5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBKYXZhU2NyaXB0J3MgdG9GaXhlZCBpcyBub3RvcmlvdXNseSBidWdneSwgYmVoYXZpb3IgZGlmZmVycyBkZXBlbmRpbmcgb24gYnJvd3NlcixcbiAgICogYmVjYXVzZSB0aGUgc3BlYyBkb2Vzbid0IHNwZWNpZnkgd2hldGhlciB0byByb3VuZCBvciBmbG9vci5cbiAgICogUm91bmRpbmcgaXMgc3ltbWV0cmljIGZvciBwb3NpdGl2ZSBhbmQgbmVnYXRpdmUgdmFsdWVzLCBzZWUgVXRpbHMucm91bmRTeW1tZXRyaWMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVjaW1hbFBsYWNlc1xuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgdG9GaXhlZE51bWJlciggdmFsdWUsIGRlY2ltYWxQbGFjZXMgKSB7XG4gICAgcmV0dXJuIHBhcnNlRmxvYXQoIFV0aWxzLnRvRml4ZWQoIHZhbHVlLCBkZWNpbWFsUGxhY2VzICkgKTtcbiAgfSxcblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHR3byBudW1iZXJzIGFyZSB3aXRoaW4gZXBzaWxvbiBvZiBlYWNoIG90aGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYVxuICAgKiBAcGFyYW0ge251bWJlcn0gYlxuICAgKiBAcGFyYW0ge251bWJlcn0gZXBzaWxvblxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGVxdWFsc0Vwc2lsb24oIGEsIGIsIGVwc2lsb24gKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKCBhIC0gYiApIDw9IGVwc2lsb247XG4gIH0sXG5cbiAgLyoqXG4gICAqIENvbXB1dGVzIHRoZSBpbnRlcnNlY3Rpb24gb2YgdGhlIHR3byBsaW5lIHNlZ21lbnRzICQoeF8xLHlfMSkoeF8yLHlfMikkIGFuZCAkKHhfMyx5XzMpKHhfNCx5XzQpJC4gSWYgdGhlcmUgaXMgbm9cbiAgICogaW50ZXJzZWN0aW9uLCBudWxsIGlzIHJldHVybmVkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4MVxuICAgKiBAcGFyYW0ge251bWJlcn0geTFcbiAgICogQHBhcmFtIHtudW1iZXJ9IHgyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5MlxuICAgKiBAcGFyYW0ge251bWJlcn0geDNcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4NFxuICAgKiBAcGFyYW0ge251bWJlcn0geTRcbiAgICogQHJldHVybnMge1ZlY3RvcjJ8bnVsbH1cbiAgICovXG4gIGxpbmVTZWdtZW50SW50ZXJzZWN0aW9uKCB4MSwgeTEsIHgyLCB5MiwgeDMsIHkzLCB4NCwgeTQgKSB7XG5cbiAgICAvLyBAcHJpdmF0ZVxuICAgIC8vIERldGVybWluZXMgY291bnRlcmNsb2Nrd2lzZW5lc3MuIFBvc2l0aXZlIGlmIGNvdW50ZXJjbG9ja3dpc2UsIG5lZ2F0aXZlIGlmIGNsb2Nrd2lzZSwgemVybyBpZiBzdHJhaWdodCBsaW5lXG4gICAgLy8gUG9pbnQxKGEsYiksIFBvaW50MihjLGQpLCBQb2ludDMoZSxmKVxuICAgIC8vIFNlZSBodHRwOi8vamVmZmUuY3MuaWxsaW5vaXMuZWR1L3RlYWNoaW5nLzM3My9ub3Rlcy94MDUtY29udmV4aHVsbC5wZGZcbiAgICAvLyBAcmV0dXJucyB7bnVtYmVyfVxuICAgIGNvbnN0IGNjdyA9ICggYSwgYiwgYywgZCwgZSwgZiApID0+ICggZiAtIGIgKSAqICggYyAtIGEgKSAtICggZCAtIGIgKSAqICggZSAtIGEgKTtcblxuICAgIC8vIENoZWNrIGlmIGludGVyc2VjdGlvbiBkb2Vzbid0IGV4aXN0LiBTZWUgaHR0cDovL2plZmZlLmNzLmlsbGlub2lzLmVkdS90ZWFjaGluZy8zNzMvbm90ZXMveDA2LXN3ZWVwbGluZS5wZGZcbiAgICAvLyBJZiBwb2ludDEgYW5kIHBvaW50MiBhcmUgb24gb3Bwb3NpdGUgc2lkZXMgb2YgbGluZSAzIDQsIGV4YWN0bHkgb25lIG9mIHRoZSB0d28gdHJpcGxlcyAxLCAzLCA0IGFuZCAyLCAzLCA0XG4gICAgLy8gaXMgaW4gY291bnRlcmNsb2Nrd2lzZSBvcmRlci5cbiAgICBpZiAoIGNjdyggeDEsIHkxLCB4MywgeTMsIHg0LCB5NCApICogY2N3KCB4MiwgeTIsIHgzLCB5MywgeDQsIHk0ICkgPiAwIHx8XG4gICAgICAgICBjY3coIHgzLCB5MywgeDEsIHkxLCB4MiwgeTIgKSAqIGNjdyggeDQsIHk0LCB4MSwgeTEsIHgyLCB5MiApID4gMFxuICAgICkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgZGVub20gPSAoIHgxIC0geDIgKSAqICggeTMgLSB5NCApIC0gKCB5MSAtIHkyICkgKiAoIHgzIC0geDQgKTtcbiAgICAvLyBJZiBkZW5vbWluYXRvciBpcyAwLCB0aGUgbGluZXMgYXJlIHBhcmFsbGVsIG9yIGNvaW5jaWRlbnRcbiAgICBpZiAoIE1hdGguYWJzKCBkZW5vbSApIDwgMWUtMTAgKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGFjdCBlbmRwb2ludCBvdmVybGFwIChhbmQgdGhlbiByZXR1cm4gYW4gZXhhY3QgYW5zd2VyKS5cbiAgICBpZiAoICggeDEgPT09IHgzICYmIHkxID09PSB5MyApIHx8ICggeDEgPT09IHg0ICYmIHkxID09PSB5NCApICkge1xuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKCB4MSwgeTEgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoICggeDIgPT09IHgzICYmIHkyID09PSB5MyApIHx8ICggeDIgPT09IHg0ICYmIHkyID09PSB5NCApICkge1xuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IyKCB4MiwgeTIgKTtcbiAgICB9XG5cbiAgICAvLyBVc2UgZGV0ZXJtaW5hbnRzIHRvIGNhbGN1bGF0ZSBpbnRlcnNlY3Rpb24sIHNlZSBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9MaW5lJUUyJTgwJTkzbGluZV9pbnRlcnNlY3Rpb25cbiAgICBjb25zdCBpbnRlcnNlY3Rpb25YID0gKCAoIHgxICogeTIgLSB5MSAqIHgyICkgKiAoIHgzIC0geDQgKSAtICggeDEgLSB4MiApICogKCB4MyAqIHk0IC0geTMgKiB4NCApICkgLyBkZW5vbTtcbiAgICBjb25zdCBpbnRlcnNlY3Rpb25ZID0gKCAoIHgxICogeTIgLSB5MSAqIHgyICkgKiAoIHkzIC0geTQgKSAtICggeTEgLSB5MiApICogKCB4MyAqIHk0IC0geTMgKiB4NCApICkgLyBkZW5vbTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoIGludGVyc2VjdGlvblgsIGludGVyc2VjdGlvblkgKTtcbiAgfSxcblxuXG4gIC8qKlxuICAgKiBTcXVhcmVkIGRpc3RhbmNlIGZyb20gYSBwb2ludCB0byBhIGxpbmUgc2VnbWVudCBzcXVhcmVkLlxuICAgKiBTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy84NDkyMTEvc2hvcnRlc3QtZGlzdGFuY2UtYmV0d2Vlbi1hLXBvaW50LWFuZC1hLWxpbmUtc2VnbWVudFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gcG9pbnQgLSBUaGUgcG9pbnRcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBhIC0gU3RhcnRpbmcgcG9pbnQgb2YgdGhlIGxpbmUgc2VnbWVudFxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IGIgLSBFbmRpbmcgcG9pbnQgb2YgdGhlIGxpbmUgc2VnbWVudFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZGlzdFRvU2VnbWVudFNxdWFyZWQoIHBvaW50LCBhLCBiICkge1xuICAgIC8vIHRoZSBzcXVhcmUgb2YgdGhlIGRpc3RhbmNlIGJldHdlZW4gYSBhbmQgYixcbiAgICBjb25zdCBzZWdtZW50U3F1YXJlZExlbmd0aCA9IGEuZGlzdGFuY2VTcXVhcmVkKCBiICk7XG5cbiAgICAvLyBpZiB0aGUgc2VnbWVudCBsZW5ndGggaXMgemVybywgdGhlIGEgYW5kIGIgcG9pbnQgYXJlIGNvaW5jaWRlbnQuIHJldHVybiB0aGUgc3F1YXJlZCBkaXN0YW5jZSBiZXR3ZWVuIGEgYW5kIHBvaW50XG4gICAgaWYgKCBzZWdtZW50U3F1YXJlZExlbmd0aCA9PT0gMCApIHsgcmV0dXJuIHBvaW50LmRpc3RhbmNlU3F1YXJlZCggYSApOyB9XG5cbiAgICAvLyB0aGUgdCB2YWx1ZSBwYXJhbWV0cml6ZSB0aGUgcHJvamVjdGlvbiBvZiB0aGUgcG9pbnQgb250byB0aGUgYSBiIGxpbmVcbiAgICBjb25zdCB0ID0gKCAoIHBvaW50LnggLSBhLnggKSAqICggYi54IC0gYS54ICkgKyAoIHBvaW50LnkgLSBhLnkgKSAqICggYi55IC0gYS55ICkgKSAvIHNlZ21lbnRTcXVhcmVkTGVuZ3RoO1xuXG4gICAgbGV0IGRpc3RhbmNlU3F1YXJlZDtcblxuICAgIGlmICggdCA8IDAgKSB7XG4gICAgICAvLyBpZiB0PDAsIHRoZSBwcm9qZWN0aW9uIHBvaW50IGlzIG91dHNpZGUgdGhlIGFiIGxpbmUsIGJleW9uZCBhXG4gICAgICBkaXN0YW5jZVNxdWFyZWQgPSBwb2ludC5kaXN0YW5jZVNxdWFyZWQoIGEgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHQgPiAxICkge1xuICAgICAgLy8gaWYgdD4xLCB0aGUgcHJvamVjdGlvbiBwYXN0IGlzIG91dHNpZGUgdGhlIGFiIHNlZ21lbnQsIGJleW9uZCBiLFxuICAgICAgZGlzdGFuY2VTcXVhcmVkID0gcG9pbnQuZGlzdGFuY2VTcXVhcmVkKCBiICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgLy8gaWYgMDx0PDEsIHRoZSBwcm9qZWN0aW9uIHBvaW50IGxpZXMgYWxvbmcgdGhlIGxpbmUgam9pbmluZyBhIGFuZCBiLlxuICAgICAgZGlzdGFuY2VTcXVhcmVkID0gcG9pbnQuZGlzdGFuY2VTcXVhcmVkKCBuZXcgVmVjdG9yMiggYS54ICsgdCAqICggYi54IC0gYS54ICksIGEueSArIHQgKiAoIGIueSAtIGEueSApICkgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gZGlzdGFuY2VTcXVhcmVkO1xuXG4gIH0sXG5cbiAgLyoqXG4gICAqIGRpc3RhbmNlIGZyb20gYSBwb2ludCB0byBhIGxpbmUgc2VnbWVudCBzcXVhcmVkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gcG9pbnQgLSBUaGUgcG9pbnRcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBhIC0gU3RhcnRpbmcgcG9pbnQgb2YgdGhlIGxpbmUgc2VnbWVudFxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IGIgLSBFbmRpbmcgcG9pbnQgb2YgdGhlIGxpbmUgc2VnbWVudFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZGlzdFRvU2VnbWVudCggcG9pbnQsIGEsIGIgKSB7XG4gICAgcmV0dXJuIE1hdGguc3FydCggdGhpcy5kaXN0VG9TZWdtZW50U3F1YXJlZCggcG9pbnQsIGEsIGIgKSApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIHRocmVlIHBvaW50cyBhcmUgYXBwcm94aW1hdGVseSBjb2xsaW5lYXIuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBhXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gYlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IGNcbiAgICogQHBhcmFtIHtudW1iZXJ9IFtlcHNpbG9uXVxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGFyZVBvaW50c0NvbGxpbmVhciggYSwgYiwgYywgZXBzaWxvbiApIHtcbiAgICBpZiAoIGVwc2lsb24gPT09IHVuZGVmaW5lZCApIHtcbiAgICAgIGVwc2lsb24gPSAwO1xuICAgIH1cbiAgICByZXR1cm4gVXRpbHMudHJpYW5nbGVBcmVhKCBhLCBiLCBjICkgPD0gZXBzaWxvbjtcbiAgfSxcblxuICAvKipcbiAgICogVGhlIGFyZWEgaW5zaWRlIHRoZSB0cmlhbmdsZSBkZWZpbmVkIGJ5IHRoZSB0aHJlZSB2ZXJ0aWNlcy5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IGFcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBiXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gY1xuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgdHJpYW5nbGVBcmVhKCBhLCBiLCBjICkge1xuICAgIHJldHVybiBNYXRoLmFicyggVXRpbHMudHJpYW5nbGVBcmVhU2lnbmVkKCBhLCBiLCBjICkgKTtcbiAgfSxcblxuICAvKipcbiAgICogVGhlIGFyZWEgaW5zaWRlIHRoZSB0cmlhbmdsZSBkZWZpbmVkIGJ5IHRoZSB0aHJlZSB2ZXJ0aWNlcywgYnV0IHdpdGggdGhlIHNpZ24gZGV0ZXJtaW5lZCBieSB3aGV0aGVyIHRoZSB2ZXJ0aWNlc1xuICAgKiBwcm92aWRlZCBhcmUgY2xvY2t3aXNlIG9yIGNvdW50ZXItY2xvY2t3aXNlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIElmIHRoZSB2ZXJ0aWNlcyBhcmUgY291bnRlcmNsb2Nrd2lzZSAoaW4gYSByaWdodC1oYW5kZWQgY29vcmRpbmF0ZSBzeXN0ZW0pLCB0aGVuIHRoZSBzaWduZWQgYXJlYSB3aWxsIGJlXG4gICAqIHBvc2l0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IGFcbiAgICogQHBhcmFtIHtWZWN0b3IyfSBiXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gY1xuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgdHJpYW5nbGVBcmVhU2lnbmVkKCBhLCBiLCBjICkge1xuICAgIHJldHVybiBhLnggKiAoIGIueSAtIGMueSApICsgYi54ICogKCBjLnkgLSBhLnkgKSArIGMueCAqICggYS55IC0gYi55ICk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGNlbnRyb2lkIG9mIHRoZSBzaW1wbGUgcGxhbmFyIHBvbHlnb24gdXNpbmcgR3JlZW4ncyBUaGVvcmVtIFA9LXkvMiwgUT14LzIgKHNpbWlsYXIgdG8gaG93IGtpdGVcbiAgICogY29tcHV0ZXMgYXJlYXMpLiBTZWUgYWxzbyBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9TaG9lbGFjZV9mb3JtdWxhLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXkuPFZlY3RvcjI+fSB2ZXJ0aWNlc1xuICAgKiBAcmV0dXJucyB7VmVjdG9yMn1cbiAgICovXG4gIGNlbnRyb2lkT2ZQb2x5Z29uKCB2ZXJ0aWNlcyApIHtcbiAgICBjb25zdCBjZW50cm9pZCA9IG5ldyBWZWN0b3IyKCAwLCAwICk7XG5cbiAgICBsZXQgYXJlYSA9IDA7XG4gICAgdmVydGljZXMuZm9yRWFjaCggKCB2MCwgaSApID0+IHtcbiAgICAgIGNvbnN0IHYxID0gdmVydGljZXNbICggaSArIDEgKSAlIHZlcnRpY2VzLmxlbmd0aCBdO1xuICAgICAgY29uc3QgZG91YmxlU2hvZWxhY2UgPSB2MC54ICogdjEueSAtIHYxLnggKiB2MC55O1xuXG4gICAgICBhcmVhICs9IGRvdWJsZVNob2VsYWNlIC8gMjtcblxuICAgICAgLy8gQ29tcHV0ZSB0aGUgY2VudHJvaWQgb2YgdGhlIGZsYXQgaW50ZXJzZWN0aW9uIHdpdGggaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQ2VudHJvaWQjT2ZfYV9wb2x5Z29uXG4gICAgICBjZW50cm9pZC5hZGRYWShcbiAgICAgICAgKCB2MC54ICsgdjEueCApICogZG91YmxlU2hvZWxhY2UsXG4gICAgICAgICggdjAueSArIHYxLnkgKSAqIGRvdWJsZVNob2VsYWNlXG4gICAgICApO1xuICAgIH0gKTtcbiAgICBjZW50cm9pZC5kaXZpZGVTY2FsYXIoIDYgKiBhcmVhICk7XG5cbiAgICByZXR1cm4gY2VudHJvaWQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGUgaHlwZXJib2xpYyBjb3NpbmUgb2YgYSBudW1iZXJcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGNvc2goIHZhbHVlICkge1xuICAgIHJldHVybiAoIE1hdGguZXhwKCB2YWx1ZSApICsgTWF0aC5leHAoIC12YWx1ZSApICkgLyAyO1xuICB9LFxuXG4gIC8qKlxuICAgKiBGdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIGh5cGVyYm9saWMgc2luZSBvZiBhIG51bWJlclxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgc2luaCggdmFsdWUgKSB7XG4gICAgcmV0dXJuICggTWF0aC5leHAoIHZhbHVlICkgLSBNYXRoLmV4cCggLXZhbHVlICkgKSAvIDI7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvZyBiYXNlLTEwLCBzaW5jZSBpdCB3YXNuJ3QgaW5jbHVkZWQgaW4gZXZlcnkgc3VwcG9ydGVkIGJyb3dzZXIuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHZhbFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgbG9nMTAoIHZhbCApIHtcbiAgICByZXR1cm4gTWF0aC5sb2coIHZhbCApIC8gTWF0aC5MTjEwO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSByYW5kb20gR2F1c3NpYW4gc2FtcGxlIHdpdGggdGhlIGdpdmVuIG1lYW4gYW5kIHN0YW5kYXJkIGRldmlhdGlvbi5cbiAgICogVGhpcyBtZXRob2QgcmVsaWVzIG9uIHRoZSBcInN0YXRpY1wiIHZhcmlhYmxlcyBnZW5lcmF0ZSwgejAsIGFuZCB6MSBkZWZpbmVkIGFib3ZlLlxuICAgKiBSYW5kb20uanMgaXMgdGhlIHByaW1hcnkgY2xpZW50IG9mIHRoaXMgZnVuY3Rpb24sIGJ1dCBpdCBpcyBkZWZpbmVkIGhlcmUgc28gaXQgY2FuIGJlXG4gICAqIHVzZWQgb3RoZXIgcGxhY2VzIG1vcmUgZWFzaWx5IGlmIG5lZWQgYmUuXG4gICAqIENvZGUgaW5zcGlyZWQgYnkgZXhhbXBsZSBoZXJlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Cb3glRTIlODAlOTNNdWxsZXJfdHJhbnNmb3JtLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtdSAtIFRoZSBtZWFuIG9mIHRoZSBHYXVzc2lhblxuICAgKiBAcGFyYW0ge251bWJlcn0gc2lnbWEgLSBUaGUgc3RhbmRhcmQgZGV2aWF0aW9uIG9mIHRoZSBHYXVzc2lhblxuICAgKiBAcGFyYW0ge1JhbmRvbX0gcmFuZG9tIC0gdGhlIHNvdXJjZSBvZiByYW5kb21uZXNzXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBib3hNdWxsZXJUcmFuc2Zvcm0oIG11LCBzaWdtYSwgcmFuZG9tICkge1xuICAgIGdlbmVyYXRlID0gIWdlbmVyYXRlO1xuXG4gICAgaWYgKCAhZ2VuZXJhdGUgKSB7XG4gICAgICByZXR1cm4gejEgKiBzaWdtYSArIG11O1xuICAgIH1cblxuICAgIGxldCB1MTtcbiAgICBsZXQgdTI7XG4gICAgZG8ge1xuICAgICAgdTEgPSByYW5kb20ubmV4dERvdWJsZSgpO1xuICAgICAgdTIgPSByYW5kb20ubmV4dERvdWJsZSgpO1xuICAgIH1cbiAgICB3aGlsZSAoIHUxIDw9IEVQU0lMT04gKTtcblxuICAgIHowID0gTWF0aC5zcXJ0KCAtMi4wICogTWF0aC5sb2coIHUxICkgKSAqIE1hdGguY29zKCBUV09fUEkgKiB1MiApO1xuICAgIHoxID0gTWF0aC5zcXJ0KCAtMi4wICogTWF0aC5sb2coIHUxICkgKSAqIE1hdGguc2luKCBUV09fUEkgKiB1MiApO1xuICAgIHJldHVybiB6MCAqIHNpZ21hICsgbXU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERldGVybWluZXMgdGhlIG51bWJlciBvZiBkZWNpbWFsIHBsYWNlcyBpbiBhIHZhbHVlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIGEgZmluaXRlIG51bWJlciwgc2NpZW50aWZpYyBub3RhdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGZvciBkZWNpbWFsIG51bWJlcnNcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG51bWJlck9mRGVjaW1hbFBsYWNlcyggdmFsdWUgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiBpc0Zpbml0ZSggdmFsdWUgKSwgYHZhbHVlIG11c3QgYmUgYSBmaW5pdGUgbnVtYmVyICR7dmFsdWV9YCApO1xuICAgIGlmICggTWF0aC5mbG9vciggdmFsdWUgKSA9PT0gdmFsdWUgKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBzdHJpbmcgPSB2YWx1ZS50b1N0cmluZygpO1xuXG4gICAgICAvLyBIYW5kbGUgc2NpZW50aWZpYyBub3RhdGlvblxuICAgICAgaWYgKCBzdHJpbmcuaW5jbHVkZXMoICdlJyApICkge1xuICAgICAgICAvLyBlLmcuICcxZS0yMScsICc1LjZlKzM0JywgZXRjLlxuICAgICAgICBjb25zdCBzcGxpdCA9IHN0cmluZy5zcGxpdCggJ2UnICk7XG4gICAgICAgIGNvbnN0IG1hbnRpc3NhID0gc3BsaXRbIDAgXTsgLy8gVGhlIGxlZnQgcGFydCwgZS5nLiAnMScgb3IgJzUuNidcbiAgICAgICAgY29uc3QgZXhwb25lbnQgPSBOdW1iZXIoIHNwbGl0WyAxIF0gKTsgLy8gVGhlIHJpZ2h0IHBhcnQsIGUuZy4gJy0yMScgb3IgJyszNCdcblxuICAgICAgICAvLyBIb3cgbWFueSBkZWNpbWFsIHBsYWNlcyBhcmUgdGhlcmUgaW4gdGhlIGxlZnQgcGFydFxuICAgICAgICBjb25zdCBtYW50aXNzYURlY2ltYWxQbGFjZXMgPSBtYW50aXNzYS5pbmNsdWRlcyggJy4nICkgPyBtYW50aXNzYS5zcGxpdCggJy4nIClbIDEgXS5sZW5ndGggOiAwO1xuXG4gICAgICAgIC8vIFdlIGFkanVzdCB0aGUgbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIGJ5IHRoZSBleHBvbmVudCwgZS5nLiAnMS41ZTEnIGhhcyB6ZXJvIGRlY2ltYWwgcGxhY2VzLCBhbmRcbiAgICAgICAgLy8gJzEuNWUtMicgaGFzIHRocmVlLlxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoIG1hbnRpc3NhRGVjaW1hbFBsYWNlcyAtIGV4cG9uZW50LCAwICk7XG4gICAgICB9XG4gICAgICBlbHNlIHsgLy8gSGFuZGxlIGRlY2ltYWwgbm90YXRpb24uIFNpbmNlIHdlJ3JlIG5vdCBhbiBpbnRlZ2VyLCB3ZSBzaG91bGQgYmUgZ3VhcmFudGVlZCB0byBoYXZlIGEgZGVjaW1hbFxuICAgICAgICByZXR1cm4gc3RyaW5nLnNwbGl0KCAnLicgKVsgMSBdLmxlbmd0aDtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJvdW5kcyBhIHZhbHVlIHRvIGEgbXVsdGlwbGUgb2YgYSBzcGVjaWZpZWQgaW50ZXJ2YWwuXG4gICAqIEV4YW1wbGVzOlxuICAgKiByb3VuZFRvSW50ZXJ2YWwoIDAuNTY3LCAwLjAxICkgLT4gMC41N1xuICAgKiByb3VuZFRvSW50ZXJ2YWwoIDAuNTY3LCAwLjAyICkgLT4gMC41NlxuICAgKiByb3VuZFRvSW50ZXJ2YWwoIDUuNjcsIDAuNSApIC0+IDUuNVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gdmFsdWVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGludGVydmFsXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICByb3VuZFRvSW50ZXJ2YWwoIHZhbHVlLCBpbnRlcnZhbCApIHtcbiAgICByZXR1cm4gVXRpbHMudG9GaXhlZE51bWJlciggVXRpbHMucm91bmRTeW1tZXRyaWMoIHZhbHVlIC8gaW50ZXJ2YWwgKSAqIGludGVydmFsLFxuICAgICAgVXRpbHMubnVtYmVyT2ZEZWNpbWFsUGxhY2VzKCBpbnRlcnZhbCApICk7XG4gIH1cbn07XG5kb3QucmVnaXN0ZXIoICdVdGlscycsIFV0aWxzICk7XG5cbi8vIG1ha2UgdGhlc2UgYXZhaWxhYmxlIGluIHRoZSBtYWluIG5hbWVzcGFjZSBkaXJlY3RseSAoZm9yIG5vdylcbmRvdC5jbGFtcCA9IFV0aWxzLmNsYW1wO1xuZG90Lm1vZHVsb0JldHdlZW5Eb3duID0gVXRpbHMubW9kdWxvQmV0d2VlbkRvd247XG5kb3QubW9kdWxvQmV0d2VlblVwID0gVXRpbHMubW9kdWxvQmV0d2VlblVwO1xuZG90LnJhbmdlSW5jbHVzaXZlID0gVXRpbHMucmFuZ2VJbmNsdXNpdmU7XG5kb3QucmFuZ2VFeGNsdXNpdmUgPSBVdGlscy5yYW5nZUV4Y2x1c2l2ZTtcbmRvdC50b1JhZGlhbnMgPSBVdGlscy50b1JhZGlhbnM7XG5kb3QudG9EZWdyZWVzID0gVXRpbHMudG9EZWdyZWVzO1xuZG90LmxpbmVMaW5lSW50ZXJzZWN0aW9uID0gVXRpbHMubGluZUxpbmVJbnRlcnNlY3Rpb247XG5kb3QubGluZVNlZ21lbnRJbnRlcnNlY3Rpb24gPSBVdGlscy5saW5lU2VnbWVudEludGVyc2VjdGlvbjtcbmRvdC5zcGhlcmVSYXlJbnRlcnNlY3Rpb24gPSBVdGlscy5zcGhlcmVSYXlJbnRlcnNlY3Rpb247XG5kb3Quc29sdmVRdWFkcmF0aWNSb290c1JlYWwgPSBVdGlscy5zb2x2ZVF1YWRyYXRpY1Jvb3RzUmVhbDtcbmRvdC5zb2x2ZUN1YmljUm9vdHNSZWFsID0gVXRpbHMuc29sdmVDdWJpY1Jvb3RzUmVhbDtcbmRvdC5jdWJlUm9vdCA9IFV0aWxzLmN1YmVSb290O1xuZG90LmxpbmVhciA9IFV0aWxzLmxpbmVhcjtcbmRvdC5ib3hNdWxsZXJUcmFuc2Zvcm0gPSBVdGlscy5ib3hNdWxsZXJUcmFuc2Zvcm07XG5cbmV4cG9ydCBkZWZhdWx0IFV0aWxzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEdBQUcsTUFBTSxVQUFVO0FBQzFCLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBQ2xDLE9BQU9DLE9BQU8sTUFBTSxjQUFjOztBQUVsQztBQUNBLE1BQU1DLE9BQU8sR0FBR0MsTUFBTSxDQUFDQyxTQUFTO0FBQ2hDLE1BQU1DLE1BQU0sR0FBRyxDQUFDLEdBQUdDLElBQUksQ0FBQ0MsRUFBRTs7QUFFMUI7QUFDQSxJQUFJQyxRQUFRO0FBQ1osSUFBSUMsRUFBRTtBQUNOLElBQUlDLEVBQUU7QUFFTixNQUFNQyxLQUFLLEdBQUc7RUFDWjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxLQUFLQSxDQUFFQyxLQUFLLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFHO0lBQ3ZCLElBQUtGLEtBQUssR0FBR0MsR0FBRyxF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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/PatternStringProperty.js
// Copyright 2022-2023, University of Colorado Boulder

/**
 * A DerivedProperty that applies a string pattern (like StringUtils.fillIn). It has options for mapping values,
 * either with decimalPlaces or an arbitrary function so that there is just one Property set up for disposal.
 *
 * PatternStringPropertyTests.ts has many examples that may be useful!
 *
 * Basic usage can involve values as Properties or directly as values (both work):
 *
 * | const patternStringProperty = new TinyProperty( '{{valueA}} + {{valueB}}' );
 * | const property = new PatternStringProperty( patternStringProperty, {
 * |   valueA: 5,
 * |   valueB: new TinyProperty( 7 )
 * | } );
 * | property.value; // '5 + 7'
 *
 * Did your string use StringUtils.format? formatNames can be used to be compatible:
 *
 * | const property = new PatternStringProperty( new TinyProperty( '{0} + {1}' ), {
 * |   valueA: 5,
 * |   valueB: new TinyProperty( 7 )
 * | }, {
 * |   formatNames: [ 'valueA', 'valueB' ]
 * | } );
 * | property.value; // '5 + 7'
 *
 * Want to apply unit conversions or other formulas? Use maps
 *
 * | const gramsProperty = new TinyProperty( 2000 );
 * | new PatternStringProperty( new TinyProperty( '{{kilograms}} kg' ), {
 * |   kilograms: gramsProperty
 * | }, {
 * |   maps: {
 * |     kilograms: ( grams: number ) => grams / 1000
 * |   }
 * | } );
 * | property.value; // '2 kg'
 *
 * Using a numeric value, and want to show a certain number of decimal places? Use decimalPlaces!
 *
 * | const gramsProperty = new TinyProperty( 2143 );
 * | new PatternStringProperty( new TinyProperty( '{{kilograms}} kg' ), {
 * |   kilograms: gramsProperty
 * | }, {
 * |   maps: {
 * |     kilograms: ( grams: number ) => grams / 1000
 * |   },
 * |   decimalPlaces: 2
 * | } );
 * | property.value; // '2.14 kg'
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */









// The type of allowed values for a PatternStringProperty

// Shared here, since it will always be the same function
const stringify = value => `${value}`;
class PatternStringProperty extends DerivedProperty {
  constructor(patternProperty, values, providedOptions) {
    const options = optionize()({
      formatNames: [],
      decimalPlaces: null,
      phetioValueType: types_StringIO
    }, providedOptions);
    const dependencies = [patternProperty];
    const maps = {};
    const keys = Object.keys(values);
    keys.forEach(key => {
      const value = values[key]; // This is the declared type anyway, TypeScript is needing the cast
      if (value instanceof ReadOnlyProperty || value instanceof TinyProperty) {
        dependencies.push(value);
      }
      let stringNumberMap = stringify;

      // If we are applying decimal places, "prepend" that map before the others
      if (options.decimalPlaces !== null && (typeof options.decimalPlaces === 'number' || options.decimalPlaces[key] !== null)) {
        // It won't be null (we checked above for hasDecimalPlaces), asserted below
        const decimalPlaces = typeof options.decimalPlaces === 'number' || options.decimalPlaces === null ? options.decimalPlaces : options.decimalPlaces[key];
        assert && assert(decimalPlaces !== null);
        stringNumberMap = value => stringify(typeof value === 'number' ? js_Utils.toFixed(value, decimalPlaces) : value);
      }

      // If we are applying a map, "prepend" that map before the others, so that if it returns a number, we can
      // apply decimal places to it.
      if (options.maps && options.maps.hasOwnProperty(key)) {
        maps[key] = value => stringNumberMap(options.maps[key](value));
      } else {
        maps[key] = stringNumberMap;
      }
    });

    // @ts-expect-error We can't get our dependencies to dynamically type here fully
    super(dependencies, (...propertyValues) => {
      const getValue = value => {
        const index = dependencies.indexOf(value);

        // If it's a Property, it will be in our dependencies, and we'll look up the value from our DerivedProperty
        return index >= 0 ? propertyValues[index] : value;
      };
      let result = `${getValue(patternProperty)}`; // String cast (it won't be a number, due to TypeScript)

      // Handle StringUtils.format compatibility, turning {0} => formatName[ 0 ], {1} => formatName[ 1 ], etc.
      options.formatNames.forEach((formatName, index) => {
        result = result.replace(new RegExp(`\\{${index}\\}`, 'g'), `{{${formatName}}}`);
      });

      // {string[]} parse out the set of placeholders
      const placeholders = result.match(/\{\{[^{}]+\}\}/g) || [];

      // replace each placeholder with its corresponding value
      for (let i = 0; i < placeholders.length; i++) {
        const placeholder = placeholders[i];

        // key is the portion of the placeholder between the curly braces
        const key = placeholder.replace('{{', '').replace('}}', '');
        if (keys.includes(key)) {
          let value = getValue(values[key]);
          if (maps[key]) {
            value = maps[key](value);
          }
          result = result.replace(placeholder, `${value}`);
        }
      }
      return result;
    }, options);
  }
}
js_axon.register('PatternStringProperty', PatternStringProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJEZXJpdmVkUHJvcGVydHkiLCJSZWFkT25seVByb3BlcnR5IiwiVGlueVByb3BlcnR5IiwiVXRpbHMiLCJvcHRpb25pemUiLCJTdHJpbmdJTyIsImF4b24iLCJzdHJpbmdpZnkiLCJ2YWx1ZSIsIlBhdHRlcm5TdHJpbmdQcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwicGF0dGVyblByb3BlcnR5IiwidmFsdWVzIiwicHJvdmlkZWRPcHRpb25zIiwib3B0aW9ucyIsImZvcm1hdE5hbWVzIiwiZGVjaW1hbFBsYWNlcyIsInBoZXRpb1ZhbHVlVHlwZSIsImRlcGVuZGVuY2llcyIsIm1hcHMiLCJrZXlzIiwiT2JqZWN0IiwiZm9yRWFjaCIsImtleSIsInB1c2giLCJzdHJpbmdOdW1iZXJNYXAiLCJhc3NlcnQiLCJ0b0ZpeGVkIiwiaGFzT3duUHJvcGVydHkiLCJwcm9wZXJ0eVZhbHVlcyIsImdldFZhbHVlIiwiaW5kZXgiLCJpbmRleE9mIiwicmVzdWx0IiwiZm9ybWF0TmFtZSIsInJlcGxhY2UiLCJSZWdFeHAiLCJwbGFjZWhvbGRlcnMiLCJtYXRjaCIsImkiLCJsZW5ndGgiLCJwbGFjZWhvbGRlciIsImluY2x1ZGVzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJQYXR0ZXJuU3RyaW5nUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQSBEZXJpdmVkUHJvcGVydHkgdGhhdCBhcHBsaWVzIGEgc3RyaW5nIHBhdHRlcm4gKGxpa2UgU3RyaW5nVXRpbHMuZmlsbEluKS4gSXQgaGFzIG9wdGlvbnMgZm9yIG1hcHBpbmcgdmFsdWVzLFxuICogZWl0aGVyIHdpdGggZGVjaW1hbFBsYWNlcyBvciBhbiBhcmJpdHJhcnkgZnVuY3Rpb24gc28gdGhhdCB0aGVyZSBpcyBqdXN0IG9uZSBQcm9wZXJ0eSBzZXQgdXAgZm9yIGRpc3Bvc2FsLlxuICpcbiAqIFBhdHRlcm5TdHJpbmdQcm9wZXJ0eVRlc3RzLnRzIGhhcyBtYW55IGV4YW1wbGVzIHRoYXQgbWF5IGJlIHVzZWZ1bCFcbiAqXG4gKiBCYXNpYyB1c2FnZSBjYW4gaW52b2x2ZSB2YWx1ZXMgYXMgUHJvcGVydGllcyBvciBkaXJlY3RseSBhcyB2YWx1ZXMgKGJvdGggd29yayk6XG4gKlxuICogfCBjb25zdCBwYXR0ZXJuU3RyaW5nUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCAne3t2YWx1ZUF9fSArIHt7dmFsdWVCfX0nICk7XG4gKiB8IGNvbnN0IHByb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggcGF0dGVyblN0cmluZ1Byb3BlcnR5LCB7XG4gKiB8ICAgdmFsdWVBOiA1LFxuICogfCAgIHZhbHVlQjogbmV3IFRpbnlQcm9wZXJ0eSggNyApXG4gKiB8IH0gKTtcbiAqIHwgcHJvcGVydHkudmFsdWU7IC8vICc1ICsgNydcbiAqXG4gKiBEaWQgeW91ciBzdHJpbmcgdXNlIFN0cmluZ1V0aWxzLmZvcm1hdD8gZm9ybWF0TmFtZXMgY2FuIGJlIHVzZWQgdG8gYmUgY29tcGF0aWJsZTpcbiAqXG4gKiB8IGNvbnN0IHByb3BlcnR5ID0gbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggbmV3IFRpbnlQcm9wZXJ0eSggJ3swfSArIHsxfScgKSwge1xuICogfCAgIHZhbHVlQTogNSxcbiAqIHwgICB2YWx1ZUI6IG5ldyBUaW55UHJvcGVydHkoIDcgKVxuICogfCB9LCB7XG4gKiB8ICAgZm9ybWF0TmFtZXM6IFsgJ3ZhbHVlQScsICd2YWx1ZUInIF1cbiAqIHwgfSApO1xuICogfCBwcm9wZXJ0eS52YWx1ZTsgLy8gJzUgKyA3J1xuICpcbiAqIFdhbnQgdG8gYXBwbHkgdW5pdCBjb252ZXJzaW9ucyBvciBvdGhlciBmb3JtdWxhcz8gVXNlIG1hcHNcbiAqXG4gKiB8IGNvbnN0IGdyYW1zUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCAyMDAwICk7XG4gKiB8IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIG5ldyBUaW55UHJvcGVydHkoICd7e2tpbG9ncmFtc319IGtnJyApLCB7XG4gKiB8ICAga2lsb2dyYW1zOiBncmFtc1Byb3BlcnR5XG4gKiB8IH0sIHtcbiAqIHwgICBtYXBzOiB7XG4gKiB8ICAgICBraWxvZ3JhbXM6ICggZ3JhbXM6IG51bWJlciApID0+IGdyYW1zIC8gMTAwMFxuICogfCAgIH1cbiAqIHwgfSApO1xuICogfCBwcm9wZXJ0eS52YWx1ZTsgLy8gJzIga2cnXG4gKlxuICogVXNpbmcgYSBudW1lcmljIHZhbHVlLCBhbmQgd2FudCB0byBzaG93IGEgY2VydGFpbiBudW1iZXIgb2YgZGVjaW1hbCBwbGFjZXM/IFVzZSBkZWNpbWFsUGxhY2VzIVxuICpcbiAqIHwgY29uc3QgZ3JhbXNQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIDIxNDMgKTtcbiAqIHwgbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggbmV3IFRpbnlQcm9wZXJ0eSggJ3t7a2lsb2dyYW1zfX0ga2cnICksIHtcbiAqIHwgICBraWxvZ3JhbXM6IGdyYW1zUHJvcGVydHlcbiAqIHwgfSwge1xuICogfCAgIG1hcHM6IHtcbiAqIHwgICAgIGtpbG9ncmFtczogKCBncmFtczogbnVtYmVyICkgPT4gZ3JhbXMgLyAxMDAwXG4gKiB8ICAgfSxcbiAqIHwgICBkZWNpbWFsUGxhY2VzOiAyXG4gKiB8IH0gKTtcbiAqIHwgcHJvcGVydHkudmFsdWU7IC8vICcyLjE0IGtnJ1xuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgRGVyaXZlZFByb3BlcnR5LCB7IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnMgfSBmcm9tICcuL0Rlcml2ZWRQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuL1JlYWRPbmx5UHJvcGVydHkuanMnO1xuaW1wb3J0IFRpbnlQcm9wZXJ0eSBmcm9tICcuL1RpbnlQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgVFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi9UUmVhZE9ubHlQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi4vLi4vZG90L2pzL1V0aWxzLmpzJztcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcbmltcG9ydCBDb2xsYXBzZVByb3BlcnR5VmFsdWUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL3R5cGVzL0NvbGxhcHNlUHJvcGVydHlWYWx1ZS5qcyc7XG5pbXBvcnQgS2V5c01hdGNoaW5nIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9LZXlzTWF0Y2hpbmcuanMnO1xuaW1wb3J0IEtleXNOb3RNYXRjaGluZyBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvdHlwZXMvS2V5c05vdE1hdGNoaW5nLmpzJztcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcblxuLy8gVGhlIHR5cGUgb2YgYWxsb3dlZCB2YWx1ZXMgZm9yIGEgUGF0dGVyblN0cmluZ1Byb3BlcnR5XG50eXBlIFZhbHVlc1R5cGUgPSBSZWNvcmQ8c3RyaW5nLCBJbnRlbnRpb25hbEFueT47XG5cbi8vIFRoZSB0eXBlcyBvZiB2YWx1ZXMgdGhhdCB3ZSB3b24ndCByZXF1aXJlIG1hcHMgZm9yXG50eXBlIFN0cmluZ051bWJlck9yUHJvcGVydHkgPSBzdHJpbmcgfCBudW1iZXIgfCBUUmVhZE9ubHlQcm9wZXJ0eTxzdHJpbmc+IHwgVFJlYWRPbmx5UHJvcGVydHk8bnVtYmVyPiB8IFRSZWFkT25seVByb3BlcnR5PHN0cmluZyB8IG51bWJlcj47XG5cbi8vIFdlJ2xsIHJlcXVpcmUgbWFwcyBmb3IgdGhpbmdzIHRoYXQgYXJlbid0IHN0cmluZyB8IG51bWJlciwgb3IgUHJvcGVydHkgdHlwZXMgd2l0aCBvbmx5IHRob3NlIHZhbHVlc1xudHlwZSBNYXBzVHlwZTxWYWx1ZXMgZXh0ZW5kcyBWYWx1ZXNUeXBlPiA9IHtcbiAgW0tleSBpbiBLZXlzTWF0Y2hpbmc8VmFsdWVzLCBTdHJpbmdOdW1iZXJPclByb3BlcnR5Pl0/OiAoIHZhbHVlOiBDb2xsYXBzZVByb3BlcnR5VmFsdWU8VmFsdWVzW0tleV0+ICkgPT4gc3RyaW5nIHwgbnVtYmVyO1xufSAmIHtcbiAgW0tleSBpbiBLZXlzTm90TWF0Y2hpbmc8VmFsdWVzLCBTdHJpbmdOdW1iZXJPclByb3BlcnR5Pl06ICggdmFsdWU6IENvbGxhcHNlUHJvcGVydHlWYWx1ZTxWYWx1ZXNbS2V5XT4gKSA9PiBzdHJpbmcgfCBudW1iZXI7XG59O1xuXG50eXBlIE9wdGlvbmFsU2VsZk9wdGlvbnM8VmFsdWVzIGV4dGVuZHMgVmFsdWVzVHlwZT4gPSB7XG4gIC8vIEZvciBoYW5kbGluZyBwYXR0ZXJuIHN0cmluZ3MgZnJvbSBTdHJpbmdVdGlscy5mb3JtYXQsIHdoaWNoIHdpbGwgdHVybiB7MH0gPT4ge3tmb3JtYXROYW1lWyAwIF19fSxcbiAgLy8gezF9ID0+IHt7Zm9ybWF0TmFtZVsgMSBdfX0sIGV0Yy5cbiAgLy9cbiAgLy8gRm9yIGV4YW1wbGU6XG4gIC8vIHwgY29uc3Qgc3RyaW5nUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCAnVGVzdDogezB9JyApO1xuICAvLyB8IGNvbnN0IHZhbHVlUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCA1ICk7XG4gIC8vIHwgbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggc3RyaW5nUHJvcGVydHksIHsgdmFsdWU6IHZhbHVlUHJvcGVydHkgfSwgeyBmb3JtYXROYW1lczogWyAndmFsdWUnIF0gfSApO1xuICAvLyBXaWxsIGVmZmVjdGl2ZWx5IHJlcGxhY2UgezB9IGluIHRoZSBwYXR0ZXJuIHRvIHt7dmFsdWV9fSwgd2hpY2ggd2lsbCB0aGVuIGJlIHVzZWQgYXMgbm9ybWFsXG4gIGZvcm1hdE5hbWVzPzogc3RyaW5nW107XG5cbiAgLy8gUm91bmRzIG51bWVyaWMgdmFsdWVzIHRvIGEgZ2l2ZW4gbnVtYmVyIG9mIGRlY2ltYWwgcGxhY2VzIGlmIHByb3ZpZGVkLiBJZiBhIG51bWJlciBpcyBnaXZlbiwgaXQgd2lsbCBhcHBseSB0b1xuICAvLyBBTEwgbnVtZXJpYyB2YWx1ZXMgKG9mIHR5cGUgJ251bWJlcicpLiBBIHJlY29yZCBjYW4gYWxzbyBiZSBwcm92aWRlZCB0aGF0IHByb3ZpZGVzIGRlY2ltYWxQbGFjZXMgZm9yIHNwZWNpZmljXG4gIC8vIHZhbHVlcy5cbiAgLy9cbiAgLy8gRm9yIGV4YW1wbGU6XG4gIC8vIHwgY29uc3Qgc3RyaW5nUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCAnVGVzdDoge3t2YWx1ZX19JyApO1xuICAvLyB8IGNvbnN0IHZhbHVlUHJvcGVydHkgPSBuZXcgVGlueVByb3BlcnR5KCA1LjEyMzQ1ICk7XG4gIC8vIHwgbmV3IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eSggc3RyaW5nUHJvcGVydHksIHsgdmFsdWU6IHZhbHVlUHJvcGVydHkgfSwgeyBkZWNpbWFsUGxhY2VzOiAyIH0gKVxuICAvLyB3aWxsIHRha2UgdGhlIHZhbHVlICdUZXN0OiA1LjEyJy5cbiAgLy9cbiAgLy8gTXVsdGlwbGUgZGVjaW1hbCBwbGFjZXMgZXhhbXBsZTpcbiAgLy8gfCBjb25zdCBzdHJpbmdQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoICdUaGVyZSBhcmUge3tzcXVpcnJlbHN9fSBtaWxsaW9uIHNxdWlycmVscyB3aG8gZWF0IG1vcmUgdGhhbiB7e2Fjb3Juc319IGFjb3JucyBhIGRheScgKTtcbiAgLy8gfCBjb25zdCBzcXVpcnJlbHNQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIDUuMTIzNDUgKTtcbiAgLy8gfCBjb25zdCBhY29ybnNQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIDIwLjI1NCApO1xuICAvLyB8IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHN0cmluZ1Byb3BlcnR5LCB7XG4gIC8vIHwgICBzcXVpcnJlbHM6IHNxdWlycmVsc1Byb3BlcnR5LFxuICAvLyB8ICAgYWNvcm5zOiBhY29ybnNQcm9wZXJ0eVxuICAvLyB8IH0sIHtcbiAgLy8gfCAgIGRlY2ltYWxQbGFjZXM6IHtcbiAgLy8gfCAgICAgc3F1aXJyZWxzOiAwLFxuICAvLyB8ICAgICBhY29ybnM6IDJcbiAgLy8gfCAgIH1cbiAgLy8gfCB9IClcbiAgLy9cbiAgLy8gTk9URTogUHJvdmlkZSBudWxsIGlmIGRlY2ltYWwgcGxhY2VzIHNob3VsZCBub3QgYmUgdXNlZCBmb3IgYSBnaXZlbiB2YWx1ZVxuICBkZWNpbWFsUGxhY2VzPzogbnVtYmVyIHwgbnVsbCB8IFJlY29yZDxrZXlvZiBWYWx1ZXMsIG51bWJlciB8IG51bGw+O1xufTtcblxudHlwZSBTZWxmT3B0aW9uczxWYWx1ZXMgZXh0ZW5kcyBWYWx1ZXNUeXBlPiA9IE9wdGlvbmFsU2VsZk9wdGlvbnM8VmFsdWVzPiAmXG4gICggS2V5c05vdE1hdGNoaW5nPFZhbHVlcywgU3RyaW5nTnVtYmVyT3JQcm9wZXJ0eT4gZXh0ZW5kcyBuZXZlciA/IHtcbiAgICAvLyBNYXBzIHRoZSBpbnB1dCBzdHJpbmcvbnVtZXJpYyB2YWx1ZXMgKGRlcGVuZGluZyBvbiB0aGUgUHJvcGVydHkgdHlwZSkgdG8gYSBzdHJpbmcgb3IgbnVtYmVyLiBEZWNpbWFsIHBsYWNlcyB3aWxsIGJlXG4gICAgLy8gYXBwbGllZCBhZnRlciB0aGlzIHN0ZXAgKGlmIGl0IHJldHVybnMgYSBudW1iZXIpLlxuICAgIC8vXG4gICAgLy8gRm9yIGV4YW1wbGU6XG4gICAgLy8gfCBjb25zdCBzdHJpbmdQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoICd7e2dyYW1zfX0gZ3JhbXMnICk7XG4gICAgLy8gfCBjb25zdCBraWxvZ3JhbXNQcm9wZXJ0eSA9IG5ldyBUaW55UHJvcGVydHkoIDUuMTIgKTtcbiAgICAvLyB8IG5ldyBQYXR0ZXJuU3RyaW5nUHJvcGVydHkoIHN0cmluZ1Byb3BlcnR5LCB7IHByZXBvc2l0aW9uOiBraWxvZ3JhbXNQcm9wZXJ0eSB9LCB7XG4gICAgLy8gfCAgIG1hcHM6IHsgcHJlcG9zaXRpb246IGtpbG9ncmFtcyA9PiBraWxvZ3JhbXMgLyAxMDAwIH1cbiAgICAvLyB8IH0gKTtcbiAgICBtYXBzPzogTWFwc1R5cGU8VmFsdWVzPjtcbiAgfSA6IHtcbiAgICAgIC8vIE1ha2UgdGhpcyByZXF1aXJlZCBpZiBzb21lb25lJ3MgcGFzc2luZyBpbiBzb21ldGhpbmcgdGhhdCBpcyBvZiBhIG5vbi1zdHJpbmcvbnVtYmVyIHR5cGVcbiAgICAgIG1hcHM6IE1hcHNUeXBlPFZhbHVlcz47XG4gICAgfSApO1xuXG50eXBlIFN1cGVyT3B0aW9ucyA9IERlcml2ZWRQcm9wZXJ0eU9wdGlvbnM8c3RyaW5nPjtcbmV4cG9ydCB0eXBlIFBhdHRlcm5TdHJpbmdQcm9wZXJ0eU9wdGlvbnM8VmFsdWVzIGV4dGVuZHMgVmFsdWVzVHlwZT4gPSBTZWxmT3B0aW9uczxWYWx1ZXM+ICYgU3VwZXJPcHRpb25zO1xuXG4vLyBTaGFyZWQgaGVyZSwgc2luY2UgaXQgd2lsbCBhbHdheXMgYmUgdGhlIHNhbWUgZnVuY3Rpb25cbmNvbnN0IHN0cmluZ2lmeSA9ICggdmFsdWU6IHN0cmluZyB8IG51bWJlciApOiBzdHJpbmcgPT4gYCR7dmFsdWV9YDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGF0dGVyblN0cmluZ1Byb3BlcnR5PFZhbHVlcyBleHRlbmRzIFZhbHVlc1R5cGU+IGV4dGVuZHMgRGVyaXZlZFByb3BlcnR5PHN0cmluZyxcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bixcbiAgdW5rbm93bj4ge1xuICBwdWJsaWMgY29uc3RydWN0b3IoIHBhdHRlcm5Qcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8c3RyaW5nPiwgdmFsdWVzOiBWYWx1ZXMsIHByb3ZpZGVkT3B0aW9ucz86IFBhdHRlcm5TdHJpbmdQcm9wZXJ0eU9wdGlvbnM8VmFsdWVzPiApIHtcblxuICAgIGNvbnN0IG9wdGlvbnMgPSBvcHRpb25pemU8T3B0aW9uYWxTZWxmT3B0aW9uczxWYWx1ZXM+ICYgeyBtYXBzPzogTWFwc1R5cGU8VmFsdWVzPiB9LCBPcHRpb25hbFNlbGZPcHRpb25zPFZhbHVlcz4sIFN1cGVyT3B0aW9ucz4oKSgge1xuICAgICAgZm9ybWF0TmFtZXM6IFtdLFxuXG4gICAgICBkZWNpbWFsUGxhY2VzOiBudWxsLFxuXG4gICAgICBwaGV0aW9WYWx1ZVR5cGU6IFN0cmluZ0lPXG4gICAgfSwgcHJvdmlkZWRPcHRpb25zICk7XG5cbiAgICBjb25zdCBkZXBlbmRlbmNpZXM6IFRSZWFkT25seVByb3BlcnR5PEludGVudGlvbmFsQW55PltdID0gWyBwYXR0ZXJuUHJvcGVydHkgXTtcbiAgICBjb25zdCBtYXBzOiBSZWNvcmQ8a2V5b2YgVmFsdWVzLCAoIHZhbHVlOiBJbnRlbnRpb25hbEFueSApID0+IHN0cmluZz4gPSB7fSBhcyBJbnRlbnRpb25hbEFueTtcblxuICAgIGNvbnN0IGtleXM6ICgga2V5b2YgVmFsdWVzIClbXSA9IE9iamVjdC5rZXlzKCB2YWx1ZXMgKTtcbiAgICBrZXlzLmZvckVhY2goIGtleSA9PiB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHZhbHVlc1sga2V5IF0gYXMgSW50ZW50aW9uYWxBbnk7IC8vIFRoaXMgaXMgdGhlIGRlY2xhcmVkIHR5cGUgYW55d2F5LCBUeXBlU2NyaXB0IGlzIG5lZWRpbmcgdGhlIGNhc3RcbiAgICAgIGlmICggdmFsdWUgaW5zdGFuY2VvZiBSZWFkT25seVByb3BlcnR5IHx8IHZhbHVlIGluc3RhbmNlb2YgVGlueVByb3BlcnR5ICkge1xuICAgICAgICBkZXBlbmRlbmNpZXMucHVzaCggdmFsdWUgKTtcbiAgICAgIH1cblxuICAgICAgbGV0IHN0cmluZ051bWJlck1hcDogKCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyICkgPT4gc3RyaW5nID0gc3RyaW5naWZ5O1xuXG4gICAgICAvLyBJZiB3ZSBhcmUgYXBwbHlpbmcgZGVjaW1hbCBwbGFjZXMsIFwicHJlcGVuZFwiIHRoYXQgbWFwIGJlZm9yZSB0aGUgb3RoZXJzXG4gICAgICBpZiAoIG9wdGlvbnMuZGVjaW1hbFBsYWNlcyAhPT0gbnVsbCAmJiAoIHR5cGVvZiBvcHRpb25zLmRlY2ltYWxQbGFjZXMgPT09ICdudW1iZXInIHx8IG9wdGlvbnMuZGVjaW1hbFBsYWNlc1sga2V5IF0gIT09IG51bGwgKSApIHtcbiAgICAgICAgLy8gSXQgd29uJ3QgYmUgbnVsbCAod2UgY2hlY2tlZCBhYm92ZSBmb3IgaGFzRGVjaW1hbFBsYWNlcyksIGFzc2VydGVkIGJlbG93XG4gICAgICAgIGNvbnN0IGRlY2ltYWxQbGFjZXM6IG51bWJlciA9ICggdHlwZW9mIG9wdGlvbnMuZGVjaW1hbFBsYWNlcyA9PT0gJ251bWJlcicgfHwgb3B0aW9ucy5kZWNpbWFsUGxhY2VzID09PSBudWxsIClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBvcHRpb25zLmRlY2ltYWxQbGFjZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBvcHRpb25zLmRlY2ltYWxQbGFjZXNbIGtleSBdITtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggZGVjaW1hbFBsYWNlcyAhPT0gbnVsbCApO1xuXG4gICAgICAgIHN0cmluZ051bWJlck1hcCA9ICggdmFsdWU6IHN0cmluZyB8IG51bWJlciApID0+IHN0cmluZ2lmeSggdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyA/IFV0aWxzLnRvRml4ZWQoIHZhbHVlLCBkZWNpbWFsUGxhY2VzICkgOiB2YWx1ZSApO1xuICAgICAgfVxuXG4gICAgICAvLyBJZiB3ZSBhcmUgYXBwbHlpbmcgYSBtYXAsIFwicHJlcGVuZFwiIHRoYXQgbWFwIGJlZm9yZSB0aGUgb3RoZXJzLCBzbyB0aGF0IGlmIGl0IHJldHVybnMgYSBudW1iZXIsIHdlIGNhblxuICAgICAgLy8gYXBwbHkgZGVjaW1hbCBwbGFjZXMgdG8gaXQuXG4gICAgICBpZiAoIG9wdGlvbnMubWFwcyAmJiBvcHRpb25zLm1hcHMuaGFzT3duUHJvcGVydHkoIGtleSApICkge1xuICAgICAgICBtYXBzWyBrZXkgXSA9IHZhbHVlID0+IHN0cmluZ051bWJlck1hcCggb3B0aW9ucy5tYXBzIVsga2V5IF0oIHZhbHVlICkgKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBtYXBzWyBrZXkgXSA9IHN0cmluZ051bWJlck1hcDtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICAvLyBAdHMtZXhwZWN0LWVycm9yIFdlIGNhbid0IGdldCBvdXIgZGVwZW5kZW5jaWVzIHRvIGR5bmFtaWNhbGx5IHR5cGUgaGVyZSBmdWxseVxuICAgIHN1cGVyKCBkZXBlbmRlbmNpZXMsICggLi4ucHJvcGVydHlWYWx1ZXM6IHVua25vd25bXSApID0+IHtcblxuICAgICAgY29uc3QgZ2V0VmFsdWUgPSAoIHZhbHVlOiB1bmtub3duICk6IHVua25vd24gPT4ge1xuICAgICAgICBjb25zdCBpbmRleCA9IGRlcGVuZGVuY2llcy5pbmRleE9mKCB2YWx1ZSBhcyBJbnRlbnRpb25hbEFueSApO1xuXG4gICAgICAgIC8vIElmIGl0J3MgYSBQcm9wZXJ0eSwgaXQgd2lsbCBiZSBpbiBvdXIgZGVwZW5kZW5jaWVzLCBhbmQgd2UnbGwgbG9vayB1cCB0aGUgdmFsdWUgZnJvbSBvdXIgRGVyaXZlZFByb3BlcnR5XG4gICAgICAgIHJldHVybiBpbmRleCA+PSAwID8gcHJvcGVydHlWYWx1ZXNbIGluZGV4IF0gOiB2YWx1ZTtcbiAgICAgIH07XG5cbiAgICAgIGxldCByZXN1bHQgPSBgJHtnZXRWYWx1ZSggcGF0dGVyblByb3BlcnR5ICl9YDsgLy8gU3RyaW5nIGNhc3QgKGl0IHdvbid0IGJlIGEgbnVtYmVyLCBkdWUgdG8gVHlwZVNjcmlwdClcblxuICAgICAgLy8gSGFuZGxlIFN0cmluZ1V0aWxzLmZvcm1hdCBjb21wYXRpYmlsaXR5LCB0dXJuaW5nIHswfSA9PiBmb3JtYXROYW1lWyAwIF0sIHsxfSA9PiBmb3JtYXROYW1lWyAxIF0sIGV0Yy5cbiAgICAgIG9wdGlvbnMuZm9ybWF0TmFtZXMuZm9yRWFjaCggKCBmb3JtYXROYW1lOiBzdHJpbmcsIGluZGV4OiBudW1iZXIgKSA9PiB7XG4gICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKCBuZXcgUmVnRXhwKCBgXFxcXHske2luZGV4fVxcXFx9YCwgJ2cnICksIGB7eyR7Zm9ybWF0TmFtZX19fWAgKTtcbiAgICAgIH0gKTtcblxuICAgICAgLy8ge3N0cmluZ1tdfSBwYXJzZSBvdXQgdGhlIHNldCBvZiBwbGFjZWhvbGRlcnNcbiAgICAgIGNvbnN0IHBsYWNlaG9sZGVycyA9IHJlc3VsdC5tYXRjaCggL1xce1xce1tee31dK1xcfVxcfS9nICkgfHwgW107XG5cbiAgICAgIC8vIHJlcGxhY2UgZWFjaCBwbGFjZWhvbGRlciB3aXRoIGl0cyBjb3JyZXNwb25kaW5nIHZhbHVlXG4gICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBwbGFjZWhvbGRlcnMubGVuZ3RoOyBpKysgKSB7XG4gICAgICAgIGNvbnN0IHBsYWNlaG9sZGVyID0gcGxhY2Vob2xkZXJzWyBpIF07XG5cbiAgICAgICAgLy8ga2V5IGlzIHRoZSBwb3J0aW9uIG9mIHRoZSBwbGFjZWhvbGRlciBiZXR3ZWVuIHRoZSBjdXJseSBicmFjZXNcbiAgICAgICAgY29uc3Qga2V5ID0gcGxhY2Vob2xkZXIucmVwbGFjZSggJ3t7JywgJycgKS5yZXBsYWNlKCAnfX0nLCAnJyApO1xuICAgICAgICBpZiAoIGtleXMuaW5jbHVkZXMoIGtleSApICkge1xuICAgICAgICAgIGxldCB2YWx1ZSA9IGdldFZhbHVlKCB2YWx1ZXNbIGtleSBdICk7XG4gICAgICAgICAgaWYgKCBtYXBzWyBrZXkgXSApIHtcbiAgICAgICAgICAgIHZhbHVlID0gbWFwc1sga2V5IF0oIHZhbHVlICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJlc3VsdCA9IHJlc3VsdC5yZXBsYWNlKCBwbGFjZWhvbGRlciwgYCR7dmFsdWV9YCApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSwgb3B0aW9ucyApO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdQYXR0ZXJuU3RyaW5nUHJvcGVydHknLCBQYXR0ZXJuU3RyaW5nUHJvcGVydHkgKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsZUFBZSxNQUFrQyxzQkFBc0I7QUFDOUUsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQ3BELE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7QUFFNUMsT0FBT0MsS0FBSyxNQUFNLHVCQUF1QjtBQUN6QyxPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBS3ZELE9BQU9DLFFBQVEsTUFBTSxtQ0FBbUM7QUFDeEQsT0FBT0MsSUFBSSxNQUFNLFdBQVc7O0FBRTVCOztBQXdFQTtBQUNBLE1BQU1DLFNBQVMsR0FBS0MsS0FBc0IsSUFBZSxHQUFFQSxLQUFNLEVBQUM7QUFFbEUsZUFBZSxNQUFNQyxxQkFBcUIsU0FBb0NU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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/StringProperty.js
// Copyright 2016-2022, University of Colorado Boulder

/**
 * StringProperty is a Property whose value is a string.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Chris Malley (PixelZoom, Inc.)
 */





class StringProperty extends Property {
  constructor(value, providedOptions) {
    // client cannot specify superclass options that are controlled by StringProperty
    if (providedOptions) {
      assert && assert(!providedOptions.hasOwnProperty('valueType'), 'StringProperty sets valueType');
      assert && assert(!providedOptions.hasOwnProperty('phetioType'), 'StringProperty sets phetioType');
    }

    // Fill in superclass options that are controlled by StringProperty.
    const options = optionize()({
      valueType: 'string',
      phetioValueType: types_StringIO
    }, providedOptions);
    super(value, options);
  }
}
js_axon.register('StringProperty', StringProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJvcHRpb25pemUiLCJTdHJpbmdJTyIsImF4b24iLCJQcm9wZXJ0eSIsIlN0cmluZ1Byb3BlcnR5IiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsInByb3ZpZGVkT3B0aW9ucyIsImFzc2VydCIsImhhc093blByb3BlcnR5Iiwib3B0aW9ucyIsInZhbHVlVHlwZSIsInBoZXRpb1ZhbHVlVHlwZSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiU3RyaW5nUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTYtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogU3RyaW5nUHJvcGVydHkgaXMgYSBQcm9wZXJ0eSB3aG9zZSB2YWx1ZSBpcyBhIHN0cmluZy5cbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcbiAqL1xuXG5pbXBvcnQgb3B0aW9uaXplLCB7IEVtcHR5U2VsZk9wdGlvbnMgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvb3B0aW9uaXplLmpzJztcbmltcG9ydCBTdHJpY3RPbWl0IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9TdHJpY3RPbWl0LmpzJztcbmltcG9ydCBTdHJpbmdJTyBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvU3RyaW5nSU8uanMnO1xuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBQcm9wZXJ0eSwgeyBQcm9wZXJ0eU9wdGlvbnMgfSBmcm9tICcuL1Byb3BlcnR5LmpzJztcblxudHlwZSBTZWxmT3B0aW9ucyA9IEVtcHR5U2VsZk9wdGlvbnM7XG5cbmV4cG9ydCB0eXBlIFN0cmluZ1Byb3BlcnR5T3B0aW9ucyA9IFNlbGZPcHRpb25zICYgU3RyaWN0T21pdDxQcm9wZXJ0eU9wdGlvbnM8c3RyaW5nPiwgJ3ZhbHVlVHlwZScgfCAncGhldGlvVmFsdWVUeXBlJz47XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFN0cmluZ1Byb3BlcnR5IGV4dGVuZHMgUHJvcGVydHk8c3RyaW5nPiB7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCB2YWx1ZTogc3RyaW5nLCBwcm92aWRlZE9wdGlvbnM/OiBTdHJpbmdQcm9wZXJ0eU9wdGlvbnMgKSB7XG5cbiAgICAvLyBjbGllbnQgY2Fubm90IHNwZWNpZnkgc3VwZXJjbGFzcyBvcHRpb25zIHRoYXQgYXJlIGNvbnRyb2xsZWQgYnkgU3RyaW5nUHJvcGVydHlcbiAgICBpZiAoIHByb3ZpZGVkT3B0aW9ucyApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoICFwcm92aWRlZE9wdGlvbnMuaGFzT3duUHJvcGVydHkoICd2YWx1ZVR5cGUnICksICdTdHJpbmdQcm9wZXJ0eSBzZXRzIHZhbHVlVHlwZScgKTtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoICFwcm92aWRlZE9wdGlvbnMuaGFzT3duUHJvcGVydHkoICdwaGV0aW9UeXBlJyApLCAnU3RyaW5nUHJvcGVydHkgc2V0cyBwaGV0aW9UeXBlJyApO1xuICAgIH1cblxuICAgIC8vIEZpbGwgaW4gc3VwZXJjbGFzcyBvcHRpb25zIHRoYXQgYXJlIGNvbnRyb2xsZWQgYnkgU3RyaW5nUHJvcGVydHkuXG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxTdHJpbmdQcm9wZXJ0eU9wdGlvbnMsIFNlbGZPcHRpb25zLCBQcm9wZXJ0eU9wdGlvbnM8c3RyaW5nPj4oKSgge1xuICAgICAgdmFsdWVUeXBlOiAnc3RyaW5nJyxcbiAgICAgIHBoZXRpb1ZhbHVlVHlwZTogU3RyaW5nSU9cbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKTtcblxuICAgIHN1cGVyKCB2YWx1ZSwgb3B0aW9ucyApO1xuICB9XG59XG5cbmF4b24ucmVnaXN0ZXIoICdTdHJpbmdQcm9wZXJ0eScsIFN0cmluZ1Byb3BlcnR5ICk7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsU0FBUyxNQUE0QixpQ0FBaUM7QUFFN0UsT0FBT0MsUUFBUSxNQUFNLG1DQUFtQztBQUN4RCxPQUFPQyxJQUFJLE1BQU0sV0FBVztBQUM1QixPQUFPQyxRQUFRLE1BQTJCLGVBQWU7QUFNekQsZUFBZSxNQUFNQyxjQUFjLFNBQVNELFFBQVEsQ0FBUztFQUVwREUsV0FBV0EsQ0FBRUMsS0FBYSxFQUFFQyxlQUF1QyxFQUFHO0lBRTNFO0lBQ0EsSUFBS0EsZUFBZSxFQUFHO01BQ3JCQyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxDQUFDRCxlQUFlLENBQUNFLGNBQWMsQ0FBRSxXQUFXLENBQUUsRUFBRSwrQkFBK0IsQ0FBRTtNQUNuR0QsTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQ0QsZUFBZSxDQUFDRSxjQUFjLENBQUUsWUFBWSxDQUFFLEVBQUUsZ0NBQWdDLENBQUU7SUFDdkc7O0lBRUE7SUFDQSxNQUFNQyxPQUFPLEdBQUdWLFNBQVMsRUFBK0QsQ0FBRTtNQUN4RlcsU0FBUyxFQUFFLFFBQVE7TUFDbkJDLGVBQWUsRUFBRVg7SUFDbkIsQ0FBQyxFQUFFTSxlQUFlLENBQUU7SUFFcEIsS0FBSyxDQUFFRCxLQUFLLEVBQUVJLE9BQU8sQ0FBRTtFQUN6QjtBQUNGO0FBRUFSLElBQUksQ0FBQ1csUUFBUSxDQUFFLGdCQUFnQixFQUFFVCxjQUFjLENBQUUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/TReadOnlyProperty.js
// Copyright 2021-2022, University of Colorado Boulder

/**
 * A simple read-only Property/TinyProperty-like interface
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



function isTReadOnlyProperty(something) {
  return something instanceof ReadOnlyProperty || something instanceof TinyProperty;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFkT25seVByb3BlcnR5IiwiVGlueVByb3BlcnR5IiwiaXNUUmVhZE9ubHlQcm9wZXJ0eSIsInNvbWV0aGluZyJdLCJzb3VyY2VzIjpbIlRSZWFkT25seVByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEEgc2ltcGxlIHJlYWQtb25seSBQcm9wZXJ0eS9UaW55UHJvcGVydHktbGlrZSBpbnRlcmZhY2VcbiAqXG4gKiBAYXV0aG9yIFNhbSBSZWlkIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBSZWFkT25seVByb3BlcnR5LCB7IExpbmtPcHRpb25zIH0gZnJvbSAnLi9SZWFkT25seVByb3BlcnR5LmpzJztcbmltcG9ydCBUaW55UHJvcGVydHkgZnJvbSAnLi9UaW55UHJvcGVydHkuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5cbmV4cG9ydCB0eXBlIFByb3BlcnR5TGlua0xpc3RlbmVyPFQ+ID0gKCB2YWx1ZTogVCwgb2xkVmFsdWU6IFQgfCBudWxsLCB0aW55UHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PFQ+ICkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIFByb3BlcnR5TGF6eUxpbmtMaXN0ZW5lcjxUPiA9ICggdmFsdWU6IFQsIG9sZFZhbHVlOiBULCB0aW55UHJvcGVydHk6IFRSZWFkT25seVByb3BlcnR5PFQ+ICkgPT4gdm9pZDtcbmV4cG9ydCB0eXBlIFByb3BlcnR5TGlzdGVuZXI8VD4gPSBQcm9wZXJ0eUxpbmtMaXN0ZW5lcjxUPiB8IFByb3BlcnR5TGF6eUxpbmtMaXN0ZW5lcjxUPjtcblxuLy8gU2VlIGNvbW1lbnRzIGluIFByb3BlcnR5LnRzIC8gVGlueVByb3BlcnR5LnRzXG50eXBlIFRSZWFkT25seVByb3BlcnR5PFQ+ID0ge1xuICBnZXQ6ICgpID0+IFQ7XG4gIGdldCB2YWx1ZSgpOiBUO1xuICBhcmVWYWx1ZXNFcXVhbCggYTogVCwgYjogVCApOiBib29sZWFuO1xuICBsaW5rKCBsaXN0ZW5lcjogUHJvcGVydHlMaW5rTGlzdGVuZXI8VD4sIG9wdGlvbnM/OiBMaW5rT3B0aW9ucyApOiB2b2lkO1xuICBsYXp5TGluayggbGlzdGVuZXI6IFByb3BlcnR5TGF6eUxpbmtMaXN0ZW5lcjxUPiwgb3B0aW9ucz86IExpbmtPcHRpb25zICk6IHZvaWQ7XG4gIGxpbmtBdHRyaWJ1dGU8QXR0ciBleHRlbmRzIHN0cmluZz4oIG9iamVjdDogeyBba2V5IGluIEF0dHJdOiBUIH0sIGF0dHJpYnV0ZU5hbWU6IEF0dHIgKTogdm9pZDtcbiAgdW5saW5rKCBsaXN0ZW5lcjogUHJvcGVydHlMaXN0ZW5lcjxUPiApOiB2b2lkO1xuICB1bmxpbmtBbGwoKTogdm9pZDtcbiAgaGFzTGlzdGVuZXIoIGxpc3RlbmVyOiBQcm9wZXJ0eUxpbmtMaXN0ZW5lcjxUPiApOiBib29sZWFuO1xuICBpc1NldHRhYmxlKCk6IGJvb2xlYW47XG4gIGRpc3Bvc2UoKTogdm9pZDtcblxuICBpc0Rpc3Bvc2VkPzogYm9vbGVhbjtcbiAgdG9TdHJpbmcoKTogc3RyaW5nO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVFJlYWRPbmx5UHJvcGVydHkoIHNvbWV0aGluZzogSW50ZW50aW9uYWxBbnkgKTogc29tZXRoaW5nIGlzIFRSZWFkT25seVByb3BlcnR5PHVua25vd24+IHtcbiAgcmV0dXJuIHNvbWV0aGluZyBpbnN0YW5jZW9mIFJlYWRPbmx5UHJvcGVydHkgfHwgc29tZXRoaW5nIGluc3RhbmNlb2YgVGlueVByb3BlcnR5O1xufVxuXG5leHBvcnQgZGVmYXVsdCBUUmVhZE9ubHlQcm9wZXJ0eTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGdCQUFnQixNQUF1Qix1QkFBdUI7QUFDckUsT0FBT0MsWUFBWSxNQUFNLG1CQUFtQjtBQXlCNUMsT0FBTyxTQUFTQyxtQkFBbUJBLENBQUVDLFNBQXlCLEVBQTRDO0VBQ3hHLE9BQU9BLFNBQVMsWUFBWUgsZ0JBQWdCLElBQUlHLFNBQVMsWUFBWUYsWUFBWTtBQUNuRiJ9
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/TinyForwardingProperty.js
// Copyright 2020-2022, University of Colorado Boulder

/**
 * A lightweight version of Property (that satisfies some of the interface), meant for high-performance applications
 * where validation, phet-io support and other things are not needed. This includes additional logic for conditionally
 * forwarding to/from another Property.
 *
 * Please note that TinyForwardingProperty exclusively supports settable Properties
 * via its TypeScript implementation. If you want to use a read-only Property as the target, please type cast as settable
 * and use runtime assertions to ensure that the target (or this forwarding Property) are not set. See examples like
 * Node.setVisibleProperty.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Michael Kauzmann (PhET Interactive Simulations)
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */






class TinyForwardingProperty extends TinyProperty {
  // Set in setTargetProperty()

  // Set lazily in setTargetProperty()

  // TinyProperty is not instrumented for PhET-iO, so when a Node is instrumented, by default, an instrumented
  // `Property` can be forwarded to. This field stores the default instrumented Property when
  // targetPropertyInstrumented is true. - Public for NodeTests

  // when true, automatically set up a PhET-iO instrumented forwarded Property for this TinyProperty, see
  // this.initializePhetioObject() for usage.

  // Guard against double initialization

  constructor(value, targetPropertyInstrumented, onBeforeNotify) {
    super(value, onBeforeNotify);
    if (targetPropertyInstrumented) {
      this.targetPropertyInstrumented = targetPropertyInstrumented;
    }
    if (assert) {
      this.phetioInitialized = false;
    }
  }

  // API support for setting a Property|ValueType onto the forwarding Property
  setValueOrTargetProperty(node, tandemName, newValueOrTargetProperty) {
    if (isTReadOnlyProperty(newValueOrTargetProperty)) {
      // As a new Property
      this.setTargetProperty(node, tandemName, newValueOrTargetProperty);
    } else {
      // as a ValueType
      const oldValue = this.get();
      this.clearTargetProperty();
      assert && assert(!this.targetProperty, 'just cleared');

      // If we're switching away from a targetProperty, prefer no notification (so set our value to the last value)
      this.setPropertyValue(newValueOrTargetProperty);

      // Changing forwarding target COULD change the value, so send notifications if this is the case.
      if (!this.areValuesEqual(oldValue, newValueOrTargetProperty)) {
        this.notifyListeners(oldValue);
      }
    }
  }

  /**
   * Sets (or unsets if `null` is provided) the Property that we use for forwarding changes.
   *
   * @param node - The container of TinyForwardingProperty which supports updateLinkedElementForProperty()
   * @param tandemName - null if the Property does not support PhET-iO instrumentation
   * @param newTargetProperty - null to "unset" forwarding.
   * @returns the passed in Node, for chaining.
   */
  setTargetProperty(node, tandemName, newTargetProperty) {
    assert && node && tandemName === null && this.targetPropertyInstrumented && assert(!node.isPhetioInstrumented(), 'tandemName must be provided for instrumented Nodes');

    // no-op if we are already forwarding to that property OR if we still aren't forwarding
    if (this.targetProperty === newTargetProperty) {
      return node; // for chaining
    }

    const currentForwardingPropertyInstrumented = this.targetProperty && this.targetProperty instanceof ReadOnlyProperty && this.targetProperty.isPhetioInstrumented();
    assert && currentForwardingPropertyInstrumented && assert(newTargetProperty && newTargetProperty instanceof ReadOnlyProperty && newTargetProperty.isPhetioInstrumented(), 'Cannot set swap out a PhET-iO instrumented targetProperty for an uninstrumented one');

    // We need this information eagerly for later on in the function
    const previousTarget = this.targetProperty;

    // If we had the "default instrumented" Property, we'll remove that and then link our new Property. Guard on the fact
    // that ownedPhetioProperty is added via this exact method, see this.initializePhetio() for details
    // Do this before adding a PhET-iO LinkedElement because ownedPhetioProperty has the same phetioID as the LinkedElement
    if (this.ownedPhetioProperty && newTargetProperty !== this.ownedPhetioProperty) {
      this.disposeOwnedPhetioProperty();
    }
    node && tandemName !== null && node.updateLinkedElementForProperty(tandemName, previousTarget, newTargetProperty);
    const oldValue = this.get();
    this.clearTargetProperty();
    this.targetProperty = newTargetProperty;
    if (this.targetProperty) {
      assert && assert(this.forwardingListener, 'forwardingListener is not set yet');
      this.targetProperty.lazyLink(this.forwardingListener);
      this.setPropertyValue(this.targetProperty.value);
    } else {
      // If we're switching away from a targetProperty, prefer no notification (so set our value to the last value)
      this.setPropertyValue(oldValue);
    }

    // Changing forwarding target COULD change the value, so send notifications if this is the case.
    if (!this.areValuesEqual(oldValue, this.get())) {
      this.notifyListeners(oldValue);
    }
    return node; // for chaining
  }

  clearTargetProperty() {
    // Lazily set this value, it will be added as a listener to any targetProperty we have.
    this.forwardingListener = this.forwardingListener || this.onTargetPropertyChange.bind(this);
    if (this.targetProperty) {
      this.targetProperty.unlink(this.forwardingListener);
    }
    this.targetProperty = null;
  }

  /**
   * Notify this Property's listeners when the targetProperty changes.
   * For performance, keep this listener on the prototype.
   */
  onTargetPropertyChange(value) {
    super.set(value);
  }

  /**
   * Sets the value and notifies listeners, unless deferred or disposed. You can also use the es5 getter
   * (property.value) but this means is provided for inner loops or internal code that must be fast. If the value
   * hasn't changed, this is a no-op.
   */
  set(value) {
    if (this.targetProperty) {
      assert && assert(this.targetProperty.isSettable(), 'targetProperty must be settable');
      this.targetProperty.set(value);
    } else {
      super.set(value);
    }
    return this;
  }

  /**
   * Use this to automatically create a forwarded, PhET-iO instrumented Property owned by this TinyForwardingProperty.
   */
  setTargetPropertyInstrumented(targetPropertyInstrumented, node) {
    // See Node.initializePhetioObject for more details on this assertion
    assert && assert(!node.isPhetioInstrumented(), 'this option only works if it is passed in before this Node is instrumented');
    this.targetPropertyInstrumented = targetPropertyInstrumented;
    return node;
  }
  getTargetPropertyInstrumented() {
    return this.targetPropertyInstrumented || false;
  }

  /**
   * @param node - the parent container that supports updateLinkedElementForProperty()
   * @param tandemName
   * @param createProperty - creates an "owned" Property
   */
  initializePhetio(node, tandemName, createProperty) {
    assert && assert(!this.phetioInitialized, 'already initialized');
    assert && assert(!this.ownedPhetioProperty, 'Already created the ownedPhetioProperty');
    if (!this.targetProperty && this.targetPropertyInstrumented) {
      this.ownedPhetioProperty = createProperty();
      assert && assert(this.ownedPhetioProperty instanceof Property, 'The owned property should be an AXON/Property');
      assert && assert(this.ownedPhetioProperty instanceof ReadOnlyProperty && this.ownedPhetioProperty.isPhetioInstrumented(), 'The owned property should be PhET-iO instrumented');
      this.setTargetProperty(node, tandemName, this.ownedPhetioProperty);
    } else if (this.targetProperty && this.targetProperty instanceof ReadOnlyProperty && this.targetProperty.isPhetioInstrumented()) {
      // If the Property was already set, now that it is instrumented, add a LinkedElement for it.
      node.updateLinkedElementForProperty(tandemName, null, this.targetProperty);
    }
    if (assert) {
      this.phetioInitialized = true;
    }
  }

  /**
   * This currently also involves deleting the field.
   */
  disposeOwnedPhetioProperty() {
    if (this.ownedPhetioProperty) {
      this.ownedPhetioProperty.dispose();
      delete this.ownedPhetioProperty; // back to original value
    }
  }

  dispose() {
    this.clearTargetProperty();
    this.disposeOwnedPhetioProperty();
    super.dispose();
  }
}
js_axon.register('TinyForwardingProperty', TinyForwardingProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiUHJvcGVydHkiLCJSZWFkT25seVByb3BlcnR5IiwiVGlueVByb3BlcnR5IiwiaXNUUmVhZE9ubHlQcm9wZXJ0eSIsIlRpbnlGb3J3YXJkaW5nUHJvcGVydHkiLCJjb25zdHJ1Y3RvciIsInZhbHVlIiwidGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQiLCJvbkJlZm9yZU5vdGlmeSIsImFzc2VydCIsInBoZXRpb0luaXRpYWxpemVkIiwic2V0VmFsdWVPclRhcmdldFByb3BlcnR5Iiwibm9kZSIsInRhbmRlbU5hbWUiLCJuZXdWYWx1ZU9yVGFyZ2V0UHJvcGVydHkiLCJzZXRUYXJnZXRQcm9wZXJ0eSIsIm9sZFZhbHVlIiwiZ2V0IiwiY2xlYXJUYXJnZXRQcm9wZXJ0eSIsInRhcmdldFByb3BlcnR5Iiwic2V0UHJvcGVydHlWYWx1ZSIsImFyZVZhbHVlc0VxdWFsIiwibm90aWZ5TGlzdGVuZXJzIiwibmV3VGFyZ2V0UHJvcGVydHkiLCJpc1BoZXRpb0luc3RydW1lbnRlZCIsImN1cnJlbnRGb3J3YXJkaW5nUHJvcGVydHlJbnN0cnVtZW50ZWQiLCJwcmV2aW91c1RhcmdldCIsIm93bmVkUGhldGlvUHJvcGVydHkiLCJkaXNwb3NlT3duZWRQaGV0aW9Qcm9wZXJ0eSIsInVwZGF0ZUxpbmtlZEVsZW1lbnRGb3JQcm9wZXJ0eSIsImZvcndhcmRpbmdMaXN0ZW5lciIsImxhenlMaW5rIiwib25UYXJnZXRQcm9wZXJ0eUNoYW5nZSIsImJpbmQiLCJ1bmxpbmsiLCJzZXQiLCJpc1NldHRhYmxlIiwic2V0VGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQiLCJnZXRUYXJnZXRQcm9wZXJ0eUluc3RydW1lbnRlZCIsImluaXRpYWxpemVQaGV0aW8iLCJjcmVhdGVQcm9wZXJ0eSIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlRpbnlGb3J3YXJkaW5nUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQSBsaWdodHdlaWdodCB2ZXJzaW9uIG9mIFByb3BlcnR5ICh0aGF0IHNhdGlzZmllcyBzb21lIG9mIHRoZSBpbnRlcmZhY2UpLCBtZWFudCBmb3IgaGlnaC1wZXJmb3JtYW5jZSBhcHBsaWNhdGlvbnNcbiAqIHdoZXJlIHZhbGlkYXRpb24sIHBoZXQtaW8gc3VwcG9ydCBhbmQgb3RoZXIgdGhpbmdzIGFyZSBub3QgbmVlZGVkLiBUaGlzIGluY2x1ZGVzIGFkZGl0aW9uYWwgbG9naWMgZm9yIGNvbmRpdGlvbmFsbHlcbiAqIGZvcndhcmRpbmcgdG8vZnJvbSBhbm90aGVyIFByb3BlcnR5LlxuICpcbiAqIFBsZWFzZSBub3RlIHRoYXQgVGlueUZvcndhcmRpbmdQcm9wZXJ0eSBleGNsdXNpdmVseSBzdXBwb3J0cyBzZXR0YWJsZSBQcm9wZXJ0aWVzXG4gKiB2aWEgaXRzIFR5cGVTY3JpcHQgaW1wbGVtZW50YXRpb24uIElmIHlvdSB3YW50IHRvIHVzZSBhIHJlYWQtb25seSBQcm9wZXJ0eSBhcyB0aGUgdGFyZ2V0LCBwbGVhc2UgdHlwZSBjYXN0IGFzIHNldHRhYmxlXG4gKiBhbmQgdXNlIHJ1bnRpbWUgYXNzZXJ0aW9ucyB0byBlbnN1cmUgdGhhdCB0aGUgdGFyZ2V0IChvciB0aGlzIGZvcndhcmRpbmcgUHJvcGVydHkpIGFyZSBub3Qgc2V0LiBTZWUgZXhhbXBsZXMgbGlrZVxuICogTm9kZS5zZXRWaXNpYmxlUHJvcGVydHkuXG4gKlxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgTWljaGFlbCBLYXV6bWFubiAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IFByb3BlcnR5IGZyb20gJy4vUHJvcGVydHkuanMnO1xuaW1wb3J0IFJlYWRPbmx5UHJvcGVydHkgZnJvbSAnLi9SZWFkT25seVByb3BlcnR5LmpzJztcbmltcG9ydCBUaW55UHJvcGVydHksIHsgVGlueVByb3BlcnR5T25CZWZvcmVOb3RpZnkgfSBmcm9tICcuL1RpbnlQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgVFByb3BlcnR5IGZyb20gJy4vVFByb3BlcnR5LmpzJztcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSwgeyBpc1RSZWFkT25seVByb3BlcnR5LCBQcm9wZXJ0eUxhenlMaW5rTGlzdGVuZXIgfSBmcm9tICcuL1RSZWFkT25seVByb3BlcnR5LmpzJztcblxudHlwZSBOb2RlTGlrZSA9IHtcbiAgdXBkYXRlTGlua2VkRWxlbWVudEZvclByb3BlcnR5OiA8VmFsdWVUeXBlPiggdGFuZGVtTmFtZTogc3RyaW5nLCBvbGRQcm9wZXJ0eT86IFRQcm9wZXJ0eTxWYWx1ZVR5cGU+IHwgbnVsbCwgbmV3UHJvcGVydHk/OiBUUHJvcGVydHk8VmFsdWVUeXBlPiB8IG51bGwgKSA9PiB2b2lkO1xuICBpc1BoZXRpb0luc3RydW1lbnRlZDogKCkgPT4gYm9vbGVhbjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFRpbnlGb3J3YXJkaW5nUHJvcGVydHk8VmFsdWVUeXBlPiBleHRlbmRzIFRpbnlQcm9wZXJ0eTxWYWx1ZVR5cGU+IHtcblxuICAvLyBTZXQgaW4gc2V0VGFyZ2V0UHJvcGVydHkoKVxuICBwcml2YXRlIHRhcmdldFByb3BlcnR5PzogVFByb3BlcnR5PFZhbHVlVHlwZT4gfCBudWxsO1xuXG4gIC8vIFNldCBsYXppbHkgaW4gc2V0VGFyZ2V0UHJvcGVydHkoKVxuICBwcm90ZWN0ZWQgZm9yd2FyZGluZ0xpc3RlbmVyPzogUHJvcGVydHlMYXp5TGlua0xpc3RlbmVyPFZhbHVlVHlwZT47XG5cbiAgLy8gVGlueVByb3BlcnR5IGlzIG5vdCBpbnN0cnVtZW50ZWQgZm9yIFBoRVQtaU8sIHNvIHdoZW4gYSBOb2RlIGlzIGluc3RydW1lbnRlZCwgYnkgZGVmYXVsdCwgYW4gaW5zdHJ1bWVudGVkXG4gIC8vIGBQcm9wZXJ0eWAgY2FuIGJlIGZvcndhcmRlZCB0by4gVGhpcyBmaWVsZCBzdG9yZXMgdGhlIGRlZmF1bHQgaW5zdHJ1bWVudGVkIFByb3BlcnR5IHdoZW5cbiAgLy8gdGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQgaXMgdHJ1ZS4gLSBQdWJsaWMgZm9yIE5vZGVUZXN0c1xuICBwcml2YXRlIG93bmVkUGhldGlvUHJvcGVydHk/OiBUUHJvcGVydHk8VmFsdWVUeXBlPjtcblxuICAvLyB3aGVuIHRydWUsIGF1dG9tYXRpY2FsbHkgc2V0IHVwIGEgUGhFVC1pTyBpbnN0cnVtZW50ZWQgZm9yd2FyZGVkIFByb3BlcnR5IGZvciB0aGlzIFRpbnlQcm9wZXJ0eSwgc2VlXG4gIC8vIHRoaXMuaW5pdGlhbGl6ZVBoZXRpb09iamVjdCgpIGZvciB1c2FnZS5cbiAgcHJpdmF0ZSB0YXJnZXRQcm9wZXJ0eUluc3RydW1lbnRlZD86IGJvb2xlYW47XG5cbiAgLy8gR3VhcmQgYWdhaW5zdCBkb3VibGUgaW5pdGlhbGl6YXRpb25cbiAgcHJpdmF0ZSBwaGV0aW9Jbml0aWFsaXplZD86IGJvb2xlYW47XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCB2YWx1ZTogVmFsdWVUeXBlLCB0YXJnZXRQcm9wZXJ0eUluc3RydW1lbnRlZDogYm9vbGVhbiwgb25CZWZvcmVOb3RpZnk/OiBUaW55UHJvcGVydHlPbkJlZm9yZU5vdGlmeTxWYWx1ZVR5cGU+ICkge1xuICAgIHN1cGVyKCB2YWx1ZSwgb25CZWZvcmVOb3RpZnkgKTtcblxuICAgIGlmICggdGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQgKSB7XG4gICAgICB0aGlzLnRhcmdldFByb3BlcnR5SW5zdHJ1bWVudGVkID0gdGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQ7XG4gICAgfVxuXG4gICAgaWYgKCBhc3NlcnQgKSB7XG4gICAgICB0aGlzLnBoZXRpb0luaXRpYWxpemVkID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLy8gQVBJIHN1cHBvcnQgZm9yIHNldHRpbmcgYSBQcm9wZXJ0eXxWYWx1ZVR5cGUgb250byB0aGUgZm9yd2FyZGluZyBQcm9wZXJ0eVxuICBwdWJsaWMgc2V0VmFsdWVPclRhcmdldFByb3BlcnR5PE5vZGVUeXBlIGV4dGVuZHMgTm9kZUxpa2UsIE5vZGVQYXJhbSBleHRlbmRzICggTm9kZVR5cGUgfCBudWxsICk+KFxuICAgIG5vZGU6IE5vZGVQYXJhbSwgdGFuZGVtTmFtZTogc3RyaW5nIHwgbnVsbCwgbmV3VmFsdWVPclRhcmdldFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxWYWx1ZVR5cGU+IHwgVmFsdWVUeXBlICk6IHZvaWQge1xuXG4gICAgaWYgKCAoIGlzVFJlYWRPbmx5UHJvcGVydHkoIG5ld1ZhbHVlT3JUYXJnZXRQcm9wZXJ0eSApICkgKSB7XG5cbiAgICAgIC8vIEFzIGEgbmV3IFByb3BlcnR5XG4gICAgICB0aGlzLnNldFRhcmdldFByb3BlcnR5KCBub2RlLCB0YW5kZW1OYW1lLCBuZXdWYWx1ZU9yVGFyZ2V0UHJvcGVydHkgYXMgVFByb3BlcnR5PFZhbHVlVHlwZT4gKTtcbiAgICB9XG4gICAgZWxzZSB7IC8vIGFzIGEgVmFsdWVUeXBlXG4gICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuZ2V0KCk7XG5cbiAgICAgIHRoaXMuY2xlYXJUYXJnZXRQcm9wZXJ0eSgpO1xuXG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy50YXJnZXRQcm9wZXJ0eSwgJ2p1c3QgY2xlYXJlZCcgKTtcblxuICAgICAgLy8gSWYgd2UncmUgc3dpdGNoaW5nIGF3YXkgZnJvbSBhIHRhcmdldFByb3BlcnR5LCBwcmVmZXIgbm8gbm90aWZpY2F0aW9uIChzbyBzZXQgb3VyIHZhbHVlIHRvIHRoZSBsYXN0IHZhbHVlKVxuICAgICAgdGhpcy5zZXRQcm9wZXJ0eVZhbHVlKCBuZXdWYWx1ZU9yVGFyZ2V0UHJvcGVydHkgKTtcblxuICAgICAgLy8gQ2hhbmdpbmcgZm9yd2FyZGluZyB0YXJnZXQgQ09VTEQgY2hhbmdlIHRoZSB2YWx1ZSwgc28gc2VuZCBub3RpZmljYXRpb25zIGlmIHRoaXMgaXMgdGhlIGNhc2UuXG4gICAgICBpZiAoICF0aGlzLmFyZVZhbHVlc0VxdWFsKCBvbGRWYWx1ZSwgbmV3VmFsdWVPclRhcmdldFByb3BlcnR5ICkgKSB7XG4gICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCBvbGRWYWx1ZSApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIChvciB1bnNldHMgaWYgYG51bGxgIGlzIHByb3ZpZGVkKSB0aGUgUHJvcGVydHkgdGhhdCB3ZSB1c2UgZm9yIGZvcndhcmRpbmcgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIG5vZGUgLSBUaGUgY29udGFpbmVyIG9mIFRpbnlGb3J3YXJkaW5nUHJvcGVydHkgd2hpY2ggc3VwcG9ydHMgdXBkYXRlTGlua2VkRWxlbWVudEZvclByb3BlcnR5KClcbiAgICogQHBhcmFtIHRhbmRlbU5hbWUgLSBudWxsIGlmIHRoZSBQcm9wZXJ0eSBkb2VzIG5vdCBzdXBwb3J0IFBoRVQtaU8gaW5zdHJ1bWVudGF0aW9uXG4gICAqIEBwYXJhbSBuZXdUYXJnZXRQcm9wZXJ0eSAtIG51bGwgdG8gXCJ1bnNldFwiIGZvcndhcmRpbmcuXG4gICAqIEByZXR1cm5zIHRoZSBwYXNzZWQgaW4gTm9kZSwgZm9yIGNoYWluaW5nLlxuICAgKi9cbiAgcHVibGljIHNldFRhcmdldFByb3BlcnR5PE5vZGVUeXBlIGV4dGVuZHMgTm9kZUxpa2UsIE5vZGVQYXJhbSBleHRlbmRzICggTm9kZVR5cGUgfCBudWxsICk+KCBub2RlOiBOb2RlUGFyYW0sIHRhbmRlbU5hbWU6IHN0cmluZyB8IG51bGwsIG5ld1RhcmdldFByb3BlcnR5OiBUUHJvcGVydHk8VmFsdWVUeXBlPiB8IG51bGwgKTogTm9kZVBhcmFtIHtcbiAgICBhc3NlcnQgJiYgbm9kZSAmJiB0YW5kZW1OYW1lID09PSBudWxsICYmIHRoaXMudGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQgJiYgYXNzZXJ0KCAhbm9kZS5pc1BoZXRpb0luc3RydW1lbnRlZCgpLCAndGFuZGVtTmFtZSBtdXN0IGJlIHByb3ZpZGVkIGZvciBpbnN0cnVtZW50ZWQgTm9kZXMnICk7XG5cbiAgICAvLyBuby1vcCBpZiB3ZSBhcmUgYWxyZWFkeSBmb3J3YXJkaW5nIHRvIHRoYXQgcHJvcGVydHkgT1IgaWYgd2Ugc3RpbGwgYXJlbid0IGZvcndhcmRpbmdcbiAgICBpZiAoIHRoaXMudGFyZ2V0UHJvcGVydHkgPT09IG5ld1RhcmdldFByb3BlcnR5ICkge1xuICAgICAgcmV0dXJuIG5vZGU7IC8vIGZvciBjaGFpbmluZ1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnJlbnRGb3J3YXJkaW5nUHJvcGVydHlJbnN0cnVtZW50ZWQgPSB0aGlzLnRhcmdldFByb3BlcnR5ICYmXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgaW5zdGFuY2VvZiBSZWFkT25seVByb3BlcnR5ICYmIHRoaXMudGFyZ2V0UHJvcGVydHkuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKTtcbiAgICBhc3NlcnQgJiYgY3VycmVudEZvcndhcmRpbmdQcm9wZXJ0eUluc3RydW1lbnRlZCAmJiBhc3NlcnQoIG5ld1RhcmdldFByb3BlcnR5ICYmIG5ld1RhcmdldFByb3BlcnR5IGluc3RhbmNlb2YgUmVhZE9ubHlQcm9wZXJ0eSAmJiBuZXdUYXJnZXRQcm9wZXJ0eS5pc1BoZXRpb0luc3RydW1lbnRlZCgpLFxuICAgICAgJ0Nhbm5vdCBzZXQgc3dhcCBvdXQgYSBQaEVULWlPIGluc3RydW1lbnRlZCB0YXJnZXRQcm9wZXJ0eSBmb3IgYW4gdW5pbnN0cnVtZW50ZWQgb25lJyApO1xuXG4gICAgLy8gV2UgbmVlZCB0aGlzIGluZm9ybWF0aW9uIGVhZ2VybHkgZm9yIGxhdGVyIG9uIGluIHRoZSBmdW5jdGlvblxuICAgIGNvbnN0IHByZXZpb3VzVGFyZ2V0ID0gdGhpcy50YXJnZXRQcm9wZXJ0eTtcblxuICAgIC8vIElmIHdlIGhhZCB0aGUgXCJkZWZhdWx0IGluc3RydW1lbnRlZFwiIFByb3BlcnR5LCB3ZSdsbCByZW1vdmUgdGhhdCBhbmQgdGhlbiBsaW5rIG91ciBuZXcgUHJvcGVydHkuIEd1YXJkIG9uIHRoZSBmYWN0XG4gICAgLy8gdGhhdCBvd25lZFBoZXRpb1Byb3BlcnR5IGlzIGFkZGVkIHZpYSB0aGlzIGV4YWN0IG1ldGhvZCwgc2VlIHRoaXMuaW5pdGlhbGl6ZVBoZXRpbygpIGZvciBkZXRhaWxzXG4gICAgLy8gRG8gdGhpcyBiZWZvcmUgYWRkaW5nIGEgUGhFVC1pTyBMaW5rZWRFbGVtZW50IGJlY2F1c2Ugb3duZWRQaGV0aW9Qcm9wZXJ0eSBoYXMgdGhlIHNhbWUgcGhldGlvSUQgYXMgdGhlIExpbmtlZEVsZW1lbnRcbiAgICBpZiAoIHRoaXMub3duZWRQaGV0aW9Qcm9wZXJ0eSAmJiBuZXdUYXJnZXRQcm9wZXJ0eSAhPT0gdGhpcy5vd25lZFBoZXRpb1Byb3BlcnR5ICkge1xuICAgICAgdGhpcy5kaXNwb3NlT3duZWRQaGV0aW9Qcm9wZXJ0eSgpO1xuICAgIH1cblxuICAgIG5vZGUgJiYgdGFuZGVtTmFtZSAhPT0gbnVsbCAmJiBub2RlLnVwZGF0ZUxpbmtlZEVsZW1lbnRGb3JQcm9wZXJ0eSggdGFuZGVtTmFtZSwgcHJldmlvdXNUYXJnZXQsIG5ld1RhcmdldFByb3BlcnR5ICk7XG5cbiAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMuZ2V0KCk7XG5cbiAgICB0aGlzLmNsZWFyVGFyZ2V0UHJvcGVydHkoKTtcblxuICAgIHRoaXMudGFyZ2V0UHJvcGVydHkgPSBuZXdUYXJnZXRQcm9wZXJ0eTtcblxuICAgIGlmICggdGhpcy50YXJnZXRQcm9wZXJ0eSApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuZm9yd2FyZGluZ0xpc3RlbmVyLCAnZm9yd2FyZGluZ0xpc3RlbmVyIGlzIG5vdCBzZXQgeWV0JyApO1xuICAgICAgdGhpcy50YXJnZXRQcm9wZXJ0eS5sYXp5TGluayggdGhpcy5mb3J3YXJkaW5nTGlzdGVuZXIhICk7XG4gICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWUoIHRoaXMudGFyZ2V0UHJvcGVydHkudmFsdWUgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBJZiB3ZSdyZSBzd2l0Y2hpbmcgYXdheSBmcm9tIGEgdGFyZ2V0UHJvcGVydHksIHByZWZlciBubyBub3RpZmljYXRpb24gKHNvIHNldCBvdXIgdmFsdWUgdG8gdGhlIGxhc3QgdmFsdWUpXG4gICAgICB0aGlzLnNldFByb3BlcnR5VmFsdWUoIG9sZFZhbHVlICk7XG4gICAgfVxuXG4gICAgLy8gQ2hhbmdpbmcgZm9yd2FyZGluZyB0YXJnZXQgQ09VTEQgY2hhbmdlIHRoZSB2YWx1ZSwgc28gc2VuZCBub3RpZmljYXRpb25zIGlmIHRoaXMgaXMgdGhlIGNhc2UuXG4gICAgaWYgKCAhdGhpcy5hcmVWYWx1ZXNFcXVhbCggb2xkVmFsdWUsIHRoaXMuZ2V0KCkgKSApIHtcbiAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCBvbGRWYWx1ZSApO1xuICAgIH1cblxuICAgIHJldHVybiBub2RlOyAvLyBmb3IgY2hhaW5pbmdcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJUYXJnZXRQcm9wZXJ0eSgpOiB2b2lkIHtcblxuICAgIC8vIExhemlseSBzZXQgdGhpcyB2YWx1ZSwgaXQgd2lsbCBiZSBhZGRlZCBhcyBhIGxpc3RlbmVyIHRvIGFueSB0YXJnZXRQcm9wZXJ0eSB3ZSBoYXZlLlxuICAgIHRoaXMuZm9yd2FyZGluZ0xpc3RlbmVyID0gdGhpcy5mb3J3YXJkaW5nTGlzdGVuZXIgfHwgdGhpcy5vblRhcmdldFByb3BlcnR5Q2hhbmdlLmJpbmQoIHRoaXMgKTtcblxuICAgIGlmICggdGhpcy50YXJnZXRQcm9wZXJ0eSApIHtcbiAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkudW5saW5rKCB0aGlzLmZvcndhcmRpbmdMaXN0ZW5lciApO1xuICAgIH1cbiAgICB0aGlzLnRhcmdldFByb3BlcnR5ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBOb3RpZnkgdGhpcyBQcm9wZXJ0eSdzIGxpc3RlbmVycyB3aGVuIHRoZSB0YXJnZXRQcm9wZXJ0eSBjaGFuZ2VzLlxuICAgKiBGb3IgcGVyZm9ybWFuY2UsIGtlZXAgdGhpcyBsaXN0ZW5lciBvbiB0aGUgcHJvdG90eXBlLlxuICAgKi9cbiAgcHJpdmF0ZSBvblRhcmdldFByb3BlcnR5Q2hhbmdlKCB2YWx1ZTogVmFsdWVUeXBlICk6IHZvaWQge1xuICAgIHN1cGVyLnNldCggdmFsdWUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBhbmQgbm90aWZpZXMgbGlzdGVuZXJzLCB1bmxlc3MgZGVmZXJyZWQgb3IgZGlzcG9zZWQuIFlvdSBjYW4gYWxzbyB1c2UgdGhlIGVzNSBnZXR0ZXJcbiAgICogKHByb3BlcnR5LnZhbHVlKSBidXQgdGhpcyBtZWFucyBpcyBwcm92aWRlZCBmb3IgaW5uZXIgbG9vcHMgb3IgaW50ZXJuYWwgY29kZSB0aGF0IG11c3QgYmUgZmFzdC4gSWYgdGhlIHZhbHVlXG4gICAqIGhhc24ndCBjaGFuZ2VkLCB0aGlzIGlzIGEgbm8tb3AuXG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgc2V0KCB2YWx1ZTogVmFsdWVUeXBlICk6IHRoaXMge1xuICAgIGlmICggdGhpcy50YXJnZXRQcm9wZXJ0eSApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMudGFyZ2V0UHJvcGVydHkuaXNTZXR0YWJsZSgpLCAndGFyZ2V0UHJvcGVydHkgbXVzdCBiZSBzZXR0YWJsZScgKTtcbiAgICAgIHRoaXMudGFyZ2V0UHJvcGVydHkuc2V0KCB2YWx1ZSApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHN1cGVyLnNldCggdmFsdWUgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogVXNlIHRoaXMgdG8gYXV0b21hdGljYWxseSBjcmVhdGUgYSBmb3J3YXJkZWQsIFBoRVQtaU8gaW5zdHJ1bWVudGVkIFByb3BlcnR5IG93bmVkIGJ5IHRoaXMgVGlueUZvcndhcmRpbmdQcm9wZXJ0eS5cbiAgICovXG4gIHB1YmxpYyBzZXRUYXJnZXRQcm9wZXJ0eUluc3RydW1lbnRlZDxOb2RlVHlwZSBleHRlbmRzIE5vZGVMaWtlPiggdGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQ6IGJvb2xlYW4sIG5vZGU6IE5vZGVUeXBlICk6IE5vZGVUeXBlIHtcblxuICAgIC8vIFNlZSBOb2RlLmluaXRpYWxpemVQaGV0aW9PYmplY3QgZm9yIG1vcmUgZGV0YWlscyBvbiB0aGlzIGFzc2VydGlvblxuICAgIGFzc2VydCAmJiBhc3NlcnQoICFub2RlLmlzUGhldGlvSW5zdHJ1bWVudGVkKCksICd0aGlzIG9wdGlvbiBvbmx5IHdvcmtzIGlmIGl0IGlzIHBhc3NlZCBpbiBiZWZvcmUgdGhpcyBOb2RlIGlzIGluc3RydW1lbnRlZCcgKTtcblxuICAgIHRoaXMudGFyZ2V0UHJvcGVydHlJbnN0cnVtZW50ZWQgPSB0YXJnZXRQcm9wZXJ0eUluc3RydW1lbnRlZDtcblxuICAgIHJldHVybiBub2RlO1xuICB9XG5cbiAgcHVibGljIGdldFRhcmdldFByb3BlcnR5SW5zdHJ1bWVudGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnRhcmdldFByb3BlcnR5SW5zdHJ1bWVudGVkIHx8IGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBub2RlIC0gdGhlIHBhcmVudCBjb250YWluZXIgdGhhdCBzdXBwb3J0cyB1cGRhdGVMaW5rZWRFbGVtZW50Rm9yUHJvcGVydHkoKVxuICAgKiBAcGFyYW0gdGFuZGVtTmFtZVxuICAgKiBAcGFyYW0gY3JlYXRlUHJvcGVydHkgLSBjcmVhdGVzIGFuIFwib3duZWRcIiBQcm9wZXJ0eVxuICAgKi9cbiAgcHVibGljIGluaXRpYWxpemVQaGV0aW8oIG5vZGU6IE5vZGVMaWtlLCB0YW5kZW1OYW1lOiBzdHJpbmcsIGNyZWF0ZVByb3BlcnR5OiAoKSA9PiBUUHJvcGVydHk8VmFsdWVUeXBlPiApOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5waGV0aW9Jbml0aWFsaXplZCwgJ2FscmVhZHkgaW5pdGlhbGl6ZWQnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMub3duZWRQaGV0aW9Qcm9wZXJ0eSwgJ0FscmVhZHkgY3JlYXRlZCB0aGUgb3duZWRQaGV0aW9Qcm9wZXJ0eScgKTtcblxuICAgIGlmICggIXRoaXMudGFyZ2V0UHJvcGVydHkgJiYgdGhpcy50YXJnZXRQcm9wZXJ0eUluc3RydW1lbnRlZCApIHtcblxuICAgICAgdGhpcy5vd25lZFBoZXRpb1Byb3BlcnR5ID0gY3JlYXRlUHJvcGVydHkoKTtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMub3duZWRQaGV0aW9Qcm9wZXJ0eSBpbnN0YW5jZW9mIFByb3BlcnR5LCAnVGhlIG93bmVkIHByb3BlcnR5IHNob3VsZCBiZSBhbiBBWE9OL1Byb3BlcnR5JyApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5vd25lZFBoZXRpb1Byb3BlcnR5IGluc3RhbmNlb2YgUmVhZE9ubHlQcm9wZXJ0eSAmJiB0aGlzLm93bmVkUGhldGlvUHJvcGVydHkuaXNQaGV0aW9JbnN0cnVtZW50ZWQoKSwgJ1RoZSBvd25lZCBwcm9wZXJ0eSBzaG91bGQgYmUgUGhFVC1pTyBpbnN0cnVtZW50ZWQnICk7XG5cbiAgICAgIHRoaXMuc2V0VGFyZ2V0UHJvcGVydHkoIG5vZGUsIHRhbmRlbU5hbWUsIHRoaXMub3duZWRQaGV0aW9Qcm9wZXJ0eSApO1xuICAgIH1cbiAgICBlbHNlIGlmICggdGhpcy50YXJnZXRQcm9wZXJ0eSAmJiB0aGlzLnRhcmdldFByb3BlcnR5IGluc3RhbmNlb2YgUmVhZE9ubHlQcm9wZXJ0eSAmJiB0aGlzLnRhcmdldFByb3BlcnR5LmlzUGhldGlvSW5zdHJ1bWVudGVkKCkgKSB7XG5cbiAgICAgIC8vIElmIHRoZSBQcm9wZXJ0eSB3YXMgYWxyZWFkeSBzZXQsIG5vdyB0aGF0IGl0IGlzIGluc3RydW1lbnRlZCwgYWRkIGEgTGlua2VkRWxlbWVudCBmb3IgaXQuXG4gICAgICBub2RlLnVwZGF0ZUxpbmtlZEVsZW1lbnRGb3JQcm9wZXJ0eSggdGFuZGVtTmFtZSwgbnVsbCwgdGhpcy50YXJnZXRQcm9wZXJ0eSApO1xuICAgIH1cblxuICAgIGlmICggYXNzZXJ0ICkge1xuICAgICAgdGhpcy5waGV0aW9Jbml0aWFsaXplZCA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgY3VycmVudGx5IGFsc28gaW52b2x2ZXMgZGVsZXRpbmcgdGhlIGZpZWxkLlxuICAgKi9cbiAgcHJpdmF0ZSBkaXNwb3NlT3duZWRQaGV0aW9Qcm9wZXJ0eSgpOiB2b2lkIHtcbiAgICBpZiAoIHRoaXMub3duZWRQaGV0aW9Qcm9wZXJ0eSApIHtcbiAgICAgIHRoaXMub3duZWRQaGV0aW9Qcm9wZXJ0eS5kaXNwb3NlKCk7XG4gICAgICBkZWxldGUgdGhpcy5vd25lZFBoZXRpb1Byb3BlcnR5OyAvLyBiYWNrIHRvIG9yaWdpbmFsIHZhbHVlXG4gICAgfVxuICB9XG5cbiAgcHVibGljIG92ZXJyaWRlIGRpc3Bvc2UoKTogdm9pZCB7XG4gICAgdGhpcy5jbGVhclRhcmdldFByb3BlcnR5KCk7XG4gICAgdGhpcy5kaXNwb3NlT3duZWRQaGV0aW9Qcm9wZXJ0eSgpO1xuICAgIHN1cGVyLmRpc3Bvc2UoKTtcbiAgfVxufVxuXG5heG9uLnJlZ2lzdGVyKCAnVGlueUZvcndhcmRpbmdQcm9wZXJ0eScsIFRpbnlGb3J3YXJkaW5nUHJvcGVydHkgKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxJQUFJLE1BQU0sV0FBVztBQUM1QixPQUFPQyxRQUFRLE1BQU0sZUFBZTtBQUNwQyxPQUFPQyxnQkFBZ0Is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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/TinyOverrideProperty.js
// Copyright 2022, University of Colorado Boulder

/**
 * A TinyProperty that will take the value of a target Property until it is set to a value. When that happens, it will
 * be its own standalone Property.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class TinyOverrideProperty extends TinyProperty {
  // If true, we ignore our targetProperty and just use our value. If false, we only report the value of the
  // targetProperty
  isOverridden = false;
  constructor(targetProperty) {
    super(targetProperty.value);
    this._targetProperty = targetProperty;
    assert && assert(!this.isOverridden, 'Should not be overridden on startup');

    // We'll need to listen to our target to dispatch notifications
    this._targetListener = this.onTargetPropertyChange.bind(this);
    this._targetProperty.lazyLink(this._targetListener);
  }
  set targetProperty(targetProperty) {
    this.setTargetProperty(targetProperty);
  }
  setTargetProperty(targetProperty) {
    // no-op if it's the same Property
    if (this.targetProperty === targetProperty) {
      return;
    }
    const oldValue = this.value;

    // Listeners are only connected if we are NOT overridden
    if (!this.isOverridden) {
      this._targetProperty.unlink(this._targetListener);
    }
    this._targetProperty = targetProperty;

    // Listeners are only connected if we are NOT overridden
    if (!this.isOverridden) {
      this._targetProperty.lazyLink(this._targetListener);

      // If we are overridden, changing the targetProperty will not trigger notifications
      if (!this.equalsValue(oldValue)) {
        this.notifyListeners(oldValue);
      }
    }
  }

  /**
   * Remove the "overridden" nature of this Property, so that it takes on the appearance of the targetProperty
   */
  clearOverride() {
    if (this.isOverridden) {
      const oldValue = this.value;
      this.isOverridden = false;
      this._targetProperty.lazyLink(this._targetListener);

      // This could change our value!
      if (!this.equalsValue(oldValue)) {
        this.notifyListeners(oldValue);
      }
    }
  }
  get() {
    // The main logic for TinyOverrideProperty
    return this.isOverridden ? this._value : this._targetProperty.value;
  }
  set(value) {
    if (!this.isOverridden) {
      // Grab the last value of the Property, as it will be "active" after this
      this._value = this._targetProperty.value;
    }
    super.set(value);
  }
  setPropertyValue(value) {
    // Switch to "override"
    if (!this.isOverridden) {
      this.isOverridden = true;
      this._targetProperty.unlink(this._targetListener);
    }
    super.setPropertyValue(value);
  }

  // We have to override here to have the getter called
  equalsValue(value) {
    return this.areValuesEqual(value, this.value);
  }
  onTargetPropertyChange(newValue, oldValue) {
    if (!this.isOverridden) {
      this.notifyListeners(oldValue);
    }
  }

  // Overridden, since we need to call our getter
  notifyListeners(oldValue) {
    this.emit(this.value, oldValue, this);
  }
  dispose() {
    // If we've been overridden, we will already have removed the listener
    if (!this.isOverridden) {
      this._targetProperty.unlink(this._targetListener);
    }
    super.dispose();
  }
}
js_axon.register('TinyOverrideProperty', TinyOverrideProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVGlueVByb3BlcnR5IiwiVGlueU92ZXJyaWRlUHJvcGVydHkiLCJpc092ZXJyaWRkZW4iLCJjb25zdHJ1Y3RvciIsInRhcmdldFByb3BlcnR5IiwidmFsdWUiLCJfdGFyZ2V0UHJvcGVydHkiLCJhc3NlcnQiLCJfdGFyZ2V0TGlzdGVuZXIiLCJvblRhcmdldFByb3BlcnR5Q2hhbmdlIiwiYmluZCIsImxhenlMaW5rIiwic2V0VGFyZ2V0UHJvcGVydHkiLCJvbGRWYWx1ZSIsInVubGluayIsImVxdWFsc1ZhbHVlIiwibm90aWZ5TGlzdGVuZXJzIiwiY2xlYXJPdmVycmlkZSIsImdldCIsIl92YWx1ZSIsInNldCIsInNldFByb3BlcnR5VmFsdWUiLCJhcmVWYWx1ZXNFcXVhbCIsIm5ld1ZhbHVlIiwiZW1pdCIsImRpc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlRpbnlPdmVycmlkZVByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBBIFRpbnlQcm9wZXJ0eSB0aGF0IHdpbGwgdGFrZSB0aGUgdmFsdWUgb2YgYSB0YXJnZXQgUHJvcGVydHkgdW50aWwgaXQgaXMgc2V0IHRvIGEgdmFsdWUuIFdoZW4gdGhhdCBoYXBwZW5zLCBpdCB3aWxsXG4gKiBiZSBpdHMgb3duIHN0YW5kYWxvbmUgUHJvcGVydHkuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBheG9uIGZyb20gJy4vYXhvbi5qcyc7XG5pbXBvcnQgVGlueVByb3BlcnR5IGZyb20gJy4vVGlueVByb3BlcnR5LmpzJztcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuL1RSZWFkT25seVByb3BlcnR5LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGlueU92ZXJyaWRlUHJvcGVydHk8VD4gZXh0ZW5kcyBUaW55UHJvcGVydHk8VD4ge1xuXG4gIC8vIElmIHRydWUsIHdlIGlnbm9yZSBvdXIgdGFyZ2V0UHJvcGVydHkgYW5kIGp1c3QgdXNlIG91ciB2YWx1ZS4gSWYgZmFsc2UsIHdlIG9ubHkgcmVwb3J0IHRoZSB2YWx1ZSBvZiB0aGVcbiAgLy8gdGFyZ2V0UHJvcGVydHlcbiAgcHVibGljIGlzT3ZlcnJpZGRlbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX3RhcmdldFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxUPjtcbiAgcHJpdmF0ZSByZWFkb25seSBfdGFyZ2V0TGlzdGVuZXI6ICggbmV3VmFsdWU6IFQsIG9sZFZhbHVlOiBUICkgPT4gdm9pZDtcblxuICBwdWJsaWMgY29uc3RydWN0b3IoIHRhcmdldFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxUPiApIHtcbiAgICBzdXBlciggdGFyZ2V0UHJvcGVydHkudmFsdWUgKTtcblxuICAgIHRoaXMuX3RhcmdldFByb3BlcnR5ID0gdGFyZ2V0UHJvcGVydHk7XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5pc092ZXJyaWRkZW4sICdTaG91bGQgbm90IGJlIG92ZXJyaWRkZW4gb24gc3RhcnR1cCcgKTtcblxuICAgIC8vIFdlJ2xsIG5lZWQgdG8gbGlzdGVuIHRvIG91ciB0YXJnZXQgdG8gZGlzcGF0Y2ggbm90aWZpY2F0aW9uc1xuICAgIHRoaXMuX3RhcmdldExpc3RlbmVyID0gdGhpcy5vblRhcmdldFByb3BlcnR5Q2hhbmdlLmJpbmQoIHRoaXMgKTtcbiAgICB0aGlzLl90YXJnZXRQcm9wZXJ0eS5sYXp5TGluayggdGhpcy5fdGFyZ2V0TGlzdGVuZXIgKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXQgdGFyZ2V0UHJvcGVydHkoIHRhcmdldFByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxUPiApIHtcbiAgICB0aGlzLnNldFRhcmdldFByb3BlcnR5KCB0YXJnZXRQcm9wZXJ0eSApO1xuICB9XG5cbiAgcHVibGljIHNldFRhcmdldFByb3BlcnR5KCB0YXJnZXRQcm9wZXJ0eTogVFJlYWRPbmx5UHJvcGVydHk8VD4gKTogdm9pZCB7XG4gICAgLy8gbm8tb3AgaWYgaXQncyB0aGUgc2FtZSBQcm9wZXJ0eVxuICAgIGlmICggdGhpcy50YXJnZXRQcm9wZXJ0eSA9PT0gdGFyZ2V0UHJvcGVydHkgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuXG4gICAgLy8gTGlzdGVuZXJzIGFyZSBvbmx5IGNvbm5lY3RlZCBpZiB3ZSBhcmUgTk9UIG92ZXJyaWRkZW5cbiAgICBpZiAoICF0aGlzLmlzT3ZlcnJpZGRlbiApIHtcbiAgICAgIHRoaXMuX3RhcmdldFByb3BlcnR5LnVubGluayggdGhpcy5fdGFyZ2V0TGlzdGVuZXIgKTtcbiAgICB9XG5cbiAgICB0aGlzLl90YXJnZXRQcm9wZXJ0eSA9IHRhcmdldFByb3BlcnR5O1xuXG4gICAgLy8gTGlzdGVuZXJzIGFyZSBvbmx5IGNvbm5lY3RlZCBpZiB3ZSBhcmUgTk9UIG92ZXJyaWRkZW5cbiAgICBpZiAoICF0aGlzLmlzT3ZlcnJpZGRlbiApIHtcbiAgICAgIHRoaXMuX3RhcmdldFByb3BlcnR5LmxhenlMaW5rKCB0aGlzLl90YXJnZXRMaXN0ZW5lciApO1xuXG4gICAgICAvLyBJZiB3ZSBhcmUgb3ZlcnJpZGRlbiwgY2hhbmdpbmcgdGhlIHRhcmdldFByb3BlcnR5IHdpbGwgbm90IHRyaWdnZXIgbm90aWZpY2F0aW9uc1xuICAgICAgaWYgKCAhdGhpcy5lcXVhbHNWYWx1ZSggb2xkVmFsdWUgKSApIHtcbiAgICAgICAgdGhpcy5ub3RpZnlMaXN0ZW5lcnMoIG9sZFZhbHVlICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgXCJvdmVycmlkZGVuXCIgbmF0dXJlIG9mIHRoaXMgUHJvcGVydHksIHNvIHRoYXQgaXQgdGFrZXMgb24gdGhlIGFwcGVhcmFuY2Ugb2YgdGhlIHRhcmdldFByb3BlcnR5XG4gICAqL1xuICBwdWJsaWMgY2xlYXJPdmVycmlkZSgpOiB2b2lkIHtcbiAgICBpZiAoIHRoaXMuaXNPdmVycmlkZGVuICkge1xuICAgICAgY29uc3Qgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuXG4gICAgICB0aGlzLmlzT3ZlcnJpZGRlbiA9IGZhbHNlO1xuICAgICAgdGhpcy5fdGFyZ2V0UHJvcGVydHkubGF6eUxpbmsoIHRoaXMuX3RhcmdldExpc3RlbmVyICk7XG5cbiAgICAgIC8vIFRoaXMgY291bGQgY2hhbmdlIG91ciB2YWx1ZSFcbiAgICAgIGlmICggIXRoaXMuZXF1YWxzVmFsdWUoIG9sZFZhbHVlICkgKSB7XG4gICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCBvbGRWYWx1ZSApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBnZXQoKTogVCB7XG4gICAgLy8gVGhlIG1haW4gbG9naWMgZm9yIFRpbnlPdmVycmlkZVByb3BlcnR5XG4gICAgcmV0dXJuIHRoaXMuaXNPdmVycmlkZGVuID8gdGhpcy5fdmFsdWUgOiB0aGlzLl90YXJnZXRQcm9wZXJ0eS52YWx1ZTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBzZXQoIHZhbHVlOiBUICk6IHZvaWQge1xuICAgIGlmICggIXRoaXMuaXNPdmVycmlkZGVuICkge1xuICAgICAgLy8gR3JhYiB0aGUgbGFzdCB2YWx1ZSBvZiB0aGUgUHJvcGVydHksIGFzIGl0IHdpbGwgYmUgXCJhY3RpdmVcIiBhZnRlciB0aGlzXG4gICAgICB0aGlzLl92YWx1ZSA9IHRoaXMuX3RhcmdldFByb3BlcnR5LnZhbHVlO1xuICAgIH1cblxuICAgIHN1cGVyLnNldCggdmFsdWUgKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBzZXRQcm9wZXJ0eVZhbHVlKCB2YWx1ZTogVCApOiB2b2lkIHtcbiAgICAvLyBTd2l0Y2ggdG8gXCJvdmVycmlkZVwiXG4gICAgaWYgKCAhdGhpcy5pc092ZXJyaWRkZW4gKSB7XG4gICAgICB0aGlzLmlzT3ZlcnJpZGRlbiA9IHRydWU7XG4gICAgICB0aGlzLl90YXJnZXRQcm9wZXJ0eS51bmxpbmsoIHRoaXMuX3RhcmdldExpc3RlbmVyICk7XG4gICAgfVxuXG4gICAgc3VwZXIuc2V0UHJvcGVydHlWYWx1ZSggdmFsdWUgKTtcbiAgfVxuXG4gIC8vIFdlIGhhdmUgdG8gb3ZlcnJpZGUgaGVyZSB0byBoYXZlIHRoZSBnZXR0ZXIgY2FsbGVkXG4gIHByb3RlY3RlZCBvdmVycmlkZSBlcXVhbHNWYWx1ZSggdmFsdWU6IFQgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuYXJlVmFsdWVzRXF1YWwoIHZhbHVlLCB0aGlzLnZhbHVlICk7XG4gIH1cblxuICBwcml2YXRlIG9uVGFyZ2V0UHJvcGVydHlDaGFuZ2UoIG5ld1ZhbHVlOiBULCBvbGRWYWx1ZTogVCApOiB2b2lkIHtcbiAgICBpZiAoICF0aGlzLmlzT3ZlcnJpZGRlbiApIHtcbiAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKCBvbGRWYWx1ZSApO1xuICAgIH1cbiAgfVxuXG4gIC8vIE92ZXJyaWRkZW4sIHNpbmNlIHdlIG5lZWQgdG8gY2FsbCBvdXIgZ2V0dGVyXG4gIHB1YmxpYyBvdmVycmlkZSBub3RpZnlMaXN0ZW5lcnMoIG9sZFZhbHVlOiBUICk6IHZvaWQge1xuICAgIHRoaXMuZW1pdCggdGhpcy52YWx1ZSwgb2xkVmFsdWUsIHRoaXMgKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBkaXNwb3NlKCk6IHZvaWQge1xuICAgIC8vIElmIHdlJ3ZlIGJlZW4gb3ZlcnJpZGRlbiwgd2Ugd2lsbCBhbHJlYWR5IGhhdmUgcmVtb3ZlZCB0aGUgbGlzdGVuZXJcbiAgICBpZiAoICF0aGlzLmlzT3ZlcnJpZGRlbiApIHtcbiAgICAgIHRoaXMuX3RhcmdldFByb3BlcnR5LnVubGluayggdGhpcy5fdGFyZ2V0TGlzdGVuZXIgKTtcbiAgICB9XG5cbiAgICBzdXBlci5kaXNwb3NlKCk7XG4gIH1cbn1cblxuYXhvbi5yZWdpc3RlciggJ1RpbnlPdmVycmlkZVByb3BlcnR5JywgVGlueU92ZXJyaWRlUHJvcGVydHkgKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLElBQUksTUFBTSxXQUFXO0FBQzVCLE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7QUFHNUMsZUFBZSxNQUFNQyxvQkFBb0IsU0FBWUQsWUFBWSxDQUFJO0VBRW5FO0VBQ0E7RUFDT0UsWUFBWSxHQUFHLEtBQUs7RUFLcEJDLFdBQVdBLENBQUVDLGNBQW9DLEVBQUc7SUFDekQsS0FBSyxDQUFFQSxjQUFjLENBQUNDLEtBQUssQ0FBRTtJQUU3QixJQUFJLENBQUNDLGVBQWUsR0FBR0YsY0FBYztJQUVyQ0csTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQyxJQUFJLENBQUNMLFlBQVksRUFBRSxxQ0FBcUMsQ0FBRTs7SUFFN0U7SUFDQSxJQUFJLENBQUNNLGVBQWUsR0FBRyxJQUFJLENBQUNDLHNCQUFzQixDQUFDQyxJQUFJLENBQUUsSUFBSSxDQUFFO0lBQy9ELElBQUksQ0FBQ0osZUFBZSxDQUFDSyxRQUFRLENBQUUsSUFBSSxDQUFDSCxlQUFlLENBQUU7RUFDdkQ7RUFFQSxJQUFXSixjQUFjQSxDQUFFQSxjQUFvQyxFQUFHO0lBQ2hFLElBQUksQ0FBQ1EsaUJBQWlCLENBQUVSLGNBQWMsQ0FBRTtFQUMxQztFQUVPUSxpQkFBaUJBLENBQUVSLGNBQW9DLEVBQVM7SUFDckU7SUFDQSxJQUFLLElBQUksQ0FBQ0EsY0FBYyxLQUFLQSxjQUFjLEVBQUc7TUFDNUM7SUFDRjtJQUVBLE1BQU1TLFFBQVEsR0FBRyxJQUFJLENBQUNSLEtBQUs7O0lBRTNCO0lBQ0EsSUFBSyxDQUFDLElBQUksQ0FBQ0gsWUFBWSxFQUFHO01BQ3hCLElBQUksQ0FBQ0ksZUFBZSxDQUFDUSxNQUFNLENBQUUsSUFBSSxDQUFDTixlQUFlLENBQUU7SUFDckQ7SUFFQSxJQUFJLENBQUNGLGVBQWUsR0FBR0YsY0FBYzs7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
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/TinyStaticProperty.js
// Copyright 2020-2022, University of Colorado Boulder

/**
 * An observable stub which satisfies some of the Property interface, which can store a (static/constant) value
 * and also notify listeners when that value has mutated. The actual value reference does not change, however it can
 * itself be mutated.
 *
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class TinyStaticProperty extends TinyProperty {
  // When set, it will be called whenever there is an attempt to read the value of this TinyStaticProperty.

  constructor(value, onAccessAttempt) {
    super(value);
    this.onAccessAttempt = onAccessAttempt;
  }

  /**
   * Returns the value. Overridden to support onAccessAttempt.
   */
  get() {
    this.onAccessAttempt();
    return super.get();
  }

  /**
   * Don't set the value of a TinyStaticProperty!
   */
  set(value) {
    throw new Error('Cannot set a TinyStaticProperty value');
  }

  /**
   * Returns true if the value can be set externally. Static Property values should only be mutated, not set.
   */
  isSettable() {
    return false;
  }

  /**
   * Directly notifies listeners of changes.
   */
  notifyListeners(oldValue) {
    // We use this.get() to ensure value is up to date with onAccessAttempt().
    this.emit(this.get(), oldValue, this);
  }

  /**
   * Adds listener and calls it immediately. If listener is already registered, this is a no-op. The initial
   * notification provides the current value for newValue and null for oldValue.
   */
  link(listener) {
    this.addListener(listener);

    // listener called with this.get() to ensure value is up to date with onAccessAttempt().
    listener(this.get(), null, this); // null should be used when an object is expected but unavailable
  }

  /**
   * Returns true if and only if the specified value equals the value of this property
   */
  equalsValue(value) {
    // checked with this.get() to ensure value is up to date with onAccessAttempt()
    return this.areValuesEqual(value, this.get());
  }
}
js_axon.register('TinyStaticProperty', TinyStaticProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiVGlueVByb3BlcnR5IiwiVGlueVN0YXRpY1Byb3BlcnR5IiwiY29uc3RydWN0b3IiLCJ2YWx1ZSIsIm9uQWNjZXNzQXR0ZW1wdCIsImdldCIsInNldCIsIkVycm9yIiwiaXNTZXR0YWJsZSIsIm5vdGlmeUxpc3RlbmVycyIsIm9sZFZhbHVlIiwiZW1pdCIsImxpbmsiLCJsaXN0ZW5lciIsImFkZExpc3RlbmVyIiwiZXF1YWxzVmFsdWUiLCJhcmVWYWx1ZXNFcXVhbCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVGlueVN0YXRpY1Byb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEFuIG9ic2VydmFibGUgc3R1YiB3aGljaCBzYXRpc2ZpZXMgc29tZSBvZiB0aGUgUHJvcGVydHkgaW50ZXJmYWNlLCB3aGljaCBjYW4gc3RvcmUgYSAoc3RhdGljL2NvbnN0YW50KSB2YWx1ZVxuICogYW5kIGFsc28gbm90aWZ5IGxpc3RlbmVycyB3aGVuIHRoYXQgdmFsdWUgaGFzIG11dGF0ZWQuIFRoZSBhY3R1YWwgdmFsdWUgcmVmZXJlbmNlIGRvZXMgbm90IGNoYW5nZSwgaG93ZXZlciBpdCBjYW5cbiAqIGl0c2VsZiBiZSBtdXRhdGVkLlxuICpcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IGF4b24gZnJvbSAnLi9heG9uLmpzJztcbmltcG9ydCBUaW55UHJvcGVydHkgZnJvbSAnLi9UaW55UHJvcGVydHkuanMnO1xuaW1wb3J0IHsgUHJvcGVydHlMaW5rTGlzdGVuZXIgfSBmcm9tICcuL1RSZWFkT25seVByb3BlcnR5LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGlueVN0YXRpY1Byb3BlcnR5PFQ+IGV4dGVuZHMgVGlueVByb3BlcnR5PFQ+IHtcblxuICAvLyBXaGVuIHNldCwgaXQgd2lsbCBiZSBjYWxsZWQgd2hlbmV2ZXIgdGhlcmUgaXMgYW4gYXR0ZW1wdCB0byByZWFkIHRoZSB2YWx1ZSBvZiB0aGlzIFRpbnlTdGF0aWNQcm9wZXJ0eS5cbiAgcHJpdmF0ZSByZWFkb25seSBvbkFjY2Vzc0F0dGVtcHQ6ICgpID0+IHZvaWQ7XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCB2YWx1ZTogVCwgb25BY2Nlc3NBdHRlbXB0OiAoKSA9PiB2b2lkICkge1xuICAgIHN1cGVyKCB2YWx1ZSApO1xuXG4gICAgdGhpcy5vbkFjY2Vzc0F0dGVtcHQgPSBvbkFjY2Vzc0F0dGVtcHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUuIE92ZXJyaWRkZW4gdG8gc3VwcG9ydCBvbkFjY2Vzc0F0dGVtcHQuXG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgZ2V0KCk6IFQge1xuICAgIHRoaXMub25BY2Nlc3NBdHRlbXB0KCk7XG5cbiAgICByZXR1cm4gc3VwZXIuZ2V0KCk7XG4gIH1cblxuICAvKipcbiAgICogRG9uJ3Qgc2V0IHRoZSB2YWx1ZSBvZiBhIFRpbnlTdGF0aWNQcm9wZXJ0eSFcbiAgICovXG4gIHB1YmxpYyBvdmVycmlkZSBzZXQoIHZhbHVlOiBUICk6IHZvaWQge1xuICAgIHRocm93IG5ldyBFcnJvciggJ0Nhbm5vdCBzZXQgYSBUaW55U3RhdGljUHJvcGVydHkgdmFsdWUnICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0cnVlIGlmIHRoZSB2YWx1ZSBjYW4gYmUgc2V0IGV4dGVybmFsbHkuIFN0YXRpYyBQcm9wZXJ0eSB2YWx1ZXMgc2hvdWxkIG9ubHkgYmUgbXV0YXRlZCwgbm90IHNldC5cbiAgICovXG4gIHB1YmxpYyBvdmVycmlkZSBpc1NldHRhYmxlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXJlY3RseSBub3RpZmllcyBsaXN0ZW5lcnMgb2YgY2hhbmdlcy5cbiAgICovXG4gIHB1YmxpYyBvdmVycmlkZSBub3RpZnlMaXN0ZW5lcnMoIG9sZFZhbHVlOiBUIHwgbnVsbCApOiB2b2lkIHtcblxuICAgIC8vIFdlIHVzZSB0aGlzLmdldCgpIHRvIGVuc3VyZSB2YWx1ZSBpcyB1cCB0byBkYXRlIHdpdGggb25BY2Nlc3NBdHRlbXB0KCkuXG4gICAgdGhpcy5lbWl0KCB0aGlzLmdldCgpLCBvbGRWYWx1ZSwgdGhpcyApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgbGlzdGVuZXIgYW5kIGNhbGxzIGl0IGltbWVkaWF0ZWx5LiBJZiBsaXN0ZW5lciBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQsIHRoaXMgaXMgYSBuby1vcC4gVGhlIGluaXRpYWxcbiAgICogbm90aWZpY2F0aW9uIHByb3ZpZGVzIHRoZSBjdXJyZW50IHZhbHVlIGZvciBuZXdWYWx1ZSBhbmQgbnVsbCBmb3Igb2xkVmFsdWUuXG4gICAqL1xuICBwdWJsaWMgb3ZlcnJpZGUgbGluayggbGlzdGVuZXI6IFByb3BlcnR5TGlua0xpc3RlbmVyPFQ+ICk6IHZvaWQge1xuICAgIHRoaXMuYWRkTGlzdGVuZXIoIGxpc3RlbmVyICk7XG5cbiAgICAvLyBsaXN0ZW5lciBjYWxsZWQgd2l0aCB0aGlzLmdldCgpIHRvIGVuc3VyZSB2YWx1ZSBpcyB1cCB0byBkYXRlIHdpdGggb25BY2Nlc3NBdHRlbXB0KCkuXG4gICAgbGlzdGVuZXIoIHRoaXMuZ2V0KCksIG51bGwsIHRoaXMgKTsgLy8gbnVsbCBzaG91bGQgYmUgdXNlZCB3aGVuIGFuIG9iamVjdCBpcyBleHBlY3RlZCBidXQgdW5hdmFpbGFibGVcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIHNwZWNpZmllZCB2YWx1ZSBlcXVhbHMgdGhlIHZhbHVlIG9mIHRoaXMgcHJvcGVydHlcbiAgICovXG4gIHByb3RlY3RlZCBvdmVycmlkZSBlcXVhbHNWYWx1ZSggdmFsdWU6IFQgKTogYm9vbGVhbiB7XG5cbiAgICAvLyBjaGVja2VkIHdpdGggdGhpcy5nZXQoKSB0byBlbnN1cmUgdmFsdWUgaXMgdXAgdG8gZGF0ZSB3aXRoIG9uQWNjZXNzQXR0ZW1wdCgpXG4gICAgcmV0dXJuIHRoaXMuYXJlVmFsdWVzRXF1YWwoIHZhbHVlLCB0aGlzLmdldCgpICk7XG4gIH1cbn1cblxuYXhvbi5yZWdpc3RlciggJ1RpbnlTdGF0aWNQcm9wZXJ0eScsIFRpbnlTdGF0aWNQcm9wZXJ0eSApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLElBQUksTUFBTSxXQUFXO0FBQzVCLE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7QUFHNUMsZUFBZSxNQUFNQyxrQkFBa0IsU0FBWUQsWUFBWSxDQUFJO0VBRWpFOztFQUdPRSxXQUFXQSxDQUFFQyxLQUFRLEVBQUVDLGVBQTJCLEVBQUc7SUFDMUQsS0FBSyxDQUFFRCxLQUFLLENBQUU7SUFFZCxJQUFJLENBQUNDLGVBQWUsR0FBR0EsZUFBZTtFQUN4Qzs7RUFFQTtBQUNGO0FBQ0E7RUFDa0JDLEdBQUdBLENBQUEsRUFBTTtJQUN2QixJQUFJLENBQUNELGVBQWUsRUFBRTtJQUV0QixPQUFPLEtBQUssQ0FBQ0MsR0FBRyxFQUFFO0VBQ3BCOztFQUVBO0FBQ0Y7QUFDQTtFQUNrQkMsR0FBR0EsQ0FBRUgsS0FBUSxFQUFTO0lBQ3BDLE1BQU0sSUFBSUksS0FBSyxDQUFFLHVDQUF1QyxDQUFFO0VBQzVEOztFQUVBO0FBQ0Y7QUFDQTtFQUNrQkMsVUFBVUEsQ0FBQSxFQUFZO0lBQ3BDLE9BQU8sS0FBSztFQUNkOztFQUVBO0FBQ0Y7QUFDQTtFQUNrQkMsZUFBZUEsQ0FBRUMsUUFBa0IsRUFBUztJQUUxRDtJQUNBLElBQUksQ0FBQ0MsSUFBSSxDQUFFLElBQUksQ0FBQ04sR0FBRyxFQUFFLEVBQUVLLFFBQVEsRUFBRSxJQUFJLENBQUU7RUFDekM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDa0JFLElBQUlBLENBQUVDLFFBQWlDLEVBQVM7SUFDOUQsSUFBSSxDQUFDQyxXQUFXLENBQUVELFFBQVEsQ0FBRTs7SUFFNUI7SUFDQUEsUUFBUSxDQUFFLElBQUksQ0FBQ1IsR0FBRyxFQUFFLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBRSxDQUFDLENBQUM7RUFDdEM7O0VBRUE7QUFDRjtBQUNBO0VBQ3FCVSxXQUFXQSxDQUFFWixLQUFRLEVBQVk7SUFFbEQ7SUFDQSxPQUFPLElBQUksQ0FBQ2EsY0FBYyxDQUFFYixLQUFLLEVBQUUsSUFBSSxDQUFDRSxHQUFHLEVBQUUsQ0FBRTtFQUNqRDtBQUNGO0FBRUFOLElBQUksQ0FBQ2tCLFFBQVEsQ0FBRSxvQkFBb0IsRUFBRWhCLGtCQUFrQixDQUFFIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/TRangedProperty.js
// Copyright 2023, University of Colorado Boulder




// Minimal types for Properties that support a rangeProperty.

function isTRangedProperty(something) {
  return (something instanceof ReadOnlyProperty || something instanceof TinyProperty) && something.isSettable() &&
  // @ts-expect-error we are checking on the pressence, but can't use hasOwnProperty in case it is implemented wil es5 getters and setters
  !!something.range && !!something.rangeProperty;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFkT25seVByb3BlcnR5IiwiVGlueVByb3BlcnR5IiwiaXNUUmFuZ2VkUHJvcGVydHkiLCJzb21ldGhpbmciLCJpc1NldHRhYmxlIiwicmFuZ2UiLCJyYW5nZVByb3BlcnR5Il0sInNvdXJjZXMiOlsiVFJhbmdlZFByb3BlcnR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuaW1wb3J0IExpbmthYmxlUHJvcGVydHkgZnJvbSAnLi9MaW5rYWJsZVByb3BlcnR5LmpzJztcbmltcG9ydCBUUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuL1RSZWFkT25seVByb3BlcnR5LmpzJztcbmltcG9ydCBSYW5nZSBmcm9tICcuLi8uLi9kb3QvanMvUmFuZ2UuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5pbXBvcnQgUmVhZE9ubHlQcm9wZXJ0eSBmcm9tICcuL1JlYWRPbmx5UHJvcGVydHkuanMnO1xuaW1wb3J0IFRpbnlQcm9wZXJ0eSBmcm9tICcuL1RpbnlQcm9wZXJ0eS5qcyc7XG5cbi8vIE1pbmltYWwgdHlwZXMgZm9yIFByb3BlcnRpZXMgdGhhdCBzdXBwb3J0IGEgcmFuZ2VQcm9wZXJ0eS5cbmV4cG9ydCB0eXBlIFRSYW5nZWRQcm9wZXJ0eSA9IExpbmthYmxlUHJvcGVydHk8bnVtYmVyPiAmIHsgcmFuZ2U6IFJhbmdlOyByZWFkb25seSByYW5nZVByb3BlcnR5OiBUUmVhZE9ubHlQcm9wZXJ0eTxSYW5nZT4gfTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzVFJhbmdlZFByb3BlcnR5KCBzb21ldGhpbmc6IEludGVudGlvbmFsQW55ICk6IHNvbWV0aGluZyBpcyBUUmFuZ2VkUHJvcGVydHkge1xuICByZXR1cm4gKCBzb21ldGhpbmcgaW5zdGFuY2VvZiBSZWFkT25seVByb3BlcnR5IHx8IHNvbWV0aGluZyBpbnN0YW5jZW9mIFRpbnlQcm9wZXJ0eSApICYmIHNvbWV0aGluZy5pc1NldHRhYmxlKCkgJiZcblxuICAgICAgICAgLy8gQHRzLWV4cGVjdC1lcnJvciB3ZSBhcmUgY2hlY2tpbmcgb24gdGhlIHByZXNzZW5jZSwgYnV0IGNhbid0IHVzZSBoYXNPd25Qcm9wZXJ0eSBpbiBjYXNlIGl0IGlzIGltcGxlbWVudGVkIHdpbCBlczUgZ2V0dGVycyBhbmQgc2V0dGVyc1xuICAgICAgICAgISFzb21ldGhpbmcucmFuZ2UgJiYgISFzb21ldGhpbmcucmFuZ2VQcm9wZXJ0eTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgVFJhbmdlZFByb3BlcnR5OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBTUEsT0FBT0EsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBQ3BELE9BQU9DLFlBQVksTUFBTSxtQkFBbUI7O0FBRTVDOztBQUdBLE9BQU8sU0FBU0MsaUJBQWlCQSxDQUFFQyxTQUF5QixFQUFpQztFQUMzRixPQUFPLENBQUVBLFNBQVMsWUFBWUgsZ0JBQWdCLElBQUlHLFNBQVMsWUFBWUYsWUFBWSxLQUFNRSxTQUFTLENBQUNDLFVBQVUsRUFBRTtFQUV4RztFQUNBLENBQUMsQ0FBQ0QsU0FBUyxDQUFDRSxLQUFLLElBQUksQ0FBQyxDQUFDRixTQUFTLENBQUNHLGFBQWE7QUFDdkQifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/UnitConversionProperty.js
// Copyright 2022-2023, University of Colorado Boulder

/**
 * A MappedProperty specialized for unit conversion. Just provide multiplicative factor to convert between the units,
 * or optionally a map/inverseMap. Additionally if there is a rangeProperty on the source, this Property will have a
 * mapped range.
 *
 * For example:
 * const metersProperty = new NumberProperty( 0.5, { range: new Range( 0, 1 ) } );
 * const centimetersProperty = new UnitConversionProperty( metersProperty, { factor: 100 } );
 * centimetersProperty.value; // 50
 * centimetersProperty.range; // Range( 0, 100 )
 *
 * // One way
 * metersProperty.value = 0.25
 * centimetersProperty.value; // 25
 *
 * // Bidirectional
 * centimetersProperty.value = 100;
 * metersProperty.value; // 1
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */








class UnitConversionProperty extends MappedProperty {
  constructor(property, providedOptions) {
    const map = input => input * providedOptions.factor;
    const inverseMap = output => output / providedOptions.factor;
    const options = optionize()({
      // Bidirectional by default, since we'll have a map and inverseMap guaranteed
      bidirectional: true,
      map: map,
      inverseMap: inverseMap
    }, providedOptions);

    // @ts-expect-error Expression produces a union type that is too complex to represent.
    super(property, options);
    this._property = property;
    this.rangeProperty = new Property(DEFAULT_RANGE);
    if (isTRangedProperty(property)) {
      // Watch the range of the target Property, and update ours to match
      this._rangeListener = range => {
        const min = map(range.min);
        const max = map(range.max);
        // Handle a negative factor or something else where the min/max gets swapped
        this.rangeProperty.value = new js_Range(Math.min(min, max), Math.max(min, max));
      };
      property.rangeProperty.link(this._rangeListener);
    }
  }
  get range() {
    return this.rangeProperty.value;
  }

  // NOTE: NOT bidirectional yet!
  set range(value) {
    this.rangeProperty.value = value;
  }
  dispose() {
    if (isTRangedProperty(this._property)) {
      this._property.rangeProperty.unlink(this._rangeListener);
    }
    this.rangeProperty.dispose();
  }
}
js_axon.register('UnitConversionProperty', UnitConversionProperty);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIiwiUmFuZ2UiLCJNYXBwZWRQcm9wZXJ0eSIsIlByb3BlcnR5IiwiREVGQVVMVF9SQU5HRSIsIm9wdGlvbml6ZSIsImlzVFJhbmdlZFByb3BlcnR5IiwiVW5pdENvbnZlcnNpb25Qcm9wZXJ0eSIsImNvbnN0cnVjdG9yIiwicHJvcGVydHkiLCJwcm92aWRlZE9wdGlvbnMiLCJtYXAiLCJpbnB1dCIsImZhY3RvciIsImludmVyc2VNYXAiLCJvdXRwdXQiLCJvcHRpb25zIiwiYmlkaXJlY3Rpb25hbCIsIl9wcm9wZXJ0eSIsInJhbmdlUHJvcGVydHkiLCJfcmFuZ2VMaXN0ZW5lciIsInJhbmdlIiwibWluIiwibWF4IiwidmFsdWUiLCJNYXRoIiwibGluayIsImRpc3Bvc2UiLCJ1bmxpbmsiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlVuaXRDb252ZXJzaW9uUHJvcGVydHkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjItMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQSBNYXBwZWRQcm9wZXJ0eSBzcGVjaWFsaXplZCBmb3IgdW5pdCBjb252ZXJzaW9uLiBKdXN0IHByb3ZpZGUgbXVsdGlwbGljYXRpdmUgZmFjdG9yIHRvIGNvbnZlcnQgYmV0d2VlbiB0aGUgdW5pdHMsXG4gKiBvciBvcHRpb25hbGx5IGEgbWFwL2ludmVyc2VNYXAuIEFkZGl0aW9uYWxseSBpZiB0aGVyZSBpcyBhIHJhbmdlUHJvcGVydHkgb24gdGhlIHNvdXJjZSwgdGhpcyBQcm9wZXJ0eSB3aWxsIGhhdmUgYVxuICogbWFwcGVkIHJhbmdlLlxuICpcbiAqIEZvciBleGFtcGxlOlxuICogY29uc3QgbWV0ZXJzUHJvcGVydHkgPSBuZXcgTnVtYmVyUHJvcGVydHkoIDAuNSwgeyByYW5nZTogbmV3IFJhbmdlKCAwLCAxICkgfSApO1xuICogY29uc3QgY2VudGltZXRlcnNQcm9wZXJ0eSA9IG5ldyBVbml0Q29udmVyc2lvblByb3BlcnR5KCBtZXRlcnNQcm9wZXJ0eSwgeyBmYWN0b3I6IDEwMCB9ICk7XG4gKiBjZW50aW1ldGVyc1Byb3BlcnR5LnZhbHVlOyAvLyA1MFxuICogY2VudGltZXRlcnNQcm9wZXJ0eS5yYW5nZTsgLy8gUmFuZ2UoIDAsIDEwMCApXG4gKlxuICogLy8gT25lIHdheVxuICogbWV0ZXJzUHJvcGVydHkudmFsdWUgPSAwLjI1XG4gKiBjZW50aW1ldGVyc1Byb3BlcnR5LnZhbHVlOyAvLyAyNVxuICpcbiAqIC8vIEJpZGlyZWN0aW9uYWxcbiAqIGNlbnRpbWV0ZXJzUHJvcGVydHkudmFsdWUgPSAxMDA7XG4gKiBtZXRlcnNQcm9wZXJ0eS52YWx1ZTsgLy8gMVxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0IFJhbmdlIGZyb20gJy4uLy4uL2RvdC9qcy9SYW5nZS5qcyc7XG5pbXBvcnQgVFByb3BlcnR5IGZyb20gJy4vVFByb3BlcnR5LmpzJztcbmltcG9ydCBNYXBwZWRQcm9wZXJ0eSwgeyBNYXBwZWRQcm9wZXJ0eU9wdGlvbnMgfSBmcm9tICcuL01hcHBlZFByb3BlcnR5LmpzJztcbmltcG9ydCBQcm9wZXJ0eSBmcm9tICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCB7IERFRkFVTFRfUkFOR0UgfSBmcm9tICcuL051bWJlclByb3BlcnR5LmpzJztcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL29wdGlvbml6ZS5qcyc7XG5pbXBvcnQgVFJhbmdlZFByb3BlcnR5LCB7IGlzVFJhbmdlZFByb3BlcnR5IH0gZnJvbSAnLi9UUmFuZ2VkUHJvcGVydHkuanMnO1xuXG50eXBlIFNlbGZPcHRpb25zID0ge1xuICAvLyBUaGUgbXVsdGlwbGljYXRpdmUgZmFjdG9yIHRvIGNvbnZlcnQgZnJvbSBJTlBVVCA9PiBPVVRQVVQsIGUuZy5cbiAgLy8gdGhpcy52YWx1ZSA9PT0gZmFjdG9yICogcHJvcGVydHkudmFsdWVcbiAgLy8gVGhpcyB3aWxsIGJlIHVzZWQgdG8gcHJvdmlkZSBkZWZhdWx0cyBmb3IgbWFwL2ludmVyc2VNYXAgaWYgcHJvdmlkZWRcbiAgZmFjdG9yOiBudW1iZXI7XG59O1xudHlwZSBQYXJlbnRPcHRpb25zID0gTWFwcGVkUHJvcGVydHlPcHRpb25zPG51bWJlciwgbnVtYmVyPjtcbmV4cG9ydCB0eXBlIFVuaXRDb252ZXJzaW9uUHJvcGVydHlPcHRpb25zID0gU2VsZk9wdGlvbnMgJiBQYXJlbnRPcHRpb25zO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVbml0Q29udmVyc2lvblByb3BlcnR5IGV4dGVuZHMgTWFwcGVkUHJvcGVydHk8bnVtYmVyLCBudW1iZXI+IGltcGxlbWVudHMgVFJhbmdlZFByb3BlcnR5IHtcblxuICBwdWJsaWMgcmVhZG9ubHkgcmFuZ2VQcm9wZXJ0eTogVFByb3BlcnR5PFJhbmdlPjtcblxuICBwcml2YXRlIF9wcm9wZXJ0eTogKCBUUHJvcGVydHk8bnVtYmVyPiB8IFRSYW5nZWRQcm9wZXJ0eSApO1xuICBwcml2YXRlIF9yYW5nZUxpc3RlbmVyPzogKCByYW5nZTogUmFuZ2UgKSA9PiB2b2lkO1xuXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJvcGVydHk6ICggVFByb3BlcnR5PG51bWJlcj4gfCBUUmFuZ2VkUHJvcGVydHkgKSwgcHJvdmlkZWRPcHRpb25zOiBVbml0Q29udmVyc2lvblByb3BlcnR5T3B0aW9ucyApIHtcblxuICAgIGNvbnN0IG1hcCA9ICggaW5wdXQ6IG51bWJlciApID0+IGlucHV0ICogcHJvdmlkZWRPcHRpb25zLmZhY3RvcjtcbiAgICBjb25zdCBpbnZlcnNlTWFwID0gKCBvdXRwdXQ6IG51bWJlciApID0+IG91dHB1dCAvIHByb3ZpZGVkT3B0aW9ucy5mYWN0b3I7XG4gICAgY29uc3Qgb3B0aW9ucyA9IG9wdGlvbml6ZTxVbml0Q29udmVyc2lvblByb3BlcnR5T3B0aW9ucywgU2VsZk9wdGlvbnMsIFBhcmVudE9wdGlvbnM+KCkoIHtcblxuICAgICAgLy8gQmlkaXJlY3Rpb25hbCBieSBkZWZhdWx0LCBzaW5jZSB3ZSdsbCBoYXZlIGEgbWFwIGFuZCBpbnZlcnNlTWFwIGd1YXJhbnRlZWRcbiAgICAgIGJpZGlyZWN0aW9uYWw6IHRydWUsXG5cbiAgICAgIG1hcDogbWFwLFxuICAgICAgaW52ZXJzZU1hcDogaW52ZXJzZU1hcFxuICAgIH0sIHByb3ZpZGVkT3B0aW9ucyApO1xuXG4gICAgLy8gQHRzLWV4cGVjdC1lcnJvciBFeHByZXNzaW9uIHByb2R1Y2VzIGEgdW5pb24gdHlwZSB0aGF0IGlzIHRvbyBjb21wbGV4IHRvIHJlcHJlc2VudC5cbiAgICBzdXBlciggcHJvcGVydHksIG9wdGlvbnMgKTtcblxuICAgIHRoaXMuX3Byb3BlcnR5ID0gcHJvcGVydHk7XG5cbiAgICB0aGlzLnJhbmdlUHJvcGVydHkgPSBuZXcgUHJvcGVydHk8UmFuZ2U+KCBERUZBVUxUX1JBTkdFICk7XG5cbiAgICBpZiAoIGlzVFJhbmdlZFByb3BlcnR5KCBwcm9wZXJ0eSApICkge1xuXG4gICAgICAvLyBXYXRjaCB0aGUgcmFuZ2Ugb2YgdGhlIHRhcmdldCBQcm9wZXJ0eSwgYW5kIHVwZGF0ZSBvdXJzIHRvIG1hdGNoXG4gICAgICB0aGlzLl9yYW5nZUxpc3RlbmVyID0gKCByYW5nZTogUmFuZ2UgKSA9PiB7XG4gICAgICAgIGNvbnN0IG1pbiA9IG1hcCggcmFuZ2UubWluICk7XG4gICAgICAgIGNvbnN0IG1heCA9IG1hcCggcmFuZ2UubWF4ICk7XG4gICAgICAgIC8vIEhhbmRsZSBhIG5lZ2F0aXZlIGZhY3RvciBvciBzb21ldGhpbmcgZWxzZSB3aGVyZSB0aGUgbWluL21heCBnZXRzIHN3YXBwZWRcbiAgICAgICAgdGhpcy5yYW5nZVByb3BlcnR5LnZhbHVlID0gbmV3IFJhbmdlKCBNYXRoLm1pbiggbWluLCBtYXggKSwgTWF0aC5tYXgoIG1pbiwgbWF4ICkgKTtcbiAgICAgIH07XG4gICAgICBwcm9wZXJ0eS5yYW5nZVByb3BlcnR5LmxpbmsoIHRoaXMuX3JhbmdlTGlzdGVuZXIgKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IHJhbmdlKCk6IFJhbmdlIHtcbiAgICByZXR1cm4gdGhpcy5yYW5nZVByb3BlcnR5LnZhbHVlO1xuICB9XG5cbiAgLy8gTk9URTogTk9UIGJpZGlyZWN0aW9uYWwgeWV0IVxuICBwdWJsaWMgc2V0IHJhbmdlKCB2YWx1ZTogUmFuZ2UgKSB7XG4gICAgdGhpcy5yYW5nZVByb3BlcnR5LnZhbHVlID0gdmFsdWU7XG4gIH1cblxuICBwdWJsaWMgb3ZlcnJpZGUgZGlzcG9zZSgpOiB2b2lkIHtcbiAgICBpZiAoIGlzVFJhbmdlZFByb3BlcnR5KCB0aGlzLl9wcm9wZXJ0eSApICkge1xuICAgICAgdGhpcy5fcHJvcGVydHkucmFuZ2VQcm9wZXJ0eS51bmxpbmsoIHRoaXMuX3JhbmdlTGlzdGVuZXIhICk7XG4gICAgfVxuXG4gICAgdGhpcy5yYW5nZVByb3BlcnR5LmRpc3Bvc2UoKTtcbiAgfVxufVxuXG5heG9uLnJlZ2lzdGVyKCAnVW5pdENvbnZlcnNpb25Qcm9wZXJ0eScsIFVuaXRDb252ZXJzaW9uUHJvcGVydHkgKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLElBQUksTUFBTSxXQUFXO0FBQzVCLE9BQU9DLEtBQUssTUFBTSx1QkFBdUI7QUFFekMsT0FBT0MsY0FBYyxNQUFpQyxxQkFBcUI7QUFDM0UsT0FBT0MsUUFBUSxNQUFNLGVBQWU7QUFDcEMsU0FBU0MsYUFBYSxRQUFRLHFCQUFxQjtBQUNuRCxPQUFPQyxTQUFTLE1BQU0saUNBQWlDO0FBQ3ZELFNBQTBCQyxpQkFBaUIsUUFBUSxzQkFBc0I7QUFXekUsZUFBZSxNQUFNQyxzQkFBc0IsU0FBU0wsY0FBYyxDQUE0QztFQU9yR00sV0FBV0EsQ0FBRUMsUUFBaUQsRUFBRUMsZUFBOEMsRUFBRztJQUV0SCxNQUFNQyxHQUFHLEdBQUtDLEtBQWEsSUFBTUEsS0FBSyxHQUFHRixlQUFlLENBQUNHLE1BQU07SUFDL0QsTUFBTUMsVUFBVSxHQUFLQyxNQUFjLElBQU1BLE1BQU0sR0FBR0wsZUFBZSxDQUFDRyxNQUFNO0lBQ3hFLE1BQU1HLE9BQU8sR0FBR1gsU0FBUyxFQUE2RCxDQUFFO01BRXRGO01BQ0FZLGFBQWEsRUFBRSxJQUFJO01BRW5CTixHQUFHLEVBQUVBLEdBQUc7TUFDUkcsVUFBVSxFQUFFQTtJQUNkLENBQUMsRUFBRUosZUFBZSxDQUFFOztJQUVwQjtJQUNBLEtBQUssQ0FBRUQsUUFBUSxFQUFFTyxPQUFPLENBQUU7SUFFMUIsSUFBSSxDQUFDRSxTQUFTLEdBQUdULFFBQVE7SUFFekIsSUFBSSxDQUFDVSxhQUFhLEdBQUcsSUFBSWhCLFFBQVEsQ0FBU0MsYUFBYSxDQUFFO0lBRXpELElBQUtFLGlCQUFpQixDQUFFRyxRQUFRLENBQUUsRUFBRztNQUVuQztNQUNBLElBQUksQ0FBQ1csY0FBYyxHQUFLQyxLQUFZLElBQU07UUFDeEMsTUFBTUMsR0FBRyxHQUFHWCxHQUFHLENBQUVVLEtBQUssQ0FBQ0MsR0FBRyxDQUFFO1FBQzVCLE1BQU1DLEdBQUcsR0FBR1osR0FBRyxDQUFFVSxLQUFLLENBQUNFLEdBQUcsQ0FBRTtRQUM1QjtRQUNBLElBQUksQ0FBQ0osYUFBYSxDQUFDSyxLQUFLLEdBQUcsSUFBSXZCLEtBQUssQ0FBRXdCLElBQUksQ0FBQ0gsR0FBRyxDQUFFQSxHQUFHLEVBQUVDLEdBQUcsQ0FBRSxFQUFFRSxJQUFJLENBQUNGLEdBQUcsQ0FBRUQsR0FBRyxFQUFFQyxHQUFHLENBQUUsQ0FBRTtNQUNwRixDQUFDO01BQ0RkLFFBQVEsQ0FBQ1UsYUFBYSxDQUFDTyxJQUFJLENBQUUsSUFBSSxDQUFDTixjQUFjLENBQUU7SUFDcEQ7RUFDRjtFQUVBLElBQVdDLEtBQUtBLENBQUEsRUFBVTtJQUN4QixPQUFPLElBQUksQ0FBQ0YsYUFBYSxDQUFDSyxLQUFLO0VBQ2pDOztFQUVBO0VBQ0EsSUFBV0gsS0FBS0EsQ0FBRUcsS0FBWSxFQUFHO0lBQy9CLElBQUksQ0FBQ0wsYUFBYSxDQUFDSyxLQUFLLEdBQUdBLEtBQUs7RUFDbEM7RUFFZ0JHLE9BQU9BLENBQUEsRUFBUztJQUM5QixJQUFLckIsaUJBQWlCLENBQUUsSUFBSSxDQUFDWSxTQUFTLENBQUUsRUFBRztNQUN6QyxJQUFJLENBQUNBLFNBQVMsQ0FBQ0MsYUFBYSxDQUFDUyxNQUFNLENBQUUsSUFBSSxDQUFDUixjQUFjLENBQUc7SUFDN0Q7SUFFQSxJQUFJLENBQUNELGFBQWEsQ0FBQ1EsT0FBTyxFQUFFO0VBQzlCO0FBQ0Y7QUFFQTNCLElBQUksQ0FBQzZCLFFBQVEsQ0FBRSx3QkFBd0IsRUFBRXRCLHNCQUFzQixDQUFFIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/axon/js/main.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Module that includes all axon dependencies, so that requiring this module will return an object
 * that consists of the entire exported 'axon' namespace API.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */






























/* harmony default export */ const main = ((/* unused pure expression or super */ null && (axon)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJheG9uIl0sInNvdXJjZXMiOlsibWFpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBNb2R1bGUgdGhhdCBpbmNsdWRlcyBhbGwgYXhvbiBkZXBlbmRlbmNpZXMsIHNvIHRoYXQgcmVxdWlyaW5nIHRoaXMgbW9kdWxlIHdpbGwgcmV0dXJuIGFuIG9iamVjdFxuICogdGhhdCBjb25zaXN0cyBvZiB0aGUgZW50aXJlIGV4cG9ydGVkICdheG9uJyBuYW1lc3BhY2UgQVBJLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgJy4vYW5pbWF0aW9uRnJhbWVUaW1lci5qcyc7XG5pbXBvcnQgYXhvbiBmcm9tICcuL2F4b24uanMnO1xuaW1wb3J0ICcuL0Jvb2xlYW5Qcm9wZXJ0eS5qcyc7XG5pbXBvcnQgJy4vQ2FsbGJhY2tUaW1lci5qcyc7XG5pbXBvcnQgJy4vY3JlYXRlT2JzZXJ2YWJsZUFycmF5LmpzJztcbmltcG9ydCAnLi9EZXJpdmVkUHJvcGVydHkuanMnO1xuaW1wb3J0ICcuL0R5bmFtaWNQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgJy4vRW1pdHRlci5qcyc7XG5pbXBvcnQgJy4vRW51bWVyYXRpb25EZXByZWNhdGVkUHJvcGVydHkuanMnO1xuaW1wb3J0ICcuL01hcHBlZFByb3BlcnR5LmpzJztcbmltcG9ydCAnLi9NdWx0aWxpbmsuanMnO1xuaW1wb3J0ICcuL051bWJlclByb3BlcnR5LmpzJztcbmltcG9ydCAnLi9QYXR0ZXJuU3RyaW5nUHJvcGVydHkuanMnO1xuaW1wb3J0ICcuL1Byb3BlcnR5LmpzJztcbmltcG9ydCAnLi9Qcm9wZXJ0eVN0YXRlSGFuZGxlci5qcyc7XG5pbXBvcnQgJy4vcHJvcGVydHlTdGF0ZUhhbmRsZXJTaW5nbGV0b24uanMnO1xuaW1wb3J0ICcuL1Byb3BlcnR5U3RhdGVQaGFzZS5qcyc7XG5pbXBvcnQgJy4vc3RlcFRpbWVyLmpzJztcbmltcG9ydCAnLi9TdHJpbmdQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgJy4vVGltZXIuanMnO1xuaW1wb3J0ICcuL1RpbnlFbWl0dGVyLmpzJztcbmltcG9ydCAnLi9UaW55Rm9yd2FyZGluZ1Byb3BlcnR5LmpzJztcbmltcG9ydCAnLi9UaW55T3ZlcnJpZGVQcm9wZXJ0eS5qcyc7XG5pbXBvcnQgJy4vVGlueVByb3BlcnR5LmpzJztcbmltcG9ydCAnLi9UaW55U3RhdGljUHJvcGVydHkuanMnO1xuaW1wb3J0ICcuL1VuaXRDb252ZXJzaW9uUHJvcGVydHkuanMnO1xuaW1wb3J0ICcuL3VuaXRzLmpzJztcbmltcG9ydCAnLi92YWxpZGF0ZS5qcyc7XG5pbXBvcnQgJy4vVmFsaWRhdGlvbi5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGF4b247Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBTywwQkFBMEI7QUFDakMsT0FBT0EsSUFBSSxNQUFNLFdBQVc7QUFDNUIsT0FBTyxzQkFBc0I7QUFDN0IsT0FBTyxvQkFBb0I7QUFDM0IsT0FBTyw0QkFBNEI7QUFDbkMsT0FBTyxzQkFBc0I7QUFDN0IsT0FBTyxzQkFBc0I7QUFDN0IsT0FBTyxjQUFjO0FBQ3JCLE9BQU8sb0NBQW9DO0FBQzNDLE9BQU8scUJBQXFCO0FBQzVCLE9BQU8sZ0JBQWdCO0FBQ3ZCLE9BQU8scUJBQXFCO0FBQzVCLE9BQU8sNEJBQTRCO0FBQ25DLE9BQU8sZUFBZTtBQUN0QixPQUFPLDJCQUEyQjtBQUNsQyxPQUFPLG9DQUFvQztBQUMzQyxPQUFPLHlCQUF5QjtBQUNoQyxPQUFPLGdCQUFnQjtBQUN2QixPQUFPLHFCQUFxQjtBQUM1QixPQUFPLFlBQVk7QUFDbkIsT0FBTyxrQkFBa0I7QUFDekIsT0FBTyw2QkFBNkI7QUFDcEMsT0FBTywyQkFBMkI7QUFDbEMsT0FBTyxtQkFBbUI7QUFDMUIsT0FBTyx5QkFBeUI7QUFDaEMsT0FBTyw2QkFBNkI7QUFDcEMsT0FBTyxZQUFZO0FBQ25CLE9BQU8sZUFBZTtBQUN0QixPQUFPLGlCQUFpQjtBQUV4QixlQUFlQSxJQUFJIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/arrayDifference.js
// Copyright 2018-2021, University of Colorado Boulder

/**
 * Computes what elements are in both arrays, or only one array.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/**
 * Given two arrays, find the items that are only in one of them (mutates the aOnly/bOnly/inBoth parameters)
 * @public
 *
 * NOTE: Assumes there are no duplicate values in each individual array.
 *
 * For example:
 *   var a = [ 1, 2 ];
 *   var b = [ 5, 2, 0 ];
 *   var aOnly = [];
 *   var bOnly = [];
 *   var inBoth = [];
 *   arrayDifference( a, b, aOnly, bOnly, inBoth );
 *   // aOnly is [ 1 ]
 *   // bOnly is [ 5, 0 ]
 *   // inBoth is [ 2 ]
 *
 * @param {Array.<*>} a - Input array
 * @param {Array.<*>} b - Input array
 * @param {Array.<*>} [aOnly] - Output array (will be filled with all elements that are in `a` but NOT in `b`).
 *                              Ordered based on the order of `a`.
 * @param {Array.<*>} [bOnly] - Output array (will be filled with all elements that are in `b` but NOT in `a`).
 *                              Ordered based on the order of `b`.
 * @param {Array.<*>} [inBoth] - Output array (will be filled with all elements that are in both `a` AND `b`).
 *                               Ordered based on the order of `a`.
 * @returns {Array.<*>} - Returns the value of aOnly (the classic definition of difference)
 */
function arrayDifference(a, b, aOnly, bOnly, inBoth) {
  assert && assert(Array.isArray(a) && _.uniq(a).length === a.length, 'a is not an array of unique items');
  assert && assert(Array.isArray(b) && _.uniq(b).length === b.length, 'b is not an array of unique items');
  aOnly = aOnly || [];
  bOnly = bOnly || [];
  inBoth = inBoth || [];
  assert && assert(Array.isArray(aOnly) && aOnly.length === 0);
  assert && assert(Array.isArray(bOnly) && bOnly.length === 0);
  assert && assert(Array.isArray(inBoth) && inBoth.length === 0);
  Array.prototype.push.apply(aOnly, a);
  Array.prototype.push.apply(bOnly, b);
  outerLoop:
  // eslint-disable-line no-labels
  for (let i = 0; i < aOnly.length; i++) {
    const aItem = aOnly[i];
    for (let j = 0; j < bOnly.length; j++) {
      const bItem = bOnly[j];
      if (aItem === bItem) {
        inBoth.push(aItem);
        aOnly.splice(i, 1);
        bOnly.splice(j, 1);
        j = 0;
        if (i === aOnly.length) {
          break outerLoop; // eslint-disable-line no-labels
        }

        i -= 1;
      }
    }
  }

  // We return the classic meaning of "difference"
  return aOnly;
}
js_phetCore.register('arrayDifference', arrayDifference);
/* harmony default export */ const js_arrayDifference = ((/* unused pure expression or super */ null && (arrayDifference)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImFycmF5RGlmZmVyZW5jZSIsImEiLCJiIiwiYU9ubHkiLCJiT25seSIsImluQm90aCIsImFzc2VydCIsIkFycmF5IiwiaXNBcnJheSIsIl8iLCJ1bmlxIiwibGVuZ3RoIiwicHJvdG90eXBlIiwicHVzaCIsImFwcGx5Iiwib3V0ZXJMb29wIiwiaSIsImFJdGVtIiwiaiIsImJJdGVtIiwic3BsaWNlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJhcnJheURpZmZlcmVuY2UuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTgtMjAyMSwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ29tcHV0ZXMgd2hhdCBlbGVtZW50cyBhcmUgaW4gYm90aCBhcnJheXMsIG9yIG9ubHkgb25lIGFycmF5LlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbi8qKlxuICogR2l2ZW4gdHdvIGFycmF5cywgZmluZCB0aGUgaXRlbXMgdGhhdCBhcmUgb25seSBpbiBvbmUgb2YgdGhlbSAobXV0YXRlcyB0aGUgYU9ubHkvYk9ubHkvaW5Cb3RoIHBhcmFtZXRlcnMpXG4gKiBAcHVibGljXG4gKlxuICogTk9URTogQXNzdW1lcyB0aGVyZSBhcmUgbm8gZHVwbGljYXRlIHZhbHVlcyBpbiBlYWNoIGluZGl2aWR1YWwgYXJyYXkuXG4gKlxuICogRm9yIGV4YW1wbGU6XG4gKiAgIHZhciBhID0gWyAxLCAyIF07XG4gKiAgIHZhciBiID0gWyA1LCAyLCAwIF07XG4gKiAgIHZhciBhT25seSA9IFtdO1xuICogICB2YXIgYk9ubHkgPSBbXTtcbiAqICAgdmFyIGluQm90aCA9IFtdO1xuICogICBhcnJheURpZmZlcmVuY2UoIGEsIGIsIGFPbmx5LCBiT25seSwgaW5Cb3RoICk7XG4gKiAgIC8vIGFPbmx5IGlzIFsgMSBdXG4gKiAgIC8vIGJPbmx5IGlzIFsgNSwgMCBdXG4gKiAgIC8vIGluQm90aCBpcyBbIDIgXVxuICpcbiAqIEBwYXJhbSB7QXJyYXkuPCo+fSBhIC0gSW5wdXQgYXJyYXlcbiAqIEBwYXJhbSB7QXJyYXkuPCo+fSBiIC0gSW5wdXQgYXJyYXlcbiAqIEBwYXJhbSB7QXJyYXkuPCo+fSBbYU9ubHldIC0gT3V0cHV0IGFycmF5ICh3aWxsIGJlIGZpbGxlZCB3aXRoIGFsbCBlbGVtZW50cyB0aGF0IGFyZSBpbiBgYWAgYnV0IE5PVCBpbiBgYmApLlxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICBPcmRlcmVkIGJhc2VkIG9uIHRoZSBvcmRlciBvZiBgYWAuXG4gKiBAcGFyYW0ge0FycmF5LjwqPn0gW2JPbmx5XSAtIE91dHB1dCBhcnJheSAod2lsbCBiZSBmaWxsZWQgd2l0aCBhbGwgZWxlbWVudHMgdGhhdCBhcmUgaW4gYGJgIGJ1dCBOT1QgaW4gYGFgKS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgT3JkZXJlZCBiYXNlZCBvbiB0aGUgb3JkZXIgb2YgYGJgLlxuICogQHBhcmFtIHtBcnJheS48Kj59IFtpbkJvdGhdIC0gT3V0cHV0IGFycmF5ICh3aWxsIGJlIGZpbGxlZCB3aXRoIGFsbCBlbGVtZW50cyB0aGF0IGFyZSBpbiBib3RoIGBhYCBBTkQgYGJgKS5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVyZWQgYmFzZWQgb24gdGhlIG9yZGVyIG9mIGBhYC5cbiAqIEByZXR1cm5zIHtBcnJheS48Kj59IC0gUmV0dXJucyB0aGUgdmFsdWUgb2YgYU9ubHkgKHRoZSBjbGFzc2ljIGRlZmluaXRpb24gb2YgZGlmZmVyZW5jZSlcbiAqL1xuZnVuY3Rpb24gYXJyYXlEaWZmZXJlbmNlKCBhLCBiLCBhT25seSwgYk9ubHksIGluQm90aCApIHtcbiAgYXNzZXJ0ICYmIGFzc2VydCggQXJyYXkuaXNBcnJheSggYSApICYmIF8udW5pcSggYSApLmxlbmd0aCA9PT0gYS5sZW5ndGgsICdhIGlzIG5vdCBhbiBhcnJheSBvZiB1bmlxdWUgaXRlbXMnICk7XG4gIGFzc2VydCAmJiBhc3NlcnQoIEFycmF5LmlzQXJyYXkoIGIgKSAmJiBfLnVuaXEoIGIgKS5sZW5ndGggPT09IGIubGVuZ3RoLCAnYiBpcyBub3QgYW4gYXJyYXkgb2YgdW5pcXVlIGl0ZW1zJyApO1xuXG4gIGFPbmx5ID0gYU9ubHkgfHwgW107XG4gIGJPbmx5ID0gYk9ubHkgfHwgW107XG4gIGluQm90aCA9IGluQm90aCB8fCBbXTtcblxuICBhc3NlcnQgJiYgYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBhT25seSApICYmIGFPbmx5Lmxlbmd0aCA9PT0gMCApO1xuICBhc3NlcnQgJiYgYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBiT25seSApICYmIGJPbmx5Lmxlbmd0aCA9PT0gMCApO1xuICBhc3NlcnQgJiYgYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBpbkJvdGggKSAmJiBpbkJvdGgubGVuZ3RoID09PSAwICk7XG5cbiAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoIGFPbmx5LCBhICk7XG4gIEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KCBiT25seSwgYiApO1xuXG4gIG91dGVyTG9vcDogLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1sYWJlbHNcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBhT25seS5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGNvbnN0IGFJdGVtID0gYU9ubHlbIGkgXTtcblxuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgYk9ubHkubGVuZ3RoOyBqKysgKSB7XG4gICAgICAgIGNvbnN0IGJJdGVtID0gYk9ubHlbIGogXTtcblxuICAgICAgICBpZiAoIGFJdGVtID09PSBiSXRlbSApIHtcbiAgICAgICAgICBpbkJvdGgucHVzaCggYUl0ZW0gKTtcbiAgICAgICAgICBhT25seS5zcGxpY2UoIGksIDEgKTtcbiAgICAgICAgICBiT25seS5zcGxpY2UoIGosIDEgKTtcbiAgICAgICAgICBqID0gMDtcbiAgICAgICAgICBpZiAoIGkgPT09IGFPbmx5Lmxlbmd0aCApIHtcbiAgICAgICAgICAgIGJyZWFrIG91dGVyTG9vcDsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1sYWJlbHNcbiAgICAgICAgICB9XG4gICAgICAgICAgaSAtPSAxO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gIC8vIFdlIHJldHVybiB0aGUgY2xhc3NpYyBtZWFuaW5nIG9mIFwiZGlmZmVyZW5jZVwiXG4gIHJldHVybiBhT25seTtcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdhcnJheURpZmZlcmVuY2UnLCBhcnJheURpZmZlcmVuY2UgKTtcblxuZXhwb3J0IGRlZmF1bHQgYXJyYXlEaWZmZXJlbmNlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsZUFBZUEsQ0FBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLEtBQUssRUFBRUMsS0FBSyxFQUFFQyxNQUFNLEVBQUc7RUFDckRDLE1BQU0sSUFBSUEsTUFBTSxDQUFFQyxLQUFLLENBQUNDLE9BQU8sQ0FBRVAsQ0FBQyxDQUFFLElBQUlRLENBQUMsQ0FBQ0MsSUFBSSxDQUFFVCxDQUFDLENBQUUsQ0FBQ1UsTUFBTSxLQUFLVixDQUFDLENBQUNVLE1BQU0sRUFBRSxtQ0FBbUMsQ0FBRTtFQUM5R0wsTUFBTSxJQUFJQSxNQUFNLENBQUVDLEtBQUssQ0FBQ0MsT0FBTyxDQUFFTixDQUFDLENBQUUsSUFBSU8sQ0FBQyxDQUFDQyxJQUFJLENBQUVSLENBQUMsQ0FBRSxDQUFDUyxNQUFNLEtBQUtULENBQUMsQ0FBQ1MsTUFBTSxFQUFFLG1DQUFtQyxDQUFFO0VBRTlHUixLQUFLLEdBQUdBLEtBQUssSUFBSSxFQUFFO0VBQ25CQyxLQUFLLEdBQUdBLEtBQUssSUFBSSxFQUFFO0VBQ25CQyxNQUFNLEdBQUdBLE1BQU0sSUFBSSxFQUFFO0VBRXJCQyxNQUFNLElBQUlBLE1BQU0sQ0FBRUMsS0FBSyxDQUFDQyxPQUFPLENBQUVMLEtBQUssQ0FBRSxJQUFJQSxLQUFLLENBQUNRLE1BQU0sS0FBSyxDQUFDLENBQUU7RUFDaEVMLE1BQU0sSUFBSUEsTUFBTSxDQUFFQyxLQUFLLENBQUNDLE9BQU8sQ0FBRUosS0FBSyxDQUFFLElBQUlBLEtBQUssQ0FBQ08sTUFBTSxLQUFLLENBQUMsQ0FBRTtFQUNoRUwsTUFBTSxJQUFJQSxNQUFNLENBQUVDLEtBQUssQ0FBQ0MsT0FBTyxDQUFFSCxNQUFNLENBQUUsSUFBSUEsTUFBTSxDQUFDTSxNQUFNLEtBQUssQ0FBQyxDQUFFO0VBRWxFSixLQUFLLENBQUNLLFNBQVMsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUVYLEtBQUssRUFBRUYsQ0FBQyxDQUFFO0VBQ3RDTSxLQUFLLENBQUNLLFNBQVMsQ0FBQ0MsSUFBSSxDQUFDQyxLQUFLLENBQUVWLEtBQUssRUFBRUYsQ0FBQyxDQUFFO0VBRXRDYSxTQUFTO0VBQUU7RUFDVCxLQUFNLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR2IsS0FBSyxDQUFDUSxNQUFNLEVBQUVLLENBQUMsRUFBRSxFQUFHO0lBQ3ZDLE1BQU1DLEtBQUssR0FBR2QsS0FBSyxDQUFFYSxDQUFDLENBQUU7SUFFeEIsS0FBTSxJQUFJRSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdkLEtBQUssQ0FBQ08sTUFBTSxFQUFFTyxDQUFDLEVBQUUsRUFBRztNQUN2QyxNQUFNQyxLQUFLLEdBQUdmLEtBQUssQ0FBRWMsQ0FBQyxDQUFFO01BRXhCLElBQUtELEtBQUssS0FBS0UsS0FBSyxFQUFHO1FBQ3JCZCxNQUFNLENBQUNRLElBQUksQ0FBRUksS0FBSyxDQUFFO1FBQ3BCZCxLQUFLLENBQUNpQixNQUFNLENBQUVKLENBQUMsRUFBRSxDQUFDLENBQUU7UUFDcEJaLEtBQUssQ0FBQ2dCLE1BQU0sQ0FBRUYsQ0FBQyxFQUFFLENBQUMsQ0FBRTtRQUNwQkEsQ0FBQyxHQUFHLENBQUM7UUFDTCxJQUFLRixDQUFDLEtBQUtiLEtBQUssQ0FBQ1EsTUFBTSxFQUFHO1VBQ3hCLE1BQU1JLFNBQVMsQ0FBQyxDQUFDO1FBQ25COztRQUNBQyxDQUFDLElBQUksQ0FBQztNQUNSO0lBQ0Y7RUFDRjs7RUFFRjtFQUNBLE9BQU9iLEtBQUs7QUFDZDtBQUVBSixRQUFRLENBQUNzQixRQUFRLENBQUUsaUJBQWlCLEVBQUVyQixlQUFlLENBQUU7QUFFdkQsZUFBZUEsZUFBZSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/cleanArray.js
// Copyright 2014-2020, University of Colorado Boulder

/**
 * If given an Array, removes all of its elements and returns it. Otherwise, if given a falsy value
 * (null/undefined/etc.), it will create and return a fresh Array.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function cleanArray(arr) {
  assert && assert(!arr || Array.isArray(arr), 'cleanArray either takes an Array');
  if (arr) {
    // fastest way to clear an array (http://stackoverflow.com/questions/1232040/how-to-empty-an-array-in-javascript, http://jsperf.com/array-destroy/32)
    // also, better than length=0, since it doesn't create significant garbage collection (like length=0), tested on Chrome 34.
    while (arr.length) {
      arr.pop();
    }
    return arr;
  } else {
    return [];
  }
}
js_phetCore.register('cleanArray', cleanArray);
/* harmony default export */ const js_cleanArray = ((/* unused pure expression or super */ null && (cleanArray)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImNsZWFuQXJyYXkiLCJhcnIiLCJhc3NlcnQiLCJBcnJheSIsImlzQXJyYXkiLCJsZW5ndGgiLCJwb3AiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbImNsZWFuQXJyYXkuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogSWYgZ2l2ZW4gYW4gQXJyYXksIHJlbW92ZXMgYWxsIG9mIGl0cyBlbGVtZW50cyBhbmQgcmV0dXJucyBpdC4gT3RoZXJ3aXNlLCBpZiBnaXZlbiBhIGZhbHN5IHZhbHVlXG4gKiAobnVsbC91bmRlZmluZWQvZXRjLiksIGl0IHdpbGwgY3JlYXRlIGFuZCByZXR1cm4gYSBmcmVzaCBBcnJheS5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuXG5mdW5jdGlvbiBjbGVhbkFycmF5KCBhcnIgKSB7XG4gIGFzc2VydCAmJiBhc3NlcnQoICFhcnIgfHwgKCBBcnJheS5pc0FycmF5KCBhcnIgKSApLCAnY2xlYW5BcnJheSBlaXRoZXIgdGFrZXMgYW4gQXJyYXknICk7XG5cbiAgaWYgKCBhcnIgKSB7XG4gICAgLy8gZmFzdGVzdCB3YXkgdG8gY2xlYXIgYW4gYXJyYXkgKGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTIzMjA0MC9ob3ctdG8tZW1wdHktYW4tYXJyYXktaW4tamF2YXNjcmlwdCwgaHR0cDovL2pzcGVyZi5jb20vYXJyYXktZGVzdHJveS8zMilcbiAgICAvLyBhbHNvLCBiZXR0ZXIgdGhhbiBsZW5ndGg9MCwgc2luY2UgaXQgZG9lc24ndCBjcmVhdGUgc2lnbmlmaWNhbnQgZ2FyYmFnZSBjb2xsZWN0aW9uIChsaWtlIGxlbmd0aD0wKSwgdGVzdGVkIG9uIENocm9tZSAzNC5cbiAgICB3aGlsZSAoIGFyci5sZW5ndGggKSB7XG4gICAgICBhcnIucG9wKCk7XG4gICAgfVxuICAgIHJldHVybiBhcnI7XG4gIH1cbiAgZWxzZSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnY2xlYW5BcnJheScsIGNsZWFuQXJyYXkgKTtcblxuZXhwb3J0IGRlZmF1bHQgY2xlYW5BcnJheTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTtBQUVwQyxTQUFTQyxVQUFVQSxDQUFFQyxHQUFHLEVBQUc7RUFDekJDLE1BQU0sSUFBSUEsTUFBTSxDQUFFLENBQUNELEdBQUcsSUFBTUUsS0FBSyxDQUFDQyxPQUFPLENBQUVILEdBQUcsQ0FBSSxFQUFFLGtDQUFrQyxDQUFFO0VBRXhGLElBQUtBLEdBQUcsRUFBRztJQUNUO0lBQ0E7SUFDQSxPQUFRQSxHQUFHLENBQUNJLE1BQU0sRUFBRztNQUNuQkosR0FBRyxDQUFDSyxHQUFHLEVBQUU7SUFDWDtJQUNBLE9BQU9MLEdBQUc7RUFDWixDQUFDLE1BQ0k7SUFDSCxPQUFPLEVBQUU7RUFDWDtBQUNGO0FBRUFGLFFBQVEsQ0FBQ1EsUUFBUSxDQUFFLFlBQVksRUFBRVAsVUFBVSxDQUFFO0FBRTdDLGVBQWVBLFVBQVUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/collect.js
// Copyright 2013-2020, University of Colorado Boulder

/**
 * Creates an array of results from an iterator that takes a callback.
 *
 * For instance, if calling a function f( g ) will call g( 1 ), g( 2 ), and g( 3 ),
 * collect( function( callback ) { f( callback ); } );
 * will return [1,2,3].
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function collect(iterate) {
  assert && assert(typeof iterate === 'function');
  const result = [];
  iterate(ob => {
    result.push(ob);
  });
  return result;
}
js_phetCore.register('collect', collect);
/* harmony default export */ const js_collect = ((/* unused pure expression or super */ null && (collect)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImNvbGxlY3QiLCJpdGVyYXRlIiwiYXNzZXJ0IiwicmVzdWx0Iiwib2IiLCJwdXNoIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJjb2xsZWN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgcmVzdWx0cyBmcm9tIGFuIGl0ZXJhdG9yIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAqXG4gKiBGb3IgaW5zdGFuY2UsIGlmIGNhbGxpbmcgYSBmdW5jdGlvbiBmKCBnICkgd2lsbCBjYWxsIGcoIDEgKSwgZyggMiApLCBhbmQgZyggMyApLFxuICogY29sbGVjdCggZnVuY3Rpb24oIGNhbGxiYWNrICkgeyBmKCBjYWxsYmFjayApOyB9ICk7XG4gKiB3aWxsIHJldHVybiBbMSwyLDNdLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbmZ1bmN0aW9uIGNvbGxlY3QoIGl0ZXJhdGUgKSB7XG4gIGFzc2VydCAmJiBhc3NlcnQoIHR5cGVvZiBpdGVyYXRlID09PSAnZnVuY3Rpb24nICk7XG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBpdGVyYXRlKCBvYiA9PiB7XG4gICAgcmVzdWx0LnB1c2goIG9iICk7XG4gIH0gKTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdjb2xsZWN0JywgY29sbGVjdCApO1xuXG5leHBvcnQgZGVmYXVsdCBjb2xsZWN0OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlO0FBRXBDLFNBQVNDLE9BQU9BLENBQUVDLE9BQU8sRUFBRztFQUMxQkMsTUFBTSxJQUFJQSxNQUFNLENBQUUsT0FBT0QsT0FBTyxLQUFLLFVBQVUsQ0FBRTtFQUNqRCxNQUFNRSxNQUFNLEdBQUcsRUFBRTtFQUNqQkYsT0FBTyxDQUFFRyxFQUFFLElBQUk7SUFDYkQsTUFBTSxDQUFDRSxJQUFJLENBQUVELEVBQUUsQ0FBRTtFQUNuQixDQUFDLENBQUU7RUFDSCxPQUFPRCxNQUFNO0FBQ2Y7QUFFQUosUUFBUSxDQUFDTyxRQUFRLENBQUUsU0FBUyxFQUFFTixPQUFPLENBQUU7QUFFdkMsZUFBZUEsT0FBTyJ9
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/detectPrefix.js
// Copyright 2014-2023, University of Colorado Boulder

/**
 * Scans through potential properties on an object to detect prefixed forms, and returns the first match.
 *
 * E.g. currently:
 * phet.phetCore.detectPrefix( document.createElement( 'div' ).style, 'transform' ) === 'webkitTransform'
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



// @returns the best String str where obj[str] !== undefined, or returns undefined if that is not available
function detectPrefix(obj, name) {
  if (obj[name] !== undefined) {
    return name;
  }

  // prepare for camelCase
  name = name.charAt(0).toUpperCase() + name.slice(1);

  // Chrome planning to not introduce prefixes in the future, hopefully we will be safe
  if (obj[`moz${name}`] !== undefined) {
    return `moz${name}`;
  }
  if (obj[`Moz${name}`] !== undefined) {
    return `Moz${name}`;
  } // some prefixes seem to have all-caps?
  if (obj[`webkit${name}`] !== undefined) {
    return `webkit${name}`;
  }
  if (obj[`ms${name}`] !== undefined) {
    return `ms${name}`;
  }
  if (obj[`o${name}`] !== undefined) {
    return `o${name}`;
  }
  return undefined;
}
js_phetCore.register('detectPrefix', detectPrefix);
/* harmony default export */ const js_detectPrefix = ((/* unused pure expression or super */ null && (detectPrefix)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImRldGVjdFByZWZpeCIsIm9iaiIsIm5hbWUiLCJ1bmRlZmluZWQiLCJjaGFyQXQiLCJ0b1VwcGVyQ2FzZSIsInNsaWNlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJkZXRlY3RQcmVmaXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogU2NhbnMgdGhyb3VnaCBwb3RlbnRpYWwgcHJvcGVydGllcyBvbiBhbiBvYmplY3QgdG8gZGV0ZWN0IHByZWZpeGVkIGZvcm1zLCBhbmQgcmV0dXJucyB0aGUgZmlyc3QgbWF0Y2guXG4gKlxuICogRS5nLiBjdXJyZW50bHk6XG4gKiBwaGV0LnBoZXRDb3JlLmRldGVjdFByZWZpeCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ2RpdicgKS5zdHlsZSwgJ3RyYW5zZm9ybScgKSA9PT0gJ3dlYmtpdFRyYW5zZm9ybSdcbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuXG4vLyBAcmV0dXJucyB0aGUgYmVzdCBTdHJpbmcgc3RyIHdoZXJlIG9ialtzdHJdICE9PSB1bmRlZmluZWQsIG9yIHJldHVybnMgdW5kZWZpbmVkIGlmIHRoYXQgaXMgbm90IGF2YWlsYWJsZVxuZnVuY3Rpb24gZGV0ZWN0UHJlZml4KCBvYmosIG5hbWUgKSB7XG4gIGlmICggb2JqWyBuYW1lIF0gIT09IHVuZGVmaW5lZCApIHsgcmV0dXJuIG5hbWU7IH1cblxuICAvLyBwcmVwYXJlIGZvciBjYW1lbENhc2VcbiAgbmFtZSA9IG5hbWUuY2hhckF0KCAwICkudG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoIDEgKTtcblxuICAvLyBDaHJvbWUgcGxhbm5pbmcgdG8gbm90IGludHJvZHVjZSBwcmVmaXhlcyBpbiB0aGUgZnV0dXJlLCBob3BlZnVsbHkgd2Ugd2lsbCBiZSBzYWZlXG4gIGlmICggb2JqWyBgbW96JHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYG1veiR7bmFtZX1gOyB9XG4gIGlmICggb2JqWyBgTW96JHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYE1veiR7bmFtZX1gOyB9IC8vIHNvbWUgcHJlZml4ZXMgc2VlbSB0byBoYXZlIGFsbC1jYXBzP1xuICBpZiAoIG9ialsgYHdlYmtpdCR7bmFtZX1gIF0gIT09IHVuZGVmaW5lZCApIHsgcmV0dXJuIGB3ZWJraXQke25hbWV9YDsgfVxuICBpZiAoIG9ialsgYG1zJHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYG1zJHtuYW1lfWA7IH1cbiAgaWYgKCBvYmpbIGBvJHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYG8ke25hbWV9YDsgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5waGV0Q29yZS5yZWdpc3RlciggJ2RldGVjdFByZWZpeCcsIGRldGVjdFByZWZpeCApO1xuXG5leHBvcnQgZGVmYXVsdCBkZXRlY3RQcmVmaXg7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlOztBQUVwQztBQUNBLFNBQVNDLFlBQVlBLENBQUVDLEdBQUcsRUFBRUMsSUFBSSxFQUFHO0VBQ2pDLElBQUtELEdBQUcsQ0FBRUMsSUFBSSxDQUFFLEtBQUtDLFNBQVMsRUFBRztJQUFFLE9BQU9ELElBQUk7RUFBRTs7RUFFaEQ7RUFDQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNFLE1BQU0sQ0FBRSxDQUFDLENBQUUsQ0FBQ0MsV0FBVyxFQUFFLEdBQUdILElBQUksQ0FBQ0ksS0FBSyxDQUFFLENBQUMsQ0FBRTs7RUFFdkQ7RUFDQSxJQUFLTCxHQUFHLENBQUcsTUFBS0MsSUFBSyxFQUFDLENBQUUsS0FBS0MsU0FBUyxFQUFHO0lBQUUsT0FBUSxNQUFLRCxJQUFLLEVBQUM7RUFBRTtFQUNoRSxJQUFLRCxHQUFHLENBQUcsTUFBS0MsSUFBSyxFQUFDLENBQUUsS0FBS0MsU0FBUyxFQUFHO0lBQUUsT0FBUSxNQUFLRCxJQUFLLEVBQUM7RUFBRSxDQUFDLENBQUM7RUFDbEUsSUFBS0QsR0FBRyxDQUFHLFNBQVFDLElBQUssRUFBQyxDQUFFLEtBQUtDLFNBQVMsRUFBRztJQUFFLE9BQVEsU0FBUUQsSUFBSyxFQUFDO0VBQUU7RUFDdEUsSUFBS0QsR0FBRyxDQUFHLEtBQUlDLElBQUssRUFBQyxDQUFFLEtBQUtDLFNBQVMsRUFBRztJQUFFLE9BQVEsS0FBSUQsSUFBSyxFQUFDO0VBQUU7RUFDOUQsSUFBS0QsR0FBRyxDQUFHLElBQUdDLElBQUssRUFBQyxDQUFFLEtBQUtDLFNBQVMsRUFBRztJQUFFLE9BQVEsSUFBR0QsSUFBSyxFQUFDO0VBQUU7RUFDNUQsT0FBT0MsU0FBUztBQUNsQjtBQUVBSixRQUFRLENBQUNRLFFBQVEsQ0FBRSxjQUFjLEVBQUVQLFlBQVksQ0FBRTtBQUVqRCxlQUFlQSxZQUFZIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/detectPrefixEvent.js
// Copyright 2014-2023, University of Colorado Boulder
/* eslint-disable no-useless-concat */

/**
 * Scans through potential event properties on an object to detect prefixed forms, and returns the first match.
 *
 * E.g. currently:
 * phet.phetCore.detectPrefixEvent( document, 'fullscreenchange' ) === 'webkitfullscreenchange'
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



// @returns the best String str where obj['on'+str] !== undefined, or returns undefined if that is not available
function detectPrefixEvent(obj, name, isEvent) {
  if (obj[`on${name}`] !== undefined) {
    return name;
  }

  // Chrome planning to not introduce prefixes in the future, hopefully we will be safe
  if (obj[`${'on' + 'moz'}${name}`] !== undefined) {
    return `moz${name}`;
  }
  if (obj[`${'on' + 'Moz'}${name}`] !== undefined) {
    return `Moz${name}`;
  } // some prefixes seem to have all-caps?
  if (obj[`${'on' + 'webkit'}${name}`] !== undefined) {
    return `webkit${name}`;
  }
  if (obj[`${'on' + 'ms'}${name}`] !== undefined) {
    return `ms${name}`;
  }
  if (obj[`${'on' + 'o'}${name}`] !== undefined) {
    return `o${name}`;
  }
  return undefined;
}
js_phetCore.register('detectPrefixEvent', detectPrefixEvent);
/* harmony default export */ const js_detectPrefixEvent = ((/* unused pure expression or super */ null && (detectPrefixEvent)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImRldGVjdFByZWZpeEV2ZW50Iiwib2JqIiwibmFtZSIsImlzRXZlbnQiLCJ1bmRlZmluZWQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbImRldGVjdFByZWZpeEV2ZW50LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuLyogZXNsaW50LWRpc2FibGUgbm8tdXNlbGVzcy1jb25jYXQgKi9cblxuLyoqXG4gKiBTY2FucyB0aHJvdWdoIHBvdGVudGlhbCBldmVudCBwcm9wZXJ0aWVzIG9uIGFuIG9iamVjdCB0byBkZXRlY3QgcHJlZml4ZWQgZm9ybXMsIGFuZCByZXR1cm5zIHRoZSBmaXJzdCBtYXRjaC5cbiAqXG4gKiBFLmcuIGN1cnJlbnRseTpcbiAqIHBoZXQucGhldENvcmUuZGV0ZWN0UHJlZml4RXZlbnQoIGRvY3VtZW50LCAnZnVsbHNjcmVlbmNoYW5nZScgKSA9PT0gJ3dlYmtpdGZ1bGxzY3JlZW5jaGFuZ2UnXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuLy8gQHJldHVybnMgdGhlIGJlc3QgU3RyaW5nIHN0ciB3aGVyZSBvYmpbJ29uJytzdHJdICE9PSB1bmRlZmluZWQsIG9yIHJldHVybnMgdW5kZWZpbmVkIGlmIHRoYXQgaXMgbm90IGF2YWlsYWJsZVxuZnVuY3Rpb24gZGV0ZWN0UHJlZml4RXZlbnQoIG9iaiwgbmFtZSwgaXNFdmVudCApIHtcbiAgaWYgKCBvYmpbIGBvbiR7bmFtZX1gIF0gIT09IHVuZGVmaW5lZCApIHsgcmV0dXJuIG5hbWU7IH1cblxuICAvLyBDaHJvbWUgcGxhbm5pbmcgdG8gbm90IGludHJvZHVjZSBwcmVmaXhlcyBpbiB0aGUgZnV0dXJlLCBob3BlZnVsbHkgd2Ugd2lsbCBiZSBzYWZlXG4gIGlmICggb2JqWyBgJHsnb24nICsgJ21veid9JHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYG1veiR7bmFtZX1gOyB9XG4gIGlmICggb2JqWyBgJHsnb24nICsgJ01veid9JHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYE1veiR7bmFtZX1gOyB9IC8vIHNvbWUgcHJlZml4ZXMgc2VlbSB0byBoYXZlIGFsbC1jYXBzP1xuICBpZiAoIG9ialsgYCR7J29uJyArICd3ZWJraXQnfSR7bmFtZX1gIF0gIT09IHVuZGVmaW5lZCApIHsgcmV0dXJuIGB3ZWJraXQke25hbWV9YDsgfVxuICBpZiAoIG9ialsgYCR7J29uJyArICdtcyd9JHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYG1zJHtuYW1lfWA7IH1cbiAgaWYgKCBvYmpbIGAkeydvbicgKyAnbyd9JHtuYW1lfWAgXSAhPT0gdW5kZWZpbmVkICkgeyByZXR1cm4gYG8ke25hbWV9YDsgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG5waGV0Q29yZS5yZWdpc3RlciggJ2RldGVjdFByZWZpeEV2ZW50JywgZGV0ZWN0UHJlZml4RXZlbnQgKTtcblxuZXhwb3J0IGRlZmF1bHQgZGV0ZWN0UHJlZml4RXZlbnQ7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGVBQWU7O0FBRXBDO0FBQ0EsU0FBU0MsaUJBQWlCQSxDQUFFQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFHO0VBQy9DLElBQUtGLEdBQUcsQ0FBRyxLQUFJQyxJQUFLLEVBQUMsQ0FBRSxLQUFLRSxTQUFTLEVBQUc7SUFBRSxPQUFPRixJQUFJO0VBQUU7O0VBRXZEO0VBQ0EsSUFBS0QsR0FBRyxDQUFHLEdBQUUsSUFBSSxHQUFHLEtBQU0sR0FBRUMsSUFBSyxFQUFDLENBQUUsS0FBS0UsU0FBUyxFQUFHO0lBQUUsT0FBUSxNQUFLRixJQUFLLEVBQUM7RUFBRTtFQUM1RSxJQUFLRCxHQUFHLENBQUcsR0FBRSxJQUFJLEdBQUcsS0FBTSxHQUFFQyxJQUFLLEVBQUMsQ0FBRSxLQUFLRSxTQUFTLEVBQUc7SUFBRSxPQUFRLE1BQUtGLElBQUssRUFBQztFQUFFLENBQUMsQ0FBQztFQUM5RSxJQUFLRCxHQUFHLENBQUcsR0FBRSxJQUFJLEdBQUcsUUFBUyxHQUFFQyxJQUFLLEVBQUMsQ0FBRSxLQUFLRSxTQUFTLEVBQUc7SUFBRSxPQUFRLFNBQVFGLElBQUssRUFBQztFQUFFO0VBQ2xGLElBQUtELEdBQUcsQ0FBRyxHQUFFLElBQUksR0FBRyxJQUFLLEdBQUVDLElBQUssRUFBQyxDQUFFLEtBQUtFLFNBQVMsRUFBRztJQUFFLE9BQVEsS0FBSUYsSUFBSyxFQUFDO0VBQUU7RUFDMUUsSUFBS0QsR0FBRyxDQUFHLEdBQUUsSUFBSSxHQUFHLEdBQUksR0FBRUMsSUFBSyxFQUFDLENBQUUsS0FBS0UsU0FBUyxFQUFHO0lBQUUsT0FBUSxJQUFHRixJQUFLLEVBQUM7RUFBRTtFQUN4RSxPQUFPRSxTQUFTO0FBQ2xCO0FBRUFMLFFBQVEsQ0FBQ00sUUFBUSxDQUFFLG1CQUFtQixFQUFFTCxpQkFBaUIsQ0FBRTtBQUUzRCxlQUFlQSxpQkFBaUIifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/dimensionForEach.js
// Copyright 2018-2021, University of Colorado Boulder

/**
 * ForEach for multidimensional arrays.
 *
 * e.g. dimensionForEach( 1, array, callback ) is equivalent to array.forEach( callback )
 * e.g. dimensionForEach( 2, [ [ 1, 2 ], [ 3, 4 ] ], f ) will call:
 *      f(1), f(2), f(3), f(4)
 *   OR more accurately (since it includes indices indicating how to reach that element:
 *      f(1,0,0), f(2,0,1), f(3,1,0), f(4,1,1)
 *   Notably, f(2,0,1) is called for the element 3 BECAUSE original[ 0 ][ 1 ] is the element 2
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/**
 * @typedef {Array.<MultidimensionalArray.<*>|*>} MultidimensionalArray.<*>
 */

/**
 * @param {number} dimension - The dimension of the array (how many levels of nested arrays there are). For instance,
 *   [ 'a' ] is a 1-dimensional array, [ [ 'b' ] ] is a 2-dimensional array, etc.
 * @param {MultidimensionalArray.<*>} array - A multidimensional array of the specified dimension
 * @param {function} forEach - function( element: {*}, indices...: {Array.<number>} ). Called for each individual
 *   element. The indices are provided as the 2nd, 3rd, etc. parameters to the function (continues depending on the
 *   dimension). This is a generalization of the normal `forEach` function, which only provides the first index. Thus:
 *   array[ indices[ 0 ] ]...[ indices[ dimension - 1 ] ] === element
 */
function dimensionForEach(dimension, array, forEach) {
  // Will get indices pushed when we go deeper into the multidimensional array, and popped when we go back, so that
  // this essentially represents our "position" in the multidimensional array during iteration.
  const indices = [];

  /**
   * Responsible for iterating through a multidimensional array of the given dimension, while accumulating
   * indices.
   *
   * @param {number} dim
   * @param {MultidimensionalArray.<*>} arr
   */
  function recur(dim, arr) {
    return arr.forEach((element, index) => {
      // To process this element, we need to record our index (in case it is an array that we iterate through).
      indices.push(index);

      // Our base case, where recur was passed a 1-dimensional array
      if (dim === 1) {
        forEach(...[element].concat(indices));
      }
      // We have more dimensions
      else {
        recur(dim - 1, element);
      }

      // We are done with iteration
      indices.pop();
    });
  }
  return recur(dimension, array);
}
js_phetCore.register('dimensionForEach', dimensionForEach);
/* harmony default export */ const js_dimensionForEach = ((/* unused pure expression or super */ null && (dimensionForEach)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImRpbWVuc2lvbkZvckVhY2giLCJkaW1lbnNpb24iLCJhcnJheSIsImZvckVhY2giLCJpbmRpY2VzIiwicmVjdXIiLCJkaW0iLCJhcnIiLCJlbGVtZW50IiwiaW5kZXgiLCJwdXNoIiwiY29uY2F0IiwicG9wIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJkaW1lbnNpb25Gb3JFYWNoLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEZvckVhY2ggZm9yIG11bHRpZGltZW5zaW9uYWwgYXJyYXlzLlxuICpcbiAqIGUuZy4gZGltZW5zaW9uRm9yRWFjaCggMSwgYXJyYXksIGNhbGxiYWNrICkgaXMgZXF1aXZhbGVudCB0byBhcnJheS5mb3JFYWNoKCBjYWxsYmFjayApXG4gKiBlLmcuIGRpbWVuc2lvbkZvckVhY2goIDIsIFsgWyAxLCAyIF0sIFsgMywgNCBdIF0sIGYgKSB3aWxsIGNhbGw6XG4gKiAgICAgIGYoMSksIGYoMiksIGYoMyksIGYoNClcbiAqICAgT1IgbW9yZSBhY2N1cmF0ZWx5IChzaW5jZSBpdCBpbmNsdWRlcyBpbmRpY2VzIGluZGljYXRpbmcgaG93IHRvIHJlYWNoIHRoYXQgZWxlbWVudDpcbiAqICAgICAgZigxLDAsMCksIGYoMiwwLDEpLCBmKDMsMSwwKSwgZig0LDEsMSlcbiAqICAgTm90YWJseSwgZigyLDAsMSkgaXMgY2FsbGVkIGZvciB0aGUgZWxlbWVudCAzIEJFQ0FVU0Ugb3JpZ2luYWxbIDAgXVsgMSBdIGlzIHRoZSBlbGVtZW50IDJcbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtBcnJheS48TXVsdGlkaW1lbnNpb25hbEFycmF5LjwqPnwqPn0gTXVsdGlkaW1lbnNpb25hbEFycmF5LjwqPlxuICovXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGRpbWVuc2lvbiAtIFRoZSBkaW1lbnNpb24gb2YgdGhlIGFycmF5IChob3cgbWFueSBsZXZlbHMgb2YgbmVzdGVkIGFycmF5cyB0aGVyZSBhcmUpLiBGb3IgaW5zdGFuY2UsXG4gKiAgIFsgJ2EnIF0gaXMgYSAxLWRpbWVuc2lvbmFsIGFycmF5LCBbIFsgJ2InIF0gXSBpcyBhIDItZGltZW5zaW9uYWwgYXJyYXksIGV0Yy5cbiAqIEBwYXJhbSB7TXVsdGlkaW1lbnNpb25hbEFycmF5LjwqPn0gYXJyYXkgLSBBIG11bHRpZGltZW5zaW9uYWwgYXJyYXkgb2YgdGhlIHNwZWNpZmllZCBkaW1lbnNpb25cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IGZvckVhY2ggLSBmdW5jdGlvbiggZWxlbWVudDogeyp9LCBpbmRpY2VzLi4uOiB7QXJyYXkuPG51bWJlcj59ICkuIENhbGxlZCBmb3IgZWFjaCBpbmRpdmlkdWFsXG4gKiAgIGVsZW1lbnQuIFRoZSBpbmRpY2VzIGFyZSBwcm92aWRlZCBhcyB0aGUgMm5kLCAzcmQsIGV0Yy4gcGFyYW1ldGVycyB0byB0aGUgZnVuY3Rpb24gKGNvbnRpbnVlcyBkZXBlbmRpbmcgb24gdGhlXG4gKiAgIGRpbWVuc2lvbikuIFRoaXMgaXMgYSBnZW5lcmFsaXphdGlvbiBvZiB0aGUgbm9ybWFsIGBmb3JFYWNoYCBmdW5jdGlvbiwgd2hpY2ggb25seSBwcm92aWRlcyB0aGUgZmlyc3QgaW5kZXguIFRodXM6XG4gKiAgIGFycmF5WyBpbmRpY2VzWyAwIF0gXS4uLlsgaW5kaWNlc1sgZGltZW5zaW9uIC0gMSBdIF0gPT09IGVsZW1lbnRcbiAqL1xuZnVuY3Rpb24gZGltZW5zaW9uRm9yRWFjaCggZGltZW5zaW9uLCBhcnJheSwgZm9yRWFjaCApIHtcblxuICAvLyBXaWxsIGdldCBpbmRpY2VzIHB1c2hlZCB3aGVuIHdlIGdvIGRlZXBlciBpbnRvIHRoZSBtdWx0aWRpbWVuc2lvbmFsIGFycmF5LCBhbmQgcG9wcGVkIHdoZW4gd2UgZ28gYmFjaywgc28gdGhhdFxuICAvLyB0aGlzIGVzc2VudGlhbGx5IHJlcHJlc2VudHMgb3VyIFwicG9zaXRpb25cIiBpbiB0aGUgbXVsdGlkaW1lbnNpb25hbCBhcnJheSBkdXJpbmcgaXRlcmF0aW9uLlxuICBjb25zdCBpbmRpY2VzID0gW107XG5cbiAgLyoqXG4gICAqIFJlc3BvbnNpYmxlIGZvciBpdGVyYXRpbmcgdGhyb3VnaCBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXkgb2YgdGhlIGdpdmVuIGRpbWVuc2lvbiwgd2hpbGUgYWNjdW11bGF0aW5nXG4gICAqIGluZGljZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkaW1cbiAgICogQHBhcmFtIHtNdWx0aWRpbWVuc2lvbmFsQXJyYXkuPCo+fSBhcnJcbiAgICovXG4gIGZ1bmN0aW9uIHJlY3VyKCBkaW0sIGFyciApIHtcbiAgICByZXR1cm4gYXJyLmZvckVhY2goICggZWxlbWVudCwgaW5kZXggKSA9PiB7XG5cbiAgICAgIC8vIFRvIHByb2Nlc3MgdGhpcyBlbGVtZW50LCB3ZSBuZWVkIHRvIHJlY29yZCBvdXIgaW5kZXggKGluIGNhc2UgaXQgaXMgYW4gYXJyYXkgdGhhdCB3ZSBpdGVyYXRlIHRocm91Z2gpLlxuICAgICAgaW5kaWNlcy5wdXNoKCBpbmRleCApO1xuXG4gICAgICAvLyBPdXIgYmFzZSBjYXNlLCB3aGVyZSByZWN1ciB3YXMgcGFzc2VkIGEgMS1kaW1lbnNpb25hbCBhcnJheVxuICAgICAgaWYgKCBkaW0gPT09IDEgKSB7XG4gICAgICAgIGZvckVhY2goIC4uLlsgZWxlbWVudCBdLmNvbmNhdCggaW5kaWNlcyApICk7XG4gICAgICB9XG4gICAgICAvLyBXZSBoYXZlIG1vcmUgZGltZW5zaW9uc1xuICAgICAgZWxzZSB7XG4gICAgICAgIHJlY3VyKCBkaW0gLSAxLCBlbGVtZW50ICk7XG4gICAgICB9XG5cbiAgICAgIC8vIFdlIGFyZSBkb25lIHdpdGggaXRlcmF0aW9uXG4gICAgICBpbmRpY2VzLnBvcCgpO1xuICAgIH0gKTtcbiAgfVxuXG4gIHJldHVybiByZWN1ciggZGltZW5zaW9uLCBhcnJheSApO1xufVxuXG5waGV0Q29yZS5yZWdpc3RlciggJ2RpbWVuc2lvbkZvckVhY2gnLCBkaW1lbnNpb25Gb3JFYWNoICk7XG5cbmV4cG9ydCBkZWZhdWx0IGRpbWVuc2lvbkZvckVhY2g7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGVBQWU7O0FBRXBDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxnQkFBZ0JBLENBQUVDLFNBQVMsRUFBRUMsS0FBSyxFQUFFQyxPQUFPLEVBQUc7RUFFckQ7RUFDQTtFQUNBLE1BQU1DLE9BQU8sR0FBRyxFQUFFOztFQUVsQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLFNBQVNDLEtBQUtBLENBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFHO0lBQ3pCLE9BQU9BLEdBQUcsQ0FBQ0osT0FBTyxDQUFFLENBQUVLLE9BQU8sRUFBRUMsS0FBSyxLQUFNO01BRXhDO01BQ0FMLE9BQU8sQ0FBQ00sSUFBSSxDQUFFRCxLQUFLLENBQUU7O01BRXJCO01BQ0EsSUFBS0gsR0FBRyxLQUFLLENBQUMsRUFBRztRQUNmSCxPQUFPLENBQUUsR0FBRyxDQUFFSyxPQUFPLENBQUUsQ0FBQ0csTUFBTSxDQUFFUCxPQUFPLENBQUUsQ0FBRTtNQUM3QztNQUNBO01BQUEsS0FDSztRQUNIQyxLQUFLLENBQUVDLEdBQUcsR0FBRyxDQUFDLEVBQUVFLE9BQU8sQ0FBRTtNQUMzQjs7TUFFQTtNQUNBSixPQUFPLENBQUNRLEdBQUcsRUFBRTtJQUNmLENBQUMsQ0FBRTtFQUNMO0VBRUEsT0FBT1AsS0FBSyxDQUFFSixTQUFTLEVBQUVDLEtBQUssQ0FBRTtBQUNsQztBQUVBSCxRQUFRLENBQUNjLFFBQVEsQ0FBRSxrQkFBa0IsRUFBRWIsZ0JBQWdCLENBQUU7QUFFekQsZUFBZUEsZ0JBQWdCIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/dimensionMap.js
// Copyright 2018-2021, University of Colorado Boulder

/**
 * Map for multidimensional arrays.
 *
 * e.g. dimensionMap( 1, array, callback ) is equivalent to array.map( callback )
 * e.g. dimensionMap( 2, [ [ 1, 2 ], [ 3, 4 ] ], f ) will return
 *      [ [ f(1), f(2) ], [ f(3), f(4) ] ]
 *   OR more accurately (since it includes indices indicating how to reach that element:
 *      [ [ f(1,0,0), f(2,0,1) ], [ f(3,1,0), f(3,1,1) ] ]
 *   Notably, f(2,0,1) is called for the element 3 BECAUSE original[ 0 ][ 1 ] is the element 2
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/**
 * @typedef {Array.<MultidimensionalArray.<*>|*>} MultidimensionalArray.<*>
 */

/**
 * @param {number} dimension - The dimension of the array (how many levels of nested arrays there are). For instance,
 *   [ 'a' ] is a 1-dimensional array, [ [ 'b' ] ] is a 2-dimensional array, etc.
 * @param {MultidimensionalArray.<*>} array - A multidimensional array of the specified dimension
 * @param {function} map - function( element: {*}, indices...: {Array.<number>} ): {*}. Called for each individual
 *   element. The indices are provided as the 2nd, 3rd, etc. parameters to the function (continues depending on the
 *   dimension). This is a generalization of the normal `map` function, which only provides the first index. Thus:
 *   array[ indices[ 0 ] ]...[ indices[ dimension - 1 ] ] === element
 * @returns {MultidimensionalArray.<*>} - A multidimensional array of the same dimension as our input, but with the
 *   values replaced with the return value of the map() calls for each element.
 */
function dimensionMap(dimension, array, map) {
  // Will get indices pushed when we go deeper into the multidimensional array, and popped when we go back, so that
  // this essentially represents our "position" in the multidimensional array during iteration.
  const indices = [];

  /**
   * Responsible for mapping a multidimensional array of the given dimension, while accumulating
   * indices.
   *
   * @param {number} dim
   * @param {MultidimensionalArray.<*>} arr
   * @returns {MultidimensionalArray.<*>}
   */
  function recur(dim, arr) {
    return arr.map((element, index) => {
      // To process this element, we need to record our index (in case it is an array that we iterate through).
      indices.push(index);

      // If our dimension is 1, it's our base case (apply the normal map function), otherwise continue recursively.
      const result = dim === 1 ? map(...[element].concat(indices)) : recur(dim - 1, element);

      // We are done with iteration
      indices.pop();
      return result;
    });
  }
  return recur(dimension, array);
}
js_phetCore.register('dimensionMap', dimensionMap);
/* harmony default export */ const js_dimensionMap = ((/* unused pure expression or super */ null && (dimensionMap)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImRpbWVuc2lvbk1hcCIsImRpbWVuc2lvbiIsImFycmF5IiwibWFwIiwiaW5kaWNlcyIsInJlY3VyIiwiZGltIiwiYXJyIiwiZWxlbWVudCIsImluZGV4IiwicHVzaCIsInJlc3VsdCIsImNvbmNhdCIsInBvcCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiZGltZW5zaW9uTWFwLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIE1hcCBmb3IgbXVsdGlkaW1lbnNpb25hbCBhcnJheXMuXG4gKlxuICogZS5nLiBkaW1lbnNpb25NYXAoIDEsIGFycmF5LCBjYWxsYmFjayApIGlzIGVxdWl2YWxlbnQgdG8gYXJyYXkubWFwKCBjYWxsYmFjayApXG4gKiBlLmcuIGRpbWVuc2lvbk1hcCggMiwgWyBbIDEsIDIgXSwgWyAzLCA0IF0gXSwgZiApIHdpbGwgcmV0dXJuXG4gKiAgICAgIFsgWyBmKDEpLCBmKDIpIF0sIFsgZigzKSwgZig0KSBdIF1cbiAqICAgT1IgbW9yZSBhY2N1cmF0ZWx5IChzaW5jZSBpdCBpbmNsdWRlcyBpbmRpY2VzIGluZGljYXRpbmcgaG93IHRvIHJlYWNoIHRoYXQgZWxlbWVudDpcbiAqICAgICAgWyBbIGYoMSwwLDApLCBmKDIsMCwxKSBdLCBbIGYoMywxLDApLCBmKDMsMSwxKSBdIF1cbiAqICAgTm90YWJseSwgZigyLDAsMSkgaXMgY2FsbGVkIGZvciB0aGUgZWxlbWVudCAzIEJFQ0FVU0Ugb3JpZ2luYWxbIDAgXVsgMSBdIGlzIHRoZSBlbGVtZW50IDJcbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuXG4vKipcbiAqIEB0eXBlZGVmIHtBcnJheS48TXVsdGlkaW1lbnNpb25hbEFycmF5LjwqPnwqPn0gTXVsdGlkaW1lbnNpb25hbEFycmF5LjwqPlxuICovXG5cbi8qKlxuICogQHBhcmFtIHtudW1iZXJ9IGRpbWVuc2lvbiAtIFRoZSBkaW1lbnNpb24gb2YgdGhlIGFycmF5IChob3cgbWFueSBsZXZlbHMgb2YgbmVzdGVkIGFycmF5cyB0aGVyZSBhcmUpLiBGb3IgaW5zdGFuY2UsXG4gKiAgIFsgJ2EnIF0gaXMgYSAxLWRpbWVuc2lvbmFsIGFycmF5LCBbIFsgJ2InIF0gXSBpcyBhIDItZGltZW5zaW9uYWwgYXJyYXksIGV0Yy5cbiAqIEBwYXJhbSB7TXVsdGlkaW1lbnNpb25hbEFycmF5LjwqPn0gYXJyYXkgLSBBIG11bHRpZGltZW5zaW9uYWwgYXJyYXkgb2YgdGhlIHNwZWNpZmllZCBkaW1lbnNpb25cbiAqIEBwYXJhbSB7ZnVuY3Rpb259IG1hcCAtIGZ1bmN0aW9uKCBlbGVtZW50OiB7Kn0sIGluZGljZXMuLi46IHtBcnJheS48bnVtYmVyPn0gKTogeyp9LiBDYWxsZWQgZm9yIGVhY2ggaW5kaXZpZHVhbFxuICogICBlbGVtZW50LiBUaGUgaW5kaWNlcyBhcmUgcHJvdmlkZWQgYXMgdGhlIDJuZCwgM3JkLCBldGMuIHBhcmFtZXRlcnMgdG8gdGhlIGZ1bmN0aW9uIChjb250aW51ZXMgZGVwZW5kaW5nIG9uIHRoZVxuICogICBkaW1lbnNpb24pLiBUaGlzIGlzIGEgZ2VuZXJhbGl6YXRpb24gb2YgdGhlIG5vcm1hbCBgbWFwYCBmdW5jdGlvbiwgd2hpY2ggb25seSBwcm92aWRlcyB0aGUgZmlyc3QgaW5kZXguIFRodXM6XG4gKiAgIGFycmF5WyBpbmRpY2VzWyAwIF0gXS4uLlsgaW5kaWNlc1sgZGltZW5zaW9uIC0gMSBdIF0gPT09IGVsZW1lbnRcbiAqIEByZXR1cm5zIHtNdWx0aWRpbWVuc2lvbmFsQXJyYXkuPCo+fSAtIEEgbXVsdGlkaW1lbnNpb25hbCBhcnJheSBvZiB0aGUgc2FtZSBkaW1lbnNpb24gYXMgb3VyIGlucHV0LCBidXQgd2l0aCB0aGVcbiAqICAgdmFsdWVzIHJlcGxhY2VkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgbWFwKCkgY2FsbHMgZm9yIGVhY2ggZWxlbWVudC5cbiAqL1xuZnVuY3Rpb24gZGltZW5zaW9uTWFwKCBkaW1lbnNpb24sIGFycmF5LCBtYXAgKSB7XG5cbiAgLy8gV2lsbCBnZXQgaW5kaWNlcyBwdXNoZWQgd2hlbiB3ZSBnbyBkZWVwZXIgaW50byB0aGUgbXVsdGlkaW1lbnNpb25hbCBhcnJheSwgYW5kIHBvcHBlZCB3aGVuIHdlIGdvIGJhY2ssIHNvIHRoYXRcbiAgLy8gdGhpcyBlc3NlbnRpYWxseSByZXByZXNlbnRzIG91ciBcInBvc2l0aW9uXCIgaW4gdGhlIG11bHRpZGltZW5zaW9uYWwgYXJyYXkgZHVyaW5nIGl0ZXJhdGlvbi5cbiAgY29uc3QgaW5kaWNlcyA9IFtdO1xuXG4gIC8qKlxuICAgKiBSZXNwb25zaWJsZSBmb3IgbWFwcGluZyBhIG11bHRpZGltZW5zaW9uYWwgYXJyYXkgb2YgdGhlIGdpdmVuIGRpbWVuc2lvbiwgd2hpbGUgYWNjdW11bGF0aW5nXG4gICAqIGluZGljZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkaW1cbiAgICogQHBhcmFtIHtNdWx0aWRpbWVuc2lvbmFsQXJyYXkuPCo+fSBhcnJcbiAgICogQHJldHVybnMge011bHRpZGltZW5zaW9uYWxBcnJheS48Kj59XG4gICAqL1xuICBmdW5jdGlvbiByZWN1ciggZGltLCBhcnIgKSB7XG4gICAgcmV0dXJuIGFyci5tYXAoICggZWxlbWVudCwgaW5kZXggKSA9PiB7XG5cbiAgICAgIC8vIFRvIHByb2Nlc3MgdGhpcyBlbGVtZW50LCB3ZSBuZWVkIHRvIHJlY29yZCBvdXIgaW5kZXggKGluIGNhc2UgaXQgaXMgYW4gYXJyYXkgdGhhdCB3ZSBpdGVyYXRlIHRocm91Z2gpLlxuICAgICAgaW5kaWNlcy5wdXNoKCBpbmRleCApO1xuXG4gICAgICAvLyBJZiBvdXIgZGltZW5zaW9uIGlzIDEsIGl0J3Mgb3VyIGJhc2UgY2FzZSAoYXBwbHkgdGhlIG5vcm1hbCBtYXAgZnVuY3Rpb24pLCBvdGhlcndpc2UgY29udGludWUgcmVjdXJzaXZlbHkuXG4gICAgICBjb25zdCByZXN1bHQgPSBkaW0gPT09IDEgPyBtYXAoIC4uLlsgZWxlbWVudCBdLmNvbmNhdCggaW5kaWNlcyApICkgOiByZWN1ciggZGltIC0gMSwgZWxlbWVudCApO1xuXG4gICAgICAvLyBXZSBhcmUgZG9uZSB3aXRoIGl0ZXJhdGlvblxuICAgICAgaW5kaWNlcy5wb3AoKTtcbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfSApO1xuICB9XG5cbiAgcmV0dXJuIHJlY3VyKCBkaW1lbnNpb24sIGFycmF5ICk7XG59XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnZGltZW5zaW9uTWFwJywgZGltZW5zaW9uTWFwICk7XG5cbmV4cG9ydCBkZWZhdWx0IGRpbWVuc2lvbk1hcDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxZQUFZQSxDQUFFQyxTQUFTLEVBQUVDLEtBQUssRUFBRUMsR0FBRyxFQUFHO0VBRTdDO0VBQ0E7RUFDQSxNQUFNQyxPQUFPLEdBQUcsRUFBRTs7RUFFbEI7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLFNBQVNDLEtBQUtBLENBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFHO0lBQ3pCLE9BQU9BLEdBQUcsQ0FBQ0osR0FBRyxDQUFFLENBQUVLLE9BQU8sRUFBRUMsS0FBSyxLQUFNO01BRXBDO01BQ0FMLE9BQU8sQ0FBQ00sSUFBSSxDQUFFRCxLQUFLLENBQUU7O01BRXJCO01BQ0EsTUFBTUUsTUFBTSxHQUFHTCxHQUFHLEtBQUssQ0FBQyxHQUFHSCxHQUFHLENBQUUsR0FBRyxDQUFFSyxPQUFPLENBQUUsQ0FBQ0ksTUFBTSxDQUFFUixPQUFPLENBQUUsQ0FBRSxHQUFHQyxLQUFLLENBQUVDLEdBQUcsR0FBRyxDQUFDLEVBQUVFLE9BQU8sQ0FBRTs7TUFFOUY7TUFDQUosT0FBTyxDQUFDUyxHQUFHLEVBQUU7TUFDYixPQUFPRixNQUFNO0lBQ2YsQ0FBQyxDQUFFO0VBQ0w7RUFFQSxPQUFPTixLQUFLLENBQUVKLFNBQVMsRUFBRUMsS0FBSyxDQUFFO0FBQ2xDO0FBRUFILFFBQVEsQ0FBQ2UsUUFBUSxDQUFFLGNBQWMsRUFBRWQsWUFBWSxDQUFFO0FBRWpELGVBQWVBLFlBQVkifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/EnumerationMap.js
// Copyright 2019-2022, University of Colorado Boulder

/**
 * An object that contains a value for each item in an enumeration.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


// T = enumeration value type
// U = mapped value type
class EnumerationMap {
  _map = new Map();
  /**
   * @param enumeration
   * @param factory - function( {TEnumeration.*} ) => {*}, maps an enumeration value to any value.
   */
  constructor(enumeration, factory) {
    this._enumeration = enumeration;
    this._values = enumeration.enumeration.values;
    this._values.forEach(entry => {
      assert && assert(!this._map.has(entry), 'Enumeration key override problem');
      this._map.set(entry, factory(entry));
    });
  }

  /**
   * Returns the value associated with the given enumeration entry.
   */
  get(entry) {
    assert && assert(this._values.includes(entry));
    assert && assert(this._map.has(entry));
    return this._map.get(entry);
  }

  /**
   * Sets the value associated with the given enumeration entry.
   */
  set(entry, value) {
    assert && assert(this._values.includes(entry));
    this._map.set(entry, value);
  }

  /**
   * Returns a new EnumerationMap with mapped values.
   *
   * @param mapFunction - function( {*}, {TEnumeration.*} ): {*}
   * @returns With the mapped values
   */
  map(mapFunction) {
    return new EnumerationMap(this._enumeration, entry => mapFunction(this.get(entry), entry));
  }

  /**
   * Calls the callback on each item of the enumeration map.
   *
   * @param callback - function(value:*, enumerationValue:*)
   */
  forEach(callback) {
    this._values.forEach(entry => callback(this.get(entry), entry));
  }

  /**
   * Returns the values stored in the map, as an array
   *
   */
  values() {
    return this._values.map(entry => this.get(entry));
  }
}
js_phetCore.register('EnumerationMap', EnumerationMap);
/* harmony default export */ const js_EnumerationMap = (EnumerationMap);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIkVudW1lcmF0aW9uTWFwIiwiX21hcCIsIk1hcCIsImNvbnN0cnVjdG9yIiwiZW51bWVyYXRpb24iLCJmYWN0b3J5IiwiX2VudW1lcmF0aW9uIiwiX3ZhbHVlcyIsInZhbHVlcyIsImZvckVhY2giLCJlbnRyeSIsImFzc2VydCIsImhhcyIsInNldCIsImdldCIsImluY2x1ZGVzIiwidmFsdWUiLCJtYXAiLCJtYXBGdW5jdGlvbiIsImNhbGxiYWNrIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFbnVtZXJhdGlvbk1hcC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBBbiBvYmplY3QgdGhhdCBjb250YWlucyBhIHZhbHVlIGZvciBlYWNoIGl0ZW0gaW4gYW4gZW51bWVyYXRpb24uXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxudHlwZSBURW51bWVyYXRpb248VD4gPSB7XG4gIGVudW1lcmF0aW9uOiB7XG4gICAgdmFsdWVzOiBUW107XG4gIH07XG59O1xuXG4vLyBUID0gZW51bWVyYXRpb24gdmFsdWUgdHlwZVxuLy8gVSA9IG1hcHBlZCB2YWx1ZSB0eXBlXG5jbGFzcyBFbnVtZXJhdGlvbk1hcDxULCBVPiB7XG4gIHByaXZhdGUgcmVhZG9ubHkgX2VudW1lcmF0aW9uOiBURW51bWVyYXRpb248VD47XG4gIHByaXZhdGUgX21hcCA9IG5ldyBNYXA8VCwgVT4oKTtcbiAgcHJpdmF0ZSBfdmFsdWVzOiBUW107XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBlbnVtZXJhdGlvblxuICAgKiBAcGFyYW0gZmFjdG9yeSAtIGZ1bmN0aW9uKCB7VEVudW1lcmF0aW9uLip9ICkgPT4geyp9LCBtYXBzIGFuIGVudW1lcmF0aW9uIHZhbHVlIHRvIGFueSB2YWx1ZS5cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggZW51bWVyYXRpb246IFRFbnVtZXJhdGlvbjxUPiwgZmFjdG9yeTogKCB0OiBUICkgPT4gVSApIHtcblxuICAgIHRoaXMuX2VudW1lcmF0aW9uID0gZW51bWVyYXRpb247XG5cbiAgICB0aGlzLl92YWx1ZXMgPSBlbnVtZXJhdGlvbi5lbnVtZXJhdGlvbi52YWx1ZXM7XG4gICAgdGhpcy5fdmFsdWVzLmZvckVhY2goIGVudHJ5ID0+IHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLl9tYXAuaGFzKCBlbnRyeSApLCAnRW51bWVyYXRpb24ga2V5IG92ZXJyaWRlIHByb2JsZW0nICk7XG4gICAgICB0aGlzLl9tYXAuc2V0KCBlbnRyeSwgZmFjdG9yeSggZW50cnkgKSApO1xuICAgIH0gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIGVudW1lcmF0aW9uIGVudHJ5LlxuICAgKi9cbiAgcHVibGljIGdldCggZW50cnk6IFQgKTogVSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5fdmFsdWVzLmluY2x1ZGVzKCBlbnRyeSApICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5fbWFwLmhhcyggZW50cnkgKSApO1xuICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0KCBlbnRyeSApITtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggdGhlIGdpdmVuIGVudW1lcmF0aW9uIGVudHJ5LlxuICAgKi9cbiAgcHVibGljIHNldCggZW50cnk6IFQsIHZhbHVlOiBVICk6IHZvaWQge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuX3ZhbHVlcy5pbmNsdWRlcyggZW50cnkgKSApO1xuICAgIHRoaXMuX21hcC5zZXQoIGVudHJ5LCB2YWx1ZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgRW51bWVyYXRpb25NYXAgd2l0aCBtYXBwZWQgdmFsdWVzLlxuICAgKlxuICAgKiBAcGFyYW0gbWFwRnVuY3Rpb24gLSBmdW5jdGlvbiggeyp9LCB7VEVudW1lcmF0aW9uLip9ICk6IHsqfVxuICAgKiBAcmV0dXJucyBXaXRoIHRoZSBtYXBwZWQgdmFsdWVzXG4gICAqL1xuICBwdWJsaWMgbWFwKCBtYXBGdW5jdGlvbjogKCB1OiBVLCB0OiBUICkgPT4gVSApOiBFbnVtZXJhdGlvbk1hcDxULCBVPiB7XG4gICAgcmV0dXJuIG5ldyBFbnVtZXJhdGlvbk1hcCggdGhpcy5fZW51bWVyYXRpb24sIGVudHJ5ID0+IG1hcEZ1bmN0aW9uKCB0aGlzLmdldCggZW50cnkgKSwgZW50cnkgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGxzIHRoZSBjYWxsYmFjayBvbiBlYWNoIGl0ZW0gb2YgdGhlIGVudW1lcmF0aW9uIG1hcC5cbiAgICpcbiAgICogQHBhcmFtIGNhbGxiYWNrIC0gZnVuY3Rpb24odmFsdWU6KiwgZW51bWVyYXRpb25WYWx1ZToqKVxuICAgKi9cbiAgcHVibGljIGZvckVhY2goIGNhbGxiYWNrOiAoIHU6IFUsIHQ6IFQgKSA9PiB2b2lkICk6IHZvaWQge1xuICAgIHRoaXMuX3ZhbHVlcy5mb3JFYWNoKCBlbnRyeSA9PiBjYWxsYmFjayggdGhpcy5nZXQoIGVudHJ5ICksIGVudHJ5ICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZXMgc3RvcmVkIGluIHRoZSBtYXAsIGFzIGFuIGFycmF5XG4gICAqXG4gICAqL1xuICBwdWJsaWMgdmFsdWVzKCk6IFVbXSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZhbHVlcy5tYXAoIGVudHJ5ID0+IHRoaXMuZ2V0KCBlbnRyeSApICk7XG4gIH1cbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdFbnVtZXJhdGlvbk1hcCcsIEVudW1lcmF0aW9uTWFwICk7XG5leHBvcnQgZGVmYXVsdCBFbnVt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
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/escapeHTML.js
// Copyright 2013-2020, University of Colorado Boulder

/**
 * Escaping of HTML content that will be placed in the body, inside an element as a node.
 *
 * This is NOT for escaping something in other HTML contexts, for example as an attribute value
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function escapeHTML(str) {
  // see https://www.owasp.org/index.php/XSS_(Cross_Site_Scripting)_Prevention_Cheat_Sheet
  // HTML Entity Encoding
  return str.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;').replace(/'/g, '&#x27;').replace(/\//g, '&#x2F;');
}
js_phetCore.register('escapeHTML', escapeHTML);
/* harmony default export */ const js_escapeHTML = ((/* unused pure expression or super */ null && (escapeHTML)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImVzY2FwZUhUTUwiLCJzdHIiLCJyZXBsYWNlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJlc2NhcGVIVE1MLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEVzY2FwaW5nIG9mIEhUTUwgY29udGVudCB0aGF0IHdpbGwgYmUgcGxhY2VkIGluIHRoZSBib2R5LCBpbnNpZGUgYW4gZWxlbWVudCBhcyBhIG5vZGUuXG4gKlxuICogVGhpcyBpcyBOT1QgZm9yIGVzY2FwaW5nIHNvbWV0aGluZyBpbiBvdGhlciBIVE1MIGNvbnRleHRzLCBmb3IgZXhhbXBsZSBhcyBhbiBhdHRyaWJ1dGUgdmFsdWVcbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuXG5mdW5jdGlvbiBlc2NhcGVIVE1MKCBzdHIgKSB7XG4gIC8vIHNlZSBodHRwczovL3d3dy5vd2FzcC5vcmcvaW5kZXgucGhwL1hTU18oQ3Jvc3NfU2l0ZV9TY3JpcHRpbmcpX1ByZXZlbnRpb25fQ2hlYXRfU2hlZXRcbiAgLy8gSFRNTCBFbnRpdHkgRW5jb2RpbmdcbiAgcmV0dXJuIHN0clxuICAgIC5yZXBsYWNlKCAvJi9nLCAnJmFtcDsnIClcbiAgICAucmVwbGFjZSggLzwvZywgJyZsdDsnIClcbiAgICAucmVwbGFjZSggLz4vZywgJyZndDsnIClcbiAgICAucmVwbGFjZSggL1wiL2csICcmcXVvdDsnIClcbiAgICAucmVwbGFjZSggLycvZywgJyYjeDI3OycgKVxuICAgIC5yZXBsYWNlKCAvXFwvL2csICcmI3gyRjsnICk7XG59XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnZXNjYXBlSFRNTCcsIGVzY2FwZUhUTUwgKTtcblxuZXhwb3J0IGRlZmF1bHQgZXNjYXBlSFRNTDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlO0FBRXBDLFNBQVNDLFVBQVVBLENBQUVDLEdBQUcsRUFBRztFQUN6QjtFQUNBO0VBQ0EsT0FBT0EsR0FBRyxDQUNQQyxPQUFPLENBQUUsSUFBSSxFQUFFLE9BQU8sQ0FBRSxDQUN4QkEsT0FBTyxDQUFFLElBQUksRUFBRSxNQUFNLENBQUUsQ0FDdkJBLE9BQU8sQ0FBRSxJQUFJLEVBQUUsTUFBTSxDQUFFLENBQ3ZCQSxPQUFPLENBQUUsSUFBSSxFQUFFLFFBQVEsQ0FBRSxDQUN6QkEsT0FBTyxDQUFFLElBQUksRUFBRSxRQUFRLENBQUUsQ0FDekJBLE9BQU8sQ0FBRSxLQUFLLEVBQUUsUUFBUSxDQUFFO0FBQy9CO0FBRUFILFFBQVEsQ0FBQ0ksUUFBUSxDQUFFLFlBQVksRUFBRUgsVUFBVSxDQUFFO0FBRTdDLGVBQWVBLFVBQVUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/EventTimer.js
// Copyright 2014-2023, University of Colorado Boulder

/**
 * Abstraction for timed-event series that helps with variable frame-rates. Useful for things that need to happen at a
 * specific rate real-time regardless of the frame-rate.
 *
 * An EventTimer is created with a specific event "model" that determines when events occur, and a callback that will
 * be triggered for each event (with its time elapsed since it should have occurred). Thus, each callback basically
 * says:
 * - "an event happened <timeElapsed> ago"
 *
 * To have the EventTimer step forward in time (firing callbacks for every event that would have occurred over that
 * time frame, if any), call step( realTimeElapsed ).
 *
 * -----------------------------------------
 *
 * For example, create a timer with a constant rate that will fire events every 1 time units:
 *
 * var timer = new phet.phetCore.EventTimer( new phetCore.EventTimer.ConstantEventModel( 1 ), function( timeElapsed ) {
 *   console.log( 'event with timeElapsed: ' + timeElapsed );
 * } );
 *
 * Stepping once for 1.5 time units will fire once (0.5 seconds since the "end" of the step), and will be 0.5 seconds
 * from the next step:
 *
 * timer.step( 1.5 );
 * > event with timeElapsed: 0.5
 *
 * The 0.5 above is because after 1.5 seconds of time, the event will have happened 0.5 seconds ago:
 *
 *           step 1.5
 * |------------------------>|
 * |                *        |          *                     *    <- constant time of 1 between each event
 * |                <--------|
 *                 0.5 seconds past the event now
 *
 * Stepping for a longer time will result in more events:
 *
 * timer.step( 6 );
 * > event with timeElapsed: 5.5
 * > event with timeElapsed: 4.5
 * > event with timeElapsed: 3.5
 * > event with timeElapsed: 2.5
 * > event with timeElapsed: 1.5
 * > event with timeElapsed: 0.5
 *
 *       step 1.5                                  step 6                                 step 0   step 1.5
 * |---------------->|---------------------------------------------------------------------->|---------------->|
 * |           *           *           *           *           *           *           *           *           *
 * |           <-----|     <-----------------------------------------------------------------|     <-----------|
 * |          0.5         5.5          <-----------------------------------------------------|     1           0
 * |           ^           ^          4.5          <-----------------------------------------|              event at
 * |           |           |                      3.5          <-----------------------------|              current
 * |           |           |                                  2.5          <-----------------|              time
 * |     callback( t ) called, etc.                                       1.5          <-----|
 * |
 *
 * A step with zero time will trigger no events:
 *
 * timer.step( 0 );
 *
 * The timer will fire an event once it reaches the exact point in time:
 *
 * timer.step( 1.5 );
 * > event with timeElapsed: 1
 * > event with timeElapsed: 0
 *
 * NOTE:
 * If your timer callbacks create model objects that would also get stepped forward, make sure to step forward objects
 * before calling eventTimer.step(), so that objects don't get stepped twice. Usually the callback will have:
 * - var modelElement = new ModelElement();
 * - modelElement.step( callbackTimeElapsed );
 * And you don't want to apply step( dt ) to it directly afterwards.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


class EventTimer {
  /*
   * Create an event timer with a specific model (determines the time between events), and a callback to be called
   * for events.
   *
   * @param eventModel: getPeriodBeforeNextEvent() will be called at
   *    the start and after every event to determine the time required to pass by before the next event occurs.
   * @param eventCallback - Will be called for every event. The timeElapsed passed in as the
   *    only argument denotes the time elapsed since the event would have occurred. E.g. if we step for 5 seconds and
   *    our event would have occurred 1 second into that step, the timeElapsed will be 4 seconds, since after the end
   *    of the 5 seconds the event would have happened 4 seconds ago.
   */
  constructor(eventModel, eventCallback) {
    this.eventModel = eventModel;
    this.eventCallback = eventCallback;
    this.period = this.eventModel.getPeriodBeforeNextEvent();
    this.timeBeforeNextEvent = this.period;
  }

  /**
   * Steps the timer forward by a certain amount of time. This may cause 0 or more events to actually occur.
   */
  step(dt) {
    while (dt >= this.timeBeforeNextEvent) {
      dt -= this.timeBeforeNextEvent;
      this.period = this.eventModel.getPeriodBeforeNextEvent();
      this.timeBeforeNextEvent = this.period;

      // how much time has elapsed since this event began
      this.eventCallback(dt);
    }

    // use up the remaining DT
    this.timeBeforeNextEvent -= dt;
  }

  /**
   * Returns how far we are to the next event firing (where 0 is an event "just" fired, and 1 is the next event
   * firing).
   *
   * @returns In the range [0,1). Is inclusive for 0, but exclusive for 1.
   */
  getRatio() {
    return (this.period - this.timeBeforeNextEvent) / this.period;
  }
  static ConstantEventModel = class ConstantEventModel {
    /*
     * Event model that will fire events at a constant rate. An event will occur every 1/rate time units.
     */
    constructor(rate) {
      this.rate = rate;
      assert && assert(rate > 0, 'We need to have a strictly positive rate in order to prevent infinite loops.');
    }
    getPeriodBeforeNextEvent() {
      return 1 / this.rate;
    }
  };
  static UniformEventModel = class UniformEventModel {
    /*
     * Event model that will fire events averaging a certain rate, but with the time between events being uniformly
     * random.
     *
     * The pseudoRandomNumberSource, when called, should generate uniformly distributed random numbers in the range [0,1).
     */
    constructor(rate, pseudoRandomNumberSource) {
      this.rate = rate;
      this.pseudoRandomNumberSource = pseudoRandomNumberSource;
      assert && assert(rate > 0, 'We need to have a strictly positive rate in order to prevent infinite loops.');
    }
    getPeriodBeforeNextEvent() {
      const uniformRandomNumber = this.pseudoRandomNumberSource();
      assert && assert(uniformRandomNumber >= 0 && uniformRandomNumber < 1, `Our uniform random number is outside of its expected range with a value of ${uniformRandomNumber}`);

      // sample the exponential distribution
      return uniformRandomNumber * 2 / this.rate;
    }
  };
  static PoissonEventModel = class PoissonEventModel {
    /*
     * Event model that will fire events corresponding to a Poisson process with the specified rate.
     * The pseudoRandomNumberSource, when called, should generate uniformly distributed random numbers in the range [0,1).
     */
    constructor(rate, pseudoRandomNumberSource) {
      this.rate = rate;
      this.pseudoRandomNumberSource = pseudoRandomNumberSource;
      assert && assert(rate > 0, 'We need to have a strictly positive poisson rate in order to prevent infinite loops.');
    }
    getPeriodBeforeNextEvent() {
      // A poisson process can be described as having an independent exponential distribution for the time between
      // consecutive events.
      // see http://en.wikipedia.org/wiki/Exponential_distribution#Generating_exponential_variates and
      // http://en.wikipedia.org/wiki/Poisson_process

      const uniformRandomNumber = this.pseudoRandomNumberSource();
      assert && assert(uniformRandomNumber >= 0 && uniformRandomNumber < 1, `Our uniform random number is outside of its expected range with a value of ${uniformRandomNumber}`);

      // sample the exponential distribution
      return -Math.log(uniformRandomNumber) / this.rate;
    }
  };
}
js_phetCore.register('EventTimer', EventTimer);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIkV2ZW50VGltZXIiLCJjb25zdHJ1Y3RvciIsImV2ZW50TW9kZWwiLCJldmVudENhbGxiYWNrIiwicGVyaW9kIiwiZ2V0UGVyaW9kQmVmb3JlTmV4dEV2ZW50IiwidGltZUJlZm9yZU5leHRFdmVudCIsInN0ZXAiLCJkdCIsImdldFJhdGlvIiwiQ29uc3RhbnRFdmVudE1vZGVsIiwicmF0ZSIsImFzc2VydCIsIlVuaWZvcm1FdmVudE1vZGVsIiwicHNldWRvUmFuZG9tTnVtYmVyU291cmNlIiwidW5pZm9ybVJhbmRvbU51bWJlciIsIlBvaXNzb25FdmVudE1vZGVsIiwiTWF0aCIsImxvZyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiRXZlbnRUaW1lci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNC0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBBYnN0cmFjdGlvbiBmb3IgdGltZWQtZXZlbnQgc2VyaWVzIHRoYXQgaGVscHMgd2l0aCB2YXJpYWJsZSBmcmFtZS1yYXRlcy4gVXNlZnVsIGZvciB0aGluZ3MgdGhhdCBuZWVkIHRvIGhhcHBlbiBhdCBhXG4gKiBzcGVjaWZpYyByYXRlIHJlYWwtdGltZSByZWdhcmRsZXNzIG9mIHRoZSBmcmFtZS1yYXRlLlxuICpcbiAqIEFuIEV2ZW50VGltZXIgaXMgY3JlYXRlZCB3aXRoIGEgc3BlY2lmaWMgZXZlbnQgXCJtb2RlbFwiIHRoYXQgZGV0ZXJtaW5lcyB3aGVuIGV2ZW50cyBvY2N1ciwgYW5kIGEgY2FsbGJhY2sgdGhhdCB3aWxsXG4gKiBiZSB0cmlnZ2VyZWQgZm9yIGVhY2ggZXZlbnQgKHdpdGggaXRzIHRpbWUgZWxhcHNlZCBzaW5jZSBpdCBzaG91bGQgaGF2ZSBvY2N1cnJlZCkuIFRodXMsIGVhY2ggY2FsbGJhY2sgYmFzaWNhbGx5XG4gKiBzYXlzOlxuICogLSBcImFuIGV2ZW50IGhhcHBlbmVkIDx0aW1lRWxhcHNlZD4gYWdvXCJcbiAqXG4gKiBUbyBoYXZlIHRoZSBFdmVudFRpbWVyIHN0ZXAgZm9yd2FyZCBpbiB0aW1lIChmaXJpbmcgY2FsbGJhY2tzIGZvciBldmVyeSBldmVudCB0aGF0IHdvdWxkIGhhdmUgb2NjdXJyZWQgb3ZlciB0aGF0XG4gKiB0aW1lIGZyYW1lLCBpZiBhbnkpLCBjYWxsIHN0ZXAoIHJlYWxUaW1lRWxhcHNlZCApLlxuICpcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKlxuICogRm9yIGV4YW1wbGUsIGNyZWF0ZSBhIHRpbWVyIHdpdGggYSBjb25zdGFudCByYXRlIHRoYXQgd2lsbCBmaXJlIGV2ZW50cyBldmVyeSAxIHRpbWUgdW5pdHM6XG4gKlxuICogdmFyIHRpbWVyID0gbmV3IHBoZXQucGhldENvcmUuRXZlbnRUaW1lciggbmV3IHBoZXRDb3JlLkV2ZW50VGltZXIuQ29uc3RhbnRFdmVudE1vZGVsKCAxICksIGZ1bmN0aW9uKCB0aW1lRWxhcHNlZCApIHtcbiAqICAgY29uc29sZS5sb2coICdldmVudCB3aXRoIHRpbWVFbGFwc2VkOiAnICsgdGltZUVsYXBzZWQgKTtcbiAqIH0gKTtcbiAqXG4gKiBTdGVwcGluZyBvbmNlIGZvciAxLjUgdGltZSB1bml0cyB3aWxsIGZpcmUgb25jZSAoMC41IHNlY29uZHMgc2luY2UgdGhlIFwiZW5kXCIgb2YgdGhlIHN0ZXApLCBhbmQgd2lsbCBiZSAwLjUgc2Vjb25kc1xuICogZnJvbSB0aGUgbmV4dCBzdGVwOlxuICpcbiAqIHRpbWVyLnN0ZXAoIDEuNSApO1xuICogPiBldmVudCB3aXRoIHRpbWVFbGFwc2VkOiAwLjVcbiAqXG4gKiBUaGUgMC41IGFib3ZlIGlzIGJlY2F1c2UgYWZ0ZXIgMS41IHNlY29uZHMgb2YgdGltZSwgdGhlIGV2ZW50IHdpbGwgaGF2ZSBoYXBwZW5lZCAwLjUgc2Vjb25kcyBhZ286XG4gKlxuICogICAgICAgICAgIHN0ZXAgMS41XG4gKiB8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPnxcbiAqIHwgICAgICAgICAgICAgICAgKiAgICAgICAgfCAgICAgICAgICAqICAgICAgICAgICAgICAgICAgICAgKiAgICA8LSBjb25zdGFudCB0aW1lIG9mIDEgYmV0d2VlbiBlYWNoIGV2ZW50XG4gKiB8ICAgICAgICAgICAgICAgIDwtLS0tLS0tLXxcbiAqICAgICAgICAgICAgICAgICAwLjUgc2Vjb25kcyBwYXN0IHRoZSBldmVudCBub3dcbiAqXG4gKiBTdGVwcGluZyBmb3IgYSBsb25nZXIgdGltZSB3aWxsIHJlc3VsdCBpbiBtb3JlIGV2ZW50czpcbiAqXG4gKiB0aW1lci5zdGVwKCA2ICk7XG4gKiA+IGV2ZW50IHdpdGggdGltZUVsYXBzZWQ6IDUuNVxuICogPiBldmVudCB3aXRoIHRpbWVFbGFwc2VkOiA0LjVcbiAqID4gZXZlbnQgd2l0aCB0aW1lRWxhcHNlZDogMy41XG4gKiA+IGV2ZW50IHdpdGggdGltZUVsYXBzZWQ6IDIuNVxuICogPiBldmVudCB3aXRoIHRpbWVFbGFwc2VkOiAxLjVcbiAqID4gZXZlbnQgd2l0aCB0aW1lRWxhcHNlZDogMC41XG4gKlxuICogICAgICAgc3RlcCAxLjUgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCA2ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcCAwICAgc3RlcCAxLjVcbiAqIHwtLS0tLS0tLS0tLS0tLS0tPnwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tPnwtLS0tLS0tLS0tLS0tLS0tPnxcbiAqIHwgICAgICAgICAgICogICAgICAgICAgICogICAgICAgICAgICogICAgICAgICAgICogICAgICAgICAgICogICAgICAgICAgICogICAgICAgICAgICogICAgICAgICAgICogICAgICAgICAgICpcbiAqIHwgICAgICAgICAgIDwtLS0tLXwgICAgIDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwgICAgIDwtLS0tLS0tLS0tLXxcbiAqIHwgICAgICAgICAgMC41ICAgICAgICAgNS41ICAgICAgICAgIDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwgICAgIDEgICAgICAgICAgIDBcbiAqIHwgICAgICAgICAgIF4gICAgICAgICAgIF4gICAgICAgICAgNC41ICAgICAgICAgIDwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXwgICAgICAgICAgICAgIGV2ZW50IGF0XG4gKiB8ICAgICAgICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgIDMuNSAgICAgICAgICA8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18ICAgICAgICAgICAgICBjdXJyZW50XG4gKiB8ICAgICAgICAgICB8ICAgICAgICAgICB8ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDIuNSAgICAgICAgICA8LS0tLS0tLS0tLS0tLS0tLS18ICAgICAgICAgICAgICB0aW1lXG4gKiB8ICAgICBjYWxsYmFjayggdCApIGNhbGxlZCwgZXRjLiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDEuNSAgICAgICAgICA8LS0tLS18XG4gKiB8XG4gKlxuICogQSBzdGVwIHdpdGggemVybyB0aW1lIHdpbGwgdHJpZ2dlciBubyBldmVudHM6XG4gKlxuICogdGltZXIuc3RlcCggMCApO1xuICpcbiAqIFRoZSB0aW1lciB3aWxsIGZpcmUgYW4gZXZlbnQgb25jZSBpdCByZWFjaGVzIHRoZSBleGFjdCBwb2ludCBpbiB0aW1lOlxuICpcbiAqIHRpbWVyLnN0ZXAoIDEuNSApO1xuICogPiBldmVudCB3aXRoIHRpbWVFbGFwc2VkOiAxXG4gKiA+IGV2ZW50IHdpdGggdGltZUVsYXBzZWQ6IDBcbiAqXG4gKiBOT1RFOlxuICogSWYgeW91ciB0aW1lciBjYWxsYmFja3MgY3JlYXRlIG1vZGVsIG9iamVjdHMgdGhhdCB3b3VsZCBhbHNvIGdldCBzdGVwcGVkIGZvcndhcmQsIG1ha2Ugc3VyZSB0byBzdGVwIGZvcndhcmQgb2JqZWN0c1xuICogYmVmb3JlIGNhbGxpbmcgZXZlbnRUaW1lci5zdGVwKCksIHNvIHRoYXQgb2JqZWN0cyBkb24ndCBnZXQgc3RlcHBlZCB0d2ljZS4gVXN1YWxseSB0aGUgY2FsbGJhY2sgd2lsbCBoYXZlOlxuICogLSB2YXIgbW9kZWxFbGVtZW50ID0gbmV3IE1vZGVsRWxlbWVudCgpO1xuICogLSBtb2RlbEVsZW1lbnQuc3RlcCggY2FsbGJhY2tUaW1lRWxhcHNlZCApO1xuICogQW5kIHlvdSBkb24ndCB3YW50IHRvIGFwcGx5IHN0ZXAoIGR0ICkgdG8gaXQgZGlyZWN0bHkgYWZ0ZXJ3YXJkcy5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBFdmVudFRpbWVyIHtcblxuICBwcml2YXRlIHBlcmlvZDogbnVtYmVyO1xuICBwcml2YXRlIHRpbWVCZWZvcmVOZXh0RXZlbnQ6IG51bWJlcjtcblxuICAvKlxuICAgKiBDcmVhdGUgYW4gZXZlbnQgdGltZXIgd2l0aCBhIHNwZWNpZmljIG1vZGVsIChkZXRlcm1pbmVzIHRoZSB0aW1lIGJldHdlZW4gZXZlbnRzKSwgYW5kIGEgY2FsbGJhY2sgdG8gYmUgY2FsbGVkXG4gICAqIGZvciBldmVudHMuXG4gICAqXG4gICAqIEBwYXJhbSBldmVudE1vZGVsOiBnZXRQZXJpb2RCZWZvcmVOZXh0RXZlbnQoKSB3aWxsIGJlIGNhbGxlZCBhdFxuICAgKiAgICB0aGUgc3RhcnQgYW5kIGFmdGVyIGV2ZXJ5IGV2ZW50IHRvIGRldGVybWluZSB0aGUgdGltZSByZXF1aXJlZCB0byBwYXNzIGJ5IGJlZm9yZSB0aGUgbmV4dCBldmVudCBvY2N1cnMuXG4gICAqIEBwYXJhbSBldmVudENhbGxiYWNrIC0gV2lsbCBiZSBjYWxsZWQgZm9yIGV2ZXJ5IGV2ZW50LiBUaGUgdGltZUVsYXBzZWQgcGFzc2VkIGluIGFzIHRoZVxuICAgKiAgICBvbmx5IGFyZ3VtZW50IGRlbm90ZXMgdGhlIHRpbWUgZWxhcHNlZCBzaW5jZSB0aGUgZXZlbnQgd291bGQgaGF2ZSBvY2N1cnJlZC4gRS5nLiBpZiB3ZSBzdGVwIGZvciA1IHNlY29uZHMgYW5kXG4gICAqICAgIG91ciBldmVudCB3b3VsZCBoYXZlIG9jY3VycmVkIDEgc2Vjb25kIGludG8gdGhhdCBzdGVwLCB0aGUgdGltZUVsYXBzZWQgd2lsbCBiZSA0IHNlY29uZHMsIHNpbmNlIGFmdGVyIHRoZSBlbmRcbiAgICogICAgb2YgdGhlIDUgc2Vjb25kcyB0aGUgZXZlbnQgd291bGQgaGF2ZSBoYXBwZW5lZCA0IHNlY29uZHMgYWdvLlxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBwcml2YXRlIHJlYWRvbmx5IGV2ZW50TW9kZWw6IHsgZ2V0UGVyaW9kQmVmb3JlTmV4dEV2ZW50OiAoKSA9PiBudW1iZXIgfSwgcHJpdmF0ZSByZWFkb25seSBldmVudENhbGxiYWNrOiAoIHRpbWVFbGFwc2VkOiBudW1iZXIgKSA9PiB2b2lkICkge1xuICAgIHRoaXMucGVyaW9kID0gdGhpcy5ldmVudE1vZGVsLmdldFBlcmlvZEJlZm9yZU5leHRFdmVudCgpO1xuICAgIHRoaXMudGltZUJlZm9yZU5leHRFdmVudCA9IHRoaXMucGVyaW9kO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0ZXBzIHRoZSB0aW1lciBmb3J3YXJkIGJ5IGEgY2VydGFpbiBhbW91bnQgb2YgdGltZS4gVGhpcyBtYXkgY2F1c2UgMCBvciBtb3JlIGV2ZW50cyB0byBhY3R1YWxseSBvY2N1ci5cbiAgICovXG4gIHB1YmxpYyBzdGVwKCBkdDogbnVtYmVyICk6IHZvaWQge1xuICAgIHdoaWxlICggZHQgPj0gdGhpcy50aW1lQmVmb3JlTmV4dEV2ZW50ICkge1xuICAgICAgZHQgLT0gdGhpcy50aW1lQmVmb3JlTmV4dEV2ZW50O1xuICAgICAgdGhpcy5wZXJpb2QgPSB0aGlzLmV2ZW50TW9kZWwuZ2V0UGVyaW9kQmVmb3JlTmV4dEV2ZW50KCk7XG4gICAgICB0aGlzLnRpbWVCZWZvcmVOZXh0RXZlbnQgPSB0aGlzLnBlcmlvZDtcblxuICAgICAgLy8gaG93IG11Y2ggdGltZSBoYXMgZWxhcHNlZCBzaW5jZSB0aGlzIGV2ZW50IGJlZ2FuXG4gICAgICB0aGlzLmV2ZW50Q2FsbGJhY2soIGR0ICk7XG4gICAgfVxuXG4gICAgLy8gdXNlIHVwIHRoZSByZW1haW5pbmcgRFRcbiAgICB0aGlzLnRpbWVCZWZvcmVOZXh0RXZlbnQgLT0gZHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBob3cgZmFyIHdlIGFyZSB0byB0aGUgbmV4dCBldmVudCBmaXJpbmcgKHdoZXJlIDAgaXMgYW4gZXZlbnQgXCJqdXN0XCIgZmlyZWQsIGFuZCAxIGlzIHRoZSBuZXh0IGV2ZW50XG4gICAqIGZpcmluZykuXG4gICAqXG4gICAqIEByZXR1cm5zIEluIHRoZSByYW5nZSBbMCwxKS4gSXMgaW5jbHVzaXZlIGZvciAwLCBidXQgZXhjbHVzaXZlIGZvciAxLlxuICAgKi9cbiAgcHVibGljIGdldFJhdGlvKCk6IG51bWJlciB7XG4gICAgcmV0dXJuICggdGhpcy5wZXJpb2QgLSB0aGlzLnRpbWVCZWZvcmVOZXh0RXZlbnQgKSAvIHRoaXMucGVyaW9kO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDb25zdGFudEV2ZW50TW9kZWwgPSBjbGFzcyBDb25zdGFudEV2ZW50TW9kZWwge1xuXG4gICAgLypcbiAgICAgKiBFdmVudCBtb2RlbCB0aGF0IHdpbGwgZmlyZSBldmVudHMgYXQgYSBjb25zdGFudCByYXRlLiBBbiBldmVudCB3aWxsIG9jY3VyIGV2ZXJ5IDEvcmF0ZSB0aW1lIHVuaXRzLlxuICAgICAqL1xuICAgIHB1YmxpYyBjb25zdHJ1Y3RvciggcHJpdmF0ZSByZWFkb25seSByYXRlOiBudW1iZXIgKSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCByYXRlID4gMCwgJ1dlIG5lZWQgdG8gaGF2ZSBhIHN0cmljdGx5IHBvc2l0aXZlIHJhdGUgaW4gb3JkZXIgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wcy4nICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBlcmlvZEJlZm9yZU5leHRFdmVudCgpOiBudW1iZXIge1xuICAgICAgcmV0dXJuIDEgLyB0aGlzLnJhdGU7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgVW5pZm9ybUV2ZW50TW9kZWwgPSBjbGFzcyBVbmlmb3JtRXZlbnRNb2RlbCB7XG4gICAgXG4gICAgLypcbiAgICAgKiBFdmVudCBtb2RlbCB0aGF0IHdpbGwgZmlyZSBldmVudHMgYXZlcmFnaW5nIGEgY2VydGFpbiByYXRlLCBidXQgd2l0aCB0aGUgdGltZSBiZXR3ZWVuIGV2ZW50cyBiZWluZyB1bmlmb3JtbHlcbiAgICAgKiByYW5kb20uXG4gICAgICpcbiAgICAgKiBUaGUgcHNldWRvUmFuZG9tTnVtYmVyU291cmNlLCB3aGVuIGNhbGxlZCwgc2hvdWxkIGdlbmVyYXRlIHVuaWZvcm1seSBkaXN0cmlidXRlZCByYW5kb20gbnVtYmVycyBpbiB0aGUgcmFuZ2UgWzAsMSkuXG4gICAgICovXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCBwcml2YXRlIHJlYWRvbmx5IHJhdGU6IG51bWJlciwgcHJpdmF0ZSByZWFkb25seSBwc2V1ZG9SYW5kb21OdW1iZXJTb3VyY2U6ICgpID0+IG51bWJlciApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHJhdGUgPiAwLCAnV2UgbmVlZCB0byBoYXZlIGEgc3RyaWN0bHkgcG9zaXRpdmUgcmF0ZSBpbiBvcmRlciB0byBwcmV2ZW50IGluZmluaXRlIGxvb3BzLicgKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZ2V0UGVyaW9kQmVmb3JlTmV4dEV2ZW50KCk6IG51bWJlciB7XG4gICAgICBjb25zdCB1bmlmb3JtUmFuZG9tTnVtYmVyID0gdGhpcy5wc2V1ZG9SYW5kb21OdW1iZXJTb3VyY2UoKTtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHVuaWZvcm1SYW5kb21OdW1iZXIgPj0gMCAmJiB1bmlmb3JtUmFuZG9tTnVtYmVyIDwgMSxcbiAgICAgICAgYE91ciB1bmlmb3JtIHJhbmRvbSBudW1iZXIgaXMgb3V0c2lkZSBvZiBpdHMgZXhwZWN0ZWQgcmFuZ2Ugd2l0aCBhIHZhbHVlIG9mICR7dW5pZm9ybVJhbmRvbU51bWJlcn1gICk7XG5cbiAgICAgIC8vIHNhbXBsZSB0aGUgZXhwb25lbnRpYWwgZGlzdHJpYnV0aW9uXG4gICAgICByZXR1cm4gdW5pZm9ybVJhbmRvbU51bWJlciAqIDIgLyB0aGlzLnJhdGU7XG4gICAgfVxuICB9O1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgUG9pc3NvbkV2ZW50TW9kZWwgPSBjbGFzcyBQb2lzc29uRXZlbnRNb2RlbCB7XG5cbiAgICAvKlxuICAgICAqIEV2ZW50IG1vZGVsIHRoYXQgd2lsbCBmaXJlIGV2ZW50cyBjb3JyZXNwb25kaW5nIHRvIGEgUG9pc3NvbiBwcm9jZXNzIHdpdGggdGhlIHNwZWNpZmllZCByYXRlLlxuICAgICAqIFRoZSBwc2V1ZG9SYW5kb21OdW1iZXJTb3VyY2UsIHdoZW4gY2FsbGVkLCBzaG91bGQgZ2VuZXJhdGUgdW5pZm9ybWx5IGRpc3RyaWJ1dGVkIHJhbmRvbSBudW1iZXJzIGluIHRoZSByYW5nZSBbMCwxKS5cbiAgICAgKi9cbiAgICBwdWJsaWMgY29uc3RydWN0b3IoIHByaXZhdGUgcmVhZG9ubHkgcmF0ZTogbnVtYmVyLCBwcml2YXRlIHJlYWRvbmx5IHBzZXVkb1JhbmRvbU51bWJlclNvdXJjZTogKCkgPT4gbnVtYmVyICkge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggcmF0ZSA+IDAsXG4gICAgICAgICdXZSBuZWVkIHRvIGhhdmUgYSBzdHJpY3RseSBwb3NpdGl2ZSBwb2lzc29uIHJhdGUgaW4gb3JkZXIgdG8gcHJldmVudCBpbmZpbml0ZSBsb29wcy4nICk7XG4gICAgfVxuXG4gICAgcHVibGljIGdldFBlcmlvZEJlZm9yZU5leHRFdmVudCgpOiBudW1iZXIge1xuXG4gICAgICAvLyBBIHBvaXNzb24gcHJvY2VzcyBjYW4gYmUgZGVzY3JpYmVkIGFzIGhhdmluZyBhbiBpbmRlcGVuZGVudCBleHBvbmVudGlhbCBkaXN0cmlidXRpb24gZm9yIHRoZSB0aW1lIGJldHdlZW5cbiAgICAgIC8vIGNvbnNlY3V0aXZlIGV2ZW50cy5cbiAgICAgIC8vIHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0V4cG9uZW50aWFsX2Rpc3RyaWJ1dGlvbiNHZW5lcmF0aW5nX2V4cG9uZW50aWFsX3ZhcmlhdGVzIGFuZFxuICAgICAgLy8gaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Qb2lzc29uX3Byb2Nlc3NcblxuICAgICAgY29uc3QgdW5pZm9ybVJhbmRvbU51bWJlciA9IHRoaXMucHNldWRvUmFuZG9tTnVtYmVyU291cmNlKCk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB1bmlmb3JtUmFuZG9tTnVtYmVyID49IDAgJiYgdW5pZm9ybVJhbmRvbU51bWJlciA8IDEsXG4gICAgICAgIGBPdXIgdW5pZm9ybSByYW5kb20gbnVtYmVyIGlzIG91dHNpZGUgb2YgaXRzIGV4cGVjdGVkIHJhbmdlIHdpdGggYSB2YWx1ZSBvZiAke3VuaWZvcm1SYW5kb21OdW1iZXJ9YCApO1xuXG4gICAgICAvLyBzYW1wbGUgdGhlIGV4cG9uZW50aWFsIGRpc3RyaWJ1dGlvblxuICAgICAgcmV0dXJuIC1NYXRoLmxvZyggdW5pZm9ybVJhbmRvbU51bWJlciApIC8gdGhpcy5yYXRlO1xuICAgIH1cbiAgfTtcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdFdmVudFRpbWVyJywgRXZlbnRUaW1lciApOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/extend.js
// Copyright 2013-2021, University of Colorado Boulder

/**
 * Like Underscore's _.extend and PHET_CORE/merge, but with hardcoded support for ES5 getters/setters. In general this
 * type shouldn't be used for phet's options pattern, and instead was designed to support extension for defining
 * mixins and object prototypes.
 *
 * See https://github.com/documentcloud/underscore/pull/986.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function extend(obj) {
  // eslint-disable-next-line prefer-rest-params
  _.each(Array.prototype.slice.call(arguments, 1), source => {
    if (source) {
      for (const prop in source) {
        Object.defineProperty(obj, prop, Object.getOwnPropertyDescriptor(source, prop));
      }
    }
  });
  return obj;
}
js_phetCore.register('extend', extend);
/* harmony default export */ const js_extend = (extend);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImV4dGVuZCIsIm9iaiIsIl8iLCJlYWNoIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJhcmd1bWVudHMiLCJzb3VyY2UiLCJwcm9wIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbImV4dGVuZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBMaWtlIFVuZGVyc2NvcmUncyBfLmV4dGVuZCBhbmQgUEhFVF9DT1JFL21lcmdlLCBidXQgd2l0aCBoYXJkY29kZWQgc3VwcG9ydCBmb3IgRVM1IGdldHRlcnMvc2V0dGVycy4gSW4gZ2VuZXJhbCB0aGlzXG4gKiB0eXBlIHNob3VsZG4ndCBiZSB1c2VkIGZvciBwaGV0J3Mgb3B0aW9ucyBwYXR0ZXJuLCBhbmQgaW5zdGVhZCB3YXMgZGVzaWduZWQgdG8gc3VwcG9ydCBleHRlbnNpb24gZm9yIGRlZmluaW5nXG4gKiBtaXhpbnMgYW5kIG9iamVjdCBwcm90b3R5cGVzLlxuICpcbiAqIFNlZSBodHRwczovL2dpdGh1Yi5jb20vZG9jdW1lbnRjbG91ZC91bmRlcnNjb3JlL3B1bGwvOTg2LlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbmZ1bmN0aW9uIGV4dGVuZCggb2JqICkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gIF8uZWFjaCggQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApLCBzb3VyY2UgPT4ge1xuICAgIGlmICggc291cmNlICkge1xuICAgICAgZm9yICggY29uc3QgcHJvcCBpbiBzb3VyY2UgKSB7XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb2JqLCBwcm9wLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKCBzb3VyY2UsIHByb3AgKSApO1xuICAgICAgfVxuICAgIH1cbiAgfSApO1xuICByZXR1cm4gb2JqO1xufVxuXG5waGV0Q29yZS5yZWdpc3RlciggJ2V4dGVuZCcsIGV4dGVuZCApO1xuXG5leHBvcnQgZGVmYXVsdCBleHRlbmQ7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGVBQWU7QUFFcEMsU0FBU0MsTUFBTUEsQ0FBRUMsR0FBRyxFQUFHO0VBQ3JCO0VBQ0FDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFQyxLQUFLLENBQUNDLFNBQVMsQ0FBQ0MsS0FBSyxDQUFDQyxJQUFJLENBQUVDLFNBQVMsRUFBRSxDQUFDLENBQUUsRUFBRUMsTUFBTSxJQUFJO0lBQzVELElBQUtBLE1BQU0sRUFBRztNQUNaLEtBQU0sTUFBTUMsSUFBSSxJQUFJRCxNQUFNLEVBQUc7UUFDM0JFLE1BQU0sQ0FBQ0MsY0FBYyxDQUFFWCxHQUFHLEVBQUVTLElBQUksRUFBRUMsTUFBTSxDQUFDRSx3QkFBd0IsQ0FBRUosTUFBTSxFQUFFQyxJQUFJLENBQUUsQ0FBRTtNQUNyRjtJQUNGO0VBQ0YsQ0FBQyxDQUFFO0VBQ0gsT0FBT1QsR0FBRztBQUNaO0FBRUFGLFFBQVEsQ0FBQ2UsUUFBUSxDQUFFLFFBQVEsRUFBRWQsTUFBTSxDQUFFO0FBRXJDLGVBQWVBLE1BQU0ifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/extendDefined.js
// Copyright 2016-2021, University of Colorado Boulder

/**
 * Like phet-core's extend, but does not overwrite properties with undefined values.
 *
 * For example:
 *
 * extendDefined( { a: 5 }, { a: undefined } ) will return { a: 5 }
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function extendDefined(obj) {
  // eslint-disable-next-line prefer-rest-params
  _.each(Array.prototype.slice.call(arguments, 1), source => {
    if (source) {
      for (const prop in source) {
        const descriptor = Object.getOwnPropertyDescriptor(source, prop);
        if (descriptor && (typeof descriptor.get === 'function' || source[prop] !== undefined)) {
          Object.defineProperty(obj, prop, descriptor);
        }
      }
    }
  });
  return obj;
}
js_phetCore.register('extendDefined', extendDefined);
/* harmony default export */ const js_extendDefined = ((/* unused pure expression or super */ null && (extendDefined)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImV4dGVuZERlZmluZWQiLCJvYmoiLCJfIiwiZWFjaCIsIkFycmF5IiwicHJvdG90eXBlIiwic2xpY2UiLCJjYWxsIiwiYXJndW1lbnRzIiwic291cmNlIiwicHJvcCIsImRlc2NyaXB0b3IiLCJPYmplY3QiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXQiLCJ1bmRlZmluZWQiLCJkZWZpbmVQcm9wZXJ0eSIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiZXh0ZW5kRGVmaW5lZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNi0yMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBMaWtlIHBoZXQtY29yZSdzIGV4dGVuZCwgYnV0IGRvZXMgbm90IG92ZXJ3cml0ZSBwcm9wZXJ0aWVzIHdpdGggdW5kZWZpbmVkIHZhbHVlcy5cbiAqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBleHRlbmREZWZpbmVkKCB7IGE6IDUgfSwgeyBhOiB1bmRlZmluZWQgfSApIHdpbGwgcmV0dXJuIHsgYTogNSB9XG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuZnVuY3Rpb24gZXh0ZW5kRGVmaW5lZCggb2JqICkge1xuICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLXJlc3QtcGFyYW1zXG4gIF8uZWFjaCggQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMSApLCBzb3VyY2UgPT4ge1xuICAgIGlmICggc291cmNlICkge1xuICAgICAgZm9yICggY29uc3QgcHJvcCBpbiBzb3VyY2UgKSB7XG4gICAgICAgIGNvbnN0IGRlc2NyaXB0b3IgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKCBzb3VyY2UsIHByb3AgKTtcblxuICAgICAgICBpZiAoIGRlc2NyaXB0b3IgJiYgKCB0eXBlb2YgZGVzY3JpcHRvci5nZXQgPT09ICdmdW5jdGlvbicgfHwgc291cmNlWyBwcm9wIF0gIT09IHVuZGVmaW5lZCApICkge1xuICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb2JqLCBwcm9wLCBkZXNjcmlwdG9yICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gKTtcbiAgcmV0dXJuIG9iajtcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdleHRlbmREZWZpbmVkJywgZXh0ZW5kRGVmaW5lZCApO1xuXG5leHBvcnQgZGVmYXVsdCBleHRlbmREZWZpbmVkOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlO0FBRXBDLFNBQVNDLGFBQWFBLENBQUVDLEdBQUcsRUFBRztFQUM1QjtFQUNBQyxDQUFDLENBQUNDLElBQUksQ0FBRUMsS0FBSyxDQUFDQyxTQUFTLENBQUNDLEtBQUssQ0FBQ0MsSUFBSSxDQUFFQyxTQUFTLEVBQUUsQ0FBQyxDQUFFLEVBQUVDLE1BQU0sSUFBSTtJQUM1RCxJQUFLQSxNQUFNLEVBQUc7TUFDWixLQUFNLE1BQU1DLElBQUksSUFBSUQsTUFBTSxFQUFHO1FBQzNCLE1BQU1FLFVBQVUsR0FBR0MsTUFBTSxDQUFDQyx3QkFBd0IsQ0FBRUosTUFBTSxFQUFFQyxJQUFJLENBQUU7UUFFbEUsSUFBS0MsVUFBVSxLQUFNLE9BQU9BLFVBQVUsQ0FBQ0csR0FBRyxLQUFLLFVBQVUsSUFBSUwsTUFBTSxDQUFFQyxJQUFJLENBQUUsS0FBS0ssU0FBUyxDQUFFLEVBQUc7VUFDNUZILE1BQU0sQ0FBQ0ksY0FBYyxDQUFFZixHQUFHLEVBQUVTLElBQUksRUFBRUMsVUFBVSxDQUFFO1FBQ2hEO01BQ0Y7SUFDRjtFQUNGLENBQUMsQ0FBRTtFQUNILE9BQU9WLEdBQUc7QUFDWjtBQUVBRixRQUFRLENBQUNrQixRQUFRLENBQUUsZUFBZSxFQUFFakIsYUFBYSxDQUFFO0FBRW5ELGVBQWVBLGFBQWEifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/interleave.js
// Copyright 2018-2020, University of Colorado Boulder

/**
 * Returns a copy of an array, with generated elements interleaved (inserted in-between) every element. For example, if
 * you call `interleave( [ a, b, c ], Math.random )`, it will result in the equivalent:
 * `[ a, Math.random(), b, Math.random(), c ]`.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/*
 * @public
 * @param {Array.<*>} arr - The array in which to interleave elements
 * @param {function} generator - function( index: {number} ):{*} - 0-based index for which "separator" it is for. e.g.
 *                               [ _, f(0), _, f(1), _, f(2), ..., _ ]
 * @returns {Array.<*>}
 */
function interleave(arr, generator) {
  assert && assert(Array.isArray(arr));
  assert && assert(typeof generator === 'function');
  const result = [];
  const finalLength = arr.length * 2 - 1;
  for (let i = 0; i < finalLength; i++) {
    if (i % 2 === 0) {
      result.push(arr[i / 2]);
    } else {
      result.push(generator((i - 1) / 2));
    }
  }
  return result;
}
js_phetCore.register('interleave', interleave);
/* harmony default export */ const js_interleave = ((/* unused pure expression or super */ null && (interleave)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImludGVybGVhdmUiLCJhcnIiLCJnZW5lcmF0b3IiLCJhc3NlcnQiLCJBcnJheSIsImlzQXJyYXkiLCJyZXN1bHQiLCJmaW5hbExlbmd0aCIsImxlbmd0aCIsImkiLCJwdXNoIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJpbnRlcmxlYXZlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE4LTIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFJldHVybnMgYSBjb3B5IG9mIGFuIGFycmF5LCB3aXRoIGdlbmVyYXRlZCBlbGVtZW50cyBpbnRlcmxlYXZlZCAoaW5zZXJ0ZWQgaW4tYmV0d2VlbikgZXZlcnkgZWxlbWVudC4gRm9yIGV4YW1wbGUsIGlmXG4gKiB5b3UgY2FsbCBgaW50ZXJsZWF2ZSggWyBhLCBiLCBjIF0sIE1hdGgucmFuZG9tIClgLCBpdCB3aWxsIHJlc3VsdCBpbiB0aGUgZXF1aXZhbGVudDpcbiAqIGBbIGEsIE1hdGgucmFuZG9tKCksIGIsIE1hdGgucmFuZG9tKCksIGMgXWAuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuLypcbiAqIEBwdWJsaWNcbiAqIEBwYXJhbSB7QXJyYXkuPCo+fSBhcnIgLSBUaGUgYXJyYXkgaW4gd2hpY2ggdG8gaW50ZXJsZWF2ZSBlbGVtZW50c1xuICogQHBhcmFtIHtmdW5jdGlvbn0gZ2VuZXJhdG9yIC0gZnVuY3Rpb24oIGluZGV4OiB7bnVtYmVyfSApOnsqfSAtIDAtYmFzZWQgaW5kZXggZm9yIHdoaWNoIFwic2VwYXJhdG9yXCIgaXQgaXMgZm9yLiBlLmcuXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBbIF8sIGYoMCksIF8sIGYoMSksIF8sIGYoMiksIC4uLiwgXyBdXG4gKiBAcmV0dXJucyB7QXJyYXkuPCo+fVxuICovXG5mdW5jdGlvbiBpbnRlcmxlYXZlKCBhcnIsIGdlbmVyYXRvciApIHtcbiAgYXNzZXJ0ICYmIGFzc2VydCggQXJyYXkuaXNBcnJheSggYXJyICkgKTtcbiAgYXNzZXJ0ICYmIGFzc2VydCggdHlwZW9mIGdlbmVyYXRvciA9PT0gJ2Z1bmN0aW9uJyApO1xuXG4gIGNvbnN0IHJlc3VsdCA9IFtdO1xuICBjb25zdCBmaW5hbExlbmd0aCA9IGFyci5sZW5ndGggKiAyIC0gMTtcblxuICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBmaW5hbExlbmd0aDsgaSsrICkge1xuICAgIGlmICggaSAlIDIgPT09IDAgKSB7XG4gICAgICByZXN1bHQucHVzaCggYXJyWyBpIC8gMiBdICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmVzdWx0LnB1c2goIGdlbmVyYXRvciggKCBpIC0gMSApIC8gMiApICk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdpbnRlcmxlYXZlJywgaW50ZXJsZWF2ZSApO1xuXG5leHBvcnQgZGVmYXVsdCBpbnRlcmxlYXZlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGVBQWU7O0FBRXBDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsVUFBVUEsQ0FBRUMsR0FBRyxFQUFFQyxTQUFTLEVBQUc7RUFDcENDLE1BQU0sSUFBSUEsTUFBTSxDQUFFQyxLQUFLLENBQUNDLE9BQU8sQ0FBRUosR0FBRyxDQUFFLENBQUU7RUFDeENFLE1BQU0sSUFBSUEsTUFBTSxDQUFFLE9BQU9ELFNBQVMsS0FBSyxVQUFVLENBQUU7RUFFbkQsTUFBTUksTUFBTSxHQUFHLEVBQUU7RUFDakIsTUFBTUMsV0FBVyxHQUFHTixHQUFHLENBQUNPLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQztFQUV0QyxLQUFNLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0YsV0FBVyxFQUFFRSxDQUFDLEVBQUUsRUFBRztJQUN0QyxJQUFLQSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRztNQUNqQkgsTUFBTSxDQUFDSSxJQUFJLENBQUVULEdBQUcsQ0FBRVEsQ0FBQyxHQUFHLENBQUMsQ0FBRSxDQUFFO0lBQzdCLENBQUMsTUFDSTtNQUNISCxNQUFNLENBQUNJLElBQUksQ0FBRVIsU0FBUyxDQUFFLENBQUVPLENBQUMsR0FBRyxDQUFDLElBQUssQ0FBQyxDQUFFLENBQUU7SUFDM0M7RUFDRjtFQUVBLE9BQU9ILE1BQU07QUFDZjtBQUVBUCxRQUFRLENBQUNZLFFBQVEsQ0FBRSxZQUFZLEVBQUVYLFVBQVUsQ0FBRTtBQUU3QyxlQUFlQSxVQUFVIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/isArray.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Tests whether a reference is to an array.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function isArray(array) {
  // yes, this is actually how to do this. see http://stackoverflow.com/questions/4775722/javascript-check-if-object-is-array
  return Object.prototype.toString.call(array) === '[object Array]';
}
js_phetCore.register('isArray', isArray);
/* harmony default export */ const js_isArray = (isArray);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImlzQXJyYXkiLCJhcnJheSIsIk9iamVjdCIsInByb3RvdHlwZSIsInRvU3RyaW5nIiwiY2FsbCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiaXNBcnJheS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBUZXN0cyB3aGV0aGVyIGEgcmVmZXJlbmNlIGlzIHRvIGFuIGFycmF5LlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5pbXBvcnQgSW50ZW50aW9uYWxBbnkgZnJvbSAnLi90eXBlcy9JbnRlbnRpb25hbEFueS5qcyc7XG5cbmZ1bmN0aW9uIGlzQXJyYXkoIGFycmF5OiBJbnRlbnRpb25hbEFueSApOiBhcnJheSBpcyBJbnRlbnRpb25hbEFueVtdIHtcbiAgLy8geWVzLCB0aGlzIGlzIGFjdHVhbGx5IGhvdyB0byBkbyB0aGlzLiBzZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80Nzc1NzIyL2phdmFzY3JpcHQtY2hlY2staWYtb2JqZWN0LWlzLWFycmF5XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoIGFycmF5ICkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG59XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnaXNBcnJheScsIGlzQXJyYXkgKTtcblxuZXhwb3J0IGRlZmF1bHQgaXNBcnJheTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGVBQWU7QUFHcEMsU0FBU0MsT0FBT0EsQ0FBRUMsS0FBcUIsRUFBOEI7RUFDbkU7RUFDQSxPQUFPQyxNQUFNLENBQUNDLFNBQVMsQ0FBQ0MsUUFBUSxDQUFDQyxJQUFJLENBQUVKLEtBQUssQ0FBRSxLQUFLLGdCQUFnQjtBQUNyRTtBQUVBRixRQUFRLENBQUNPLFFBQVEsQ0FBRSxTQUFTLEVBQUVOLE9BQU8sQ0FBRTtBQUV2QyxlQUFlQSxPQUFPIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/loadScript.js
// Copyright 2013-2021, University of Colorado Boulder

/**
 * Loads a script
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/*
 * Load a script. The only required argument is src, and can be specified either as
 * loadScript( "<url>" ) or loadScript( { src: "<url>", ... other options ... } ).
 *
 * Arguments:
 *   src:         The source of the script to load
 *   callback:    A callback to call (with no arguments) once the script is loaded and has been executed
 *   async:       Whether the script should be loaded asynchronously. Defaults to true
 *   cacheBust: Whether the URL should have an appended query string to work around caches
 */
function loadScript(args) {
  // handle a string argument
  if (typeof args === 'string') {
    args = {
      src: args
    };
  }
  const src = args.src;
  const callback = args.callback;
  const async = args.async === undefined ? true : args.async;
  const cacheBust = args.cacheBust === undefined ? false : args.cacheBust;
  let called = false;
  const script = document.createElement('script');
  script.type = 'text/javascript';
  script.async = async;
  script.onload = script.onreadystatechange = function () {
    const state = this.readyState;
    if (state && state !== 'complete' && state !== 'loaded') {
      return;
    }
    if (!called) {
      called = true;
      if (callback) {
        callback();
      }
    }
  };

  // make sure things aren't cached, just in case
  script.src = src + (cacheBust ? `?random=${Math.random().toFixed(10)}` : ''); // eslint-disable-line bad-sim-text

  const other = document.getElementsByTagName('script')[0];
  other.parentNode.insertBefore(script, other);
}
js_phetCore.register('loadScript', loadScript);
/* harmony default export */ const js_loadScript = ((/* unused pure expression or super */ null && (loadScript)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsImxvYWRTY3JpcHQiLCJhcmdzIiwic3JjIiwiY2FsbGJhY2siLCJhc3luYyIsInVuZGVmaW5lZCIsImNhY2hlQnVzdCIsImNhbGxlZCIsInNjcmlwdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJvbmxvYWQiLCJvbnJlYWR5c3RhdGVjaGFuZ2UiLCJzdGF0ZSIsInJlYWR5U3RhdGUiLCJNYXRoIiwicmFuZG9tIiwidG9GaXhlZCIsIm90aGVyIiwiZ2V0RWxlbWVudHNCeVRhZ05hbWUiLCJwYXJlbnROb2RlIiwiaW5zZXJ0QmVmb3JlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJsb2FkU2NyaXB0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIExvYWRzIGEgc2NyaXB0XG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuLypcbiAqIExvYWQgYSBzY3JpcHQuIFRoZSBvbmx5IHJlcXVpcmVkIGFyZ3VtZW50IGlzIHNyYywgYW5kIGNhbiBiZSBzcGVjaWZpZWQgZWl0aGVyIGFzXG4gKiBsb2FkU2NyaXB0KCBcIjx1cmw+XCIgKSBvciBsb2FkU2NyaXB0KCB7IHNyYzogXCI8dXJsPlwiLCAuLi4gb3RoZXIgb3B0aW9ucyAuLi4gfSApLlxuICpcbiAqIEFyZ3VtZW50czpcbiAqICAgc3JjOiAgICAgICAgIFRoZSBzb3VyY2Ugb2YgdGhlIHNjcmlwdCB0byBsb2FkXG4gKiAgIGNhbGxiYWNrOiAgICBBIGNhbGxiYWNrIHRvIGNhbGwgKHdpdGggbm8gYXJndW1lbnRzKSBvbmNlIHRoZSBzY3JpcHQgaXMgbG9hZGVkIGFuZCBoYXMgYmVlbiBleGVjdXRlZFxuICogICBhc3luYzogICAgICAgV2hldGhlciB0aGUgc2NyaXB0IHNob3VsZCBiZSBsb2FkZWQgYXN5bmNocm9ub3VzbHkuIERlZmF1bHRzIHRvIHRydWVcbiAqICAgY2FjaGVCdXN0OiBXaGV0aGVyIHRoZSBVUkwgc2hvdWxkIGhhdmUgYW4gYXBwZW5kZWQgcXVlcnkgc3RyaW5nIHRvIHdvcmsgYXJvdW5kIGNhY2hlc1xuICovXG5mdW5jdGlvbiBsb2FkU2NyaXB0KCBhcmdzICkge1xuICAvLyBoYW5kbGUgYSBzdHJpbmcgYXJndW1lbnRcbiAgaWYgKCB0eXBlb2YgYXJncyA9PT0gJ3N0cmluZycgKSB7XG4gICAgYXJncyA9IHsgc3JjOiBhcmdzIH07XG4gIH1cblxuICBjb25zdCBzcmMgPSBhcmdzLnNyYztcbiAgY29uc3QgY2FsbGJhY2sgPSBhcmdzLmNhbGxiYWNrO1xuICBjb25zdCBhc3luYyA9IGFyZ3MuYXN5bmMgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBhcmdzLmFzeW5jO1xuICBjb25zdCBjYWNoZUJ1c3QgPSBhcmdzLmNhY2hlQnVzdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBhcmdzLmNhY2hlQnVzdDtcblxuICBsZXQgY2FsbGVkID0gZmFsc2U7XG5cbiAgY29uc3Qgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3NjcmlwdCcgKTtcbiAgc2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0JztcbiAgc2NyaXB0LmFzeW5jID0gYXN5bmM7XG4gIHNjcmlwdC5vbmxvYWQgPSBzY3JpcHQub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24oKSB7XG4gICAgY29uc3Qgc3RhdGUgPSB0aGlzLnJlYWR5U3RhdGU7XG4gICAgaWYgKCBzdGF0ZSAmJiBzdGF0ZSAhPT0gJ2NvbXBsZXRlJyAmJiBzdGF0ZSAhPT0gJ2xvYWRlZCcgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCAhY2FsbGVkICkge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcblxuICAgICAgaWYgKCBjYWxsYmFjayApIHtcbiAgICAgICAgY2FsbGJhY2soKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLy8gbWFrZSBzdXJlIHRoaW5ncyBhcmVuJ3QgY2FjaGVkLCBqdXN0IGluIGNhc2VcbiAgc2NyaXB0LnNyYyA9IHNyYyArICggY2FjaGVCdXN0ID8gYD9yYW5kb209JHtNYXRoLnJhbmRvbSgpLnRvRml4ZWQoIDEwICl9YCA6ICcnICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XG5cbiAgY29uc3Qgb3RoZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSggJ3NjcmlwdCcgKVsgMCBdO1xuICBvdGhlci5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggc2NyaXB0LCBvdGhlciApO1xufVxuXG5waGV0Q29yZS5yZWdpc3RlciggJ2xvYWRTY3JpcHQnLCBsb2FkU2NyaXB0ICk7XG5cbmV4cG9ydCBkZWZhdWx0IGxvYWRTY3JpcHQ7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNDLFVBQVVBLENBQUVDLElBQUksRUFBRztFQUMxQjtFQUNBLElBQUssT0FBT0EsSUFBSSxLQUFLLFFBQVEsRUFBRztJQUM5QkEsSUFBSSxHQUFHO01BQUVDLEdBQUcsRUFBRUQ7SUFBSyxDQUFDO0VBQ3RCO0VBRUEsTUFBTUMsR0FBRyxHQUFHRCxJQUFJLENBQUNDLEdBQUc7RUFDcEIsTUFBTUMsUUFBUSxHQUFHRixJQUFJLENBQUNFLFFBQVE7RUFDOUIsTUFBTUMsS0FBSyxHQUFHSCxJQUFJLENBQUNHLEtBQUssS0FBS0MsU0FBUyxHQUFHLElBQUksR0FBR0osSUFBSSxDQUFDRyxLQUFLO0VBQzFELE1BQU1FLFNBQVMsR0FBR0wsSUFBSSxDQUFDSyxTQUFTLEtBQUtELFNBQVMsR0FBRyxLQUFLLEdBQUdKLElBQUksQ0FBQ0ssU0FBUztFQUV2RSxJQUFJQyxNQUFNLEdBQUcsS0FBSztFQUVsQixNQUFNQyxNQUFNLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBYSxDQUFFLFFBQVEsQ0FBRTtFQUNqREYsTUFBTSxDQUFDRyxJQUFJLEdBQUcsaUJBQWlCO0VBQy9CSCxNQUFNLENBQUNKLEtBQUssR0FBR0EsS0FBSztFQUNwQkksTUFBTSxDQUFDSSxNQUFNLEdBQUdKLE1BQU0sQ0FBQ0ssa0JBQWtCLEdBQUcsWUFBVztJQUNyRCxNQUFNQyxLQUFLLEdBQUcsSUFBSSxDQUFDQyxVQUFVO0lBQzdCLElBQUtELEtBQUssSUFBSUEsS0FBSyxLQUFLLFVBQVUsSUFBSUEsS0FBSyxLQUFLLFFBQVEsRUFBRztNQUN6RDtJQUNGO0lBRUEsSUFBSyxDQUFDUCxNQUFNLEVBQUc7TUFDYkEsTUFBTSxHQUFHLElBQUk7TUFFYixJQUFLSixRQUFRLEVBQUc7UUFDZEEsUUFBUSxFQUFFO01BQ1o7SUFDRjtFQUNGLENBQUM7O0VBRUQ7RUFDQUssTUFBTSxDQUFDTixHQUFHLEdBQUdBLEdBQUcsSUFBS0ksU0FBUyxHQUFJLFdBQVVVLElBQUksQ0FBQ0MsTUFBTSxFQUFFLENBQUNDLE9BQU8sQ0FBRSxFQUFFLENBQUcsRUFBQyxHQUFHLEVBQUUsQ0FBRSxDQUFDLENBQUM7O0VBRWxGLE1BQU1DLEtBQUssR0FBR1YsUUFBUSxDQUFDVyxvQkFBb0IsQ0FBRSxRQUFRLENBQUUsQ0FBRSxDQUFDLENBQUU7RUFDNURELEtBQUssQ0FBQ0UsVUFBVSxDQUFDQyxZQUFZLENBQUVkLE1BQU0sRUFBRVcsS0FBSyxDQUFFO0FBQ2hEO0FBRUFwQixRQUFRLENBQUN3QixRQUFRLENBQUUsWUFBWSxFQUFFdkIsVUFBVSxDQUFFO0FBRTdDLGVBQWVBLFVBQVUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/memoize.js
// Copyright 2020-2022, University of Colorado Boulder

/**
 * Caches the results of previous single-argument function applications to the same object.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/**
 * @param func - Should take one argument
 * @returns - Returns a function that is equivalent, but caches values from previous keys
 */
function memoize(func) {
  const map = new Map();
  return key => {
    if (map.has(key)) {
      return map.get(key);
    } else {
      const value = func(key);
      map.set(key, value);
      return value;
    }
  };
}
js_phetCore.register('memoize', memoize);
/* harmony default export */ const js_memoize = ((/* unused pure expression or super */ null && (memoize)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIm1lbW9pemUiLCJmdW5jIiwibWFwIiwiTWFwIiwia2V5IiwiaGFzIiwiZ2V0IiwidmFsdWUiLCJzZXQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIm1lbW9pemUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjAtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ2FjaGVzIHRoZSByZXN1bHRzIG9mIHByZXZpb3VzIHNpbmdsZS1hcmd1bWVudCBmdW5jdGlvbiBhcHBsaWNhdGlvbnMgdG8gdGhlIHNhbWUgb2JqZWN0LlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbi8qKlxuICogQHBhcmFtIGZ1bmMgLSBTaG91bGQgdGFrZSBvbmUgYXJndW1lbnRcbiAqIEByZXR1cm5zIC0gUmV0dXJucyBhIGZ1bmN0aW9uIHRoYXQgaXMgZXF1aXZhbGVudCwgYnV0IGNhY2hlcyB2YWx1ZXMgZnJvbSBwcmV2aW91cyBrZXlzXG4gKi9cbmZ1bmN0aW9uIG1lbW9pemU8S2V5LCBWYWx1ZT4oIGZ1bmM6ICggazogS2V5ICkgPT4gVmFsdWUgKTogKCBrOiBLZXkgKSA9PiBWYWx1ZSB7XG4gIGNvbnN0IG1hcCA9IG5ldyBNYXA8S2V5LCBWYWx1ZT4oKTtcblxuICByZXR1cm4gKCBrZXk6IEtleSApOiBWYWx1ZSA9PiB7XG4gICAgaWYgKCBtYXAuaGFzKCBrZXkgKSApIHtcbiAgICAgIHJldHVybiBtYXAuZ2V0KCBrZXkgKSE7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgdmFsdWUgPSBmdW5jKCBrZXkgKTtcbiAgICAgIG1hcC5zZXQoIGtleSwgdmFsdWUgKTtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH07XG59XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnbWVtb2l6ZScsIG1lbW9pemUgKTtcbmV4cG9ydCBkZWZhdWx0IG1lbW9pemU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlOztBQUVwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVNDLE9BQU9BLENBQWNDLElBQXlCLEVBQXdCO0VBQzdFLE1BQU1DLEdBQUcsR0FBRyxJQUFJQyxHQUFHLEVBQWM7RUFFakMsT0FBU0MsR0FBUSxJQUFhO0lBQzVCLElBQUtGLEdBQUcsQ0FBQ0csR0FBRyxDQUFFRCxHQUFHLENBQUUsRUFBRztNQUNwQixPQUFPRixHQUFHLENBQUNJLEdBQUcsQ0FBRUYsR0FBRyxDQUFFO0lBQ3ZCLENBQUMsTUFDSTtNQUNILE1BQU1HLEtBQUssR0FBR04sSUFBSSxDQUFFRyxHQUFHLENBQUU7TUFDekJGLEdBQUcsQ0FBQ00sR0FBRyxDQUFFSixHQUFHLEVBQUVHLEtBQUssQ0FBRTtNQUNyQixPQUFPQSxLQUFLO0lBQ2Q7RUFDRixDQUFDO0FBQ0g7QUFFQVIsUUFBUSxDQUFDVSxRQUFRLENBQUUsU0FBUyxFQUFFVCxPQUFPLENBQUU7QUFDdkMsZUFBZUEsT0FBTyJ9
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/mutate.js
// Copyright 2021, University of Colorado Boulder

/**
 * Generalized support for mutating objects that take ES5 getters/setters, similar to Node.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/**
 * For example:
 *
 * mutate( something, [ 'left', 'right', 'top', 'bottom' ], { top: 0, left: 5 } );
 *
 * will be equivalent to:
 *
 * something.left = 5;
 * something.top = 0;
 *
 * @param {*} target - The object to mutate
 * @param {Array.<string>} orderedKeys
 * @param {Object} [options]
 *
 */
function mutate(target, orderedKeys, options) {
  assert && assert(target);
  assert && assert(Array.isArray(orderedKeys));
  if (!options) {
    return;
  }
  assert && assert(Object.getPrototypeOf(options) === Object.prototype, 'Extra prototype on options object is a code smell');
  _.each(orderedKeys, key => {
    // See https://github.com/phetsims/scenery/issues/580 for more about passing undefined.
    assert && assert(!options.hasOwnProperty(key) || options[key] !== undefined, `Undefined not allowed for key: ${key}`);
    if (options[key] !== undefined) {
      target[key] = options[key];
    }
  });
}
js_phetCore.register('mutate', mutate);
/* harmony default export */ const js_mutate = ((/* unused pure expression or super */ null && (mutate)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIm11dGF0ZSIsInRhcmdldCIsIm9yZGVyZWRLZXlzIiwib3B0aW9ucyIsImFzc2VydCIsIkFycmF5IiwiaXNBcnJheSIsIk9iamVjdCIsImdldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiXyIsImVhY2giLCJrZXkiLCJoYXNPd25Qcm9wZXJ0eSIsInVuZGVmaW5lZCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsibXV0YXRlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIxLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBHZW5lcmFsaXplZCBzdXBwb3J0IGZvciBtdXRhdGluZyBvYmplY3RzIHRoYXQgdGFrZSBFUzUgZ2V0dGVycy9zZXR0ZXJzLCBzaW1pbGFyIHRvIE5vZGUuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuLyoqXG4gKiBGb3IgZXhhbXBsZTpcbiAqXG4gKiBtdXRhdGUoIHNvbWV0aGluZywgWyAnbGVmdCcsICdyaWdodCcsICd0b3AnLCAnYm90dG9tJyBdLCB7IHRvcDogMCwgbGVmdDogNSB9ICk7XG4gKlxuICogd2lsbCBiZSBlcXVpdmFsZW50IHRvOlxuICpcbiAqIHNvbWV0aGluZy5sZWZ0ID0gNTtcbiAqIHNvbWV0aGluZy50b3AgPSAwO1xuICpcbiAqIEBwYXJhbSB7Kn0gdGFyZ2V0IC0gVGhlIG9iamVjdCB0byBtdXRhdGVcbiAqIEBwYXJhbSB7QXJyYXkuPHN0cmluZz59IG9yZGVyZWRLZXlzXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gKlxuICovXG5mdW5jdGlvbiBtdXRhdGUoIHRhcmdldCwgb3JkZXJlZEtleXMsIG9wdGlvbnMgKSB7XG4gIGFzc2VydCAmJiBhc3NlcnQoIHRhcmdldCApO1xuICBhc3NlcnQgJiYgYXNzZXJ0KCBBcnJheS5pc0FycmF5KCBvcmRlcmVkS2V5cyApICk7XG5cbiAgaWYgKCAhb3B0aW9ucyApIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBhc3NlcnQgJiYgYXNzZXJ0KCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoIG9wdGlvbnMgKSA9PT0gT2JqZWN0LnByb3RvdHlwZSxcbiAgICAnRXh0cmEgcHJvdG90eXBlIG9uIG9wdGlvbnMgb2JqZWN0IGlzIGEgY29kZSBzbWVsbCcgKTtcblxuICBfLmVhY2goIG9yZGVyZWRLZXlzLCBrZXkgPT4ge1xuXG4gICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9zY2VuZXJ5L2lzc3Vlcy81ODAgZm9yIG1vcmUgYWJvdXQgcGFzc2luZyB1bmRlZmluZWQuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIW9wdGlvbnMuaGFzT3duUHJvcGVydHkoIGtleSApIHx8IG9wdGlvbnNbIGtleSBdICE9PSB1bmRlZmluZWQsIGBVbmRlZmluZWQgbm90IGFsbG93ZWQgZm9yIGtleTogJHtrZXl9YCApO1xuXG4gICAgaWYgKCBvcHRpb25zWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkge1xuICAgICAgdGFyZ2V0WyBrZXkgXSA9IG9wdGlvbnNbIGtleSBdO1xuICAgIH1cbiAgfSApO1xufVxuXG5waGV0Q29yZS5yZWdpc3RlciggJ211dGF0ZScsIG11dGF0ZSApO1xuZXhwb3J0IGRlZmF1bHQgbXV0YXRlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTs7QUFFcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsTUFBTUEsQ0FBRUMsTUFBTSxFQUFFQyxXQUFXLEVBQUVDLE9BQU8sRUFBRztFQUM5Q0MsTUFBTSxJQUFJQSxNQUFNLENBQUVILE1BQU0sQ0FBRTtFQUMxQkcsTUFBTSxJQUFJQSxNQUFNLENBQUVDLEtBQUssQ0FBQ0MsT0FBTyxDQUFFSixXQUFXLENBQUUsQ0FBRTtFQUVoRCxJQUFLLENBQUNDLE9BQU8sRUFBRztJQUNkO0VBQ0Y7RUFFQUMsTUFBTSxJQUFJQSxNQUFNLENBQUVHLE1BQU0sQ0FBQ0MsY0FBYyxDQUFFTCxPQUFPLENBQUUsS0FBS0ksTUFBTSxDQUFDRSxTQUFTLEVBQ3JFLG1EQUFtRCxDQUFFO0VBRXZEQyxDQUFDLENBQUNDLElBQUksQ0FBRVQsV0FBVyxFQUFFVSxHQUFHLElBQUk7SUFFMUI7SUFDQVIsTUFBTSxJQUFJQSxNQUFNLENBQUUsQ0FBQ0QsT0FBTyxDQUFDVSxjQUFjLENBQUVELEdBQUcsQ0FBRSxJQUFJVCxPQUFPLENBQUVTLEdBQUcsQ0FBRSxLQUFLRSxTQUFTLEVBQUcsa0NBQWlDRixHQUFJLEVBQUMsQ0FBRTtJQUUzSCxJQUFLVCxPQUFPLENBQUVTLEdBQUcsQ0FBRSxLQUFLRSxTQUFTLEVBQUc7TUFDbENiLE1BQU0sQ0FBRVcsR0FBRyxDQUFFLEdBQUdULE9BQU8sQ0FBRVMsR0FBRyxDQUFFO0lBQ2hDO0VBQ0YsQ0FBQyxDQUFFO0FBQ0w7QUFFQWIsUUFBUSxDQUFDZ0IsUUFBUSxDQUFFLFFBQVEsRUFBRWYsTUFBTSxDQUFFO0FBQ3JDLGVBQWVBLE1BQU0ifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/Orientation.js
// Copyright 2019-2023, University of Colorado Boulder

/**
 * Either horizontal or vertical, with helper values.  Moved from Area Model Common on Nov 7, 2019
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 * @author Sam Reid (PhET Interactive Simulations)
 */




class Orientation extends js_EnumerationValue {
  static HORIZONTAL = new Orientation('x', 'centerX', 'minX', 'maxX', 'left', 'right', 'minWidth', 'maxWidth', 'rectX', 'rectWidth', 'horizontal', 'width', 'column', 'preferredWidth', 'localPreferredWidth', 'widthSizable', (modelViewTransform, value) => modelViewTransform.modelToViewX(value), (modelViewTransform, value) => modelViewTransform.viewToModelX(value), (a, b, VectorType) => new VectorType(a, b, 0, 0));
  static VERTICAL = new Orientation('y', 'centerY', 'minY', 'maxY', 'top', 'bottom', 'minHeight', 'maxHeight', 'rectY', 'rectHeight', 'vertical', 'height', 'row', 'preferredHeight', 'localPreferredHeight', 'heightSizable', (modelViewTransform, value) => modelViewTransform.modelToViewY(value), (modelViewTransform, value) => modelViewTransform.viewToModelY(value), (a, b, VectorType) => new VectorType(b, a, 0, 0));
  static enumeration = new js_Enumeration(Orientation, {
    phetioDocumentation: 'Horizontal or vertical orientation'
  });
  static fromLayoutOrientation(layoutOrientation) {
    return layoutOrientation === 'horizontal' ? Orientation.HORIZONTAL : Orientation.VERTICAL;
  }
  constructor(coordinate, centerCoordinate, minCoordinate, maxCoordinate, minSide, maxSide, minSize, maxSize, rectCoordinate, rectSize, flowBoxOrientation, size, line, preferredSize, localPreferredSize, sizable, modelToView, viewToModel, toVector) {
    super();
    this.coordinate = coordinate;
    this.centerCoordinate = centerCoordinate;
    this.minCoordinate = minCoordinate;
    this.maxCoordinate = maxCoordinate;
    this.minSide = minSide;
    this.maxSide = maxSide;
    this.minSize = minSize;
    this.maxSize = maxSize;
    this.rectCoordinate = rectCoordinate;
    this.rectSize = rectSize;
    this.flowBoxOrientation = flowBoxOrientation;
    this.size = size;
    this.line = line;
    this.preferredSize = preferredSize;
    this.localPreferredSize = localPreferredSize;
    this.sizable = sizable;
    this.ariaOrientation = flowBoxOrientation;
    this.modelToView = modelToView;
    this.viewToModel = viewToModel;
    this.toVector = toVector;
  }
}

// Set up opposites as object references (circular)
Orientation.HORIZONTAL.opposite = Orientation.VERTICAL;
Orientation.VERTICAL.opposite = Orientation.HORIZONTAL;
js_phetCore.register('Orientation', Orientation);
/* harmony default export */ const js_Orientation = (Orientation);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsIkVudW1lcmF0aW9uIiwiRW51bWVyYXRpb25WYWx1ZSIsIk9yaWVudGF0aW9uIiwiSE9SSVpPTlRBTCIsIm1vZGVsVmlld1RyYW5zZm9ybSIsInZhbHVlIiwibW9kZWxUb1ZpZXdYIiwidmlld1RvTW9kZWxYIiwiYSIsImIiLCJWZWN0b3JUeXBlIiwiVkVSVElDQUwiLCJtb2RlbFRvVmlld1kiLCJ2aWV3VG9Nb2RlbFkiLCJlbnVtZXJhdGlvbiIsInBoZXRpb0RvY3VtZW50YXRpb24iLCJmcm9tTGF5b3V0T3JpZW50YXRpb24iLCJsYXlvdXRPcmllbnRhdGlvbiIsImNvbnN0cnVjdG9yIiwiY29vcmRpbmF0ZSIsImNlbnRlckNvb3JkaW5hdGUiLCJtaW5Db29yZGluYXRlIiwibWF4Q29vcmRpbmF0ZSIsIm1pblNpZGUiLCJtYXhTaWRlIiwibWluU2l6ZSIsIm1heFNpemUiLCJyZWN0Q29vcmRpbmF0ZSIsInJlY3RTaXplIiwiZmxvd0JveE9yaWVudGF0aW9uIiwic2l6ZSIsImxpbmUiLCJwcmVmZXJyZWRTaXplIiwibG9jYWxQcmVmZXJyZWRTaXplIiwic2l6YWJsZSIsIm1vZGVsVG9WaWV3Iiwidmlld1RvTW9kZWwiLCJ0b1ZlY3RvciIsImFyaWFPcmllbnRhdGlvbiIsIm9wcG9zaXRlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJPcmllbnRhdGlvbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxOS0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBFaXRoZXIgaG9yaXpvbnRhbCBvciB2ZXJ0aWNhbCwgd2l0aCBoZWxwZXIgdmFsdWVzLiAgTW92ZWQgZnJvbSBBcmVhIE1vZGVsIENvbW1vbiBvbiBOb3YgNywgMjAxOVxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKi9cblxuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuaW1wb3J0IEVudW1lcmF0aW9uIGZyb20gJy4vRW51bWVyYXRpb24uanMnO1xuaW1wb3J0IEVudW1lcmF0aW9uVmFsdWUgZnJvbSAnLi9FbnVtZXJhdGlvblZhbHVlLmpzJztcbmltcG9ydCBDb25zdHJ1Y3RvciBmcm9tICcuL3R5cGVzL0NvbnN0cnVjdG9yLmpzJztcbmltcG9ydCBJbnRlbnRpb25hbEFueSBmcm9tICcuL3R5cGVzL0ludGVudGlvbmFsQW55LmpzJztcblxuLy8gU28gd2UgZG9uJ3QgaW50cm9kdWNlIGEgZGVwZW5kZW5jeSBvbiBwaGV0Y29tbW9uXG50eXBlIE1WVCA9IHtcbiAgbW9kZWxUb1ZpZXdYOiAoIG46IG51bWJlciApID0+IG51bWJlcjtcbiAgbW9kZWxUb1ZpZXdZOiAoIG46IG51bWJlciApID0+IG51bWJlcjtcbiAgdmlld1RvTW9kZWxYOiAoIG46IG51bWJlciApID0+IG51bWJlcjtcbiAgdmlld1RvTW9kZWxZOiAoIG46IG51bWJlciApID0+IG51bWJlcjtcbn07XG5cbmNsYXNzIE9yaWVudGF0aW9uIGV4dGVuZHMgRW51bWVyYXRpb25WYWx1ZSB7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBIT1JJWk9OVEFMID0gbmV3IE9yaWVudGF0aW9uKCAneCcsICdjZW50ZXJYJywgJ21pblgnLCAnbWF4WCcsICdsZWZ0JywgJ3JpZ2h0JywgJ21pbldpZHRoJywgJ21heFdpZHRoJywgJ3JlY3RYJywgJ3JlY3RXaWR0aCcsICdob3Jpem9udGFsJywgJ3dpZHRoJywgJ2NvbHVtbicsICdwcmVmZXJyZWRXaWR0aCcsICdsb2NhbFByZWZlcnJlZFdpZHRoJywgJ3dpZHRoU2l6YWJsZScsXG4gICAgKCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHZhbHVlICkgPT4gbW9kZWxWaWV3VHJhbnNmb3JtLm1vZGVsVG9WaWV3WCggdmFsdWUgKSxcbiAgICAoIG1vZGVsVmlld1RyYW5zZm9ybSwgdmFsdWUgKSA9PiBtb2RlbFZpZXdUcmFuc2Zvcm0udmlld1RvTW9kZWxYKCB2YWx1ZSApLFxuICAgIC8vIFBhZCB3aXRoIHplcm9zIHRvIHN1cHBvcnQgdXAgdG8gVmVjdG9yNFxuICAgIDxUPiggYTogbnVtYmVyLCBiOiBudW1iZXIsIFZlY3RvclR5cGU6IENvbnN0cnVjdG9yPFQ+ICk6IFQgPT4gbmV3IFZlY3RvclR5cGUoIGEsIGIsIDAsIDAgKVxuICApO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgVkVSVElDQUwgPSBuZXcgT3JpZW50YXRpb24oICd5JywgJ2NlbnRlclknLCAnbWluWScsICdtYXhZJywgJ3RvcCcsICdib3R0b20nLCAnbWluSGVpZ2h0JywgJ21heEhlaWdodCcsICdyZWN0WScsICdyZWN0SGVpZ2h0JywgJ3ZlcnRpY2FsJywgJ2hlaWdodCcsICdyb3cnLCAncHJlZmVycmVkSGVpZ2h0JywgJ2xvY2FsUHJlZmVycmVkSGVpZ2h0JywgJ2hlaWdodFNpemFibGUnLFxuICAgICggbW9kZWxWaWV3VHJhbnNmb3JtLCB2YWx1ZSApID0+IG1vZGVsVmlld1RyYW5zZm9ybS5tb2RlbFRvVmlld1koIHZhbHVlICksXG4gICAgKCBtb2RlbFZpZXdUcmFuc2Zvcm0sIHZhbHVlICkgPT4gbW9kZWxWaWV3VHJhbnNmb3JtLnZpZXdUb01vZGVsWSggdmFsdWUgKSxcbiAgICAvLyBQYWQgd2l0aCB6ZXJvcyB0byBzdXBwb3J0IHVwIHRvIFZlY3RvcjRcbiAgICA8VD4oIGE6IG51bWJlciwgYjogbnVtYmVyLCBWZWN0b3JUeXBlOiBDb25zdHJ1Y3RvcjxUPiApID0+IG5ldyBWZWN0b3JUeXBlKCBiLCBhLCAwLCAwIClcbiAgKTtcblxuICBwdWJsaWMgc3RhdGljIGVudW1lcmF0aW9uID0gbmV3IEVudW1lcmF0aW9uKCBPcmllbnRhdGlvbiwge1xuICAgIHBoZXRpb0RvY3VtZW50YXRpb246ICdIb3Jpem9udGFsIG9yIHZlcnRpY2FsIG9yaWVudGF0aW9uJ1xuICB9ICk7XG5cbiAgcHVibGljIHN0YXRpYyBmcm9tTGF5b3V0T3JpZW50YXRpb24oIGxheW91dE9yaWVudGF0aW9uOiAnaG9yaXpvbnRhbCcgfCAndmVydGljYWwnICk6IE9yaWVudGF0aW9uIHtcbiAgICByZXR1cm4gbGF5b3V0T3JpZW50YXRpb24gPT09ICdob3Jpem9udGFsJyA/IE9yaWVudGF0aW9uLkhPUklaT05UQUwgOiBPcmllbnRhdGlvbi5WRVJUSUNBTDtcbiAgfVxuXG4gIHB1YmxpYyByZWFkb25seSBjb29yZGluYXRlOiAneCcgfCAneSc7IC8vIFNvIHlvdSBjYW4gcG9zaXRpb24gdGhpbmdzIGxpa2Ugbm9kZVsgb3JpZW50YXRpb24uY29vcmRpbmF0ZSBdID0gdmFsdWVcbiAgcHVibGljIHJlYWRvbmx5IGNlbnRlckNvb3JkaW5hdGU6ICdjZW50ZXJYJyB8ICdjZW50ZXJZJzsgLy8gU28geW91IGNhbiBjZW50ZXIgdGhpbmdzIGxpa2Ugbm9kZVsgb3JpZW50YXRpb24uY2VudGVyQ29vcmRpbmF0ZSBdID0gdmFsdWVcbiAgcHVibGljIHJlYWRvbmx5IG1pbkNvb3JkaW5hdGU6ICdtaW5YJyB8ICdtaW5ZJzsgLy8gU28geW91IGNhbiBjZW50ZXIgdGhpbmdzIGxpa2UgYm91bmRzWyBvcmllbnRhdGlvbi5taW5Db29yZGluYXRlIF0gPSB2YWx1ZVxuICBwdWJsaWMgcmVhZG9ubHkgbWF4Q29vcmRpbmF0ZTogJ21heFgnIHwgJ21heFknOyAvLyBTbyB5b3UgY2FuIGNlbnRlciB0aGluZ3MgbGlrZSBib3VuZHNbIG9yaWVudGF0aW9uLm1heENvb3JkaW5hdGUgXSA9IHZhbHVlXG4gIHB1YmxpYyByZWFkb25seSBtaW5TaWRlOiAnbGVmdCcgfCAndG9wJzsgLy8gRm9yIGdldHRpbmcgdGhlIG1pbmltYWwvbWF4aW1hbCB2YWx1ZXMgZnJvbSBib3VuZHMvbm9kZXNcbiAgcHVibGljIHJlYWRvbmx5IG1heFNpZGU6ICdyaWdodCcgfCAnYm90dG9tJztcbiAgcHVibGljIHJlYWRvbmx5IG1pblNpemU6ICdtaW5XaWR0aCcgfCAnbWluSGVpZ2h0JztcbiAgcHVibGljIHJlYWRvbmx5IG1heFNpemU6ICdtYXhXaWR0aCcgfCAnbWF4SGVpZ2h0JztcbiAgcHVibGljIHJlYWRvbmx5IHJlY3RDb29yZGluYXRlOiAncmVjdFgnIHwgJ3JlY3RZJzsgLy8gRm9yIGJlaW5nIGFibGUgdG8gaGFuZGxlIFJlY3RhbmdsZXMgKHgveSkgYW5kICh3aWR0aC9oZWlnaHQpXG4gIHB1YmxpYyByZWFkb25seSByZWN0U2l6ZTogJ3JlY3RXaWR0aCcgfCAncmVjdEhlaWdodCc7XG4gIHB1YmxpYyByZWFkb25seSBmbG93Qm94T3JpZW50YXRpb246ICdob3Jpem9udGFsJyB8ICd2ZXJ0aWNhbCc7IC8vIFRoZSBuYW1lIG9mIHRoZSBvcmllbnRhdGlvbiB3aGVuIHVzZWQgZm9yIEZsb3dCb3hcbiAgcHVibGljIHJlYWRvbmx5IHNpemU6ICd3aWR0aCcgfCAnaGVpZ2h0JztcbiAgcHVibGljIHJlYWRvbmx5IGxpbmU6ICdjb2x1bW4nIHwgJ3Jvdyc7XG4gIHB1YmxpYyByZWFkb25seSBwcmVmZXJyZWRTaXplOiAncHJlZmVycmVkV2lkdGgnIHwgJ3ByZWZlcnJlZEhlaWdodCc7XG4gIHB1YmxpYyByZWFkb25seSBsb2NhbFByZWZlcnJlZFNpemU6ICdsb2NhbFByZWZlcnJlZFdpZHRoJyB8ICdsb2NhbFByZWZlcnJlZEhlaWdodCc7XG4gIHB1YmxpYyByZWFkb25seSBzaXphYmxlOiAnd2lkdGhTaXphYmxlJyB8ICdoZWlnaHRTaXphYmxlJztcbiAgcHVibGljIHJlYWRvbmx5IGFyaWFPcmllbnRhdGlvbjogJ2hvcml6b250YWwnIHwgJ3ZlcnRpY2FsJzsgLy8gVGhlIHZhbHVlIG9mIHRoZSBhcmlhLW9yaWVudGF0aW9uIGF0dHJpYnV0ZSBmb3IgdGhpcyBPcmllbnRhdGlvbi5cblxuICAvLyBSZXR1cm5zIHRoZSBzaW5nbGUgY29vcmRpbmF0ZSB0cmFuc2Zvcm1lZCBieSB0aGUgYXBwcm9wcmlhdGUgZGltZW5zaW9uLlxuICBwdWJsaWMgbW9kZWxUb1ZpZXc6ICggbTogTVZULCBuOiBudW1iZXIgKSA9PiBudW1iZXI7XG4gIHB1YmxpYyB2aWV3VG9Nb2RlbDogKCBtOiBNVlQsIG46IG51bWJlciApID0+IG51bWJlcjtcblxuICAvLyBDcmVhdGVzIGEgdmVjdG9yIChwcmltYXJ5LHNlY29uZGFyeSkgZm9yIGhvcml6b250YWwgb3JpZW50YXRpb25zLCBhbmQgKHNlY29uZGFyeSxwcmltYXJ5KSBmb3IgdmVydGljYWwgb3JpZW50YXRpb25zLlxuICBwdWJsaWMgdG9WZWN0b3I6IDxUPiggbjogbnVtYmVyLCBtOiBudW1iZXIsIFZlY3RvclR5cGU6IENvbnN0cnVjdG9yPFQ+ICkgPT4gVDtcblxuICAvLyBAdHMtZXhwZWN0LWVycm9yIC0gQXNzaWduZWQgYWZ0ZXIgaW5zdGFudGlhdGlvbiwgc2VlIGJlbG93XG4gIHB1YmxpYyBvcHBvc2l0ZTogT3JpZW50YXRpb247XG5cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBjb29yZGluYXRlOiAneCcgfCAneScsXG4gICAgICAgICAgICAgICBjZW50ZXJDb29yZGluYXRlOiAnY2VudGVyWCcgfCAnY2VudGVyWScsXG4gICAgICAgICAgICAgICBtaW5Db29yZGluYXRlOiAnbWluWCcgfCAnbWluWScsXG4gICAgICAgICAgICAgICBtYXhDb29yZGluYXRlOiAnbWF4WCcgfCAnbWF4WScsXG4gICAgICAgICAgICAgICBtaW5TaWRlOiAnbGVmdCcgfCAndG9wJyxcbiAgICAgICAgICAgICAgIG1heFNpZGU6ICdyaWdodCcgfCAnYm90dG9tJyxcbiAgICAgICAgICAgICAgIG1pblNpemU6ICdtaW5XaWR0aCcgfCAnbWluSGVpZ2h0JyxcbiAgICAgICAgICAgICAgIG1heFNpemU6ICdtYXhXaWR0aCcgfCAnbWF4SGVpZ2h0JyxcbiAgICAgICAgICAgICAgIHJlY3RDb29yZGluYXRlOiAncmVjdFgnIHwgJ3JlY3RZJyxcbiAgICAgICAgICAgICAgIHJlY3RTaXplOiAncmVjdFdpZHRoJyB8ICdyZWN0SGVpZ2h0JyxcbiAgICAgICAgICAgICAgIGZsb3dCb3hPcmllbnRhdGlvbjogJ2hvcml6b250YWwnIHwgJ3ZlcnRpY2FsJyxcbiAgICAgICAgICAgICAgIHNpemU6ICd3aWR0aCcgfCAnaGVpZ2h0JyxcbiAgICAgICAgICAgICAgIGxpbmU6ICdjb2x1bW4nIHwgJ3JvdycsXG4gICAgICAgICAgICAgICBwcmVmZXJyZWRTaXplOiAncHJlZmVycmVkV2lkdGgnIHwgJ3ByZWZlcnJlZEhlaWdodCcsXG4gICAgICAgICAgICAgICBsb2NhbFByZWZlcnJlZFNpemU6ICdsb2NhbFByZWZlcnJlZFdpZHRoJyB8ICdsb2NhbFByZWZlcnJlZEhlaWdodCcsXG4gICAgICAgICAgICAgICBzaXphYmxlOiAnd2lkdGhTaXphYmxlJyB8ICdoZWlnaHRTaXphYmxlJyxcbiAgICAgICAgICAgICAgIG1vZGVsVG9WaWV3OiAoIG06IE1WVCwgbjogbnVtYmVyICkgPT4gbnVtYmVyLFxuICAgICAgICAgICAgICAgdmlld1RvTW9kZWw6ICggbTogTVZULCBuOiBudW1iZXIgKSA9PiBudW1iZXIsIHRvVmVjdG9yOiA8VD4oIG46IG51bWJlciwgbTogbnVtYmVyLCBWZWN0b3JUeXBlOiBuZXcgKCB4OiBudW1iZXIsIHk6IG51bWJlciwgLi4uYXJnczogSW50ZW50aW9uYWxBbnlbXSApID0+IFQgKSA9PiBUICkge1xuXG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLmNvb3JkaW5hdGUgPSBjb29yZGluYXRlO1xuICAgIHRoaXMuY2VudGVyQ29vcmRpbmF0ZSA9IGNlbnRlckNvb3JkaW5hdGU7XG4gICAgdGhpcy5taW5Db29yZGluYXRlID0gbWluQ29vcmRpbmF0ZTtcbiAgICB0aGlzLm1heENvb3JkaW5hdGUgPSBtYXhDb29yZGluYXRlO1xuICAgIHRoaXMubWluU2lkZSA9IG1pblNpZGU7XG4gICAgdGhpcy5tYXhTaWRlID0gbWF4U2lkZTtcbiAgICB0aGlzLm1pblNpemUgPSBtaW5TaXplO1xuICAgIHRoaXMubWF4U2l6ZSA9IG1heFNpemU7XG4gICAgdGhpcy5yZWN0Q29vcmRpbmF0ZSA9IHJlY3RDb29yZGluYXRlO1xuICAgIHRoaXMucmVjdFNpemUgPSByZWN0U2l6ZTtcbiAgICB0aGlzLmZsb3dCb3hPcmllbnRhdGlvbiA9IGZsb3dCb3hPcmllbnRhdGlvbjtcbiAgICB0aGlzLnNpemUgPSBzaXplO1xuICAgIHRoaXMubGluZSA9IGxpbmU7XG4gICAgdGhpcy5wcmVmZXJyZWRTaXplID0gcHJlZmVycmVkU2l6ZTtcbiAgICB0aGlzLmxvY2FsUHJlZmVycmVkU2l6ZSA9IGxvY2FsUHJlZmVycmVkU2l6ZTtcbiAgICB0aGlzLnNpemFibGUgPSBzaXphYmxlO1xuICAgIHRoaXMuYXJpYU9yaWVudGF0aW9uID0gZmxvd0JveE9yaWVudGF0aW9uO1xuICAgIHRoaXMubW9kZWxUb1ZpZXcgPSBtb2RlbFRvVmlldztcbiAgICB0aGlzLnZpZXdUb01vZGVsID0gdmlld1RvTW9kZWw7XG4gICAgdGhpcy50b1ZlY3RvciA9IHRvVmVjdG9yO1xuICB9XG59XG5cbi8vIFNldCB1cCBvcHBvc2l0ZXMgYXMgb2JqZWN0IHJlZmVyZW5jZXMgKGNpcmN1bGFyKVxuT3JpZW50YXRpb24uSE9SSVpPTlRBTC5vcHBvc2l0ZSA9IE9yaWVudGF0aW9uLlZFUlRJQ0FMO1xuT3JpZW50YXRpb24uVkVSVElDQUwub3Bwb3NpdGUgPSBPcmllbnRhdGlvbi5IT1JJWk9OVEFMO1xuXG5waGV0Q29yZS5yZWdpc3RlciggJ09yaWVudGF0aW9uJywgT3JpZW50YXRpb24gKTtcbmV4cG9ydCBkZWZhdWx0IE9yaWVudGF0aW9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFFBQVEsTUFBTSxlQUFlO0FBQ3BDLE9BQU9DLFdBQVcsTUFBTSxrQkFBa0I7QUFDMUMsT0FBT0MsZ0JBQWdCLE1BQU0sdUJBQXVCO0FBWXBELE1BQU1DLFdBQVcsU0FBU0QsZ0JBQWdCLENBQUM7RUFFekMsT0FBdUJFLFVB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
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/OrientationPair.js
// Copyright 2021-2022, University of Colorado Boulder

/**
 * An object that contains a value for each item in an enumeration.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */




class OrientationPair extends js_EnumerationMap {
  /**
   * @param horizontal - Value for the horizontal orientation
   * @param vertical - Value for the vertical orientation
   */
  constructor(horizontal, vertical) {
    super(js_Orientation, orientation => orientation === js_Orientation.HORIZONTAL ? horizontal : vertical);
  }
  get horizontal() {
    return this.get(js_Orientation.HORIZONTAL);
  }
  set horizontal(value) {
    this.set(js_Orientation.HORIZONTAL, value);
  }
  get vertical() {
    return this.get(js_Orientation.VERTICAL);
  }
  set vertical(value) {
    this.set(js_Orientation.VERTICAL, value);
  }

  /**
   * Creates an orientation pair based on a factory method.
   *
   * @param factory - called once for each orientation to determine
   *                             the value.
   */
  static create(factory) {
    return new OrientationPair(factory(js_Orientation.HORIZONTAL), factory(js_Orientation.VERTICAL));
  }
}
js_phetCore.register('OrientationPair', OrientationPair);
/* harmony default export */ const js_OrientationPair = ((/* unused pure expression or super */ null && (OrientationPair)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbk1hcCIsIk9yaWVudGF0aW9uIiwicGhldENvcmUiLCJPcmllbnRhdGlvblBhaXIiLCJjb25zdHJ1Y3RvciIsImhvcml6b250YWwiLCJ2ZXJ0aWNhbCIsIm9yaWVudGF0aW9uIiwiSE9SSVpPTlRBTCIsImdldCIsInZhbHVlIiwic2V0IiwiVkVSVElDQUwiLCJjcmVhdGUiLCJmYWN0b3J5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJPcmllbnRhdGlvblBhaXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjEtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQW4gb2JqZWN0IHRoYXQgY29udGFpbnMgYSB2YWx1ZSBmb3IgZWFjaCBpdGVtIGluIGFuIGVudW1lcmF0aW9uLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgRW51bWVyYXRpb25NYXAgZnJvbSAnLi9FbnVtZXJhdGlvbk1hcC5qcyc7XG5pbXBvcnQgT3JpZW50YXRpb24gZnJvbSAnLi9PcmllbnRhdGlvbi5qcyc7XG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbmNsYXNzIE9yaWVudGF0aW9uUGFpcjxUPiBleHRlbmRzIEVudW1lcmF0aW9uTWFwPE9yaWVudGF0aW9uLCBUPiB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBob3Jpem9udGFsIC0gVmFsdWUgZm9yIHRoZSBob3Jpem9udGFsIG9yaWVudGF0aW9uXG4gICAqIEBwYXJhbSB2ZXJ0aWNhbCAtIFZhbHVlIGZvciB0aGUgdmVydGljYWwgb3JpZW50YXRpb25cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggaG9yaXpvbnRhbDogVCwgdmVydGljYWw6IFQgKSB7XG4gICAgc3VwZXIoIE9yaWVudGF0aW9uLCBvcmllbnRhdGlvbiA9PiBvcmllbnRhdGlvbiA9PT0gT3JpZW50YXRpb24uSE9SSVpPTlRBTCA/IGhvcml6b250YWwgOiB2ZXJ0aWNhbCApO1xuICB9XG5cbiAgcHVibGljIGdldCBob3Jpem9udGFsKCk6IFQge1xuICAgIHJldHVybiB0aGlzLmdldCggT3JpZW50YXRpb24uSE9SSVpPTlRBTCApO1xuICB9XG5cbiAgcHVibGljIHNldCBob3Jpem9udGFsKCB2YWx1ZTogVCApIHtcbiAgICB0aGlzLnNldCggT3JpZW50YXRpb24uSE9SSVpPTlRBTCwgdmFsdWUgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXQgdmVydGljYWwoKTogVCB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0KCBPcmllbnRhdGlvbi5WRVJUSUNBTCApO1xuICB9XG5cbiAgcHVibGljIHNldCB2ZXJ0aWNhbCggdmFsdWU6IFQgKSB7XG4gICAgdGhpcy5zZXQoIE9yaWVudGF0aW9uLlZFUlRJQ0FMLCB2YWx1ZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gb3JpZW50YXRpb24gcGFpciBiYXNlZCBvbiBhIGZhY3RvcnkgbWV0aG9kLlxuICAgKlxuICAgKiBAcGFyYW0gZmFjdG9yeSAtIGNhbGxlZCBvbmNlIGZvciBlYWNoIG9yaWVudGF0aW9uIHRvIGRldGVybWluZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHZhbHVlLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBjcmVhdGU8VD4oIGZhY3Rvcnk6ICggbzogT3JpZW50YXRpb24gKSA9PiBUICk6IE9yaWVudGF0aW9uUGFpcjxUPiB7XG4gICAgcmV0dXJuIG5ldyBPcmllbnRhdGlvblBhaXIoIGZhY3RvcnkoIE9yaWVudGF0aW9uLkhPUklaT05UQUwgKSwgZmFjdG9yeSggT3JpZW50YXRpb24uVkVSVElDQUwgKSApO1xuICB9XG59XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnT3JpZW50YXRpb25QYWlyJywgT3JpZW50YXRpb25QYWlyICk7XG5leHBvcnQgZGVmYXVsdCBPcmllbnRhdGlvblBhaXI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLGNBQWMsTUFBTSxxQkFBcUI7QUFDaEQsT0FBT0MsV0FBVyxNQUFNLGtCQUFrQjtBQUMxQyxPQUFPQyxRQUFRLE1BQU0sZUFBZTtBQUVwQyxNQUFNQyxlQUFlLFNBQVlILGNBQWMsQ0FBaUI7RUFFOUQ7QUFDRjtBQUNBO0FBQ0E7RUFDU0ksV0FBV0EsQ0FBRUMsVUFBYSxFQUFFQyxRQUFXLEVBQUc7SUFDL0MsS0FBSyxDQUFFTCxXQUFXLEVBQUVNLFdBQVcsSUFBSUEsV0FBVyxLQUFLTixXQUFXLENBQUNPLFVBQVUsR0FBR0gsVUFBVSxHQUFHQyxRQUFRLENBQUU7RUFDckc7RUFFQSxJQUFXRCxVQUFVQSxDQUFBLEVBQU07SUFDekIsT0FBTyxJQUFJLENBQUNJLEdBQUcsQ0FBRVIsV0FBVyxDQUFDTyxVQUFVLENBQUU7RUFDM0M7RUFFQSxJQUFXSCxVQUFVQSxDQUFFSyxLQUFRLEVBQUc7SUFDaEMsSUFBSSxDQUFDQyxHQUFHLENBQUVWLFdBQVcsQ0FBQ08sVUFBVSxFQUFFRSxLQUFLLENBQUU7RUFDM0M7RUFFQSxJQUFXSixRQUFRQSxDQUFBLEVBQU07SUFDdkIsT0FBTyxJQUFJLENBQUNHLEdBQUcsQ0FBRVIsV0FBVyxDQUFDVyxRQUFRLENBQUU7RUFDekM7RUFFQSxJQUFXTixRQUFRQSxDQUFFSSxLQUFRLEVBQUc7SUFDOUIsSUFBSSxDQUFDQyxHQUFHLENBQUVWLFdBQVcsQ0FBQ1csUUFBUSxFQUFFRixLQUFLLENBQUU7RUFDekM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBY0csTUFBTUEsQ0FBS0MsT0FBZ0MsRUFBdUI7SUFDOUUsT0FBTyxJQUFJWCxlQUFlLENBQUVXLE9BQU8sQ0FBRWIsV0FBVyxDQUFDTyxVQUFVLENBQUUsRUFBRU0sT0FBTyxDQUFFYixXQUFXLENBQUNXLFFBQVEsQ0FBRSxDQUFFO0VBQ2xHO0FBQ0Y7QUFFQVYsUUFBUSxDQUFDYSxRQUFRLENBQUUsaUJBQWlCLEVBQUVaLGVBQWUsQ0FBRTtBQUN2RCxlQUFlQSxlQUFlIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/pairs.js
// Copyright 2014-2023, University of Colorado Boulder

/**
 * Creates an array of arrays, which consists of pairs of objects from the input array without duplication.
 *
 * For example, phet.phetCore.pairs( [ 'a', 'b', 'c' ] ) will return:
 * [ [ 'a', 'b' ], [ 'a', 'c' ], [ 'b', 'c' ] ]
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function pairs(array) {
  const result = [];
  const length = array.length;
  if (length > 1) {
    for (let i = 0; i < length - 1; i++) {
      const first = array[i];
      for (let j = i + 1; j < length; j++) {
        result.push([first, array[j]]);
      }
    }
  }
  return result;
}
js_phetCore.register('pairs', pairs);
/* harmony default export */ const js_pairs = ((/* unused pure expression or super */ null && (pairs)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsInBhaXJzIiwiYXJyYXkiLCJyZXN1bHQiLCJsZW5ndGgiLCJpIiwiZmlyc3QiLCJqIiwicHVzaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsicGFpcnMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ3JlYXRlcyBhbiBhcnJheSBvZiBhcnJheXMsIHdoaWNoIGNvbnNpc3RzIG9mIHBhaXJzIG9mIG9iamVjdHMgZnJvbSB0aGUgaW5wdXQgYXJyYXkgd2l0aG91dCBkdXBsaWNhdGlvbi5cbiAqXG4gKiBGb3IgZXhhbXBsZSwgcGhldC5waGV0Q29yZS5wYWlycyggWyAnYScsICdiJywgJ2MnIF0gKSB3aWxsIHJldHVybjpcbiAqIFsgWyAnYScsICdiJyBdLCBbICdhJywgJ2MnIF0sIFsgJ2InLCAnYycgXSBdXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcblxuZnVuY3Rpb24gcGFpcnMoIGFycmF5ICkge1xuICBjb25zdCByZXN1bHQgPSBbXTtcbiAgY29uc3QgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICBpZiAoIGxlbmd0aCA+IDEgKSB7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbGVuZ3RoIC0gMTsgaSsrICkge1xuICAgICAgY29uc3QgZmlyc3QgPSBhcnJheVsgaSBdO1xuICAgICAgZm9yICggbGV0IGogPSBpICsgMTsgaiA8IGxlbmd0aDsgaisrICkge1xuICAgICAgICByZXN1bHQucHVzaCggWyBmaXJzdCwgYXJyYXlbIGogXSBdICk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAncGFpcnMnLCBwYWlycyApO1xuXG5leHBvcnQgZGVmYXVsdCBwYWlyczsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGVBQWU7QUFFcEMsU0FBU0MsS0FBS0EsQ0FBRUMsS0FBSyxFQUFHO0VBQ3RCLE1BQU1DLE1BQU0sR0FBRyxFQUFFO0VBQ2pCLE1BQU1DLE1BQU0sR0FBR0YsS0FBSyxDQUFDRSxNQUFNO0VBQzNCLElBQUtBLE1BQU0sR0FBRyxDQUFDLEVBQUc7SUFDaEIsS0FBTSxJQUFJQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdELE1BQU0sR0FBRyxDQUFDLEVBQUVDLENBQUMsRUFBRSxFQUFHO01BQ3JDLE1BQU1DLEtBQUssR0FBR0osS0FBSyxDQUFFRyxDQUFDLENBQUU7TUFDeEIsS0FBTSxJQUFJRSxDQUFDLEdBQUdGLENBQUMsR0FBRyxDQUFDLEVBQUVFLENBQUMsR0FBR0gsTUFBTSxFQUFFRyxDQUFDLEVBQUUsRUFBRztRQUNyQ0osTUFBTSxDQUFDSyxJQUFJLENBQUUsQ0FBRUYsS0FBSyxFQUFFSixLQUFLLENBQUVLLENBQUMsQ0FBRSxDQUFFLENBQUU7TUFDdEM7SUFDRjtFQUNGO0VBQ0EsT0FBT0osTUFBTTtBQUNmO0FBRUFILFFBQVEsQ0FBQ1MsUUFBUSxDQUFFLE9BQU8sRUFBRVIsS0FBSyxDQUFFO0FBRW5DLGVBQWVBLEtBQUsifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/partition.js
// Copyright 2014-2020, University of Colorado Boulder

/**
 * Partitions an array into two arrays: the first contains all elements that satisfy the predicate, and the second
 * contains all the (other) elements that do not satisfy the predicate.
 *
 * e.g. partition( [1,2,3,4], function( n ) { return n % 2 === 0; } ) will return [[2,4],[1,3]]
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


function partition(array, predicate) {
  assert && assert(Array.isArray(array));
  assert && assert(typeof predicate === 'function');
  const satisfied = [];
  const unsatisfied = [];
  const length = array.length;
  for (let i = 0; i < length; i++) {
    if (predicate(array[i])) {
      satisfied.push(array[i]);
    } else {
      unsatisfied.push(array[i]);
    }
  }
  return [satisfied, unsatisfied];
}
js_phetCore.register('partition', partition);
/* harmony default export */ const js_partition = ((/* unused pure expression or super */ null && (partition)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsInBhcnRpdGlvbiIsImFycmF5IiwicHJlZGljYXRlIiwiYXNzZXJ0IiwiQXJyYXkiLCJpc0FycmF5Iiwic2F0aXNmaWVkIiwidW5zYXRpc2ZpZWQiLCJsZW5ndGgiLCJpIiwicHVzaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsicGFydGl0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFBhcnRpdGlvbnMgYW4gYXJyYXkgaW50byB0d28gYXJyYXlzOiB0aGUgZmlyc3QgY29udGFpbnMgYWxsIGVsZW1lbnRzIHRoYXQgc2F0aXNmeSB0aGUgcHJlZGljYXRlLCBhbmQgdGhlIHNlY29uZFxuICogY29udGFpbnMgYWxsIHRoZSAob3RoZXIpIGVsZW1lbnRzIHRoYXQgZG8gbm90IHNhdGlzZnkgdGhlIHByZWRpY2F0ZS5cbiAqXG4gKiBlLmcuIHBhcnRpdGlvbiggWzEsMiwzLDRdLCBmdW5jdGlvbiggbiApIHsgcmV0dXJuIG4gJSAyID09PSAwOyB9ICkgd2lsbCByZXR1cm4gW1syLDRdLFsxLDNdXVxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbmZ1bmN0aW9uIHBhcnRpdGlvbiggYXJyYXksIHByZWRpY2F0ZSApIHtcbiAgYXNzZXJ0ICYmIGFzc2VydCggQXJyYXkuaXNBcnJheSggYXJyYXkgKSApO1xuICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlb2YgcHJlZGljYXRlID09PSAnZnVuY3Rpb24nICk7XG5cbiAgY29uc3Qgc2F0aXNmaWVkID0gW107XG4gIGNvbnN0IHVuc2F0aXNmaWVkID0gW107XG4gIGNvbnN0IGxlbmd0aCA9IGFycmF5Lmxlbmd0aDtcbiAgZm9yICggbGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG4gICAgaWYgKCBwcmVkaWNhdGUoIGFycmF5WyBpIF0gKSApIHtcbiAgICAgIHNhdGlzZmllZC5wdXNoKCBhcnJheVsgaSBdICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdW5zYXRpc2ZpZWQucHVzaCggYXJyYXlbIGkgXSApO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBbIHNhdGlzZmllZCwgdW5zYXRpc2ZpZWQgXTtcbn1cblxucGhldENvcmUucmVnaXN0ZXIoICdwYXJ0aXRpb24nLCBwYXJ0aXRpb24gKTtcblxuZXhwb3J0IGRlZmF1bHQgcGFydGl0aW9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTtBQUVwQyxTQUFTQyxTQUFTQSxDQUFFQyxLQUFLLEVBQUVDLFNBQVMsRUFBRztFQUNyQ0MsTUFBTSxJQUFJQSxNQUFNLENBQUVDLEtBQUssQ0FBQ0MsT0FBTyxDQUFFSixLQUFLLENBQUUsQ0FBRTtFQUMxQ0UsTUFBTSxJQUFJQSxNQUFNLENBQUUsT0FBT0QsU0FBUyxLQUFLLFVBQVUsQ0FBRTtFQUVuRCxNQUFNSSxTQUFTLEdBQUcsRUFBRTtFQUNwQixNQUFNQyxXQUFXLEdBQUcsRUFBRTtFQUN0QixNQUFNQyxNQUFNLEdBQUdQLEtBQUssQ0FBQ08sTUFBTTtFQUMzQixLQUFNLElBQUlDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0QsTUFBTSxFQUFFQyxDQUFDLEVBQUUsRUFBRztJQUNqQyxJQUFLUCxTQUFTLENBQUVELEtBQUssQ0FBRVEsQ0FBQyxDQUFFLENBQUUsRUFBRztNQUM3QkgsU0FBUyxDQUFDSSxJQUFJLENBQUVULEtBQUssQ0FBRVEsQ0FBQyxDQUFFLENBQUU7SUFDOUIsQ0FBQyxNQUNJO01BQ0hGLFdBQVcsQ0FBQ0csSUFBSSxDQUFFVCxLQUFLLENBQUVRLENBQUMsQ0FBRSxDQUFFO0lBQ2hDO0VBQ0Y7RUFFQSxPQUFPLENBQUVILFNBQVMsRUFBRUMsV0FBVyxDQUFFO0FBQ25DO0FBRUFSLFFBQVEsQ0FBQ1ksUUFBUSxDQUFFLFdBQVcsRUFBRVgsU0FBUyxDQUFFO0FBRTNDLGVBQWVBLFNBQVMifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/platform.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * Code for testing which platform is running.  Use sparingly, if at all!
 *
 * Sample usage:
 * if (platform.firefox) {node.renderer = 'canvas';}
 *
 * @author Jonathan Olson (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 */


const ua = navigator.userAgent;

// Checks to see whether we are IE, and if so whether the version matches.
function isIE(version) {
  return getInternetExplorerVersion() === version;
}

// Whether the browser is most likely Safari running on iOS
// See http://stackoverflow.com/questions/3007480/determine-if-user-navigated-from-mobile-safari
function isMobileSafari() {
  return !!(window.phet && phet.chipper && phet.chipper.queryParameters && phet.chipper.queryParameters['phet-app'] || (ua.match(/(iPod|iPhone|iPad)/) || navigator.platform === 'MacIntel' && navigator.maxTouchPoints >= 2) && ua.match(/AppleWebKit/));
}

//IE11 no longer reports MSIE in the user agent string, see https://github.com/phetsims/phet-core/issues/12
//This code is adapted from http://stackoverflow.com/questions/17907445/how-to-detect-ie11
function getInternetExplorerVersion() {
  let rv = -1;
  let re = null;
  if (navigator.appName === 'Microsoft Internet Explorer') {
    re = new RegExp('MSIE ([0-9]{1,}[.0-9]{0,})');
    if (re.exec(ua) !== null) {
      rv = parseFloat(RegExp.$1);
    }
  } else if (navigator.appName === 'Netscape') {
    re = new RegExp('Trident/.*rv:([0-9]{1,}[.0-9]{0,})');
    if (re.exec(ua) !== null) {
      rv = parseFloat(RegExp.$1);
    }
  }
  return rv;
}
const platform = {
  // Whether the browser is most likely Firefox
  firefox: ua.toLowerCase().indexOf('firefox') > -1,
  // Whether the browser is most likely Safari running on iOS
  mobileSafari: isMobileSafari(),
  // Whether the browser is a matching version of Safari running on OS X
  safari5: !!(ua.match(/Version\/5\./) && ua.match(/Safari\//) && ua.match(/AppleWebKit/)),
  safari6: !!(ua.match(/Version\/6\./) && ua.match(/Safari\//) && ua.match(/AppleWebKit/)),
  safari7: !!(ua.match(/Version\/7\./) && ua.match(/Safari\//) && ua.match(/AppleWebKit/)),
  safari10: !!(ua.match(/Version\/10\./) && ua.match(/Safari\//) && ua.match(/AppleWebKit/)),
  safari11: !!(ua.match(/Version\/11\./) && ua.match(/Safari\//) && ua.match(/AppleWebKit/)),
  // Match Safari on iOS
  safari9: !!(ua.match(/Version\/9\./) && ua.match(/Safari\//) && ua.match(/AppleWebKit/)),
  // Whether the browser matches any version of safari, including mobile
  safari: isMobileSafari() || !!(ua.match(/Version\//) && ua.match(/Safari\//) && ua.match(/AppleWebKit/)),
  // Whether the browser is some type of IE (Internet Explorer)
  ie: getInternetExplorerVersion() !== -1,
  // Whether the browser is a specific version of IE (Internet Explorer)
  ie9: isIE(9),
  ie10: isIE(10),
  ie11: isIE(11),
  // Whether the browser has Android in its user agent
  android: ua.indexOf('Android') > 0,
  // Whether the browser is Microsoft Edge
  edge: !!ua.match(/Edge\//),
  // Whether the browser is Chromium-based (usually Chrome)
  chromium: /chrom(e|ium)/.test(ua.toLowerCase()) && !ua.match(/Edge\//),
  mac: navigator.platform.includes('Mac')
};
js_phetCore.register('platform', platform);
/* harmony default export */ const js_platform = ((/* unused pure expression or super */ null && (platform)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSIsInVhIiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwiaXNJRSIsInZlcnNpb24iLCJnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbiIsImlzTW9iaWxlU2FmYXJpIiwid2luZG93IiwicGhldCIsImNoaXBwZXIiLCJxdWVyeVBhcmFtZXRlcnMiLCJtYXRjaCIsInBsYXRmb3JtIiwibWF4VG91Y2hQb2ludHMiLCJydiIsInJlIiwiYXBwTmFtZSIsIlJlZ0V4cCIsImV4ZWMiLCJwYXJzZUZsb2F0IiwiJDEiLCJmaXJlZm94IiwidG9Mb3dlckNhc2UiLCJpbmRleE9mIiwibW9iaWxlU2FmYXJpIiwic2FmYXJpNSIsInNhZmFyaTYiLCJzYWZhcmk3Iiwic2FmYXJpMTAiLCJzYWZhcmkxMSIsInNhZmFyaTkiLCJzYWZhcmkiLCJpZSIsImllOSIsImllMTAiLCJpZTExIiwiYW5kcm9pZCIsImVkZ2UiLCJjaHJvbWl1bSIsInRlc3QiLCJtYWMiLCJpbmNsdWRlcyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsicGxhdGZvcm0uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ29kZSBmb3IgdGVzdGluZyB3aGljaCBwbGF0Zm9ybSBpcyBydW5uaW5nLiAgVXNlIHNwYXJpbmdseSwgaWYgYXQgYWxsIVxuICpcbiAqIFNhbXBsZSB1c2FnZTpcbiAqIGlmIChwbGF0Zm9ybS5maXJlZm94KSB7bm9kZS5yZW5kZXJlciA9ICdjYW52YXMnO31cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBTYW0gUmVpZCAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqL1xuXG5pbXBvcnQgcGhldENvcmUgZnJvbSAnLi9waGV0Q29yZS5qcyc7XG5cbmNvbnN0IHVhID0gbmF2aWdhdG9yLnVzZXJBZ2VudDtcblxuLy8gQ2hlY2tzIHRvIHNlZSB3aGV0aGVyIHdlIGFyZSBJRSwgYW5kIGlmIHNvIHdoZXRoZXIgdGhlIHZlcnNpb24gbWF0Y2hlcy5cbmZ1bmN0aW9uIGlzSUUoIHZlcnNpb24gKSB7XG4gIHJldHVybiBnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpID09PSB2ZXJzaW9uO1xufVxuXG4vLyBXaGV0aGVyIHRoZSBicm93c2VyIGlzIG1vc3QgbGlrZWx5IFNhZmFyaSBydW5uaW5nIG9uIGlPU1xuLy8gU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzAwNzQ4MC9kZXRlcm1pbmUtaWYtdXNlci1uYXZpZ2F0ZWQtZnJvbS1tb2JpbGUtc2FmYXJpXG5mdW5jdGlvbiBpc01vYmlsZVNhZmFyaSgpIHtcbiAgcmV0dXJuICEhKFxuICAgICggd2luZG93LnBoZXQgJiYgcGhldC5jaGlwcGVyICYmIHBoZXQuY2hpcHBlci5xdWVyeVBhcmFtZXRlcnMgJiYgcGhldC5jaGlwcGVyLnF1ZXJ5UGFyYW1ldGVyc1sgJ3BoZXQtYXBwJyBdICkgfHxcbiAgICAoICggdWEubWF0Y2goIC8oaVBvZHxpUGhvbmV8aVBhZCkvICkgfHwgKCBuYXZpZ2F0b3IucGxhdGZvcm0gPT09ICdNYWNJbnRlbCcgJiYgbmF2aWdhdG9yLm1heFRvdWNoUG9pbnRzID49IDIgKSApICYmIHVhLm1hdGNoKCAvQXBwbGVXZWJLaXQvICkgKVxuICApO1xufVxuXG4vL0lFMTEgbm8gbG9uZ2VyIHJlcG9ydHMgTVNJRSBpbiB0aGUgdXNlciBhZ2VudCBzdHJpbmcsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvcGhldC1jb3JlL2lzc3Vlcy8xMlxuLy9UaGlzIGNvZGUgaXMgYWRhcHRlZCBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTc5MDc0NDUvaG93LXRvLWRldGVjdC1pZTExXG5mdW5jdGlvbiBnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpIHtcbiAgbGV0IHJ2ID0gLTE7XG4gIGxldCByZSA9IG51bGw7XG4gIGlmICggbmF2aWdhdG9yLmFwcE5hbWUgPT09ICdNaWNyb3NvZnQgSW50ZXJuZXQgRXhwbG9yZXInICkge1xuICAgIHJlID0gbmV3IFJlZ0V4cCggJ01TSUUgKFswLTldezEsfVsuMC05XXswLH0pJyApO1xuICAgIGlmICggcmUuZXhlYyggdWEgKSAhPT0gbnVsbCApIHtcbiAgICAgIHJ2ID0gcGFyc2VGbG9hdCggUmVnRXhwLiQxICk7XG4gICAgfVxuICB9XG4gIGVsc2UgaWYgKCBuYXZpZ2F0b3IuYXBwTmFtZSA9PT0gJ05ldHNjYXBlJyApIHtcbiAgICByZSA9IG5ldyBSZWdFeHAoICdUcmlkZW50Ly4qcnY6KFswLTldezEsfVsuMC05XXswLH0pJyApO1xuICAgIGlmICggcmUuZXhlYyggdWEgKSAhPT0gbnVsbCApIHtcbiAgICAgIHJ2ID0gcGFyc2VGbG9hdCggUmVnRXhwLiQxICk7XG4gICAgfVxuICB9XG4gIHJldHVybiBydjtcbn1cblxuY29uc3QgcGxhdGZvcm0gPSB7XG4gIC8vIFdoZXRoZXIgdGhlIGJyb3dzZXIgaXMgbW9zdCBsaWtlbHkgRmlyZWZveFxuICBmaXJlZm94OiB1YS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoICdmaXJlZm94JyApID4gLTEsXG5cbiAgLy8gV2hldGhlciB0aGUgYnJvd3NlciBpcyBtb3N0IGxpa2VseSBTYWZhcmkgcnVubmluZyBvbiBpT1NcbiAgbW9iaWxlU2FmYXJpOiBpc01vYmlsZVNhZmFyaSgpLFxuXG4gIC8vIFdoZXRoZXIgdGhlIGJyb3dzZXIgaXMgYSBtYXRjaGluZyB2ZXJzaW9uIG9mIFNhZmFyaSBydW5uaW5nIG9uIE9TIFhcbiAgc2FmYXJpNTogISEoIHVhLm1hdGNoKCAvVmVyc2lvblxcLzVcXC4vICkgJiYgdWEubWF0Y2goIC9TYWZhcmlcXC8vICkgJiYgdWEubWF0Y2goIC9BcHBsZVdlYktpdC8gKSApLFxuICBzYWZhcmk2OiAhISggdWEubWF0Y2goIC9WZXJzaW9uXFwvNlxcLi8gKSAmJiB1YS5tYXRjaCggL1NhZmFyaVxcLy8gKSAmJiB1YS5tYXRjaCggL0FwcGxlV2ViS2l0LyApICksXG4gIHNhZmFyaTc6ICEhKCB1YS5tYXRjaCggL1ZlcnNpb25cXC83XFwuLyApICYmIHVhLm1hdGNoKCAvU2FmYXJpXFwvLyApICYmIHVhLm1hdGNoKCAvQXBwbGVXZWJLaXQvICkgKSxcbiAgc2FmYXJpMTA6ICEhKCB1YS5tYXRjaCggL1ZlcnNpb25cXC8xMFxcLi8gKSAmJiB1YS5tYXRjaCggL1NhZmFyaVxcLy8gKSAmJiB1YS5tYXRjaCggL0FwcGxlV2ViS2l0LyApICksXG4gIHNhZmFyaTExOiAhISggdWEubWF0Y2goIC9WZXJzaW9uXFwvMTFcXC4vICkgJiYgdWEubWF0Y2goIC9TYWZhcmlcXC8vICkgJiYgdWEubWF0Y2goIC9BcHBsZVdlYktpdC8gKSApLFxuXG4gIC8vIE1hdGNoIFNhZmFyaSBvbiBpT1NcbiAgc2FmYXJpOTogISEoIHVhLm1hdGNoKCAvVmVyc2lvblxcLzlcXC4vICkgJiYgdWEubWF0Y2goIC9TYWZhcmlcXC8vICkgJiYgdWEubWF0Y2goIC9BcHBsZVdlYktpdC8gKSApLFxuXG4gIC8vIFdoZXRoZXIgdGhlIGJyb3dzZXIgbWF0Y2hlcyBhbnkgdmVyc2lvbiBvZiBzYWZhcmksIGluY2x1ZGluZyBtb2JpbGVcbiAgc2FmYXJpOiBpc01vYmlsZVNhZmFyaSgpIHx8ICEhKCB1YS5tYXRjaCggL1ZlcnNpb25cXC8vICkgJiYgdWEubWF0Y2goIC9TYWZhcmlcXC8vICkgJiYgdWEubWF0Y2goIC9BcHBsZVdlYktpdC8gKSApLFxuXG4gIC8vIFdoZXRoZXIgdGhlIGJyb3dzZXIgaXMgc29tZSB0eXBlIG9mIElFIChJbnRlcm5ldCBFeHBsb3JlcilcbiAgaWU6IGdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uKCkgIT09IC0xLFxuXG4gIC8vIFdoZXRoZXIgdGhlIGJyb3dzZXIgaXMgYSBzcGVjaWZpYyB2ZXJzaW9uIG9mIElFIChJbnRlcm5ldCBFeHBsb3JlcilcbiAgaWU5OiBpc0lFKCA5ICksXG4gIGllMTA6IGlzSUUoIDEwICksXG4gIGllMTE6IGlzSUUoIDExICksXG5cbiAgLy8gV2hldGhlciB0aGUgYnJvd3NlciBoYXMgQW5kcm9pZCBpbiBpdHMgdXNlciBhZ2VudFxuICBhbmRyb2lkOiB1YS5pbmRleE9mKCAnQW5kcm9pZCcgKSA+IDAsXG5cbiAgLy8gV2hldGhlciB0aGUgYnJvd3NlciBpcyBNaWNyb3NvZnQgRWRnZVxuICBlZGdlOiAhIXVhLm1hdGNoKCAvRWRnZVxcLy8gKSxcblxuICAvLyBXaGV0aGVyIHRoZSBicm93c2VyIGlzIENocm9taXVtLWJhc2VkICh1c3VhbGx5IENocm9tZSlcbiAgY2hyb21pdW06ICggL2Nocm9tKGV8aXVtKS8gKS50ZXN0KCB1YS50b0xvd2VyQ2FzZSgpICkgJiYgIXVhLm1hdGNoKCAvRWRnZVxcLy8gKSxcblxuICBtYWM6IG5hdmlnYXRvci5wbGF0Zm9ybS5pbmNsdWRlcyggJ01hYycgKVxufTtcbnBoZXRDb3JlLnJlZ2lzdGVyKCAncGxhdGZvcm0nLCBwbGF0Zm9ybSApO1xuXG5leHBvcnQgZGVmYXVsdCBwbGF0Zm9ybTsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxRQUFRLE1BQU0sZUFBZTtBQUVwQyxNQUFNQyxFQUFFLEdBQUdDLFNBQVMsQ0FBQ0MsU0FBUzs7QUFFOUI7QUFDQSxTQUFTQyxJQUFJQSxDQUFFQyxPQUFPLEVBQUc7RUFDdkIsT0FBT0MsMEJBQTBCLEVBQUUsS0FBS0QsT0FBTztBQUNqRDs7QUFFQTtBQUNBO0FBQ0EsU0FBU0UsY0FBY0EsQ0FBQSxFQUFHO0VBQ3hCLE9BQU8sQ0FBQyxFQUNKQyxNQUFNLENBQUNDLElBQUksSUFBSUEsSUFBSSxDQUFDQyxPQUFPLElBQUlELElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxlQUFlLElBQUlGLElBQUksQ0FBQ0MsT0FBTyxDQUFDQyxlQUFlLENBQUUsVUFBVSxDQUFF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
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/Poolable.js
// Copyright 2015-2022, University of Colorado Boulder

/**
 * Object pooling mixin, for cases where creating new objects is expensive, and we'd rather mark some objects as able
 * to be reused (i.e. 'in the pool'). This provides a pool of objects for each type it is invoked on. It allows for
 * getting "new" objects that can either be constructed OR pulled in from a pool, and requires that the objects are
 * essentially able to "re-run" the constructor. Then when putting the object back in the pool, references should be
 * released, so memory isn't leaked.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */




const Poolable = {
  /**
   * Changes the given type (and its prototype) to support object pooling.
   */
  mixInto(type, providedOptions) {
    const options = optionize()({
      defaultArguments: [],
      initialize: type.prototype.initialize,
      maxSize: 100,
      initialSize: 0,
      useDefaultConstruction: false
    }, providedOptions);
    assert && assert(options.maxSize >= 0);
    assert && assert(options.initialSize >= 0);

    // The actual array we store things in. Always push/pop.
    const pool = [];
    let maxPoolSize = options.maxSize;

    // There is a madness to this craziness. We'd want to use the method noted at
    // https://stackoverflow.com/questions/1606797/use-of-apply-with-new-operator-is-this-possible, but the type is
    // not provided in the arguments array below. By calling bind on itself, we're able to get a version of bind that
    // inserts the constructor as the first argument of the .apply called later so we don't create garbage by having
    // to pack `arguments` into an array AND THEN concatenate it with a new first element (the type itself).
    const partialConstructor = Function.prototype.bind.bind(type, type);

    // Basically our type constructor, but with the default arguments included already.
    const DefaultConstructor = partialConstructor(...options.defaultArguments);
    const initialize = options.initialize;
    const useDefaultConstruction = options.useDefaultConstruction;
    const proto = type.prototype;
    js_extend(type, {
      /**
       * This should not be modified externally. In the future if desired, functions could be added to help
       * adding/removing poolable instances manually.
       */
      pool: pool,
      /**
       * Returns an object with arbitrary state (possibly constructed with the default arguments).
       */
      dirtyFromPool() {
        return pool.length ? pool.pop() : new DefaultConstructor();
      },
      /**
       * Returns an object that behaves as if it was constructed with the given arguments. May result in a new object
       * being created (if the pool is empty), or it may use the constructor to mutate an object from the pool.
       */
      createFromPool(...args) {
        let result;
        if (pool.length) {
          result = pool.pop();
          initialize.apply(result, args);
        } else if (useDefaultConstruction) {
          result = new DefaultConstructor();
          initialize.apply(result, args);
        } else {
          result = new (partialConstructor(...args))();
        }
        return result;
      },
      /**
       * Returns the current size of the pool.
       */
      get poolSize() {
        return pool.length;
      },
      /**
       * Sets the maximum pool size.
       */
      set maxPoolSize(value) {
        assert && assert(value === Number.POSITIVE_INFINITY || Number.isInteger(value) && value >= 0, 'maxPoolSize should be a non-negative integer or infinity');
        maxPoolSize = value;
      },
      /**
       * Returns the maximum pool size.
       */
      get maxPoolSize() {
        return maxPoolSize;
      }
    });
    js_extend(proto, {
      /**
       * Adds this object into the pool, so that it can be reused elsewhere. Generally when this is done, no other
       * references to the object should be held (since they should not be used at all).
       */
      freeToPool() {
        if (pool.length < maxPoolSize) {
          pool.push(this);
        }
      }
    });

    // Initialize the pool (if it should have objects)
    while (pool.length < options.initialSize) {
      pool.push(new DefaultConstructor());
    }
    return type;
  }
};
js_phetCore.register('Poolable', Poolable);
/* harmony default export */ const js_Poolable = (Poolable);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHRlbmQiLCJwaGV0Q29yZSIsIm9wdGlvbml6ZSIsIlBvb2xhYmxlIiwibWl4SW50byIsInR5cGUiLCJwcm92aWRlZE9wdGlvbnMiLCJvcHRpb25zIiwiZGVmYXVsdEFyZ3VtZW50cyIsImluaXRpYWxpemUiLCJwcm90b3R5cGUiLCJtYXhTaXplIiwiaW5pdGlhbFNpemUiLCJ1c2VEZWZhdWx0Q29uc3RydWN0aW9uIiwiYXNzZXJ0IiwicG9vbCIsIm1heFBvb2xTaXplIiwicGFydGlhbENvbnN0cnVjdG9yIiwiRnVuY3Rpb24iLCJiaW5kIiwiRGVmYXVsdENvbnN0cnVjdG9yIiwicHJvdG8iLCJkaXJ0eUZyb21Qb29sIiwibGVuZ3RoIiwicG9wIiwiY3JlYXRlRnJvbVBvb2wiLCJhcmdzIiwicmVzdWx0IiwiYXBwbHkiLCJwb29sU2l6ZSIsInZhbHVlIiwiTnVtYmVyIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJpc0ludGVnZXIiLCJmcmVlVG9Qb29sIiwicHVzaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUG9vbGFibGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogT2JqZWN0IHBvb2xpbmcgbWl4aW4sIGZvciBjYXNlcyB3aGVyZSBjcmVhdGluZyBuZXcgb2JqZWN0cyBpcyBleHBlbnNpdmUsIGFuZCB3ZSdkIHJhdGhlciBtYXJrIHNvbWUgb2JqZWN0cyBhcyBhYmxlXG4gKiB0byBiZSByZXVzZWQgKGkuZS4gJ2luIHRoZSBwb29sJykuIFRoaXMgcHJvdmlkZXMgYSBwb29sIG9mIG9iamVjdHMgZm9yIGVhY2ggdHlwZSBpdCBpcyBpbnZva2VkIG9uLiBJdCBhbGxvd3MgZm9yXG4gKiBnZXR0aW5nIFwibmV3XCIgb2JqZWN0cyB0aGF0IGNhbiBlaXRoZXIgYmUgY29uc3RydWN0ZWQgT1IgcHVsbGVkIGluIGZyb20gYSBwb29sLCBhbmQgcmVxdWlyZXMgdGhhdCB0aGUgb2JqZWN0cyBhcmVcbiAqIGVzc2VudGlhbGx5IGFibGUgdG8gXCJyZS1ydW5cIiB0aGUgY29uc3RydWN0b3IuIFRoZW4gd2hlbiBwdXR0aW5nIHRoZSBvYmplY3QgYmFjayBpbiB0aGUgcG9vbCwgcmVmZXJlbmNlcyBzaG91bGQgYmVcbiAqIHJlbGVhc2VkLCBzbyBtZW1vcnkgaXNuJ3QgbGVha2VkLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgQ29uc3RydWN0b3IgZnJvbSAnLi90eXBlcy9Db25zdHJ1Y3Rvci5qcyc7XG5pbXBvcnQgZXh0ZW5kIGZyb20gJy4vZXh0ZW5kLmpzJztcbmltcG9ydCBwaGV0Q29yZSBmcm9tICcuL3BoZXRDb3JlLmpzJztcbmltcG9ydCBvcHRpb25pemUgZnJvbSAnLi9vcHRpb25pemUuanMnO1xuaW1wb3J0IEludGVudGlvbmFsQW55IGZyb20gJy4vdHlwZXMvSW50ZW50aW9uYWxBbnkuanMnO1xuXG50eXBlIFBvb2xhYmxlT3B0aW9uczxUeXBlIGV4dGVuZHMgQ29uc3RydWN0b3I+ID0ge1xuICAvLyBJZiBhbiBvYmplY3QgbmVlZHMgdG8gYmUgY3JlYXRlZCB3aXRob3V0IGEgZGlyZWN0IGNhbGwgKHNheSwgdG8gZmlsbCB0aGUgcG9vbCBpbml0aWFsbHkpLCB0aGVzZSBhcmUgdGhlIGFyZ3VtZW50c1xuICAvLyB0aGF0IHdpbGwgYmUgcGFzc2VkIGludG8gdGhlIGNvbnN0cnVjdG9yXG4gIGRlZmF1bHRBcmd1bWVudHM/OiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8VHlwZT47XG5cbiAgLy8gVGhlIGZ1bmN0aW9uIHRvIGNhbGwgb24gdGhlIG9iamVjdHMgdG8gcmVpbml0aWFsaXplIHRoZW0gKHRoYXQgaXMgZWl0aGVyIHRoZSBjb25zdHJ1Y3Rvciwgb3IgYWN0cyBsaWtlIHRoZVxuICAvLyBjb25zdHJ1Y3RvcikuXG4gIGluaXRpYWxpemU/OiBQb29sYWJsZUluaXRpYWxpemVyPFR5cGU+O1xuXG4gIC8vIEEgbGltaXQgZm9yIHRoZSBwb29sIHNpemUgKHNvIHdlIGRvbid0IGxlYWsgbWVtb3J5IGJ5IGdyb3dpbmcgdGhlIHBvb2wgZmFzdGVyIHRoYW4gd2UgdGFrZSB0aGluZ3MgZnJvbSBpdCkuIENhbiBiZVxuICAvLyBjdXN0b21pemVkIGJ5IHNldHRpbmcgVHlwZS5tYXhQb29sU2l6ZVxuICBtYXhTaXplPzogbnVtYmVyO1xuXG4gIC8vIFRoZSBpbml0aWFsIHNpemUgb2YgdGhlIHBvb2wuIFRvIGZpbGwgaXQsIG9iamVjdHMgd2lsbCBiZSBjcmVhdGVkIHdpdGggdGhlIGRlZmF1bHQgYXJndW1lbnRzLlxuICBpbml0aWFsU2l6ZT86IG51bWJlcjtcblxuICAvLyBJZiB0cnVlLCB3aGVuIGNvbnN0cnVjdGluZyB0aGUgZGVmYXVsdCBhcmd1bWVudHMgd2lsbCBhbHdheXMgYmUgdXNlZCAoYW5kIHRoZW4gaW5pdGlhbGl6ZWQgd2l0aCB0aGUgaW5pdGlhbGl6ZXIpXG4gIC8vIGluc3RlYWQgb2YganVzdCBwcm92aWRpbmcgdGhlIGFyZ3VtZW50cyBzdHJhaWdodCB0byB0aGUgY29uc3RydWN0b3IuXG4gIHVzZURlZmF1bHRDb25zdHJ1Y3Rpb24/OiBib29sZWFuO1xufTtcbnR5cGUgUG9vbGFibGVJbnN0YW5jZSA9IHtcbiAgZnJlZVRvUG9vbCgpOiB2b2lkO1xufTtcbnR5cGUgUG9vbGFibGVWZXJzaW9uPFR5cGUgZXh0ZW5kcyBDb25zdHJ1Y3Rvcj4gPSBJbnN0YW5jZVR5cGU8VHlwZT4gJiBQb29sYWJsZUluc3RhbmNlO1xudHlwZSBQb29sYWJsZUluaXRpYWxpemVyPFR5cGUgZXh0ZW5kcyBDb25zdHJ1Y3Rvcj4gPSAoIC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczxUeXBlPiApID0+IEludGVudGlvbmFsQW55O1xudHlwZSBQb29sYWJsZUNsYXNzPFR5cGUgZXh0ZW5kcyBDb25zdHJ1Y3Rvcj4gPSAoIG5ldyAoIC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczxUeXBlPiApID0+ICggUG9vbGFibGVWZXJzaW9uPFR5cGU+ICkgKSAmIFBvb2xhYmxlVHlwZTxUeXBlPjtcbnR5cGUgUG9vbGFibGVFeGlzdGluZ1N0YXRpY3M8VHlwZSBleHRlbmRzIENvbnN0cnVjdG9yPiA9IHtcbiAgLy8gV2UgZ3JhYiB0aGUgc3RhdGljIHZhbHVlcyBvZiBhIHR5cGVcbiAgWyBQcm9wZXJ0eSBpbiBrZXlvZiBUeXBlIF06IFR5cGVbIFByb3BlcnR5IF1cbn07XG50eXBlIFBvb2xhYmxlVHlwZTxUeXBlIGV4dGVuZHMgQ29uc3RydWN0b3I+ID0ge1xuICBwb29sOiBQb29sYWJsZVZlcnNpb248VHlwZT5bXTtcbiAgZGlydHlGcm9tUG9vbCgpOiBQb29sYWJsZVZlcnNpb248VHlwZT47XG4gIGNyZWF0ZUZyb21Qb29sKCAuLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8VHlwZT4gKTogUG9vbGFibGVWZXJzaW9uPFR5cGU+O1xuICBnZXQgcG9vbFNpemUoKTogbnVtYmVyO1xuICBzZXQgbWF4UG9vbFNpemUoIHZhbHVlOiBudW1iZXIgKTtcbiAgZ2V0IG1heFBvb2xTaXplKCk6IG51bWJlcjtcbn0gJiBQb29sYWJsZUV4aXN0aW5nU3RhdGljczxUeXBlPjtcblxuY29uc3QgUG9vbGFibGUgPSB7XG4gIC8qKlxuICAgKiBDaGFuZ2VzIHRoZSBnaXZlbiB0eXBlIChhbmQgaXRzIHByb3RvdHlwZSkgdG8gc3VwcG9ydCBvYmplY3QgcG9vbGluZy5cbiAgICovXG4gIG1peEludG88VHlwZSBleHRlbmRzIENvbnN0cnVjdG9yPiggdHlwZTogVHlwZSwgcHJvdmlkZWRPcHRpb25zPzogUG9vbGFibGVPcHRpb25zPFR5cGU+ICkgOiBQb29sYWJsZUNsYXNzPFR5cGU+IHtcbiAgICBjb25zdCBvcHRpb25zID0gb3B0aW9uaXplPFBvb2xhYmxlT3B0aW9uczxUeXBlPiwgUG9vbGFibGVPcHRpb25zPFR5cGU+PigpKCB7XG5cbiAgICAgIGRlZmF1bHRBcmd1bWVudHM6IFtdIGFzIHVua25vd24gYXMgQ29uc3RydWN0b3JQYXJhbWV0ZXJzPFR5cGU+LFxuICAgICAgaW5pdGlhbGl6ZTogdHlwZS5wcm90b3R5cGUuaW5pdGlhbGl6ZSxcbiAgICAgIG1heFNpemU6IDEwMCxcbiAgICAgIGluaXRpYWxTaXplOiAwLFxuICAgICAgdXNlRGVmYXVsdENvbnN0cnVjdGlvbjogZmFsc2VcbiAgICB9LCBwcm92aWRlZE9wdGlvbnMgKSBhcyBSZXF1aXJlZDxQb29sYWJsZU9wdGlvbnM8VHlwZT4+O1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3B0aW9ucy5tYXhTaXplID49IDAgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBvcHRpb25zLmluaXRpYWxTaXplID49IDAgKTtcblxuICAgIC8vIFRoZSBhY3R1YWwgYXJyYXkgd2Ugc3RvcmUgdGhpbmdzIGluLiBBbHdheXMgcHVzaC9wb3AuXG4gICAgY29uc3QgcG9vbDogSW5zdGFuY2VUeXBlPFR5cGU+W10gPSBbXTtcblxuICAgIGxldCBtYXhQb29sU2l6ZSA9IG9wdGlvbnMubWF4U2l6ZTtcblxuICAgIC8vIFRoZXJlIGlzIGEgbWFkbmVzcyB0byB0aGlzIGNyYXppbmVzcy4gV2UnZCB3YW50IHRvIHVzZSB0aGUgbWV0aG9kIG5vdGVkIGF0XG4gICAgLy8gaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMTYwNjc5Ny91c2Utb2YtYXBwbHktd2l0aC1uZXctb3BlcmF0b3ItaXMtdGhpcy1wb3NzaWJsZSwgYnV0IHRoZSB0eXBlIGlzXG4gICAgLy8gbm90IHByb3ZpZGVkIGluIHRoZSBhcmd1bWVudHMgYXJyYXkgYmVsb3cuIEJ5IGNhbGxpbmcgYmluZCBvbiBpdHNlbGYsIHdlJ3JlIGFibGUgdG8gZ2V0IGEgdmVyc2lvbiBvZiBiaW5kIHRoYXRcbiAgICAvLyBpbnNlcnRzIHRoZSBjb25zdHJ1Y3RvciBhcyB0aGUgZmlyc3QgYXJndW1lbnQgb2YgdGhlIC5hcHBseSBjYWxsZWQgbGF0ZXIgc28gd2UgZG9uJ3QgY3JlYXRlIGdhcmJhZ2UgYnkgaGF2aW5nXG4gICAgLy8gdG8gcGFjayBgYXJndW1lbnRzYCBpbnRvIGFuIGFycmF5IEFORCBUSEVOIGNvbmNhdGVuYXRlIGl0IHdpdGggYSBuZXcgZmlyc3QgZWxlbWVudCAodGhlIHR5cGUgaXRzZWxmKS5cbiAgICBjb25zdCBwYXJ0aWFsQ29uc3RydWN0b3IgPSBGdW5jdGlvbi5wcm90b3R5cGUuYmluZC5iaW5kKCB0eXBlLCB0eXBlICk7XG5cbiAgICAvLyBCYXNpY2FsbHkgb3VyIHR5cGUgY29uc3RydWN0b3IsIGJ1dCB3aXRoIHRoZSBkZWZhdWx0IGFyZ3VtZW50cyBpbmNsdWRlZCBhbHJlYWR5LlxuICAgIGNvbnN0IERlZmF1bHRDb25zdHJ1Y3RvciA9IHBhcnRpYWxDb25zdHJ1Y3RvciggLi4ub3B0aW9ucy5kZWZhdWx0QXJndW1lbnRzICk7XG5cbiAgICBjb25zdCBpbml0aWFsaXplID0gb3B0aW9ucy5pbml0aWFsaXplO1xuICAgIGNvbnN0IHVzZURlZmF1bHRDb25zdHJ1Y3Rpb24gPSBvcHRpb25zLnVzZURlZmF1bHRDb25zdHJ1Y3Rpb247XG5cbiAgICBjb25zdCBwcm90byA9IHR5cGUucHJvdG90eXBlO1xuXG4gICAgZXh0ZW5kKCB0eXBlLCB7XG4gICAgICAvKipcbiAgICAgICAqIFRoaXMgc2hvdWxkIG5vdCBiZSBtb2RpZmllZCBleHRlcm5hbGx5LiBJbiB0aGUgZnV0dXJlIGlmIGRlc2lyZWQsIGZ1bmN0aW9ucyBjb3VsZCBiZSBhZGRlZCB0byBoZWxwXG4gICAgICAgKiBhZGRpbmcvcmVtb3ZpbmcgcG9vbGFibGUgaW5zdGFuY2VzIG1hbnVhbGx5LlxuICAgICAgICovXG4gICAgICBwb29sOiBwb29sLFxuXG4gICAgICAvKipcbiAgICAgICAqIFJldHVybnMgYW4gb2JqZWN0IHdpdGggYXJiaXRyYXJ5IHN0YXRlIChwb3NzaWJseSBjb25zdHJ1Y3RlZCB3aXRoIHRoZSBkZWZhdWx0IGFyZ3VtZW50cykuXG4gICAgICAgKi9cbiAgICAgIGRpcnR5RnJvbVBvb2woKTogUG9vbGFibGVWZXJzaW9uPFR5cGU+IHtcbiAgICAgICAgcmV0dXJuIHBvb2wubGVuZ3RoID8gcG9vbC5wb3AoKSA6IG5ldyBEZWZhdWx0Q29uc3RydWN0b3IoKTtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyBhbiBvYmplY3QgdGhhdCBiZWhhdmVzIGFzIGlmIGl0IHdhcyBjb25zdHJ1Y3RlZCB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHMuIE1heSByZXN1bHQgaW4gYSBuZXcgb2JqZWN0XG4gICAgICAgKiBiZWluZyBjcmVhdGVkIChpZiB0aGUgcG9vbCBpcyBlbXB0eSksIG9yIGl0IG1heSB1c2UgdGhlIGNvbnN0cnVjdG9yIHRvIG11dGF0ZSBhbiBvYmplY3QgZnJvbSB0aGUgcG9vbC5cbiAgICAgICAqL1xuICAgICAgY3JlYXRlRnJvbVBvb2woIC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczxUeXBlPiApOiBQb29sYWJsZVZlcnNpb248VHlwZT4ge1xuICAgICAgICBsZXQgcmVzdWx0O1xuXG4gICAgICAgIGlmICggcG9vbC5sZW5ndGggKSB7XG4gICAgICAgICAgcmVzdWx0ID0gcG9vbC5wb3AoKTtcbiAgICAgICAgICBpbml0aWFsaXplLmFwcGx5KCByZXN1bHQsIGFyZ3MgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICggdXNlRGVmYXVsdENvbnN0cnVjdGlvbiApIHtcbiAgICAgICAgICByZXN1bHQgPSBuZXcgRGVmYXVsdENvbnN0cnVjdG9yKCk7XG4gICAgICAgICAgaW5pdGlhbGl6ZS5hcHBseSggcmVzdWx0LCBhcmdzICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzdWx0ID0gbmV3ICggcGFydGlhbENvbnN0cnVjdG9yKCAuLi5hcmdzICkgKSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgIH0sXG5cbiAgICAgIC8qKlxuICAgICAgICogUmV0dXJucyB0aGUgY3VycmVudCBzaXplIG9mIHRoZSBwb29sLlxuICAgICAgICovXG4gICAgICBnZXQgcG9vbFNpemUoKTogbnVtYmVyIHtcbiAgICAgICAgcmV0dXJuIHBvb2wubGVuZ3RoO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBTZXRzIHRoZSBtYXhpbXVtIHBvb2wgc2l6ZS5cbiAgICAgICAqL1xuICAgICAgc2V0IG1heFBvb2xTaXplKCB2YWx1ZTogbnVtYmVyICkge1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2YWx1ZSA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIHx8ICggTnVtYmVyLmlzSW50ZWdlciggdmFsdWUgKSAmJiB2YWx1ZSA+PSAwICksICdtYXhQb29sU2l6ZSBzaG91bGQgYmUgYSBub24tbmVnYXRpdmUgaW50ZWdlciBvciBpbmZpbml0eScgKTtcblxuICAgICAgICBtYXhQb29sU2l6ZSA9IHZhbHVlO1xuICAgICAgfSxcblxuICAgICAgLyoqXG4gICAgICAgKiBSZXR1cm5zIHRoZSBtYXhpbXVtIHBvb2wgc2l6ZS5cbiAgICAgICAqL1xuICAgICAgZ2V0IG1heFBvb2xTaXplKCk6IG51bWJlciB7XG4gICAgICAgIHJldHVybiBtYXhQb29sU2l6ZTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICBleHRlbmQoIHByb3RvLCB7XG4gICAgICAvKipcbiAgICAgICAqIEFkZHMgdGhpcyBvYmplY3QgaW50byB0aGUgcG9vbCwgc28gdGhhdCBpdCBjYW4gYmUgcmV1c2VkIGVsc2V3aGVyZS4gR2VuZXJhbGx5IHdoZW4gdGhpcyBpcyBkb25lLCBubyBvdGhlclxuICAgICAgICogcmVmZXJlbmNlcyB0byB0aGUgb2JqZWN0IHNob3VsZCBiZSBoZWxkIChzaW5jZSB0aGV5IHNob3VsZCBub3QgYmUgdXNlZCBhdCBhbGwpLlxuICAgICAgICovXG4gICAgICBmcmVlVG9Qb29sKCkge1xuICAgICAgICBpZiAoIHBvb2wubGVuZ3RoIDwgbWF4UG9vbFNpemUgKSB7XG4gICAgICAgICAgcG9vbC5wdXNoKCB0aGlzICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICAvLyBJbml0aWFsaXplIHRoZSBwb29sIChpZiBpdCBzaG91bGQgaGF2ZSBvYmplY3RzKVxuICAgIHdoaWxlICggcG9vbC5sZW5ndGggPCBvcHRpb25zLmluaXRpYWxTaXplICkge1xuICAgICAgcG9vbC5wdXNoKCBuZXcgRGVmYXVsdENvbnN0cnVjdG9yKCkgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHlwZSBhcyB1bmtub3duIGFzIFBvb2xhYmxlQ2xhc3M8VHlwZT47XG4gIH1cbn07XG5cbnBoZXRDb3JlLnJlZ2lzdGVyKCAnUG9vbGFibGUnLCBQb29sYWJsZSApO1xuXG5leHBvcnQgZGVmYXVsdCBQb29sYWJsZTtcbmV4cG9ydCB0eXBlIHsgUG9vbGFibGVPcHRpb25zLCBQb29sYWJsZUluc3RhbmNlLCBQb29sYWJsZVZlcnNpb24sIFBvb2xhYmxlSW5pdGlhbGl6ZXIsIFBvb2xhYmxlQ2xhc3MsIFBvb2xhYmxlVHlwZSB9O1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBR0EsT0FBT0EsTUFBTSxNQUFNLGFBQWE7QUFDaEMsT0FBT0MsUUFBUSxNQUFNLGVBQWU7QUFDcEMsT0FBT0MsU0FBUyxNQUFNLGdCQUFnQjtBQTBDdEMsTUFBTUMsUUFBUSxHQUFHO0VBQ2Y7QUFDRjtBQUNBO0VBQ0VDLE9BQU9BLENBQTRCQyxJQUFVLEVBQUVDLGVBQXVDLEVBQXlCO0lBQzdHLE1BQU1DLE9BQU8sR0FBR0wsU0FBUyxFQUFnRCxDQUFFO01BRXpFTSxnQkFBZ0IsRUFBRSxFQUE0QztNQUM5REMsVUFBVSxFQUFFSixJQUFJLENBQUNLLFNBQVMsQ0FBQ0QsVUFBVTtNQUNyQ0UsT0FBTyxFQUFFLEdBQUc7TUFDWkMsV0FBVyxFQUFFLENBQUM7TUFDZEMsc0JBQXNCLEVBQUU7SUFDMUIsQ0FBQyxF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
;// CONCATENATED MODULE: ../chipper/dist/js/phet-core/js/main.js
// Copyright 2013-2022, University of Colorado Boulder






























/* harmony default export */ const js_main = ((/* unused pure expression or super */ null && (phetCore)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJwaGV0Q29yZSJdLCJzb3VyY2VzIjpbIm1haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cblxuaW1wb3J0ICcuL2FycmF5RGlmZmVyZW5jZS5qcyc7XG5pbXBvcnQgJy4vYXJyYXlSZW1vdmUuanMnO1xuaW1wb3J0ICcuL2NsZWFuQXJyYXkuanMnO1xuaW1wb3J0ICcuL2NvbGxlY3QuanMnO1xuaW1wb3J0ICcuL2RldGVjdFByZWZpeC5qcyc7XG5pbXBvcnQgJy4vZGV0ZWN0UHJlZml4RXZlbnQuanMnO1xuaW1wb3J0ICcuL2RpbWVuc2lvbkZvckVhY2guanMnO1xuaW1wb3J0ICcuL2RpbWVuc2lvbk1hcC5qcyc7XG5pbXBvcnQgJy4vRW51bWVyYXRpb25EZXByZWNhdGVkLmpzJztcbmltcG9ydCAnLi9FbnVtZXJhdGlvbk1hcC5qcyc7XG5pbXBvcnQgJy4vZXNjYXBlSFRNTC5qcyc7XG5pbXBvcnQgJy4vRXZlbnRUaW1lci5qcyc7XG5pbXBvcnQgJy4vZXh0ZW5kLmpzJztcbmltcG9ydCAnLi9leHRlbmREZWZpbmVkLmpzJztcbmltcG9ydCAnLi9pbmhlcml0YW5jZS5qcyc7XG5pbXBvcnQgJy4vaW50ZXJsZWF2ZS5qcyc7XG5pbXBvcnQgJy4vaXNBcnJheS5qcyc7XG5pbXBvcnQgJy4vbG9hZFNjcmlwdC5qcyc7XG5pbXBvcnQgJy4vbWVtb2l6ZS5qcyc7XG5pbXBvcnQgJy4vbWVyZ2UuanMnO1xuaW1wb3J0ICcuL211dGF0ZS5qcyc7XG5pbXBvcnQgJy4vTmFtZXNwYWNlLmpzJztcbmltcG9ydCAnLi9PcmllbnRhdGlvblBhaXIuanMnO1xuaW1wb3J0ICcuL3BhaXJzLmpzJztcbmltcG9ydCAnLi9wYXJ0aXRpb24uanMnO1xuaW1wb3J0IHBoZXRDb3JlIGZyb20gJy4vcGhldENvcmUuanMnO1xuaW1wb3J0ICcuL3BsYXRmb3JtLmpzJztcbmltcG9ydCAnLi9Qb29sLmpzJztcbmltcG9ydCAnLi9Qb29sYWJsZS5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IHBoZXRDb3JlOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBR0EsT0FBTyxzQkFBc0I7QUFDN0IsT0FBTyxrQkFBa0I7QUFDekIsT0FBTyxpQkFBaUI7QUFDeEIsT0FBTyxjQUFjO0FBQ3JCLE9BQU8sbUJBQW1CO0FBQzFCLE9BQU8sd0JBQXdCO0FBQy9CLE9BQU8sdUJBQXVCO0FBQzlCLE9BQU8sbUJBQW1CO0FBQzFCLE9BQU8sNEJBQTRCO0FBQ25DLE9BQU8scUJBQXFCO0FBQzVCLE9BQU8saUJBQWlCO0FBQ3hCLE9BQU8saUJBQWlCO0FBQ3hCLE9BQU8sYUFBYTtBQUNwQixPQUFPLG9CQUFvQjtBQUMzQixPQUFPLGtCQUFrQjtBQUN6QixPQUFPLGlCQUFpQjtBQUN4QixPQUFPLGNBQWM7QUFDckIsT0FBTyxpQkFBaUI7QUFDeEIsT0FBTyxjQUFjO0FBQ3JCLE9BQU8sWUFBWTtBQUNuQixPQUFPLGFBQWE7QUFDcEIsT0FBTyxnQkFBZ0I7QUFDdkIsT0FBTyxzQkFBc0I7QUFDN0IsT0FBTyxZQUFZO0FBQ25CLE9BQU8sZ0JBQWdCO0FBQ3ZCLE9BQU9BLFFBQVEsTUFBTSxlQUFlO0FBQ3BDLE9BQU8sZUFBZTtBQUN0QixPQUFPLFdBQVc7QUFDbEIsT0FBTyxlQUFlO0FBRXRCLGVBQWVBLFFBQVEifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Bounds2.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * A 2D rectangle-shaped bounded area (bounding box).
 *
 * There are a number of convenience functions to get positions and points on the Bounds. Currently we do not
 * store these with the Bounds2 instance, since we want to lower the memory footprint.
 *
 * minX, minY, maxX, and maxY are actually stored. We don't do x,y,width,height because this can't properly express
 * semi-infinite bounds (like a half-plane), or easily handle what Bounds2.NOTHING and Bounds2.EVERYTHING do with
 * the constructive solid areas.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */









// Temporary instances to be used in the transform method.
const scratchVector2 = new Vector2(0, 0);
// TODO: Why does freeToPool get promoted, but nothing else? https://github.com/phetsims/phet-core/issues/103
// TODO: Do we need TPoolable? Can classes just have a static pool method? https://github.com/phetsims/phet-core/issues/103
class Bounds2 {
  // The minimum X coordinate of the bounds.

  // The minimum Y coordinate of the bounds.

  // The maximum X coordinate of the bounds.

  // The maximum Y coordinate of the bounds.

  /**
   * Creates a 2-dimensional bounds (bounding box).
   *
   * @param minX - The initial minimum X coordinate of the bounds.
   * @param minY - The initial minimum Y coordinate of the bounds.
   * @param maxX - The initial maximum X coordinate of the bounds.
   * @param maxY - The initial maximum Y coordinate of the bounds.
   */
  constructor(minX, minY, maxX, maxY) {
    assert && assert(maxY !== undefined, 'Bounds2 requires 4 parameters');
    this.minX = minX;
    this.minY = minY;
    this.maxX = maxX;
    this.maxY = maxY;
  }

  /*---------------------------------------------------------------------------*
   * Properties
   *---------------------------------------------------------------------------*/

  /**
   * The width of the bounds, defined as maxX - minX.
   */
  getWidth() {
    return this.maxX - this.minX;
  }
  get width() {
    return this.getWidth();
  }

  /**
   * The height of the bounds, defined as maxY - minY.
   */
  getHeight() {
    return this.maxY - this.minY;
  }
  get height() {
    return this.getHeight();
  }

  /*
   * Convenience positions
   * upper is in terms of the visual layout in Scenery and other programs, so the minY is the "upper", and minY is the "lower"
   *
   *             minX (x)     centerX        maxX
   *          ---------------------------------------
   * minY (y) | leftTop     centerTop     rightTop
   * centerY  | leftCenter  center        rightCenter
   * maxY     | leftBottom  centerBottom  rightBottom
   */

  /**
   * Alias for minX, when thinking of the bounds as an (x,y,width,height) rectangle.
   */
  getX() {
    return this.minX;
  }
  get x() {
    return this.getX();
  }

  /**
   * Alias for minY, when thinking of the bounds as an (x,y,width,height) rectangle.
   */
  getY() {
    return this.minY;
  }
  get y() {
    return this.getY();
  }

  /**
   * Alias for minX, supporting the explicit getter function style.
   */
  getMinX() {
    return this.minX;
  }

  /**
   * Alias for minY, supporting the explicit getter function style.
   */
  getMinY() {
    return this.minY;
  }

  /**
   * Alias for maxX, supporting the explicit getter function style.
   */
  getMaxX() {
    return this.maxX;
  }

  /**
   * Alias for maxY, supporting the explicit getter function style.
   */
  getMaxY() {
    return this.maxY;
  }

  /**
   * Alias for minX, when thinking in the UI-layout manner.
   */
  getLeft() {
    return this.minX;
  }
  get left() {
    return this.minX;
  }

  /**
   * Alias for minY, when thinking in the UI-layout manner.
   */
  getTop() {
    return this.minY;
  }
  get top() {
    return this.minY;
  }

  /**
   * Alias for maxX, when thinking in the UI-layout manner.
   */
  getRight() {
    return this.maxX;
  }
  get right() {
    return this.maxX;
  }

  /**
   * Alias for maxY, when thinking in the UI-layout manner.
   */
  getBottom() {
    return this.maxY;
  }
  get bottom() {
    return this.maxY;
  }

  /**
   * The horizontal (X-coordinate) center of the bounds, averaging the minX and maxX.
   */
  getCenterX() {
    return (this.maxX + this.minX) / 2;
  }
  get centerX() {
    return this.getCenterX();
  }

  /**
   * The vertical (Y-coordinate) center of the bounds, averaging the minY and maxY.
   */
  getCenterY() {
    return (this.maxY + this.minY) / 2;
  }
  get centerY() {
    return this.getCenterY();
  }

  /**
   * The point (minX, minY), in the UI-coordinate upper-left.
   */
  getLeftTop() {
    return new Vector2(this.minX, this.minY);
  }
  get leftTop() {
    return this.getLeftTop();
  }

  /**
   * The point (centerX, minY), in the UI-coordinate upper-center.
   */
  getCenterTop() {
    return new Vector2(this.getCenterX(), this.minY);
  }
  get centerTop() {
    return this.getCenterTop();
  }

  /**
   * The point (right, minY), in the UI-coordinate upper-right.
   */
  getRightTop() {
    return new Vector2(this.maxX, this.minY);
  }
  get rightTop() {
    return this.getRightTop();
  }

  /**
   * The point (left, centerY), in the UI-coordinate center-left.
   */
  getLeftCenter() {
    return new Vector2(this.minX, this.getCenterY());
  }
  get leftCenter() {
    return this.getLeftCenter();
  }

  /**
   * The point (centerX, centerY), in the center of the bounds.
   */
  getCenter() {
    return new Vector2(this.getCenterX(), this.getCenterY());
  }
  get center() {
    return this.getCenter();
  }

  /**
   * The point (maxX, centerY), in the UI-coordinate center-right
   */
  getRightCenter() {
    return new Vector2(this.maxX, this.getCenterY());
  }
  get rightCenter() {
    return this.getRightCenter();
  }

  /**
   * The point (minX, maxY), in the UI-coordinate lower-left
   */
  getLeftBottom() {
    return new Vector2(this.minX, this.maxY);
  }
  get leftBottom() {
    return this.getLeftBottom();
  }

  /**
   * The point (centerX, maxY), in the UI-coordinate lower-center
   */
  getCenterBottom() {
    return new Vector2(this.getCenterX(), this.maxY);
  }
  get centerBottom() {
    return this.getCenterBottom();
  }

  /**
   * The point (maxX, maxY), in the UI-coordinate lower-right
   */
  getRightBottom() {
    return new Vector2(this.maxX, this.maxY);
  }
  get rightBottom() {
    return this.getRightBottom();
  }

  /**
   * Whether we have negative width or height. Bounds2.NOTHING is a prime example of an empty Bounds2.
   * Bounds with width = height = 0 are considered not empty, since they include the single (0,0) point.
   */
  isEmpty() {
    return this.getWidth() < 0 || this.getHeight() < 0;
  }

  /**
   * Whether our minimums and maximums are all finite numbers. This will exclude Bounds2.NOTHING and Bounds2.EVERYTHING.
   */
  isFinite() {
    return isFinite(this.minX) && isFinite(this.minY) && isFinite(this.maxX) && isFinite(this.maxY);
  }

  /**
   * Whether this bounds has a non-zero area (non-zero positive width and height).
   */
  hasNonzeroArea() {
    return this.getWidth() > 0 && this.getHeight() > 0;
  }

  /**
   * Whether this bounds has a finite and non-negative width and height.
   */
  isValid() {
    return !this.isEmpty() && this.isFinite();
  }

  /**
   * If the position is inside the bounds, the position will be returned. Otherwise, this will return a new position
   * on the edge of the bounds that is the closest to the provided position.
   */
  closestPointTo(position) {
    if (this.containsCoordinates(position.x, position.y)) {
      return position;
    } else {
      const xConstrained = Math.max(Math.min(position.x, this.maxX), this.x);
      const yConstrained = Math.max(Math.min(position.y, this.maxY), this.y);
      return new Vector2(xConstrained, yConstrained);
    }
  }

  /**
   * Whether the coordinates are contained inside the bounding box, or are on the boundary.
   *
   * @param x - X coordinate of the point to check
   * @param y - Y coordinate of the point to check
   */
  containsCoordinates(x, y) {
    return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY;
  }

  /**
   * Whether the point is contained inside the bounding box, or is on the boundary.
   */
  containsPoint(point) {
    return this.containsCoordinates(point.x, point.y);
  }

  /**
   * Whether this bounding box completely contains the bounding box passed as a parameter. The boundary of a box is
   * considered to be "contained".
   */
  containsBounds(bounds) {
    return this.minX <= bounds.minX && this.maxX >= bounds.maxX && this.minY <= bounds.minY && this.maxY >= bounds.maxY;
  }

  /**
   * Whether this and another bounding box have any points of intersection (including touching boundaries).
   */
  intersectsBounds(bounds) {
    const minX = Math.max(this.minX, bounds.minX);
    const minY = Math.max(this.minY, bounds.minY);
    const maxX = Math.min(this.maxX, bounds.maxX);
    const maxY = Math.min(this.maxY, bounds.maxY);
    return maxX - minX >= 0 && maxY - minY >= 0;
  }

  /**
   * The squared distance from the input point to the point closest to it inside the bounding box.
   */
  minimumDistanceToPointSquared(point) {
    const closeX = point.x < this.minX ? this.minX : point.x > this.maxX ? this.maxX : null;
    const closeY = point.y < this.minY ? this.minY : point.y > this.maxY ? this.maxY : null;
    let d;
    if (closeX === null && closeY === null) {
      // inside, or on the boundary
      return 0;
    } else if (closeX === null) {
      // vertically directly above/below
      d = closeY - point.y;
      return d * d;
    } else if (closeY === null) {
      // horizontally directly to the left/right
      d = closeX - point.x;
      return d * d;
    } else {
      // corner case
      const dx = closeX - point.x;
      const dy = closeY - point.y;
      return dx * dx + dy * dy;
    }
  }

  /**
   * The squared distance from the input point to the point furthest from it inside the bounding box.
   */
  maximumDistanceToPointSquared(point) {
    let x = point.x > this.getCenterX() ? this.minX : this.maxX;
    let y = point.y > this.getCenterY() ? this.minY : this.maxY;
    x -= point.x;
    y -= point.y;
    return x * x + y * y;
  }

  /**
   * Debugging string for the bounds.
   */
  toString() {
    return `[x:(${this.minX},${this.maxX}),y:(${this.minY},${this.maxY})]`;
  }

  /**
   * Exact equality comparison between this bounds and another bounds.
   *
   * @returns - Whether the two bounds are equal
   */
  equals(other) {
    return this.minX === other.minX && this.minY === other.minY && this.maxX === other.maxX && this.maxY === other.maxY;
  }

  /**
   * Approximate equality comparison between this bounds and another bounds.
   *
   * @returns - Whether difference between the two bounds has no min/max with an absolute value greater
   *            than epsilon.
   */
  equalsEpsilon(other, epsilon) {
    epsilon = epsilon !== undefined ? epsilon : 0;
    const thisFinite = this.isFinite();
    const otherFinite = other.isFinite();
    if (thisFinite && otherFinite) {
      // both are finite, so we can use Math.abs() - it would fail with non-finite values like Infinity
      return Math.abs(this.minX - other.minX) < epsilon && Math.abs(this.minY - other.minY) < epsilon && Math.abs(this.maxX - other.maxX) < epsilon && Math.abs(this.maxY - other.maxY) < epsilon;
    } else if (thisFinite !== otherFinite) {
      return false; // one is finite, the other is not. definitely not equal
    } else if (this === other) {
      return true; // exact same instance, must be equal
    } else {
      // epsilon only applies on finite dimensions. due to JS's handling of isFinite(), it's faster to check the sum of both
      return (isFinite(this.minX + other.minX) ? Math.abs(this.minX - other.minX) < epsilon : this.minX === other.minX) && (isFinite(this.minY + other.minY) ? Math.abs(this.minY - other.minY) < epsilon : this.minY === other.minY) && (isFinite(this.maxX + other.maxX) ? Math.abs(this.maxX - other.maxX) < epsilon : this.maxX === other.maxX) && (isFinite(this.maxY + other.maxY) ? Math.abs(this.maxY - other.maxY) < epsilon : this.maxY === other.maxY);
    }
  }

  /*---------------------------------------------------------------------------*
   * Immutable operations
   *---------------------------------------------------------------------------*/

  /**
   * Creates a copy of this bounds, or if a bounds is passed in, set that bounds's values to ours.
   *
   * This is the immutable form of the function set(), if a bounds is provided. This will return a new bounds, and
   * will not modify this bounds.
   *
   * @param [bounds] - If not provided, creates a new Bounds2 with filled in values. Otherwise, fills in the
   *                   values of the provided bounds so that it equals this bounds.
   */
  copy(bounds) {
    if (bounds) {
      return bounds.set(this);
    } else {
      return b2(this.minX, this.minY, this.maxX, this.maxY);
    }
  }

  /**
   * The smallest bounds that contains both this bounds and the input bounds, returned as a copy.
   *
   * This is the immutable form of the function includeBounds(). This will return a new bounds, and will not modify
   * this bounds.
   */
  union(bounds) {
    return b2(Math.min(this.minX, bounds.minX), Math.min(this.minY, bounds.minY), Math.max(this.maxX, bounds.maxX), Math.max(this.maxY, bounds.maxY));
  }

  /**
   * The smallest bounds that is contained by both this bounds and the input bounds, returned as a copy.
   *
   * This is the immutable form of the function constrainBounds(). This will return a new bounds, and will not modify
   * this bounds.
   */
  intersection(bounds) {
    return b2(Math.max(this.minX, bounds.minX), Math.max(this.minY, bounds.minY), Math.min(this.maxX, bounds.maxX), Math.min(this.maxY, bounds.maxY));
  }

  // TODO: difference should be well-defined, but more logic is needed to compute

  /**
   * The smallest bounds that contains this bounds and the point (x,y), returned as a copy.
   *
   * This is the immutable form of the function addCoordinates(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withCoordinates(x, y) {
    return b2(Math.min(this.minX, x), Math.min(this.minY, y), Math.max(this.maxX, x), Math.max(this.maxY, y));
  }

  /**
   * The smallest bounds that contains this bounds and the input point, returned as a copy.
   *
   * This is the immutable form of the function addPoint(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withPoint(point) {
    return this.withCoordinates(point.x, point.y);
  }

  /**
   * Returns the smallest bounds that contains both this bounds and the x value provided.
   *
   * This is the immutable form of the function addX(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withX(x) {
    return this.copy().addX(x);
  }

  /**
   * Returns the smallest bounds that contains both this bounds and the y value provided.
   *
   * This is the immutable form of the function addY(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withY(y) {
    return this.copy().addY(y);
  }

  /**
   * A copy of this bounds, with minX replaced with the input.
   *
   * This is the immutable form of the function setMinX(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withMinX(minX) {
    return b2(minX, this.minY, this.maxX, this.maxY);
  }

  /**
   * A copy of this bounds, with minY replaced with the input.
   *
   * This is the immutable form of the function setMinY(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withMinY(minY) {
    return b2(this.minX, minY, this.maxX, this.maxY);
  }

  /**
   * A copy of this bounds, with maxX replaced with the input.
   *
   * This is the immutable form of the function setMaxX(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withMaxX(maxX) {
    return b2(this.minX, this.minY, maxX, this.maxY);
  }

  /**
   * A copy of this bounds, with maxY replaced with the input.
   *
   * This is the immutable form of the function setMaxY(). This will return a new bounds, and will not modify
   * this bounds.
   */
  withMaxY(maxY) {
    return b2(this.minX, this.minY, this.maxX, maxY);
  }

  /**
   * A copy of this bounds, with the minimum values rounded down to the nearest integer, and the maximum values
   * rounded up to the nearest integer. This causes the bounds to expand as necessary so that its boundaries
   * are integer-aligned.
   *
   * This is the immutable form of the function roundOut(). This will return a new bounds, and will not modify
   * this bounds.
   */
  roundedOut() {
    return b2(Math.floor(this.minX), Math.floor(this.minY), Math.ceil(this.maxX), Math.ceil(this.maxY));
  }

  /**
   * A copy of this bounds, with the minimum values rounded up to the nearest integer, and the maximum values
   * rounded down to the nearest integer. This causes the bounds to contract as necessary so that its boundaries
   * are integer-aligned.
   *
   * This is the immutable form of the function roundIn(). This will return a new bounds, and will not modify
   * this bounds.
   */
  roundedIn() {
    return b2(Math.ceil(this.minX), Math.ceil(this.minY), Math.floor(this.maxX), Math.floor(this.maxY));
  }

  /**
   * A bounding box (still axis-aligned) that contains the transformed shape of this bounds, applying the matrix as
   * an affine transformation.
   *
   * NOTE: bounds.transformed( matrix ).transformed( inverse ) may be larger than the original box, if it includes
   * a rotation that isn't a multiple of $\pi/2$. This is because the returned bounds may expand in area to cover
   * ALL of the corners of the transformed bounding box.
   *
   * This is the immutable form of the function transform(). This will return a new bounds, and will not modify
   * this bounds.
   */
  transformed(matrix) {
    return this.copy().transform(matrix);
  }

  /**
   * A bounding box that is expanded on all sides by the specified amount.)
   *
   * This is the immutable form of the function dilate(). This will return a new bounds, and will not modify
   * this bounds.
   */
  dilated(d) {
    return this.dilatedXY(d, d);
  }

  /**
   * A bounding box that is expanded horizontally (on the left and right) by the specified amount.
   *
   * This is the immutable form of the function dilateX(). This will return a new bounds, and will not modify
   * this bounds.
   */
  dilatedX(x) {
    return b2(this.minX - x, this.minY, this.maxX + x, this.maxY);
  }

  /**
   * A bounding box that is expanded vertically (on the top and bottom) by the specified amount.
   *
   * This is the immutable form of the function dilateY(). This will return a new bounds, and will not modify
   * this bounds.
   */
  dilatedY(y) {
    return b2(this.minX, this.minY - y, this.maxX, this.maxY + y);
  }

  /**
   * A bounding box that is expanded on all sides, with different amounts of expansion horizontally and vertically.
   * Will be identical to the bounds returned by calling bounds.dilatedX( x ).dilatedY( y ).
   *
   * This is the immutable form of the function dilateXY(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param x - Amount to dilate horizontally (for each side)
   * @param y - Amount to dilate vertically (for each side)
   */
  dilatedXY(x, y) {
    return b2(this.minX - x, this.minY - y, this.maxX + x, this.maxY + y);
  }

  /**
   * A bounding box that is contracted on all sides by the specified amount.
   *
   * This is the immutable form of the function erode(). This will return a new bounds, and will not modify
   * this bounds.
   */
  eroded(amount) {
    return this.dilated(-amount);
  }

  /**
   * A bounding box that is contracted horizontally (on the left and right) by the specified amount.
   *
   * This is the immutable form of the function erodeX(). This will return a new bounds, and will not modify
   * this bounds.
   */
  erodedX(x) {
    return this.dilatedX(-x);
  }

  /**
   * A bounding box that is contracted vertically (on the top and bottom) by the specified amount.
   *
   * This is the immutable form of the function erodeY(). This will return a new bounds, and will not modify
   * this bounds.
   */
  erodedY(y) {
    return this.dilatedY(-y);
  }

  /**
   * A bounding box that is contracted on all sides, with different amounts of contraction horizontally and vertically.
   *
   * This is the immutable form of the function erodeXY(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param x - Amount to erode horizontally (for each side)
   * @param y - Amount to erode vertically (for each side)
   */
  erodedXY(x, y) {
    return this.dilatedXY(-x, -y);
  }

  /**
   * A bounding box that is expanded by a specific amount on all sides (or if some offsets are negative, will contract
   * those sides).
   *
   * This is the immutable form of the function offset(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param left - Amount to expand to the left (subtracts from minX)
   * @param top - Amount to expand to the top (subtracts from minY)
   * @param right - Amount to expand to the right (adds to maxX)
   * @param bottom - Amount to expand to the bottom (adds to maxY)
   */
  withOffsets(left, top, right, bottom) {
    return b2(this.minX - left, this.minY - top, this.maxX + right, this.maxY + bottom);
  }

  /**
   * Our bounds, translated horizontally by x, returned as a copy.
   *
   * This is the immutable form of the function shiftX(). This will return a new bounds, and will not modify
   * this bounds.
   */
  shiftedX(x) {
    return b2(this.minX + x, this.minY, this.maxX + x, this.maxY);
  }

  /**
   * Our bounds, translated vertically by y, returned as a copy.
   *
   * This is the immutable form of the function shiftY(). This will return a new bounds, and will not modify
   * this bounds.
   */
  shiftedY(y) {
    return b2(this.minX, this.minY + y, this.maxX, this.maxY + y);
  }

  /**
   * Our bounds, translated by (x,y), returned as a copy.
   *
   * This is the immutable form of the function shift(). This will return a new bounds, and will not modify
   * this bounds.
   */
  shiftedXY(x, y) {
    return b2(this.minX + x, this.minY + y, this.maxX + x, this.maxY + y);
  }

  /**
   * Returns our bounds, translated by a vector, returned as a copy.
   */
  shifted(v) {
    return this.shiftedXY(v.x, v.y);
  }

  /**
   * Returns an interpolated value of this bounds and the argument.
   *
   * @param bounds
   * @param ratio - 0 will result in a copy of `this`, 1 will result in bounds, and in-between controls the
   *                         amount of each.
   */
  blend(bounds, ratio) {
    const t = 1 - ratio;
    return b2(t * this.minX + ratio * bounds.minX, t * this.minY + ratio * bounds.minY, t * this.maxX + ratio * bounds.maxX, t * this.maxY + ratio * bounds.maxY);
  }

  /*---------------------------------------------------------------------------*
   * Mutable operations
   *
   * All mutable operations should call one of the following:
   *   setMinMax, setMinX, setMinY, setMaxX, setMaxY
   *---------------------------------------------------------------------------*/

  /**
   * Sets each value for this bounds, and returns itself.
   */
  setMinMax(minX, minY, maxX, maxY) {
    this.minX = minX;
    this.minY = minY;
    this.maxX = maxX;
    this.maxY = maxY;
    return this;
  }

  /**
   * Sets the value of minX.
   *
   * This is the mutable form of the function withMinX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  setMinX(minX) {
    this.minX = minX;
    return this;
  }

  /**
   * Sets the value of minY.
   *
   * This is the mutable form of the function withMinY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  setMinY(minY) {
    this.minY = minY;
    return this;
  }

  /**
   * Sets the value of maxX.
   *
   * This is the mutable form of the function withMaxX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  setMaxX(maxX) {
    this.maxX = maxX;
    return this;
  }

  /**
   * Sets the value of maxY.
   *
   * This is the mutable form of the function withMaxY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  setMaxY(maxY) {
    this.maxY = maxY;
    return this;
  }

  /**
   * Sets the values of this bounds to be equal to the input bounds.
   *
   * This is the mutable form of the function copy(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  set(bounds) {
    return this.setMinMax(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY);
  }

  /**
   * Modifies this bounds so that it contains both its original bounds and the input bounds.
   *
   * This is the mutable form of the function union(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  includeBounds(bounds) {
    return this.setMinMax(Math.min(this.minX, bounds.minX), Math.min(this.minY, bounds.minY), Math.max(this.maxX, bounds.maxX), Math.max(this.maxY, bounds.maxY));
  }

  /**
   * Modifies this bounds so that it is the largest bounds contained both in its original bounds and in the input bounds.
   *
   * This is the mutable form of the function intersection(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  constrainBounds(bounds) {
    return this.setMinMax(Math.max(this.minX, bounds.minX), Math.max(this.minY, bounds.minY), Math.min(this.maxX, bounds.maxX), Math.min(this.maxY, bounds.maxY));
  }

  /**
   * Modifies this bounds so that it contains both its original bounds and the input point (x,y).
   *
   * This is the mutable form of the function withCoordinates(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  addCoordinates(x, y) {
    return this.setMinMax(Math.min(this.minX, x), Math.min(this.minY, y), Math.max(this.maxX, x), Math.max(this.maxY, y));
  }

  /**
   * Modifies this bounds so that it contains both its original bounds and the input point.
   *
   * This is the mutable form of the function withPoint(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  addPoint(point) {
    return this.addCoordinates(point.x, point.y);
  }

  /**
   * Modifies this bounds so that it is guaranteed to include the given x value (if it didn't already). If the x value
   * was already contained, nothing will be done.
   *
   * This is the mutable form of the function withX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  addX(x) {
    this.minX = Math.min(x, this.minX);
    this.maxX = Math.max(x, this.maxX);
    return this;
  }

  /**
   * Modifies this bounds so that it is guaranteed to include the given y value (if it didn't already). If the y value
   * was already contained, nothing will be done.
   *
   * This is the mutable form of the function withY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  addY(y) {
    this.minY = Math.min(y, this.minY);
    this.maxY = Math.max(y, this.maxY);
    return this;
  }

  /**
   * Modifies this bounds so that its boundaries are integer-aligned, rounding the minimum boundaries down and the
   * maximum boundaries up (expanding as necessary).
   *
   * This is the mutable form of the function roundedOut(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  roundOut() {
    return this.setMinMax(Math.floor(this.minX), Math.floor(this.minY), Math.ceil(this.maxX), Math.ceil(this.maxY));
  }

  /**
   * Modifies this bounds so that its boundaries are integer-aligned, rounding the minimum boundaries up and the
   * maximum boundaries down (contracting as necessary).
   *
   * This is the mutable form of the function roundedIn(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  roundIn() {
    return this.setMinMax(Math.ceil(this.minX), Math.ceil(this.minY), Math.floor(this.maxX), Math.floor(this.maxY));
  }

  /**
   * Modifies this bounds so that it would fully contain a transformed version if its previous value, applying the
   * matrix as an affine transformation.
   *
   * NOTE: bounds.transform( matrix ).transform( inverse ) may be larger than the original box, if it includes
   * a rotation that isn't a multiple of $\pi/2$. This is because the bounds may expand in area to cover
   * ALL of the corners of the transformed bounding box.
   *
   * This is the mutable form of the function transformed(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  transform(matrix) {
    // if we contain no area, no change is needed
    if (this.isEmpty()) {
      return this;
    }

    // optimization to bail for identity matrices
    if (matrix.isIdentity()) {
      return this;
    }
    const minX = this.minX;
    const minY = this.minY;
    const maxX = this.maxX;
    const maxY = this.maxY;
    this.set(Bounds2.NOTHING);

    // using mutable vector so we don't create excessive instances of Vector2 during this
    // make sure all 4 corners are inside this transformed bounding box

    this.addPoint(matrix.multiplyVector2(scratchVector2.setXY(minX, minY)));
    this.addPoint(matrix.multiplyVector2(scratchVector2.setXY(minX, maxY)));
    this.addPoint(matrix.multiplyVector2(scratchVector2.setXY(maxX, minY)));
    this.addPoint(matrix.multiplyVector2(scratchVector2.setXY(maxX, maxY)));
    return this;
  }

  /**
   * Expands this bounds on all sides by the specified amount.
   *
   * This is the mutable form of the function dilated(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  dilate(d) {
    return this.dilateXY(d, d);
  }

  /**
   * Expands this bounds horizontally (left and right) by the specified amount.
   *
   * This is the mutable form of the function dilatedX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  dilateX(x) {
    return this.setMinMax(this.minX - x, this.minY, this.maxX + x, this.maxY);
  }

  /**
   * Expands this bounds vertically (top and bottom) by the specified amount.
   *
   * This is the mutable form of the function dilatedY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  dilateY(y) {
    return this.setMinMax(this.minX, this.minY - y, this.maxX, this.maxY + y);
  }

  /**
   * Expands this bounds independently in the horizontal and vertical directions. Will be equal to calling
   * bounds.dilateX( x ).dilateY( y ).
   *
   * This is the mutable form of the function dilatedXY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  dilateXY(x, y) {
    return this.setMinMax(this.minX - x, this.minY - y, this.maxX + x, this.maxY + y);
  }

  /**
   * Contracts this bounds on all sides by the specified amount.
   *
   * This is the mutable form of the function eroded(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  erode(d) {
    return this.dilate(-d);
  }

  /**
   * Contracts this bounds horizontally (left and right) by the specified amount.
   *
   * This is the mutable form of the function erodedX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  erodeX(x) {
    return this.dilateX(-x);
  }

  /**
   * Contracts this bounds vertically (top and bottom) by the specified amount.
   *
   * This is the mutable form of the function erodedY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  erodeY(y) {
    return this.dilateY(-y);
  }

  /**
   * Contracts this bounds independently in the horizontal and vertical directions. Will be equal to calling
   * bounds.erodeX( x ).erodeY( y ).
   *
   * This is the mutable form of the function erodedXY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  erodeXY(x, y) {
    return this.dilateXY(-x, -y);
  }

  /**
   * Expands this bounds independently for each side (or if some offsets are negative, will contract those sides).
   *
   * This is the mutable form of the function withOffsets(). This will mutate (change) this bounds, in addition to
   * returning this bounds itself.
   *
   * @param left - Amount to expand to the left (subtracts from minX)
   * @param top - Amount to expand to the top (subtracts from minY)
   * @param right - Amount to expand to the right (adds to maxX)
   * @param bottom - Amount to expand to the bottom (adds to maxY)
   */
  offset(left, top, right, bottom) {
    return b2(this.minX - left, this.minY - top, this.maxX + right, this.maxY + bottom);
  }

  /**
   * Translates our bounds horizontally by x.
   *
   * This is the mutable form of the function shiftedX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  shiftX(x) {
    return this.setMinMax(this.minX + x, this.minY, this.maxX + x, this.maxY);
  }

  /**
   * Translates our bounds vertically by y.
   *
   * This is the mutable form of the function shiftedY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  shiftY(y) {
    return this.setMinMax(this.minX, this.minY + y, this.maxX, this.maxY + y);
  }

  /**
   * Translates our bounds by (x,y).
   *
   * This is the mutable form of the function shifted(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   */
  shiftXY(x, y) {
    return this.setMinMax(this.minX + x, this.minY + y, this.maxX + x, this.maxY + y);
  }

  /**
   * Translates our bounds by the given vector.
   */
  shift(v) {
    return this.shiftXY(v.x, v.y);
  }

  /**
   * Returns the range of the x-values of this bounds.
   */
  getXRange() {
    return new js_Range(this.minX, this.maxX);
  }

  /**
   * Sets the x-range of this bounds.
   */
  setXRange(range) {
    return this.setMinMax(range.min, this.minY, range.max, this.maxY);
  }
  get xRange() {
    return this.getXRange();
  }
  set xRange(range) {
    this.setXRange(range);
  }

  /**
   * Returns the range of the y-values of this bounds.
   */
  getYRange() {
    return new js_Range(this.minY, this.maxY);
  }

  /**
   * Sets the y-range of this bounds.
   */
  setYRange(range) {
    return this.setMinMax(this.minX, range.min, this.maxX, range.max);
  }
  get yRange() {
    return this.getYRange();
  }
  set yRange(range) {
    this.setYRange(range);
  }

  /**
   * Find a point in the bounds closest to the specified point.
   *
   * @param x - X coordinate of the point to test.
   * @param y - Y coordinate of the point to test.
   * @param [result] - Vector2 that can store the return value to avoid allocations.
   */
  getClosestPoint(x, y, result) {
    if (result) {
      result.setXY(x, y);
    } else {
      result = new Vector2(x, y);
    }
    if (result.x < this.minX) {
      result.x = this.minX;
    }
    if (result.x > this.maxX) {
      result.x = this.maxX;
    }
    if (result.y < this.minY) {
      result.y = this.minY;
    }
    if (result.y > this.maxY) {
      result.y = this.maxY;
    }
    return result;
  }
  freeToPool() {
    Bounds2.pool.freeToPool(this);
  }
  static pool = new Pool(Bounds2, {
    initialize: Bounds2.prototype.setMinMax,
    defaultArguments: [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY]
  });

  /**
   * Returns a new Bounds2 object, with the familiar rectangle construction with x, y, width, and height.
   *
   * @param x - The minimum value of X for the bounds.
   * @param y - The minimum value of Y for the bounds.
   * @param width - The width (maxX - minX) of the bounds.
   * @param height - The height (maxY - minY) of the bounds.
   */
  static rect(x, y, width, height) {
    return b2(x, y, x + width, y + height);
  }

  /**
   * Returns a new Bounds2 object with a given orientation (min/max specified for both the given (primary) orientation,
   * and also the secondary orientation).
   */
  static oriented(orientation, minPrimary, minSecondary, maxPrimary, maxSecondary) {
    return orientation === js_Orientation.HORIZONTAL ? new Bounds2(minPrimary, minSecondary, maxPrimary, maxSecondary) : new Bounds2(minSecondary, minPrimary, maxSecondary, maxPrimary);
  }

  /**
   * Returns a new Bounds2 object that only contains the specified point (x,y). Useful for being dilated to form a
   * bounding box around a point. Note that the bounds will not be "empty" as it contains (x,y), but it will have
   * zero area. The x and y coordinates can be specified by numbers or with at Vector2
   *
   * @param x
   * @param y
   */

  // eslint-disable-line @typescript-eslint/explicit-member-accessibility
  static point(x, y) {
    // eslint-disable-line @typescript-eslint/explicit-member-accessibility
    if (x instanceof Vector2) {
      const p = x;
      return b2(p.x, p.y, p.x, p.y);
    } else {
      return b2(x, y, x, y);
    }
  }

  // Helps to identify the dimension of the bounds

  /**
   * A constant Bounds2 with minimums = $\infty$, maximums = $-\infty$, so that it represents "no bounds whatsoever".
   *
   * This allows us to take the union (union/includeBounds) of this and any other Bounds2 to get the other bounds back,
   * e.g. Bounds2.NOTHING.union( bounds ).equals( bounds ). This object naturally serves as the base case as a union of
   * zero bounds objects.
   *
   * Additionally, intersections with NOTHING will always return a Bounds2 equivalent to NOTHING.
   */
  static NOTHING = new Bounds2(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);

  /**
   * A constant Bounds2 with minimums = $-\infty$, maximums = $\infty$, so that it represents "all bounds".
   *
   * This allows us to take the intersection (intersection/constrainBounds) of this and any other Bounds2 to get the
   * other bounds back, e.g. Bounds2.EVERYTHING.intersection( bounds ).equals( bounds ). This object naturally serves as
   * the base case as an intersection of zero bounds objects.
   *
   * Additionally, unions with EVERYTHING will always return a Bounds2 equivalent to EVERYTHING.
   */
  static EVERYTHING = new Bounds2(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);
  static Bounds2IO = new IOType('Bounds2IO', {
    valueType: Bounds2,
    documentation: 'a 2-dimensional bounds rectangle',
    toStateObject: bounds2 => ({
      minX: bounds2.minX,
      minY: bounds2.minY,
      maxX: bounds2.maxX,
      maxY: bounds2.maxY
    }),
    fromStateObject: stateObject => {
      return new Bounds2(types_InfiniteNumberIO.fromStateObject(stateObject.minX), types_InfiniteNumberIO.fromStateObject(stateObject.minY), types_InfiniteNumberIO.fromStateObject(stateObject.maxX), types_InfiniteNumberIO.fromStateObject(stateObject.maxY));
    },
    stateSchema: {
      minX: types_InfiniteNumberIO,
      maxX: types_InfiniteNumberIO,
      minY: types_InfiniteNumberIO,
      maxY: types_InfiniteNumberIO
    }
  });
}
js_dot.register('Bounds2', Bounds2);
const b2 = Bounds2.pool.create.bind(Bounds2.pool);
js_dot.register('b2', b2);
Bounds2.prototype.isBounds = true;
Bounds2.prototype.dimension = 2;
function catchImmutableSetterLowHangingFruit(bounds) {
  bounds.setMinMax = () => {
    throw new Error('Attempt to set "setMinMax" of an immutable Bounds2 object');
  };
  bounds.set = () => {
    throw new Error('Attempt to set "set" of an immutable Bounds2 object');
  };
  bounds.includeBounds = () => {
    throw new Error('Attempt to set "includeBounds" of an immutable Bounds2 object');
  };
  bounds.constrainBounds = () => {
    throw new Error('Attempt to set "constrainBounds" of an immutable Bounds2 object');
  };
  bounds.addCoordinates = () => {
    throw new Error('Attempt to set "addCoordinates" of an immutable Bounds2 object');
  };
  bounds.transform = () => {
    throw new Error('Attempt to set "transform" of an immutable Bounds2 object');
  };
}
if (assert) {
  catchImmutableSetterLowHangingFruit(Bounds2.EVERYTHING);
  catchImmutableSetterLowHangingFruit(Bounds2.NOTHING);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJT1R5cGUiLCJJbmZpbml0ZU51bWJlcklPIiwiVmVjdG9yMiIsImRvdCIsIlJhbmdlIiwiUG9vbCIsIk9yaWVudGF0aW9uIiwic2NyYXRjaFZlY3RvcjIiLCJCb3VuZHMyIiwiY29uc3RydWN0b3IiLCJtaW5YIiwibWluWSIsIm1heFgiLCJtYXhZIiwiYXNzZXJ0IiwidW5kZWZpbmVkIiwiZ2V0V2lkdGgiLCJ3aWR0aCIsImdldEhlaWdodCIsImhlaWdodCIsImdldFgiLCJ4IiwiZ2V0WSIsInkiLCJnZXRNaW5YIiwiZ2V0TWluWSIsImdldE1heFgiLCJnZXRNYXhZIiwiZ2V0TGVmdCIsImxlZnQiLCJnZXRUb3AiLCJ0b3AiLCJnZXRSaWdodCIsInJpZ2h0IiwiZ2V0Qm90dG9tIiwiYm90dG9tIiwiZ2V0Q2VudGVyWCIsImNlbnRlclgiLCJnZXRDZW50ZXJZIiwiY2VudGVyWSIsImdldExlZnRUb3AiLCJsZWZ0VG9wIiwiZ2V0Q2VudGVyVG9wIiwiY2VudGVyVG9wIiwiZ2V0UmlnaHRUb3AiLCJyaWdodFRvcCIsImdldExlZnRDZW50ZXIiLCJsZWZ0Q2VudGVyIiwiZ2V0Q2VudGVyIiwiY2VudGVyIiwiZ2V0UmlnaHRDZW50ZXIiLCJyaWdodENlbnRlciIsImdldExlZnRCb3R0b20iLCJsZWZ0Qm90dG9tIiwiZ2V0Q2VudGVyQm90dG9tIiwiY2VudGVyQm90dG9tIiwiZ2V0UmlnaHRCb3R0b20iLCJyaWdodEJvdHRvbSIsImlzRW1wdHkiLCJpc0Zpbml0ZSIsImhhc05vbnplcm9BcmVhIiwiaXNWYWxpZCIsImNsb3Nlc3RQb2ludFRvIiwicG9zaXRpb24iLCJjb250YWluc0Nvb3JkaW5hdGVzIiwieENvbnN0cmFpbmVkIiwiTWF0aCIsIm1heCIsIm1pbiIsInlDb25zdHJhaW5lZCIsImNvbnRhaW5zUG9pbnQiLCJwb2ludCIsImNvbnRhaW5zQm91bmRzIiwiYm91bmRzIiwiaW50ZXJzZWN0c0JvdW5kcyIsIm1pbmltdW1EaXN0YW5jZVRvUG9pbnRTcXVhcmVkIiwiY2xvc2VYIiwiY2xvc2VZIiwiZCIsImR4IiwiZHkiLCJtYXhpbXVtRGlzdGFuY2VUb1BvaW50U3F1YXJlZCIsInRvU3RyaW5nIiwiZXF1YWxzIiwib3RoZXIiLCJlcXVhbHNFcHNpbG9uIiwiZXBzaWxvbiIsInRoaXNGaW5pdGUiLCJvdGhlckZpbml0ZSIsImFicyIsImNvcHkiLCJzZXQiLCJiMiIsInVuaW9uIiwiaW50ZXJzZWN0aW9uIiwid2l0aENvb3JkaW5hdGVzIiwid2l0aFBvaW50Iiwid2l0aFgiLCJhZGRYIiwid2l0aFkiLCJhZGRZIiwid2l0aE1pblgiLCJ3aXRoTWluWSIsIndpdGhNYXhYIiwid2l0aE1heFkiLCJyb3VuZGVkT3V0IiwiZmxvb3IiLCJjZWlsIiwicm91bmRlZEluIiwidHJhbnNmb3JtZWQiLCJtYXRyaXgiLCJ0cmFuc2Zvcm0iLCJkaWxhdGVkIiwiZGlsYXRlZFhZIiwiZGlsYXRlZFgiLCJkaWxhdGVkWSIsImVyb2RlZCIsImFtb3VudCIsImVyb2RlZFgiLCJlcm9kZWRZIiwiZXJvZGVkWFkiLCJ3aXRoT2Zmc2V0cyIsInNoaWZ0ZWRYIiwic2hpZnRlZFkiLCJzaGlmdGVkWFkiLCJzaGlmdGVkIiwidiIsImJsZW5kIiwicmF0aW8iLCJ0Iiwic2V0TWluTWF4Iiwic2V0TWluWCIsInNldE1pblkiLCJzZXRNYXhYIiwic2V0TWF4WSIsImluY2x1ZGVCb3VuZHMiLCJjb25zdHJhaW5Cb3VuZHMiLCJhZGRDb29yZGluYXRlcyIsImFkZFBvaW50Iiwicm91bmRPdXQiLCJyb3VuZEluIiwiaXNJZGVudGl0eSIsIk5PVEhJTkciLCJtdWx0aXBseVZlY3RvcjIiLCJzZXRYWSIsImRpbGF0ZSIsImRpbGF0ZVhZIiwiZGlsYXRlWCIsImRpbGF0ZVkiLCJlcm9kZSIsImVyb2RlWCIsImVyb2RlWSIsImVyb2RlWFkiLCJvZmZzZXQiLCJzaGlmdFgiLCJzaGlmdFkiLCJzaGlmdFhZIiwic2hpZnQiLCJnZXRYUmFuZ2UiLCJzZXRYUmFuZ2UiLCJyYW5nZSIsInhSYW5nZSIsImdldFlSYW5nZSIsInNldFlSYW5nZSIsInlSYW5nZSIsImdldENsb3Nlc3RQb2ludCIsInJlc3VsdCIsImZyZWVUb1Bvb2wiLCJwb29sIiwiaW5pdGlhbGl6ZSIsInByb3RvdHlwZSIsImRlZmF1bHRBcmd1bWVudHMiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsIk5FR0FUSVZFX0lORklOSVRZIiwicmVjdCIsIm9yaWVudGVkIiwib3JpZW50YXRpb24iLCJtaW5QcmltYXJ5IiwibWluU2Vjb25kYXJ5IiwibWF4UHJpbWFyeSIsIm1heFNlY29uZGFyeSIsIkhPUklaT05UQUwiLCJwIiwiRVZFUllUSElORyIsIkJvdW5kczJJTyIsInZhbHVlVHlwZSIsImRvY3VtZW50YXRpb24iLCJ0b1N0YXRlT2JqZWN0IiwiYm91bmRzMiIsImZyb21TdGF0ZU9iamVjdCIsInN0YXRlT2JqZWN0Iiwic3RhdGVTY2hlbWEiLCJyZWdpc3RlciIsImNyZWF0ZSIsImJpbmQiLCJpc0JvdW5kcyIsImRpbWVuc2lvbiIsImNhdGNoSW1tdXRhYmxlU2V0dGVyTG93SGFuZ2luZ0ZydWl0IiwiRXJyb3IiXSwic291cmNlcyI6WyJCb3VuZHMyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEEgMkQgcmVjdGFuZ2xlLXNoYXBlZCBib3VuZGVkIGFyZWEgKGJvdW5kaW5nIGJveCkuXG4gKlxuICogVGhlcmUgYXJlIGEgbnVtYmVyIG9mIGNvbnZlbmllbmNlIGZ1bmN0aW9ucyB0byBnZXQgcG9zaXRpb25zIGFuZCBwb2ludHMgb24gdGhlIEJvdW5kcy4gQ3VycmVudGx5IHdlIGRvIG5vdFxuICogc3RvcmUgdGhlc2Ugd2l0aCB0aGUgQm91bmRzMiBpbnN0YW5jZSwgc2luY2Ugd2Ugd2FudCB0byBsb3dlciB0aGUgbWVtb3J5IGZvb3RwcmludC5cbiAqXG4gKiBtaW5YLCBtaW5ZLCBtYXhYLCBhbmQgbWF4WSBhcmUgYWN0dWFsbHkgc3RvcmVkLiBXZSBkb24ndCBkbyB4LHksd2lkdGgsaGVpZ2h0IGJlY2F1c2UgdGhpcyBjYW4ndCBwcm9wZXJseSBleHByZXNzXG4gKiBzZW1pLWluZmluaXRlIGJvdW5kcyAobGlrZSBhIGhhbGYtcGxhbmUpLCBvciBlYXNpbHkgaGFuZGxlIHdoYXQgQm91bmRzMi5OT1RISU5HIGFuZCBCb3VuZHMyLkVWRVJZVEhJTkcgZG8gd2l0aFxuICogdGhlIGNvbnN0cnVjdGl2ZSBzb2xpZCBhcmVhcy5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IElPVHlwZSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvSU9UeXBlLmpzJztcbmltcG9ydCBJbmZpbml0ZU51bWJlcklPLCB7IEluZmluaXRlTnVtYmVyU3RhdGVPYmplY3QgfSBmcm9tICcuLi8uLi90YW5kZW0vanMvdHlwZXMvSW5maW5pdGVOdW1iZXJJTy5qcyc7XG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuL1ZlY3RvcjIuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgTWF0cml4MyBmcm9tICcuL01hdHJpeDMuanMnO1xuaW1wb3J0IFJhbmdlIGZyb20gJy4vUmFuZ2UuanMnO1xuaW1wb3J0IFBvb2wsIHsgVFBvb2xhYmxlIH0gZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL1Bvb2wuanMnO1xuaW1wb3J0IE9yaWVudGF0aW9uIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9PcmllbnRhdGlvbi5qcyc7XG5cbi8vIFRlbXBvcmFyeSBpbnN0YW5jZXMgdG8gYmUgdXNlZCBpbiB0aGUgdHJhbnNmb3JtIG1ldGhvZC5cbmNvbnN0IHNjcmF0Y2hWZWN0b3IyID0gbmV3IFZlY3RvcjIoIDAsIDAgKTtcblxuZXhwb3J0IHR5cGUgQm91bmRzMlN0YXRlT2JqZWN0ID0ge1xuICBtaW5YOiBJbmZpbml0ZU51bWJlclN0YXRlT2JqZWN0O1xuICBtaW5ZOiBJbmZpbml0ZU51bWJlclN0YXRlT2JqZWN0O1xuICBtYXhYOiBJbmZpbml0ZU51bWJlclN0YXRlT2JqZWN0O1xuICBtYXhZOiBJbmZpbml0ZU51bWJlclN0YXRlT2JqZWN0O1xufTtcblxuLy8gVE9ETzogV2h5IGRvZXMgZnJlZVRvUG9vbCBnZXQgcHJvbW90ZWQsIGJ1dCBub3RoaW5nIGVsc2U/IGh0dHBzOi8vZ2l0aHViLmNvbS9waGV0c2ltcy9waGV0LWNvcmUvaXNzdWVzLzEwM1xuLy8gVE9ETzogRG8gd2UgbmVlZCBUUG9vbGFibGU/IENhbiBjbGFzc2VzIGp1c3QgaGF2ZSBhIHN0YXRpYyBwb29sIG1ldGhvZD8gaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL3BoZXQtY29yZS9pc3N1ZXMvMTAzXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCb3VuZHMyIGltcGxlbWVudHMgVFBvb2xhYmxlIHtcblxuICAvLyBUaGUgbWluaW11bSBYIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgcHVibGljIG1pblg6IG51bWJlcjtcblxuICAvLyBUaGUgbWluaW11bSBZIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgcHVibGljIG1pblk6IG51bWJlcjtcblxuICAvLyBUaGUgbWF4aW11bSBYIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgcHVibGljIG1heFg6IG51bWJlcjtcblxuICAvLyBUaGUgbWF4aW11bSBZIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgcHVibGljIG1heFk6IG51bWJlcjtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIDItZGltZW5zaW9uYWwgYm91bmRzIChib3VuZGluZyBib3gpLlxuICAgKlxuICAgKiBAcGFyYW0gbWluWCAtIFRoZSBpbml0aWFsIG1pbmltdW0gWCBjb29yZGluYXRlIG9mIHRoZSBib3VuZHMuXG4gICAqIEBwYXJhbSBtaW5ZIC0gVGhlIGluaXRpYWwgbWluaW11bSBZIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgICogQHBhcmFtIG1heFggLSBUaGUgaW5pdGlhbCBtYXhpbXVtIFggY29vcmRpbmF0ZSBvZiB0aGUgYm91bmRzLlxuICAgKiBAcGFyYW0gbWF4WSAtIFRoZSBpbml0aWFsIG1heGltdW0gWSBjb29yZGluYXRlIG9mIHRoZSBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoIG1pblg6IG51bWJlciwgbWluWTogbnVtYmVyLCBtYXhYOiBudW1iZXIsIG1heFk6IG51bWJlciApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYXhZICE9PSB1bmRlZmluZWQsICdCb3VuZHMyIHJlcXVpcmVzIDQgcGFyYW1ldGVycycgKTtcblxuICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgdGhpcy5taW5ZID0gbWluWTtcbiAgICB0aGlzLm1heFggPSBtYXhYO1xuICAgIHRoaXMubWF4WSA9IG1heFk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogUHJvcGVydGllc1xuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFRoZSB3aWR0aCBvZiB0aGUgYm91bmRzLCBkZWZpbmVkIGFzIG1heFggLSBtaW5YLlxuICAgKi9cbiAgcHVibGljIGdldFdpZHRoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLm1heFggLSB0aGlzLm1pblg7IH1cblxuICBwdWJsaWMgZ2V0IHdpZHRoKCk6IG51bWJlciB7IHJldHVybiB0aGlzLmdldFdpZHRoKCk7IH1cblxuICAvKipcbiAgICogVGhlIGhlaWdodCBvZiB0aGUgYm91bmRzLCBkZWZpbmVkIGFzIG1heFkgLSBtaW5ZLlxuICAgKi9cbiAgcHVibGljIGdldEhlaWdodCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5tYXhZIC0gdGhpcy5taW5ZOyB9XG5cbiAgcHVibGljIGdldCBoZWlnaHQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZ2V0SGVpZ2h0KCk7IH1cblxuICAvKlxuICAgKiBDb252ZW5pZW5jZSBwb3NpdGlvbnNcbiAgICogdXBwZXIgaXMgaW4gdGVybXMgb2YgdGhlIHZpc3VhbCBsYXlvdXQgaW4gU2NlbmVyeSBhbmQgb3RoZXIgcHJvZ3JhbXMsIHNvIHRoZSBtaW5ZIGlzIHRoZSBcInVwcGVyXCIsIGFuZCBtaW5ZIGlzIHRoZSBcImxvd2VyXCJcbiAgICpcbiAgICogICAgICAgICAgICAgbWluWCAoeCkgICAgIGNlbnRlclggICAgICAgIG1heFhcbiAgICogICAgICAgICAgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gICAqIG1pblkgKHkpIHwgbGVmdFRvcCAgICAgY2VudGVyVG9wICAgICByaWdodFRvcFxuICAgKiBjZW50ZXJZICB8IGxlZnRDZW50ZXIgIGNlbnRlciAgICAgICAgcmlnaHRDZW50ZXJcbiAgICogbWF4WSAgICAgfCBsZWZ0Qm90dG9tICBjZW50ZXJCb3R0b20gIHJpZ2h0Qm90dG9tXG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWCwgd2hlbiB0aGlua2luZyBvZiB0aGUgYm91bmRzIGFzIGFuICh4LHksd2lkdGgsaGVpZ2h0KSByZWN0YW5nbGUuXG4gICAqL1xuICBwdWJsaWMgZ2V0WCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5taW5YOyB9XG5cbiAgcHVibGljIGdldCB4KCk6IG51bWJlciB7IHJldHVybiB0aGlzLmdldFgoKTsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWSwgd2hlbiB0aGlua2luZyBvZiB0aGUgYm91bmRzIGFzIGFuICh4LHksd2lkdGgsaGVpZ2h0KSByZWN0YW5nbGUuXG4gICAqL1xuICBwdWJsaWMgZ2V0WSgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5taW5ZOyB9XG5cbiAgcHVibGljIGdldCB5KCk6IG51bWJlciB7IHJldHVybiB0aGlzLmdldFkoKTsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWCwgc3VwcG9ydGluZyB0aGUgZXhwbGljaXQgZ2V0dGVyIGZ1bmN0aW9uIHN0eWxlLlxuICAgKi9cbiAgcHVibGljIGdldE1pblgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWluWDsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWSwgc3VwcG9ydGluZyB0aGUgZXhwbGljaXQgZ2V0dGVyIGZ1bmN0aW9uIHN0eWxlLlxuICAgKi9cbiAgcHVibGljIGdldE1pblkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWluWTsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWF4WCwgc3VwcG9ydGluZyB0aGUgZXhwbGljaXQgZ2V0dGVyIGZ1bmN0aW9uIHN0eWxlLlxuICAgKi9cbiAgcHVibGljIGdldE1heFgoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWF4WDsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWF4WSwgc3VwcG9ydGluZyB0aGUgZXhwbGljaXQgZ2V0dGVyIGZ1bmN0aW9uIHN0eWxlLlxuICAgKi9cbiAgcHVibGljIGdldE1heFkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWF4WTsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWCwgd2hlbiB0aGlua2luZyBpbiB0aGUgVUktbGF5b3V0IG1hbm5lci5cbiAgICovXG4gIHB1YmxpYyBnZXRMZWZ0KCk6IG51bWJlciB7IHJldHVybiB0aGlzLm1pblg7IH1cblxuICBwdWJsaWMgZ2V0IGxlZnQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWluWDsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWSwgd2hlbiB0aGlua2luZyBpbiB0aGUgVUktbGF5b3V0IG1hbm5lci5cbiAgICovXG4gIHB1YmxpYyBnZXRUb3AoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWluWTsgfVxuXG4gIHB1YmxpYyBnZXQgdG9wKCk6IG51bWJlciB7IHJldHVybiB0aGlzLm1pblk7IH1cblxuICAvKipcbiAgICogQWxpYXMgZm9yIG1heFgsIHdoZW4gdGhpbmtpbmcgaW4gdGhlIFVJLWxheW91dCBtYW5uZXIuXG4gICAqL1xuICBwdWJsaWMgZ2V0UmlnaHQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWF4WDsgfVxuXG4gIHB1YmxpYyBnZXQgcmlnaHQoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWF4WDsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWF4WSwgd2hlbiB0aGlua2luZyBpbiB0aGUgVUktbGF5b3V0IG1hbm5lci5cbiAgICovXG4gIHB1YmxpYyBnZXRCb3R0b20oKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMubWF4WTsgfVxuXG4gIHB1YmxpYyBnZXQgYm90dG9tKCk6IG51bWJlciB7IHJldHVybiB0aGlzLm1heFk7IH1cblxuICAvKipcbiAgICogVGhlIGhvcml6b250YWwgKFgtY29vcmRpbmF0ZSkgY2VudGVyIG9mIHRoZSBib3VuZHMsIGF2ZXJhZ2luZyB0aGUgbWluWCBhbmQgbWF4WC5cbiAgICovXG4gIHB1YmxpYyBnZXRDZW50ZXJYKCk6IG51bWJlciB7IHJldHVybiAoIHRoaXMubWF4WCArIHRoaXMubWluWCApIC8gMjsgfVxuXG4gIHB1YmxpYyBnZXQgY2VudGVyWCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5nZXRDZW50ZXJYKCk7IH1cblxuICAvKipcbiAgICogVGhlIHZlcnRpY2FsIChZLWNvb3JkaW5hdGUpIGNlbnRlciBvZiB0aGUgYm91bmRzLCBhdmVyYWdpbmcgdGhlIG1pblkgYW5kIG1heFkuXG4gICAqL1xuICBwdWJsaWMgZ2V0Q2VudGVyWSgpOiBudW1iZXIgeyByZXR1cm4gKCB0aGlzLm1heFkgKyB0aGlzLm1pblkgKSAvIDI7IH1cblxuICBwdWJsaWMgZ2V0IGNlbnRlclkoKTogbnVtYmVyIHsgcmV0dXJuIHRoaXMuZ2V0Q2VudGVyWSgpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBwb2ludCAobWluWCwgbWluWSksIGluIHRoZSBVSS1jb29yZGluYXRlIHVwcGVyLWxlZnQuXG4gICAqL1xuICBwdWJsaWMgZ2V0TGVmdFRvcCgpOiBWZWN0b3IyIHsgcmV0dXJuIG5ldyBWZWN0b3IyKCB0aGlzLm1pblgsIHRoaXMubWluWSApOyB9XG5cbiAgcHVibGljIGdldCBsZWZ0VG9wKCk6IFZlY3RvcjIgeyByZXR1cm4gdGhpcy5nZXRMZWZ0VG9wKCk7IH1cblxuICAvKipcbiAgICogVGhlIHBvaW50IChjZW50ZXJYLCBtaW5ZKSwgaW4gdGhlIFVJLWNvb3JkaW5hdGUgdXBwZXItY2VudGVyLlxuICAgKi9cbiAgcHVibGljIGdldENlbnRlclRvcCgpOiBWZWN0b3IyIHsgcmV0dXJuIG5ldyBWZWN0b3IyKCB0aGlzLmdldENlbnRlclgoKSwgdGhpcy5taW5ZICk7IH1cblxuICBwdWJsaWMgZ2V0IGNlbnRlclRvcCgpOiBWZWN0b3IyIHsgcmV0dXJuIHRoaXMuZ2V0Q2VudGVyVG9wKCk7IH1cblxuICAvKipcbiAgICogVGhlIHBvaW50IChyaWdodCwgbWluWSksIGluIHRoZSBVSS1jb29yZGluYXRlIHVwcGVyLXJpZ2h0LlxuICAgKi9cbiAgcHVibGljIGdldFJpZ2h0VG9wKCk6IFZlY3RvcjIgeyByZXR1cm4gbmV3IFZlY3RvcjIoIHRoaXMubWF4WCwgdGhpcy5taW5ZICk7IH1cblxuICBwdWJsaWMgZ2V0IHJpZ2h0VG9wKCk6IFZlY3RvcjIgeyByZXR1cm4gdGhpcy5nZXRSaWdodFRvcCgpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBwb2ludCAobGVmdCwgY2VudGVyWSksIGluIHRoZSBVSS1jb29yZGluYXRlIGNlbnRlci1sZWZ0LlxuICAgKi9cbiAgcHVibGljIGdldExlZnRDZW50ZXIoKTogVmVjdG9yMiB7IHJldHVybiBuZXcgVmVjdG9yMiggdGhpcy5taW5YLCB0aGlzLmdldENlbnRlclkoKSApOyB9XG5cbiAgcHVibGljIGdldCBsZWZ0Q2VudGVyKCk6IFZlY3RvcjIgeyByZXR1cm4gdGhpcy5nZXRMZWZ0Q2VudGVyKCk7IH1cblxuICAvKipcbiAgICogVGhlIHBvaW50IChjZW50ZXJYLCBjZW50ZXJZKSwgaW4gdGhlIGNlbnRlciBvZiB0aGUgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIGdldENlbnRlcigpOiBWZWN0b3IyIHsgcmV0dXJuIG5ldyBWZWN0b3IyKCB0aGlzLmdldENlbnRlclgoKSwgdGhpcy5nZXRDZW50ZXJZKCkgKTsgfVxuXG4gIHB1YmxpYyBnZXQgY2VudGVyKCk6IFZlY3RvcjIgeyByZXR1cm4gdGhpcy5nZXRDZW50ZXIoKTsgfVxuXG4gIC8qKlxuICAgKiBUaGUgcG9pbnQgKG1heFgsIGNlbnRlclkpLCBpbiB0aGUgVUktY29vcmRpbmF0ZSBjZW50ZXItcmlnaHRcbiAgICovXG4gIHB1YmxpYyBnZXRSaWdodENlbnRlcigpOiBWZWN0b3IyIHsgcmV0dXJuIG5ldyBWZWN0b3IyKCB0aGlzLm1heFgsIHRoaXMuZ2V0Q2VudGVyWSgpICk7IH1cblxuICBwdWJsaWMgZ2V0IHJpZ2h0Q2VudGVyKCk6IFZlY3RvcjIgeyByZXR1cm4gdGhpcy5nZXRSaWdodENlbnRlcigpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBwb2ludCAobWluWCwgbWF4WSksIGluIHRoZSBVSS1jb29yZGluYXRlIGxvd2VyLWxlZnRcbiAgICovXG4gIHB1YmxpYyBnZXRMZWZ0Qm90dG9tKCk6IFZlY3RvcjIgeyByZXR1cm4gbmV3IFZlY3RvcjIoIHRoaXMubWluWCwgdGhpcy5tYXhZICk7IH1cblxuICBwdWJsaWMgZ2V0IGxlZnRCb3R0b20oKTogVmVjdG9yMiB7IHJldHVybiB0aGlzLmdldExlZnRCb3R0b20oKTsgfVxuXG4gIC8qKlxuICAgKiBUaGUgcG9pbnQgKGNlbnRlclgsIG1heFkpLCBpbiB0aGUgVUktY29vcmRpbmF0ZSBsb3dlci1jZW50ZXJcbiAgICovXG4gIHB1YmxpYyBnZXRDZW50ZXJCb3R0b20oKTogVmVjdG9yMiB7IHJldHVybiBuZXcgVmVjdG9yMiggdGhpcy5nZXRDZW50ZXJYKCksIHRoaXMubWF4WSApOyB9XG5cbiAgcHVibGljIGdldCBjZW50ZXJCb3R0b20oKTogVmVjdG9yMiB7IHJldHVybiB0aGlzLmdldENlbnRlckJvdHRvbSgpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBwb2ludCAobWF4WCwgbWF4WSksIGluIHRoZSBVSS1jb29yZGluYXRlIGxvd2VyLXJpZ2h0XG4gICAqL1xuICBwdWJsaWMgZ2V0UmlnaHRCb3R0b20oKTogVmVjdG9yMiB7IHJldHVybiBuZXcgVmVjdG9yMiggdGhpcy5tYXhYLCB0aGlzLm1heFkgKTsgfVxuXG4gIHB1YmxpYyBnZXQgcmlnaHRCb3R0b20oKTogVmVjdG9yMiB7IHJldHVybiB0aGlzLmdldFJpZ2h0Qm90dG9tKCk7IH1cblxuICAvKipcbiAgICogV2hldGhlciB3ZSBoYXZlIG5lZ2F0aXZlIHdpZHRoIG9yIGhlaWdodC4gQm91bmRzMi5OT1RISU5HIGlzIGEgcHJpbWUgZXhhbXBsZSBvZiBhbiBlbXB0eSBCb3VuZHMyLlxuICAgKiBCb3VuZHMgd2l0aCB3aWR0aCA9IGhlaWdodCA9IDAgYXJlIGNvbnNpZGVyZWQgbm90IGVtcHR5LCBzaW5jZSB0aGV5IGluY2x1ZGUgdGhlIHNpbmdsZSAoMCwwKSBwb2ludC5cbiAgICovXG4gIHB1YmxpYyBpc0VtcHR5KCk6IGJvb2xlYW4geyByZXR1cm4gdGhpcy5nZXRXaWR0aCgpIDwgMCB8fCB0aGlzLmdldEhlaWdodCgpIDwgMDsgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG91ciBtaW5pbXVtcyBhbmQgbWF4aW11bXMgYXJlIGFsbCBmaW5pdGUgbnVtYmVycy4gVGhpcyB3aWxsIGV4Y2x1ZGUgQm91bmRzMi5OT1RISU5HIGFuZCBCb3VuZHMyLkVWRVJZVEhJTkcuXG4gICAqL1xuICBwdWJsaWMgaXNGaW5pdGUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIGlzRmluaXRlKCB0aGlzLm1pblggKSAmJiBpc0Zpbml0ZSggdGhpcy5taW5ZICkgJiYgaXNGaW5pdGUoIHRoaXMubWF4WCApICYmIGlzRmluaXRlKCB0aGlzLm1heFkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoaXMgYm91bmRzIGhhcyBhIG5vbi16ZXJvIGFyZWEgKG5vbi16ZXJvIHBvc2l0aXZlIHdpZHRoIGFuZCBoZWlnaHQpLlxuICAgKi9cbiAgcHVibGljIGhhc05vbnplcm9BcmVhKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmdldFdpZHRoKCkgPiAwICYmIHRoaXMuZ2V0SGVpZ2h0KCkgPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBib3VuZHMgaGFzIGEgZmluaXRlIGFuZCBub24tbmVnYXRpdmUgd2lkdGggYW5kIGhlaWdodC5cbiAgICovXG4gIHB1YmxpYyBpc1ZhbGlkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KCkgJiYgdGhpcy5pc0Zpbml0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIHRoZSBwb3NpdGlvbiBpcyBpbnNpZGUgdGhlIGJvdW5kcywgdGhlIHBvc2l0aW9uIHdpbGwgYmUgcmV0dXJuZWQuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJldHVybiBhIG5ldyBwb3NpdGlvblxuICAgKiBvbiB0aGUgZWRnZSBvZiB0aGUgYm91bmRzIHRoYXQgaXMgdGhlIGNsb3Nlc3QgdG8gdGhlIHByb3ZpZGVkIHBvc2l0aW9uLlxuICAgKi9cbiAgcHVibGljIGNsb3Nlc3RQb2ludFRvKCBwb3NpdGlvbjogVmVjdG9yMiApOiBWZWN0b3IyIHtcbiAgICBpZiAoIHRoaXMuY29udGFpbnNDb29yZGluYXRlcyggcG9zaXRpb24ueCwgcG9zaXRpb24ueSApICkge1xuICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGNvbnN0IHhDb25zdHJhaW5lZCA9IE1hdGgubWF4KCBNYXRoLm1pbiggcG9zaXRpb24ueCwgdGhpcy5tYXhYICksIHRoaXMueCApO1xuICAgICAgY29uc3QgeUNvbnN0cmFpbmVkID0gTWF0aC5tYXgoIE1hdGgubWluKCBwb3NpdGlvbi55LCB0aGlzLm1heFkgKSwgdGhpcy55ICk7XG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjIoIHhDb25zdHJhaW5lZCwgeUNvbnN0cmFpbmVkICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGNvb3JkaW5hdGVzIGFyZSBjb250YWluZWQgaW5zaWRlIHRoZSBib3VuZGluZyBib3gsIG9yIGFyZSBvbiB0aGUgYm91bmRhcnkuXG4gICAqXG4gICAqIEBwYXJhbSB4IC0gWCBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byBjaGVja1xuICAgKiBAcGFyYW0geSAtIFkgY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQgdG8gY2hlY2tcbiAgICovXG4gIHB1YmxpYyBjb250YWluc0Nvb3JkaW5hdGVzKCB4OiBudW1iZXIsIHk6IG51bWJlciApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5taW5YIDw9IHggJiYgeCA8PSB0aGlzLm1heFggJiYgdGhpcy5taW5ZIDw9IHkgJiYgeSA8PSB0aGlzLm1heFk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGUgcG9pbnQgaXMgY29udGFpbmVkIGluc2lkZSB0aGUgYm91bmRpbmcgYm94LCBvciBpcyBvbiB0aGUgYm91bmRhcnkuXG4gICAqL1xuICBwdWJsaWMgY29udGFpbnNQb2ludCggcG9pbnQ6IFZlY3RvcjIgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnNDb29yZGluYXRlcyggcG9pbnQueCwgcG9pbnQueSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBib3VuZGluZyBib3ggY29tcGxldGVseSBjb250YWlucyB0aGUgYm91bmRpbmcgYm94IHBhc3NlZCBhcyBhIHBhcmFtZXRlci4gVGhlIGJvdW5kYXJ5IG9mIGEgYm94IGlzXG4gICAqIGNvbnNpZGVyZWQgdG8gYmUgXCJjb250YWluZWRcIi5cbiAgICovXG4gIHB1YmxpYyBjb250YWluc0JvdW5kcyggYm91bmRzOiBCb3VuZHMyICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1pblggPD0gYm91bmRzLm1pblggJiYgdGhpcy5tYXhYID49IGJvdW5kcy5tYXhYICYmIHRoaXMubWluWSA8PSBib3VuZHMubWluWSAmJiB0aGlzLm1heFkgPj0gYm91bmRzLm1heFk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIGFuZCBhbm90aGVyIGJvdW5kaW5nIGJveCBoYXZlIGFueSBwb2ludHMgb2YgaW50ZXJzZWN0aW9uIChpbmNsdWRpbmcgdG91Y2hpbmcgYm91bmRhcmllcykuXG4gICAqL1xuICBwdWJsaWMgaW50ZXJzZWN0c0JvdW5kcyggYm91bmRzOiBCb3VuZHMyICk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG1pblggPSBNYXRoLm1heCggdGhpcy5taW5YLCBib3VuZHMubWluWCApO1xuICAgIGNvbnN0IG1pblkgPSBNYXRoLm1heCggdGhpcy5taW5ZLCBib3VuZHMubWluWSApO1xuICAgIGNvbnN0IG1heFggPSBNYXRoLm1pbiggdGhpcy5tYXhYLCBib3VuZHMubWF4WCApO1xuICAgIGNvbnN0IG1heFkgPSBNYXRoLm1pbiggdGhpcy5tYXhZLCBib3VuZHMubWF4WSApO1xuICAgIHJldHVybiAoIG1heFggLSBtaW5YICkgPj0gMCAmJiAoIG1heFkgLSBtaW5ZID49IDAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBpbnB1dCBwb2ludCB0byB0aGUgcG9pbnQgY2xvc2VzdCB0byBpdCBpbnNpZGUgdGhlIGJvdW5kaW5nIGJveC5cbiAgICovXG4gIHB1YmxpYyBtaW5pbXVtRGlzdGFuY2VUb1BvaW50U3F1YXJlZCggcG9pbnQ6IFZlY3RvcjIgKTogbnVtYmVyIHtcbiAgICBjb25zdCBjbG9zZVggPSBwb2ludC54IDwgdGhpcy5taW5YID8gdGhpcy5taW5YIDogKCBwb2ludC54ID4gdGhpcy5tYXhYID8gdGhpcy5tYXhYIDogbnVsbCApO1xuICAgIGNvbnN0IGNsb3NlWSA9IHBvaW50LnkgPCB0aGlzLm1pblkgPyB0aGlzLm1pblkgOiAoIHBvaW50LnkgPiB0aGlzLm1heFkgPyB0aGlzLm1heFkgOiBudWxsICk7XG4gICAgbGV0IGQ7XG4gICAgaWYgKCBjbG9zZVggPT09IG51bGwgJiYgY2xvc2VZID09PSBudWxsICkge1xuICAgICAgLy8gaW5zaWRlLCBvciBvbiB0aGUgYm91bmRhcnlcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBlbHNlIGlmICggY2xvc2VYID09PSBudWxsICkge1xuICAgICAgLy8gdmVydGljYWxseSBkaXJlY3RseSBhYm92ZS9iZWxvd1xuICAgICAgZCA9IGNsb3NlWSEgLSBwb2ludC55O1xuICAgICAgcmV0dXJuIGQgKiBkO1xuICAgIH1cbiAgICBlbHNlIGlmICggY2xvc2VZID09PSBudWxsICkge1xuICAgICAgLy8gaG9yaXpvbnRhbGx5IGRpcmVjdGx5IHRvIHRoZSBsZWZ0L3JpZ2h0XG4gICAgICBkID0gY2xvc2VYIC0gcG9pbnQueDtcbiAgICAgIHJldHVybiBkICogZDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBjb3JuZXIgY2FzZVxuICAgICAgY29uc3QgZHggPSBjbG9zZVggLSBwb2ludC54O1xuICAgICAgY29uc3QgZHkgPSBjbG9zZVkgLSBwb2ludC55O1xuICAgICAgcmV0dXJuIGR4ICogZHggKyBkeSAqIGR5O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3F1YXJlZCBkaXN0YW5jZSBmcm9tIHRoZSBpbnB1dCBwb2ludCB0byB0aGUgcG9pbnQgZnVydGhlc3QgZnJvbSBpdCBpbnNpZGUgdGhlIGJvdW5kaW5nIGJveC5cbiAgICovXG4gIHB1YmxpYyBtYXhpbXVtRGlzdGFuY2VUb1BvaW50U3F1YXJlZCggcG9pbnQ6IFZlY3RvcjIgKTogbnVtYmVyIHtcbiAgICBsZXQgeCA9IHBvaW50LnggPiB0aGlzLmdldENlbnRlclgoKSA/IHRoaXMubWluWCA6IHRoaXMubWF4WDtcbiAgICBsZXQgeSA9IHBvaW50LnkgPiB0aGlzLmdldENlbnRlclkoKSA/IHRoaXMubWluWSA6IHRoaXMubWF4WTtcbiAgICB4IC09IHBvaW50Lng7XG4gICAgeSAtPSBwb2ludC55O1xuICAgIHJldHVybiB4ICogeCArIHkgKiB5O1xuICB9XG5cbiAgLyoqXG4gICAqIERlYnVnZ2luZyBzdHJpbmcgZm9yIHRoZSBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFt4Oigke3RoaXMubWluWH0sJHt0aGlzLm1heFh9KSx5Oigke3RoaXMubWluWX0sJHt0aGlzLm1heFl9KV1gO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4YWN0IGVxdWFsaXR5IGNvbXBhcmlzb24gYmV0d2VlbiB0aGlzIGJvdW5kcyBhbmQgYW5vdGhlciBib3VuZHMuXG4gICAqXG4gICAqIEByZXR1cm5zIC0gV2hldGhlciB0aGUgdHdvIGJvdW5kcyBhcmUgZXF1YWxcbiAgICovXG4gIHB1YmxpYyBlcXVhbHMoIG90aGVyOiBCb3VuZHMyICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm1pblggPT09IG90aGVyLm1pblggJiYgdGhpcy5taW5ZID09PSBvdGhlci5taW5ZICYmIHRoaXMubWF4WCA9PT0gb3RoZXIubWF4WCAmJiB0aGlzLm1heFkgPT09IG90aGVyLm1heFk7XG4gIH1cblxuICAvKipcbiAgICogQXBwcm94aW1hdGUgZXF1YWxpdHkgY29tcGFyaXNvbiBiZXR3ZWVuIHRoaXMgYm91bmRzIGFuZCBhbm90aGVyIGJvdW5kcy5cbiAgICpcbiAgICogQHJldHVybnMgLSBXaGV0aGVyIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUgdHdvIGJvdW5kcyBoYXMgbm8gbWluL21heCB3aXRoIGFuIGFic29sdXRlIHZhbHVlIGdyZWF0ZXJcbiAgICogICAgICAgICAgICB0aGFuIGVwc2lsb24uXG4gICAqL1xuICBwdWJsaWMgZXF1YWxzRXBzaWxvbiggb3RoZXI6IEJvdW5kczIsIGVwc2lsb246IG51bWJlciApOiBib29sZWFuIHtcbiAgICBlcHNpbG9uID0gZXBzaWxvbiAhPT0gdW5kZWZpbmVkID8gZXBzaWxvbiA6IDA7XG4gICAgY29uc3QgdGhpc0Zpbml0ZSA9IHRoaXMuaXNGaW5pdGUoKTtcbiAgICBjb25zdCBvdGhlckZpbml0ZSA9IG90aGVyLmlzRmluaXRlKCk7XG4gICAgaWYgKCB0aGlzRmluaXRlICYmIG90aGVyRmluaXRlICkge1xuICAgICAgLy8gYm90aCBhcmUgZmluaXRlLCBzbyB3ZSBjYW4gdXNlIE1hdGguYWJzKCkgLSBpdCB3b3VsZCBmYWlsIHdpdGggbm9uLWZpbml0ZSB2YWx1ZXMgbGlrZSBJbmZpbml0eVxuICAgICAgcmV0dXJuIE1hdGguYWJzKCB0aGlzLm1pblggLSBvdGhlci5taW5YICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgICAgTWF0aC5hYnMoIHRoaXMubWluWSAtIG90aGVyLm1pblkgKSA8IGVwc2lsb24gJiZcbiAgICAgICAgICAgICBNYXRoLmFicyggdGhpcy5tYXhYIC0gb3RoZXIubWF4WCApIDwgZXBzaWxvbiAmJlxuICAgICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm1heFkgLSBvdGhlci5tYXhZICkgPCBlcHNpbG9uO1xuICAgIH1cbiAgICBlbHNlIGlmICggdGhpc0Zpbml0ZSAhPT0gb3RoZXJGaW5pdGUgKSB7XG4gICAgICByZXR1cm4gZmFsc2U7IC8vIG9uZSBpcyBmaW5pdGUsIHRoZSBvdGhlciBpcyBub3QuIGRlZmluaXRlbHkgbm90IGVxdWFsXG4gICAgfVxuICAgIGVsc2UgaWYgKCAoIHRoaXMgYXMgdW5rbm93biBhcyBCb3VuZHMyICkgPT09IG90aGVyICkge1xuICAgICAgcmV0dXJuIHRydWU7IC8vIGV4YWN0IHNhbWUgaW5zdGFuY2UsIG11c3QgYmUgZXF1YWxcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBlcHNpbG9uIG9ubHkgYXBwbGllcyBvbiBmaW5pdGUgZGltZW5zaW9ucy4gZHVlIHRvIEpTJ3MgaGFuZGxpbmcgb2YgaXNGaW5pdGUoKSwgaXQncyBmYXN0ZXIgdG8gY2hlY2sgdGhlIHN1bSBvZiBib3RoXG4gICAgICByZXR1cm4gKCBpc0Zpbml0ZSggdGhpcy5taW5YICsgb3RoZXIubWluWCApID8gKCBNYXRoLmFicyggdGhpcy5taW5YIC0gb3RoZXIubWluWCApIDwgZXBzaWxvbiApIDogKCB0aGlzLm1pblggPT09IG90aGVyLm1pblggKSApICYmXG4gICAgICAgICAgICAgKCBpc0Zpbml0ZSggdGhpcy5taW5ZICsgb3RoZXIubWluWSApID8gKCBNYXRoLmFicyggdGhpcy5taW5ZIC0gb3RoZXIubWluWSApIDwgZXBzaWxvbiApIDogKCB0aGlzLm1pblkgPT09IG90aGVyLm1pblkgKSApICYmXG4gICAgICAgICAgICAgKCBpc0Zpbml0ZSggdGhpcy5tYXhYICsgb3RoZXIubWF4WCApID8gKCBNYXRoLmFicyggdGhpcy5tYXhYIC0gb3RoZXIubWF4WCApIDwgZXBzaWxvbiApIDogKCB0aGlzLm1heFggPT09IG90aGVyLm1heFggKSApICYmXG4gICAgICAgICAgICAgKCBpc0Zpbml0ZSggdGhpcy5tYXhZICsgb3RoZXIubWF4WSApID8gKCBNYXRoLmFicyggdGhpcy5tYXhZIC0gb3RoZXIubWF4WSApIDwgZXBzaWxvbiApIDogKCB0aGlzLm1heFkgPT09IG90aGVyLm1heFkgKSApO1xuICAgIH1cbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxuICAgKiBJbW11dGFibGUgb3BlcmF0aW9uc1xuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoaXMgYm91bmRzLCBvciBpZiBhIGJvdW5kcyBpcyBwYXNzZWQgaW4sIHNldCB0aGF0IGJvdW5kcydzIHZhbHVlcyB0byBvdXJzLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2V0KCksIGlmIGEgYm91bmRzIGlzIHByb3ZpZGVkLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kXG4gICAqIHdpbGwgbm90IG1vZGlmeSB0aGlzIGJvdW5kcy5cbiAgICpcbiAgICogQHBhcmFtIFtib3VuZHNdIC0gSWYgbm90IHByb3ZpZGVkLCBjcmVhdGVzIGEgbmV3IEJvdW5kczIgd2l0aCBmaWxsZWQgaW4gdmFsdWVzLiBPdGhlcndpc2UsIGZpbGxzIGluIHRoZVxuICAgKiAgICAgICAgICAgICAgICAgICB2YWx1ZXMgb2YgdGhlIHByb3ZpZGVkIGJvdW5kcyBzbyB0aGF0IGl0IGVxdWFscyB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBjb3B5KCBib3VuZHM/OiBCb3VuZHMyICk6IEJvdW5kczIge1xuICAgIGlmICggYm91bmRzICkge1xuICAgICAgcmV0dXJuIGJvdW5kcy5zZXQoIHRoaXMgYXMgdW5rbm93biBhcyBCb3VuZHMyICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIGIyKCB0aGlzLm1pblgsIHRoaXMubWluWSwgdGhpcy5tYXhYLCB0aGlzLm1heFkgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNtYWxsZXN0IGJvdW5kcyB0aGF0IGNvbnRhaW5zIGJvdGggdGhpcyBib3VuZHMgYW5kIHRoZSBpbnB1dCBib3VuZHMsIHJldHVybmVkIGFzIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGluY2x1ZGVCb3VuZHMoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgdW5pb24oIGJvdW5kczogQm91bmRzMiApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gYjIoXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW5YLCBib3VuZHMubWluWCApLFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluWSwgYm91bmRzLm1pblkgKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heFgsIGJvdW5kcy5tYXhYICksXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXhZLCBib3VuZHMubWF4WSApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc21hbGxlc3QgYm91bmRzIHRoYXQgaXMgY29udGFpbmVkIGJ5IGJvdGggdGhpcyBib3VuZHMgYW5kIHRoZSBpbnB1dCBib3VuZHMsIHJldHVybmVkIGFzIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGNvbnN0cmFpbkJvdW5kcygpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBpbnRlcnNlY3Rpb24oIGJvdW5kczogQm91bmRzMiApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gYjIoXG4gICAgICBNYXRoLm1heCggdGhpcy5taW5YLCBib3VuZHMubWluWCApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWluWSwgYm91bmRzLm1pblkgKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1heFgsIGJvdW5kcy5tYXhYICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5tYXhZLCBib3VuZHMubWF4WSApXG4gICAgKTtcbiAgfVxuXG4gIC8vIFRPRE86IGRpZmZlcmVuY2Ugc2hvdWxkIGJlIHdlbGwtZGVmaW5lZCwgYnV0IG1vcmUgbG9naWMgaXMgbmVlZGVkIHRvIGNvbXB1dGVcblxuICAvKipcbiAgICogVGhlIHNtYWxsZXN0IGJvdW5kcyB0aGF0IGNvbnRhaW5zIHRoaXMgYm91bmRzIGFuZCB0aGUgcG9pbnQgKHgseSksIHJldHVybmVkIGFzIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGFkZENvb3JkaW5hdGVzKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIHdpdGhDb29yZGluYXRlcyggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluWCwgeCApLFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluWSwgeSApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4WCwgeCApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4WSwgeSApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc21hbGxlc3QgYm91bmRzIHRoYXQgY29udGFpbnMgdGhpcyBib3VuZHMgYW5kIHRoZSBpbnB1dCBwb2ludCwgcmV0dXJuZWQgYXMgYSBjb3B5LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gYWRkUG9pbnQoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgd2l0aFBvaW50KCBwb2ludDogVmVjdG9yMiApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy53aXRoQ29vcmRpbmF0ZXMoIHBvaW50LngsIHBvaW50LnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzbWFsbGVzdCBib3VuZHMgdGhhdCBjb250YWlucyBib3RoIHRoaXMgYm91bmRzIGFuZCB0aGUgeCB2YWx1ZSBwcm92aWRlZC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGFkZFgoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgd2l0aFgoIHg6IG51bWJlciApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5jb3B5KCkuYWRkWCggeCApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNtYWxsZXN0IGJvdW5kcyB0aGF0IGNvbnRhaW5zIGJvdGggdGhpcyBib3VuZHMgYW5kIHRoZSB5IHZhbHVlIHByb3ZpZGVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gYWRkWSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyB3aXRoWSggeTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiB0aGlzLmNvcHkoKS5hZGRZKCB5ICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIG1pblggcmVwbGFjZWQgd2l0aCB0aGUgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXRNaW5YKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIHdpdGhNaW5YKCBtaW5YOiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCBtaW5YLCB0aGlzLm1pblksIHRoaXMubWF4WCwgdGhpcy5tYXhZICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIG1pblkgcmVwbGFjZWQgd2l0aCB0aGUgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXRNaW5ZKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIHdpdGhNaW5ZKCBtaW5ZOiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCB0aGlzLm1pblgsIG1pblksIHRoaXMubWF4WCwgdGhpcy5tYXhZICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIG1heFggcmVwbGFjZWQgd2l0aCB0aGUgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXRNYXhYKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIHdpdGhNYXhYKCBtYXhYOiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCB0aGlzLm1pblgsIHRoaXMubWluWSwgbWF4WCwgdGhpcy5tYXhZICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIG1heFkgcmVwbGFjZWQgd2l0aCB0aGUgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXRNYXhZKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIHdpdGhNYXhZKCBtYXhZOiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCB0aGlzLm1pblgsIHRoaXMubWluWSwgdGhpcy5tYXhYLCBtYXhZICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIHRoZSBtaW5pbXVtIHZhbHVlcyByb3VuZGVkIGRvd24gdG8gdGhlIG5lYXJlc3QgaW50ZWdlciwgYW5kIHRoZSBtYXhpbXVtIHZhbHVlc1xuICAgKiByb3VuZGVkIHVwIHRvIHRoZSBuZWFyZXN0IGludGVnZXIuIFRoaXMgY2F1c2VzIHRoZSBib3VuZHMgdG8gZXhwYW5kIGFzIG5lY2Vzc2FyeSBzbyB0aGF0IGl0cyBib3VuZGFyaWVzXG4gICAqIGFyZSBpbnRlZ2VyLWFsaWduZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiByb3VuZE91dCgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyByb3VuZGVkT3V0KCk6IEJvdW5kczIge1xuICAgIHJldHVybiBiMihcbiAgICAgIE1hdGguZmxvb3IoIHRoaXMubWluWCApLFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5taW5ZICksXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWF4WCApLFxuICAgICAgTWF0aC5jZWlsKCB0aGlzLm1heFkgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIHRoZSBtaW5pbXVtIHZhbHVlcyByb3VuZGVkIHVwIHRvIHRoZSBuZWFyZXN0IGludGVnZXIsIGFuZCB0aGUgbWF4aW11bSB2YWx1ZXNcbiAgICogcm91bmRlZCBkb3duIHRvIHRoZSBuZWFyZXN0IGludGVnZXIuIFRoaXMgY2F1c2VzIHRoZSBib3VuZHMgdG8gY29udHJhY3QgYXMgbmVjZXNzYXJ5IHNvIHRoYXQgaXRzIGJvdW5kYXJpZXNcbiAgICogYXJlIGludGVnZXItYWxpZ25lZC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHJvdW5kSW4oKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgcm91bmRlZEluKCk6IEJvdW5kczIge1xuICAgIHJldHVybiBiMihcbiAgICAgIE1hdGguY2VpbCggdGhpcy5taW5YICksXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWluWSApLFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5tYXhYICksXG4gICAgICBNYXRoLmZsb29yKCB0aGlzLm1heFkgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQSBib3VuZGluZyBib3ggKHN0aWxsIGF4aXMtYWxpZ25lZCkgdGhhdCBjb250YWlucyB0aGUgdHJhbnNmb3JtZWQgc2hhcGUgb2YgdGhpcyBib3VuZHMsIGFwcGx5aW5nIHRoZSBtYXRyaXggYXNcbiAgICogYW4gYWZmaW5lIHRyYW5zZm9ybWF0aW9uLlxuICAgKlxuICAgKiBOT1RFOiBib3VuZHMudHJhbnNmb3JtZWQoIG1hdHJpeCApLnRyYW5zZm9ybWVkKCBpbnZlcnNlICkgbWF5IGJlIGxhcmdlciB0aGFuIHRoZSBvcmlnaW5hbCBib3gsIGlmIGl0IGluY2x1ZGVzXG4gICAqIGEgcm90YXRpb24gdGhhdCBpc24ndCBhIG11bHRpcGxlIG9mICRcXHBpLzIkLiBUaGlzIGlzIGJlY2F1c2UgdGhlIHJldHVybmVkIGJvdW5kcyBtYXkgZXhwYW5kIGluIGFyZWEgdG8gY292ZXJcbiAgICogQUxMIG9mIHRoZSBjb3JuZXJzIG9mIHRoZSB0cmFuc2Zvcm1lZCBib3VuZGluZyBib3guXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB0cmFuc2Zvcm0oKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgdHJhbnNmb3JtZWQoIG1hdHJpeDogTWF0cml4MyApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5jb3B5KCkudHJhbnNmb3JtKCBtYXRyaXggKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGV4cGFuZGVkIG9uIGFsbCBzaWRlcyBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC4pXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGUoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgZGlsYXRlZCggZDogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiB0aGlzLmRpbGF0ZWRYWSggZCwgZCApO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgYm91bmRpbmcgYm94IHRoYXQgaXMgZXhwYW5kZWQgaG9yaXpvbnRhbGx5IChvbiB0aGUgbGVmdCBhbmQgcmlnaHQpIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZGlsYXRlWCgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBkaWxhdGVkWCggeDogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiBiMiggdGhpcy5taW5YIC0geCwgdGhpcy5taW5ZLCB0aGlzLm1heFggKyB4LCB0aGlzLm1heFkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGV4cGFuZGVkIHZlcnRpY2FsbHkgKG9uIHRoZSB0b3AgYW5kIGJvdHRvbSkgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGVZKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIGRpbGF0ZWRZKCB5OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCB0aGlzLm1pblgsIHRoaXMubWluWSAtIHksIHRoaXMubWF4WCwgdGhpcy5tYXhZICsgeSApO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgYm91bmRpbmcgYm94IHRoYXQgaXMgZXhwYW5kZWQgb24gYWxsIHNpZGVzLCB3aXRoIGRpZmZlcmVudCBhbW91bnRzIG9mIGV4cGFuc2lvbiBob3Jpem9udGFsbHkgYW5kIHZlcnRpY2FsbHkuXG4gICAqIFdpbGwgYmUgaWRlbnRpY2FsIHRvIHRoZSBib3VuZHMgcmV0dXJuZWQgYnkgY2FsbGluZyBib3VuZHMuZGlsYXRlZFgoIHggKS5kaWxhdGVkWSggeSApLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZGlsYXRlWFkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB4IC0gQW1vdW50IHRvIGRpbGF0ZSBob3Jpem9udGFsbHkgKGZvciBlYWNoIHNpZGUpXG4gICAqIEBwYXJhbSB5IC0gQW1vdW50IHRvIGRpbGF0ZSB2ZXJ0aWNhbGx5IChmb3IgZWFjaCBzaWRlKVxuICAgKi9cbiAgcHVibGljIGRpbGF0ZWRYWSggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCB0aGlzLm1pblggLSB4LCB0aGlzLm1pblkgLSB5LCB0aGlzLm1heFggKyB4LCB0aGlzLm1heFkgKyB5ICk7XG4gIH1cblxuICAvKipcbiAgICogQSBib3VuZGluZyBib3ggdGhhdCBpcyBjb250cmFjdGVkIG9uIGFsbCBzaWRlcyBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGVyb2RlKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIGVyb2RlZCggYW1vdW50OiBudW1iZXIgKTogQm91bmRzMiB7IHJldHVybiB0aGlzLmRpbGF0ZWQoIC1hbW91bnQgKTsgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGNvbnRyYWN0ZWQgaG9yaXpvbnRhbGx5IChvbiB0aGUgbGVmdCBhbmQgcmlnaHQpIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZXJvZGVYKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIGVyb2RlZFgoIHg6IG51bWJlciApOiBCb3VuZHMyIHsgcmV0dXJuIHRoaXMuZGlsYXRlZFgoIC14ICk7IH1cblxuICAvKipcbiAgICogQSBib3VuZGluZyBib3ggdGhhdCBpcyBjb250cmFjdGVkIHZlcnRpY2FsbHkgKG9uIHRoZSB0b3AgYW5kIGJvdHRvbSkgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBlcm9kZVkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgZXJvZGVkWSggeTogbnVtYmVyICk6IEJvdW5kczIgeyByZXR1cm4gdGhpcy5kaWxhdGVkWSggLXkgKTsgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGNvbnRyYWN0ZWQgb24gYWxsIHNpZGVzLCB3aXRoIGRpZmZlcmVudCBhbW91bnRzIG9mIGNvbnRyYWN0aW9uIGhvcml6b250YWxseSBhbmQgdmVydGljYWxseS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGVyb2RlWFkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB4IC0gQW1vdW50IHRvIGVyb2RlIGhvcml6b250YWxseSAoZm9yIGVhY2ggc2lkZSlcbiAgICogQHBhcmFtIHkgLSBBbW91bnQgdG8gZXJvZGUgdmVydGljYWxseSAoZm9yIGVhY2ggc2lkZSlcbiAgICovXG4gIHB1YmxpYyBlcm9kZWRYWSggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogQm91bmRzMiB7IHJldHVybiB0aGlzLmRpbGF0ZWRYWSggLXgsIC15ICk7IH1cblxuICAvKipcbiAgICogQSBib3VuZGluZyBib3ggdGhhdCBpcyBleHBhbmRlZCBieSBhIHNwZWNpZmljIGFtb3VudCBvbiBhbGwgc2lkZXMgKG9yIGlmIHNvbWUgb2Zmc2V0cyBhcmUgbmVnYXRpdmUsIHdpbGwgY29udHJhY3RcbiAgICogdGhvc2Ugc2lkZXMpLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gb2Zmc2V0KCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0gbGVmdCAtIEFtb3VudCB0byBleHBhbmQgdG8gdGhlIGxlZnQgKHN1YnRyYWN0cyBmcm9tIG1pblgpXG4gICAqIEBwYXJhbSB0b3AgLSBBbW91bnQgdG8gZXhwYW5kIHRvIHRoZSB0b3AgKHN1YnRyYWN0cyBmcm9tIG1pblkpXG4gICAqIEBwYXJhbSByaWdodCAtIEFtb3VudCB0byBleHBhbmQgdG8gdGhlIHJpZ2h0IChhZGRzIHRvIG1heFgpXG4gICAqIEBwYXJhbSBib3R0b20gLSBBbW91bnQgdG8gZXhwYW5kIHRvIHRoZSBib3R0b20gKGFkZHMgdG8gbWF4WSlcbiAgICovXG4gIHB1YmxpYyB3aXRoT2Zmc2V0cyggbGVmdDogbnVtYmVyLCB0b3A6IG51bWJlciwgcmlnaHQ6IG51bWJlciwgYm90dG9tOiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCB0aGlzLm1pblggLSBsZWZ0LCB0aGlzLm1pblkgLSB0b3AsIHRoaXMubWF4WCArIHJpZ2h0LCB0aGlzLm1heFkgKyBib3R0b20gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXIgYm91bmRzLCB0cmFuc2xhdGVkIGhvcml6b250YWxseSBieSB4LCByZXR1cm5lZCBhcyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzaGlmdFgoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqL1xuICBwdWJsaWMgc2hpZnRlZFgoIHg6IG51bWJlciApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gYjIoIHRoaXMubWluWCArIHgsIHRoaXMubWluWSwgdGhpcy5tYXhYICsgeCwgdGhpcy5tYXhZICk7XG4gIH1cblxuICAvKipcbiAgICogT3VyIGJvdW5kcywgdHJhbnNsYXRlZCB2ZXJ0aWNhbGx5IGJ5IHksIHJldHVybmVkIGFzIGEgY29weS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNoaWZ0WSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBzaGlmdGVkWSggeTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiBiMiggdGhpcy5taW5YLCB0aGlzLm1pblkgKyB5LCB0aGlzLm1heFgsIHRoaXMubWF4WSArIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdXIgYm91bmRzLCB0cmFuc2xhdGVkIGJ5ICh4LHkpLCByZXR1cm5lZCBhcyBhIGNvcHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzaGlmdCgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBzaGlmdGVkWFkoIHg6IG51bWJlciwgeTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiBiMiggdGhpcy5taW5YICsgeCwgdGhpcy5taW5ZICsgeSwgdGhpcy5tYXhYICsgeCwgdGhpcy5tYXhZICsgeSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgb3VyIGJvdW5kcywgdHJhbnNsYXRlZCBieSBhIHZlY3RvciwgcmV0dXJuZWQgYXMgYSBjb3B5LlxuICAgKi9cbiAgcHVibGljIHNoaWZ0ZWQoIHY6IFZlY3RvcjIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIHRoaXMuc2hpZnRlZFhZKCB2LngsIHYueSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaW50ZXJwb2xhdGVkIHZhbHVlIG9mIHRoaXMgYm91bmRzIGFuZCB0aGUgYXJndW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSBib3VuZHNcbiAgICogQHBhcmFtIHJhdGlvIC0gMCB3aWxsIHJlc3VsdCBpbiBhIGNvcHkgb2YgYHRoaXNgLCAxIHdpbGwgcmVzdWx0IGluIGJvdW5kcywgYW5kIGluLWJldHdlZW4gY29udHJvbHMgdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgIGFtb3VudCBvZiBlYWNoLlxuICAgKi9cbiAgcHVibGljIGJsZW5kKCBib3VuZHM6IEJvdW5kczIsIHJhdGlvOiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgY29uc3QgdCA9IDEgLSByYXRpbztcbiAgICByZXR1cm4gYjIoXG4gICAgICB0ICogdGhpcy5taW5YICsgcmF0aW8gKiBib3VuZHMubWluWCxcbiAgICAgIHQgKiB0aGlzLm1pblkgKyByYXRpbyAqIGJvdW5kcy5taW5ZLFxuICAgICAgdCAqIHRoaXMubWF4WCArIHJhdGlvICogYm91bmRzLm1heFgsXG4gICAgICB0ICogdGhpcy5tYXhZICsgcmF0aW8gKiBib3VuZHMubWF4WVxuICAgICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogTXV0YWJsZSBvcGVyYXRpb25zXG4gICAqXG4gICAqIEFsbCBtdXRhYmxlIG9wZXJhdGlvbnMgc2hvdWxkIGNhbGwgb25lIG9mIHRoZSBmb2xsb3dpbmc6XG4gICAqICAgc2V0TWluTWF4LCBzZXRNaW5YLCBzZXRNaW5ZLCBzZXRNYXhYLCBzZXRNYXhZXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogU2V0cyBlYWNoIHZhbHVlIGZvciB0aGlzIGJvdW5kcywgYW5kIHJldHVybnMgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHNldE1pbk1heCggbWluWDogbnVtYmVyLCBtaW5ZOiBudW1iZXIsIG1heFg6IG51bWJlciwgbWF4WTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgdGhpcy5taW5ZID0gbWluWTtcbiAgICB0aGlzLm1heFggPSBtYXhYO1xuICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgcmV0dXJuICggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kczIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiBtaW5YLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNaW5YKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc2V0TWluWCggbWluWDogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgcmV0dXJuICggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kczIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiBtaW5ZLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNaW5ZKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc2V0TWluWSggbWluWTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgcmV0dXJuICggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kczIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiBtYXhYLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNYXhYKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc2V0TWF4WCggbWF4WDogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgcmV0dXJuICggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kczIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiBtYXhZLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNYXhZKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc2V0TWF4WSggbWF4WTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgcmV0dXJuICggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kczIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZXMgb2YgdGhpcyBib3VuZHMgdG8gYmUgZXF1YWwgdG8gdGhlIGlucHV0IGJvdW5kcy5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBjb3B5KCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc2V0KCBib3VuZHM6IEJvdW5kczIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KCBib3VuZHMubWluWCwgYm91bmRzLm1pblksIGJvdW5kcy5tYXhYLCBib3VuZHMubWF4WSApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXQgY29udGFpbnMgYm90aCBpdHMgb3JpZ2luYWwgYm91bmRzIGFuZCB0aGUgaW5wdXQgYm91bmRzLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHVuaW9uKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgaW5jbHVkZUJvdW5kcyggYm91bmRzOiBCb3VuZHMyICk6IEJvdW5kczIge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heChcbiAgICAgIE1hdGgubWluKCB0aGlzLm1pblgsIGJvdW5kcy5taW5YICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW5ZLCBib3VuZHMubWluWSApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4WCwgYm91bmRzLm1heFggKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heFksIGJvdW5kcy5tYXhZIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXQgaXMgdGhlIGxhcmdlc3QgYm91bmRzIGNvbnRhaW5lZCBib3RoIGluIGl0cyBvcmlnaW5hbCBib3VuZHMgYW5kIGluIHRoZSBpbnB1dCBib3VuZHMuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgY29uc3RyYWluQm91bmRzKCBib3VuZHM6IEJvdW5kczIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWluWCwgYm91bmRzLm1pblggKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1pblksIGJvdW5kcy5taW5ZICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5tYXhYLCBib3VuZHMubWF4WCApLFxuICAgICAgTWF0aC5taW4oIHRoaXMubWF4WSwgYm91bmRzLm1heFkgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTW9kaWZpZXMgdGhpcyBib3VuZHMgc28gdGhhdCBpdCBjb250YWlucyBib3RoIGl0cyBvcmlnaW5hbCBib3VuZHMgYW5kIHRoZSBpbnB1dCBwb2ludCAoeCx5KS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB3aXRoQ29vcmRpbmF0ZXMoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBhZGRDb29yZGluYXRlcyggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluWCwgeCApLFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluWSwgeSApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4WCwgeCApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4WSwgeSApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGlzIGJvdW5kcyBzbyB0aGF0IGl0IGNvbnRhaW5zIGJvdGggaXRzIG9yaWdpbmFsIGJvdW5kcyBhbmQgdGhlIGlucHV0IHBvaW50LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhQb2ludCgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGFkZFBvaW50KCBwb2ludDogVmVjdG9yMiApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5hZGRDb29yZGluYXRlcyggcG9pbnQueCwgcG9pbnQueSApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXQgaXMgZ3VhcmFudGVlZCB0byBpbmNsdWRlIHRoZSBnaXZlbiB4IHZhbHVlIChpZiBpdCBkaWRuJ3QgYWxyZWFkeSkuIElmIHRoZSB4IHZhbHVlXG4gICAqIHdhcyBhbHJlYWR5IGNvbnRhaW5lZCwgbm90aGluZyB3aWxsIGJlIGRvbmUuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gd2l0aFgoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBhZGRYKCB4OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgdGhpcy5taW5YID0gTWF0aC5taW4oIHgsIHRoaXMubWluWCApO1xuICAgIHRoaXMubWF4WCA9IE1hdGgubWF4KCB4LCB0aGlzLm1heFggKTtcbiAgICByZXR1cm4gKCB0aGlzIGFzIHVua25vd24gYXMgQm91bmRzMiApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXQgaXMgZ3VhcmFudGVlZCB0byBpbmNsdWRlIHRoZSBnaXZlbiB5IHZhbHVlIChpZiBpdCBkaWRuJ3QgYWxyZWFkeSkuIElmIHRoZSB5IHZhbHVlXG4gICAqIHdhcyBhbHJlYWR5IGNvbnRhaW5lZCwgbm90aGluZyB3aWxsIGJlIGRvbmUuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gd2l0aFkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBhZGRZKCB5OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgdGhpcy5taW5ZID0gTWF0aC5taW4oIHksIHRoaXMubWluWSApO1xuICAgIHRoaXMubWF4WSA9IE1hdGgubWF4KCB5LCB0aGlzLm1heFkgKTtcbiAgICByZXR1cm4gKCB0aGlzIGFzIHVua25vd24gYXMgQm91bmRzMiApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXRzIGJvdW5kYXJpZXMgYXJlIGludGVnZXItYWxpZ25lZCwgcm91bmRpbmcgdGhlIG1pbmltdW0gYm91bmRhcmllcyBkb3duIGFuZCB0aGVcbiAgICogbWF4aW11bSBib3VuZGFyaWVzIHVwIChleHBhbmRpbmcgYXMgbmVjZXNzYXJ5KS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiByb3VuZGVkT3V0KCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgcm91bmRPdXQoKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5taW5YICksXG4gICAgICBNYXRoLmZsb29yKCB0aGlzLm1pblkgKSxcbiAgICAgIE1hdGguY2VpbCggdGhpcy5tYXhYICksXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWF4WSApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGlzIGJvdW5kcyBzbyB0aGF0IGl0cyBib3VuZGFyaWVzIGFyZSBpbnRlZ2VyLWFsaWduZWQsIHJvdW5kaW5nIHRoZSBtaW5pbXVtIGJvdW5kYXJpZXMgdXAgYW5kIHRoZVxuICAgKiBtYXhpbXVtIGJvdW5kYXJpZXMgZG93biAoY29udHJhY3RpbmcgYXMgbmVjZXNzYXJ5KS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiByb3VuZGVkSW4oKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyByb3VuZEluKCk6IEJvdW5kczIge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heChcbiAgICAgIE1hdGguY2VpbCggdGhpcy5taW5YICksXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWluWSApLFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5tYXhYICksXG4gICAgICBNYXRoLmZsb29yKCB0aGlzLm1heFkgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogTW9kaWZpZXMgdGhpcyBib3VuZHMgc28gdGhhdCBpdCB3b3VsZCBmdWxseSBjb250YWluIGEgdHJhbnNmb3JtZWQgdmVyc2lvbiBpZiBpdHMgcHJldmlvdXMgdmFsdWUsIGFwcGx5aW5nIHRoZVxuICAgKiBtYXRyaXggYXMgYW4gYWZmaW5lIHRyYW5zZm9ybWF0aW9uLlxuICAgKlxuICAgKiBOT1RFOiBib3VuZHMudHJhbnNmb3JtKCBtYXRyaXggKS50cmFuc2Zvcm0oIGludmVyc2UgKSBtYXkgYmUgbGFyZ2VyIHRoYW4gdGhlIG9yaWdpbmFsIGJveCwgaWYgaXQgaW5jbHVkZXNcbiAgICogYSByb3RhdGlvbiB0aGF0IGlzbid0IGEgbXVsdGlwbGUgb2YgJFxccGkvMiQuIFRoaXMgaXMgYmVjYXVzZSB0aGUgYm91bmRzIG1heSBleHBhbmQgaW4gYXJlYSB0byBjb3ZlclxuICAgKiBBTEwgb2YgdGhlIGNvcm5lcnMgb2YgdGhlIHRyYW5zZm9ybWVkIGJvdW5kaW5nIGJveC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB0cmFuc2Zvcm1lZCgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIHRyYW5zZm9ybSggbWF0cml4OiBNYXRyaXgzICk6IEJvdW5kczIge1xuICAgIC8vIGlmIHdlIGNvbnRhaW4gbm8gYXJlYSwgbm8gY2hhbmdlIGlzIG5lZWRlZFxuICAgIGlmICggdGhpcy5pc0VtcHR5KCkgKSB7XG4gICAgICByZXR1cm4gKCB0aGlzIGFzIHVua25vd24gYXMgQm91bmRzMiApO1xuICAgIH1cblxuICAgIC8vIG9wdGltaXphdGlvbiB0byBiYWlsIGZvciBpZGVudGl0eSBtYXRyaWNlc1xuICAgIGlmICggbWF0cml4LmlzSWRlbnRpdHkoKSApIHtcbiAgICAgIHJldHVybiAoIHRoaXMgYXMgdW5rbm93biBhcyBCb3VuZHMyICk7XG4gICAgfVxuXG4gICAgY29uc3QgbWluWCA9IHRoaXMubWluWDtcbiAgICBjb25zdCBtaW5ZID0gdGhpcy5taW5ZO1xuICAgIGNvbnN0IG1heFggPSB0aGlzLm1heFg7XG4gICAgY29uc3QgbWF4WSA9IHRoaXMubWF4WTtcbiAgICB0aGlzLnNldCggQm91bmRzMi5OT1RISU5HICk7XG5cbiAgICAvLyB1c2luZyBtdXRhYmxlIHZlY3RvciBzbyB3ZSBkb24ndCBjcmVhdGUgZXhjZXNzaXZlIGluc3RhbmNlcyBvZiBWZWN0b3IyIGR1cmluZyB0aGlzXG4gICAgLy8gbWFrZSBzdXJlIGFsbCA0IGNvcm5lcnMgYXJlIGluc2lkZSB0aGlzIHRyYW5zZm9ybWVkIGJvdW5kaW5nIGJveFxuXG4gICAgdGhpcy5hZGRQb2ludCggbWF0cml4Lm11bHRpcGx5VmVjdG9yMiggc2NyYXRjaFZlY3RvcjIuc2V0WFkoIG1pblgsIG1pblkgKSApICk7XG4gICAgdGhpcy5hZGRQb2ludCggbWF0cml4Lm11bHRpcGx5VmVjdG9yMiggc2NyYXRjaFZlY3RvcjIuc2V0WFkoIG1pblgsIG1heFkgKSApICk7XG4gICAgdGhpcy5hZGRQb2ludCggbWF0cml4Lm11bHRpcGx5VmVjdG9yMiggc2NyYXRjaFZlY3RvcjIuc2V0WFkoIG1heFgsIG1pblkgKSApICk7XG4gICAgdGhpcy5hZGRQb2ludCggbWF0cml4Lm11bHRpcGx5VmVjdG9yMiggc2NyYXRjaFZlY3RvcjIuc2V0WFkoIG1heFgsIG1heFkgKSApICk7XG4gICAgcmV0dXJuICggdGhpcyBhcyB1bmtub3duIGFzIEJvdW5kczIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmRzIHRoaXMgYm91bmRzIG9uIGFsbCBzaWRlcyBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGVkKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgZGlsYXRlKCBkOiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIHRoaXMuZGlsYXRlWFkoIGQsIGQgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmRzIHRoaXMgYm91bmRzIGhvcml6b250YWxseSAobGVmdCBhbmQgcmlnaHQpIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGRpbGF0ZWRYKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgZGlsYXRlWCggeDogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggdGhpcy5taW5YIC0geCwgdGhpcy5taW5ZLCB0aGlzLm1heFggKyB4LCB0aGlzLm1heFkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmRzIHRoaXMgYm91bmRzIHZlcnRpY2FsbHkgKHRvcCBhbmQgYm90dG9tKSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGVkWSgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKi9cbiAgcHVibGljIGRpbGF0ZVkoIHk6IG51bWJlciApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoIHRoaXMubWluWCwgdGhpcy5taW5ZIC0geSwgdGhpcy5tYXhYLCB0aGlzLm1heFkgKyB5ICk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kcyB0aGlzIGJvdW5kcyBpbmRlcGVuZGVudGx5IGluIHRoZSBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBkaXJlY3Rpb25zLiBXaWxsIGJlIGVxdWFsIHRvIGNhbGxpbmdcbiAgICogYm91bmRzLmRpbGF0ZVgoIHggKS5kaWxhdGVZKCB5ICkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZGlsYXRlZFhZKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgZGlsYXRlWFkoIHg6IG51bWJlciwgeTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggdGhpcy5taW5YIC0geCwgdGhpcy5taW5ZIC0geSwgdGhpcy5tYXhYICsgeCwgdGhpcy5tYXhZICsgeSApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnRyYWN0cyB0aGlzIGJvdW5kcyBvbiBhbGwgc2lkZXMgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZXJvZGVkKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgZXJvZGUoIGQ6IG51bWJlciApOiBCb3VuZHMyIHsgcmV0dXJuIHRoaXMuZGlsYXRlKCAtZCApOyB9XG5cbiAgLyoqXG4gICAqIENvbnRyYWN0cyB0aGlzIGJvdW5kcyBob3Jpem9udGFsbHkgKGxlZnQgYW5kIHJpZ2h0KSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBlcm9kZWRYKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgZXJvZGVYKCB4OiBudW1iZXIgKTogQm91bmRzMiB7IHJldHVybiB0aGlzLmRpbGF0ZVgoIC14ICk7IH1cblxuICAvKipcbiAgICogQ29udHJhY3RzIHRoaXMgYm91bmRzIHZlcnRpY2FsbHkgKHRvcCBhbmQgYm90dG9tKSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBlcm9kZWRZKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgZXJvZGVZKCB5OiBudW1iZXIgKTogQm91bmRzMiB7IHJldHVybiB0aGlzLmRpbGF0ZVkoIC15ICk7IH1cblxuICAvKipcbiAgICogQ29udHJhY3RzIHRoaXMgYm91bmRzIGluZGVwZW5kZW50bHkgaW4gdGhlIGhvcml6b250YWwgYW5kIHZlcnRpY2FsIGRpcmVjdGlvbnMuIFdpbGwgYmUgZXF1YWwgdG8gY2FsbGluZ1xuICAgKiBib3VuZHMuZXJvZGVYKCB4ICkuZXJvZGVZKCB5ICkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZXJvZGVkWFkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBlcm9kZVhZKCB4OiBudW1iZXIsIHk6IG51bWJlciApOiBCb3VuZHMyIHsgcmV0dXJuIHRoaXMuZGlsYXRlWFkoIC14LCAteSApOyB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZHMgdGhpcyBib3VuZHMgaW5kZXBlbmRlbnRseSBmb3IgZWFjaCBzaWRlIChvciBpZiBzb21lIG9mZnNldHMgYXJlIG5lZ2F0aXZlLCB3aWxsIGNvbnRyYWN0IHRob3NlIHNpZGVzKS5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB3aXRoT2Zmc2V0cygpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0b1xuICAgKiByZXR1cm5pbmcgdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0gbGVmdCAtIEFtb3VudCB0byBleHBhbmQgdG8gdGhlIGxlZnQgKHN1YnRyYWN0cyBmcm9tIG1pblgpXG4gICAqIEBwYXJhbSB0b3AgLSBBbW91bnQgdG8gZXhwYW5kIHRvIHRoZSB0b3AgKHN1YnRyYWN0cyBmcm9tIG1pblkpXG4gICAqIEBwYXJhbSByaWdodCAtIEFtb3VudCB0byBleHBhbmQgdG8gdGhlIHJpZ2h0IChhZGRzIHRvIG1heFgpXG4gICAqIEBwYXJhbSBib3R0b20gLSBBbW91bnQgdG8gZXhwYW5kIHRvIHRoZSBib3R0b20gKGFkZHMgdG8gbWF4WSlcbiAgICovXG4gIHB1YmxpYyBvZmZzZXQoIGxlZnQ6IG51bWJlciwgdG9wOiBudW1iZXIsIHJpZ2h0OiBudW1iZXIsIGJvdHRvbTogbnVtYmVyICk6IEJvdW5kczIge1xuICAgIHJldHVybiBiMiggdGhpcy5taW5YIC0gbGVmdCwgdGhpcy5taW5ZIC0gdG9wLCB0aGlzLm1heFggKyByaWdodCwgdGhpcy5tYXhZICsgYm90dG9tICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBvdXIgYm91bmRzIGhvcml6b250YWxseSBieSB4LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNoaWZ0ZWRYKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqL1xuICBwdWJsaWMgc2hpZnRYKCB4OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KCB0aGlzLm1pblggKyB4LCB0aGlzLm1pblksIHRoaXMubWF4WCArIHgsIHRoaXMubWF4WSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgb3VyIGJvdW5kcyB2ZXJ0aWNhbGx5IGJ5IHkuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2hpZnRlZFkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzaGlmdFkoIHk6IG51bWJlciApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoIHRoaXMubWluWCwgdGhpcy5taW5ZICsgeSwgdGhpcy5tYXhYLCB0aGlzLm1heFkgKyB5ICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBvdXIgYm91bmRzIGJ5ICh4LHkpLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNoaWZ0ZWQoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICovXG4gIHB1YmxpYyBzaGlmdFhZKCB4OiBudW1iZXIsIHk6IG51bWJlciApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoIHRoaXMubWluWCArIHgsIHRoaXMubWluWSArIHksIHRoaXMubWF4WCArIHgsIHRoaXMubWF4WSArIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2xhdGVzIG91ciBib3VuZHMgYnkgdGhlIGdpdmVuIHZlY3Rvci5cbiAgICovXG4gIHB1YmxpYyBzaGlmdCggdjogVmVjdG9yMiApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5zaGlmdFhZKCB2LngsIHYueSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJhbmdlIG9mIHRoZSB4LXZhbHVlcyBvZiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBnZXRYUmFuZ2UoKTogUmFuZ2Uge1xuICAgIHJldHVybiBuZXcgUmFuZ2UoIHRoaXMubWluWCwgdGhpcy5tYXhYICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgeC1yYW5nZSBvZiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBzZXRYUmFuZ2UoIHJhbmdlOiBSYW5nZSApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoIHJhbmdlLm1pbiwgdGhpcy5taW5ZLCByYW5nZS5tYXgsIHRoaXMubWF4WSApO1xuICB9XG5cbiAgcHVibGljIGdldCB4UmFuZ2UoKTogUmFuZ2UgeyByZXR1cm4gdGhpcy5nZXRYUmFuZ2UoKTsgfVxuXG4gIHB1YmxpYyBzZXQgeFJhbmdlKCByYW5nZTogUmFuZ2UgKSB7IHRoaXMuc2V0WFJhbmdlKCByYW5nZSApOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJhbmdlIG9mIHRoZSB5LXZhbHVlcyBvZiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBnZXRZUmFuZ2UoKTogUmFuZ2Uge1xuICAgIHJldHVybiBuZXcgUmFuZ2UoIHRoaXMubWluWSwgdGhpcy5tYXhZICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgeS1yYW5nZSBvZiB0aGlzIGJvdW5kcy5cbiAgICovXG4gIHB1YmxpYyBzZXRZUmFuZ2UoIHJhbmdlOiBSYW5nZSApOiBCb3VuZHMyIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoIHRoaXMubWluWCwgcmFuZ2UubWluLCB0aGlzLm1heFgsIHJhbmdlLm1heCApO1xuICB9XG5cbiAgcHVibGljIGdldCB5UmFuZ2UoKTogUmFuZ2UgeyByZXR1cm4gdGhpcy5nZXRZUmFuZ2UoKTsgfVxuXG4gIHB1YmxpYyBzZXQgeVJhbmdlKCByYW5nZTogUmFuZ2UgKSB7IHRoaXMuc2V0WVJhbmdlKCByYW5nZSApOyB9XG5cbiAgLyoqXG4gICAqIEZpbmQgYSBwb2ludCBpbiB0aGUgYm91bmRzIGNsb3Nlc3QgdG8gdGhlIHNwZWNpZmllZCBwb2ludC5cbiAgICpcbiAgICogQHBhcmFtIHggLSBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IHRvIHRlc3QuXG4gICAqIEBwYXJhbSB5IC0gWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byB0ZXN0LlxuICAgKiBAcGFyYW0gW3Jlc3VsdF0gLSBWZWN0b3IyIHRoYXQgY2FuIHN0b3JlIHRoZSByZXR1cm4gdmFsdWUgdG8gYXZvaWQgYWxsb2NhdGlvbnMuXG4gICAqL1xuICBwdWJsaWMgZ2V0Q2xvc2VzdFBvaW50KCB4OiBudW1iZXIsIHk6IG51bWJlciwgcmVzdWx0PzogVmVjdG9yMiApOiBWZWN0b3IyIHtcbiAgICBpZiAoIHJlc3VsdCApIHtcbiAgICAgIHJlc3VsdC5zZXRYWSggeCwgeSApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJlc3VsdCA9IG5ldyBWZWN0b3IyKCB4LCB5ICk7XG4gICAgfVxuICAgIGlmICggcmVzdWx0LnggPCB0aGlzLm1pblggKSB7IHJlc3VsdC54ID0gdGhpcy5taW5YOyB9XG4gICAgaWYgKCByZXN1bHQueCA+IHRoaXMubWF4WCApIHsgcmVzdWx0LnggPSB0aGlzLm1heFg7IH1cbiAgICBpZiAoIHJlc3VsdC55IDwgdGhpcy5taW5ZICkgeyByZXN1bHQueSA9IHRoaXMubWluWTsgfVxuICAgIGlmICggcmVzdWx0LnkgPiB0aGlzLm1heFkgKSB7IHJlc3VsdC55ID0gdGhpcy5tYXhZOyB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIHB1YmxpYyBmcmVlVG9Qb29sKCk6IHZvaWQge1xuICAgIEJvdW5kczIucG9vbC5mcmVlVG9Qb29sKCB0aGlzICk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHBvb2wgPSBuZXcgUG9vbCggQm91bmRzMiwge1xuICAgIGluaXRpYWxpemU6IEJvdW5kczIucHJvdG90eXBlLnNldE1pbk1heCxcbiAgICBkZWZhdWx0QXJndW1lbnRzOiBbIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdXG4gIH0gKTtcblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBCb3VuZHMyIG9iamVjdCwgd2l0aCB0aGUgZmFtaWxpYXIgcmVjdGFuZ2xlIGNvbnN0cnVjdGlvbiB3aXRoIHgsIHksIHdpZHRoLCBhbmQgaGVpZ2h0LlxuICAgKlxuICAgKiBAcGFyYW0geCAtIFRoZSBtaW5pbXVtIHZhbHVlIG9mIFggZm9yIHRoZSBib3VuZHMuXG4gICAqIEBwYXJhbSB5IC0gVGhlIG1pbmltdW0gdmFsdWUgb2YgWSBmb3IgdGhlIGJvdW5kcy5cbiAgICogQHBhcmFtIHdpZHRoIC0gVGhlIHdpZHRoIChtYXhYIC0gbWluWCkgb2YgdGhlIGJvdW5kcy5cbiAgICogQHBhcmFtIGhlaWdodCAtIFRoZSBoZWlnaHQgKG1heFkgLSBtaW5ZKSBvZiB0aGUgYm91bmRzLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByZWN0KCB4OiBudW1iZXIsIHk6IG51bWJlciwgd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIGIyKCB4LCB5LCB4ICsgd2lkdGgsIHkgKyBoZWlnaHQgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IEJvdW5kczIgb2JqZWN0IHdpdGggYSBnaXZlbiBvcmllbnRhdGlvbiAobWluL21heCBzcGVjaWZpZWQgZm9yIGJvdGggdGhlIGdpdmVuIChwcmltYXJ5KSBvcmllbnRhdGlvbixcbiAgICogYW5kIGFsc28gdGhlIHNlY29uZGFyeSBvcmllbnRhdGlvbikuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIG9yaWVudGVkKCBvcmllbnRhdGlvbjogT3JpZW50YXRpb24sIG1pblByaW1hcnk6IG51bWJlciwgbWluU2Vjb25kYXJ5OiBudW1iZXIsIG1heFByaW1hcnk6IG51bWJlciwgbWF4U2Vjb25kYXJ5OiBudW1iZXIgKTogQm91bmRzMiB7XG4gICAgcmV0dXJuIG9yaWVudGF0aW9uID09PSBPcmllbnRhdGlvbi5IT1JJWk9OVEFMID8gbmV3IEJvdW5kczIoXG4gICAgICBtaW5QcmltYXJ5LFxuICAgICAgbWluU2Vjb25kYXJ5LFxuICAgICAgbWF4UHJpbWFyeSxcbiAgICAgIG1heFNlY29uZGFyeVxuICAgICkgOiBuZXcgQm91bmRzMihcbiAgICAgIG1pblNlY29uZGFyeSxcbiAgICAgIG1pblByaW1hcnksXG4gICAgICBtYXhTZWNvbmRhcnksXG4gICAgICBtYXhQcmltYXJ5XG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IEJvdW5kczIgb2JqZWN0IHRoYXQgb25seSBjb250YWlucyB0aGUgc3BlY2lmaWVkIHBvaW50ICh4LHkpLiBVc2VmdWwgZm9yIGJlaW5nIGRpbGF0ZWQgdG8gZm9ybSBhXG4gICAqIGJvdW5kaW5nIGJveCBhcm91bmQgYSBwb2ludC4gTm90ZSB0aGF0IHRoZSBib3VuZHMgd2lsbCBub3QgYmUgXCJlbXB0eVwiIGFzIGl0IGNvbnRhaW5zICh4LHkpLCBidXQgaXQgd2lsbCBoYXZlXG4gICAqIHplcm8gYXJlYS4gVGhlIHggYW5kIHkgY29vcmRpbmF0ZXMgY2FuIGJlIHNwZWNpZmllZCBieSBudW1iZXJzIG9yIHdpdGggYXQgVmVjdG9yMlxuICAgKlxuICAgKiBAcGFyYW0geFxuICAgKiBAcGFyYW0geVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBwb2ludCggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogQm91bmRzMjtcbiAgc3RhdGljIHBvaW50KCB2OiBWZWN0b3IyICk6IEJvdW5kczI7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2V4cGxpY2l0LW1lbWJlci1hY2Nlc3NpYmlsaXR5XG4gIHN0YXRpYyBwb2ludCggeDogVmVjdG9yMiB8IG51bWJlciwgeT86IG51bWJlciApOiBCb3VuZHMyIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvZXhwbGljaXQtbWVtYmVyLWFjY2Vzc2liaWxpdHlcbiAgICBpZiAoIHggaW5zdGFuY2VvZiBWZWN0b3IyICkge1xuICAgICAgY29uc3QgcCA9IHg7XG4gICAgICByZXR1cm4gYjIoIHAueCwgcC55LCBwLngsIHAueSApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBiMiggeCwgeSEsIHgsIHkhICk7XG4gICAgfVxuICB9XG5cbiAgLy8gSGVscHMgdG8gaWRlbnRpZnkgdGhlIGRpbWVuc2lvbiBvZiB0aGUgYm91bmRzXG4gIHB1YmxpYyBpc0JvdW5kcyE6IGJvb2xlYW47XG4gIHB1YmxpYyBkaW1lbnNpb24/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEEgY29uc3RhbnQgQm91bmRzMiB3aXRoIG1pbmltdW1zID0gJFxcaW5mdHkkLCBtYXhpbXVtcyA9ICQtXFxpbmZ0eSQsIHNvIHRoYXQgaXQgcmVwcmVzZW50cyBcIm5vIGJvdW5kcyB3aGF0c29ldmVyXCIuXG4gICAqXG4gICAqIFRoaXMgYWxsb3dzIHVzIHRvIHRha2UgdGhlIHVuaW9uICh1bmlvbi9pbmNsdWRlQm91bmRzKSBvZiB0aGlzIGFuZCBhbnkgb3RoZXIgQm91bmRzMiB0byBnZXQgdGhlIG90aGVyIGJvdW5kcyBiYWNrLFxuICAgKiBlLmcuIEJvdW5kczIuTk9USElORy51bmlvbiggYm91bmRzICkuZXF1YWxzKCBib3VuZHMgKS4gVGhpcyBvYmplY3QgbmF0dXJhbGx5IHNlcnZlcyBhcyB0aGUgYmFzZSBjYXNlIGFzIGEgdW5pb24gb2ZcbiAgICogemVybyBib3VuZHMgb2JqZWN0cy5cbiAgICpcbiAgICogQWRkaXRpb25hbGx5LCBpbnRlcnNlY3Rpb25zIHdpdGggTk9USElORyB3aWxsIGFsd2F5cyByZXR1cm4gYSBCb3VuZHMyIGVxdWl2YWxlbnQgdG8gTk9USElORy5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgTk9USElORyA9IG5ldyBCb3VuZHMyKCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgKTtcblxuICAvKipcbiAgICogQSBjb25zdGFudCBCb3VuZHMyIHdpdGggbWluaW11bXMgPSAkLVxcaW5mdHkkLCBtYXhpbXVtcyA9ICRcXGluZnR5JCwgc28gdGhhdCBpdCByZXByZXNlbnRzIFwiYWxsIGJvdW5kc1wiLlxuICAgKlxuICAgKiBUaGlzIGFsbG93cyB1cyB0byB0YWtlIHRoZSBpbnRlcnNlY3Rpb24gKGludGVyc2VjdGlvbi9jb25zdHJhaW5Cb3VuZHMpIG9mIHRoaXMgYW5kIGFueSBvdGhlciBCb3VuZHMyIHRvIGdldCB0aGVcbiAgICogb3RoZXIgYm91bmRzIGJhY2ssIGUuZy4gQm91bmRzMi5FVkVSWVRISU5HLmludGVyc2VjdGlvbiggYm91bmRzICkuZXF1YWxzKCBib3VuZHMgKS4gVGhpcyBvYmplY3QgbmF0dXJhbGx5IHNlcnZlcyBhc1xuICAgKiB0aGUgYmFzZSBjYXNlIGFzIGFuIGludGVyc2VjdGlvbiBvZiB6ZXJvIGJvdW5kcyBvYmplY3RzLlxuICAgKlxuICAgKiBBZGRpdGlvbmFsbHksIHVuaW9ucyB3aXRoIEVWRVJZVEhJTkcgd2lsbCBhbHdheXMgcmV0dXJuIGEgQm91bmRzMiBlcXVpdmFsZW50IHRvIEVWRVJZVEhJTkcuXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IEVWRVJZVEhJTkcgPSBuZXcgQm91bmRzMiggTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZICk7XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBCb3VuZHMySU8gPSBuZXcgSU9UeXBlKCAnQm91bmRzMklPJywge1xuICAgIHZhbHVlVHlwZTogQm91bmRzMixcbiAgICBkb2N1bWVudGF0aW9uOiAnYSAyLWRpbWVuc2lvbmFsIGJvdW5kcyByZWN0YW5nbGUnLFxuICAgIHRvU3RhdGVPYmplY3Q6ICggYm91bmRzMjogQm91bmRzMiApID0+ICggeyBtaW5YOiBib3VuZHMyLm1pblgsIG1pblk6IGJvdW5kczIubWluWSwgbWF4WDogYm91bmRzMi5tYXhYLCBtYXhZOiBib3VuZHMyLm1heFkgfSApLFxuICAgIGZyb21TdGF0ZU9iamVjdDogKCBzdGF0ZU9iamVjdDogQm91bmRzMlN0YXRlT2JqZWN0ICkgPT4ge1xuICAgICAgcmV0dXJuIG5ldyBCb3VuZHMyKFxuICAgICAgICBJbmZpbml0ZU51bWJlcklPLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QubWluWCApLFxuICAgICAgICBJbmZpbml0ZU51bWJlcklPLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QubWluWSApLFxuICAgICAgICBJbmZpbml0ZU51bWJlcklPLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QubWF4WCApLFxuICAgICAgICBJbmZpbml0ZU51bWJlcklPLmZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3QubWF4WSApXG4gICAgICApO1xuICAgIH0sXG4gICAgc3RhdGVTY2hlbWE6IHtcbiAgICAgIG1pblg6IEluZmluaXRlTnVtYmVySU8sXG4gICAgICBtYXhYOiBJbmZpbml0ZU51bWJlcklPLFxuICAgICAgbWluWTogSW5maW5pdGVOdW1iZXJJTyxcbiAgICAgIG1heFk6IEluZmluaXRlTnVtYmVySU9cbiAgICB9XG4gIH0gKTtcbn1cblxuZG90LnJlZ2lzdGVyKCAnQm91bmRzMicsIEJvdW5kczIgKTtcblxuY29uc3QgYjIgPSBCb3VuZHMyLnBvb2wuY3JlYXRlLmJpbmQoIEJvdW5kczIucG9vbCApO1xuZG90LnJlZ2lzdGVyKCAnYjInLCBiMiApO1xuXG5Cb3VuZHMyLnByb3RvdHlwZS5pc0JvdW5kcyA9IHRydWU7XG5Cb3VuZHMyLnByb3RvdHlwZS5kaW1lbnNpb24gPSAyO1xuXG5mdW5jdGlvbiBjYXRjaEltbXV0YWJsZVNldHRlckxvd0hhbmdpbmdGcnVpdCggYm91bmRzOiBCb3VuZHMyICk6IHZvaWQge1xuICBib3VuZHMuc2V0TWluTWF4ID0gKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoICdBdHRlbXB0IHRvIHNldCBcInNldE1pbk1heFwiIG9mIGFuIGltbXV0YWJsZSBCb3VuZHMyIG9iamVjdCcgKTsgfTtcbiAgYm91bmRzLnNldCA9ICgpID0+IHsgdGhyb3cgbmV3IEVycm9yKCAnQXR0ZW1wdCB0byBzZXQgXCJzZXRcIiBvZiBhbiBpbW11dGFibGUgQm91bmRzMiBvYmplY3QnICk7IH07XG4gIGJvdW5kcy5pbmNsdWRlQm91bmRzID0gKCkgPT4geyB0aHJvdyBuZXcgRXJyb3IoICdBdHRlbXB0IHRvIHNldCBcImluY2x1ZGVCb3VuZHNcIiBvZiBhbiBpbW11dGFibGUgQm91bmRzMiBvYmplY3QnICk7IH07XG4gIGJvdW5kcy5jb25zdHJhaW5Cb3VuZHMgPSAoKSA9PiB7IHRocm93IG5ldyBFcnJvciggJ0F0dGVtcHQgdG8gc2V0IFwiY29uc3RyYWluQm91bmRzXCIgb2YgYW4gaW1tdXRhYmxlIEJvdW5kczIgb2JqZWN0JyApOyB9O1xuICBib3VuZHMuYWRkQ29vcmRpbmF0ZXMgPSAoKSA9PiB7IHRocm93IG5ldyBFcnJvciggJ0F0dGVtcHQgdG8gc2V0IFwiYWRkQ29vcmRpbmF0ZXNcIiBvZiBhbiBpbW11dGFibGUgQm91bmRzMiBvYmplY3QnICk7IH07XG4gIGJvdW5kcy50cmFuc2Zvcm0gPSAoKSA9PiB7IHRocm93IG5ldyBFcnJvciggJ0F0dGVtcHQgdG8gc2V0IFwidHJhbnNmb3JtXCIgb2YgYW4gaW1tdXRhYmxlIEJvdW5kczIgb2JqZWN0JyApOyB9O1xufVxuXG5pZiAoIGFzc2VydCApIHtcbiAgY2F0Y2hJbW11dGFibGVTZXR0ZXJMb3dIYW5naW5nRnJ1aXQoIEJvdW5kczIuRVZFUllUSElORyApO1xuICBjYXRjaEltbXV0YWJsZVNldHRlckxvd0hhbmdpbmdGcnVpdCggQm91bmRzMi5OT1RISU5HICk7XG59Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsTUFBTSxNQUFNLGlDQUFpQztBQUNwRCxPQUFPQyxnQkFBZ0IsTUFBcUMsMkNBQTJDO0FBQ3ZHLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBQ2xDLE9BQU9DLEdBQUcsTUFBTSxVQUFVO0FBRTFCLE9BQU9DLEtBQUssTUFBTSxZQUFZO0FBQzlCLE9BQU9DLElBQUksTUFBcUIsNEJBQTRCO0FBQzVELE9BQU9DLFdBQVcsTUFBTSxtQ0FBbUM7O0FBRTNEO0FB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/BinPacker.js
// Copyright 2015-2023, University of Colorado Boulder

/**
 * Given a rectangular containing area, takes care of allocating and deallocating smaller rectangular "bins" that fit
 * together inside the area and do not overlap. Optimized more for runtime CPU usage than space currently.
 *
 * For example:
 * #begin canvasExample binPacker 256x256
 * #on
 * var binPacker = new phet.dot.BinPacker( new dot.Bounds2( 0, 0, 256, 256 ) );
 * var bins = [];
 * for ( var i = 0; i < 100; i++ ) {
 *   var bin = binPacker.allocate( Math.random() * 64, Math.random() * 64 );
 *   if ( bin ) {
 *     bins.push( bin );
 *   }
 * }
 * #off
 *
 * context.strokeStyle = '#000';
 * bins.forEach( function( bin ) {
 *   var bounds = bin.bounds;
 *   context.strokeRect( bounds.x, bounds.y, bounds.width, bounds.height );
 * } );
 * #end canvasExample
 *
 * @author Sharfudeen Ashraf
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class BinPacker {
  /**
   * Creates a BinPacker with the specified containing bounds.
   *
   * @param bounds - The available bounds to pack bins inside.
   */
  constructor(bounds) {
    this.rootBin = new Bin(bounds, null);
  }

  /**
   * Allocates a bin with the specified width and height if possible (returning a {Bin}), otherwise returns null.
   */
  allocate(width, height) {
    // find a leaf bin that has available room (or null)
    const bin = this.rootBin.findAvailableBin(width, height);
    if (bin) {
      // split it into a sized sub-bin for our purpose that we will use, and other bins for future allocations
      const sizedBin = bin.split(width, height);

      // mark our bin as used
      sizedBin.use();
      return sizedBin;
    } else {
      return null;
    }
  }

  /**
   * Deallocates a bin, so that its area can be reused by future allocations.
   *
   * @param bin - The bin that was returned from allocate().
   */
  deallocate(bin) {
    bin.unuse();
  }
  toString() {
    let result = '';
    let padding = '';
    function binTree(bin) {
      result += `${padding + bin.toString()}\n`;
      padding = `${padding}  `;
      _.each(bin.children, binTree);
      padding = padding.substring(2);
    }
    binTree(this.rootBin);
    return result;
  }
}
js_dot.register('BinPacker', BinPacker);
class Bin {
  // Our containing bounds

  // Parent bin, if applicable

  // Whether our children are responsible for our area

  // Whether we are marked as a bin that is used

  // (dot-internal)

  /**
   * A rectangular bin that can be used itself or split into sub-bins.
   */
  constructor(bounds, parent) {
    this.bounds = bounds;
    this.parent = parent;
    this.isSplit = false;
    this.isUsed = false;
    this.children = [];
  }

  /**
   * Finds an unused bin with open area that is at least width-x-height in size. (dot-internal)
   */
  findAvailableBin(width, height) {
    assert && assert(width > 0 && height > 0, 'Empty bin requested?');

    // If we are marked as used ourself, we can't be used
    if (this.isUsed) {
      return null;
    }
    // If our bounds can't fit it, skip this entire sub-tree
    else if (this.bounds.width < width || this.bounds.height < height) {
      return null;
    }
    // If we have been split, check our children
    else if (this.isSplit) {
      for (let i = 0; i < this.children.length; i++) {
        const result = this.children[i].findAvailableBin(width, height);
        if (result) {
          return result;
        }
      }
      // No child can fit the area
      return null;
    }
    // Otherwise we are free and our dimensions are compatible (checked above)
    else {
      return this;
    }
  }

  /**
   * Splits this bin into multiple child bins, and returns the child with the dimensions (width,height). (dot-internal)
   */
  split(width, height) {
    assert && assert(this.bounds.width >= width && this.bounds.height >= height, 'Bin does not have space');
    assert && assert(!this.isSplit, 'Bin should not be re-split');
    assert && assert(!this.isUsed, 'Bin should not be split when used');
    assert && assert(width > 0 && height > 0, 'Empty bin requested?');

    // if our dimensions match exactly, don't split (return ourself)
    if (width === this.bounds.width && height === this.bounds.height) {
      return this;
    }

    // mark as split
    this.isSplit = true;

    // locations of the split
    const splitX = this.bounds.minX + width;
    const splitY = this.bounds.minY + height;

    /*
     * How an area is split (for now). In the future, splitting more after determining what we need to fit next would
     * potentially be better, but this preserves the width better (which many times we need).
     *
     *   ************************************
     *   *                  *               *
     *   *                  *               *
     *   *       main       *     right     *
     *   * (width x height) *               *
     *   *                  *               *
     *   ************************************
     *   *                                  *
     *   *              bottom              *
     *   *                                  *
     *   ************************************
     */
    const mainBounds = new Bounds2(this.bounds.minX, this.bounds.minY, splitX, splitY);
    const rightBounds = new Bounds2(splitX, this.bounds.minY, this.bounds.maxX, splitY);
    const bottomBounds = new Bounds2(this.bounds.minX, splitY, this.bounds.maxX, this.bounds.maxY);
    const mainBin = new Bin(mainBounds, this);
    this.children.push(mainBin);

    // only add right/bottom if they take up area
    if (rightBounds.hasNonzeroArea()) {
      this.children.push(new Bin(rightBounds, this));
    }
    if (bottomBounds.hasNonzeroArea()) {
      this.children.push(new Bin(bottomBounds, this));
    }
    return mainBin;
  }

  /**
   * Mark this bin as used. (dot-internal)
   */
  use() {
    assert && assert(!this.isSplit, 'Should not mark a split bin as used');
    assert && assert(!this.isUsed, 'Should not mark a used bin as used');
    this.isUsed = true;
  }

  /**
   * Mark this bin as not used, and attempt to collapse split parents if all children are unused. (dot-internal)
   */
  unuse() {
    assert && assert(this.isUsed, 'Can only unuse a used instance');
    this.isUsed = false;
    this.parent && this.parent.attemptToCollapse();
  }

  /**
   * If our bin can be collapsed (it is split and has children that are not used AND not split), then we will become
   * not split, and will remove our children. If successful, it will also call this on our parent, fully attempting
   * to clean up unused data structures.
   */
  attemptToCollapse() {
    assert && assert(this.isSplit, 'Should only attempt to collapse split bins');

    // Bail out if a single child isn't able to be collapsed. If it is not split or used, it won't have any children
    // or needs.
    for (let i = 0; i < this.children.length; i++) {
      const child = this.children[i];
      if (child.isSplit || child.isUsed) {
        return;
      }
    }

    // We can now collapse ourselves neatly
    this.children = [];
    this.isSplit = false;

    // And attempt to collapse our parent
    this.parent && this.parent.attemptToCollapse();
  }
  toString() {
    return this.bounds.toString() + (this.isUsed ? ' used' : '');
  }
}
BinPacker.Bin = Bin;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiZG90IiwiQmluUGFja2VyIiwiY29uc3RydWN0b3IiLCJib3VuZHMiLCJyb290QmluIiwiQmluIiwiYWxsb2NhdGUiLCJ3aWR0aCIsImhlaWdodCIsImJpbiIsImZpbmRBdmFpbGFibGVCaW4iLCJzaXplZEJpbiIsInNwbGl0IiwidXNlIiwiZGVhbGxvY2F0ZSIsInVudXNlIiwidG9TdHJpbmciLCJyZXN1bHQiLCJwYWRkaW5nIiwiYmluVHJlZSIsIl8iLCJlYWNoIiwiY2hpbGRyZW4iLCJzdWJzdHJpbmciLCJyZWdpc3RlciIsInBhcmVudCIsImlzU3BsaXQiLCJpc1VzZWQiLCJhc3NlcnQiLCJpIiwibGVuZ3RoIiwic3BsaXRYIiwibWluWCIsInNwbGl0WSIsIm1pblkiLCJtYWluQm91bmRzIiwicmlnaHRCb3VuZHMiLCJtYXhYIiwiYm90dG9tQm91bmRzIiwibWF4WSIsIm1haW5CaW4iLCJwdXNoIiwiaGFzTm9uemVyb0FyZWEiLCJhdHRlbXB0VG9Db2xsYXBzZSIsImNoaWxkIl0sInNvdXJjZXMiOlsiQmluUGFja2VyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjMsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEdpdmVuIGEgcmVjdGFuZ3VsYXIgY29udGFpbmluZyBhcmVhLCB0YWtlcyBjYXJlIG9mIGFsbG9jYXRpbmcgYW5kIGRlYWxsb2NhdGluZyBzbWFsbGVyIHJlY3Rhbmd1bGFyIFwiYmluc1wiIHRoYXQgZml0XG4gKiB0b2dldGhlciBpbnNpZGUgdGhlIGFyZWEgYW5kIGRvIG5vdCBvdmVybGFwLiBPcHRpbWl6ZWQgbW9yZSBmb3IgcnVudGltZSBDUFUgdXNhZ2UgdGhhbiBzcGFjZSBjdXJyZW50bHkuXG4gKlxuICogRm9yIGV4YW1wbGU6XG4gKiAjYmVnaW4gY2FudmFzRXhhbXBsZSBiaW5QYWNrZXIgMjU2eDI1NlxuICogI29uXG4gKiB2YXIgYmluUGFja2VyID0gbmV3IHBoZXQuZG90LkJpblBhY2tlciggbmV3IGRvdC5Cb3VuZHMyKCAwLCAwLCAyNTYsIDI1NiApICk7XG4gKiB2YXIgYmlucyA9IFtdO1xuICogZm9yICggdmFyIGkgPSAwOyBpIDwgMTAwOyBpKysgKSB7XG4gKiAgIHZhciBiaW4gPSBiaW5QYWNrZXIuYWxsb2NhdGUoIE1hdGgucmFuZG9tKCkgKiA2NCwgTWF0aC5yYW5kb20oKSAqIDY0ICk7XG4gKiAgIGlmICggYmluICkge1xuICogICAgIGJpbnMucHVzaCggYmluICk7XG4gKiAgIH1cbiAqIH1cbiAqICNvZmZcbiAqXG4gKiBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyMwMDAnO1xuICogYmlucy5mb3JFYWNoKCBmdW5jdGlvbiggYmluICkge1xuICogICB2YXIgYm91bmRzID0gYmluLmJvdW5kcztcbiAqICAgY29udGV4dC5zdHJva2VSZWN0KCBib3VuZHMueCwgYm91bmRzLnksIGJvdW5kcy53aWR0aCwgYm91bmRzLmhlaWdodCApO1xuICogfSApO1xuICogI2VuZCBjYW52YXNFeGFtcGxlXG4gKlxuICogQGF1dGhvciBTaGFyZnVkZWVuIEFzaHJhZlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBCb3VuZHMyIGZyb20gJy4vQm91bmRzMi5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQmluUGFja2VyIHtcblxuICBwcml2YXRlIHJlYWRvbmx5IHJvb3RCaW46IEJpbjtcblxuICAvKipcbiAgICogQ3JlYXRlcyBhIEJpblBhY2tlciB3aXRoIHRoZSBzcGVjaWZpZWQgY29udGFpbmluZyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSBib3VuZHMgLSBUaGUgYXZhaWxhYmxlIGJvdW5kcyB0byBwYWNrIGJpbnMgaW5zaWRlLlxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBib3VuZHM6IEJvdW5kczIgKSB7XG4gICAgdGhpcy5yb290QmluID0gbmV3IEJpbiggYm91bmRzLCBudWxsICk7XG4gIH1cblxuICAvKipcbiAgICogQWxsb2NhdGVzIGEgYmluIHdpdGggdGhlIHNwZWNpZmllZCB3aWR0aCBhbmQgaGVpZ2h0IGlmIHBvc3NpYmxlIChyZXR1cm5pbmcgYSB7QmlufSksIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXG4gICAqL1xuICBwdWJsaWMgYWxsb2NhdGUoIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyICk6IEJpbiB8IG51bGwge1xuICAgIC8vIGZpbmQgYSBsZWFmIGJpbiB0aGF0IGhhcyBhdmFpbGFibGUgcm9vbSAob3IgbnVsbClcbiAgICBjb25zdCBiaW4gPSB0aGlzLnJvb3RCaW4uZmluZEF2YWlsYWJsZUJpbiggd2lkdGgsIGhlaWdodCApO1xuXG4gICAgaWYgKCBiaW4gKSB7XG4gICAgICAvLyBzcGxpdCBpdCBpbnRvIGEgc2l6ZWQgc3ViLWJpbiBmb3Igb3VyIHB1cnBvc2UgdGhhdCB3ZSB3aWxsIHVzZSwgYW5kIG90aGVyIGJpbnMgZm9yIGZ1dHVyZSBhbGxvY2F0aW9uc1xuICAgICAgY29uc3Qgc2l6ZWRCaW4gPSBiaW4uc3BsaXQoIHdpZHRoLCBoZWlnaHQgKTtcblxuICAgICAgLy8gbWFyayBvdXIgYmluIGFzIHVzZWRcbiAgICAgIHNpemVkQmluLnVzZSgpO1xuXG4gICAgICByZXR1cm4gc2l6ZWRCaW47XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIERlYWxsb2NhdGVzIGEgYmluLCBzbyB0aGF0IGl0cyBhcmVhIGNhbiBiZSByZXVzZWQgYnkgZnV0dXJlIGFsbG9jYXRpb25zLlxuICAgKlxuICAgKiBAcGFyYW0gYmluIC0gVGhlIGJpbiB0aGF0IHdhcyByZXR1cm5lZCBmcm9tIGFsbG9jYXRlKCkuXG4gICAqL1xuICBwdWJsaWMgZGVhbGxvY2F0ZSggYmluOiBCaW4gKTogdm9pZCB7XG4gICAgYmluLnVudXNlKCk7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG5cbiAgICBsZXQgcGFkZGluZyA9ICcnO1xuXG4gICAgZnVuY3Rpb24gYmluVHJlZSggYmluOiBCaW4gKTogdm9pZCB7XG4gICAgICByZXN1bHQgKz0gYCR7cGFkZGluZyArIGJpbi50b1N0cmluZygpfVxcbmA7XG4gICAgICBwYWRkaW5nID0gYCR7cGFkZGluZ30gIGA7XG4gICAgICBfLmVhY2goIGJpbi5jaGlsZHJlbiwgYmluVHJlZSApO1xuICAgICAgcGFkZGluZyA9IHBhZGRpbmcuc3Vic3RyaW5nKCAyICk7XG4gICAgfVxuXG4gICAgYmluVHJlZSggdGhpcy5yb290QmluICk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBCaW46IHR5cGVvZiBCaW47XG59XG5cbmRvdC5yZWdpc3RlciggJ0JpblBhY2tlcicsIEJpblBhY2tlciApO1xuXG5leHBvcnQgY2xhc3MgQmluIHtcblxuICAvLyBPdXIgY29udGFpbmluZyBib3VuZHNcbiAgcHVibGljIGJvdW5kczogQm91bmRzMjtcblxuICAvLyBQYXJlbnQgYmluLCBpZiBhcHBsaWNhYmxlXG4gIHByaXZhdGUgcGFyZW50OiBCaW4gfCBudWxsO1xuXG4gIC8vIFdoZXRoZXIgb3VyIGNoaWxkcmVuIGFyZSByZXNwb25zaWJsZSBmb3Igb3VyIGFyZWFcbiAgcHJpdmF0ZSBpc1NwbGl0OiBib29sZWFuO1xuXG4gIC8vIFdoZXRoZXIgd2UgYXJlIG1hcmtlZCBhcyBhIGJpbiB0aGF0IGlzIHVzZWRcbiAgcHJpdmF0ZSBpc1VzZWQ6IGJvb2xlYW47XG5cbiAgcHVibGljIGNoaWxkcmVuOiBCaW5bXTsgLy8gKGRvdC1pbnRlcm5hbClcblxuICAvKipcbiAgICogQSByZWN0YW5ndWxhciBiaW4gdGhhdCBjYW4gYmUgdXNlZCBpdHNlbGYgb3Igc3BsaXQgaW50byBzdWItYmlucy5cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggYm91bmRzOiBCb3VuZHMyLCBwYXJlbnQ6IEJpbiB8IG51bGwgKSB7XG4gICAgdGhpcy5ib3VuZHMgPSBib3VuZHM7XG4gICAgdGhpcy5wYXJlbnQgPSBwYXJlbnQ7XG4gICAgdGhpcy5pc1NwbGl0ID0gZmFsc2U7XG4gICAgdGhpcy5pc1VzZWQgPSBmYWxzZTtcbiAgICB0aGlzLmNoaWxkcmVuID0gW107XG4gIH1cblxuICAvKipcbiAgICogRmluZHMgYW4gdW51c2VkIGJpbiB3aXRoIG9wZW4gYXJlYSB0aGF0IGlzIGF0IGxlYXN0IHdpZHRoLXgtaGVpZ2h0IGluIHNpemUuIChkb3QtaW50ZXJuYWwpXG4gICAqL1xuICBwdWJsaWMgZmluZEF2YWlsYWJsZUJpbiggd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgKTogQmluIHwgbnVsbCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggd2lkdGggPiAwICYmIGhlaWdodCA+IDAsICdFbXB0eSBiaW4gcmVxdWVzdGVkPycgKTtcblxuICAgIC8vIElmIHdlIGFyZSBtYXJrZWQgYXMgdXNlZCBvdXJzZWxmLCB3ZSBjYW4ndCBiZSB1c2VkXG4gICAgaWYgKCB0aGlzLmlzVXNlZCApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBJZiBvdXIgYm91bmRzIGNhbid0IGZpdCBpdCwgc2tpcCB0aGlzIGVudGlyZSBzdWItdHJlZVxuICAgIGVsc2UgaWYgKCB0aGlzLmJvdW5kcy53aWR0aCA8IHdpZHRoIHx8IHRoaXMuYm91bmRzLmhlaWdodCA8IGhlaWdodCApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBJZiB3ZSBoYXZlIGJlZW4gc3BsaXQsIGNoZWNrIG91ciBjaGlsZHJlblxuICAgIGVsc2UgaWYgKCB0aGlzLmlzU3BsaXQgKSB7XG4gICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSsrICkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmNoaWxkcmVuWyBpIF0uZmluZEF2YWlsYWJsZUJpbiggd2lkdGgsIGhlaWdodCApO1xuICAgICAgICBpZiAoIHJlc3VsdCApIHtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBObyBjaGlsZCBjYW4gZml0IHRoZSBhcmVhXG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgLy8gT3RoZXJ3aXNlIHdlIGFyZSBmcmVlIGFuZCBvdXIgZGltZW5zaW9ucyBhcmUgY29tcGF0aWJsZSAoY2hlY2tlZCBhYm92ZSlcbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTcGxpdHMgdGhpcyBiaW4gaW50byBtdWx0aXBsZSBjaGlsZCBiaW5zLCBhbmQgcmV0dXJucyB0aGUgY2hpbGQgd2l0aCB0aGUgZGltZW5zaW9ucyAod2lkdGgsaGVpZ2h0KS4gKGRvdC1pbnRlcm5hbClcbiAgICovXG4gIHB1YmxpYyBzcGxpdCggd2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIgKTogQmluIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmJvdW5kcy53aWR0aCA+PSB3aWR0aCAmJiB0aGlzLmJvdW5kcy5oZWlnaHQgPj0gaGVpZ2h0LFxuICAgICAgJ0JpbiBkb2VzIG5vdCBoYXZlIHNwYWNlJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmlzU3BsaXQsICdCaW4gc2hvdWxkIG5vdCBiZSByZS1zcGxpdCcgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhdGhpcy5pc1VzZWQsICdCaW4gc2hvdWxkIG5vdCBiZSBzcGxpdCB3aGVuIHVzZWQnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggd2lkdGggPiAwICYmIGhlaWdodCA+IDAsICdFbXB0eSBiaW4gcmVxdWVzdGVkPycgKTtcblxuICAgIC8vIGlmIG91ciBkaW1lbnNpb25zIG1hdGNoIGV4YWN0bHksIGRvbid0IHNwbGl0IChyZXR1cm4gb3Vyc2VsZilcbiAgICBpZiAoIHdpZHRoID09PSB0aGlzLmJvdW5kcy53aWR0aCAmJiBoZWlnaHQgPT09IHRoaXMuYm91bmRzLmhlaWdodCApIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cblxuICAgIC8vIG1hcmsgYXMgc3BsaXRcbiAgICB0aGlzLmlzU3BsaXQgPSB0cnVlO1xuXG4gICAgLy8gbG9jYXRpb25zIG9mIHRoZSBzcGxpdFxuICAgIGNvbnN0IHNwbGl0WCA9IHRoaXMuYm91bmRzLm1pblggKyB3aWR0aDtcbiAgICBjb25zdCBzcGxpdFkgPSB0aGlzLmJvdW5kcy5taW5ZICsgaGVpZ2h0O1xuXG4gICAgLypcbiAgICAgKiBIb3cgYW4gYXJlYSBpcyBzcGxpdCAoZm9yIG5vdykuIEluIHRoZSBmdXR1cmUsIHNwbGl0dGluZyBtb3JlIGFmdGVyIGRldGVybWluaW5nIHdoYXQgd2UgbmVlZCB0byBmaXQgbmV4dCB3b3VsZFxuICAgICAqIHBvdGVudGlhbGx5IGJlIGJldHRlciwgYnV0IHRoaXMgcHJlc2VydmVzIHRoZSB3aWR0aCBiZXR0ZXIgKHdoaWNoIG1hbnkgdGltZXMgd2UgbmVlZCkuXG4gICAgICpcbiAgICAgKiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqICAgKiAgICAgICAgICAgICAgICAgICogICAgICAgICAgICAgICAqXG4gICAgICogICAqICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICpcbiAgICAgKiAgICogICAgICAgbWFpbiAgICAgICAqICAgICByaWdodCAgICAgKlxuICAgICAqICAgKiAod2lkdGggeCBoZWlnaHQpICogICAgICAgICAgICAgICAqXG4gICAgICogICAqICAgICAgICAgICAgICAgICAgKiAgICAgICAgICAgICAgICpcbiAgICAgKiAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICAqICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAqXG4gICAgICogICAqICAgICAgICAgICAgICBib3R0b20gICAgICAgICAgICAgICpcbiAgICAgKiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKlxuICAgICAqICAgKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgICovXG4gICAgY29uc3QgbWFpbkJvdW5kcyA9IG5ldyBCb3VuZHMyKCB0aGlzLmJvdW5kcy5taW5YLCB0aGlzLmJvdW5kcy5taW5ZLCBzcGxpdFgsIHNwbGl0WSApO1xuICAgIGNvbnN0IHJpZ2h0Qm91bmRzID0gbmV3IEJvdW5kczIoIHNwbGl0WCwgdGhpcy5ib3VuZHMubWluWSwgdGhpcy5ib3VuZHMubWF4WCwgc3BsaXRZICk7XG4gICAgY29uc3QgYm90dG9tQm91bmRzID0gbmV3IEJvdW5kczIoIHRoaXMuYm91bmRzLm1pblgsIHNwbGl0WSwgdGhpcy5ib3VuZHMubWF4WCwgdGhpcy5ib3VuZHMubWF4WSApO1xuXG4gICAgY29uc3QgbWFpbkJpbiA9IG5ldyBCaW4oIG1haW5Cb3VuZHMsIHRoaXMgKTtcbiAgICB0aGlzLmNoaWxkcmVuLnB1c2goIG1haW5CaW4gKTtcblxuICAgIC8vIG9ubHkgYWRkIHJpZ2h0L2JvdHRvbSBpZiB0aGV5IHRha2UgdXAgYXJlYVxuICAgIGlmICggcmlnaHRCb3VuZHMuaGFzTm9uemVyb0FyZWEoKSApIHtcbiAgICAgIHRoaXMuY2hpbGRyZW4ucHVzaCggbmV3IEJpbiggcmlnaHRCb3VuZHMsIHRoaXMgKSApO1xuICAgIH1cbiAgICBpZiAoIGJvdHRvbUJvdW5kcy5oYXNOb256ZXJvQXJlYSgpICkge1xuICAgICAgdGhpcy5jaGlsZHJlbi5wdXNoKCBuZXcgQmluKCBib3R0b21Cb3VuZHMsIHRoaXMgKSApO1xuICAgIH1cblxuICAgIHJldHVybiBtYWluQmluO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcmsgdGhpcyBiaW4gYXMgdXNlZC4gKGRvdC1pbnRlcm5hbClcbiAgICovXG4gIHB1YmxpYyB1c2UoKTogdm9pZCB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXRoaXMuaXNTcGxpdCwgJ1Nob3VsZCBub3QgbWFyayBhIHNwbGl0IGJpbiBhcyB1c2VkJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICF0aGlzLmlzVXNlZCwgJ1Nob3VsZCBub3QgbWFyayBhIHVzZWQgYmluIGFzIHVzZWQnICk7XG5cbiAgICB0aGlzLmlzVXNlZCA9IHRydWU7XG4gIH1cblxuICAvKipcbiAgICogTWFyayB0aGlzIGJpbiBhcyBub3QgdXNlZCwgYW5kIGF0dGVtcHQgdG8gY29sbGFwc2Ugc3BsaXQgcGFyZW50cyBpZiBhbGwgY2hpbGRyZW4gYXJlIHVudXNlZC4gKGRvdC1pbnRlcm5hbClcbiAgICovXG4gIHB1YmxpYyB1bnVzZSgpOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmlzVXNlZCwgJ0NhbiBvbmx5IHVudXNlIGEgdXNlZCBpbnN0YW5jZScgKTtcblxuICAgIHRoaXMuaXNVc2VkID0gZmFsc2U7XG5cbiAgICB0aGlzLnBhcmVudCAmJiB0aGlzLnBhcmVudC5hdHRlbXB0VG9Db2xsYXBzZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIElmIG91ciBiaW4gY2FuIGJlIGNvbGxhcHNlZCAoaXQgaXMgc3BsaXQgYW5kIGhhcyBjaGlsZHJlbiB0aGF0IGFyZSBub3QgdXNlZCBBTkQgbm90IHNwbGl0KSwgdGhlbiB3ZSB3aWxsIGJlY29tZVxuICAgKiBub3Qgc3BsaXQsIGFuZCB3aWxsIHJlbW92ZSBvdXIgY2hpbGRyZW4uIElmIHN1Y2Nlc3NmdWwsIGl0IHdpbGwgYWxzbyBjYWxsIHRoaXMgb24gb3VyIHBhcmVudCwgZnVsbHkgYXR0ZW1wdGluZ1xuICAgKiB0byBjbGVhbiB1cCB1bnVzZWQgZGF0YSBzdHJ1Y3R1cmVzLlxuICAgKi9cbiAgcHJpdmF0ZSBhdHRlbXB0VG9Db2xsYXBzZSgpOiB2b2lkIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmlzU3BsaXQsICdTaG91bGQgb25seSBhdHRlbXB0IHRvIGNvbGxhcHNlIHNwbGl0IGJpbnMnICk7XG5cbiAgICAvLyBCYWlsIG91dCBpZiBhIHNpbmdsZSBjaGlsZCBpc24ndCBhYmxlIHRvIGJlIGNvbGxhcHNlZC4gSWYgaXQgaXMgbm90IHNwbGl0IG9yIHVzZWQsIGl0IHdvbid0IGhhdmUgYW55IGNoaWxkcmVuXG4gICAgLy8gb3IgbmVlZHMuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy5jaGlsZHJlblsgaSBdO1xuXG4gICAgICBpZiAoIGNoaWxkLmlzU3BsaXQgfHwgY2hpbGQuaXNVc2VkICkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV2UgY2FuIG5vdyBjb2xsYXBzZSBvdXJzZWx2ZXMgbmVhdGx5XG4gICAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMuaXNTcGxpdCA9IGZhbHNlO1xuXG4gICAgLy8gQW5kIGF0dGVtcHQgdG8gY29sbGFwc2Ugb3VyIHBhcmVudFxuICAgIHRoaXMucGFyZW50ICYmIHRoaXMucGFyZW50LmF0dGVtcHRUb0NvbGxhcHNlKCk7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5ib3VuZHMudG9TdHJpbmcoKSArICggdGhpcy5pc1VzZWQgPyAnIHVzZWQnIDogJycgKTtcbiAgfVxufVxuXG5CaW5QYWNrZXIuQmluID0gQmluO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLGNBQWM7QUFDbEMsT0FBT0MsR0FBRyxNQUFN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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Bounds3.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * A 3D cuboid-shaped bounded area (bounding box).
 *
 * There are a number of convenience functions to get locations and points on the Bounds. Currently we do not
 * store these with the Bounds3 instance, since we want to lower the memory footprint.
 *
 * minX, minY, minZ, maxX, maxY, and maxZ are actually stored. We don't do x,y,z,width,height,depth because this can't properly express
 * semi-infinite bounds (like a half-plane), or easily handle what Bounds3.NOTHING and Bounds3.EVERYTHING do with
 * the constructive solid areas.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */






class Bounds3 {
  /**
   * Creates a 3-dimensional bounds (bounding box).
   * @public
   *
   * @param {number} minX - The initial minimum X coordinate of the bounds.
   * @param {number} minY - The initial minimum Y coordinate of the bounds.
   * @param {number} minZ - The initial minimum Z coordinate of the bounds.
   * @param {number} maxX - The initial maximum X coordinate of the bounds.
   * @param {number} maxY - The initial maximum Y coordinate of the bounds.
   * @param {number} maxZ - The initial maximum Z coordinate of the bounds.
   */
  constructor(minX, minY, minZ, maxX, maxY, maxZ) {
    assert && assert(maxY !== undefined, 'Bounds3 requires 4 parameters');

    // @public {number} - The minimum X coordinate of the bounds.
    this.minX = minX;

    // @public {number} - The minimum Y coordinate of the bounds.
    this.minY = minY;

    // @public {number} - The minimum Z coordinate of the bounds.
    this.minZ = minZ;

    // @public {number} - The maximum X coordinate of the bounds.
    this.maxX = maxX;

    // @public {number} - The maximum Y coordinate of the bounds.
    this.maxY = maxY;

    // @public {number} - The maximum Z coordinate of the bounds.
    this.maxZ = maxZ;
  }

  /*---------------------------------------------------------------------------*
   * Properties
   *---------------------------------------------------------------------------*/

  /**
   * The width of the bounds, defined as maxX - minX.
   * @public
   *
   * @returns {number}
   */
  getWidth() {
    return this.maxX - this.minX;
  }
  get width() {
    return this.getWidth();
  }

  /**
   * The height of the bounds, defined as maxY - minY.
   * @public
   *
   * @returns {number}
   */
  getHeight() {
    return this.maxY - this.minY;
  }
  get height() {
    return this.getHeight();
  }

  /**
   * The depth of the bounds, defined as maxZ - minZ.
   * @public
   *
   * @returns {number}
   */
  getDepth() {
    return this.maxZ - this.minZ;
  }
  get depth() {
    return this.getDepth();
  }

  /*
   * Convenience locations
   * upper is in terms of the visual layout in Scenery and other programs, so the minY is the "upper", and minY is the "lower"
   *
   *             minX (x)     centerX        maxX
   *          ---------------------------------------
   * minY (y) | upperLeft   upperCenter   upperRight
   * centerY  | centerLeft    center      centerRight
   * maxY     | lowerLeft   lowerCenter   lowerRight
   */

  /**
   * Alias for minX, when thinking of the bounds as an (x,y,z,width,height,depth) cuboid.
   * @public
   *
   * @returns {number}
   */
  getX() {
    return this.minX;
  }
  get x() {
    return this.getX();
  }

  /**
   * Alias for minY, when thinking of the bounds as an (x,y,z,width,height,depth) cuboid.
   * @public
   *
   * @returns {number}
   */
  getY() {
    return this.minY;
  }
  get y() {
    return this.getY();
  }

  /**
   * Alias for minZ, when thinking of the bounds as an (x,y,z,width,height,depth) cuboid.
   * @public
   *
   * @returns {number}
   */
  getZ() {
    return this.minZ;
  }
  get z() {
    return this.getZ();
  }

  /**
   * Alias for minX, supporting the explicit getter function style.
   * @public
   *
   * @returns {number}
   */
  getMinX() {
    return this.minX;
  }

  /**
   * Alias for minY, supporting the explicit getter function style.
   * @public
   *
   * @returns {number}
   */
  getMinY() {
    return this.minY;
  }

  /**
   * Alias for minZ, supporting the explicit getter function style.
   * @public
   *
   * @returns {number}
   */
  getMinZ() {
    return this.minZ;
  }

  /**
   * Alias for maxX, supporting the explicit getter function style.
   * @public
   *
   * @returns {number}
   */
  getMaxX() {
    return this.maxX;
  }

  /**
   * Alias for maxY, supporting the explicit getter function style.
   * @public
   *
   * @returns {number}
   */
  getMaxY() {
    return this.maxY;
  }

  /**
   * Alias for maxZ, supporting the explicit getter function style.
   * @public
   *
   * @returns {number}
   */
  getMaxZ() {
    return this.maxZ;
  }

  /**
   * Alias for minX, when thinking in the UI-layout manner.
   * @public
   *
   * @returns {number}
   */
  getLeft() {
    return this.minX;
  }
  get left() {
    return this.minX;
  }

  /**
   * Alias for minY, when thinking in the UI-layout manner.
   * @public
   *
   * @returns {number}
   */
  getTop() {
    return this.minY;
  }
  get top() {
    return this.minY;
  }

  /**
   * Alias for minZ, when thinking in the UI-layout manner.
   * @public
   *
   * @returns {number}
   */
  getBack() {
    return this.minZ;
  }
  get back() {
    return this.minZ;
  }

  /**
   * Alias for maxX, when thinking in the UI-layout manner.
   * @public
   *
   * @returns {number}
   */
  getRight() {
    return this.maxX;
  }
  get right() {
    return this.maxX;
  }

  /**
   * Alias for maxY, when thinking in the UI-layout manner.
   * @public
   *
   * @returns {number}
   */
  getBottom() {
    return this.maxY;
  }
  get bottom() {
    return this.maxY;
  }

  /**
   * Alias for maxZ, when thinking in the UI-layout manner.
   * @public
   *
   * @returns {number}
   */
  getFront() {
    return this.maxZ;
  }
  get front() {
    return this.maxZ;
  }

  /**
   * The horizontal (X-coordinate) center of the bounds, averaging the minX and maxX.
   * @public
   *
   * @returns {number}
   */
  getCenterX() {
    return (this.maxX + this.minX) / 2;
  }
  get centerX() {
    return this.getCenterX();
  }

  /**
   * The vertical (Y-coordinate) center of the bounds, averaging the minY and maxY.
   * @public
   *
   * @returns {number}
   */
  getCenterY() {
    return (this.maxY + this.minY) / 2;
  }
  get centerY() {
    return this.getCenterY();
  }

  /**
   * The depthwise (Z-coordinate) center of the bounds, averaging the minZ and maxZ.
   * @public
   *
   * @returns {number}
   */
  getCenterZ() {
    return (this.maxZ + this.minZ) / 2;
  }
  get centerZ() {
    return this.getCenterZ();
  }

  /**
   * The point (centerX, centerY, centerZ), in the center of the bounds.
   * @public
   *
   * @returns {Vector3}
   */
  getCenter() {
    return new Vector3(this.getCenterX(), this.getCenterY(), this.getCenterZ());
  }
  get center() {
    return this.getCenter();
  }

  /**
   * Whether we have negative width, height or depth. Bounds3.NOTHING is a prime example of an empty Bounds3.
   * Bounds with width = height = depth = 0 are considered not empty, since they include the single (0,0,0) point.
   * @public
   *
   * @returns {boolean}
   */
  isEmpty() {
    return this.getWidth() < 0 || this.getHeight() < 0 || this.getDepth() < 0;
  }

  /**
   * Whether our minimums and maximums are all finite numbers. This will exclude Bounds3.NOTHING and Bounds3.EVERYTHING.
   * @public
   *
   * @returns {boolean}
   */
  isFinite() {
    return isFinite(this.minX) && isFinite(this.minY) && isFinite(this.minZ) && isFinite(this.maxX) && isFinite(this.maxY) && isFinite(this.maxZ);
  }

  /**
   * Whether this bounds has a non-zero area (non-zero positive width, height and depth).
   * @public
   *
   * @returns {boolean}
   */
  hasNonzeroArea() {
    return this.getWidth() > 0 && this.getHeight() > 0 && this.getDepth() > 0;
  }

  /**
   * Whether this bounds has a finite and non-negative width, height and depth.
   * @public
   *
   * @returns {boolean}
   */
  isValid() {
    return !this.isEmpty() && this.isFinite();
  }

  /**
   * Whether the coordinates are contained inside the bounding box, or are on the boundary.
   * @public
   *
   * @param {number} x - X coordinate of the point to check
   * @param {number} y - Y coordinate of the point to check
   * @param {number} z - Z coordinate of the point to check
   * @returns {boolean}
   */
  containsCoordinates(x, y, z) {
    return this.minX <= x && x <= this.maxX && this.minY <= y && y <= this.maxY && this.minZ <= z && z <= this.maxZ;
  }

  /**
   * Whether the point is contained inside the bounding box, or is on the boundary.
   * @public
   *
   * @param {Vector3} point
   * @returns {boolean}
   */
  containsPoint(point) {
    return this.containsCoordinates(point.x, point.y, point.z);
  }

  /**
   * Whether this bounding box completely contains the bounding box passed as a parameter. The boundary of a box is
   * considered to be "contained".
   * @public
   *
   * @param {Bounds3} bounds
   * @returns {boolean}
   */
  containsBounds(bounds) {
    return this.minX <= bounds.minX && this.maxX >= bounds.maxX && this.minY <= bounds.minY && this.maxY >= bounds.maxY && this.minZ <= bounds.minZ && this.maxZ >= bounds.maxZ;
  }

  /**
   * Whether this and another bounding box have any points of intersection (including touching boundaries).
   * @public
   *
   * @param {Bounds3} bounds
   * @returns {boolean}
   */
  intersectsBounds(bounds) {
    // TODO: more efficient way of doing this?
    return !this.intersection(bounds).isEmpty();
  }

  /**
   * Debugging string for the bounds.
   * @public
   *
   * @returns {string}
   */
  toString() {
    return `[x:(${this.minX},${this.maxX}),y:(${this.minY},${this.maxY}),z:(${this.minZ},${this.maxZ})]`;
  }

  /**
   * Exact equality comparison between this bounds and another bounds.
   * @public
   *
   * @param {Bounds3} other
   * @returns {boolean} - Whether the two bounds are equal
   */
  equals(other) {
    return this.minX === other.minX && this.minY === other.minY && this.minZ === other.minZ && this.maxX === other.maxX && this.maxY === other.maxY && this.maxZ === other.maxZ;
  }

  /**
   * Approximate equality comparison between this bounds and another bounds.
   * @public
   *
   * @param {Bounds3} other
   * @param {number} epsilon
   * @returns {boolean} - Whether difference between the two bounds has no min/max with an absolute value greater
   *                      than epsilon.
   */
  equalsEpsilon(other, epsilon) {
    epsilon = epsilon !== undefined ? epsilon : 0;
    const thisFinite = this.isFinite();
    const otherFinite = other.isFinite();
    if (thisFinite && otherFinite) {
      // both are finite, so we can use Math.abs() - it would fail with non-finite values like Infinity
      return Math.abs(this.minX - other.minX) < epsilon && Math.abs(this.minY - other.minY) < epsilon && Math.abs(this.minZ - other.minZ) < epsilon && Math.abs(this.maxX - other.maxX) < epsilon && Math.abs(this.maxY - other.maxY) < epsilon && Math.abs(this.maxZ - other.maxZ) < epsilon;
    } else if (thisFinite !== otherFinite) {
      return false; // one is finite, the other is not. definitely not equal
    } else if (this === other) {
      return true; // exact same instance, must be equal
    } else {
      // epsilon only applies on finite dimensions. due to JS's handling of isFinite(), it's faster to check the sum of both
      return (isFinite(this.minX + other.minX) ? Math.abs(this.minX - other.minX) < epsilon : this.minX === other.minX) && (isFinite(this.minY + other.minY) ? Math.abs(this.minY - other.minY) < epsilon : this.minY === other.minY) && (isFinite(this.minZ + other.minZ) ? Math.abs(this.minZ - other.minZ) < epsilon : this.minZ === other.minZ) && (isFinite(this.maxX + other.maxX) ? Math.abs(this.maxX - other.maxX) < epsilon : this.maxX === other.maxX) && (isFinite(this.maxY + other.maxY) ? Math.abs(this.maxY - other.maxY) < epsilon : this.maxY === other.maxY) && (isFinite(this.maxZ + other.maxZ) ? Math.abs(this.maxZ - other.maxZ) < epsilon : this.maxZ === other.maxZ);
    }
  }

  /*---------------------------------------------------------------------------*
   * Immutable operations
   *---------------------------------------------------------------------------*/

  /**
   * Creates a copy of this bounds, or if a bounds is passed in, set that bounds's values to ours.
   * @public
   *
   * This is the immutable form of the function set(), if a bounds is provided. This will return a new bounds, and
   * will not modify this bounds.
   *
   * @param {Bounds3} [bounds] - If not provided, creates a new Bounds3 with filled in values. Otherwise, fills in the
   *                             values of the provided bounds so that it equals this bounds.
   * @returns {Bounds3}
   */
  copy(bounds) {
    if (bounds) {
      return bounds.set(this);
    } else {
      return new Bounds3(this.minX, this.minY, this.minZ, this.maxX, this.maxY, this.maxZ);
    }
  }

  /**
   * The smallest bounds that contains both this bounds and the input bounds, returned as a copy.
   * @public
   *
   * This is the immutable form of the function includeBounds(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {Bounds3} bounds
   * @returns {Bounds3}
   */
  union(bounds) {
    return new Bounds3(Math.min(this.minX, bounds.minX), Math.min(this.minY, bounds.minY), Math.min(this.minZ, bounds.minZ), Math.max(this.maxX, bounds.maxX), Math.max(this.maxY, bounds.maxY), Math.max(this.maxZ, bounds.maxZ));
  }

  /**
   * The smallest bounds that is contained by both this bounds and the input bounds, returned as a copy.
   * @public
   *
   * This is the immutable form of the function constrainBounds(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {Bounds3} bounds
   * @returns {Bounds3}
   */
  intersection(bounds) {
    return new Bounds3(Math.max(this.minX, bounds.minX), Math.max(this.minY, bounds.minY), Math.max(this.minZ, bounds.minZ), Math.min(this.maxX, bounds.maxX), Math.min(this.maxY, bounds.maxY), Math.min(this.maxZ, bounds.maxZ));
  }

  // TODO: difference should be well-defined, but more logic is needed to compute

  /**
   * The smallest bounds that contains this bounds and the point (x,y,z), returned as a copy.
   * @public
   *
   * This is the immutable form of the function addCoordinates(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Bounds3}
   */
  withCoordinates(x, y, z) {
    return new Bounds3(Math.min(this.minX, x), Math.min(this.minY, y), Math.min(this.minZ, z), Math.max(this.maxX, x), Math.max(this.maxY, y), Math.max(this.maxZ, z));
  }

  /**
   * The smallest bounds that contains this bounds and the input point, returned as a copy.
   * @public
   *
   * This is the immutable form of the function addPoint(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {Vector3} point
   * @returns {Bounds3}
   */
  withPoint(point) {
    return this.withCoordinates(point.x, point.y, point.z);
  }

  /**
   * A copy of this bounds, with minX replaced with the input.
   * @public
   *
   * This is the immutable form of the function setMinX(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} minX
   * @returns {Bounds3}
   */
  withMinX(minX) {
    return new Bounds3(minX, this.minY, this.minZ, this.maxX, this.maxY, this.maxZ);
  }

  /**
   * A copy of this bounds, with minY replaced with the input.
   * @public
   *
   * This is the immutable form of the function setMinY(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} minY
   * @returns {Bounds3}
   */
  withMinY(minY) {
    return new Bounds3(this.minX, minY, this.minZ, this.maxX, this.maxY, this.maxZ);
  }

  /**
   * A copy of this bounds, with minZ replaced with the input.
   * @public
   *
   * This is the immutable form of the function setMinZ(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} minZ
   * @returns {Bounds3}
   */
  withMinZ(minZ) {
    return new Bounds3(this.minX, this.minY, minZ, this.maxX, this.maxY, this.maxZ);
  }

  /**
   * A copy of this bounds, with maxX replaced with the input.
   * @public
   *
   * This is the immutable form of the function setMaxX(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} maxX
   * @returns {Bounds3}
   */
  withMaxX(maxX) {
    return new Bounds3(this.minX, this.minY, this.minZ, maxX, this.maxY, this.maxZ);
  }

  /**
   * A copy of this bounds, with maxY replaced with the input.
   * @public
   *
   * This is the immutable form of the function setMaxY(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} maxY
   * @returns {Bounds3}
   */
  withMaxY(maxY) {
    return new Bounds3(this.minX, this.minY, this.minZ, this.maxX, maxY, this.maxZ);
  }

  /**
   * A copy of this bounds, with maxZ replaced with the input.
   * @public
   *
   * This is the immutable form of the function setMaxZ(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} maxZ
   * @returns {Bounds3}
   */
  withMaxZ(maxZ) {
    return new Bounds3(this.minX, this.minY, this.minZ, this.maxX, this.maxY, maxZ);
  }

  /**
   * A copy of this bounds, with the minimum values rounded down to the nearest integer, and the maximum values
   * rounded up to the nearest integer. This causes the bounds to expand as necessary so that its boundaries
   * are integer-aligned.
   * @public
   *
   * This is the immutable form of the function roundOut(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @returns {Bounds3}
   */
  roundedOut() {
    return new Bounds3(Math.floor(this.minX), Math.floor(this.minY), Math.floor(this.minZ), Math.ceil(this.maxX), Math.ceil(this.maxY), Math.ceil(this.maxZ));
  }

  /**
   * A copy of this bounds, with the minimum values rounded up to the nearest integer, and the maximum values
   * rounded down to the nearest integer. This causes the bounds to contract as necessary so that its boundaries
   * are integer-aligned.
   * @public
   *
   * This is the immutable form of the function roundIn(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @returns {Bounds3}
   */
  roundedIn() {
    return new Bounds3(Math.ceil(this.minX), Math.ceil(this.minY), Math.ceil(this.minZ), Math.floor(this.maxX), Math.floor(this.maxY), Math.floor(this.maxZ));
  }

  /**
   * A bounding box (still axis-aligned) that contains the transformed shape of this bounds, applying the matrix as
   * an affine transformation.
   * @public
   *
   * NOTE: bounds.transformed( matrix ).transformed( inverse ) may be larger than the original box, if it includes
   * a rotation that isn't a multiple of $\pi/2$. This is because the returned bounds may expand in area to cover
   * ALL of the corners of the transformed bounding box.
   *
   * This is the immutable form of the function transform(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {Matrix4} matrix
   * @returns {Bounds3}
   */
  transformed(matrix) {
    return this.copy().transform(matrix);
  }

  /**
   * A bounding box that is expanded on all sides by the specified amount.)
   * @public
   *
   * This is the immutable form of the function dilate(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} d
   * @returns {Bounds3}
   */
  dilated(d) {
    return this.dilatedXYZ(d, d, d);
  }

  /**
   * A bounding box that is expanded horizontally (on the left and right) by the specified amount.
   * @public
   *
   * This is the immutable form of the function dilateX(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} x
   * @returns {Bounds3}
   */
  dilatedX(x) {
    return new Bounds3(this.minX - x, this.minY, this.minZ, this.maxX + x, this.maxY, this.maxZ);
  }

  /**
   * A bounding box that is expanded vertically (on the top and bottom) by the specified amount.
   * @public
   *
   * This is the immutable form of the function dilateY(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} y
   * @returns {Bounds3}
   */
  dilatedY(y) {
    return new Bounds3(this.minX, this.minY - y, this.minZ, this.maxX, this.maxY + y, this.maxZ);
  }

  /**
   * A bounding box that is expanded depth-wise (on the front and back) by the specified amount.
   * @public
   *
   * This is the immutable form of the function dilateZ(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} z
   * @returns {Bounds3}
   */
  dilatedZ(z) {
    return new Bounds3(this.minX, this.minY, this.minZ - z, this.maxX, this.maxY, this.maxZ + z);
  }

  /**
   * A bounding box that is expanded on all sides, with different amounts of expansion along each axis.
   * Will be identical to the bounds returned by calling bounds.dilatedX( x ).dilatedY( y ).dilatedZ( z ).
   * @public
   *
   * This is the immutable form of the function dilateXYZ(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} x - Amount to dilate horizontally (for each side)
   * @param {number} y - Amount to dilate vertically (for each side)
   * @param {number} z - Amount to dilate depth-wise (for each side)
   * @returns {Bounds3}
   */
  dilatedXYZ(x, y, z) {
    return new Bounds3(this.minX - x, this.minY - y, this.minZ - z, this.maxX + x, this.maxY + y, this.maxZ + z);
  }

  /**
   * A bounding box that is contracted on all sides by the specified amount.
   * @public
   *
   * This is the immutable form of the function erode(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} amount
   * @returns {Bounds3}
   */
  eroded(amount) {
    return this.dilated(-amount);
  }

  /**
   * A bounding box that is contracted horizontally (on the left and right) by the specified amount.
   * @public
   *
   * This is the immutable form of the function erodeX(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} x
   * @returns {Bounds3}
   */
  erodedX(x) {
    return this.dilatedX(-x);
  }

  /**
   * A bounding box that is contracted vertically (on the top and bottom) by the specified amount.
   * @public
   *
   * This is the immutable form of the function erodeY(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} y
   * @returns {Bounds3}
   */
  erodedY(y) {
    return this.dilatedY(-y);
  }

  /**
   * A bounding box that is contracted depth-wise (on the front and back) by the specified amount.
   * @public
   *
   * This is the immutable form of the function erodeZ(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} z
   * @returns {Bounds3}
   */
  erodedZ(z) {
    return this.dilatedZ(-z);
  }

  /**
   * A bounding box that is contracted on all sides, with different amounts of contraction along each axis.
   * @public
   *
   * This is the immutable form of the function erodeXYZ(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} x - Amount to erode horizontally (for each side)
   * @param {number} y - Amount to erode vertically (for each side)
   * @param {number} z - Amount to erode depth-wise (for each side)
   * @returns {Bounds3}
   */
  erodedXYZ(x, y, z) {
    return this.dilatedXYZ(-x, -y, -z);
  }

  /**
   * Our bounds, translated horizontally by x, returned as a copy.
   * @public
   *
   * This is the immutable form of the function shiftX(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} x
   * @returns {Bounds3}
   */
  shiftedX(x) {
    return new Bounds3(this.minX + x, this.minY, this.minZ, this.maxX + x, this.maxY, this.maxZ);
  }

  /**
   * Our bounds, translated vertically by y, returned as a copy.
   * @public
   *
   * This is the immutable form of the function shiftY(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} y
   * @returns {Bounds3}
   */
  shiftedY(y) {
    return new Bounds3(this.minX, this.minY + y, this.minZ, this.maxX, this.maxY + y, this.maxZ);
  }

  /**
   * Our bounds, translated depth-wise by z, returned as a copy.
   * @public
   *
   * This is the immutable form of the function shiftZ(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} z
   * @returns {Bounds3}
   */
  shiftedZ(z) {
    return new Bounds3(this.minX, this.minY, this.minZ + z, this.maxX, this.maxY, this.maxZ + z);
  }

  /**
   * Our bounds, translated by (x,y,z), returned as a copy.
   * @public
   *
   * This is the immutable form of the function shift(). This will return a new bounds, and will not modify
   * this bounds.
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Bounds3}
   */
  shiftedXYZ(x, y, z) {
    return new Bounds3(this.minX + x, this.minY + y, this.minZ + z, this.maxX + x, this.maxY + y, this.maxZ + z);
  }

  /**
   * Returns our bounds, translated by a vector, returned as a copy.
   * @public
   *
   * @param {Vector3} v
   * @returns {Bounds3}
   */
  shifted(v) {
    return this.shiftedXYZ(v.x, v.y, v.z);
  }

  /*---------------------------------------------------------------------------*
   * Mutable operations
   *
   * All mutable operations should call one of the following:
   *   setMinMax, setMinX, setMinY, setMinZ, setMaxX, setMaxY, setMaxZ
   *---------------------------------------------------------------------------*/

  /**
   * Sets each value for this bounds, and returns itself.
   * @public
   *
   * @param {number} minX
   * @param {number} minY
   * @param {number} minZ
   * @param {number} maxX
   * @param {number} maxY
   * @param {number} maxZ
   * @returns {Bounds3}
   */
  setMinMax(minX, minY, minZ, maxX, maxY, maxZ) {
    this.minX = minX;
    this.minY = minY;
    this.minZ = minZ;
    this.maxX = maxX;
    this.maxY = maxY;
    this.maxZ = maxZ;
    return this;
  }

  /**
   * Sets the value of minX.
   * @public
   *
   * This is the mutable form of the function withMinX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} minX
   * @returns {Bounds3}
   */
  setMinX(minX) {
    this.minX = minX;
    return this;
  }

  /**
   * Sets the value of minY.
   * @public
   *
   * This is the mutable form of the function withMinY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} minY
   * @returns {Bounds3}
   */
  setMinY(minY) {
    this.minY = minY;
    return this;
  }

  /**
   * Sets the value of minZ.
   * @public
   *
   * This is the mutable form of the function withMinZ(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} minZ
   * @returns {Bounds3}
   */
  setMinZ(minZ) {
    this.minZ = minZ;
    return this;
  }

  /**
   * Sets the value of maxX.
   * @public
   *
   * This is the mutable form of the function withMaxX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} maxX
   * @returns {Bounds3}
   */
  setMaxX(maxX) {
    this.maxX = maxX;
    return this;
  }

  /**
   * Sets the value of maxY.
   * @public
   *
   * This is the mutable form of the function withMaxY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} maxY
   * @returns {Bounds3}
   */
  setMaxY(maxY) {
    this.maxY = maxY;
    return this;
  }

  /**
   * Sets the value of maxZ.
   * @public
   *
   * This is the mutable form of the function withMaxZ(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} maxZ
   * @returns {Bounds3}
   */
  setMaxZ(maxZ) {
    this.maxZ = maxZ;
    return this;
  }

  /**
   * Sets the values of this bounds to be equal to the input bounds.
   * @public
   *
   * This is the mutable form of the function copy(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {Bounds3} bounds
   * @returns {Bounds3}
   */
  set(bounds) {
    return this.setMinMax(bounds.minX, bounds.minY, bounds.minZ, bounds.maxX, bounds.maxY, bounds.maxZ);
  }

  /**
   * Modifies this bounds so that it contains both its original bounds and the input bounds.
   * @public
   *
   * This is the mutable form of the function union(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {Bounds3} bounds
   * @returns {Bounds3}
   */
  includeBounds(bounds) {
    return this.setMinMax(Math.min(this.minX, bounds.minX), Math.min(this.minY, bounds.minY), Math.min(this.minZ, bounds.minZ), Math.max(this.maxX, bounds.maxX), Math.max(this.maxY, bounds.maxY), Math.max(this.maxZ, bounds.maxZ));
  }

  /**
   * Modifies this bounds so that it is the largest bounds contained both in its original bounds and in the input bounds.
   * @public
   *
   * This is the mutable form of the function intersection(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {Bounds3} bounds
   * @returns {Bounds3}
   */
  constrainBounds(bounds) {
    return this.setMinMax(Math.max(this.minX, bounds.minX), Math.max(this.minY, bounds.minY), Math.max(this.minZ, bounds.minZ), Math.min(this.maxX, bounds.maxX), Math.min(this.maxY, bounds.maxY), Math.min(this.maxZ, bounds.maxZ));
  }

  /**
   * Modifies this bounds so that it contains both its original bounds and the input point (x,y,z).
   * @public
   *
   * This is the mutable form of the function withCoordinates(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Bounds3}
   */
  addCoordinates(x, y, z) {
    return this.setMinMax(Math.min(this.minX, x), Math.min(this.minY, y), Math.min(this.minZ, z), Math.max(this.maxX, x), Math.max(this.maxY, y), Math.max(this.maxZ, z));
  }

  /**
   * Modifies this bounds so that it contains both its original bounds and the input point.
   * @public
   *
   * This is the mutable form of the function withPoint(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {Vector3} point
   * @returns {Bounds3}
   */
  addPoint(point) {
    return this.addCoordinates(point.x, point.y, point.z);
  }

  /**
   * Modifies this bounds so that its boundaries are integer-aligned, rounding the minimum boundaries down and the
   * maximum boundaries up (expanding as necessary).
   * @public
   *
   * This is the mutable form of the function roundedOut(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @returns {Bounds3}
   */
  roundOut() {
    return this.setMinMax(Math.floor(this.minX), Math.floor(this.minY), Math.floor(this.minZ), Math.ceil(this.maxX), Math.ceil(this.maxY), Math.ceil(this.maxZ));
  }

  /**
   * Modifies this bounds so that its boundaries are integer-aligned, rounding the minimum boundaries up and the
   * maximum boundaries down (contracting as necessary).
   * @public
   *
   * This is the mutable form of the function roundedIn(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @returns {Bounds3}
   */
  roundIn() {
    return this.setMinMax(Math.ceil(this.minX), Math.ceil(this.minY), Math.ceil(this.minZ), Math.floor(this.maxX), Math.floor(this.maxY), Math.floor(this.maxZ));
  }

  /**
   * Modifies this bounds so that it would fully contain a transformed version if its previous value, applying the
   * matrix as an affine transformation.
   * @public
   *
   * NOTE: bounds.transform( matrix ).transform( inverse ) may be larger than the original box, if it includes
   * a rotation that isn't a multiple of $\pi/2$. This is because the bounds may expand in area to cover
   * ALL of the corners of the transformed bounding box.
   *
   * This is the mutable form of the function transformed(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {Matrix4} matrix
   * @returns {Bounds3}
   */
  transform(matrix) {
    // do nothing
    if (this.isEmpty()) {
      return this;
    }

    // optimization to bail for identity matrices
    if (matrix.isIdentity()) {
      return this;
    }
    let minX = Number.POSITIVE_INFINITY;
    let minY = Number.POSITIVE_INFINITY;
    let minZ = Number.POSITIVE_INFINITY;
    let maxX = Number.NEGATIVE_INFINITY;
    let maxY = Number.NEGATIVE_INFINITY;
    let maxZ = Number.NEGATIVE_INFINITY;

    // using mutable vector so we don't create excessive instances of Vector2 during this
    // make sure all 4 corners are inside this transformed bounding box
    const vector = new Vector3(0, 0, 0);
    function withIt(vector) {
      minX = Math.min(minX, vector.x);
      minY = Math.min(minY, vector.y);
      minZ = Math.min(minZ, vector.z);
      maxX = Math.max(maxX, vector.x);
      maxY = Math.max(maxY, vector.y);
      maxZ = Math.max(maxZ, vector.z);
    }
    withIt(matrix.multiplyVector3(vector.setXYZ(this.minX, this.minY, this.minZ)));
    withIt(matrix.multiplyVector3(vector.setXYZ(this.minX, this.maxY, this.minZ)));
    withIt(matrix.multiplyVector3(vector.setXYZ(this.maxX, this.minY, this.minZ)));
    withIt(matrix.multiplyVector3(vector.setXYZ(this.maxX, this.maxY, this.minZ)));
    withIt(matrix.multiplyVector3(vector.setXYZ(this.minX, this.minY, this.maxZ)));
    withIt(matrix.multiplyVector3(vector.setXYZ(this.minX, this.maxY, this.maxZ)));
    withIt(matrix.multiplyVector3(vector.setXYZ(this.maxX, this.minY, this.maxZ)));
    withIt(matrix.multiplyVector3(vector.setXYZ(this.maxX, this.maxY, this.maxZ)));
    return this.setMinMax(minX, minY, minZ, maxX, maxY, maxZ);
  }

  /**
   * Expands this bounds on all sides by the specified amount.
   * @public
   *
   * This is the mutable form of the function dilated(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} d
   * @returns {Bounds3}
   */
  dilate(d) {
    return this.dilateXYZ(d, d, d);
  }

  /**
   * Expands this bounds horizontally (left and right) by the specified amount.
   * @public
   *
   * This is the mutable form of the function dilatedX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} x
   * @returns {Bounds3}
   */
  dilateX(x) {
    return this.setMinMax(this.minX - x, this.minY, this.minZ, this.maxX + x, this.maxY, this.maxZ);
  }

  /**
   * Expands this bounds vertically (top and bottom) by the specified amount.
   * @public
   *
   * This is the mutable form of the function dilatedY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} y
   * @returns {Bounds3}
   */
  dilateY(y) {
    return this.setMinMax(this.minX, this.minY - y, this.minZ, this.maxX, this.maxY + y, this.maxZ);
  }

  /**
   * Expands this bounds depth-wise (front and back) by the specified amount.
   * @public
   *
   * This is the mutable form of the function dilatedZ(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} z
   * @returns {Bounds3}
   */
  dilateZ(z) {
    return this.setMinMax(this.minX, this.minY, this.minZ - z, this.maxX, this.maxY, this.maxZ + z);
  }

  /**
   * Expands this bounds independently along each axis. Will be equal to calling
   * bounds.dilateX( x ).dilateY( y ).dilateZ( z ).
   * @public
   *
   * This is the mutable form of the function dilatedXYZ(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Bounds3}
   */
  dilateXYZ(x, y, z) {
    return this.setMinMax(this.minX - x, this.minY - y, this.minZ - z, this.maxX + x, this.maxY + y, this.maxZ + z);
  }

  /**
   * Contracts this bounds on all sides by the specified amount.
   * @public
   *
   * This is the mutable form of the function eroded(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} d
   * @returns {Bounds3}
   */
  erode(d) {
    return this.dilate(-d);
  }

  /**
   * Contracts this bounds horizontally (left and right) by the specified amount.
   * @public
   *
   * This is the mutable form of the function erodedX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} x
   * @returns {Bounds3}
   */
  erodeX(x) {
    return this.dilateX(-x);
  }

  /**
   * Contracts this bounds vertically (top and bottom) by the specified amount.
   * @public
   *
   * This is the mutable form of the function erodedY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} y
   * @returns {Bounds3}
   */
  erodeY(y) {
    return this.dilateY(-y);
  }

  /**
   * Contracts this bounds depth-wise (front and back) by the specified amount.
   * @public
   *
   * This is the mutable form of the function erodedZ(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} z
   * @returns {Bounds3}
   */
  erodeZ(z) {
    return this.dilateZ(-z);
  }

  /**
   * Contracts this bounds independently along each axis. Will be equal to calling
   * bounds.erodeX( x ).erodeY( y ).erodeZ( z ).
   * @public
   *
   * This is the mutable form of the function erodedXYZ(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Bounds3}
   */
  erodeXYZ(x, y, z) {
    return this.dilateXYZ(-x, -y, -z);
  }

  /**
   * Translates our bounds horizontally by x.
   * @public
   *
   * This is the mutable form of the function shiftedX(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} x
   * @returns {Bounds3}
   */
  shiftX(x) {
    return this.setMinMax(this.minX + x, this.minY, this.minZ, this.maxX + x, this.maxY, this.maxZ);
  }

  /**
   * Translates our bounds vertically by y.
   * @public
   *
   * This is the mutable form of the function shiftedY(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} y
   * @returns {Bounds3}
   */
  shiftY(y) {
    return this.setMinMax(this.minX, this.minY + y, this.minZ, this.maxX, this.maxY + y, this.maxZ);
  }

  /**
   * Translates our bounds depth-wise by z.
   * @public
   *
   * This is the mutable form of the function shiftedZ(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} z
   * @returns {Bounds3}
   */
  shiftZ(z) {
    return this.setMinMax(this.minX, this.minY, this.minZ + z, this.maxX, this.maxY, this.maxZ + z);
  }

  /**
   * Translates our bounds by (x,y,z).
   * @public
   *
   * This is the mutable form of the function shifted(). This will mutate (change) this bounds, in addition to returning
   * this bounds itself.
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Bounds3}
   */
  shiftXYZ(x, y, z) {
    return this.setMinMax(this.minX + x, this.minY + y, this.minZ + z, this.maxX + x, this.maxY + y, this.maxZ + z);
  }

  /**
   * Translates our bounds by the given vector.
   * @public
   *
   * @param {Vector3} v
   * @returns {Bounds3}
   */
  shift(v) {
    return this.shiftXYZ(v.x, v.y, v.z);
  }

  /**
   * Returns a new Bounds3 object, with the cuboid (3d rectangle) construction with x, y, z, width, height and depth.
   * @public
   *
   * @param {number} x - The minimum value of X for the bounds.
   * @param {number} y - The minimum value of Y for the bounds.
   * @param {number} z - The minimum value of Z for the bounds.
   * @param {number} width - The width (maxX - minX) of the bounds.
   * @param {number} height - The height (maxY - minY) of the bounds.
   * @param {number} depth - The depth (maxZ - minZ) of the bounds.
   * @returns {Bounds3}
   */
  static cuboid(x, y, z, width, height, depth) {
    return new Bounds3(x, y, z, x + width, y + height, z + depth);
  }

  /**
   * Returns a new Bounds3 object that only contains the specified point (x,y,z). Useful for being dilated to form a
   * bounding box around a point. Note that the bounds will not be "empty" as it contains (x,y,z), but it will have
   * zero area.
   * @public
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Bounds3}
   */
  static point(x, y, z) {
    return new Bounds3(x, y, z, x, y, z);
  }
}

// @public (read-only) - Helps to identify the dimension of the bounds
Bounds3.prototype.isBounds = true;
Bounds3.prototype.dimension = 3;
js_dot.register('Bounds3', Bounds3);
js_Poolable.mixInto(Bounds3, {
  initialize: Bounds3.prototype.setMinMax
});

/**
 * A constant Bounds3 with minimums = $\infty$, maximums = $-\infty$, so that it represents "no bounds whatsoever".
 * @public
 *
 * This allows us to take the union (union/includeBounds) of this and any other Bounds3 to get the other bounds back,
 * e.g. Bounds3.NOTHING.union( bounds ).equals( bounds ). This object naturally serves as the base case as a union of
 * zero bounds objects.
 *
 * Additionally, intersections with NOTHING will always return a Bounds3 equivalent to NOTHING.
 *
 * @constant {Bounds3} NOTHING
 */
Bounds3.NOTHING = new Bounds3(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);

/**
 * A constant Bounds3 with minimums = $-\infty$, maximums = $\infty$, so that it represents "all bounds".
 * @public
 *
 * This allows us to take the intersection (intersection/constrainBounds) of this and any other Bounds3 to get the
 * other bounds back, e.g. Bounds3.EVERYTHING.intersection( bounds ).equals( bounds ). This object naturally serves as
 * the base case as an intersection of zero bounds objects.
 *
 * Additionally, unions with EVERYTHING will always return a Bounds3 equivalent to EVERYTHING.
 *
 * @constant {Bounds3} EVERYTHING
 */
Bounds3.EVERYTHING = new Bounds3(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);
Bounds3.Bounds3IO = new IOType('Bounds3IO', {
  valueType: Bounds3,
  documentation: 'a 3-dimensional bounds (bounding box)',
  stateSchema: {
    minX: types_NumberIO,
    minY: types_NumberIO,
    minZ: types_NumberIO,
    maxX: types_NumberIO,
    maxY: types_NumberIO,
    maxZ: types_NumberIO
  },
  toStateObject: bounds3 => ({
    minX: bounds3.minX,
    minY: bounds3.minY,
    minZ: bounds3.minZ,
    maxX: bounds3.maxX,
    maxY: bounds3.maxY,
    maxZ: bounds3.maxZ
  }),
  fromStateObject: stateObject => new Bounds3(stateObject.minX, stateObject.minY, stateObject.minZ, stateObject.maxX, stateObject.maxY, stateObject.maxZ)
});
/* harmony default export */ const js_Bounds3 = ((/* unused pure expression or super */ null && (Bounds3)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sYWJsZSIsIklPVHlwZSIsIk51bWJlcklPIiwiZG90IiwiVmVjdG9yMyIsIkJvdW5kczMiLCJjb25zdHJ1Y3RvciIsIm1pblgiLCJtaW5ZIiwibWluWiIsIm1heFgiLCJtYXhZIiwibWF4WiIsImFzc2VydCIsInVuZGVmaW5lZCIsImdldFdpZHRoIiwid2lkdGgiLCJnZXRIZWlnaHQiLCJoZWlnaHQiLCJnZXREZXB0aCIsImRlcHRoIiwiZ2V0WCIsIngiLCJnZXRZIiwieSIsImdldFoiLCJ6IiwiZ2V0TWluWCIsImdldE1pblkiLCJnZXRNaW5aIiwiZ2V0TWF4WCIsImdldE1heFkiLCJnZXRNYXhaIiwiZ2V0TGVmdCIsImxlZnQiLCJnZXRUb3AiLCJ0b3AiLCJnZXRCYWNrIiwiYmFjayIsImdldFJpZ2h0IiwicmlnaHQiLCJnZXRCb3R0b20iLCJib3R0b20iLCJnZXRGcm9udCIsImZyb250IiwiZ2V0Q2VudGVyWCIsImNlbnRlclgiLCJnZXRDZW50ZXJZIiwiY2VudGVyWSIsImdldENlbnRlcloiLCJjZW50ZXJaIiwiZ2V0Q2VudGVyIiwiY2VudGVyIiwiaXNFbXB0eSIsImlzRmluaXRlIiwiaGFzTm9uemVyb0FyZWEiLCJpc1ZhbGlkIiwiY29udGFpbnNDb29yZGluYXRlcyIsImNvbnRhaW5zUG9pbnQiLCJwb2ludCIsImNvbnRhaW5zQm91bmRzIiwiYm91bmRzIiwiaW50ZXJzZWN0c0JvdW5kcyIsImludGVyc2VjdGlvbiIsInRvU3RyaW5nIiwiZXF1YWxzIiwib3RoZXIiLCJlcXVhbHNFcHNpbG9uIiwiZXBzaWxvbiIsInRoaXNGaW5pdGUiLCJvdGhlckZpbml0ZSIsIk1hdGgiLCJhYnMiLCJjb3B5Iiwic2V0IiwidW5pb24iLCJtaW4iLCJtYXgiLCJ3aXRoQ29vcmRpbmF0ZXMiLCJ3aXRoUG9pbnQiLCJ3aXRoTWluWCIsIndpdGhNaW5ZIiwid2l0aE1pbloiLCJ3aXRoTWF4WCIsIndpdGhNYXhZIiwid2l0aE1heFoiLCJyb3VuZGVkT3V0IiwiZmxvb3IiLCJjZWlsIiwicm91bmRlZEluIiwidHJhbnNmb3JtZWQiLCJtYXRyaXgiLCJ0cmFuc2Zvcm0iLCJkaWxhdGVkIiwiZCIsImRpbGF0ZWRYWVoiLCJkaWxhdGVkWCIsImRpbGF0ZWRZIiwiZGlsYXRlZFoiLCJlcm9kZWQiLCJhbW91bnQiLCJlcm9kZWRYIiwiZXJvZGVkWSIsImVyb2RlZFoiLCJlcm9kZWRYWVoiLCJzaGlmdGVkWCIsInNoaWZ0ZWRZIiwic2hpZnRlZFoiLCJzaGlmdGVkWFlaIiwic2hpZnRlZCIsInYiLCJzZXRNaW5NYXgiLCJzZXRNaW5YIiwic2V0TWluWSIsInNldE1pbloiLCJzZXRNYXhYIiwic2V0TWF4WSIsInNldE1heFoiLCJpbmNsdWRlQm91bmRzIiwiY29uc3RyYWluQm91bmRzIiwiYWRkQ29vcmRpbmF0ZXMiLCJhZGRQb2ludCIsInJvdW5kT3V0Iiwicm91bmRJbiIsImlzSWRlbnRpdHkiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsIk5FR0FUSVZFX0lORklOSVRZIiwidmVjdG9yIiwid2l0aEl0IiwibXVsdGlwbHlWZWN0b3IzIiwic2V0WFlaIiwiZGlsYXRlIiwiZGlsYXRlWFlaIiwiZGlsYXRlWCIsImRpbGF0ZVkiLCJkaWxhdGVaIiwiZXJvZGUiLCJlcm9kZVgiLCJlcm9kZVkiLCJlcm9kZVoiLCJlcm9kZVhZWiIsInNoaWZ0WCIsInNoaWZ0WSIsInNoaWZ0WiIsInNoaWZ0WFlaIiwic2hpZnQiLCJjdWJvaWQiLCJwcm90b3R5cGUiLCJpc0JvdW5kcyIsImRpbWVuc2lvbiIsInJlZ2lzdGVyIiwibWl4SW50byIsImluaXRpYWxpemUiLCJOT1RISU5HIiwiRVZFUllUSElORyIsIkJvdW5kczNJTyIsInZhbHVlVHlwZSIsImRvY3VtZW50YXRpb24iLCJzdGF0ZVNjaGVtYSIsInRvU3RhdGVPYmplY3QiLCJib3VuZHMzIiwiZnJvbVN0YXRlT2JqZWN0Iiwic3RhdGVPYmplY3QiXSwic291cmNlcyI6WyJCb3VuZHMzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEEgM0QgY3Vib2lkLXNoYXBlZCBib3VuZGVkIGFyZWEgKGJvdW5kaW5nIGJveCkuXG4gKlxuICogVGhlcmUgYXJlIGEgbnVtYmVyIG9mIGNvbnZlbmllbmNlIGZ1bmN0aW9ucyB0byBnZXQgbG9jYXRpb25zIGFuZCBwb2ludHMgb24gdGhlIEJvdW5kcy4gQ3VycmVudGx5IHdlIGRvIG5vdFxuICogc3RvcmUgdGhlc2Ugd2l0aCB0aGUgQm91bmRzMyBpbnN0YW5jZSwgc2luY2Ugd2Ugd2FudCB0byBsb3dlciB0aGUgbWVtb3J5IGZvb3RwcmludC5cbiAqXG4gKiBtaW5YLCBtaW5ZLCBtaW5aLCBtYXhYLCBtYXhZLCBhbmQgbWF4WiBhcmUgYWN0dWFsbHkgc3RvcmVkLiBXZSBkb24ndCBkbyB4LHkseix3aWR0aCxoZWlnaHQsZGVwdGggYmVjYXVzZSB0aGlzIGNhbid0IHByb3Blcmx5IGV4cHJlc3NcbiAqIHNlbWktaW5maW5pdGUgYm91bmRzIChsaWtlIGEgaGFsZi1wbGFuZSksIG9yIGVhc2lseSBoYW5kbGUgd2hhdCBCb3VuZHMzLk5PVEhJTkcgYW5kIEJvdW5kczMuRVZFUllUSElORyBkbyB3aXRoXG4gKiB0aGUgY29uc3RydWN0aXZlIHNvbGlkIGFyZWFzLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgUG9vbGFibGUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL1Bvb2xhYmxlLmpzJztcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XG5pbXBvcnQgTnVtYmVySU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL051bWJlcklPLmpzJztcbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IFZlY3RvcjMgZnJvbSAnLi9WZWN0b3IzLmpzJztcblxuY2xhc3MgQm91bmRzMyB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgMy1kaW1lbnNpb25hbCBib3VuZHMgKGJvdW5kaW5nIGJveCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pblggLSBUaGUgaW5pdGlhbCBtaW5pbXVtIFggY29vcmRpbmF0ZSBvZiB0aGUgYm91bmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluWSAtIFRoZSBpbml0aWFsIG1pbmltdW0gWSBjb29yZGluYXRlIG9mIHRoZSBib3VuZHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5aIC0gVGhlIGluaXRpYWwgbWluaW11bSBaIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFggLSBUaGUgaW5pdGlhbCBtYXhpbXVtIFggY29vcmRpbmF0ZSBvZiB0aGUgYm91bmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WSAtIFRoZSBpbml0aWFsIG1heGltdW0gWSBjb29yZGluYXRlIG9mIHRoZSBib3VuZHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhaIC0gVGhlIGluaXRpYWwgbWF4aW11bSBaIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKCBtaW5YLCBtaW5ZLCBtaW5aLCBtYXhYLCBtYXhZLCBtYXhaICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1heFkgIT09IHVuZGVmaW5lZCwgJ0JvdW5kczMgcmVxdWlyZXMgNCBwYXJhbWV0ZXJzJyApO1xuXG4gICAgLy8gQHB1YmxpYyB7bnVtYmVyfSAtIFRoZSBtaW5pbXVtIFggY29vcmRpbmF0ZSBvZiB0aGUgYm91bmRzLlxuICAgIHRoaXMubWluWCA9IG1pblg7XG5cbiAgICAvLyBAcHVibGljIHtudW1iZXJ9IC0gVGhlIG1pbmltdW0gWSBjb29yZGluYXRlIG9mIHRoZSBib3VuZHMuXG4gICAgdGhpcy5taW5ZID0gbWluWTtcblxuICAgIC8vIEBwdWJsaWMge251bWJlcn0gLSBUaGUgbWluaW11bSBaIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgICB0aGlzLm1pblogPSBtaW5aO1xuXG4gICAgLy8gQHB1YmxpYyB7bnVtYmVyfSAtIFRoZSBtYXhpbXVtIFggY29vcmRpbmF0ZSBvZiB0aGUgYm91bmRzLlxuICAgIHRoaXMubWF4WCA9IG1heFg7XG5cbiAgICAvLyBAcHVibGljIHtudW1iZXJ9IC0gVGhlIG1heGltdW0gWSBjb29yZGluYXRlIG9mIHRoZSBib3VuZHMuXG4gICAgdGhpcy5tYXhZID0gbWF4WTtcblxuICAgIC8vIEBwdWJsaWMge251bWJlcn0gLSBUaGUgbWF4aW11bSBaIGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcy5cbiAgICB0aGlzLm1heFogPSBtYXhaO1xuICB9XG5cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogUHJvcGVydGllc1xuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFRoZSB3aWR0aCBvZiB0aGUgYm91bmRzLCBkZWZpbmVkIGFzIG1heFggLSBtaW5YLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRXaWR0aCgpIHsgcmV0dXJuIHRoaXMubWF4WCAtIHRoaXMubWluWDsgfVxuXG4gIGdldCB3aWR0aCgpIHsgcmV0dXJuIHRoaXMuZ2V0V2lkdGgoKTsgfVxuXG4gIC8qKlxuICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBib3VuZHMsIGRlZmluZWQgYXMgbWF4WSAtIG1pblkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldEhlaWdodCgpIHsgcmV0dXJuIHRoaXMubWF4WSAtIHRoaXMubWluWTsgfVxuXG4gIGdldCBoZWlnaHQoKSB7IHJldHVybiB0aGlzLmdldEhlaWdodCgpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBkZXB0aCBvZiB0aGUgYm91bmRzLCBkZWZpbmVkIGFzIG1heFogLSBtaW5aLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXREZXB0aCgpIHsgcmV0dXJuIHRoaXMubWF4WiAtIHRoaXMubWluWjsgfVxuXG4gIGdldCBkZXB0aCgpIHsgcmV0dXJuIHRoaXMuZ2V0RGVwdGgoKTsgfVxuXG4gIC8qXG4gICAqIENvbnZlbmllbmNlIGxvY2F0aW9uc1xuICAgKiB1cHBlciBpcyBpbiB0ZXJtcyBvZiB0aGUgdmlzdWFsIGxheW91dCBpbiBTY2VuZXJ5IGFuZCBvdGhlciBwcm9ncmFtcywgc28gdGhlIG1pblkgaXMgdGhlIFwidXBwZXJcIiwgYW5kIG1pblkgaXMgdGhlIFwibG93ZXJcIlxuICAgKlxuICAgKiAgICAgICAgICAgICBtaW5YICh4KSAgICAgY2VudGVyWCAgICAgICAgbWF4WFxuICAgKiAgICAgICAgICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgICogbWluWSAoeSkgfCB1cHBlckxlZnQgICB1cHBlckNlbnRlciAgIHVwcGVyUmlnaHRcbiAgICogY2VudGVyWSAgfCBjZW50ZXJMZWZ0ICAgIGNlbnRlciAgICAgIGNlbnRlclJpZ2h0XG4gICAqIG1heFkgICAgIHwgbG93ZXJMZWZ0ICAgbG93ZXJDZW50ZXIgICBsb3dlclJpZ2h0XG4gICAqL1xuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWCwgd2hlbiB0aGlua2luZyBvZiB0aGUgYm91bmRzIGFzIGFuICh4LHkseix3aWR0aCxoZWlnaHQsZGVwdGgpIGN1Ym9pZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0WCgpIHsgcmV0dXJuIHRoaXMubWluWDsgfVxuXG4gIGdldCB4KCkgeyByZXR1cm4gdGhpcy5nZXRYKCk7IH1cblxuICAvKipcbiAgICogQWxpYXMgZm9yIG1pblksIHdoZW4gdGhpbmtpbmcgb2YgdGhlIGJvdW5kcyBhcyBhbiAoeCx5LHosd2lkdGgsaGVpZ2h0LGRlcHRoKSBjdWJvaWQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldFkoKSB7IHJldHVybiB0aGlzLm1pblk7IH1cblxuICBnZXQgeSgpIHsgcmV0dXJuIHRoaXMuZ2V0WSgpOyB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBtaW5aLCB3aGVuIHRoaW5raW5nIG9mIHRoZSBib3VuZHMgYXMgYW4gKHgseSx6LHdpZHRoLGhlaWdodCxkZXB0aCkgY3Vib2lkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRaKCkgeyByZXR1cm4gdGhpcy5taW5aOyB9XG5cbiAgZ2V0IHooKSB7IHJldHVybiB0aGlzLmdldFooKTsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWCwgc3VwcG9ydGluZyB0aGUgZXhwbGljaXQgZ2V0dGVyIGZ1bmN0aW9uIHN0eWxlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRNaW5YKCkgeyByZXR1cm4gdGhpcy5taW5YOyB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBtaW5ZLCBzdXBwb3J0aW5nIHRoZSBleHBsaWNpdCBnZXR0ZXIgZnVuY3Rpb24gc3R5bGUuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldE1pblkoKSB7IHJldHVybiB0aGlzLm1pblk7IH1cblxuICAvKipcbiAgICogQWxpYXMgZm9yIG1pblosIHN1cHBvcnRpbmcgdGhlIGV4cGxpY2l0IGdldHRlciBmdW5jdGlvbiBzdHlsZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TWluWigpIHsgcmV0dXJuIHRoaXMubWluWjsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWF4WCwgc3VwcG9ydGluZyB0aGUgZXhwbGljaXQgZ2V0dGVyIGZ1bmN0aW9uIHN0eWxlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRNYXhYKCkgeyByZXR1cm4gdGhpcy5tYXhYOyB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBtYXhZLCBzdXBwb3J0aW5nIHRoZSBleHBsaWNpdCBnZXR0ZXIgZnVuY3Rpb24gc3R5bGUuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldE1heFkoKSB7IHJldHVybiB0aGlzLm1heFk7IH1cblxuICAvKipcbiAgICogQWxpYXMgZm9yIG1heFosIHN1cHBvcnRpbmcgdGhlIGV4cGxpY2l0IGdldHRlciBmdW5jdGlvbiBzdHlsZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TWF4WigpIHsgcmV0dXJuIHRoaXMubWF4WjsgfVxuXG4gIC8qKlxuICAgKiBBbGlhcyBmb3IgbWluWCwgd2hlbiB0aGlua2luZyBpbiB0aGUgVUktbGF5b3V0IG1hbm5lci5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TGVmdCgpIHsgcmV0dXJuIHRoaXMubWluWDsgfVxuXG4gIGdldCBsZWZ0KCkgeyByZXR1cm4gdGhpcy5taW5YOyB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBtaW5ZLCB3aGVuIHRoaW5raW5nIGluIHRoZSBVSS1sYXlvdXQgbWFubmVyLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRUb3AoKSB7IHJldHVybiB0aGlzLm1pblk7IH1cblxuICBnZXQgdG9wKCkgeyByZXR1cm4gdGhpcy5taW5ZOyB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBtaW5aLCB3aGVuIHRoaW5raW5nIGluIHRoZSBVSS1sYXlvdXQgbWFubmVyLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRCYWNrKCkgeyByZXR1cm4gdGhpcy5taW5aOyB9XG5cbiAgZ2V0IGJhY2soKSB7IHJldHVybiB0aGlzLm1pblo7IH1cblxuICAvKipcbiAgICogQWxpYXMgZm9yIG1heFgsIHdoZW4gdGhpbmtpbmcgaW4gdGhlIFVJLWxheW91dCBtYW5uZXIuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldFJpZ2h0KCkgeyByZXR1cm4gdGhpcy5tYXhYOyB9XG5cbiAgZ2V0IHJpZ2h0KCkgeyByZXR1cm4gdGhpcy5tYXhYOyB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBtYXhZLCB3aGVuIHRoaW5raW5nIGluIHRoZSBVSS1sYXlvdXQgbWFubmVyLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRCb3R0b20oKSB7IHJldHVybiB0aGlzLm1heFk7IH1cblxuICBnZXQgYm90dG9tKCkgeyByZXR1cm4gdGhpcy5tYXhZOyB9XG5cbiAgLyoqXG4gICAqIEFsaWFzIGZvciBtYXhaLCB3aGVuIHRoaW5raW5nIGluIHRoZSBVSS1sYXlvdXQgbWFubmVyLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRGcm9udCgpIHsgcmV0dXJuIHRoaXMubWF4WjsgfVxuXG4gIGdldCBmcm9udCgpIHsgcmV0dXJuIHRoaXMubWF4WjsgfVxuXG4gIC8qKlxuICAgKiBUaGUgaG9yaXpvbnRhbCAoWC1jb29yZGluYXRlKSBjZW50ZXIgb2YgdGhlIGJvdW5kcywgYXZlcmFnaW5nIHRoZSBtaW5YIGFuZCBtYXhYLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRDZW50ZXJYKCkgeyByZXR1cm4gKCB0aGlzLm1heFggKyB0aGlzLm1pblggKSAvIDI7IH1cblxuICBnZXQgY2VudGVyWCgpIHsgcmV0dXJuIHRoaXMuZ2V0Q2VudGVyWCgpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSB2ZXJ0aWNhbCAoWS1jb29yZGluYXRlKSBjZW50ZXIgb2YgdGhlIGJvdW5kcywgYXZlcmFnaW5nIHRoZSBtaW5ZIGFuZCBtYXhZLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBnZXRDZW50ZXJZKCkgeyByZXR1cm4gKCB0aGlzLm1heFkgKyB0aGlzLm1pblkgKSAvIDI7IH1cblxuICBnZXQgY2VudGVyWSgpIHsgcmV0dXJuIHRoaXMuZ2V0Q2VudGVyWSgpOyB9XG5cbiAgLyoqXG4gICAqIFRoZSBkZXB0aHdpc2UgKFotY29vcmRpbmF0ZSkgY2VudGVyIG9mIHRoZSBib3VuZHMsIGF2ZXJhZ2luZyB0aGUgbWluWiBhbmQgbWF4Wi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0Q2VudGVyWigpIHsgcmV0dXJuICggdGhpcy5tYXhaICsgdGhpcy5taW5aICkgLyAyOyB9XG5cbiAgZ2V0IGNlbnRlclooKSB7IHJldHVybiB0aGlzLmdldENlbnRlclooKTsgfVxuXG4gIC8qKlxuICAgKiBUaGUgcG9pbnQgKGNlbnRlclgsIGNlbnRlclksIGNlbnRlclopLCBpbiB0aGUgY2VudGVyIG9mIHRoZSBib3VuZHMuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge1ZlY3RvcjN9XG4gICAqL1xuICBnZXRDZW50ZXIoKSB7IHJldHVybiBuZXcgVmVjdG9yMyggdGhpcy5nZXRDZW50ZXJYKCksIHRoaXMuZ2V0Q2VudGVyWSgpLCB0aGlzLmdldENlbnRlclooKSApOyB9XG5cbiAgZ2V0IGNlbnRlcigpIHsgcmV0dXJuIHRoaXMuZ2V0Q2VudGVyKCk7IH1cblxuICAvKipcbiAgICogV2hldGhlciB3ZSBoYXZlIG5lZ2F0aXZlIHdpZHRoLCBoZWlnaHQgb3IgZGVwdGguIEJvdW5kczMuTk9USElORyBpcyBhIHByaW1lIGV4YW1wbGUgb2YgYW4gZW1wdHkgQm91bmRzMy5cbiAgICogQm91bmRzIHdpdGggd2lkdGggPSBoZWlnaHQgPSBkZXB0aCA9IDAgYXJlIGNvbnNpZGVyZWQgbm90IGVtcHR5LCBzaW5jZSB0aGV5IGluY2x1ZGUgdGhlIHNpbmdsZSAoMCwwLDApIHBvaW50LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNFbXB0eSgpIHsgcmV0dXJuIHRoaXMuZ2V0V2lkdGgoKSA8IDAgfHwgdGhpcy5nZXRIZWlnaHQoKSA8IDAgfHwgdGhpcy5nZXREZXB0aCgpIDwgMDsgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIG91ciBtaW5pbXVtcyBhbmQgbWF4aW11bXMgYXJlIGFsbCBmaW5pdGUgbnVtYmVycy4gVGhpcyB3aWxsIGV4Y2x1ZGUgQm91bmRzMy5OT1RISU5HIGFuZCBCb3VuZHMzLkVWRVJZVEhJTkcuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0Zpbml0ZSgpIHtcbiAgICByZXR1cm4gaXNGaW5pdGUoIHRoaXMubWluWCApICYmIGlzRmluaXRlKCB0aGlzLm1pblkgKSAmJiBpc0Zpbml0ZSggdGhpcy5taW5aICkgJiYgaXNGaW5pdGUoIHRoaXMubWF4WCApICYmIGlzRmluaXRlKCB0aGlzLm1heFkgKSAmJiBpc0Zpbml0ZSggdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogV2hldGhlciB0aGlzIGJvdW5kcyBoYXMgYSBub24temVybyBhcmVhIChub24temVybyBwb3NpdGl2ZSB3aWR0aCwgaGVpZ2h0IGFuZCBkZXB0aCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBoYXNOb256ZXJvQXJlYSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRXaWR0aCgpID4gMCAmJiB0aGlzLmdldEhlaWdodCgpID4gMCAmJiB0aGlzLmdldERlcHRoKCkgPiAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBib3VuZHMgaGFzIGEgZmluaXRlIGFuZCBub24tbmVnYXRpdmUgd2lkdGgsIGhlaWdodCBhbmQgZGVwdGguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc1ZhbGlkKCkge1xuICAgIHJldHVybiAhdGhpcy5pc0VtcHR5KCkgJiYgdGhpcy5pc0Zpbml0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhlIGNvb3JkaW5hdGVzIGFyZSBjb250YWluZWQgaW5zaWRlIHRoZSBib3VuZGluZyBib3gsIG9yIGFyZSBvbiB0aGUgYm91bmRhcnkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBYIGNvb3JkaW5hdGUgb2YgdGhlIHBvaW50IHRvIGNoZWNrXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gWSBjb29yZGluYXRlIG9mIHRoZSBwb2ludCB0byBjaGVja1xuICAgKiBAcGFyYW0ge251bWJlcn0geiAtIFogY29vcmRpbmF0ZSBvZiB0aGUgcG9pbnQgdG8gY2hlY2tcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBjb250YWluc0Nvb3JkaW5hdGVzKCB4LCB5LCB6ICkge1xuICAgIHJldHVybiB0aGlzLm1pblggPD0geCAmJiB4IDw9IHRoaXMubWF4WCAmJiB0aGlzLm1pblkgPD0geSAmJiB5IDw9IHRoaXMubWF4WSAmJiB0aGlzLm1pblogPD0geiAmJiB6IDw9IHRoaXMubWF4WjtcbiAgfVxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBwb2ludCBpcyBjb250YWluZWQgaW5zaWRlIHRoZSBib3VuZGluZyBib3gsIG9yIGlzIG9uIHRoZSBib3VuZGFyeS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjN9IHBvaW50XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgY29udGFpbnNQb2ludCggcG9pbnQgKSB7XG4gICAgcmV0dXJuIHRoaXMuY29udGFpbnNDb29yZGluYXRlcyggcG9pbnQueCwgcG9pbnQueSwgcG9pbnQueiApO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBib3VuZGluZyBib3ggY29tcGxldGVseSBjb250YWlucyB0aGUgYm91bmRpbmcgYm94IHBhc3NlZCBhcyBhIHBhcmFtZXRlci4gVGhlIGJvdW5kYXJ5IG9mIGEgYm94IGlzXG4gICAqIGNvbnNpZGVyZWQgdG8gYmUgXCJjb250YWluZWRcIi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0JvdW5kczN9IGJvdW5kc1xuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGNvbnRhaW5zQm91bmRzKCBib3VuZHMgKSB7XG4gICAgcmV0dXJuIHRoaXMubWluWCA8PSBib3VuZHMubWluWCAmJiB0aGlzLm1heFggPj0gYm91bmRzLm1heFggJiYgdGhpcy5taW5ZIDw9IGJvdW5kcy5taW5ZICYmIHRoaXMubWF4WSA+PSBib3VuZHMubWF4WSAmJiB0aGlzLm1pblogPD0gYm91bmRzLm1pblogJiYgdGhpcy5tYXhaID49IGJvdW5kcy5tYXhaO1xuICB9XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdGhpcyBhbmQgYW5vdGhlciBib3VuZGluZyBib3ggaGF2ZSBhbnkgcG9pbnRzIG9mIGludGVyc2VjdGlvbiAoaW5jbHVkaW5nIHRvdWNoaW5nIGJvdW5kYXJpZXMpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7Qm91bmRzM30gYm91bmRzXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaW50ZXJzZWN0c0JvdW5kcyggYm91bmRzICkge1xuICAgIC8vIFRPRE86IG1vcmUgZWZmaWNpZW50IHdheSBvZiBkb2luZyB0aGlzP1xuICAgIHJldHVybiAhdGhpcy5pbnRlcnNlY3Rpb24oIGJvdW5kcyApLmlzRW1wdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWJ1Z2dpbmcgc3RyaW5nIGZvciB0aGUgYm91bmRzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtzdHJpbmd9XG4gICAqL1xuICB0b1N0cmluZygpIHtcbiAgICByZXR1cm4gYFt4Oigke3RoaXMubWluWH0sJHt0aGlzLm1heFh9KSx5Oigke3RoaXMubWluWX0sJHt0aGlzLm1heFl9KSx6Oigke3RoaXMubWluWn0sJHt0aGlzLm1heFp9KV1gO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4YWN0IGVxdWFsaXR5IGNvbXBhcmlzb24gYmV0d2VlbiB0aGlzIGJvdW5kcyBhbmQgYW5vdGhlciBib3VuZHMuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtCb3VuZHMzfSBvdGhlclxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoZSB0d28gYm91bmRzIGFyZSBlcXVhbFxuICAgKi9cbiAgZXF1YWxzKCBvdGhlciApIHtcbiAgICByZXR1cm4gdGhpcy5taW5YID09PSBvdGhlci5taW5YICYmXG4gICAgICAgICAgIHRoaXMubWluWSA9PT0gb3RoZXIubWluWSAmJlxuICAgICAgICAgICB0aGlzLm1pblogPT09IG90aGVyLm1pblogJiZcbiAgICAgICAgICAgdGhpcy5tYXhYID09PSBvdGhlci5tYXhYICYmXG4gICAgICAgICAgIHRoaXMubWF4WSA9PT0gb3RoZXIubWF4WSAmJlxuICAgICAgICAgICB0aGlzLm1heFogPT09IG90aGVyLm1heFo7XG4gIH1cblxuICAvKipcbiAgICogQXBwcm94aW1hdGUgZXF1YWxpdHkgY29tcGFyaXNvbiBiZXR3ZWVuIHRoaXMgYm91bmRzIGFuZCBhbm90aGVyIGJvdW5kcy5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0JvdW5kczN9IG90aGVyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlcHNpbG9uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFdoZXRoZXIgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB0d28gYm91bmRzIGhhcyBubyBtaW4vbWF4IHdpdGggYW4gYWJzb2x1dGUgdmFsdWUgZ3JlYXRlclxuICAgKiAgICAgICAgICAgICAgICAgICAgICB0aGFuIGVwc2lsb24uXG4gICAqL1xuICBlcXVhbHNFcHNpbG9uKCBvdGhlciwgZXBzaWxvbiApIHtcbiAgICBlcHNpbG9uID0gZXBzaWxvbiAhPT0gdW5kZWZpbmVkID8gZXBzaWxvbiA6IDA7XG4gICAgY29uc3QgdGhpc0Zpbml0ZSA9IHRoaXMuaXNGaW5pdGUoKTtcbiAgICBjb25zdCBvdGhlckZpbml0ZSA9IG90aGVyLmlzRmluaXRlKCk7XG4gICAgaWYgKCB0aGlzRmluaXRlICYmIG90aGVyRmluaXRlICkge1xuICAgICAgLy8gYm90aCBhcmUgZmluaXRlLCBzbyB3ZSBjYW4gdXNlIE1hdGguYWJzKCkgLSBpdCB3b3VsZCBmYWlsIHdpdGggbm9uLWZpbml0ZSB2YWx1ZXMgbGlrZSBJbmZpbml0eVxuICAgICAgcmV0dXJuIE1hdGguYWJzKCB0aGlzLm1pblggLSBvdGhlci5taW5YICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgICAgTWF0aC5hYnMoIHRoaXMubWluWSAtIG90aGVyLm1pblkgKSA8IGVwc2lsb24gJiZcbiAgICAgICAgICAgICBNYXRoLmFicyggdGhpcy5taW5aIC0gb3RoZXIubWluWiApIDwgZXBzaWxvbiAmJlxuICAgICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm1heFggLSBvdGhlci5tYXhYICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgICAgTWF0aC5hYnMoIHRoaXMubWF4WSAtIG90aGVyLm1heFkgKSA8IGVwc2lsb24gJiZcbiAgICAgICAgICAgICBNYXRoLmFicyggdGhpcy5tYXhaIC0gb3RoZXIubWF4WiApIDwgZXBzaWxvbjtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHRoaXNGaW5pdGUgIT09IG90aGVyRmluaXRlICkge1xuICAgICAgcmV0dXJuIGZhbHNlOyAvLyBvbmUgaXMgZmluaXRlLCB0aGUgb3RoZXIgaXMgbm90LiBkZWZpbml0ZWx5IG5vdCBlcXVhbFxuICAgIH1cbiAgICBlbHNlIGlmICggdGhpcyA9PT0gb3RoZXIgKSB7XG4gICAgICByZXR1cm4gdHJ1ZTsgLy8gZXhhY3Qgc2FtZSBpbnN0YW5jZSwgbXVzdCBiZSBlcXVhbFxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIGVwc2lsb24gb25seSBhcHBsaWVzIG9uIGZpbml0ZSBkaW1lbnNpb25zLiBkdWUgdG8gSlMncyBoYW5kbGluZyBvZiBpc0Zpbml0ZSgpLCBpdCdzIGZhc3RlciB0byBjaGVjayB0aGUgc3VtIG9mIGJvdGhcbiAgICAgIHJldHVybiAoIGlzRmluaXRlKCB0aGlzLm1pblggKyBvdGhlci5taW5YICkgPyAoIE1hdGguYWJzKCB0aGlzLm1pblggLSBvdGhlci5taW5YICkgPCBlcHNpbG9uICkgOiAoIHRoaXMubWluWCA9PT0gb3RoZXIubWluWCApICkgJiZcbiAgICAgICAgICAgICAoIGlzRmluaXRlKCB0aGlzLm1pblkgKyBvdGhlci5taW5ZICkgPyAoIE1hdGguYWJzKCB0aGlzLm1pblkgLSBvdGhlci5taW5ZICkgPCBlcHNpbG9uICkgOiAoIHRoaXMubWluWSA9PT0gb3RoZXIubWluWSApICkgJiZcbiAgICAgICAgICAgICAoIGlzRmluaXRlKCB0aGlzLm1pblogKyBvdGhlci5taW5aICkgPyAoIE1hdGguYWJzKCB0aGlzLm1pblogLSBvdGhlci5taW5aICkgPCBlcHNpbG9uICkgOiAoIHRoaXMubWluWiA9PT0gb3RoZXIubWluWiApICkgJiZcbiAgICAgICAgICAgICAoIGlzRmluaXRlKCB0aGlzLm1heFggKyBvdGhlci5tYXhYICkgPyAoIE1hdGguYWJzKCB0aGlzLm1heFggLSBvdGhlci5tYXhYICkgPCBlcHNpbG9uICkgOiAoIHRoaXMubWF4WCA9PT0gb3RoZXIubWF4WCApICkgJiZcbiAgICAgICAgICAgICAoIGlzRmluaXRlKCB0aGlzLm1heFkgKyBvdGhlci5tYXhZICkgPyAoIE1hdGguYWJzKCB0aGlzLm1heFkgLSBvdGhlci5tYXhZICkgPCBlcHNpbG9uICkgOiAoIHRoaXMubWF4WSA9PT0gb3RoZXIubWF4WSApICkgJiZcbiAgICAgICAgICAgICAoIGlzRmluaXRlKCB0aGlzLm1heFogKyBvdGhlci5tYXhaICkgPyAoIE1hdGguYWJzKCB0aGlzLm1heFogLSBvdGhlci5tYXhaICkgPCBlcHNpbG9uICkgOiAoIHRoaXMubWF4WiA9PT0gb3RoZXIubWF4WiApICk7XG4gICAgfVxuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIEltbXV0YWJsZSBvcGVyYXRpb25zXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhpcyBib3VuZHMsIG9yIGlmIGEgYm91bmRzIGlzIHBhc3NlZCBpbiwgc2V0IHRoYXQgYm91bmRzJ3MgdmFsdWVzIHRvIG91cnMuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNldCgpLCBpZiBhIGJvdW5kcyBpcyBwcm92aWRlZC4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZFxuICAgKiB3aWxsIG5vdCBtb2RpZnkgdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm91bmRzM30gW2JvdW5kc10gLSBJZiBub3QgcHJvdmlkZWQsIGNyZWF0ZXMgYSBuZXcgQm91bmRzMyB3aXRoIGZpbGxlZCBpbiB2YWx1ZXMuIE90aGVyd2lzZSwgZmlsbHMgaW4gdGhlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZXMgb2YgdGhlIHByb3ZpZGVkIGJvdW5kcyBzbyB0aGF0IGl0IGVxdWFscyB0aGlzIGJvdW5kcy5cbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBjb3B5KCBib3VuZHMgKSB7XG4gICAgaWYgKCBib3VuZHMgKSB7XG4gICAgICByZXR1cm4gYm91bmRzLnNldCggdGhpcyApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiBuZXcgQm91bmRzMyggdGhpcy5taW5YLCB0aGlzLm1pblksIHRoaXMubWluWiwgdGhpcy5tYXhYLCB0aGlzLm1heFksIHRoaXMubWF4WiApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc21hbGxlc3QgYm91bmRzIHRoYXQgY29udGFpbnMgYm90aCB0aGlzIGJvdW5kcyBhbmQgdGhlIGlucHV0IGJvdW5kcywgcmV0dXJuZWQgYXMgYSBjb3B5LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBpbmNsdWRlQm91bmRzKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0JvdW5kczN9IGJvdW5kc1xuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHVuaW9uKCBib3VuZHMgKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluWCwgYm91bmRzLm1pblggKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1pblksIGJvdW5kcy5taW5ZICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW5aLCBib3VuZHMubWluWiApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4WCwgYm91bmRzLm1heFggKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heFksIGJvdW5kcy5tYXhZICksXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXhaLCBib3VuZHMubWF4WiApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc21hbGxlc3QgYm91bmRzIHRoYXQgaXMgY29udGFpbmVkIGJ5IGJvdGggdGhpcyBib3VuZHMgYW5kIHRoZSBpbnB1dCBib3VuZHMsIHJldHVybmVkIGFzIGEgY29weS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29uc3RyYWluQm91bmRzKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge0JvdW5kczN9IGJvdW5kc1xuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIGludGVyc2VjdGlvbiggYm91bmRzICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyhcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1pblgsIGJvdW5kcy5taW5YICksXG4gICAgICBNYXRoLm1heCggdGhpcy5taW5ZLCBib3VuZHMubWluWSApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWluWiwgYm91bmRzLm1pblogKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1heFgsIGJvdW5kcy5tYXhYICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5tYXhZLCBib3VuZHMubWF4WSApLFxuICAgICAgTWF0aC5taW4oIHRoaXMubWF4WiwgYm91bmRzLm1heFogKVxuICAgICk7XG4gIH1cblxuICAvLyBUT0RPOiBkaWZmZXJlbmNlIHNob3VsZCBiZSB3ZWxsLWRlZmluZWQsIGJ1dCBtb3JlIGxvZ2ljIGlzIG5lZWRlZCB0byBjb21wdXRlXG5cbiAgLyoqXG4gICAqIFRoZSBzbWFsbGVzdCBib3VuZHMgdGhhdCBjb250YWlucyB0aGlzIGJvdW5kcyBhbmQgdGhlIHBvaW50ICh4LHkseiksIHJldHVybmVkIGFzIGEgY29weS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gYWRkQ29vcmRpbmF0ZXMoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgd2l0aENvb3JkaW5hdGVzKCB4LCB5LCB6ICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyhcbiAgICAgIE1hdGgubWluKCB0aGlzLm1pblgsIHggKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1pblksIHkgKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1pblosIHogKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heFgsIHggKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heFksIHkgKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heFosIHogKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNtYWxsZXN0IGJvdW5kcyB0aGF0IGNvbnRhaW5zIHRoaXMgYm91bmRzIGFuZCB0aGUgaW5wdXQgcG9pbnQsIHJldHVybmVkIGFzIGEgY29weS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gYWRkUG9pbnQoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yM30gcG9pbnRcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICB3aXRoUG9pbnQoIHBvaW50ICkge1xuICAgIHJldHVybiB0aGlzLndpdGhDb29yZGluYXRlcyggcG9pbnQueCwgcG9pbnQueSwgcG9pbnQueiApO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgY29weSBvZiB0aGlzIGJvdW5kcywgd2l0aCBtaW5YIHJlcGxhY2VkIHdpdGggdGhlIGlucHV0LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXRNaW5YKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluWFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHdpdGhNaW5YKCBtaW5YICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyggbWluWCwgdGhpcy5taW5ZLCB0aGlzLm1pblosIHRoaXMubWF4WCwgdGhpcy5tYXhZLCB0aGlzLm1heFogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGNvcHkgb2YgdGhpcyBib3VuZHMsIHdpdGggbWluWSByZXBsYWNlZCB3aXRoIHRoZSBpbnB1dC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2V0TWluWSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pbllcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICB3aXRoTWluWSggbWluWSApIHtcbiAgICByZXR1cm4gbmV3IEJvdW5kczMoIHRoaXMubWluWCwgbWluWSwgdGhpcy5taW5aLCB0aGlzLm1heFgsIHRoaXMubWF4WSwgdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIG1pblogcmVwbGFjZWQgd2l0aCB0aGUgaW5wdXQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNldE1pblooKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5aXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgd2l0aE1pblooIG1pblogKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKCB0aGlzLm1pblgsIHRoaXMubWluWSwgbWluWiwgdGhpcy5tYXhYLCB0aGlzLm1heFksIHRoaXMubWF4WiApO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgY29weSBvZiB0aGlzIGJvdW5kcywgd2l0aCBtYXhYIHJlcGxhY2VkIHdpdGggdGhlIGlucHV0LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXRNYXhYKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHdpdGhNYXhYKCBtYXhYICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyggdGhpcy5taW5YLCB0aGlzLm1pblksIHRoaXMubWluWiwgbWF4WCwgdGhpcy5tYXhZLCB0aGlzLm1heFogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGNvcHkgb2YgdGhpcyBib3VuZHMsIHdpdGggbWF4WSByZXBsYWNlZCB3aXRoIHRoZSBpbnB1dC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2V0TWF4WSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFlcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICB3aXRoTWF4WSggbWF4WSApIHtcbiAgICByZXR1cm4gbmV3IEJvdW5kczMoIHRoaXMubWluWCwgdGhpcy5taW5ZLCB0aGlzLm1pblosIHRoaXMubWF4WCwgbWF4WSwgdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIG1heFogcmVwbGFjZWQgd2l0aCB0aGUgaW5wdXQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNldE1heFooKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhaXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgd2l0aE1heFooIG1heFogKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKCB0aGlzLm1pblgsIHRoaXMubWluWSwgdGhpcy5taW5aLCB0aGlzLm1heFgsIHRoaXMubWF4WSwgbWF4WiApO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgY29weSBvZiB0aGlzIGJvdW5kcywgd2l0aCB0aGUgbWluaW11bSB2YWx1ZXMgcm91bmRlZCBkb3duIHRvIHRoZSBuZWFyZXN0IGludGVnZXIsIGFuZCB0aGUgbWF4aW11bSB2YWx1ZXNcbiAgICogcm91bmRlZCB1cCB0byB0aGUgbmVhcmVzdCBpbnRlZ2VyLiBUaGlzIGNhdXNlcyB0aGUgYm91bmRzIHRvIGV4cGFuZCBhcyBuZWNlc3Nhcnkgc28gdGhhdCBpdHMgYm91bmRhcmllc1xuICAgKiBhcmUgaW50ZWdlci1hbGlnbmVkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiByb3VuZE91dCgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICpcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICByb3VuZGVkT3V0KCkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyhcbiAgICAgIE1hdGguZmxvb3IoIHRoaXMubWluWCApLFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5taW5ZICksXG4gICAgICBNYXRoLmZsb29yKCB0aGlzLm1pblogKSxcbiAgICAgIE1hdGguY2VpbCggdGhpcy5tYXhYICksXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWF4WSApLFxuICAgICAgTWF0aC5jZWlsKCB0aGlzLm1heFogKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQSBjb3B5IG9mIHRoaXMgYm91bmRzLCB3aXRoIHRoZSBtaW5pbXVtIHZhbHVlcyByb3VuZGVkIHVwIHRvIHRoZSBuZWFyZXN0IGludGVnZXIsIGFuZCB0aGUgbWF4aW11bSB2YWx1ZXNcbiAgICogcm91bmRlZCBkb3duIHRvIHRoZSBuZWFyZXN0IGludGVnZXIuIFRoaXMgY2F1c2VzIHRoZSBib3VuZHMgdG8gY29udHJhY3QgYXMgbmVjZXNzYXJ5IHNvIHRoYXQgaXRzIGJvdW5kYXJpZXNcbiAgICogYXJlIGludGVnZXItYWxpZ25lZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcm91bmRJbigpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICpcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICByb3VuZGVkSW4oKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKFxuICAgICAgTWF0aC5jZWlsKCB0aGlzLm1pblggKSxcbiAgICAgIE1hdGguY2VpbCggdGhpcy5taW5ZICksXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWluWiApLFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5tYXhYICksXG4gICAgICBNYXRoLmZsb29yKCB0aGlzLm1heFkgKSxcbiAgICAgIE1hdGguZmxvb3IoIHRoaXMubWF4WiApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCAoc3RpbGwgYXhpcy1hbGlnbmVkKSB0aGF0IGNvbnRhaW5zIHRoZSB0cmFuc2Zvcm1lZCBzaGFwZSBvZiB0aGlzIGJvdW5kcywgYXBwbHlpbmcgdGhlIG1hdHJpeCBhc1xuICAgKiBhbiBhZmZpbmUgdHJhbnNmb3JtYXRpb24uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogTk9URTogYm91bmRzLnRyYW5zZm9ybWVkKCBtYXRyaXggKS50cmFuc2Zvcm1lZCggaW52ZXJzZSApIG1heSBiZSBsYXJnZXIgdGhhbiB0aGUgb3JpZ2luYWwgYm94LCBpZiBpdCBpbmNsdWRlc1xuICAgKiBhIHJvdGF0aW9uIHRoYXQgaXNuJ3QgYSBtdWx0aXBsZSBvZiAkXFxwaS8yJC4gVGhpcyBpcyBiZWNhdXNlIHRoZSByZXR1cm5lZCBib3VuZHMgbWF5IGV4cGFuZCBpbiBhcmVhIHRvIGNvdmVyXG4gICAqIEFMTCBvZiB0aGUgY29ybmVycyBvZiB0aGUgdHJhbnNmb3JtZWQgYm91bmRpbmcgYm94LlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gdHJhbnNmb3JtKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeDR9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHRyYW5zZm9ybWVkKCBtYXRyaXggKSB7XG4gICAgcmV0dXJuIHRoaXMuY29weSgpLnRyYW5zZm9ybSggbWF0cml4ICk7XG4gIH1cblxuICAvKipcbiAgICogQSBib3VuZGluZyBib3ggdGhhdCBpcyBleHBhbmRlZCBvbiBhbGwgc2lkZXMgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuKVxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGUoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBkXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZGlsYXRlZCggZCApIHtcbiAgICByZXR1cm4gdGhpcy5kaWxhdGVkWFlaKCBkLCBkLCBkICk7XG4gIH1cblxuICAvKipcbiAgICogQSBib3VuZGluZyBib3ggdGhhdCBpcyBleHBhbmRlZCBob3Jpem9udGFsbHkgKG9uIHRoZSBsZWZ0IGFuZCByaWdodCkgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGRpbGF0ZVgoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZGlsYXRlZFgoIHggKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKCB0aGlzLm1pblggLSB4LCB0aGlzLm1pblksIHRoaXMubWluWiwgdGhpcy5tYXhYICsgeCwgdGhpcy5tYXhZLCB0aGlzLm1heFogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGV4cGFuZGVkIHZlcnRpY2FsbHkgKG9uIHRoZSB0b3AgYW5kIGJvdHRvbSkgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGRpbGF0ZVkoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZGlsYXRlZFkoIHkgKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKCB0aGlzLm1pblgsIHRoaXMubWluWSAtIHksIHRoaXMubWluWiwgdGhpcy5tYXhYLCB0aGlzLm1heFkgKyB5LCB0aGlzLm1heFogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGV4cGFuZGVkIGRlcHRoLXdpc2UgKG9uIHRoZSBmcm9udCBhbmQgYmFjaykgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGRpbGF0ZVooKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZGlsYXRlZFooIHogKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKCB0aGlzLm1pblgsIHRoaXMubWluWSwgdGhpcy5taW5aIC0geiwgdGhpcy5tYXhYLCB0aGlzLm1heFksIHRoaXMubWF4WiArIHogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGV4cGFuZGVkIG9uIGFsbCBzaWRlcywgd2l0aCBkaWZmZXJlbnQgYW1vdW50cyBvZiBleHBhbnNpb24gYWxvbmcgZWFjaCBheGlzLlxuICAgKiBXaWxsIGJlIGlkZW50aWNhbCB0byB0aGUgYm91bmRzIHJldHVybmVkIGJ5IGNhbGxpbmcgYm91bmRzLmRpbGF0ZWRYKCB4ICkuZGlsYXRlZFkoIHkgKS5kaWxhdGVkWiggeiApLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGVYWVooKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4IC0gQW1vdW50IHRvIGRpbGF0ZSBob3Jpem9udGFsbHkgKGZvciBlYWNoIHNpZGUpXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5IC0gQW1vdW50IHRvIGRpbGF0ZSB2ZXJ0aWNhbGx5IChmb3IgZWFjaCBzaWRlKVxuICAgKiBAcGFyYW0ge251bWJlcn0geiAtIEFtb3VudCB0byBkaWxhdGUgZGVwdGgtd2lzZSAoZm9yIGVhY2ggc2lkZSlcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBkaWxhdGVkWFlaKCB4LCB5LCB6ICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyggdGhpcy5taW5YIC0geCwgdGhpcy5taW5ZIC0geSwgdGhpcy5taW5aIC0geiwgdGhpcy5tYXhYICsgeCwgdGhpcy5tYXhZICsgeSwgdGhpcy5tYXhaICsgeiApO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgYm91bmRpbmcgYm94IHRoYXQgaXMgY29udHJhY3RlZCBvbiBhbGwgc2lkZXMgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGVyb2RlKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW1vdW50XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZXJvZGVkKCBhbW91bnQgKSB7IHJldHVybiB0aGlzLmRpbGF0ZWQoIC1hbW91bnQgKTsgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGNvbnRyYWN0ZWQgaG9yaXpvbnRhbGx5IChvbiB0aGUgbGVmdCBhbmQgcmlnaHQpIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBlcm9kZVgoKS4gVGhpcyB3aWxsIHJldHVybiBhIG5ldyBib3VuZHMsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBib3VuZHMuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZXJvZGVkWCggeCApIHsgcmV0dXJuIHRoaXMuZGlsYXRlZFgoIC14ICk7IH1cblxuICAvKipcbiAgICogQSBib3VuZGluZyBib3ggdGhhdCBpcyBjb250cmFjdGVkIHZlcnRpY2FsbHkgKG9uIHRoZSB0b3AgYW5kIGJvdHRvbSkgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGVyb2RlWSgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBlcm9kZWRZKCB5ICkgeyByZXR1cm4gdGhpcy5kaWxhdGVkWSggLXkgKTsgfVxuXG4gIC8qKlxuICAgKiBBIGJvdW5kaW5nIGJveCB0aGF0IGlzIGNvbnRyYWN0ZWQgZGVwdGgtd2lzZSAob24gdGhlIGZyb250IGFuZCBiYWNrKSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZXJvZGVaKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gelxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIGVyb2RlZFooIHogKSB7IHJldHVybiB0aGlzLmRpbGF0ZWRaKCAteiApOyB9XG5cbiAgLyoqXG4gICAqIEEgYm91bmRpbmcgYm94IHRoYXQgaXMgY29udHJhY3RlZCBvbiBhbGwgc2lkZXMsIHdpdGggZGlmZmVyZW50IGFtb3VudHMgb2YgY29udHJhY3Rpb24gYWxvbmcgZWFjaCBheGlzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBlcm9kZVhZWigpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGJvdW5kcywgYW5kIHdpbGwgbm90IG1vZGlmeVxuICAgKiB0aGlzIGJvdW5kcy5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBBbW91bnQgdG8gZXJvZGUgaG9yaXpvbnRhbGx5IChmb3IgZWFjaCBzaWRlKVxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIEFtb3VudCB0byBlcm9kZSB2ZXJ0aWNhbGx5IChmb3IgZWFjaCBzaWRlKVxuICAgKiBAcGFyYW0ge251bWJlcn0geiAtIEFtb3VudCB0byBlcm9kZSBkZXB0aC13aXNlIChmb3IgZWFjaCBzaWRlKVxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIGVyb2RlZFhZWiggeCwgeSwgeiApIHsgcmV0dXJuIHRoaXMuZGlsYXRlZFhZWiggLXgsIC15LCAteiApOyB9XG5cbiAgLyoqXG4gICAqIE91ciBib3VuZHMsIHRyYW5zbGF0ZWQgaG9yaXpvbnRhbGx5IGJ5IHgsIHJldHVybmVkIGFzIGEgY29weS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2hpZnRYKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHNoaWZ0ZWRYKCB4ICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyggdGhpcy5taW5YICsgeCwgdGhpcy5taW5ZLCB0aGlzLm1pblosIHRoaXMubWF4WCArIHgsIHRoaXMubWF4WSwgdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogT3VyIGJvdW5kcywgdHJhbnNsYXRlZCB2ZXJ0aWNhbGx5IGJ5IHksIHJldHVybmVkIGFzIGEgY29weS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2hpZnRZKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHNoaWZ0ZWRZKCB5ICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyggdGhpcy5taW5YLCB0aGlzLm1pblkgKyB5LCB0aGlzLm1pblosIHRoaXMubWF4WCwgdGhpcy5tYXhZICsgeSwgdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogT3VyIGJvdW5kcywgdHJhbnNsYXRlZCBkZXB0aC13aXNlIGJ5IHosIHJldHVybmVkIGFzIGEgY29weS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2hpZnRaKCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gelxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHNoaWZ0ZWRaKCB6ICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyggdGhpcy5taW5YLCB0aGlzLm1pblksIHRoaXMubWluWiArIHosIHRoaXMubWF4WCwgdGhpcy5tYXhZLCB0aGlzLm1heFogKyB6ICk7XG4gIH1cblxuICAvKipcbiAgICogT3VyIGJvdW5kcywgdHJhbnNsYXRlZCBieSAoeCx5LHopLCByZXR1cm5lZCBhcyBhIGNvcHkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNoaWZ0KCkuIFRoaXMgd2lsbCByZXR1cm4gYSBuZXcgYm91bmRzLCBhbmQgd2lsbCBub3QgbW9kaWZ5XG4gICAqIHRoaXMgYm91bmRzLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcGFyYW0ge251bWJlcn0gelxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHNoaWZ0ZWRYWVooIHgsIHksIHogKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKCB0aGlzLm1pblggKyB4LCB0aGlzLm1pblkgKyB5LCB0aGlzLm1pblogKyB6LCB0aGlzLm1heFggKyB4LCB0aGlzLm1heFkgKyB5LCB0aGlzLm1heFogKyB6ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBvdXIgYm91bmRzLCB0cmFuc2xhdGVkIGJ5IGEgdmVjdG9yLCByZXR1cm5lZCBhcyBhIGNvcHkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2hpZnRlZCggdiApIHtcbiAgICByZXR1cm4gdGhpcy5zaGlmdGVkWFlaKCB2LngsIHYueSwgdi56ICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogTXV0YWJsZSBvcGVyYXRpb25zXG4gICAqXG4gICAqIEFsbCBtdXRhYmxlIG9wZXJhdGlvbnMgc2hvdWxkIGNhbGwgb25lIG9mIHRoZSBmb2xsb3dpbmc6XG4gICAqICAgc2V0TWluTWF4LCBzZXRNaW5YLCBzZXRNaW5ZLCBzZXRNaW5aLCBzZXRNYXhYLCBzZXRNYXhZLCBzZXRNYXhaXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogU2V0cyBlYWNoIHZhbHVlIGZvciB0aGlzIGJvdW5kcywgYW5kIHJldHVybnMgaXRzZWxmLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5YXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5ZXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5aXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhYXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhZXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhaXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2V0TWluTWF4KCBtaW5YLCBtaW5ZLCBtaW5aLCBtYXhYLCBtYXhZLCBtYXhaICkge1xuICAgIHRoaXMubWluWCA9IG1pblg7XG4gICAgdGhpcy5taW5ZID0gbWluWTtcbiAgICB0aGlzLm1pblogPSBtaW5aO1xuICAgIHRoaXMubWF4WCA9IG1heFg7XG4gICAgdGhpcy5tYXhZID0gbWF4WTtcbiAgICB0aGlzLm1heFogPSBtYXhaO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIG9mIG1pblguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB3aXRoTWluWCgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWluWFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHNldE1pblgoIG1pblggKSB7XG4gICAgdGhpcy5taW5YID0gbWluWDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiBtaW5ZLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gd2l0aE1pblkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1pbllcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBzZXRNaW5ZKCBtaW5ZICkge1xuICAgIHRoaXMubWluWSA9IG1pblk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgbWluWi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNaW5aKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtaW5aXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2V0TWluWiggbWluWiApIHtcbiAgICB0aGlzLm1pblogPSBtaW5aO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlIG9mIG1heFguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB3aXRoTWF4WCgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbWF4WFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHNldE1heFgoIG1heFggKSB7XG4gICAgdGhpcy5tYXhYID0gbWF4WDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2YWx1ZSBvZiBtYXhZLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gd2l0aE1heFkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1heFlcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBzZXRNYXhZKCBtYXhZICkge1xuICAgIHRoaXMubWF4WSA9IG1heFk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgbWF4Wi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHdpdGhNYXhaKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhaXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2V0TWF4WiggbWF4WiApIHtcbiAgICB0aGlzLm1heFogPSBtYXhaO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZhbHVlcyBvZiB0aGlzIGJvdW5kcyB0byBiZSBlcXVhbCB0byB0aGUgaW5wdXQgYm91bmRzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29weSgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge0JvdW5kczN9IGJvdW5kc1xuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHNldCggYm91bmRzICkge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggYm91bmRzLm1pblgsIGJvdW5kcy5taW5ZLCBib3VuZHMubWluWiwgYm91bmRzLm1heFgsIGJvdW5kcy5tYXhZLCBib3VuZHMubWF4WiApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXQgY29udGFpbnMgYm90aCBpdHMgb3JpZ2luYWwgYm91bmRzIGFuZCB0aGUgaW5wdXQgYm91bmRzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gdW5pb24oKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtCb3VuZHMzfSBib3VuZHNcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBpbmNsdWRlQm91bmRzKCBib3VuZHMgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxuICAgICAgTWF0aC5taW4oIHRoaXMubWluWCwgYm91bmRzLm1pblggKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1pblksIGJvdW5kcy5taW5ZICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW5aLCBib3VuZHMubWluWiApLFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWF4WCwgYm91bmRzLm1heFggKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1heFksIGJvdW5kcy5tYXhZICksXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXhaLCBib3VuZHMubWF4WiApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGlzIGJvdW5kcyBzbyB0aGF0IGl0IGlzIHRoZSBsYXJnZXN0IGJvdW5kcyBjb250YWluZWQgYm90aCBpbiBpdHMgb3JpZ2luYWwgYm91bmRzIGFuZCBpbiB0aGUgaW5wdXQgYm91bmRzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gaW50ZXJzZWN0aW9uKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm91bmRzM30gYm91bmRzXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgY29uc3RyYWluQm91bmRzKCBib3VuZHMgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KFxuICAgICAgTWF0aC5tYXgoIHRoaXMubWluWCwgYm91bmRzLm1pblggKSxcbiAgICAgIE1hdGgubWF4KCB0aGlzLm1pblksIGJvdW5kcy5taW5ZICksXG4gICAgICBNYXRoLm1heCggdGhpcy5taW5aLCBib3VuZHMubWluWiApLFxuICAgICAgTWF0aC5taW4oIHRoaXMubWF4WCwgYm91bmRzLm1heFggKSxcbiAgICAgIE1hdGgubWluKCB0aGlzLm1heFksIGJvdW5kcy5tYXhZICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5tYXhaLCBib3VuZHMubWF4WiApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGlzIGJvdW5kcyBzbyB0aGF0IGl0IGNvbnRhaW5zIGJvdGggaXRzIG9yaWdpbmFsIGJvdW5kcyBhbmQgdGhlIGlucHV0IHBvaW50ICh4LHkseikuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB3aXRoQ29vcmRpbmF0ZXMoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBhZGRDb29yZGluYXRlcyggeCwgeSwgeiApIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW5YLCB4ICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW5ZLCB5ICksXG4gICAgICBNYXRoLm1pbiggdGhpcy5taW5aLCB6ICksXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXhYLCB4ICksXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXhZLCB5ICksXG4gICAgICBNYXRoLm1heCggdGhpcy5tYXhaLCB6IClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXQgY29udGFpbnMgYm90aCBpdHMgb3JpZ2luYWwgYm91bmRzIGFuZCB0aGUgaW5wdXQgcG9pbnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB3aXRoUG9pbnQoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSBwb2ludFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIGFkZFBvaW50KCBwb2ludCApIHtcbiAgICByZXR1cm4gdGhpcy5hZGRDb29yZGluYXRlcyggcG9pbnQueCwgcG9pbnQueSwgcG9pbnQueiApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXRzIGJvdW5kYXJpZXMgYXJlIGludGVnZXItYWxpZ25lZCwgcm91bmRpbmcgdGhlIG1pbmltdW0gYm91bmRhcmllcyBkb3duIGFuZCB0aGVcbiAgICogbWF4aW11bSBib3VuZGFyaWVzIHVwIChleHBhbmRpbmcgYXMgbmVjZXNzYXJ5KS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHJvdW5kZWRPdXQoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICByb3VuZE91dCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoXG4gICAgICBNYXRoLmZsb29yKCB0aGlzLm1pblggKSxcbiAgICAgIE1hdGguZmxvb3IoIHRoaXMubWluWSApLFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5taW5aICksXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWF4WCApLFxuICAgICAgTWF0aC5jZWlsKCB0aGlzLm1heFkgKSxcbiAgICAgIE1hdGguY2VpbCggdGhpcy5tYXhaIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXRzIGJvdW5kYXJpZXMgYXJlIGludGVnZXItYWxpZ25lZCwgcm91bmRpbmcgdGhlIG1pbmltdW0gYm91bmRhcmllcyB1cCBhbmQgdGhlXG4gICAqIG1heGltdW0gYm91bmRhcmllcyBkb3duIChjb250cmFjdGluZyBhcyBuZWNlc3NhcnkpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gcm91bmRlZEluKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgcm91bmRJbigpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoXG4gICAgICBNYXRoLmNlaWwoIHRoaXMubWluWCApLFxuICAgICAgTWF0aC5jZWlsKCB0aGlzLm1pblkgKSxcbiAgICAgIE1hdGguY2VpbCggdGhpcy5taW5aICksXG4gICAgICBNYXRoLmZsb29yKCB0aGlzLm1heFggKSxcbiAgICAgIE1hdGguZmxvb3IoIHRoaXMubWF4WSApLFxuICAgICAgTWF0aC5mbG9vciggdGhpcy5tYXhaIClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vZGlmaWVzIHRoaXMgYm91bmRzIHNvIHRoYXQgaXQgd291bGQgZnVsbHkgY29udGFpbiBhIHRyYW5zZm9ybWVkIHZlcnNpb24gaWYgaXRzIHByZXZpb3VzIHZhbHVlLCBhcHBseWluZyB0aGVcbiAgICogbWF0cml4IGFzIGFuIGFmZmluZSB0cmFuc2Zvcm1hdGlvbi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBOT1RFOiBib3VuZHMudHJhbnNmb3JtKCBtYXRyaXggKS50cmFuc2Zvcm0oIGludmVyc2UgKSBtYXkgYmUgbGFyZ2VyIHRoYW4gdGhlIG9yaWdpbmFsIGJveCwgaWYgaXQgaW5jbHVkZXNcbiAgICogYSByb3RhdGlvbiB0aGF0IGlzbid0IGEgbXVsdGlwbGUgb2YgJFxccGkvMiQuIFRoaXMgaXMgYmVjYXVzZSB0aGUgYm91bmRzIG1heSBleHBhbmQgaW4gYXJlYSB0byBjb3ZlclxuICAgKiBBTEwgb2YgdGhlIGNvcm5lcnMgb2YgdGhlIHRyYW5zZm9ybWVkIGJvdW5kaW5nIGJveC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiB0cmFuc2Zvcm1lZCgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeDR9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHRyYW5zZm9ybSggbWF0cml4ICkge1xuICAgIC8vIGRvIG5vdGhpbmdcbiAgICBpZiAoIHRoaXMuaXNFbXB0eSgpICkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gb3B0aW1pemF0aW9uIHRvIGJhaWwgZm9yIGlkZW50aXR5IG1hdHJpY2VzXG4gICAgaWYgKCBtYXRyaXguaXNJZGVudGl0eSgpICkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbGV0IG1pblggPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IG1pblkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IG1pblogPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IG1heFggPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IG1heFkgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IG1heFogPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgICAvLyB1c2luZyBtdXRhYmxlIHZlY3RvciBzbyB3ZSBkb24ndCBjcmVhdGUgZXhjZXNzaXZlIGluc3RhbmNlcyBvZiBWZWN0b3IyIGR1cmluZyB0aGlzXG4gICAgLy8gbWFrZSBzdXJlIGFsbCA0IGNvcm5lcnMgYXJlIGluc2lkZSB0aGlzIHRyYW5zZm9ybWVkIGJvdW5kaW5nIGJveFxuICAgIGNvbnN0IHZlY3RvciA9IG5ldyBWZWN0b3IzKCAwLCAwLCAwICk7XG5cbiAgICBmdW5jdGlvbiB3aXRoSXQoIHZlY3RvciApIHtcbiAgICAgIG1pblggPSBNYXRoLm1pbiggbWluWCwgdmVjdG9yLnggKTtcbiAgICAgIG1pblkgPSBNYXRoLm1pbiggbWluWSwgdmVjdG9yLnkgKTtcbiAgICAgIG1pblogPSBNYXRoLm1pbiggbWluWiwgdmVjdG9yLnogKTtcbiAgICAgIG1heFggPSBNYXRoLm1heCggbWF4WCwgdmVjdG9yLnggKTtcbiAgICAgIG1heFkgPSBNYXRoLm1heCggbWF4WSwgdmVjdG9yLnkgKTtcbiAgICAgIG1heFogPSBNYXRoLm1heCggbWF4WiwgdmVjdG9yLnogKTtcbiAgICB9XG5cbiAgICB3aXRoSXQoIG1hdHJpeC5tdWx0aXBseVZlY3RvcjMoIHZlY3Rvci5zZXRYWVooIHRoaXMubWluWCwgdGhpcy5taW5ZLCB0aGlzLm1pblogKSApICk7XG4gICAgd2l0aEl0KCBtYXRyaXgubXVsdGlwbHlWZWN0b3IzKCB2ZWN0b3Iuc2V0WFlaKCB0aGlzLm1pblgsIHRoaXMubWF4WSwgdGhpcy5taW5aICkgKSApO1xuICAgIHdpdGhJdCggbWF0cml4Lm11bHRpcGx5VmVjdG9yMyggdmVjdG9yLnNldFhZWiggdGhpcy5tYXhYLCB0aGlzLm1pblksIHRoaXMubWluWiApICkgKTtcbiAgICB3aXRoSXQoIG1hdHJpeC5tdWx0aXBseVZlY3RvcjMoIHZlY3Rvci5zZXRYWVooIHRoaXMubWF4WCwgdGhpcy5tYXhZLCB0aGlzLm1pblogKSApICk7XG4gICAgd2l0aEl0KCBtYXRyaXgubXVsdGlwbHlWZWN0b3IzKCB2ZWN0b3Iuc2V0WFlaKCB0aGlzLm1pblgsIHRoaXMubWluWSwgdGhpcy5tYXhaICkgKSApO1xuICAgIHdpdGhJdCggbWF0cml4Lm11bHRpcGx5VmVjdG9yMyggdmVjdG9yLnNldFhZWiggdGhpcy5taW5YLCB0aGlzLm1heFksIHRoaXMubWF4WiApICkgKTtcbiAgICB3aXRoSXQoIG1hdHJpeC5tdWx0aXBseVZlY3RvcjMoIHZlY3Rvci5zZXRYWVooIHRoaXMubWF4WCwgdGhpcy5taW5ZLCB0aGlzLm1heFogKSApICk7XG4gICAgd2l0aEl0KCBtYXRyaXgubXVsdGlwbHlWZWN0b3IzKCB2ZWN0b3Iuc2V0WFlaKCB0aGlzLm1heFgsIHRoaXMubWF4WSwgdGhpcy5tYXhaICkgKSApO1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggbWluWCwgbWluWSwgbWluWiwgbWF4WCwgbWF4WSwgbWF4WiApO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZHMgdGhpcyBib3VuZHMgb24gYWxsIHNpZGVzIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZGlsYXRlZCgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gZFxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIGRpbGF0ZSggZCApIHtcbiAgICByZXR1cm4gdGhpcy5kaWxhdGVYWVooIGQsIGQsIGQgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmRzIHRoaXMgYm91bmRzIGhvcml6b250YWxseSAobGVmdCBhbmQgcmlnaHQpIGJ5IHRoZSBzcGVjaWZpZWQgYW1vdW50LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZGlsYXRlZFgoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBkaWxhdGVYKCB4ICkge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggdGhpcy5taW5YIC0geCwgdGhpcy5taW5ZLCB0aGlzLm1pblosIHRoaXMubWF4WCArIHgsIHRoaXMubWF4WSwgdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kcyB0aGlzIGJvdW5kcyB2ZXJ0aWNhbGx5ICh0b3AgYW5kIGJvdHRvbSkgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGVkWSgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgYm91bmRzLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBib3VuZHMgaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIGRpbGF0ZVkoIHkgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KCB0aGlzLm1pblgsIHRoaXMubWluWSAtIHksIHRoaXMubWluWiwgdGhpcy5tYXhYLCB0aGlzLm1heFkgKyB5LCB0aGlzLm1heFogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmRzIHRoaXMgYm91bmRzIGRlcHRoLXdpc2UgKGZyb250IGFuZCBiYWNrKSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGRpbGF0ZWRaKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZGlsYXRlWiggeiApIHtcbiAgICByZXR1cm4gdGhpcy5zZXRNaW5NYXgoIHRoaXMubWluWCwgdGhpcy5taW5ZLCB0aGlzLm1pblogLSB6LCB0aGlzLm1heFgsIHRoaXMubWF4WSwgdGhpcy5tYXhaICsgeiApO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZHMgdGhpcyBib3VuZHMgaW5kZXBlbmRlbnRseSBhbG9uZyBlYWNoIGF4aXMuIFdpbGwgYmUgZXF1YWwgdG8gY2FsbGluZ1xuICAgKiBib3VuZHMuZGlsYXRlWCggeCApLmRpbGF0ZVkoIHkgKS5kaWxhdGVaKCB6ICkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBkaWxhdGVkWFlaKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZGlsYXRlWFlaKCB4LCB5LCB6ICkge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggdGhpcy5taW5YIC0geCwgdGhpcy5taW5ZIC0geSwgdGhpcy5taW5aIC0geiwgdGhpcy5tYXhYICsgeCwgdGhpcy5tYXhZICsgeSwgdGhpcy5tYXhaICsgeiApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnRyYWN0cyB0aGlzIGJvdW5kcyBvbiBhbGwgc2lkZXMgYnkgdGhlIHNwZWNpZmllZCBhbW91bnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBlcm9kZWQoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGRcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBlcm9kZSggZCApIHsgcmV0dXJuIHRoaXMuZGlsYXRlKCAtZCApOyB9XG5cbiAgLyoqXG4gICAqIENvbnRyYWN0cyB0aGlzIGJvdW5kcyBob3Jpem9udGFsbHkgKGxlZnQgYW5kIHJpZ2h0KSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGVyb2RlZFgoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBlcm9kZVgoIHggKSB7IHJldHVybiB0aGlzLmRpbGF0ZVgoIC14ICk7IH1cblxuICAvKipcbiAgICogQ29udHJhY3RzIHRoaXMgYm91bmRzIHZlcnRpY2FsbHkgKHRvcCBhbmQgYm90dG9tKSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGVyb2RlZFkoKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBlcm9kZVkoIHkgKSB7IHJldHVybiB0aGlzLmRpbGF0ZVkoIC15ICk7IH1cblxuICAvKipcbiAgICogQ29udHJhY3RzIHRoaXMgYm91bmRzIGRlcHRoLXdpc2UgKGZyb250IGFuZCBiYWNrKSBieSB0aGUgc3BlY2lmaWVkIGFtb3VudC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGVyb2RlZFooKS4gVGhpcyB3aWxsIG11dGF0ZSAoY2hhbmdlKSB0aGlzIGJvdW5kcywgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgYm91bmRzIGl0c2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBlcm9kZVooIHogKSB7IHJldHVybiB0aGlzLmRpbGF0ZVooIC16ICk7IH1cblxuICAvKipcbiAgICogQ29udHJhY3RzIHRoaXMgYm91bmRzIGluZGVwZW5kZW50bHkgYWxvbmcgZWFjaCBheGlzLiBXaWxsIGJlIGVxdWFsIHRvIGNhbGxpbmdcbiAgICogYm91bmRzLmVyb2RlWCggeCApLmVyb2RlWSggeSApLmVyb2RlWiggeiApLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gZXJvZGVkWFlaKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgZXJvZGVYWVooIHgsIHksIHogKSB7IHJldHVybiB0aGlzLmRpbGF0ZVhZWiggLXgsIC15LCAteiApOyB9XG5cbiAgLyoqXG4gICAqIFRyYW5zbGF0ZXMgb3VyIGJvdW5kcyBob3Jpem9udGFsbHkgYnkgeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNoaWZ0ZWRYKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2hpZnRYKCB4ICkge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggdGhpcy5taW5YICsgeCwgdGhpcy5taW5ZLCB0aGlzLm1pblosIHRoaXMubWF4WCArIHgsIHRoaXMubWF4WSwgdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBvdXIgYm91bmRzIHZlcnRpY2FsbHkgYnkgeS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNoaWZ0ZWRZKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2hpZnRZKCB5ICkge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggdGhpcy5taW5YLCB0aGlzLm1pblkgKyB5LCB0aGlzLm1pblosIHRoaXMubWF4WCwgdGhpcy5tYXhZICsgeSwgdGhpcy5tYXhaICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBvdXIgYm91bmRzIGRlcHRoLXdpc2UgYnkgei5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBtdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIHNoaWZ0ZWRaKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2hpZnRaKCB6ICkge1xuICAgIHJldHVybiB0aGlzLnNldE1pbk1heCggdGhpcy5taW5YLCB0aGlzLm1pblksIHRoaXMubWluWiArIHosIHRoaXMubWF4WCwgdGhpcy5tYXhZLCB0aGlzLm1heFogKyB6ICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBvdXIgYm91bmRzIGJ5ICh4LHkseikuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzaGlmdGVkKCkuIFRoaXMgd2lsbCBtdXRhdGUgKGNoYW5nZSkgdGhpcyBib3VuZHMsIGluIGFkZGl0aW9uIHRvIHJldHVybmluZ1xuICAgKiB0aGlzIGJvdW5kcyBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2hpZnRYWVooIHgsIHksIHogKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0TWluTWF4KCB0aGlzLm1pblggKyB4LCB0aGlzLm1pblkgKyB5LCB0aGlzLm1pblogKyB6LCB0aGlzLm1heFggKyB4LCB0aGlzLm1heFkgKyB5LCB0aGlzLm1heFogKyB6ICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNsYXRlcyBvdXIgYm91bmRzIGJ5IHRoZSBnaXZlbiB2ZWN0b3IuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2XG4gICAqIEByZXR1cm5zIHtCb3VuZHMzfVxuICAgKi9cbiAgc2hpZnQoIHYgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2hpZnRYWVooIHYueCwgdi55LCB2LnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IEJvdW5kczMgb2JqZWN0LCB3aXRoIHRoZSBjdWJvaWQgKDNkIHJlY3RhbmdsZSkgY29uc3RydWN0aW9uIHdpdGggeCwgeSwgeiwgd2lkdGgsIGhlaWdodCBhbmQgZGVwdGguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHggLSBUaGUgbWluaW11bSB2YWx1ZSBvZiBYIGZvciB0aGUgYm91bmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0geSAtIFRoZSBtaW5pbXVtIHZhbHVlIG9mIFkgZm9yIHRoZSBib3VuZHMuXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6IC0gVGhlIG1pbmltdW0gdmFsdWUgb2YgWiBmb3IgdGhlIGJvdW5kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoIC0gVGhlIHdpZHRoIChtYXhYIC0gbWluWCkgb2YgdGhlIGJvdW5kcy5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGhlaWdodCAtIFRoZSBoZWlnaHQgKG1heFkgLSBtaW5ZKSBvZiB0aGUgYm91bmRzLlxuICAgKiBAcGFyYW0ge251bWJlcn0gZGVwdGggLSBUaGUgZGVwdGggKG1heFogLSBtaW5aKSBvZiB0aGUgYm91bmRzLlxuICAgKiBAcmV0dXJucyB7Qm91bmRzM31cbiAgICovXG4gIHN0YXRpYyBjdWJvaWQoIHgsIHksIHosIHdpZHRoLCBoZWlnaHQsIGRlcHRoICkge1xuICAgIHJldHVybiBuZXcgQm91bmRzMyggeCwgeSwgeiwgeCArIHdpZHRoLCB5ICsgaGVpZ2h0LCB6ICsgZGVwdGggKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IEJvdW5kczMgb2JqZWN0IHRoYXQgb25seSBjb250YWlucyB0aGUgc3BlY2lmaWVkIHBvaW50ICh4LHkseikuIFVzZWZ1bCBmb3IgYmVpbmcgZGlsYXRlZCB0byBmb3JtIGFcbiAgICogYm91bmRpbmcgYm94IGFyb3VuZCBhIHBvaW50LiBOb3RlIHRoYXQgdGhlIGJvdW5kcyB3aWxsIG5vdCBiZSBcImVtcHR5XCIgYXMgaXQgY29udGFpbnMgKHgseSx6KSwgYnV0IGl0IHdpbGwgaGF2ZVxuICAgKiB6ZXJvIGFyZWEuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpcbiAgICogQHJldHVybnMge0JvdW5kczN9XG4gICAqL1xuICBzdGF0aWMgcG9pbnQoIHgsIHksIHogKSB7XG4gICAgcmV0dXJuIG5ldyBCb3VuZHMzKCB4LCB5LCB6LCB4LCB5LCB6ICk7XG4gIH1cbn1cblxuLy8gQHB1YmxpYyAocmVhZC1vbmx5KSAtIEhlbHBzIHRvIGlkZW50aWZ5IHRoZSBkaW1lbnNpb24gb2YgdGhlIGJvdW5kc1xuQm91bmRzMy5wcm90b3R5cGUuaXNCb3VuZHMgPSB0cnVlO1xuQm91bmRzMy5wcm90b3R5cGUuZGltZW5zaW9uID0gMztcblxuZG90LnJlZ2lzdGVyKCAnQm91bmRzMycsIEJvdW5kczMgKTtcblxuUG9vbGFibGUubWl4SW50byggQm91bmRzMywge1xuICBpbml0aWFsaXplOiBCb3VuZHMzLnByb3RvdHlwZS5zZXRNaW5NYXhcbn0gKTtcblxuLyoqXG4gKiBBIGNvbnN0YW50IEJvdW5kczMgd2l0aCBtaW5pbXVtcyA9ICRcXGluZnR5JCwgbWF4aW11bXMgPSAkLVxcaW5mdHkkLCBzbyB0aGF0IGl0IHJlcHJlc2VudHMgXCJubyBib3VuZHMgd2hhdHNvZXZlclwiLlxuICogQHB1YmxpY1xuICpcbiAqIFRoaXMgYWxsb3dzIHVzIHRvIHRha2UgdGhlIHVuaW9uICh1bmlvbi9pbmNsdWRlQm91bmRzKSBvZiB0aGlzIGFuZCBhbnkgb3RoZXIgQm91bmRzMyB0byBnZXQgdGhlIG90aGVyIGJvdW5kcyBiYWNrLFxuICogZS5nLiBCb3VuZHMzLk5PVEhJTkcudW5pb24oIGJvdW5kcyApLmVxdWFscyggYm91bmRzICkuIFRoaXMgb2JqZWN0IG5hdHVyYWxseSBzZXJ2ZXMgYXMgdGhlIGJhc2UgY2FzZSBhcyBhIHVuaW9uIG9mXG4gKiB6ZXJvIGJvdW5kcyBvYmplY3RzLlxuICpcbiAqIEFkZGl0aW9uYWxseSwgaW50ZXJzZWN0aW9ucyB3aXRoIE5PVEhJTkcgd2lsbCBhbHdheXMgcmV0dXJuIGEgQm91bmRzMyBlcXVpdmFsZW50IHRvIE5PVEhJTkcuXG4gKlxuICogQGNvbnN0YW50IHtCb3VuZHMzfSBOT1RISU5HXG4gKi9cbkJvdW5kczMuTk9USElORyA9IG5ldyBCb3VuZHMzKCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZICk7XG5cbi8qKlxuICogQSBjb25zdGFudCBCb3VuZHMzIHdpdGggbWluaW11bXMgPSAkLVxcaW5mdHkkLCBtYXhpbXVtcyA9ICRcXGluZnR5JCwgc28gdGhhdCBpdCByZXByZXNlbnRzIFwiYWxsIGJvdW5kc1wiLlxuICogQHB1YmxpY1xuICpcbiAqIFRoaXMgYWxsb3dzIHVzIHRvIHRha2UgdGhlIGludGVyc2VjdGlvbiAoaW50ZXJzZWN0aW9uL2NvbnN0cmFpbkJvdW5kcykgb2YgdGhpcyBhbmQgYW55IG90aGVyIEJvdW5kczMgdG8gZ2V0IHRoZVxuICogb3RoZXIgYm91bmRzIGJhY2ssIGUuZy4gQm91bmRzMy5FVkVSWVRISU5HLmludGVyc2VjdGlvbiggYm91bmRzICkuZXF1YWxzKCBib3VuZHMgKS4gVGhpcyBvYmplY3QgbmF0dXJhbGx5IHNlcnZlcyBhc1xuICogdGhlIGJhc2UgY2FzZSBhcyBhbiBpbnRlcnNlY3Rpb24gb2YgemVybyBib3VuZHMgb2JqZWN0cy5cbiAqXG4gKiBBZGRpdGlvbmFsbHksIHVuaW9ucyB3aXRoIEVWRVJZVEhJTkcgd2lsbCBhbHdheXMgcmV0dXJuIGEgQm91bmRzMyBlcXVpdmFsZW50IHRvIEVWRVJZVEhJTkcuXG4gKlxuICogQGNvbnN0YW50IHtCb3VuZHMzfSBFVkVSWVRISU5HXG4gKi9cbkJvdW5kczMuRVZFUllUSElORyA9IG5ldyBCb3VuZHMzKCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZICk7XG5cbkJvdW5kczMuQm91bmRzM0lPID0gbmV3IElPVHlwZSggJ0JvdW5kczNJTycsIHtcbiAgdmFsdWVUeXBlOiBCb3VuZHMzLFxuICBkb2N1bWVudGF0aW9uOiAnYSAzLWRpbWVuc2lvbmFsIGJvdW5kcyAoYm91bmRpbmcgYm94KScsXG4gIHN0YXRlU2NoZW1hOiB7XG4gICAgbWluWDogTnVtYmVySU8sIG1pblk6IE51bWJlcklPLCBtaW5aOiBOdW1iZXJJTyxcbiAgICBtYXhYOiBOdW1iZXJJTywgbWF4WTogTnVtYmVySU8sIG1heFo6IE51bWJlcklPXG4gIH0sXG4gIHRvU3RhdGVPYmplY3Q6IGJvdW5kczMgPT4gKCB7XG4gICAgbWluWDogYm91bmRzMy5taW5YLCBtaW5ZOiBib3VuZHMzLm1pblksIG1pblo6IGJvdW5kczMubWluWixcbiAgICBtYXhYOiBib3VuZHMzLm1heFgsIG1heFk6IGJvdW5kczMubWF4WSwgbWF4WjogYm91bmRzMy5tYXhaXG4gIH0gKSxcbiAgZnJvbVN0YXRlT2JqZWN0OiBzdGF0ZU9iamVjdCA9PiBuZXcgQm91bmRzMyhcbiAgICBzdGF0ZU9iamVjdC5taW5YLCBzdGF0ZU9iamVjdC5taW5ZLCBzdGF0ZU9iamVjdC5taW5aLFxuICAgIHN0YXRlT2JqZWN0Lm1heFgsIHN0YXRlT2JqZWN0Lm1heFksIHN0YXRlT2JqZWN0Lm1heFpcbiAgKVxufSApO1xuXG5leHBvcnQgZGVmYXVsdCBCb3VuZHMzO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGdDQUFnQztBQUNyRCxPQUFPQyxNQUFNLE1BQU0saUNBQWlDO0FBQ3BELE9BQU9DLFFBQVEsTUFBTSxtQ0FBbUM7QUFDeEQsT0FBT0MsR0FBRyxNQUFNLFVBQVU7QUFDMUIsT0FBT0MsT0FBTyxNQUFNLGNBQWM7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LENBQUUsR0FBSytELElBQUksQ0FBQ0MsR0FBRyxDQUFFLElBQUksQ0FBQ2hFLElBQUksR0FBRzBELEtBQUssQ0FBQzFELElBQUksQ0FBRSxHQUFHNEQsT0FBTyxHQUFPLElBQUksQ0FBQzVELElBQUksS0FBSzBELEtBQUssQ0FBQzFELElBQU0sQ0FBRSxLQUN0SDhDLFFBQVEsQ0FBRSxJQUFJLENBQUM3QyxJQUFJLEdBQUd5RCxLQUFLLENBQUN6RCxJQUFJLENBQUUsR0FBSzhELElBQUksQ0FBQ0MsR0FBRyxDQUFFLElBQUksQ0FBQy9ELElBQUksR0FBR3lELEtBQUssQ0FBQ3pELElBQUksQ0FBRSxHQUFHMkQsT0FBTyxHQUFPLElBQUksQ0FBQzNELElBQUksS0FBS3lELEtBQUssQ0FBQ3pELElBQU0sQ0FBRSxLQUN0SDZDLFFBQVEsQ0FBRSxJQUFJLENBQUM1QyxJQUFJLEdBQUd3RCxLQUFLLENBQUN4RCxJQUFJLENBQUUsR0FBSzZELElBQUksQ0FBQ0MsR0FBRyxDQUFFLElBQUksQ0FBQzlELElBQUksR0FBR3dELEtBQUssQ0FBQ3hELElBQUksQ0FBRSxHQUFHMEQsT0FBTyxHQUFPLElBQUksQ0FBQzFELElBQUksS0FBS3dELEtBQUssQ0FBQ3hELElBQU0sQ0FBRSxLQUN0SDRDLFFBQVEsQ0FBRSxJQUFJLENBQUMzQyxJQUFJLEdBQUd1RCxLQUFLLENBQUN2RCxJQUFJLENBQUUsR0FBSzRELElBQUksQ0FBQ0MsR0FBRyxDQUFFLElBQUksQ0FBQzdELElBQUksR0FBR3VELEtBQUssQ0FBQ3ZELElBQUksQ0FBRSxHQUFHeUQsT0FBTyxHQUFPLElBQUksQ0FBQ3pELElBQUksS0FBS3VELEtBQUssQ0FBQ3ZELElBQU0sQ0FBRSxLQUN0SDJDLFFBQVEsQ0FBRSxJQUFJLENBQUMxQyxJQUFJLEdBQUdzRCxLQUFLLENBQUN0RCxJQUFJLENBQUUsR0FBSzJELElBQUksQ0FBQ0MsR0FBRyxDQUFFLElBQUksQ0FBQzVELElBQUksR0FBR3NELEtBQUssQ0FBQ3RELElBQUksQ0FBRSxHQUFHd0QsT0FBTyxHQUFP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QyxNQUFNLENBQUN1QyxlQUFlLENBQUVGLE1BQU0sQ0FBQ0csTUFBTSxDQUFFLElBQUksQ0FBQ3pILElBQUksRUFBRSxJQUFJLENBQUNGLElBQUksRUFBRSxJQUFJLENBQUNDLElBQUksQ0FBRSxDQUFFLENBQUU7SUFDcEZ3SCxNQUFNLENBQUV0QyxNQUFNLENBQUN1QyxlQUFlLENBQUVGLE1BQU0sQ0FBQ0csTUFBTSxDQUFFLElBQUksQ0FBQ3pILElBQUksRUFBRSxJQUFJLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNGLElBQUksQ0FBRSxDQUFFLENBQUU7SUFDcEZ3SCxNQUFNLENBQUV0QyxNQUFNLENBQUN1QyxlQUFlLENBQUVGLE1BQU0sQ0FBQ0csTUFBTSxDQUFFLElBQUksQ0FBQzVILElBQUksRUFBRSxJQUFJLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNJLElBQUksQ0FBRSxDQUFFLENBQUU7SUFDcEZxSCxNQUFNLENBQUV0QyxNQUFNLENBQUN1QyxlQUFlLENBQUVGLE1BQU0sQ0FBQ0csTUFBTSxDQUFFLElBQUksQ0FBQzVILElBQUksRUFBRSxJQUFJLENBQUNJLElBQUksRUFBRSxJQUFJLENBQUNDLElBQUksQ0FBRSxDQUFFLENBQUU7SUFDcEZxSCxNQUFNLENBQUV0QyxNQUFNLENBQUN1QyxlQUFlLENBQUVGLE1BQU0sQ0FBQ0csTUFBTSxDQUFFLElBQUksQ0FBQ3pILElBQUksRUFBRSxJQUFJLENBQUNGLElBQUksRUFBRSxJQUFJLENBQUNJLElBQUksQ0FBRSxDQUFFLENBQUU7SUFDcEZxSCxNQUFNLENBQUV0QyxNQUFNLENBQUN1QyxlQUFlLENBQUVGLE1BQU0sQ0FBQ0csTUFBTSxDQUFFLElBQUksQ0FBQ3pILElBQUksRUFBRSxJQUFJLENBQUNDLElBQUksRUFBRSxJQUFJLENBQUNDLElBQUksQ0FBRSxDQUFFLENBQUU7SUFDcEYsT0FBTyxJQUFJLENBQUNtRyxTQUFTLENBQUV4RyxJQUFJLEVBQUVDLElBQUksRUFBRUMsSUFBSSxFQUFFQyxJQUFJLEVBQUVDLElBQUksRUFBRUMs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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Combination.js
// Copyright 2022, University of Colorado Boulder

/**
 * An immutable combination that represents a subset of a set
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


class Combination {
  /**
   * Creates a combination that will include elements where list[i] === true
   */
  constructor(inclusions) {
    this.inclusions = inclusions;
  }
  size() {
    return this.inclusions.length;
  }
  includes(index) {
    return this.inclusions[index];
  }

  /**
   * Applies the combination to an array, returning a new array with the used elements.
   */
  apply(array) {
    return array.filter((element, index) => this.inclusions[index]);
  }

  /**
   * Creates a new combination that is the inverse of this (includes the opposite elements)
   */
  inverted() {
    return new Combination(this.inclusions.map(inclusion => !inclusion));
  }
  getIncludedIndices() {
    return _.range(0, this.size()).filter(i => this.inclusions[i]);
  }
  toString() {
    return `C[${this.inclusions.map(i => i ? '1' : '0').join('')}]`;
  }
  equals(combination) {
    return this.inclusions.length === combination.inclusions.length && _.isEqual(this.inclusions, combination.inclusions);
  }

  /**
   * Creates an empty combination of a given size.
   */
  static empty(size) {
    return new Combination(_.range(0, size).map(() => false));
  }

  /**
   * Creates a full combination of a given size.
   */
  static full(size) {
    return new Combination(_.range(0, size).map(() => true));
  }

  /**
   * Lists all combinations from a given size
   */
  static combinations(size) {
    const combinations = [];
    const stack = [];
    (function recurse(index) {
      if (index === size) {
        combinations.push(new Combination(stack.slice()));
      } else {
        stack.push(false);
        recurse(index + 1);
        stack.pop();
        stack.push(true);
        recurse(index + 1);
        stack.pop();
      }
    })(0);
    return combinations;
  }

  /**
   * Calls a callback on every single possible permutation of the given Array
   *
   * @param array
   * @param callback - Called on each permuted version of the array possible
   */
  static forEachCombination(array, callback) {
    const stack = [];
    (function recurse(index) {
      if (index === array.length) {
        callback(stack);
      } else {
        recurse(index + 1);
        stack.push(array[index]);
        recurse(index + 1);
        stack.pop();
      }
    })(0);
  }
  static combinationsOf(array) {
    const results = [];
    Combination.forEachCombination(array, result => {
      results.push(result.slice());
    });
    return results;
  }
}
js_dot.register('Combination', Combination);
/* harmony default export */ const js_Combination = ((/* unused pure expression or super */ null && (Combination)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJDb21iaW5hdGlvbiIsImNvbnN0cnVjdG9yIiwiaW5jbHVzaW9ucyIsInNpemUiLCJsZW5ndGgiLCJpbmNsdWRlcyIsImluZGV4IiwiYXBwbHkiLCJhcnJheSIsImZpbHRlciIsImVsZW1lbnQiLCJpbnZlcnRlZCIsIm1hcCIsImluY2x1c2lvbiIsImdldEluY2x1ZGVkSW5kaWNlcyIsIl8iLCJyYW5nZSIsImkiLCJ0b1N0cmluZyIsImpvaW4iLCJlcXVhbHMiLCJjb21iaW5hdGlvbiIsImlzRXF1YWwiLCJlbXB0eSIsImZ1bGwiLCJjb21iaW5hdGlvbnMiLCJzdGFjayIsInJlY3Vyc2UiLCJwdXNoIiwic2xpY2UiLCJwb3AiLCJmb3JFYWNoQ29tYmluYXRpb24iLCJjYWxsYmFjayIsImNvbWJpbmF0aW9uc09mIiwicmVzdWx0cyIsInJlc3VsdCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29tYmluYXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEFuIGltbXV0YWJsZSBjb21iaW5hdGlvbiB0aGF0IHJlcHJlc2VudHMgYSBzdWJzZXQgb2YgYSBzZXRcbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5cbmNsYXNzIENvbWJpbmF0aW9uIHtcblxuICBwdWJsaWMgcmVhZG9ubHkgaW5jbHVzaW9uczogYm9vbGVhbltdO1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29tYmluYXRpb24gdGhhdCB3aWxsIGluY2x1ZGUgZWxlbWVudHMgd2hlcmUgbGlzdFtpXSA9PT0gdHJ1ZVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBpbmNsdXNpb25zOiBib29sZWFuW10gKSB7XG4gICAgdGhpcy5pbmNsdXNpb25zID0gaW5jbHVzaW9ucztcbiAgfVxuXG4gIHB1YmxpYyBzaXplKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuaW5jbHVzaW9ucy5sZW5ndGg7XG4gIH1cblxuICBwdWJsaWMgaW5jbHVkZXMoIGluZGV4OiBudW1iZXIgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW5jbHVzaW9uc1sgaW5kZXggXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoZSBjb21iaW5hdGlvbiB0byBhbiBhcnJheSwgcmV0dXJuaW5nIGEgbmV3IGFycmF5IHdpdGggdGhlIHVzZWQgZWxlbWVudHMuXG4gICAqL1xuICBwdWJsaWMgYXBwbHk8VD4oIGFycmF5OiBUW10gKTogVFtdIHtcbiAgICByZXR1cm4gYXJyYXkuZmlsdGVyKCAoIGVsZW1lbnQsIGluZGV4ICkgPT4gdGhpcy5pbmNsdXNpb25zWyBpbmRleCBdICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBjb21iaW5hdGlvbiB0aGF0IGlzIHRoZSBpbnZlcnNlIG9mIHRoaXMgKGluY2x1ZGVzIHRoZSBvcHBvc2l0ZSBlbGVtZW50cylcbiAgICovXG4gIHB1YmxpYyBpbnZlcnRlZCgpOiBDb21iaW5hdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBDb21iaW5hdGlvbiggdGhpcy5pbmNsdXNpb25zLm1hcCggaW5jbHVzaW9uID0+ICFpbmNsdXNpb24gKSApO1xuICB9XG5cbiAgcHVibGljIGdldEluY2x1ZGVkSW5kaWNlcygpOiBudW1iZXJbXSB7XG4gICAgcmV0dXJuIF8ucmFuZ2UoIDAsIHRoaXMuc2l6ZSgpICkuZmlsdGVyKCBpID0+IHRoaXMuaW5jbHVzaW9uc1sgaSBdICk7XG4gIH1cblxuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYENbJHt0aGlzLmluY2x1c2lvbnMubWFwKCBpID0+IGkgPyAnMScgOiAnMCcgKS5qb2luKCAnJyApfV1gO1xuICB9XG5cbiAgcHVibGljIGVxdWFscyggY29tYmluYXRpb246IENvbWJpbmF0aW9uICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmluY2x1c2lvbnMubGVuZ3RoID09PSBjb21iaW5hdGlvbi5pbmNsdXNpb25zLmxlbmd0aCAmJiBfLmlzRXF1YWwoIHRoaXMuaW5jbHVzaW9ucywgY29tYmluYXRpb24uaW5jbHVzaW9ucyApO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gZW1wdHkgY29tYmluYXRpb24gb2YgYSBnaXZlbiBzaXplLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBlbXB0eSggc2l6ZTogbnVtYmVyICk6IENvbWJpbmF0aW9uIHtcbiAgICByZXR1cm4gbmV3IENvbWJpbmF0aW9uKCBfLnJhbmdlKCAwLCBzaXplICkubWFwKCAoKSA9PiBmYWxzZSApICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGZ1bGwgY29tYmluYXRpb24gb2YgYSBnaXZlbiBzaXplLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmdWxsKCBzaXplOiBudW1iZXIgKTogQ29tYmluYXRpb24ge1xuICAgIHJldHVybiBuZXcgQ29tYmluYXRpb24oIF8ucmFuZ2UoIDAsIHNpemUgKS5tYXAoICgpID0+IHRydWUgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3RzIGFsbCBjb21iaW5hdGlvbnMgZnJvbSBhIGdpdmVuIHNpemVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgY29tYmluYXRpb25zKCBzaXplOiBudW1iZXIgKTogQ29tYmluYXRpb25bXSB7XG5cbiAgICBjb25zdCBjb21iaW5hdGlvbnM6IENvbWJpbmF0aW9uW10gPSBbXTtcbiAgICBjb25zdCBzdGFjazogYm9vbGVhbltdID0gW107XG5cbiAgICAoIGZ1bmN0aW9uIHJlY3Vyc2UoIGluZGV4OiBudW1iZXIgKTogdm9pZCB7XG4gICAgICBpZiAoIGluZGV4ID09PSBzaXplICkge1xuICAgICAgICBjb21iaW5hdGlvbnMucHVzaCggbmV3IENvbWJpbmF0aW9uKCBzdGFjay5zbGljZSgpICkgKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBzdGFjay5wdXNoKCBmYWxzZSApO1xuICAgICAgICByZWN1cnNlKCBpbmRleCArIDEgKTtcbiAgICAgICAgc3RhY2sucG9wKCk7XG4gICAgICAgIHN0YWNrLnB1c2goIHRydWUgKTtcbiAgICAgICAgcmVjdXJzZSggaW5kZXggKyAxICk7XG4gICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgfVxuICAgIH0gKSggMCApO1xuXG4gICAgcmV0dXJuIGNvbWJpbmF0aW9ucztcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxscyBhIGNhbGxiYWNrIG9uIGV2ZXJ5IHNpbmdsZSBwb3NzaWJsZSBwZXJtdXRhdGlvbiBvZiB0aGUgZ2l2ZW4gQXJyYXlcbiAgICpcbiAgICogQHBhcmFtIGFycmF5XG4gICAqIEBwYXJhbSBjYWxsYmFjayAtIENhbGxlZCBvbiBlYWNoIHBlcm11dGVkIHZlcnNpb24gb2YgdGhlIGFycmF5IHBvc3NpYmxlXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZvckVhY2hDb21iaW5hdGlvbjxUPiggYXJyYXk6IFRbXSwgY2FsbGJhY2s6ICggYXJyYXk6IHJlYWRvbmx5IFRbXSApID0+IHZvaWQgKTogdm9pZCB7XG4gICAgY29uc3Qgc3RhY2s6IFRbXSA9IFtdO1xuXG4gICAgKCBmdW5jdGlvbiByZWN1cnNlKCBpbmRleDogbnVtYmVyICk6IHZvaWQge1xuICAgICAgaWYgKCBpbmRleCA9PT0gYXJyYXkubGVuZ3RoICkge1xuICAgICAgICBjYWxsYmFjayggc3RhY2sgKTtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICByZWN1cnNlKCBpbmRleCArIDEgKTtcbiAgICAgICAgc3RhY2sucHVzaCggYXJyYXlbIGluZGV4IF0gKTtcbiAgICAgICAgcmVjdXJzZSggaW5kZXggKyAxICk7XG4gICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgfVxuICAgIH0gKSggMCApO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjb21iaW5hdGlvbnNPZjxUPiggYXJyYXk6IFRbXSApOiBUW11bXSB7XG4gICAgY29uc3QgcmVzdWx0czogVFtdW10gPSBbXTtcbiAgICBDb21iaW5hdGlvbi5mb3JFYWNoQ29tYmluYXRpb24oIGFycmF5LCByZXN1bHQgPT4ge1xuICAgICAgcmVzdWx0cy5wdXNoKCByZXN1bHQuc2xpY2UoKSApO1xuICAgIH0gKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxufVxuXG5kb3QucmVnaXN0ZXIoICdDb21iaW5hdGlvbicsIENvbWJpbmF0aW9uICk7XG5cbmV4cG9ydCBkZWZhdWx0IENvbWJpbmF0aW9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxHQUFHLE1BQU0sVUFBVTtBQUUxQixNQUFNQyxXQUFXLENBQUM7RUFJaEI7QUFDRjtBQUNBO0VBQ1NDLFdBQVdBLENBQUVDLFVBQXFCLEVBQUc7SUFDMUMsSUFBSSxDQUFDQSxVQUFVLEdBQUdBLFVBQVU7RUFDOUI7RUFFT0MsSUFBSUEsQ0FBQSxFQUFXO0lBQ3BCLE9BQU8sSUFBSSxDQUFDRCxVQUFVLENBQUNFLE1BQU07RUFDL0I7RUFFT0MsUUFBUUEsQ0FBRUMsS0FBYSxFQUFZO0lBQ3hDLE9BQU8sSUFBSSxDQUFDSixVQUFVLENBQUVJLEtBQUssQ0FBRTtFQUNqQzs7RUFFQTtBQUNGO0FBQ0E7RUFDU0MsS0FBS0EsQ0FBS0MsS0FBVSxFQUFRO0lBQ2pDLE9BQU9BLEtBQUssQ0FBQ0MsTUFBTSxDQUFFLENBQUVDLE9BQU8sRUFBRUosS0FBSyxLQUFNLElBQUksQ0FBQ0osVUFBVSxDQUFFSSxLQUFLLENBQUUsQ0FBRTtFQUN2RTs7RUFFQTtBQUNGO0FBQ0E7RUFDU0ssUUFBUUEsQ0FBQSxFQUFnQjtJQUM3QixPQUFPLElBQUlYLFdBQVcsQ0FBRSxJQUFJLENBQUNFLFVBQVUsQ0FBQ1UsR0FBRyxDQUFFQyxTQUFTLElBQUksQ0FBQ0EsU0FBUyxDQUFFLENBQUU7RUFDMUU7RUFFT0Msa0JBQWtCQSxDQUFB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/CompletePiecewiseLinearFunction.js
// Copyright 2022, University of Colorado Boulder

/**
 * Describes a 1d complete (fully defined for any number) function, where values are extrapolated given the final end
 * points.
 *
 * E.g. if the points (0,0) and (1,1) are provided, it represents the function f(x) = x for ALL values, especially
 * values outside of the range [0,1]. For example, f(6) = 6.
 *
 * If a single point is provided, it represents a constant function.
 *
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */




class CompletePiecewiseLinearFunction {
  // Assumed to be sorted by x value, and continuous
  constructor(points) {
    assert && assert(points.length > 0);
    assert && points.forEach((point, i) => {
      if (i < points.length - 1) {
        assert && assert(point.x < points[i + 1].x, 'Points should be strictly increasing in x value (ordered by their x value)');
      }
    });

    // We're going to remove collinear points, so we create an extra copy
    this.points = points.slice();

    // NOTE: The removal of collinear points helps improve performance, since we sometimes need to "expand" the number
    // of points. Repeated minimums/maximums for many inputs could otherwise become quite slow.
    for (let i = 0; i < this.points.length - 2; i++) {
      const a = this.points[i];
      const b = this.points[i + 1];
      const c = this.points[i + 2];
      if (js_Utils.arePointsCollinear(a, b, c)) {
        this.points.splice(i + 1, 1);
        i--;
      }
    }
  }

  /**
   * Returns the pair of points that the x value is defined by.
   *
   * NOTE: x may NOT be contained in these points, if it's either less than or greater than any points in the points
   * list.
   */
  findMatchingPair(x) {
    assert && assert(this.points.length > 1);
    let i = 0;
    while (i < this.points.length - 2 && this.points[i + 1].x < x) {
      i++;
    }
    return [this.points[i], this.points[i + 1]];
  }

  /**
   * Evaluates the function at the given x value, e.g. returns f(x).
   */
  evaluate(x) {
    if (this.points.length === 1) {
      return this.points[0].y;
    } else {
      const [leftPoint, rightPoint] = this.findMatchingPair(x);
      if (leftPoint.x === x) {
        return leftPoint.y;
      } else if (rightPoint.x === x) {
        return rightPoint.y;
      } else {
        return js_Utils.linear(leftPoint.x, rightPoint.x, leftPoint.y, rightPoint.y, x);
      }
    }
  }

  /**
   * Returns an array that combines sorted unique x-values provided by this function and/or the other function.
   */
  getCombinedXValues(linearFunction) {
    return CompletePiecewiseLinearFunction.sortedUniqueEpsilon(this.points.map(point => point.x).concat(linearFunction.points.map(point => point.x)));
  }

  /**
   * Returns an array that combines the sorted unique x-values included in this function and/or the other function, OR the unique x-values
   * that result from the intersection of the two functions.
   */
  getIntersectedXValues(linearFunction) {
    const xValues = this.getCombinedXValues(linearFunction);
    const newXValues = [];
    for (let i = 0; i < xValues.length - 1; i++) {
      const leftX = xValues[i];
      const rightX = xValues[i + 1];
      const intersectionPoint = js_Utils.lineLineIntersection(
      // The linear function defined in this
      new Vector2(leftX, this.evaluate(leftX)), new Vector2(rightX, this.evaluate(rightX)),
      // The passed in argument linear function
      new Vector2(leftX, linearFunction.evaluate(leftX)), new Vector2(rightX, linearFunction.evaluate(rightX)));
      if (intersectionPoint && (
      // If it's our first pair of points, don't filter out points that are on the left side of the left point
      i === 0 || intersectionPoint.x > leftX) && (
      // If it's our last pair of points, don't filter out points that are on the right side of the right point
      i === xValues.length - 2 || intersectionPoint.x < rightX)) {
        newXValues.push(intersectionPoint.x);
      }
    }

    // Remove duplicate values above and sort them
    const criticalXValues = CompletePiecewiseLinearFunction.sortedUniqueEpsilon([...xValues, ...newXValues]);

    // To capture the slope at the start/end, we'll add extra points to guarantee this. If they're duplicated, they'll
    // be removed during the collinear check on construction.
    return [criticalXValues[0] - 1, ...criticalXValues, criticalXValues[criticalXValues.length - 1] + 1];
  }

  /**
   * Returns a new function that's the result of applying the binary operation at the given x values.
   */
  binaryXOperation(linearFunction, operation, xValues) {
    return new CompletePiecewiseLinearFunction(xValues.map(x => {
      return new Vector2(x, operation(this.evaluate(x), linearFunction.evaluate(x)));
    }));
  }

  /**
   * Returns a new function that's the result of applying the binary operation at the x values that already occur
   * in each function.
   */
  binaryPointwiseOperation(linearFunction, operation) {
    return this.binaryXOperation(linearFunction, operation, this.getCombinedXValues(linearFunction));
  }

  /**
   * Returns a new function that's the result of applying the binary operation at the x values that either occur in
   * each function OR at the intersection of the two functions.
   */
  binaryIntersectingOperation(linearFunction, operation) {
    return this.binaryXOperation(linearFunction, operation, this.getIntersectedXValues(linearFunction));
  }

  /**
   * Returns a CompletePiecewiseLinearFunction that's the result of adding the two functions.
   */
  plus(linearFunction) {
    return this.binaryPointwiseOperation(linearFunction, (a, b) => a + b);
  }

  /**
   * Returns a CompletePiecewiseLinearFunction that's the result of subtracting the two functions.
   */
  minus(linearFunction) {
    return this.binaryPointwiseOperation(linearFunction, (a, b) => a - b);
  }

  /**
   * Returns a CompletePiecewiseLinearFunction that's the result of taking the minimum of the two functions
   */
  min(linearFunction) {
    return this.binaryIntersectingOperation(linearFunction, Math.min);
  }

  /**
   * Returns a CompletePiecewiseLinearFunction that's the result of taking the maximum of the two functions
   */
  max(linearFunction) {
    return this.binaryIntersectingOperation(linearFunction, Math.max);
  }

  /**
   * Allows redefining or clamping/truncating the function by only representing it from the given x values
   */
  withXValues(xValues) {
    return new CompletePiecewiseLinearFunction(xValues.map(x => new Vector2(x, this.evaluate(x))));
  }

  /**
   * Returns an inverted form of the function (assuming it is monotonically increasing or monotonically decreasing)
   */
  inverted() {
    const points = this.points.map(point => new Vector2(point.y, point.x));

    // NOTE: We'll rely on the constructor to make sure that the inverse is valid. Here we'll handle the monotonically
    // decreasing case (which is invertible, just needs a reversal of points)
    if (points.length > 1 && points[0].x > points[1].x) {
      points.reverse();
    }
    return new CompletePiecewiseLinearFunction(points);
  }
  static sum(...functions) {
    return functions.reduce((a, b) => a.plus(b));
  }
  static min(...functions) {
    return functions.reduce((a, b) => a.min(b));
  }
  static max(...functions) {
    return functions.reduce((a, b) => a.max(b));
  }
  static constant(y) {
    return new CompletePiecewiseLinearFunction([new Vector2(0, y)]);
  }

  // Represents the function ax+b
  static linear(a, b) {
    return new CompletePiecewiseLinearFunction([new Vector2(0, b), new Vector2(1, a + b)]);
  }

  /**
   * Returns a sorted list of the input numbers, ensuring no duplicates within a specified epsilon value
   */
  static sortedUniqueEpsilon(numbers, epsilon = 1e-10) {
    numbers = _.sortBy(numbers);
    for (let i = 0; i < numbers.length - 1; i++) {
      if (Math.abs(numbers[i] - numbers[i + 1]) < epsilon) {
        numbers.splice(i, 1);
        i--;
      }
    }
    return numbers;
  }
}
js_dot.register('CompletePiecewiseLinearFunction', CompletePiecewiseLinearFunction);
/* harmony default export */ const js_CompletePiecewiseLinearFunction = ((/* unused pure expression or super */ null && (CompletePiecewiseLinearFunction)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJVdGlscyIsIlZlY3RvcjIiLCJDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uIiwiY29uc3RydWN0b3IiLCJwb2ludHMiLCJhc3NlcnQiLCJsZW5ndGgiLCJmb3JFYWNoIiwicG9pbnQiLCJpIiwieCIsInNsaWNlIiwiYSIsImIiLCJjIiwiYXJlUG9pbnRzQ29sbGluZWFyIiwic3BsaWNlIiwiZmluZE1hdGNoaW5nUGFpciIsImV2YWx1YXRlIiwieSIsImxlZnRQb2ludCIsInJpZ2h0UG9pbnQiLCJsaW5lYXIiLCJnZXRDb21iaW5lZFhWYWx1ZXMiLCJsaW5lYXJGdW5jdGlvbiIsInNvcnRlZFVuaXF1ZUVwc2lsb24iLCJtYXAiLCJjb25jYXQiLCJnZXRJbnRlcnNlY3RlZFhWYWx1ZXMiLCJ4VmFsdWVzIiwibmV3WFZhbHVlcyIsImxlZnRYIiwicmlnaHRYIiwiaW50ZXJzZWN0aW9uUG9pbnQiLCJsaW5lTGluZUludGVyc2VjdGlvbiIsInB1c2giLCJjcml0aWNhbFhWYWx1ZXMiLCJiaW5hcnlYT3BlcmF0aW9uIiwib3BlcmF0aW9uIiwiYmluYXJ5UG9pbnR3aXNlT3BlcmF0aW9uIiwiYmluYXJ5SW50ZXJzZWN0aW5nT3BlcmF0aW9uIiwicGx1cyIsIm1pbnVzIiwibWluIiwiTWF0aCIsIm1heCIsIndpdGhYVmFsdWVzIiwiaW52ZXJ0ZWQiLCJyZXZlcnNlIiwic3VtIiwiZnVuY3Rpb25zIiwicmVkdWNlIiwiY29uc3RhbnQiLCJudW1iZXJzIiwiZXBzaWxvbiIsIl8iLCJzb3J0QnkiLCJhYnMiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkNvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIERlc2NyaWJlcyBhIDFkIGNvbXBsZXRlIChmdWxseSBkZWZpbmVkIGZvciBhbnkgbnVtYmVyKSBmdW5jdGlvbiwgd2hlcmUgdmFsdWVzIGFyZSBleHRyYXBvbGF0ZWQgZ2l2ZW4gdGhlIGZpbmFsIGVuZFxuICogcG9pbnRzLlxuICpcbiAqIEUuZy4gaWYgdGhlIHBvaW50cyAoMCwwKSBhbmQgKDEsMSkgYXJlIHByb3ZpZGVkLCBpdCByZXByZXNlbnRzIHRoZSBmdW5jdGlvbiBmKHgpID0geCBmb3IgQUxMIHZhbHVlcywgZXNwZWNpYWxseVxuICogdmFsdWVzIG91dHNpZGUgb2YgdGhlIHJhbmdlIFswLDFdLiBGb3IgZXhhbXBsZSwgZig2KSA9IDYuXG4gKlxuICogSWYgYSBzaW5nbGUgcG9pbnQgaXMgcHJvdmlkZWQsIGl0IHJlcHJlc2VudHMgYSBjb25zdGFudCBmdW5jdGlvbi5cbiAqXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IFV0aWxzIGZyb20gJy4vVXRpbHMuanMnO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi9WZWN0b3IyLmpzJztcblxuY2xhc3MgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB7XG5cbiAgcHVibGljIHBvaW50czogVmVjdG9yMltdO1xuXG4gIC8vIEFzc3VtZWQgdG8gYmUgc29ydGVkIGJ5IHggdmFsdWUsIGFuZCBjb250aW51b3VzXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcG9pbnRzOiBWZWN0b3IyW10gKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcG9pbnRzLmxlbmd0aCA+IDAgKTtcbiAgICBhc3NlcnQgJiYgcG9pbnRzLmZvckVhY2goICggcG9pbnQsIGkgKSA9PiB7XG4gICAgICBpZiAoIGkgPCBwb2ludHMubGVuZ3RoIC0gMSApIHtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggcG9pbnQueCA8IHBvaW50c1sgaSArIDEgXS54LFxuICAgICAgICAgICdQb2ludHMgc2hvdWxkIGJlIHN0cmljdGx5IGluY3JlYXNpbmcgaW4geCB2YWx1ZSAob3JkZXJlZCBieSB0aGVpciB4IHZhbHVlKScgKTtcbiAgICAgIH1cbiAgICB9ICk7XG5cbiAgICAvLyBXZSdyZSBnb2luZyB0byByZW1vdmUgY29sbGluZWFyIHBvaW50cywgc28gd2UgY3JlYXRlIGFuIGV4dHJhIGNvcHlcbiAgICB0aGlzLnBvaW50cyA9IHBvaW50cy5zbGljZSgpO1xuXG4gICAgLy8gTk9URTogVGhlIHJlbW92YWwgb2YgY29sbGluZWFyIHBvaW50cyBoZWxwcyBpbXByb3ZlIHBlcmZvcm1hbmNlLCBzaW5jZSB3ZSBzb21ldGltZXMgbmVlZCB0byBcImV4cGFuZFwiIHRoZSBudW1iZXJcbiAgICAvLyBvZiBwb2ludHMuIFJlcGVhdGVkIG1pbmltdW1zL21heGltdW1zIGZvciBtYW55IGlucHV0cyBjb3VsZCBvdGhlcndpc2UgYmVjb21lIHF1aXRlIHNsb3cuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5wb2ludHMubGVuZ3RoIC0gMjsgaSsrICkge1xuICAgICAgY29uc3QgYSA9IHRoaXMucG9pbnRzWyBpIF07XG4gICAgICBjb25zdCBiID0gdGhpcy5wb2ludHNbIGkgKyAxIF07XG4gICAgICBjb25zdCBjID0gdGhpcy5wb2ludHNbIGkgKyAyIF07XG5cbiAgICAgIGlmICggVXRpbHMuYXJlUG9pbnRzQ29sbGluZWFyKCBhLCBiLCBjICkgKSB7XG4gICAgICAgIHRoaXMucG9pbnRzLnNwbGljZSggaSArIDEsIDEgKTtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwYWlyIG9mIHBvaW50cyB0aGF0IHRoZSB4IHZhbHVlIGlzIGRlZmluZWQgYnkuXG4gICAqXG4gICAqIE5PVEU6IHggbWF5IE5PVCBiZSBjb250YWluZWQgaW4gdGhlc2UgcG9pbnRzLCBpZiBpdCdzIGVpdGhlciBsZXNzIHRoYW4gb3IgZ3JlYXRlciB0aGFuIGFueSBwb2ludHMgaW4gdGhlIHBvaW50c1xuICAgKiBsaXN0LlxuICAgKi9cbiAgcHVibGljIGZpbmRNYXRjaGluZ1BhaXIoIHg6IG51bWJlciApOiBbIFZlY3RvcjIsIFZlY3RvcjIgXSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5wb2ludHMubGVuZ3RoID4gMSApO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIHdoaWxlICggaSA8IHRoaXMucG9pbnRzLmxlbmd0aCAtIDIgJiYgdGhpcy5wb2ludHNbIGkgKyAxIF0ueCA8IHggKSB7XG4gICAgICBpKys7XG4gICAgfVxuICAgIHJldHVybiBbIHRoaXMucG9pbnRzWyBpIF0sIHRoaXMucG9pbnRzWyBpICsgMSBdIF07XG4gIH1cblxuICAvKipcbiAgICogRXZhbHVhdGVzIHRoZSBmdW5jdGlvbiBhdCB0aGUgZ2l2ZW4geCB2YWx1ZSwgZS5nLiByZXR1cm5zIGYoeCkuXG4gICAqL1xuICBwdWJsaWMgZXZhbHVhdGUoIHg6IG51bWJlciApOiBudW1iZXIge1xuICAgIGlmICggdGhpcy5wb2ludHMubGVuZ3RoID09PSAxICkge1xuICAgICAgcmV0dXJuIHRoaXMucG9pbnRzWyAwIF0ueTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBjb25zdCBbIGxlZnRQb2ludCwgcmlnaHRQb2ludCBdID0gdGhpcy5maW5kTWF0Y2hpbmdQYWlyKCB4ICk7XG5cbiAgICAgIGlmICggbGVmdFBvaW50LnggPT09IHggKSB7XG4gICAgICAgIHJldHVybiBsZWZ0UG9pbnQueTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCByaWdodFBvaW50LnggPT09IHggKSB7XG4gICAgICAgIHJldHVybiByaWdodFBvaW50Lnk7XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFV0aWxzLmxpbmVhciggbGVmdFBvaW50LngsIHJpZ2h0UG9pbnQueCwgbGVmdFBvaW50LnksIHJpZ2h0UG9pbnQueSwgeCApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IHRoYXQgY29tYmluZXMgc29ydGVkIHVuaXF1ZSB4LXZhbHVlcyBwcm92aWRlZCBieSB0aGlzIGZ1bmN0aW9uIGFuZC9vciB0aGUgb3RoZXIgZnVuY3Rpb24uXG4gICAqL1xuICBwcml2YXRlIGdldENvbWJpbmVkWFZhbHVlcyggbGluZWFyRnVuY3Rpb246IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24gKTogbnVtYmVyW10ge1xuICAgIHJldHVybiBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uLnNvcnRlZFVuaXF1ZUVwc2lsb24oXG4gICAgICB0aGlzLnBvaW50cy5tYXAoIHBvaW50ID0+IHBvaW50LnggKS5jb25jYXQoIGxpbmVhckZ1bmN0aW9uLnBvaW50cy5tYXAoIHBvaW50ID0+IHBvaW50LnggKSApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IHRoYXQgY29tYmluZXMgdGhlIHNvcnRlZCB1bmlxdWUgeC12YWx1ZXMgaW5jbHVkZWQgaW4gdGhpcyBmdW5jdGlvbiBhbmQvb3IgdGhlIG90aGVyIGZ1bmN0aW9uLCBPUiB0aGUgdW5pcXVlIHgtdmFsdWVzXG4gICAqIHRoYXQgcmVzdWx0IGZyb20gdGhlIGludGVyc2VjdGlvbiBvZiB0aGUgdHdvIGZ1bmN0aW9ucy5cbiAgICovXG4gIHByaXZhdGUgZ2V0SW50ZXJzZWN0ZWRYVmFsdWVzKCBsaW5lYXJGdW5jdGlvbjogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiApOiBudW1iZXJbXSB7XG4gICAgY29uc3QgeFZhbHVlcyA9IHRoaXMuZ2V0Q29tYmluZWRYVmFsdWVzKCBsaW5lYXJGdW5jdGlvbiApO1xuICAgIGNvbnN0IG5ld1hWYWx1ZXM6IG51bWJlcltdID0gW107XG5cbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB4VmFsdWVzLmxlbmd0aCAtIDE7IGkrKyApIHtcbiAgICAgIGNvbnN0IGxlZnRYID0geFZhbHVlc1sgaSBdO1xuICAgICAgY29uc3QgcmlnaHRYID0geFZhbHVlc1sgaSArIDEgXTtcbiAgICAgIGNvbnN0IGludGVyc2VjdGlvblBvaW50ID0gVXRpbHMubGluZUxpbmVJbnRlcnNlY3Rpb24oXG5cbiAgICAgICAgLy8gVGhlIGxpbmVhciBmdW5jdGlvbiBkZWZpbmVkIGluIHRoaXNcbiAgICAgICAgbmV3IFZlY3RvcjIoIGxlZnRYLCB0aGlzLmV2YWx1YXRlKCBsZWZ0WCApICksXG4gICAgICAgIG5ldyBWZWN0b3IyKCByaWdodFgsIHRoaXMuZXZhbHVhdGUoIHJpZ2h0WCApICksXG5cbiAgICAgICAgLy8gVGhlIHBhc3NlZCBpbiBhcmd1bWVudCBsaW5lYXIgZnVuY3Rpb25cbiAgICAgICAgbmV3IFZlY3RvcjIoIGxlZnRYLCBsaW5lYXJGdW5jdGlvbi5ldmFsdWF0ZSggbGVmdFggKSApLFxuICAgICAgICBuZXcgVmVjdG9yMiggcmlnaHRYLCBsaW5lYXJGdW5jdGlvbi5ldmFsdWF0ZSggcmlnaHRYICkgKVxuICAgICAgKTtcbiAgICAgIGlmICggaW50ZXJzZWN0aW9uUG9pbnQgJiZcbiAgICAgICAgICAgLy8gSWYgaXQncyBvdXIgZmlyc3QgcGFpciBvZiBwb2ludHMsIGRvbid0IGZpbHRlciBvdXQgcG9pbnRzIHRoYXQgYXJlIG9uIHRoZSBsZWZ0IHNpZGUgb2YgdGhlIGxlZnQgcG9pbnRcbiAgICAgICAgICAgKCBpID09PSAwIHx8IGludGVyc2VjdGlvblBvaW50LnggPiBsZWZ0WCApICYmXG4gICAgICAgICAgIC8vIElmIGl0J3Mgb3VyIGxhc3QgcGFpciBvZiBwb2ludHMsIGRvbid0IGZpbHRlciBvdXQgcG9pbnRzIHRoYXQgYXJlIG9uIHRoZSByaWdodCBzaWRlIG9mIHRoZSByaWdodCBwb2ludFxuICAgICAgICAgICAoIGkgPT09IHhWYWx1ZXMubGVuZ3RoIC0gMiB8fCBpbnRlcnNlY3Rpb25Qb2ludC54IDwgcmlnaHRYIClcbiAgICAgICkge1xuICAgICAgICBuZXdYVmFsdWVzLnB1c2goIGludGVyc2VjdGlvblBvaW50LnggKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgZHVwbGljYXRlIHZhbHVlcyBhYm92ZSBhbmQgc29ydCB0aGVtXG4gICAgY29uc3QgY3JpdGljYWxYVmFsdWVzID0gQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbi5zb3J0ZWRVbmlxdWVFcHNpbG9uKCBbXG4gICAgICAuLi54VmFsdWVzLFxuICAgICAgLi4ubmV3WFZhbHVlc1xuICAgIF0gKTtcblxuICAgIC8vIFRvIGNhcHR1cmUgdGhlIHNsb3BlIGF0IHRoZSBzdGFydC9lbmQsIHdlJ2xsIGFkZCBleHRyYSBwb2ludHMgdG8gZ3VhcmFudGVlIHRoaXMuIElmIHRoZXkncmUgZHVwbGljYXRlZCwgdGhleSdsbFxuICAgIC8vIGJlIHJlbW92ZWQgZHVyaW5nIHRoZSBjb2xsaW5lYXIgY2hlY2sgb24gY29uc3RydWN0aW9uLlxuICAgIHJldHVybiBbXG4gICAgICBjcml0aWNhbFhWYWx1ZXNbIDAgXSAtIDEsXG4gICAgICAuLi5jcml0aWNhbFhWYWx1ZXMsXG4gICAgICBjcml0aWNhbFhWYWx1ZXNbIGNyaXRpY2FsWFZhbHVlcy5sZW5ndGggLSAxIF0gKyAxXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQncyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBiaW5hcnkgb3BlcmF0aW9uIGF0IHRoZSBnaXZlbiB4IHZhbHVlcy5cbiAgICovXG4gIHByaXZhdGUgYmluYXJ5WE9wZXJhdGlvbiggbGluZWFyRnVuY3Rpb246IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24sIG9wZXJhdGlvbjogKCBhOiBudW1iZXIsIGI6IG51bWJlciApID0+IG51bWJlciwgeFZhbHVlczogbnVtYmVyW10gKTogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB7XG4gICAgcmV0dXJuIG5ldyBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uKCB4VmFsdWVzLm1hcCggeCA9PiB7XG4gICAgICByZXR1cm4gbmV3IFZlY3RvcjIoIHgsIG9wZXJhdGlvbiggdGhpcy5ldmFsdWF0ZSggeCApLCBsaW5lYXJGdW5jdGlvbi5ldmFsdWF0ZSggeCApICkgKTtcbiAgICB9ICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IGZ1bmN0aW9uIHRoYXQncyB0aGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBiaW5hcnkgb3BlcmF0aW9uIGF0IHRoZSB4IHZhbHVlcyB0aGF0IGFscmVhZHkgb2NjdXJcbiAgICogaW4gZWFjaCBmdW5jdGlvbi5cbiAgICovXG4gIHByaXZhdGUgYmluYXJ5UG9pbnR3aXNlT3BlcmF0aW9uKCBsaW5lYXJGdW5jdGlvbjogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiwgb3BlcmF0aW9uOiAoIGE6IG51bWJlciwgYjogbnVtYmVyICkgPT4gbnVtYmVyICk6IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24ge1xuICAgIHJldHVybiB0aGlzLmJpbmFyeVhPcGVyYXRpb24oIGxpbmVhckZ1bmN0aW9uLCBvcGVyYXRpb24sIHRoaXMuZ2V0Q29tYmluZWRYVmFsdWVzKCBsaW5lYXJGdW5jdGlvbiApICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBmdW5jdGlvbiB0aGF0J3MgdGhlIHJlc3VsdCBvZiBhcHBseWluZyB0aGUgYmluYXJ5IG9wZXJhdGlvbiBhdCB0aGUgeCB2YWx1ZXMgdGhhdCBlaXRoZXIgb2NjdXIgaW5cbiAgICogZWFjaCBmdW5jdGlvbiBPUiBhdCB0aGUgaW50ZXJzZWN0aW9uIG9mIHRoZSB0d28gZnVuY3Rpb25zLlxuICAgKi9cbiAgcHJpdmF0ZSBiaW5hcnlJbnRlcnNlY3RpbmdPcGVyYXRpb24oIGxpbmVhckZ1bmN0aW9uOiBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uLCBvcGVyYXRpb246ICggYTogbnVtYmVyLCBiOiBudW1iZXIgKSA9PiBudW1iZXIgKTogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuYmluYXJ5WE9wZXJhdGlvbiggbGluZWFyRnVuY3Rpb24sIG9wZXJhdGlvbiwgdGhpcy5nZXRJbnRlcnNlY3RlZFhWYWx1ZXMoIGxpbmVhckZ1bmN0aW9uICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB0aGF0J3MgdGhlIHJlc3VsdCBvZiBhZGRpbmcgdGhlIHR3byBmdW5jdGlvbnMuXG4gICAqL1xuICBwdWJsaWMgcGx1cyggbGluZWFyRnVuY3Rpb246IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24gKTogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuYmluYXJ5UG9pbnR3aXNlT3BlcmF0aW9uKCBsaW5lYXJGdW5jdGlvbiwgKCBhLCBiICkgPT4gYSArIGIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB0aGF0J3MgdGhlIHJlc3VsdCBvZiBzdWJ0cmFjdGluZyB0aGUgdHdvIGZ1bmN0aW9ucy5cbiAgICovXG4gIHB1YmxpYyBtaW51cyggbGluZWFyRnVuY3Rpb246IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24gKTogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB7XG4gICAgcmV0dXJuIHRoaXMuYmluYXJ5UG9pbnR3aXNlT3BlcmF0aW9uKCBsaW5lYXJGdW5jdGlvbiwgKCBhLCBiICkgPT4gYSAtIGIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB0aGF0J3MgdGhlIHJlc3VsdCBvZiB0YWtpbmcgdGhlIG1pbmltdW0gb2YgdGhlIHR3byBmdW5jdGlvbnNcbiAgICovXG4gIHB1YmxpYyBtaW4oIGxpbmVhckZ1bmN0aW9uOiBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uICk6IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24ge1xuICAgIHJldHVybiB0aGlzLmJpbmFyeUludGVyc2VjdGluZ09wZXJhdGlvbiggbGluZWFyRnVuY3Rpb24sIE1hdGgubWluICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24gdGhhdCdzIHRoZSByZXN1bHQgb2YgdGFraW5nIHRoZSBtYXhpbXVtIG9mIHRoZSB0d28gZnVuY3Rpb25zXG4gICAqL1xuICBwdWJsaWMgbWF4KCBsaW5lYXJGdW5jdGlvbjogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiApOiBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uIHtcbiAgICByZXR1cm4gdGhpcy5iaW5hcnlJbnRlcnNlY3RpbmdPcGVyYXRpb24oIGxpbmVhckZ1bmN0aW9uLCBNYXRoLm1heCApO1xuICB9XG5cbiAgLyoqXG4gICAqIEFsbG93cyByZWRlZmluaW5nIG9yIGNsYW1waW5nL3RydW5jYXRpbmcgdGhlIGZ1bmN0aW9uIGJ5IG9ubHkgcmVwcmVzZW50aW5nIGl0IGZyb20gdGhlIGdpdmVuIHggdmFsdWVzXG4gICAqL1xuICBwdWJsaWMgd2l0aFhWYWx1ZXMoIHhWYWx1ZXM6IG51bWJlcltdICk6IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24ge1xuICAgIHJldHVybiBuZXcgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiggeFZhbHVlcy5tYXAoIHggPT4gbmV3IFZlY3RvcjIoIHgsIHRoaXMuZXZhbHVhdGUoIHggKSApICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGludmVydGVkIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIChhc3N1bWluZyBpdCBpcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgb3IgbW9ub3RvbmljYWxseSBkZWNyZWFzaW5nKVxuICAgKi9cbiAgcHVibGljIGludmVydGVkKCk6IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24ge1xuICAgIGNvbnN0IHBvaW50cyA9IHRoaXMucG9pbnRzLm1hcCggcG9pbnQgPT4gbmV3IFZlY3RvcjIoIHBvaW50LnksIHBvaW50LnggKSApO1xuXG4gICAgLy8gTk9URTogV2UnbGwgcmVseSBvbiB0aGUgY29uc3RydWN0b3IgdG8gbWFrZSBzdXJlIHRoYXQgdGhlIGludmVyc2UgaXMgdmFsaWQuIEhlcmUgd2UnbGwgaGFuZGxlIHRoZSBtb25vdG9uaWNhbGx5XG4gICAgLy8gZGVjcmVhc2luZyBjYXNlICh3aGljaCBpcyBpbnZlcnRpYmxlLCBqdXN0IG5lZWRzIGEgcmV2ZXJzYWwgb2YgcG9pbnRzKVxuICAgIGlmICggcG9pbnRzLmxlbmd0aCA+IDEgJiYgcG9pbnRzWyAwIF0ueCA+IHBvaW50c1sgMSBdLnggKSB7XG4gICAgICBwb2ludHMucmV2ZXJzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiggcG9pbnRzICk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIHN1bSggLi4uZnVuY3Rpb25zOiBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uW10gKTogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB7XG4gICAgcmV0dXJuIGZ1bmN0aW9ucy5yZWR1Y2UoICggYSwgYiApID0+IGEucGx1cyggYiApICk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIG1pbiggLi4uZnVuY3Rpb25zOiBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uW10gKTogQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiB7XG4gICAgcmV0dXJuIGZ1bmN0aW9ucy5yZWR1Y2UoICggYSwgYiApID0+IGEubWluKCBiICkgKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgbWF4KCAuLi5mdW5jdGlvbnM6IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb25bXSApOiBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uIHtcbiAgICByZXR1cm4gZnVuY3Rpb25zLnJlZHVjZSggKCBhLCBiICkgPT4gYS5tYXgoIGIgKSApO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBjb25zdGFudCggeTogbnVtYmVyICk6IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24ge1xuICAgIHJldHVybiBuZXcgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiggWyBuZXcgVmVjdG9yMiggMCwgeSApIF0gKTtcbiAgfVxuXG4gIC8vIFJlcHJlc2VudHMgdGhlIGZ1bmN0aW9uIGF4K2JcbiAgcHVibGljIHN0YXRpYyBsaW5lYXIoIGE6IG51bWJlciwgYjogbnVtYmVyICk6IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24ge1xuICAgIHJldHVybiBuZXcgQ29tcGxldGVQaWVjZXdpc2VMaW5lYXJGdW5jdGlvbiggWyBuZXcgVmVjdG9yMiggMCwgYiApLCBuZXcgVmVjdG9yMiggMSwgYSArIGIgKSBdICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHNvcnRlZCBsaXN0IG9mIHRoZSBpbnB1dCBudW1iZXJzLCBlbnN1cmluZyBubyBkdXBsaWNhdGVzIHdpdGhpbiBhIHNwZWNpZmllZCBlcHNpbG9uIHZhbHVlXG4gICAqL1xuICBwcml2YXRlIHN0YXRpYyBzb3J0ZWRVbmlxdWVFcHNpbG9uKCBudW1iZXJzOiBudW1iZXJbXSwgZXBzaWxvbiA9IDFlLTEwICk6IG51bWJlcltdIHtcbiAgICBudW1iZXJzID0gXy5zb3J0QnkoIG51bWJlcnMgKTtcblxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG51bWJlcnMubGVuZ3RoIC0gMTsgaSsrICkge1xuICAgICAgaWYgKCBNYXRoLmFicyggbnVtYmVyc1sgaSBdIC0gbnVtYmVyc1sgaSArIDEgXSApIDwgZXBzaWxvbiApIHtcbiAgICAgICAgbnVtYmVycy5zcGxpY2UoIGksIDEgKTtcbiAgICAgICAgaS0tO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudW1iZXJzO1xuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ0NvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb24nLCBDb21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uICk7XG5cbmV4cG9ydCBkZWZhdWx0IENvbXBsZXRlUGllY2V3aXNlTGluZWFyRnVuY3Rpb247Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsR0FBRyxNQUFNLFVBQVU7QUFDMUIsT0FBT0MsS0FBSyxNQUFNLFlBQVk7QUFDOUIsT0FBT0MsT0FBTyxNQUFNLGNBQWM7QUFFbEMsTUFBTUMsK0JBQStCLENBQUM7RUFJcEM7RUFDT0MsV0FBV0EsQ0FBRUMsTUFBaUIsRUFBRztJQUN0Q0MsTUFBTSxJQUFJQSxNQUFNLENBQUVELE1BQU0sQ0FBQ0UsTUFBTSxHQUFHLENBQUMsQ0FBRTtJQUNyQ0QsTUFBTSxJQUFJRCxNQUFNLENBQUNHLE9BQU8sQ0FBRSxDQUFFQyxLQUFLLEVBQUVDLENBQUMsS0FBTTtNQUN4QyxJQUFLQSxDQUFDLEdBQUdMLE1BQU0sQ0FBQ0UsTUFBTSxHQUFHLENBQUMsRUFBRztRQUMzQkQsTUFBTSxJQUFJQSxNQUFNLENBQUVHLEtBQUssQ0FBQ0UsQ0FBQyxHQUFHTixNQUFNLENBQUVLLENBQUMsR0FBRyxDQUFDLENBQUUsQ0FBQ0MsQ0FBQyxFQUMzQyw0RUFBNEUsQ0FBRTtNQUNsRjtJQUNGLENBQUMsQ0FBRTs7SUFFSDtJQUNBLElBQUksQ0FBQ04sTUFBTSxHQUFHQSxNQUFNLENBQUNPLEtBQUssRUFBRTs7SUFFNUI7SUFDQTtJQUNBLEtBQU0sSUFBSUYsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ0wsTUFBTSxDQUFDRSxNQUFNLEdBQUcsQ0FBQyxFQUFFRyxDQUFDLEVBQUUsRUFBRztNQUNqRCxNQUFN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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Complex.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * A complex number with mutable and immutable methods.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 * @author Chris Malley (PixelZoom, Inc.)
 * @author Matt Pennington
 */



class Complex {
  /**
   * Creates a complex number, that has both a real and imaginary part.
   * @public
   *
   * @param {number} real - The real part. For a complex number $a+bi$, this should be $a$.
   * @param {number} imaginary - The imaginary part. For a complex number $a+bi$, this should be $b$.
   */
  constructor(real, imaginary) {
    // @public {number} - The real part. For a complex number $a+bi$, this is $a$.
    this.real = real;

    // @public {number} - The imaginary part. For a complex number $a+bi$, this is $b$.
    this.imaginary = imaginary;
  }

  /**
   * Creates a copy of this complex, or if a complex is passed in, set that complex's values to ours.
   * @public
   *
   * This is the immutable form of the function set(), if a complex is provided. This will return a new complex, and
   * will not modify this complex.
   *
   * @param {Complex} [complex] - If not provided, creates a new Complex with filled in values. Otherwise, fills
   *                              in the values of the provided complex so that it equals this complex.
   * @returns {Complex}
   */
  copy(complex) {
    if (complex) {
      return complex.set(this);
    } else {
      return new Complex(this.real, this.imaginary);
    }
  }

  /**
   * The phase / argument of the complex number.
   * @public
   *
   * @returns {number}
   */
  phase() {
    return Math.atan2(this.imaginary, this.real);
  }

  /**
   * The magnitude (Euclidean/L2 Norm) of this complex number, i.e. $\sqrt{a^2+b^2}$.
   * @public
   *
   * @returns {number}
   */
  getMagnitude() {
    return Math.sqrt(this.magnitudeSquared);
  }
  get magnitude() {
    return this.getMagnitude();
  }

  /**
   * The squared magnitude (square of the Euclidean/L2 Norm) of this complex, i.e. $a^2+b^2$.
   * @public
   *
   * @returns {number}
   */
  getMagnitudeSquared() {
    return this.real * this.real + this.imaginary * this.imaginary;
  }
  get magnitudeSquared() {
    return this.getMagnitudeSquared();
  }

  /**
   * Exact equality comparison between this Complex and another Complex.
   * @public
   *
   * @param {Complex} other
   * @returns {boolean} - Whether the two complex numbers have equal components
   */
  equals(other) {
    return this.real === other.real && this.imaginary === other.imaginary;
  }

  /**
   * Approximate equality comparison between this Complex and another Complex.
   * @public
   *
   * @param {Complex} other
   * @param {number} epsilon
   * @returns {boolean} - Whether difference between the two complex numbers has no component with an absolute value
   *                      greater than epsilon.
   */
  equalsEpsilon(other, epsilon) {
    if (!epsilon) {
      epsilon = 0;
    }
    return Math.max(Math.abs(this.real - other.real), Math.abs(this.imaginary - other.imaginary)) <= epsilon;
  }

  /**
   * Addition of this Complex and another Complex, returning a copy.
   * @public
   *
   * This is the immutable form of the function add(). This will return a new Complex, and will not modify
   * this Complex.
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  plus(c) {
    return new Complex(this.real + c.real, this.imaginary + c.imaginary);
  }

  /**
   * Subtraction of this Complex by another Complex c, returning a copy.
   * @public
   *
   * This is the immutable form of the function subtract(). This will return a new Complex, and will not modify
   * this Complex.
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  minus(c) {
    return new Complex(this.real - c.real, this.imaginary - c.imaginary);
  }

  /**
   * Complex multiplication.
   * Immutable version of multiply
   * @public
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  times(c) {
    return new Complex(this.real * c.real - this.imaginary * c.imaginary, this.real * c.imaginary + this.imaginary * c.real);
  }

  /**
   * Complex division.
   * Immutable version of divide
   * @public
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  dividedBy(c) {
    const cMag = c.magnitudeSquared;
    return new Complex((this.real * c.real + this.imaginary * c.imaginary) / cMag, (this.imaginary * c.real - this.real * c.imaginary) / cMag);
  }

  /**
   * Square root.
   * Immutable form of sqrt.
   * @public
   *
   * @returns {Complex}
   */
  sqrtOf() {
    const mag = this.magnitude;
    return new Complex(Math.sqrt((mag + this.real) / 2), (this.imaginary >= 0 ? 1 : -1) * Math.sqrt((mag - this.real) / 2));
  }

  /**
   * Returns the power of this complex number by a real number.
   * @public
   *
   * @param {number} realPower
   * @returns {Complex}
   */
  powerByReal(realPower) {
    const magTimes = Math.pow(this.magnitude, realPower);
    const angle = realPower * this.phase();
    return new Complex(magTimes * Math.cos(angle), magTimes * Math.sin(angle));
  }

  /**
   * Sine.
   * Immutable form of sin.
   * @public
   *
   * @returns {Complex}
   */
  sinOf() {
    return new Complex(Math.sin(this.real) * js_Utils.cosh(this.imaginary), Math.cos(this.real) * js_Utils.sinh(this.imaginary));
  }

  /**
   * Cosine.
   * Immutable form of cos.
   * @public
   *
   * @returns {Complex}
   */
  cosOf() {
    return new Complex(Math.cos(this.real) * js_Utils.cosh(this.imaginary), -Math.sin(this.real) * js_Utils.sinh(this.imaginary));
  }

  /**
   * Returns the square of this complex number and does not modify it.
   * This is the immutable version of square.
   * @public
   *
   * @returns {Complex}
   */
  squared() {
    return this.times(this);
  }

  /**
   * Complex conjugate.
   * Immutable form of conjugate
   * @public
   *
   * @returns {Complex}
   */
  conjugated() {
    return new Complex(this.real, -this.imaginary);
  }

  /**
   * Takes e to the power of this complex number. $e^{a+bi}=e^a\cos b + i\sin b$.
   * This is the immutable form of exponentiate.
   * @public
   *
   * @returns {Complex}
   */
  exponentiated() {
    return Complex.createPolar(Math.exp(this.real), this.imaginary);
  }

  /*** Mutable functions ***/

  /**
   * Sets all of the components of this complex, returning this
   * @public
   *
   * @param {number} real
   * @param {number} imaginary
   * @returns {Complex}
   */
  setRealImaginary(real, imaginary) {
    this.real = real;
    this.imaginary = imaginary;
    return this;
  }

  /**
   * Sets the real component of this complex, returning this
   * @public
   *
   * @param {number} real
   * @returns {Complex}
   */
  setReal(real) {
    this.real = real;
    return this;
  }

  /**
   * Sets the imaginary component of this complex, returning this
   * @public
   *
   * @param {number} imaginary
   * @returns {Complex}
   */
  setImaginary(imaginary) {
    this.imaginary = imaginary;
    return this;
  }

  /**
   * Sets the components of this complex to be a copy of the parameter
   * @public
   *
   * This is the mutable form of the function copy(). This will mutate (change) this complex, in addition to returning
   * this complex itself.
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  set(c) {
    return this.setRealImaginary(c.real, c.imaginary);
  }

  /**
   * Sets this Complex's value to be the a,b values matching the given magnitude and phase (in radians), changing
   * this Complex, and returning itself.
   * @public
   *
   * @param {number} magnitude
   * @param {number} phase - In radians
   * @returns {Complex}
   */
  setPolar(magnitude, phase) {
    return this.setRealImaginary(magnitude * Math.cos(phase), magnitude * Math.sin(phase));
  }

  /**
   * Addition of this Complex and another Complex, returning a copy.
   * @public
   *
   * This is the mutable form of the function plus(). This will modify and return this.
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  add(c) {
    return this.setRealImaginary(this.real + c.real, this.imaginary + c.imaginary);
  }

  /**
   * Subtraction of another Complex from this Complex, returning a copy.
   * @public
   *
   * This is the mutable form of the function minus(). This will modify and return this.
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  subtract(c) {
    return this.setRealImaginary(this.real - c.real, this.imaginary - c.imaginary);
  }

  /**
   * Mutable Complex multiplication.
   * @public
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  multiply(c) {
    return this.setRealImaginary(this.real * c.real - this.imaginary * c.imaginary, this.real * c.imaginary + this.imaginary * c.real);
  }

  /**
   * Mutable Complex division. The immutable form is dividedBy.
   * @public
   *
   * @param {Complex} c
   * @returns {Complex}
   */
  divide(c) {
    const cMag = c.magnitudeSquared;
    return this.setRealImaginary((this.real * c.real + this.imaginary * c.imaginary) / cMag, (this.imaginary * c.real - this.real * c.imaginary) / cMag);
  }

  /**
   * Sets this Complex to e to the power of this complex number. $e^{a+bi}=e^a\cos b + i\sin b$.
   * This is the mutable version of exponentiated
   * @public
   *
   * @returns {Complex}
   */
  exponentiate() {
    return this.setPolar(Math.exp(this.real), this.imaginary);
  }

  /**
   * Squares this complex number.
   * This is the mutable version of squared.
   * @public
   *
   * @returns {Complex}
   */
  square() {
    return this.multiply(this);
  }

  /**
   * Square root.
   * Mutable form of sqrtOf.
   * @public
   *
   * @returns {Complex}
   */
  sqrt() {
    const mag = this.magnitude;
    return this.setRealImaginary(Math.sqrt((mag + this.real) / 2), (this.imaginary >= 0 ? 1 : -1) * Math.sqrt((mag - this.real) / 2));
  }

  /**
   * Sine.
   * Mutable form of sinOf.
   * @public
   *
   * @returns {Complex}
   */
  sin() {
    return this.setRealImaginary(Math.sin(this.real) * js_Utils.cosh(this.imaginary), Math.cos(this.real) * js_Utils.sinh(this.imaginary));
  }

  /**
   * Cosine.
   * Mutable form of cosOf.
   * @public
   *
   * @returns {Complex}
   */
  cos() {
    return this.setRealImaginary(Math.cos(this.real) * js_Utils.cosh(this.imaginary), -Math.sin(this.real) * js_Utils.sinh(this.imaginary));
  }

  /**
   * Complex conjugate.
   * Mutable form of conjugated
   * @public
   *
   * @returns {Complex}
   */
  conjugate() {
    return this.setRealImaginary(this.real, -this.imaginary);
  }

  /**
   * Debugging string for the complex number (provides real and imaginary parts).
   * @public
   *
   * @returns {string}
   */
  toString() {
    return `Complex(${this.real}, ${this.imaginary})`;
  }

  /**
   * Constructs a complex number from just the real part (assuming the imaginary part is 0).
   * @public
   *
   * @param {number} real
   * @returns {Complex}
   */
  static real(real) {
    return new Complex(real, 0);
  }

  /**
   * Constructs a complex number from just the imaginary part (assuming the real part is 0).
   * @public
   *
   * @param {number} imaginary
   * @returns {Complex}
   */
  static imaginary(imaginary) {
    return new Complex(0, imaginary);
  }

  /**
   * Constructs a complex number from the polar form. For a magnitude $r$ and phase $\varphi$, this will be
   * $\cos\varphi+i r\sin\varphi$.
   * @public
   *
   * @param {number} magnitude
   * @param {number} phase
   * @returns {Complex}
   */
  static createPolar(magnitude, phase) {
    return new Complex(magnitude * Math.cos(phase), magnitude * Math.sin(phase));
  }
}
js_dot.register('Complex', Complex);

/**
 * Immutable constant $0$.
 * @public
 *
 * @constant {Complex} ZERO
 */
Complex.ZERO = new Complex(0, 0);

/**
 * Immutable constant $1$.
 * @public
 *
 * @constant {Complex} ONE
 */
Complex.ONE = new Complex(1, 0);

/**
 * Immutable constant $i$, the imaginary unit.
 * @public
 *
 * @constant {Complex} I
 */
Complex.I = Complex.imaginary(1);
/* harmony default export */ const js_Complex = ((/* unused pure expression or super */ null && (Complex)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJVdGlscyIsIkNvbXBsZXgiLCJjb25zdHJ1Y3RvciIsInJlYWwiLCJpbWFnaW5hcnkiLCJjb3B5IiwiY29tcGxleCIsInNldCIsInBoYXNlIiwiTWF0aCIsImF0YW4yIiwiZ2V0TWFnbml0dWRlIiwic3FydCIsIm1hZ25pdHVkZVNxdWFyZWQiLCJtYWduaXR1ZGUiLCJnZXRNYWduaXR1ZGVTcXVhcmVkIiwiZXF1YWxzIiwib3RoZXIiLCJlcXVhbHNFcHNpbG9uIiwiZXBzaWxvbiIsIm1heCIsImFicyIsInBsdXMiLCJjIiwibWludXMiLCJ0aW1lcyIsImRpdmlkZWRCeSIsImNNYWciLCJzcXJ0T2YiLCJtYWciLCJwb3dlckJ5UmVhbCIsInJlYWxQb3dlciIsIm1hZ1RpbWVzIiwicG93IiwiYW5nbGUiLCJjb3MiLCJzaW4iLCJzaW5PZiIsImNvc2giLCJzaW5oIiwiY29zT2YiLCJzcXVhcmVkIiwiY29uanVnYXRlZCIsImV4cG9uZW50aWF0ZWQiLCJjcmVhdGVQb2xhciIsImV4cCIsInNldFJlYWxJbWFnaW5hcnkiLCJzZXRSZWFsIiwic2V0SW1hZ2luYXJ5Iiwic2V0UG9sYXIiLCJhZGQiLCJzdWJ0cmFjdCIsIm11bHRpcGx5IiwiZGl2aWRlIiwiZXhwb25lbnRpYXRlIiwic3F1YXJlIiwiY29uanVnYXRlIiwidG9TdHJpbmciLCJyZWdpc3RlciIsIlpFUk8iLCJPTkUiLCJJIl0sInNvdXJjZXMiOlsiQ29tcGxleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBBIGNvbXBsZXggbnVtYmVyIHdpdGggbXV0YWJsZSBhbmQgaW1tdXRhYmxlIG1ldGhvZHMuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcbiAqIEBhdXRob3IgTWF0dCBQZW5uaW5ndG9uXG4gKi9cblxuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscy5qcyc7XG5cbmNsYXNzIENvbXBsZXgge1xuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvbXBsZXggbnVtYmVyLCB0aGF0IGhhcyBib3RoIGEgcmVhbCBhbmQgaW1hZ2luYXJ5IHBhcnQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHJlYWwgLSBUaGUgcmVhbCBwYXJ0LiBGb3IgYSBjb21wbGV4IG51bWJlciAkYStiaSQsIHRoaXMgc2hvdWxkIGJlICRhJC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGltYWdpbmFyeSAtIFRoZSBpbWFnaW5hcnkgcGFydC4gRm9yIGEgY29tcGxleCBudW1iZXIgJGErYmkkLCB0aGlzIHNob3VsZCBiZSAkYiQuXG4gICAqL1xuICBjb25zdHJ1Y3RvciggcmVhbCwgaW1hZ2luYXJ5ICkge1xuICAgIC8vIEBwdWJsaWMge251bWJlcn0gLSBUaGUgcmVhbCBwYXJ0LiBGb3IgYSBjb21wbGV4IG51bWJlciAkYStiaSQsIHRoaXMgaXMgJGEkLlxuICAgIHRoaXMucmVhbCA9IHJlYWw7XG5cbiAgICAvLyBAcHVibGljIHtudW1iZXJ9IC0gVGhlIGltYWdpbmFyeSBwYXJ0LiBGb3IgYSBjb21wbGV4IG51bWJlciAkYStiaSQsIHRoaXMgaXMgJGIkLlxuICAgIHRoaXMuaW1hZ2luYXJ5ID0gaW1hZ2luYXJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBjb3B5IG9mIHRoaXMgY29tcGxleCwgb3IgaWYgYSBjb21wbGV4IGlzIHBhc3NlZCBpbiwgc2V0IHRoYXQgY29tcGxleCdzIHZhbHVlcyB0byBvdXJzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzZXQoKSwgaWYgYSBjb21wbGV4IGlzIHByb3ZpZGVkLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGNvbXBsZXgsIGFuZFxuICAgKiB3aWxsIG5vdCBtb2RpZnkgdGhpcyBjb21wbGV4LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBsZXh9IFtjb21wbGV4XSAtIElmIG5vdCBwcm92aWRlZCwgY3JlYXRlcyBhIG5ldyBDb21wbGV4IHdpdGggZmlsbGVkIGluIHZhbHVlcy4gT3RoZXJ3aXNlLCBmaWxsc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRoZSB2YWx1ZXMgb2YgdGhlIHByb3ZpZGVkIGNvbXBsZXggc28gdGhhdCBpdCBlcXVhbHMgdGhpcyBjb21wbGV4LlxuICAgKiBAcmV0dXJucyB7Q29tcGxleH1cbiAgICovXG4gIGNvcHkoIGNvbXBsZXggKSB7XG4gICAgaWYgKCBjb21wbGV4ICkge1xuICAgICAgcmV0dXJuIGNvbXBsZXguc2V0KCB0aGlzICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBDb21wbGV4KCB0aGlzLnJlYWwsIHRoaXMuaW1hZ2luYXJ5ICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBwaGFzZSAvIGFyZ3VtZW50IG9mIHRoZSBjb21wbGV4IG51bWJlci5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgcGhhc2UoKSB7XG4gICAgcmV0dXJuIE1hdGguYXRhbjIoIHRoaXMuaW1hZ2luYXJ5LCB0aGlzLnJlYWwgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgbWFnbml0dWRlIChFdWNsaWRlYW4vTDIgTm9ybSkgb2YgdGhpcyBjb21wbGV4IG51bWJlciwgaS5lLiAkXFxzcXJ0e2FeMitiXjJ9JC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TWFnbml0dWRlKCkge1xuICAgIHJldHVybiBNYXRoLnNxcnQoIHRoaXMubWFnbml0dWRlU3F1YXJlZCApO1xuICB9XG5cbiAgZ2V0IG1hZ25pdHVkZSgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRNYWduaXR1ZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGUgc3F1YXJlZCBtYWduaXR1ZGUgKHNxdWFyZSBvZiB0aGUgRXVjbGlkZWFuL0wyIE5vcm0pIG9mIHRoaXMgY29tcGxleCwgaS5lLiAkYV4yK2JeMiQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldE1hZ25pdHVkZVNxdWFyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhbCAqIHRoaXMucmVhbCArIHRoaXMuaW1hZ2luYXJ5ICogdGhpcy5pbWFnaW5hcnk7XG4gIH1cblxuICBnZXQgbWFnbml0dWRlU3F1YXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5nZXRNYWduaXR1ZGVTcXVhcmVkKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhhY3QgZXF1YWxpdHkgY29tcGFyaXNvbiBiZXR3ZWVuIHRoaXMgQ29tcGxleCBhbmQgYW5vdGhlciBDb21wbGV4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcGxleH0gb3RoZXJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0gV2hldGhlciB0aGUgdHdvIGNvbXBsZXggbnVtYmVycyBoYXZlIGVxdWFsIGNvbXBvbmVudHNcbiAgICovXG4gIGVxdWFscyggb3RoZXIgKSB7XG4gICAgcmV0dXJuIHRoaXMucmVhbCA9PT0gb3RoZXIucmVhbCAmJiB0aGlzLmltYWdpbmFyeSA9PT0gb3RoZXIuaW1hZ2luYXJ5O1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcHJveGltYXRlIGVxdWFsaXR5IGNvbXBhcmlzb24gYmV0d2VlbiB0aGlzIENvbXBsZXggYW5kIGFub3RoZXIgQ29tcGxleC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBsZXh9IG90aGVyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBlcHNpbG9uXG4gICAqIEByZXR1cm5zIHtib29sZWFufSAtIFdoZXRoZXIgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB0d28gY29tcGxleCBudW1iZXJzIGhhcyBubyBjb21wb25lbnQgd2l0aCBhbiBhYnNvbHV0ZSB2YWx1ZVxuICAgKiAgICAgICAgICAgICAgICAgICAgICBncmVhdGVyIHRoYW4gZXBzaWxvbi5cbiAgICovXG4gIGVxdWFsc0Vwc2lsb24oIG90aGVyLCBlcHNpbG9uICkge1xuICAgIGlmICggIWVwc2lsb24gKSB7XG4gICAgICBlcHNpbG9uID0gMDtcbiAgICB9XG4gICAgcmV0dXJuIE1hdGgubWF4KCBNYXRoLmFicyggdGhpcy5yZWFsIC0gb3RoZXIucmVhbCApLCBNYXRoLmFicyggdGhpcy5pbWFnaW5hcnkgLSBvdGhlci5pbWFnaW5hcnkgKSApIDw9IGVwc2lsb247XG4gIH1cblxuICAvKipcbiAgICogQWRkaXRpb24gb2YgdGhpcyBDb21wbGV4IGFuZCBhbm90aGVyIENvbXBsZXgsIHJldHVybmluZyBhIGNvcHkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgdGhlIGZ1bmN0aW9uIGFkZCgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IENvbXBsZXgsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBDb21wbGV4LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBsZXh9IGNcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBwbHVzKCBjICkge1xuICAgIHJldHVybiBuZXcgQ29tcGxleCggdGhpcy5yZWFsICsgYy5yZWFsLCB0aGlzLmltYWdpbmFyeSArIGMuaW1hZ2luYXJ5ICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3Rpb24gb2YgdGhpcyBDb21wbGV4IGJ5IGFub3RoZXIgQ29tcGxleCBjLCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGltbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBzdWJ0cmFjdCgpLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IENvbXBsZXgsIGFuZCB3aWxsIG5vdCBtb2RpZnlcbiAgICogdGhpcyBDb21wbGV4LlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBsZXh9IGNcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBtaW51cyggYyApIHtcbiAgICByZXR1cm4gbmV3IENvbXBsZXgoIHRoaXMucmVhbCAtIGMucmVhbCwgdGhpcy5pbWFnaW5hcnkgLSBjLmltYWdpbmFyeSApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbXBsZXggbXVsdGlwbGljYXRpb24uXG4gICAqIEltbXV0YWJsZSB2ZXJzaW9uIG9mIG11bHRpcGx5XG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtDb21wbGV4fSBjXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgdGltZXMoIGMgKSB7XG4gICAgcmV0dXJuIG5ldyBDb21wbGV4KCB0aGlzLnJlYWwgKiBjLnJlYWwgLSB0aGlzLmltYWdpbmFyeSAqIGMuaW1hZ2luYXJ5LCB0aGlzLnJlYWwgKiBjLmltYWdpbmFyeSArIHRoaXMuaW1hZ2luYXJ5ICogYy5yZWFsICk7XG4gIH1cblxuICAvKipcbiAgICogQ29tcGxleCBkaXZpc2lvbi5cbiAgICogSW1tdXRhYmxlIHZlcnNpb24gb2YgZGl2aWRlXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtDb21wbGV4fSBjXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgZGl2aWRlZEJ5KCBjICkge1xuICAgIGNvbnN0IGNNYWcgPSBjLm1hZ25pdHVkZVNxdWFyZWQ7XG4gICAgcmV0dXJuIG5ldyBDb21wbGV4KFxuICAgICAgKCB0aGlzLnJlYWwgKiBjLnJlYWwgKyB0aGlzLmltYWdpbmFyeSAqIGMuaW1hZ2luYXJ5ICkgLyBjTWFnLFxuICAgICAgKCB0aGlzLmltYWdpbmFyeSAqIGMucmVhbCAtIHRoaXMucmVhbCAqIGMuaW1hZ2luYXJ5ICkgLyBjTWFnXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcXVhcmUgcm9vdC5cbiAgICogSW1tdXRhYmxlIGZvcm0gb2Ygc3FydC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Q29tcGxleH1cbiAgICovXG4gIHNxcnRPZigpIHtcbiAgICBjb25zdCBtYWcgPSB0aGlzLm1hZ25pdHVkZTtcbiAgICByZXR1cm4gbmV3IENvbXBsZXgoIE1hdGguc3FydCggKCBtYWcgKyB0aGlzLnJlYWwgKSAvIDIgKSxcbiAgICAgICggdGhpcy5pbWFnaW5hcnkgPj0gMCA/IDEgOiAtMSApICogTWF0aC5zcXJ0KCAoIG1hZyAtIHRoaXMucmVhbCApIC8gMiApICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcG93ZXIgb2YgdGhpcyBjb21wbGV4IG51bWJlciBieSBhIHJlYWwgbnVtYmVyLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZWFsUG93ZXJcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBwb3dlckJ5UmVhbCggcmVhbFBvd2VyICkge1xuICAgIGNvbnN0IG1hZ1RpbWVzID0gTWF0aC5wb3coIHRoaXMubWFnbml0dWRlLCByZWFsUG93ZXIgKTtcbiAgICBjb25zdCBhbmdsZSA9IHJlYWxQb3dlciAqIHRoaXMucGhhc2UoKTtcbiAgICByZXR1cm4gbmV3IENvbXBsZXgoXG4gICAgICBtYWdUaW1lcyAqIE1hdGguY29zKCBhbmdsZSApLFxuICAgICAgbWFnVGltZXMgKiBNYXRoLnNpbiggYW5nbGUgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2luZS5cbiAgICogSW1tdXRhYmxlIGZvcm0gb2Ygc2luLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgc2luT2YoKSB7XG4gICAgcmV0dXJuIG5ldyBDb21wbGV4KFxuICAgICAgTWF0aC5zaW4oIHRoaXMucmVhbCApICogVXRpbHMuY29zaCggdGhpcy5pbWFnaW5hcnkgKSxcbiAgICAgIE1hdGguY29zKCB0aGlzLnJlYWwgKSAqIFV0aWxzLnNpbmgoIHRoaXMuaW1hZ2luYXJ5IClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvc2luZS5cbiAgICogSW1tdXRhYmxlIGZvcm0gb2YgY29zLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgY29zT2YoKSB7XG4gICAgcmV0dXJuIG5ldyBDb21wbGV4KFxuICAgICAgTWF0aC5jb3MoIHRoaXMucmVhbCApICogVXRpbHMuY29zaCggdGhpcy5pbWFnaW5hcnkgKSxcbiAgICAgIC1NYXRoLnNpbiggdGhpcy5yZWFsICkgKiBVdGlscy5zaW5oKCB0aGlzLmltYWdpbmFyeSApXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBzcXVhcmUgb2YgdGhpcyBjb21wbGV4IG51bWJlciBhbmQgZG9lcyBub3QgbW9kaWZ5IGl0LlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgdmVyc2lvbiBvZiBzcXVhcmUuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBzcXVhcmVkKCkge1xuICAgIHJldHVybiB0aGlzLnRpbWVzKCB0aGlzICk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDb21wbGV4IGNvbmp1Z2F0ZS5cbiAgICogSW1tdXRhYmxlIGZvcm0gb2YgY29uanVnYXRlXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBjb25qdWdhdGVkKCkge1xuICAgIHJldHVybiBuZXcgQ29tcGxleCggdGhpcy5yZWFsLCAtdGhpcy5pbWFnaW5hcnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUYWtlcyBlIHRvIHRoZSBwb3dlciBvZiB0aGlzIGNvbXBsZXggbnVtYmVyLiAkZV57YStiaX09ZV5hXFxjb3MgYiArIGlcXHNpbiBiJC5cbiAgICogVGhpcyBpcyB0aGUgaW1tdXRhYmxlIGZvcm0gb2YgZXhwb25lbnRpYXRlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgZXhwb25lbnRpYXRlZCgpIHtcbiAgICByZXR1cm4gQ29tcGxleC5jcmVhdGVQb2xhciggTWF0aC5leHAoIHRoaXMucmVhbCApLCB0aGlzLmltYWdpbmFyeSApO1xuICB9XG5cbiAgLyoqKiBNdXRhYmxlIGZ1bmN0aW9ucyAqKiovXG5cbiAgLyoqXG4gICAqIFNldHMgYWxsIG9mIHRoZSBjb21wb25lbnRzIG9mIHRoaXMgY29tcGxleCwgcmV0dXJuaW5nIHRoaXNcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVhbFxuICAgKiBAcGFyYW0ge251bWJlcn0gaW1hZ2luYXJ5XG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgc2V0UmVhbEltYWdpbmFyeSggcmVhbCwgaW1hZ2luYXJ5ICkge1xuICAgIHRoaXMucmVhbCA9IHJlYWw7XG4gICAgdGhpcy5pbWFnaW5hcnkgPSBpbWFnaW5hcnk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgcmVhbCBjb21wb25lbnQgb2YgdGhpcyBjb21wbGV4LCByZXR1cm5pbmcgdGhpc1xuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByZWFsXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgc2V0UmVhbCggcmVhbCApIHtcbiAgICB0aGlzLnJlYWwgPSByZWFsO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGltYWdpbmFyeSBjb21wb25lbnQgb2YgdGhpcyBjb21wbGV4LCByZXR1cm5pbmcgdGhpc1xuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbWFnaW5hcnlcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBzZXRJbWFnaW5hcnkoIGltYWdpbmFyeSApIHtcbiAgICB0aGlzLmltYWdpbmFyeSA9IGltYWdpbmFyeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBjb21wb25lbnRzIG9mIHRoaXMgY29tcGxleCB0byBiZSBhIGNvcHkgb2YgdGhlIHBhcmFtZXRlclxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29weSgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgY29tcGxleCwgaW4gYWRkaXRpb24gdG8gcmV0dXJuaW5nXG4gICAqIHRoaXMgY29tcGxleCBpdHNlbGYuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcGxleH0gY1xuICAgKiBAcmV0dXJucyB7Q29tcGxleH1cbiAgICovXG4gIHNldCggYyApIHtcbiAgICByZXR1cm4gdGhpcy5zZXRSZWFsSW1hZ2luYXJ5KCBjLnJlYWwsIGMuaW1hZ2luYXJ5ICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIENvbXBsZXgncyB2YWx1ZSB0byBiZSB0aGUgYSxiIHZhbHVlcyBtYXRjaGluZyB0aGUgZ2l2ZW4gbWFnbml0dWRlIGFuZCBwaGFzZSAoaW4gcmFkaWFucyksIGNoYW5naW5nXG4gICAqIHRoaXMgQ29tcGxleCwgYW5kIHJldHVybmluZyBpdHNlbGYuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1hZ25pdHVkZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcGhhc2UgLSBJbiByYWRpYW5zXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgc2V0UG9sYXIoIG1hZ25pdHVkZSwgcGhhc2UgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0UmVhbEltYWdpbmFyeSggbWFnbml0dWRlICogTWF0aC5jb3MoIHBoYXNlICksIG1hZ25pdHVkZSAqIE1hdGguc2luKCBwaGFzZSApICk7XG4gIH1cblxuICAvKipcbiAgICogQWRkaXRpb24gb2YgdGhpcyBDb21wbGV4IGFuZCBhbm90aGVyIENvbXBsZXgsIHJldHVybmluZyBhIGNvcHkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgbXV0YWJsZSBmb3JtIG9mIHRoZSBmdW5jdGlvbiBwbHVzKCkuIFRoaXMgd2lsbCBtb2RpZnkgYW5kIHJldHVybiB0aGlzLlxuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBsZXh9IGNcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBhZGQoIGMgKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0UmVhbEltYWdpbmFyeSggdGhpcy5yZWFsICsgYy5yZWFsLCB0aGlzLmltYWdpbmFyeSArIGMuaW1hZ2luYXJ5ICk7XG4gIH1cblxuICAvKipcbiAgICogU3VidHJhY3Rpb24gb2YgYW5vdGhlciBDb21wbGV4IGZyb20gdGhpcyBDb21wbGV4LCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gbWludXMoKS4gVGhpcyB3aWxsIG1vZGlmeSBhbmQgcmV0dXJuIHRoaXMuXG4gICAqXG4gICAqIEBwYXJhbSB7Q29tcGxleH0gY1xuICAgKiBAcmV0dXJucyB7Q29tcGxleH1cbiAgICovXG4gIHN1YnRyYWN0KCBjICkge1xuICAgIHJldHVybiB0aGlzLnNldFJlYWxJbWFnaW5hcnkoIHRoaXMucmVhbCAtIGMucmVhbCwgdGhpcy5pbWFnaW5hcnkgLSBjLmltYWdpbmFyeSApO1xuICB9XG5cbiAgLyoqXG4gICAqIE11dGFibGUgQ29tcGxleCBtdWx0aXBsaWNhdGlvbi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0NvbXBsZXh9IGNcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBtdWx0aXBseSggYyApIHtcbiAgICByZXR1cm4gdGhpcy5zZXRSZWFsSW1hZ2luYXJ5KFxuICAgICAgdGhpcy5yZWFsICogYy5yZWFsIC0gdGhpcy5pbWFnaW5hcnkgKiBjLmltYWdpbmFyeSxcbiAgICAgIHRoaXMucmVhbCAqIGMuaW1hZ2luYXJ5ICsgdGhpcy5pbWFnaW5hcnkgKiBjLnJlYWwgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdXRhYmxlIENvbXBsZXggZGl2aXNpb24uIFRoZSBpbW11dGFibGUgZm9ybSBpcyBkaXZpZGVkQnkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtDb21wbGV4fSBjXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgZGl2aWRlKCBjICkge1xuICAgIGNvbnN0IGNNYWcgPSBjLm1hZ25pdHVkZVNxdWFyZWQ7XG4gICAgcmV0dXJuIHRoaXMuc2V0UmVhbEltYWdpbmFyeShcbiAgICAgICggdGhpcy5yZWFsICogYy5yZWFsICsgdGhpcy5pbWFnaW5hcnkgKiBjLmltYWdpbmFyeSApIC8gY01hZyxcbiAgICAgICggdGhpcy5pbWFnaW5hcnkgKiBjLnJlYWwgLSB0aGlzLnJlYWwgKiBjLmltYWdpbmFyeSApIC8gY01hZ1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIENvbXBsZXggdG8gZSB0byB0aGUgcG93ZXIgb2YgdGhpcyBjb21wbGV4IG51bWJlci4gJGVee2ErYml9PWVeYVxcY29zIGIgKyBpXFxzaW4gYiQuXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgdmVyc2lvbiBvZiBleHBvbmVudGlhdGVkXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBleHBvbmVudGlhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0UG9sYXIoIE1hdGguZXhwKCB0aGlzLnJlYWwgKSwgdGhpcy5pbWFnaW5hcnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTcXVhcmVzIHRoaXMgY29tcGxleCBudW1iZXIuXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgdmVyc2lvbiBvZiBzcXVhcmVkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgc3F1YXJlKCkge1xuICAgIHJldHVybiB0aGlzLm11bHRpcGx5KCB0aGlzICk7XG4gIH1cblxuICAvKipcbiAgICogU3F1YXJlIHJvb3QuXG4gICAqIE11dGFibGUgZm9ybSBvZiBzcXJ0T2YuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBzcXJ0KCkge1xuICAgIGNvbnN0IG1hZyA9IHRoaXMubWFnbml0dWRlO1xuICAgIHJldHVybiB0aGlzLnNldFJlYWxJbWFnaW5hcnkoIE1hdGguc3FydCggKCBtYWcgKyB0aGlzLnJlYWwgKSAvIDIgKSxcbiAgICAgICggdGhpcy5pbWFnaW5hcnkgPj0gMCA/IDEgOiAtMSApICogTWF0aC5zcXJ0KCAoIG1hZyAtIHRoaXMucmVhbCApIC8gMiApICk7XG4gIH1cblxuICAvKipcbiAgICogU2luZS5cbiAgICogTXV0YWJsZSBmb3JtIG9mIHNpbk9mLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgc2luKCkge1xuICAgIHJldHVybiB0aGlzLnNldFJlYWxJbWFnaW5hcnkoXG4gICAgICBNYXRoLnNpbiggdGhpcy5yZWFsICkgKiBVdGlscy5jb3NoKCB0aGlzLmltYWdpbmFyeSApLFxuICAgICAgTWF0aC5jb3MoIHRoaXMucmVhbCApICogVXRpbHMuc2luaCggdGhpcy5pbWFnaW5hcnkgKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQ29zaW5lLlxuICAgKiBNdXRhYmxlIGZvcm0gb2YgY29zT2YuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBjb3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0UmVhbEltYWdpbmFyeShcbiAgICAgIE1hdGguY29zKCB0aGlzLnJlYWwgKSAqIFV0aWxzLmNvc2goIHRoaXMuaW1hZ2luYXJ5ICksXG4gICAgICAtTWF0aC5zaW4oIHRoaXMucmVhbCApICogVXRpbHMuc2luaCggdGhpcy5pbWFnaW5hcnkgKVxuICAgICk7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBDb21wbGV4IGNvbmp1Z2F0ZS5cbiAgICogTXV0YWJsZSBmb3JtIG9mIGNvbmp1Z2F0ZWRcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Q29tcGxleH1cbiAgICovXG4gIGNvbmp1Z2F0ZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRSZWFsSW1hZ2luYXJ5KCB0aGlzLnJlYWwsIC10aGlzLmltYWdpbmFyeSApO1xuICB9XG5cbiAgLyoqXG4gICAqIERlYnVnZ2luZyBzdHJpbmcgZm9yIHRoZSBjb21wbGV4IG51bWJlciAocHJvdmlkZXMgcmVhbCBhbmQgaW1hZ2luYXJ5IHBhcnRzKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGBDb21wbGV4KCR7dGhpcy5yZWFsfSwgJHt0aGlzLmltYWdpbmFyeX0pYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgY29tcGxleCBudW1iZXIgZnJvbSBqdXN0IHRoZSByZWFsIHBhcnQgKGFzc3VtaW5nIHRoZSBpbWFnaW5hcnkgcGFydCBpcyAwKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcmVhbFxuICAgKiBAcmV0dXJucyB7Q29tcGxleH1cbiAgICovXG4gIHN0YXRpYyByZWFsKCByZWFsICkge1xuICAgIHJldHVybiBuZXcgQ29tcGxleCggcmVhbCwgMCApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgYSBjb21wbGV4IG51bWJlciBmcm9tIGp1c3QgdGhlIGltYWdpbmFyeSBwYXJ0IChhc3N1bWluZyB0aGUgcmVhbCBwYXJ0IGlzIDApLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbWFnaW5hcnlcbiAgICogQHJldHVybnMge0NvbXBsZXh9XG4gICAqL1xuICBzdGF0aWMgaW1hZ2luYXJ5KCBpbWFnaW5hcnkgKSB7XG4gICAgcmV0dXJuIG5ldyBDb21wbGV4KCAwLCBpbWFnaW5hcnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgY29tcGxleCBudW1iZXIgZnJvbSB0aGUgcG9sYXIgZm9ybS4gRm9yIGEgbWFnbml0dWRlICRyJCBhbmQgcGhhc2UgJFxcdmFycGhpJCwgdGhpcyB3aWxsIGJlXG4gICAqICRcXGNvc1xcdmFycGhpK2kgclxcc2luXFx2YXJwaGkkLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYWduaXR1ZGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBoYXNlXG4gICAqIEByZXR1cm5zIHtDb21wbGV4fVxuICAgKi9cbiAgc3RhdGljIGNyZWF0ZVBvbGFyKCBtYWduaXR1ZGUsIHBoYXNlICkge1xuICAgIHJldHVybiBuZXcgQ29tcGxleCggbWFnbml0dWRlICogTWF0aC5jb3MoIHBoYXNlICksIG1hZ25pdHVkZSAqIE1hdGguc2luKCBwaGFzZSApICk7XG4gIH1cbn1cblxuZG90LnJlZ2lzdGVyKCAnQ29tcGxleCcsIENvbXBsZXggKTtcblxuLyoqXG4gKiBJbW11dGFibGUgY29uc3RhbnQgJDAkLlxuICogQHB1YmxpY1xuICpcbiAqIEBjb25zdGFudCB7Q29tcGxleH0gWkVST1xuICovXG5Db21wbGV4LlpFUk8gPSBuZXcgQ29tcGxleCggMCwgMCApO1xuXG4vKipcbiAqIEltbXV0YWJsZSBjb25zdGFudCAkMSQuXG4gKiBAcHVibGljXG4gKlxuICogQGNvbnN0YW50IHtDb21wbGV4fSBPTkVcbiAqL1xuQ29tcGxleC5PTkUgPSBuZXcgQ29tcGxleCggMSwgMCApO1xuXG4vKipcbiAqIEltbXV0YWJsZSBjb25zdGFudCAkaSQsIHRoZSBpbWFnaW5hcnkgdW5pdC5cbiAqIEBwdWJsaWNcbiAqXG4gKiBAY29uc3RhbnQge0NvbXBsZXh9IElcbiAqL1xuQ29tcGxleC5JID0gQ29tcGxleC5pbWFnaW5hcnkoIDEgKTtcblxuZXhwb3J0IGRlZmF1bHQgQ29tcGxleDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEdBQUcsTUFBTSxVQUFVO0FBQzFCLE9BQU9DLEtBQUssTUFBTSxZQUFZO0FBRTlCLE1BQU1DLE9BQU8sQ0FBQztFQUNaO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFdBQVdBLENBQUVDLElBQUksRUFBRUMsU0FBUyxFQUFHO0lBQzdCO0lBQ0EsSUFBSSxDQUFDRCxJQUFJLEdBQUdBLElBQUk7O0lBRWhCO0lBQ0EsSUFBSSxDQUFDQyxTQUFTLEdBQUdBLFNBQVM7RUFDNUI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxJQUFJQSxDQUFFQyxPQUFPLEVBQUc7SUFDZCxJQUFLQSxPQUFPLEVBQUc7TUFDYixPQUFPQSxPQUFPLENBQUNDLEdBQUcsQ0FBRSxJQUFJLENBQUU7SUFDNUIsQ0FBQyxNQUNJO01BQ0gsT0FBTyxJQUFJTixPQUFPLENBQUUsSUFBSSxDQUFDRSxJQUFJLEVBQUUsSUFBSSxDQUFDQyxTQUFTLENBQUU7SUFDakQ7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUksS0FBS0EsQ0FBQSxFQUFHO0lBQ04sT0FBT0MsSUFBSSxDQUFDQyxLQUFLLENBQUUsSUFBSSxDQUFDTixTQUFTLEVBQUUsSUFBSSxDQUFDRCxJQUFJLENBQUU7RUFDaEQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VRLFlBQVlBLENBQUEsRUFBRztJQUNiLE9BQU9GLElBQUksQ0FBQ0csSUFBSSxDQUFFLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUU7RUFDM0M7RUFFQSxJQUFJQyxTQUFTQSxDQUFBLEVBQUc7SUFDZCxPQUFPLElBQUksQ0FBQ0gsWUFBWSxFQUFFO0VBQzVCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFSSxtQkFBbUJBLENBQUEsRUFBRztJQUNwQixPQUFPLElBQUksQ0FBQ1osSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSSxHQUFHLElBQUksQ0FBQ0MsU0FBUyxHQUFHLElBQUksQ0FBQ0EsU0FBUztFQUNoRTtFQUVBLElBQUlTLGdCQUFnQkEsQ0FBQSxFQUFHO0lBQ3JCLE9BQU8sSUFBSSxDQUFDRSxtQkFBbUIsRUFBRTtFQUNuQzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxNQUFNQSxDQUFFQyxLQUFLLEVBQUc7SUFDZCxPQUFPLElBQUksQ0FBQ2QsSUFBSSxLQUFLYyxLQUFLLENBQUNkLElBQUksSUFBSSxJQUFJLENBQUNDLFNBQVMsS0FBS2EsS0FBSyxDQUFDYixTQUFTO0VBQ3ZFOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFYyxhQUFhQSxDQUFFRCxLQUFLLEVBQUVFLE9BQU8sRUFBRztJQUM5QixJQUFLLENBQUNBLE9BQU8sRUFBRztNQUNkQSxPQUFPLEdBQUcsQ0FBQztJQUNiO0lBQ0EsT0FBT1YsSUFBSSxDQUFDVyxHQUFHLENBQUVYLElBQUksQ0FBQ1ksR0FBRyxDQUFFLElBQUksQ0FBQ2xCLElBQUksR0FBR2MsS0FBSyxDQUFDZCxJQUFJLENBQUUsRUFBRU0sSUFBSSxDQUFDWSxHQUFHLENBQUUsSUFBSSxDQUFDakIsU0FBUyxHQUFHYSxLQUFLLENBQUNiLFNBQVMsQ0FBRSxDQUFFLElBQUllLE9BQU87RUFDaEg7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUcsSUFBSUEsQ0FBRUMsQ0FBQyxFQUFHO0lBQ1IsT0FBTyxJQUFJdEIsT0FBTyxDQUFFLElBQUksQ0FBQ0UsSUFBSSxHQUFHb0IsQ0FBQyxDQUFDcEIsSUFBSSxFQUFFLElBQUksQ0FBQ0MsU0FBUyxHQUFHbUIsQ0FBQyxDQUFDbkIsU0FBUyxDQUFFO0VBQ3hFOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VvQixLQUFLQSxDQUFFRCxDQUFDLEVBQUc7SUFDVCxPQUFPLElBQUl0QixPQUFPLENBQUUsSUFBSSxDQUFDRSxJQUFJLEdBQUdvQixDQUFDLENBQUNwQixJQUFJLEVBQUUsSUFBSSxDQUFDQyxTQUFTLEdBQUdtQixDQUFDLENBQUNuQixTQUFTLENBQUU7RUFDeEU7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFcUIsS0FBS0EsQ0FBRUYsQ0FBQyxFQUFHO0lBQ1QsT0FBTyxJQUFJdEIsT0FBTyxDQUFFLElBQUksQ0FBQ0UsSUFBSSxHQUFHb0IsQ0FBQyxDQUFDcEIsSUFBSSxHQUFHLElBQUksQ0FBQ0MsU0FBUyxHQUFHbUIsQ0FBQyxDQUFDbkIsU0FBUyxFQUFFLElBQUksQ0FBQ0QsSUFBSSxHQUFHb0IsQ0FBQyxDQUFDbkIsU0FBUyxHQUFHLElBQUksQ0FBQ0EsU0FBUyxHQUFHbUIsQ0FBQyxDQUFDcEIsSUFBSSxDQUFFO0VBQzVIOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRXVCLFNBQVNBLENBQUVILENBQUMsRUFBRztJQUNiLE1BQU1JLElBQUksR0FBR0osQ0FBQyxDQUFDVixnQkFBZ0I7SUFDL0IsT0FBTyxJQUFJWixPQUFPLENBQ2hCLENBQUUsSUFBSSxDQUFDRSxJQUFJLEdBQUdvQixDQUFDLENBQUNwQixJQUFJLEdBQUcsSUFBSSxDQUFDQyxTQUFTLEdBQUdtQixDQUFDLENBQUNuQixTQUFTLElBQUt1QixJQUFJLEVBQzVELENBQUUsSUFBSSxDQUFDdkIsU0FBUyxHQUFHbUIsQ0FBQyxDQUFDcEIsSUFBSSxHQUFHLElBQUksQ0FBQ0EsSUFBSSxHQUFHb0IsQ0FBQyxDQUFDbkIsU0FBUyxJQUFLdUIsSUFBSSxDQUM3RDtFQUNIOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLE1BQU1BLENBQUEsRUFBRztJQUNQLE1BQU1DLEdBQUcsR0FBRyxJQUFJLENBQUNmLFNBQVM7SUFDMUIsT0FBTyxJQUFJYixPQUFPLENBQUVRLElBQUksQ0FBQ0csSUFBSSxDQUFFLENBQUVpQixHQUFHLEdBQUcsSUFBSSxDQUFDMUIsSUFBSSxJQUFLLENBQUMsQ0FBRSxFQUN0RCxDQUFFLElBQUksQ0FBQ0MsU0FBUyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUtLLElBQUksQ0FBQ0csSUFBSSxDQUFFLENBQUVpQixHQUFHLEdBQUcsSUFBSSxDQUFDMUIsSUFBSSxJQUFLLENBQUMsQ0FBRSxDQUFFO0VBQzdFOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UyQixXQUFXQSxDQUFFQyxTQUFTLEVBQUc7SUFDdkIsTUFBTUMsUUFBUSxHQUFHdkIsSUFBSSxDQUFDd0IsR0FBRyxDQUFFLElBQUksQ0FBQ25CLFNBQVMsRUFBRWlCLFNBQVMsQ0FBRTtJQUN0RCxNQUFNRyxLQUFLLEdBQUdILFNBQVMsR0FBRyxJQUFJLENBQUN2QixLQUFLLEVBQUU7SUFDdEMsT0FBTyxJQUFJUCxPQUFPLENBQ2hCK0IsUUFBUSxHQUFHdkIsSUFBSSxDQUFDMEIsR0FBRyxDQUFFRCxLQUFLLENBQUUsRUFDNUJGLFFBQVEsR0FBR3ZCLElBQUksQ0FBQzJCLEdBQUcsQ0FBRUYsS0FBSyxDQUFFLENBQzdCO0VBQ0g7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUcsS0FBS0EsQ0FBQSxFQUFHO0lBQ04sT0FBTyxJQUFJcEMsT0FBTyxDQUNoQlEsSUFBSSxDQUFDMkIsR0FBRyxDQUFFLElBQUksQ0FBQ2pDLElBQUksQ0FBRSxHQUFHSCxLQUFLLENBQUNzQyxJQUFJLENBQUUsSUFBSSxDQUFDbEMsU0FBUyxDQUFFLEVBQ3BESyxJQUFJLENBQUMwQixHQUFHLENBQUUsSUFBSSxDQUFDaEMsSUFBSSxDQUFFLEdBQUdILEtBQUssQ0FBQ3VDLElBQUksQ0FBRSxJQUFJLENBQUNuQyxTQUFTLENBQUUsQ0FDckQ7RUFDSDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFb0MsS0FBS0EsQ0FBQSxFQUFHO0lBQ04sT0FBTyxJQUFJdkMsT0FBTyxDQUNoQlEsSUFBSSxDQUFDMEIsR0FBRyxDQUFFLElBQUksQ0FBQ2hDLElBQUksQ0FBRSxHQUFHSCxLQUFLLENBQUNzQyxJQUFJLENBQUUsSUFBSSxDQUFDbEMsU0FBUyxDQUFFLEVBQ3BELENBQUNLLElBQUksQ0FBQzJCLEdBQUcsQ0FBRSxJQUFJLENBQUNqQyxJQUFJLENBQUUsR0FBR0gsS0FBSyxDQUFDdUMsSUFBSSxDQUFFLElBQUksQ0FBQ25DLFNBQVMsQ0FBRSxDQUN0RDtFQUNIOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VxQyxPQUFPQSxDQUFBLEVBQUc7SUFDUixPQUFPLElBQUksQ0FBQ2hCLEtBQUssQ0FBRSxJQUFJLENBQUU7RUFDM0I7O0VBR0E7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWlCLFVBQVVBLENBQUEsRUFBRztJQUNYLE9BQU8sSUFBSXpDLE9BQU8sQ0FBRSxJQUFJLENBQUNFLElBQUksRUFBRSxDQUFDLElBQUksQ0FBQ0MsU0FBUyxDQUFFO0VBQ2xEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0V1QyxhQUFhQSxDQUFBLEVBQUc7SUFDZCxPQUFPMUMsT0FBTyxDQUFDMkMsV0FBVyxDQUFFbkMsSUFBSSxDQUFDb0MsR0FBRyxDQUFFLElBQUksQ0FBQzFDLElBQUksQ0FBRSxFQUFFLElBQUksQ0FBQ0MsU0FBUyxDQUFFO0VBQ3JFOztFQUVBOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRTBDLGdCQUFnQkEsQ0FBRTNDLElBQUksRUFBRUMsU0FBUyxFQUFHO0lBQ2xDLElBQUksQ0FBQ0QsSUFBSSxHQUFHQSxJQUFJO0lBQ2hCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQSxTQUFTO0lBQzFCLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UyQyxPQUFPQSxDQUFFNUMsSUFBSSxFQUFHO0lBQ2QsSUFBSSxDQUFDQSxJQUFJLEdBQUdBLElBQUk7SUFDaEIsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRTZDLFlBQVlBLENBQUU1QyxTQUFTLEVBQUc7SUFDeEIsSUFBSSxDQUFDQSxTQUFTLEdBQUdBLFNBQVM7SUFDMUIsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUcsR0FBR0EsQ0FBRWdCLENBQUMsRUFBRztJQUNQLE9BQU8sSUFBSSxDQUFDdUIsZ0JBQWdCLENBQUV2QixDQUFDLENBQUNwQixJQUFJLEVBQUVvQixDQUFDLENBQUNuQixTQUFTLENBQUU7RUFDckQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0U2QyxRQUFRQSxDQUFFbkMsU0FBUyxFQUFFTixLQUFLLEVBQUc7SUFDM0IsT0FBTyxJQUFJLENBQUNzQyxnQkFBZ0IsQ0FBRWhDLFNBQVMsR0FBR0wsSUFBSSxDQUFDMEIsR0FBRyxDQUFFM0IsS0FBSyxDQUFFLEVBQUVNLFNBQVMsR0FBR0wsSUFBSSxDQUFDMkIsR0FBRyxDQUFFNUIsS0FBSyxDQUFFLENBQUU7RUFDOUY7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UwQyxHQUFHQSxDQUFFM0IsQ0FBQyxFQUFHO0lBQ1AsT0FBTyxJQUFJLENBQUN1QixnQkFBZ0IsQ0FBRSxJQUFJLENBQUMzQyxJQUFJLEdBQUdvQixDQUFDLENBQUNwQixJQUFJLEVBQUUsSUFBSSxDQUFDQyxTQUFTLEdBQUdtQixDQUFDLENBQUNuQixTQUFTLENBQUU7RUFDbEY7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UrQyxRQUFRQSxDQUFFNUIsQ0FBQyxFQUFHO0lBQ1osT0FBTyxJQUFJLENBQUN1QixnQkFBZ0IsQ0FBRSxJQUFJLENBQUMzQyxJQUFJLEdBQUdvQixDQUFDLENBQUNwQixJQUFJLEVBQUUsSUFBSSxDQUFDQyxTQUFTLEdBQUdtQixDQUFDLENBQUNuQixTQUFTLENBQUU7RUFDbEY7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWdELFFBQVFBLENBQUU3QixDQUFDLEVBQUc7SUFDWixPQUFPLElBQUksQ0FBQ3VCLGdCQUFnQixDQUMxQixJQUFJLENBQUMzQyxJQUFJLEdBQUdvQixDQUFDLENBQUNwQixJQUFJLEdBQUcsSUFBSSxDQUFDQyxTQUFTLEdBQUdtQixDQUFDLENBQUNuQixTQUFTLEVBQ2pELElBQUksQ0FBQ0QsSUFBSSxHQUFHb0IsQ0FBQyxDQUFDbkIsU0FBUyxHQUFHLElBQUksQ0FBQ0EsU0FBUyxHQUFHbUIsQ0FBQyxDQUFDcEIsSUFBSSxDQUFFO0VBQ3ZEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VrRCxNQUFNQSxDQUFFOUIsQ0FBQyxFQUFHO0lBQ1YsTUFBTUksSUFBSSxHQUFHSixDQUFDLENBQUNWLGdCQUFnQjtJQUMvQixPQUFPLElBQUksQ0FBQ2lDLGdCQUFnQixDQUMxQixDQUFFLElBQUksQ0FBQzNDLElBQUksR0FBR29CLENBQUMsQ0FBQ3BCLElBQUksR0FBRyxJQUFJLENBQUNDLFNBQVMsR0FBR21CLENBQUMsQ0FBQ25CLFNBQVMsSUFBS3VCLElBQUksRUFDNUQsQ0FBRSxJQUFJLENBQUN2QixTQUFTLEdBQUdtQixDQUFDLENBQUNwQixJQUFJLEdBQUcsSUFBSSxDQUFDQSxJQUFJLEdBQUdvQixDQUFDLENBQUNuQixTQUFTLElBQUt1QixJQUFJLENBQzdEO0VBQ0g7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRTJCLFlBQVlBLENBQUEsRUFBRztJQUNiLE9BQU8sSUFBSSxDQUFDTCxRQUFRLENBQUV4QyxJQUFJLENBQUNvQyxHQUFHLENBQUUsSUFBSSxDQUFDMUMsSUFBSSxDQUFFLEVBQUUsSUFBSSxDQUFDQyxTQUFTLENBQUU7RUFDL0Q7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRW1ELE1BQU1BLENBQUEsRUFBRztJQUNQLE9BQU8sSUFBSSxDQUFDSCxRQUFRLENBQUUsSUFBSSxDQUFFO0VBQzlCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0V4QyxJQUFJQSxDQUFBLEVBQUc7SUFDTCxNQUFNaUIsR0FBRyxHQUFHLElBQUksQ0FBQ2YsU0FBUztJQUMxQixPQUFPLElBQUksQ0FBQ2dDLGdCQUFnQixDQUFFckMsSUFBSSxDQUFDRyxJQUFJLENBQUUsQ0FBRWlCLEdBQUcsR0FBRyxJQUFJLENBQUMxQixJQUFJLElBQUssQ0FBQyxDQUFFLEVBQ2hFLENBQUUsSUFBSSxDQUFDQyxTQUFTLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBS0ssSUFBSSxDQUFDRyxJQUFJLENBQUUsQ0FBRWlCLEdBQUcsR0FBRyxJQUFJLENBQUMxQixJQUFJLElBQUssQ0FBQyxDQUFFLENBQUU7RUFDN0U7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWlDLEdBQUdBLENBQUEsRUFBRztJQUNKLE9BQU8sSUFBSSxDQUFDVSxnQkFBZ0IsQ0FDMUJyQyxJQUFJLENBQUMyQixHQUFHLENBQUUsSUFBSSxDQUFDakMsSUFBSSxDQUFFLEdBQUdILEtBQUssQ0FBQ3NDLElBQUksQ0FBRSxJQUFJLENBQUNsQyxTQUFTLENBQUUsRUFDcERLLElBQUksQ0FBQzBCLEdBQUcsQ0FBRSxJQUFJLENBQUNoQyxJQUFJLENBQUUsR0FBR0gsS0FBSyxDQUFDdUMsSUFBSSxDQUFFLElBQUksQ0FBQ25DLFNBQVMsQ0FBRSxDQUNyRDtFQUNIOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UrQixHQUFHQSxDQUFBLEVBQUc7SUFDSixPQUFPLElBQUksQ0FBQ1csZ0JBQWdCLENBQzFCckMsSUFBSSxDQUFDMEIsR0FBRyxDQUFFLElBQUksQ0FBQ2hDLElBQUksQ0FBRSxHQUFHSCxLQUFLLENBQUNzQyxJQUFJLENBQUUsSUFBSSxDQUFDbEMsU0FBUyxDQUFFLEVBQ3BELENBQUNLLElBQUksQ0FBQzJCLEdBQUcsQ0FBRSxJQUFJLENBQUNqQyxJQUFJLENBQUUsR0FBR0gsS0FBSyxDQUFDdUMsSUFBSSxDQUFFLElBQUksQ0FBQ25DLFNBQVMsQ0FBRSxDQUN0RDtFQUNIOztFQUdBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VvRCxTQUFTQSxDQUFBLEVBQUc7SUFDVixPQUFPLElBQUksQ0FBQ1YsZ0JBQWdCLENBQUUsSUFBSSxDQUFDM0MsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDQyxTQUFTLENBQUU7RUFDNUQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VxRCxRQUFRQSxDQUFBLEVBQUc7SUFDVCxPQUFRLFdBQVUsSUFBSSxDQUFDdEQsSUFBSyxLQUFJLElBQUksQ0FBQ0MsU0FBVSxHQUFFO0VBQ25EOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT0QsSUFBSUEsQ0FBRUEsSUFBSSxFQUFHO0lBQ2xCLE9BQU8sSUFBSUYsT0FBTyxDQUFFRSxJQUFJLEVBQUUsQ0FBQyxDQUFFO0VBQy9COztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT0MsU0FBU0EsQ0FBRUEsU0FBUyxFQUFHO0lBQzVCLE9BQU8sSUFBSUgsT0FBTyxDQUFFLENBQUMsRUFBRUcsU0FBUyxDQUFFO0VBQ3BDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU93QyxXQUFXQSxDQUFFOUIsU0FBUyxFQUFFTixLQUFLLEVBQUc7SUFDckMsT0FBTyxJQUFJUCxPQUFPLENBQUVhLFNBQVMsR0FBR0wsSUFBSSxDQUFDMEIsR0FBRyxDQUFFM0IsS0FBSyxDQUFFLEVBQUVNLFNBQVMsR0FBR0wsSUFBSSxDQUFDMkIsR0FBRyxDQUFFNUIsS0FBSyxDQUFFLENBQUU7RUFDcEY7QUFDRjtBQUVBVCxHQUFHLENBQUMyRCxRQUFRLENBQUUsU0FBUyxFQUFFekQsT0FBTyxDQUFFOztBQUVsQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQUEsT0FBTyxDQUFDMEQsSUFBSSxHQUFHLElBQUkxRCxPQUFPLENBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBRTs7QUFFbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0FBLE9BQU8sQ0FBQzJELEdBQUcsR0FBRyxJQUFJM0QsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLENBQUU7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBQSxPQUFPLENBQUM0RCxDQUFDLEdBQUc1RCxPQUFPLENBQUNHLFNBQVMsQ0FBRSxDQUFDLENBQUU7QUFFbEMsZUFBZUgsT0FBTyJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/ConvexHull2.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * Construction of 2D convex hulls from a list of points.
 *
 * For example:
 * #begin canvasExample grahamScan 256x128
 * #on
 * var points = _.range( 50 ).map( function() {
 *   return new phet.dot.Vector2( 5 + ( 256 - 10 ) * Math.random(), 5 + ( 128 - 10 ) * Math.random() );
 * } );
 * var hullPoints = phet.dot.ConvexHull2.grahamScan( points, false );
 * #off
 * context.beginPath();
 * hullPoints.forEach( function( point ) {
 *   context.lineTo( point.x, point.y );
 * } );
 * context.closePath();
 * context.fillStyle = '#eee';
 * context.fill();
 * context.strokeStyle = '#f00';
 * context.stroke();
 *
 * context.beginPath();
 * points.forEach( function( point ) {
 *   context.arc( point.x, point.y, 2, 0, Math.PI * 2, false );
 *   context.closePath();
 * } );
 * context.fillStyle = '#00f';
 * context.fill();
 * #end canvasExample
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/**
 * counter-clockwise turn if > 0, clockwise turn if < 0, collinear if === 0.
 * @param {Vector2} p1
 * @param {Vector2} p2
 * @param {Vector2} p3
 * @returns {number}
 */
function ccw(p1, p2, p3) {
  return p2.minus(p1).crossScalar(p3.minus(p1));
}
const ConvexHull2 = {
  // TODO testing: all collinear, multiple ways of having same angle, etc.

  /**
   * Given multiple points, this performs a Graham Scan (http://en.wikipedia.org/wiki/Graham_scan) to identify an
   * ordered list of points which define the minimal polygon that contains all of the points.
   * @public
   *
   * @param {Array.<Vector2>} points
   * @param {boolean} includeCollinear - If a point is along an edge of the convex hull (not at one of its vertices),
   *                                     should it be included?
   * @returns {Array.<Vector2>}
   */
  grahamScan: (points, includeCollinear) => {
    if (points.length <= 2) {
      return points;
    }

    // find the point 'p' with the lowest y value
    let minY = Number.POSITIVE_INFINITY;
    let p = null;
    _.each(points, point => {
      if (point.y <= minY) {
        // if two points have the same y value, take the one with the lowest x
        if (point.y === minY && p) {
          if (point.x < p.x) {
            p = point;
          }
        } else {
          minY = point.y;
          p = point;
        }
      }
    });

    // sorts the points by their angle. Between 0 and PI
    points = _.sortBy(points, point => {
      return point.minus(p).angle;
    });

    // remove p from points (relies on the above statement making a defensive copy)
    points.splice(_.indexOf(points, p), 1);

    // our result array
    const result = [p];
    _.each(points, point => {
      // ignore points equal to our starting point
      if (p.x === point.x && p.y === point.y) {
        return;
      }
      function isRightTurn() {
        if (result.length < 2) {
          return false;
        }
        const cross = ccw(result[result.length - 2], result[result.length - 1], point);
        return includeCollinear ? cross < 0 : cross <= 0;
      }
      while (isRightTurn()) {
        result.pop();
      }
      result.push(point);
    });
    return result;
  }
};
js_dot.register('ConvexHull2', ConvexHull2);
/* harmony default export */ const js_ConvexHull2 = ((/* unused pure expression or super */ null && (ConvexHull2)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJjY3ciLCJwMSIsInAyIiwicDMiLCJtaW51cyIsImNyb3NzU2NhbGFyIiwiQ29udmV4SHVsbDIiLCJncmFoYW1TY2FuIiwicG9pbnRzIiwiaW5jbHVkZUNvbGxpbmVhciIsImxlbmd0aCIsIm1pblkiLCJOdW1iZXIiLCJQT1NJVElWRV9JTkZJTklUWSIsInAiLCJfIiwiZWFjaCIsInBvaW50IiwieSIsIngiLCJzb3J0QnkiLCJhbmdsZSIsInNwbGljZSIsImluZGV4T2YiLCJyZXN1bHQiLCJpc1JpZ2h0VHVybiIsImNyb3NzIiwicG9wIiwicHVzaCIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiQ29udmV4SHVsbDIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQ29uc3RydWN0aW9uIG9mIDJEIGNvbnZleCBodWxscyBmcm9tIGEgbGlzdCBvZiBwb2ludHMuXG4gKlxuICogRm9yIGV4YW1wbGU6XG4gKiAjYmVnaW4gY2FudmFzRXhhbXBsZSBncmFoYW1TY2FuIDI1NngxMjhcbiAqICNvblxuICogdmFyIHBvaW50cyA9IF8ucmFuZ2UoIDUwICkubWFwKCBmdW5jdGlvbigpIHtcbiAqICAgcmV0dXJuIG5ldyBwaGV0LmRvdC5WZWN0b3IyKCA1ICsgKCAyNTYgLSAxMCApICogTWF0aC5yYW5kb20oKSwgNSArICggMTI4IC0gMTAgKSAqIE1hdGgucmFuZG9tKCkgKTtcbiAqIH0gKTtcbiAqIHZhciBodWxsUG9pbnRzID0gcGhldC5kb3QuQ29udmV4SHVsbDIuZ3JhaGFtU2NhbiggcG9pbnRzLCBmYWxzZSApO1xuICogI29mZlxuICogY29udGV4dC5iZWdpblBhdGgoKTtcbiAqIGh1bGxQb2ludHMuZm9yRWFjaCggZnVuY3Rpb24oIHBvaW50ICkge1xuICogICBjb250ZXh0LmxpbmVUbyggcG9pbnQueCwgcG9pbnQueSApO1xuICogfSApO1xuICogY29udGV4dC5jbG9zZVBhdGgoKTtcbiAqIGNvbnRleHQuZmlsbFN0eWxlID0gJyNlZWUnO1xuICogY29udGV4dC5maWxsKCk7XG4gKiBjb250ZXh0LnN0cm9rZVN0eWxlID0gJyNmMDAnO1xuICogY29udGV4dC5zdHJva2UoKTtcbiAqXG4gKiBjb250ZXh0LmJlZ2luUGF0aCgpO1xuICogcG9pbnRzLmZvckVhY2goIGZ1bmN0aW9uKCBwb2ludCApIHtcbiAqICAgY29udGV4dC5hcmMoIHBvaW50LngsIHBvaW50LnksIDIsIDAsIE1hdGguUEkgKiAyLCBmYWxzZSApO1xuICogICBjb250ZXh0LmNsb3NlUGF0aCgpO1xuICogfSApO1xuICogY29udGV4dC5maWxsU3R5bGUgPSAnIzAwZic7XG4gKiBjb250ZXh0LmZpbGwoKTtcbiAqICNlbmQgY2FudmFzRXhhbXBsZVxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcblxuLyoqXG4gKiBjb3VudGVyLWNsb2Nrd2lzZSB0dXJuIGlmID4gMCwgY2xvY2t3aXNlIHR1cm4gaWYgPCAwLCBjb2xsaW5lYXIgaWYgPT09IDAuXG4gKiBAcGFyYW0ge1ZlY3RvcjJ9IHAxXG4gKiBAcGFyYW0ge1ZlY3RvcjJ9IHAyXG4gKiBAcGFyYW0ge1ZlY3RvcjJ9IHAzXG4gKiBAcmV0dXJucyB7bnVtYmVyfVxuICovXG5mdW5jdGlvbiBjY3coIHAxLCBwMiwgcDMgKSB7XG4gIHJldHVybiBwMi5taW51cyggcDEgKS5jcm9zc1NjYWxhciggcDMubWludXMoIHAxICkgKTtcbn1cblxuY29uc3QgQ29udmV4SHVsbDIgPSB7XG4gIC8vIFRPRE8gdGVzdGluZzogYWxsIGNvbGxpbmVhciwgbXVsdGlwbGUgd2F5cyBvZiBoYXZpbmcgc2FtZSBhbmdsZSwgZXRjLlxuXG4gIC8qKlxuICAgKiBHaXZlbiBtdWx0aXBsZSBwb2ludHMsIHRoaXMgcGVyZm9ybXMgYSBHcmFoYW0gU2NhbiAoaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9HcmFoYW1fc2NhbikgdG8gaWRlbnRpZnkgYW5cbiAgICogb3JkZXJlZCBsaXN0IG9mIHBvaW50cyB3aGljaCBkZWZpbmUgdGhlIG1pbmltYWwgcG9seWdvbiB0aGF0IGNvbnRhaW5zIGFsbCBvZiB0aGUgcG9pbnRzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXkuPFZlY3RvcjI+fSBwb2ludHNcbiAgICogQHBhcmFtIHtib29sZWFufSBpbmNsdWRlQ29sbGluZWFyIC0gSWYgYSBwb2ludCBpcyBhbG9uZyBhbiBlZGdlIG9mIHRoZSBjb252ZXggaHVsbCAobm90IGF0IG9uZSBvZiBpdHMgdmVydGljZXMpLFxuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaG91bGQgaXQgYmUgaW5jbHVkZWQ/XG4gICAqIEByZXR1cm5zIHtBcnJheS48VmVjdG9yMj59XG4gICAqL1xuICBncmFoYW1TY2FuOiAoIHBvaW50cywgaW5jbHVkZUNvbGxpbmVhciApID0+IHtcbiAgICBpZiAoIHBvaW50cy5sZW5ndGggPD0gMiApIHtcbiAgICAgIHJldHVybiBwb2ludHM7XG4gICAgfVxuXG4gICAgLy8gZmluZCB0aGUgcG9pbnQgJ3AnIHdpdGggdGhlIGxvd2VzdCB5IHZhbHVlXG4gICAgbGV0IG1pblkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7XG4gICAgbGV0IHAgPSBudWxsO1xuICAgIF8uZWFjaCggcG9pbnRzLCBwb2ludCA9PiB7XG4gICAgICBpZiAoIHBvaW50LnkgPD0gbWluWSApIHtcbiAgICAgICAgLy8gaWYgdHdvIHBvaW50cyBoYXZlIHRoZSBzYW1lIHkgdmFsdWUsIHRha2UgdGhlIG9uZSB3aXRoIHRoZSBsb3dlc3QgeFxuICAgICAgICBpZiAoIHBvaW50LnkgPT09IG1pblkgJiYgcCApIHtcbiAgICAgICAgICBpZiAoIHBvaW50LnggPCBwLnggKSB7XG4gICAgICAgICAgICBwID0gcG9pbnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIG1pblkgPSBwb2ludC55O1xuICAgICAgICAgIHAgPSBwb2ludDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gKTtcblxuICAgIC8vIHNvcnRzIHRoZSBwb2ludHMgYnkgdGhlaXIgYW5nbGUuIEJldHdlZW4gMCBhbmQgUElcbiAgICBwb2ludHMgPSBfLnNvcnRCeSggcG9pbnRzLCBwb2ludCA9PiB7XG4gICAgICByZXR1cm4gcG9pbnQubWludXMoIHAgKS5hbmdsZTtcbiAgICB9ICk7XG5cbiAgICAvLyByZW1vdmUgcCBmcm9tIHBvaW50cyAocmVsaWVzIG9uIHRoZSBhYm92ZSBzdGF0ZW1lbnQgbWFraW5nIGEgZGVmZW5zaXZlIGNvcHkpXG4gICAgcG9pbnRzLnNwbGljZSggXy5pbmRleE9mKCBwb2ludHMsIHAgKSwgMSApO1xuXG4gICAgLy8gb3VyIHJlc3VsdCBhcnJheVxuICAgIGNvbnN0IHJlc3VsdCA9IFsgcCBdO1xuXG4gICAgXy5lYWNoKCBwb2ludHMsIHBvaW50ID0+IHtcbiAgICAgIC8vIGlnbm9yZSBwb2ludHMgZXF1YWwgdG8gb3VyIHN0YXJ0aW5nIHBvaW50XG4gICAgICBpZiAoIHAueCA9PT0gcG9pbnQueCAmJiBwLnkgPT09IHBvaW50LnkgKSB7IHJldHVybjsgfVxuXG4gICAgICBmdW5jdGlvbiBpc1JpZ2h0VHVybigpIHtcbiAgICAgICAgaWYgKCByZXN1bHQubGVuZ3RoIDwgMiApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3Jvc3MgPSBjY3coIHJlc3VsdFsgcmVzdWx0Lmxlbmd0aCAtIDIgXSwgcmVzdWx0WyByZXN1bHQubGVuZ3RoIC0gMSBdLCBwb2ludCApO1xuICAgICAgICByZXR1cm4gaW5jbHVkZUNvbGxpbmVhciA/ICggY3Jvc3MgPCAwICkgOiAoIGNyb3NzIDw9IDAgKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKCBpc1JpZ2h0VHVybigpICkge1xuICAgICAgICByZXN1bHQucG9wKCk7XG4gICAgICB9XG4gICAgICByZXN1bHQucHVzaCggcG9pbnQgKTtcbiAgICB9ICk7XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG59O1xuXG5kb3QucmVnaXN0ZXIoICdDb252ZXhIdWxsMicsIENvbnZleEh1bGwyICk7XG5cbmV4cG9ydCBkZWZhdWx0IENvbnZleEh1bGwyOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxHQUFHLE1BQU0sVUFBVTs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTQyxHQUFHQSxDQUFFQyxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFHO0VBQ3pCLE9BQU9ELEVBQUUsQ0FBQ0UsS0FBSyxDQUFFSCxFQUFFLENBQUUsQ0FBQ0ksV0FBVyxDQUFFRixFQUFFLENBQUNDLEtBQUssQ0FBRUgsRUFBRSxDQUFFLENBQUU7QUFDckQ7QUFFQSxNQUFNSyxXQUFXLEdBQUc7RUFDbEI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsVUFBVSxFQUFFQSxDQUFFQyxNQUFNLEVBQUVDLGdCQUFnQixLQUFNO0lBQzFDLElBQUtELE1BQU0sQ0FBQ0UsTUFBTSxJQUFJLENBQUMsRUFBRztNQUN4QixPQUFPRixNQUFNO0lBQ2Y7O0lBRUE7SUFDQSxJQUFJRyxJQUFJLEdBQUdDLE1BQU0sQ0FBQ0MsaUJBQWlCO0lBQ25DLElBQUlDLENBQUMsR0FBRyxJQUFJO0lBQ1pDLENBQUMsQ0FBQ0MsSUFBSSxDQUFFUixNQUFNLEVBQUVTLEtBQUssSUFBSTtNQUN2QixJQUFLQSxLQUFLLENBQUNDLENBQUMsSUFBSVAsSUFBSSxFQUFHO1FBQ3JCO1FBQ0EsSUFBS00sS0FBSyxDQUFDQyxDQUFDLEtBQUtQLElBQUksSUFBSUcsQ0FBQyxFQUFHO1VBQzNCLElBQUtHLEtBQUssQ0FBQ0UsQ0FBQyxHQUFHTCxDQUFDLENBQUNLLENBQUMsRUFBRztZQUNuQkwsQ0FBQyxHQUFHRyxLQUFLO1VBQ1g7UUFDRixDQUFDLE1BQ0k7VUFDSE4sSUFBSSxHQUFHTSxLQUFLLENBQUNDLENBQUM7VUFDZEosQ0FBQyxHQUFHRyxLQUFLO1FBQ1g7TUFDRjtJQUNGLENBQUMsQ0FBRTs7SUFFSDtJQUNBVCxNQUFNLEdBQUdPLENBQUMsQ0FBQ0ssTUFBTSxDQUFFWixNQUFNLEVBQUVTLEtBQUssSUFBSTtNQUNsQyxPQUFPQSxLQUFLLENBQUNiLEtBQUssQ0FBRVUsQ0FBQyxDQUFFLENBQUNPLEtBQUs7SUFDL0IsQ0FBQyxDQUFFOztJQUVIO0lBQ0FiLE1BQU0sQ0FBQ2MsTUFBTSxDQUFFUCxDQUFDLENBQUNRLE9BQU8sQ0FBRWYsTUFBTSxFQUFFTSxDQUFDLENBQUUsRUFBRSxDQUFDLENBQUU7O0lBRTFDO0lBQ0EsTUFBTVUsTUFBTSxHQUFHLENBQUVWLENBQUMsQ0FBRTtJQUVwQkMsQ0FBQyxDQUFDQyxJQUFJLENBQUVSLE1BQU0sRUFBRVMsS0FBSyxJQUFJO01BQ3ZCO01BQ0EsSUFBS0gsQ0FBQyxDQUFDSyxDQUFDLEtBQUtGLEtBQUssQ0FBQ0UsQ0FBQyxJQUFJTCxDQUFDLENBQUNJLENBQUMsS0FBS0QsS0FBSyxDQUFDQyxDQUFDLEVBQUc7UUFBRTtNQUFRO01BRXBELFNBQVNPLFdBQVdBLENBQUEsRUFBRztRQUNyQixJQUFLRCxNQUFNLENBQUNkLE1BQU0sR0FBRyxDQUFDLEVBQUc7VUFDdkIsT0FBTyxLQUFLO1FBQ2Q7UUFDQSxNQUFNZ0IsS0FBSyxHQUFHMUIsR0FBRyxDQUFFd0IsTUFBTSxDQUFFQSxNQUFNLENBQUNkLE1BQU0sR0FBRyxDQUFDLENBQUUsRUFBRWMsTUFBTSxDQUFFQSxNQUFNLENBQUNkLE1BQU0sR0FBRyxDQUFDLENBQUUsRUFBRU8sS0FBSyxDQUFFO1FBQ3BGLE9BQU9SLGdCQUFnQixHQUFLaUIsS0FBSyxHQUFHLENBQUMsR0FBT0EsS0FBSyxJQUFJLENBQUc7TUFDMUQ7TUFFQSxPQUFRRCxXQUFXLEVBQUUsRUFBRztRQUN0QkQsTUFBTSxDQUFDRyxHQUFHLEVBQUU7TUFDZDtNQUNBSCxNQUFNLENBQUNJLElBQUksQ0FBRVgsS0FBSyxDQUFFO0lBQ3RCLENBQUMsQ0FBRTtJQUVILE9BQU9PLE1BQU07RUFDZjtBQUNGLENBQUM7QUFFRHpCLEdBQUcsQ0FBQzhCLFFBQVEsQ0FBRSxhQUFhLEVBQUV2QixXQUFXLENBQUU7QUFFMUMsZUFBZUEsV0FBVyJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/DampedHarmonic.js
// Copyright 2023, University of Colorado Boulder

/**
 * Solves for a specific solution of a damped harmonic oscillator
 * (https://en.wikipedia.org/wiki/Harmonic_oscillator#Damped_harmonic_oscillator), given the initial value and
 * derivative.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */




class SolutionType extends js_EnumerationValue {
  static OVER_DAMPED = new SolutionType();
  static UNDER_DAMPED = new SolutionType();
  static CRITICALLY_DAMPED = new SolutionType();
  static UNKNOWN = new SolutionType();
  static enumeration = new js_Enumeration(SolutionType);
}
class DampedHarmonic {
  // if critically damped
  // if under-damped
  // if over-damped
  // if over-damped

  /**
   * For solving ax'' + bx' + cx = 0 with initial conditions x(0) and x'(0).
   *
   * @param a - Coefficient in front of the second derivative.
   * @param b - Coefficient in front of the first derivative, responsible for the amount of damping applied.
   * @param c - Coefficient in front of the current value, responsible for the amount of force towards equilibrium.
   * @param initialValue - The value of x(0), i.e. the initial position at t=0.
   * @param initialDerivative - The value of x'(0), i.e. the initial velocity at t=0;
   */
  constructor(a, b, c, initialValue, initialDerivative) {
    assert && assert(isFinite(a) && a !== 0);
    assert && assert(isFinite(b));
    assert && assert(isFinite(c) && c !== 0);
    assert && assert(isFinite(initialValue));
    assert && assert(isFinite(initialDerivative));

    // We'll transform into the simpler: x'' + dampingConstant x' + angularFrequencySquared x = 0
    this.dampingConstant = b / a;
    this.angularFrequencySquared = c / a;
    assert && assert(this.dampingConstant >= 0, 'a and b should share the same sign');
    assert && assert(this.angularFrequencySquared > 0, 'a and c should share the same sign');

    // Determines what type of solution is required.
    this.discriminant = this.dampingConstant * this.dampingConstant - 4 * this.angularFrequencySquared;
    this.solutionType = SolutionType.UNKNOWN; // will be filled in below

    // Constants that determine what linear combination of solutions satisfies the initial conditions
    this.c1 = 0;
    this.c2 = 0;
    if (Math.abs(this.discriminant) < 1e-5) {
      this.solutionType = SolutionType.CRITICALLY_DAMPED;
      this.angularFrequency = Math.sqrt(this.angularFrequencySquared);
      this.c1 = initialValue;
      this.c2 = initialDerivative + this.angularFrequency * initialValue;
    } else if (this.discriminant < 0) {
      this.solutionType = SolutionType.UNDER_DAMPED;
      this.frequency = 0.5 * Math.sqrt(-this.discriminant);
      this.c1 = initialValue;
      this.c2 = this.dampingConstant * initialValue / (2 * this.frequency) + initialDerivative / this.frequency;
    } else {
      this.solutionType = SolutionType.OVER_DAMPED;
      this.positiveRoot = 0.5 * (-this.dampingConstant + Math.sqrt(this.discriminant));
      this.negativeRoot = 0.5 * (-this.dampingConstant - Math.sqrt(this.discriminant));
      this.c2 = (this.negativeRoot * initialValue - initialDerivative) / (this.negativeRoot - this.positiveRoot);
      this.c1 = initialValue - this.c2;
    }
  }

  /**
   * Returns the value of x(t) determined by the differential equation and initial conditions.
   */
  getValue(t) {
    if (this.solutionType === SolutionType.CRITICALLY_DAMPED) {
      assert && assert(this.angularFrequency !== undefined);
      return (this.c1 + this.c2 * t) * Math.exp(-this.angularFrequency * t);
    } else if (this.solutionType === SolutionType.UNDER_DAMPED) {
      assert && assert(this.frequency !== undefined);
      const theta = this.frequency * t;
      return Math.exp(-(this.dampingConstant / 2) * t) * (this.c1 * Math.cos(theta) + this.c2 * Math.sin(theta));
    } else if (this.solutionType === SolutionType.OVER_DAMPED) {
      assert && assert(this.positiveRoot !== undefined);
      assert && assert(this.negativeRoot !== undefined);
      return this.c1 * Math.exp(this.negativeRoot * t) + this.c2 * Math.exp(this.positiveRoot * t);
    } else {
      throw new Error('Unknown solution type?');
    }
  }

  /**
   * Returns the value of x'(t) determined by the differential equation and initial conditions.
   */
  getDerivative(t) {
    if (this.solutionType === SolutionType.CRITICALLY_DAMPED) {
      assert && assert(this.angularFrequency !== undefined);
      return Math.exp(-this.angularFrequency * t) * (this.c2 - this.angularFrequency * (this.c1 + this.c2 * t));
    } else if (this.solutionType === SolutionType.UNDER_DAMPED) {
      assert && assert(this.frequency !== undefined);
      const theta = this.frequency * t;
      const cos = Math.cos(theta);
      const sin = Math.sin(theta);
      const term1 = this.frequency * (this.c2 * cos - this.c1 * sin);
      const term2 = 0.5 * this.dampingConstant * (this.c1 * cos + this.c2 * sin);
      return Math.exp(-0.5 * this.dampingConstant * t) * (term1 - term2);
    } else if (this.solutionType === SolutionType.OVER_DAMPED) {
      assert && assert(this.positiveRoot !== undefined);
      assert && assert(this.negativeRoot !== undefined);
      return this.c1 * this.negativeRoot * Math.exp(this.negativeRoot * t) + this.c2 * this.positiveRoot * Math.exp(this.positiveRoot * t);
    } else {
      throw new Error('Unknown solution type?');
    }
  }
}
js_dot.register('DampedHarmonic', DampedHarmonic);
/* harmony default export */ const js_DampedHarmonic = ((/* unused pure expression or super */ null && (DampedHarmonic)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbiIsIkVudW1lcmF0aW9uVmFsdWUiLCJkb3QiLCJTb2x1dGlvblR5cGUiLCJPVkVSX0RBTVBFRCIsIlVOREVSX0RBTVBFRCIsIkNSSVRJQ0FMTFlfREFNUEVEIiwiVU5LTk9XTiIsImVudW1lcmF0aW9uIiwiRGFtcGVkSGFybW9uaWMiLCJjb25zdHJ1Y3RvciIsImEiLCJiIiwiYyIsImluaXRpYWxWYWx1ZSIsImluaXRpYWxEZXJpdmF0aXZlIiwiYXNzZXJ0IiwiaXNGaW5pdGUiLCJkYW1waW5nQ29uc3RhbnQiLCJhbmd1bGFyRnJlcXVlbmN5U3F1YXJlZCIsImRpc2NyaW1pbmFudCIsInNvbHV0aW9uVHlwZSIsImMxIiwiYzIiLCJNYXRoIiwiYWJzIiwiYW5ndWxhckZyZXF1ZW5jeSIsInNxcnQiLCJmcmVxdWVuY3kiLCJwb3NpdGl2ZVJvb3QiLCJuZWdhdGl2ZVJvb3QiLCJnZXRWYWx1ZSIsInQiLCJ1bmRlZmluZWQiLCJleHAiLCJ0aGV0YSIsImNvcyIsInNpbiIsIkVycm9yIiwiZ2V0RGVyaXZhdGl2ZSIsInRlcm0xIiwidGVybTIiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkRhbXBlZEhhcm1vbmljLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBTb2x2ZXMgZm9yIGEgc3BlY2lmaWMgc29sdXRpb24gb2YgYSBkYW1wZWQgaGFybW9uaWMgb3NjaWxsYXRvclxuICogKGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0hhcm1vbmljX29zY2lsbGF0b3IjRGFtcGVkX2hhcm1vbmljX29zY2lsbGF0b3IpLCBnaXZlbiB0aGUgaW5pdGlhbCB2YWx1ZSBhbmRcbiAqIGRlcml2YXRpdmUuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBFbnVtZXJhdGlvbiBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvRW51bWVyYXRpb24uanMnO1xuaW1wb3J0IEVudW1lcmF0aW9uVmFsdWUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL0VudW1lcmF0aW9uVmFsdWUuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5cbmNsYXNzIFNvbHV0aW9uVHlwZSBleHRlbmRzIEVudW1lcmF0aW9uVmFsdWUge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9WRVJfREFNUEVEID0gbmV3IFNvbHV0aW9uVHlwZSgpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFVOREVSX0RBTVBFRCA9IG5ldyBTb2x1dGlvblR5cGUoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBDUklUSUNBTExZX0RBTVBFRCA9IG5ldyBTb2x1dGlvblR5cGUoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBVTktOT1dOID0gbmV3IFNvbHV0aW9uVHlwZSgpO1xuXG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgZW51bWVyYXRpb24gPSBuZXcgRW51bWVyYXRpb24oIFNvbHV0aW9uVHlwZSApO1xufVxuXG5jbGFzcyBEYW1wZWRIYXJtb25pYyB7XG5cbiAgcHJpdmF0ZSByZWFkb25seSBkYW1waW5nQ29uc3RhbnQ6IG51bWJlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBhbmd1bGFyRnJlcXVlbmN5U3F1YXJlZDogbnVtYmVyO1xuICBwcml2YXRlIHJlYWRvbmx5IGRpc2NyaW1pbmFudDogbnVtYmVyO1xuICBwcml2YXRlIHJlYWRvbmx5IHNvbHV0aW9uVHlwZTogU29sdXRpb25UeXBlO1xuICBwcml2YXRlIHJlYWRvbmx5IGMxOiBudW1iZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgYzI6IG51bWJlcjtcbiAgcHJpdmF0ZSByZWFkb25seSBhbmd1bGFyRnJlcXVlbmN5PzogbnVtYmVyOyAvLyBpZiBjcml0aWNhbGx5IGRhbXBlZFxuICBwcml2YXRlIHJlYWRvbmx5IGZyZXF1ZW5jeT86IG51bWJlcjsgLy8gaWYgdW5kZXItZGFtcGVkXG4gIHByaXZhdGUgcmVhZG9ubHkgcG9zaXRpdmVSb290PzogbnVtYmVyOyAvLyBpZiBvdmVyLWRhbXBlZFxuICBwcml2YXRlIHJlYWRvbmx5IG5lZ2F0aXZlUm9vdD86IG51bWJlcjsgLy8gaWYgb3Zlci1kYW1wZWRcblxuICAvKipcbiAgICogRm9yIHNvbHZpbmcgYXgnJyArIGJ4JyArIGN4ID0gMCB3aXRoIGluaXRpYWwgY29uZGl0aW9ucyB4KDApIGFuZCB4JygwKS5cbiAgICpcbiAgICogQHBhcmFtIGEgLSBDb2VmZmljaWVudCBpbiBmcm9udCBvZiB0aGUgc2Vjb25kIGRlcml2YXRpdmUuXG4gICAqIEBwYXJhbSBiIC0gQ29lZmZpY2llbnQgaW4gZnJvbnQgb2YgdGhlIGZpcnN0IGRlcml2YXRpdmUsIHJlc3BvbnNpYmxlIGZvciB0aGUgYW1vdW50IG9mIGRhbXBpbmcgYXBwbGllZC5cbiAgICogQHBhcmFtIGMgLSBDb2VmZmljaWVudCBpbiBmcm9udCBvZiB0aGUgY3VycmVudCB2YWx1ZSwgcmVzcG9uc2libGUgZm9yIHRoZSBhbW91bnQgb2YgZm9yY2UgdG93YXJkcyBlcXVpbGlicml1bS5cbiAgICogQHBhcmFtIGluaXRpYWxWYWx1ZSAtIFRoZSB2YWx1ZSBvZiB4KDApLCBpLmUuIHRoZSBpbml0aWFsIHBvc2l0aW9uIGF0IHQ9MC5cbiAgICogQHBhcmFtIGluaXRpYWxEZXJpdmF0aXZlIC0gVGhlIHZhbHVlIG9mIHgnKDApLCBpLmUuIHRoZSBpbml0aWFsIHZlbG9jaXR5IGF0IHQ9MDtcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggYTogbnVtYmVyLCBiOiBudW1iZXIsIGM6IG51bWJlciwgaW5pdGlhbFZhbHVlOiBudW1iZXIsIGluaXRpYWxEZXJpdmF0aXZlOiBudW1iZXIgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggaXNGaW5pdGUoIGEgKSAmJiBhICE9PSAwICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggaXNGaW5pdGUoIGIgKSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGlzRmluaXRlKCBjICkgJiYgYyAhPT0gMCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGlzRmluaXRlKCBpbml0aWFsVmFsdWUgKSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGlzRmluaXRlKCBpbml0aWFsRGVyaXZhdGl2ZSApICk7XG5cbiAgICAvLyBXZSdsbCB0cmFuc2Zvcm0gaW50byB0aGUgc2ltcGxlcjogeCcnICsgZGFtcGluZ0NvbnN0YW50IHgnICsgYW5ndWxhckZyZXF1ZW5jeVNxdWFyZWQgeCA9IDBcbiAgICB0aGlzLmRhbXBpbmdDb25zdGFudCA9IGIgLyBhO1xuICAgIHRoaXMuYW5ndWxhckZyZXF1ZW5jeVNxdWFyZWQgPSBjIC8gYTtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuZGFtcGluZ0NvbnN0YW50ID49IDAsICdhIGFuZCBiIHNob3VsZCBzaGFyZSB0aGUgc2FtZSBzaWduJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuYW5ndWxhckZyZXF1ZW5jeVNxdWFyZWQgPiAwLCAnYSBhbmQgYyBzaG91bGQgc2hhcmUgdGhlIHNhbWUgc2lnbicgKTtcblxuICAgIC8vIERldGVybWluZXMgd2hhdCB0eXBlIG9mIHNvbHV0aW9uIGlzIHJlcXVpcmVkLlxuICAgIHRoaXMuZGlzY3JpbWluYW50ID0gdGhpcy5kYW1waW5nQ29uc3RhbnQgKiB0aGlzLmRhbXBpbmdDb25zdGFudCAtIDQgKiB0aGlzLmFuZ3VsYXJGcmVxdWVuY3lTcXVhcmVkO1xuXG4gICAgdGhpcy5zb2x1dGlvblR5cGUgPSBTb2x1dGlvblR5cGUuVU5LTk9XTjsgLy8gd2lsbCBiZSBmaWxsZWQgaW4gYmVsb3dcblxuICAgIC8vIENvbnN0YW50cyB0aGF0IGRldGVybWluZSB3aGF0IGxpbmVhciBjb21iaW5hdGlvbiBvZiBzb2x1dGlvbnMgc2F0aXNmaWVzIHRoZSBpbml0aWFsIGNvbmRpdGlvbnNcbiAgICB0aGlzLmMxID0gMDtcbiAgICB0aGlzLmMyID0gMDtcblxuICAgIGlmICggTWF0aC5hYnMoIHRoaXMuZGlzY3JpbWluYW50ICkgPCAxZS01ICkge1xuICAgICAgdGhpcy5zb2x1dGlvblR5cGUgPSBTb2x1dGlvblR5cGUuQ1JJVElDQUxMWV9EQU1QRUQ7XG5cbiAgICAgIHRoaXMuYW5ndWxhckZyZXF1ZW5jeSA9IE1hdGguc3FydCggdGhpcy5hbmd1bGFyRnJlcXVlbmN5U3F1YXJlZCApO1xuXG4gICAgICB0aGlzLmMxID0gaW5pdGlhbFZhbHVlO1xuICAgICAgdGhpcy5jMiA9IGluaXRpYWxEZXJpdmF0aXZlICsgdGhpcy5hbmd1bGFyRnJlcXVlbmN5ICogaW5pdGlhbFZhbHVlO1xuICAgIH1cbiAgICBlbHNlIGlmICggdGhpcy5kaXNjcmltaW5hbnQgPCAwICkge1xuICAgICAgdGhpcy5zb2x1dGlvblR5cGUgPSBTb2x1dGlvblR5cGUuVU5ERVJfREFNUEVEO1xuXG4gICAgICB0aGlzLmZyZXF1ZW5jeSA9IDAuNSAqIE1hdGguc3FydCggLXRoaXMuZGlzY3JpbWluYW50ICk7XG5cbiAgICAgIHRoaXMuYzEgPSBpbml0aWFsVmFsdWU7XG4gICAgICB0aGlzLmMyID0gKCB0aGlzLmRhbXBpbmdDb25zdGFudCAqIGluaXRpYWxWYWx1ZSApIC8gKCAyICogdGhpcy5mcmVxdWVuY3kgKSArIGluaXRpYWxEZXJpdmF0aXZlIC8gdGhpcy5mcmVxdWVuY3k7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5zb2x1dGlvblR5cGUgPSBTb2x1dGlvblR5cGUuT1ZFUl9EQU1QRUQ7XG5cbiAgICAgIHRoaXMucG9zaXRpdmVSb290ID0gMC41ICogKCAtdGhpcy5kYW1waW5nQ29uc3RhbnQgKyBNYXRoLnNxcnQoIHRoaXMuZGlzY3JpbWluYW50ICkgKTtcbiAgICAgIHRoaXMubmVnYXRpdmVSb290ID0gMC41ICogKCAtdGhpcy5kYW1waW5nQ29uc3RhbnQgLSBNYXRoLnNxcnQoIHRoaXMuZGlzY3JpbWluYW50ICkgKTtcblxuICAgICAgdGhpcy5jMiA9ICggdGhpcy5uZWdhdGl2ZVJvb3QgKiBpbml0aWFsVmFsdWUgLSBpbml0aWFsRGVyaXZhdGl2ZSApIC8gKCB0aGlzLm5lZ2F0aXZlUm9vdCAtIHRoaXMucG9zaXRpdmVSb290ICk7XG4gICAgICB0aGlzLmMxID0gaW5pdGlhbFZhbHVlIC0gdGhpcy5jMjtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdmFsdWUgb2YgeCh0KSBkZXRlcm1pbmVkIGJ5IHRoZSBkaWZmZXJlbnRpYWwgZXF1YXRpb24gYW5kIGluaXRpYWwgY29uZGl0aW9ucy5cbiAgICovXG4gIHB1YmxpYyBnZXRWYWx1ZSggdDogbnVtYmVyICk6IG51bWJlciB7XG4gICAgaWYgKCB0aGlzLnNvbHV0aW9uVHlwZSA9PT0gU29sdXRpb25UeXBlLkNSSVRJQ0FMTFlfREFNUEVEICkge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5hbmd1bGFyRnJlcXVlbmN5ICE9PSB1bmRlZmluZWQgKTtcblxuICAgICAgcmV0dXJuICggdGhpcy5jMSArIHRoaXMuYzIgKiB0ICkgKiBNYXRoLmV4cCggLXRoaXMuYW5ndWxhckZyZXF1ZW5jeSEgKiB0ICk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCB0aGlzLnNvbHV0aW9uVHlwZSA9PT0gU29sdXRpb25UeXBlLlVOREVSX0RBTVBFRCApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuZnJlcXVlbmN5ICE9PSB1bmRlZmluZWQgKTtcblxuICAgICAgY29uc3QgdGhldGEgPSB0aGlzLmZyZXF1ZW5jeSEgKiB0O1xuICAgICAgcmV0dXJuIE1hdGguZXhwKCAtKCB0aGlzLmRhbXBpbmdDb25zdGFudCAvIDIgKSAqIHQgKSAqICggdGhpcy5jMSAqIE1hdGguY29zKCB0aGV0YSApICsgdGhpcy5jMiAqIE1hdGguc2luKCB0aGV0YSApICk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCB0aGlzLnNvbHV0aW9uVHlwZSA9PT0gU29sdXRpb25UeXBlLk9WRVJfREFNUEVEICkge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5wb3NpdGl2ZVJvb3QgIT09IHVuZGVmaW5lZCApO1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5uZWdhdGl2ZVJvb3QgIT09IHVuZGVmaW5lZCApO1xuXG4gICAgICByZXR1cm4gdGhpcy5jMSAqIE1hdGguZXhwKCB0aGlzLm5lZ2F0aXZlUm9vdCEgKiB0ICkgKyB0aGlzLmMyICogTWF0aC5leHAoIHRoaXMucG9zaXRpdmVSb290ISAqIHQgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoICdVbmtub3duIHNvbHV0aW9uIHR5cGU/JyApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB4Jyh0KSBkZXRlcm1pbmVkIGJ5IHRoZSBkaWZmZXJlbnRpYWwgZXF1YXRpb24gYW5kIGluaXRpYWwgY29uZGl0aW9ucy5cbiAgICovXG4gIHB1YmxpYyBnZXREZXJpdmF0aXZlKCB0OiBudW1iZXIgKTogbnVtYmVyIHtcbiAgICBpZiAoIHRoaXMuc29sdXRpb25UeXBlID09PSBTb2x1dGlvblR5cGUuQ1JJVElDQUxMWV9EQU1QRUQgKSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLmFuZ3VsYXJGcmVxdWVuY3kgIT09IHVuZGVmaW5lZCApO1xuXG4gICAgICByZXR1cm4gTWF0aC5leHAoIC10aGlzLmFuZ3VsYXJGcmVxdWVuY3khICogdCApICogKCB0aGlzLmMyIC0gdGhpcy5hbmd1bGFyRnJlcXVlbmN5ISAqICggdGhpcy5jMSArIHRoaXMuYzIgKiB0ICkgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHRoaXMuc29sdXRpb25UeXBlID09PSBTb2x1dGlvblR5cGUuVU5ERVJfREFNUEVEICkge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5mcmVxdWVuY3kgIT09IHVuZGVmaW5lZCApO1xuXG4gICAgICBjb25zdCB0aGV0YSA9IHRoaXMuZnJlcXVlbmN5ISAqIHQ7XG4gICAgICBjb25zdCBjb3MgPSBNYXRoLmNvcyggdGhldGEgKTtcbiAgICAgIGNvbnN0IHNpbiA9IE1hdGguc2luKCB0aGV0YSApO1xuICAgICAgY29uc3QgdGVybTEgPSB0aGlzLmZyZXF1ZW5jeSEgKiAoIHRoaXMuYzIgKiBjb3MgLSB0aGlzLmMxICogc2luICk7XG4gICAgICBjb25zdCB0ZXJtMiA9IDAuNSAqIHRoaXMuZGFtcGluZ0NvbnN0YW50ICogKCB0aGlzLmMxICogY29zICsgdGhpcy5jMiAqIHNpbiApO1xuICAgICAgcmV0dXJuIE1hdGguZXhwKCAtMC41ICogdGhpcy5kYW1waW5nQ29uc3RhbnQgKiB0ICkgKiAoIHRlcm0xIC0gdGVybTIgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHRoaXMuc29sdXRpb25UeXBlID09PSBTb2x1dGlvblR5cGUuT1ZFUl9EQU1QRUQgKSB7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLnBvc2l0aXZlUm9vdCAhPT0gdW5kZWZpbmVkICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLm5lZ2F0aXZlUm9vdCAhPT0gdW5kZWZpbmVkICk7XG5cbiAgICAgIHJldHVybiB0aGlzLmMxICogdGhpcy5uZWdhdGl2ZVJvb3QhICogTWF0aC5leHAoIHRoaXMubmVnYXRpdmVSb290ISAqIHQgKSArIHRoaXMuYzIgKiB0aGlzLnBvc2l0aXZlUm9vdCEgKiBNYXRoLmV4cCggdGhpcy5wb3NpdGl2ZVJvb3QhICogdCApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciggJ1Vua25vd24gc29sdXRpb24gdHlwZT8nICk7XG4gICAgfVxuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ0RhbXBlZEhhcm1vbmljJywgRGFtcGVkSGFybW9uaWMgKTtcblxuZXhwb3J0IGRlZmF1bHQgRGFtcGVkSGFybW9uaWM7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFF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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/DelaunayTriangulation.js
// Copyright 2017-2022, University of Colorado Boulder

/**
 * Handles constrained Delaunay triangulation based on "Sweep-line algorithm for constrained Delaunay triangulation"
 * by Domiter and Zalik (2008), with some details provided by "An efficient sweep-line Delaunay triangulation
 * algorithm" by Zalik (2005).
 *
 * TODO: Second (basin) heuristic not yet implemented.
 * TODO: Constraints not yet implemented.
 * TODO: Check number of triangles/edges/vertices with Euler's Formula
 * TODO: Handle "outside" cases (and changing the front edges) for constrained edges
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */







class DelaunayTriangulation {
  /**
   * @public
   *
   * @param {Array.<Vector2>} points
   * @param {Array.<Array.<number>>} constraints - Pairs of indices into the points that should be treated as
   *                                               constrained edges.
   * @param {Object} [options]
   */
  constructor(points, constraints, options) {
    options = js_merge({}, options);
    let i;

    // @public {Array.<Vector2>}
    this.points = points;

    // @public {Array.<Array.<number>>}
    this.constraints = constraints;

    // @public {Array.<Triangle>}
    this.triangles = [];

    // @public {Array.<Edge>}
    this.edges = [];

    // @public {Array.<Vertex>}
    this.convexHull = [];
    if (points.length === 0) {
      return;
    }

    // @private {Array.<Vertex>}
    this.vertices = points.map((point, index) => {
      assert && assert(point instanceof Vector2 && point.isFinite());
      return new Vertex(point, index);
    });
    for (i = 0; i < this.constraints.length; i++) {
      const constraint = this.constraints[i];
      const firstIndex = constraint[0];
      const secondIndex = constraint[1];
      assert && assert(typeof firstIndex === 'number' && isFinite(firstIndex) && firstIndex % 1 === 0 && firstIndex >= 0 && firstIndex < points.length);
      assert && assert(typeof secondIndex === 'number' && isFinite(secondIndex) && secondIndex % 1 === 0 && secondIndex >= 0 && secondIndex < points.length);
      assert && assert(firstIndex !== secondIndex);
      this.vertices[firstIndex].constrainedVertices.push(this.vertices[secondIndex]);
    }
    this.vertices.sort(DelaunayTriangulation.vertexComparison);
    for (i = 0; i < this.vertices.length; i++) {
      const vertex = this.vertices[i];
      vertex.sortedIndex = i;
      for (let j = vertex.constrainedVertices.length - 1; j >= 0; j--) {
        const otherVertex = vertex.constrainedVertices[j];

        // If the "other" vertex is later in the sweep-line order, it should have the reference to the earlier vertex,
        // not the other way around.
        if (otherVertex.sortedIndex === -1) {
          otherVertex.constrainedVertices.push(vertex);
          vertex.constrainedVertices.splice(j, 1);
        }
      }
    }

    // @private {Vertex}
    this.bottomVertex = this.vertices[0];

    // @private {Array.<Vertex>} - Our initialization will handle our first vertex
    this.remainingVertices = this.vertices.slice(1);
    const bounds = Bounds2.NOTHING.copy();
    for (i = points.length - 1; i >= 0; i--) {
      bounds.addPoint(points[i]);
    }
    const alpha = 0.4;
    // @private {Vertex} - Fake index -1
    this.artificialMinVertex = new Vertex(new Vector2(bounds.minX - bounds.width * alpha, bounds.minY - bounds.height * alpha), -1);
    // @private {Vertex} - Fake index -2
    this.artificialMaxVertex = new Vertex(new Vector2(bounds.maxX + bounds.width * alpha, bounds.minY - bounds.height * alpha), -2);
    this.edges.push(new Edge(this.artificialMinVertex, this.artificialMaxVertex));
    this.edges.push(new Edge(this.artificialMaxVertex, this.bottomVertex));
    this.edges.push(new Edge(this.bottomVertex, this.artificialMinVertex));

    // Set up our first (artificial) triangle.
    this.triangles.push(new Triangle(this.artificialMinVertex, this.artificialMaxVertex, this.bottomVertex, this.edges[1], this.edges[2], this.edges[0]));

    // @private {Edge|null} - The start of our front (the edges at the front of the sweep-line)
    this.firstFrontEdge = this.edges[1];
    this.edges[1].connectAfter(this.edges[2]);

    // @private {Edge} - The start of our hull (the edges at the back, making up the convex hull)
    this.firstHullEdge = this.edges[0];
  }

  /**
   * Moves the triangulation forward by a vertex.
   * @private
   */
  step() {
    // TODO: reverse the array prior to this?
    const vertex = this.remainingVertices.shift();
    const x = vertex.point.x;
    let frontEdge = this.firstFrontEdge;
    while (frontEdge) {
      // TODO: epsilon needed here?
      if (x > frontEdge.endVertex.point.x) {
        const edge1 = new Edge(frontEdge.startVertex, vertex);
        const edge2 = new Edge(vertex, frontEdge.endVertex);
        edge1.connectAfter(edge2);
        this.edges.push(edge1);
        this.edges.push(edge2);
        this.triangles.push(new Triangle(frontEdge.endVertex, frontEdge.startVertex, vertex, edge1, edge2, frontEdge));
        this.reconnectFrontEdges(frontEdge, frontEdge, edge1, edge2);
        this.legalizeEdge(frontEdge);
        this.addHalfPiHeuristic(edge1, edge2);
        this.constrainEdges(vertex, edge1, edge2);
        break;
      } else if (x === frontEdge.endVertex.point.x) {
        const leftOldEdge = frontEdge.nextEdge;
        const rightOldEdge = frontEdge;
        assert && assert(leftOldEdge !== null);
        const middleOldVertex = frontEdge.endVertex;
        const leftVertex = leftOldEdge.endVertex;
        const rightVertex = rightOldEdge.startVertex;
        const leftEdge = new Edge(vertex, leftVertex);
        const rightEdge = new Edge(rightVertex, vertex);
        const middleEdge = new Edge(middleOldVertex, vertex);
        rightEdge.connectAfter(leftEdge);
        this.edges.push(leftEdge);
        this.edges.push(rightEdge);
        this.edges.push(middleEdge);
        this.triangles.push(new Triangle(leftVertex, middleOldVertex, vertex, middleEdge, leftEdge, leftOldEdge));
        this.triangles.push(new Triangle(middleOldVertex, rightVertex, vertex, rightEdge, middleEdge, rightOldEdge));
        this.reconnectFrontEdges(rightOldEdge, leftOldEdge, rightEdge, leftEdge);
        this.legalizeEdge(leftOldEdge);
        this.legalizeEdge(rightOldEdge);
        this.legalizeEdge(middleEdge);
        this.addHalfPiHeuristic(rightEdge, leftEdge);
        this.constrainEdges(vertex, rightEdge, leftEdge);
        break;
      }
      frontEdge = frontEdge.nextEdge;
    }
  }

  /**
   * Builds a triangle between two vertices.
   * @private
   *
   * @param {Edge} firstEdge
   * @param {Edge} secondEdge
   * @param {Vertex} firstSideVertex
   * @param {Vertex} middleVertex
   * @param {Vertex} secondSideVertex
   * @returns {Edge} - The newly created edge
   */
  fillBorderTriangle(firstEdge, secondEdge, firstSideVertex, middleVertex, secondSideVertex) {
    assert && assert(firstEdge instanceof Edge);
    assert && assert(secondEdge instanceof Edge);
    assert && assert(firstSideVertex instanceof Vertex);
    assert && assert(middleVertex instanceof Vertex);
    assert && assert(secondSideVertex instanceof Vertex);
    assert && assert(middleVertex === firstEdge.startVertex || middleVertex === firstEdge.endVertex, 'middleVertex should be in firstEdge');
    assert && assert(middleVertex === secondEdge.startVertex || middleVertex === secondEdge.endVertex, 'middleVertex should be in secondEdge');
    assert && assert(firstSideVertex === firstEdge.startVertex || firstSideVertex === firstEdge.endVertex, 'firstSideVertex should be in firstEdge');
    assert && assert(secondSideVertex === secondEdge.startVertex || secondSideVertex === secondEdge.endVertex, 'secondSideVertex should be in secondEdge');
    const newEdge = new Edge(firstSideVertex, secondSideVertex);
    this.edges.push(newEdge);
    this.triangles.push(new Triangle(secondSideVertex, middleVertex, firstSideVertex, firstEdge, newEdge, secondEdge));
    this.legalizeEdge(firstEdge);
    this.legalizeEdge(secondEdge);
    return newEdge;
  }

  /**
   * Disconnects a section of front edges, and connects a new section.
   * @private
   *
   * Disconnects:
   * <nextEdge> (cut) <oldLeftEdge> ..... <oldRightEdge> (cut) <previousEdge>
   *
   * Connects:
   * <nextEdge> (join) <newLeftEdge> ..... <newRightEdge> (join) <previousEdge>
   *
   * If previousEdge is null, we'll need to set our firstFrontEdge to the newRightEdge.
   *
   * @param {Edge} oldRightEdge
   * @param {Edge} oldLeftEdge
   * @param {Edge} newRightEdge
   * @param {Edge} newLeftEdge
   */
  reconnectFrontEdges(oldRightEdge, oldLeftEdge, newRightEdge, newLeftEdge) {
    const previousEdge = oldRightEdge.previousEdge;
    const nextEdge = oldLeftEdge.nextEdge;
    if (previousEdge) {
      previousEdge.disconnectAfter();
      previousEdge.connectAfter(newRightEdge);
    } else {
      this.firstFrontEdge = newRightEdge;
    }
    if (nextEdge) {
      oldLeftEdge.disconnectAfter();
      newLeftEdge.connectAfter(nextEdge);
    }
  }

  /**
   * Tries to fill in acute angles with triangles after we add a vertex into the front.
   * @private
   *
   * @param {Edge} rightFrontEdge
   * @param {Edge} leftFrontEdge
   */
  addHalfPiHeuristic(rightFrontEdge, leftFrontEdge) {
    assert && assert(rightFrontEdge.endVertex === leftFrontEdge.startVertex);
    const middleVertex = rightFrontEdge.endVertex;
    while (rightFrontEdge.previousEdge && js_Utils.triangleAreaSigned(middleVertex.point, rightFrontEdge.startVertex.point, rightFrontEdge.previousEdge.startVertex.point) > 0 && middleVertex.point.minus(rightFrontEdge.startVertex.point).angleBetween(rightFrontEdge.previousEdge.startVertex.point.minus(rightFrontEdge.startVertex.point)) < Math.PI / 2) {
      const previousEdge = rightFrontEdge.previousEdge;
      const newRightEdge = new Edge(previousEdge.startVertex, middleVertex);
      this.edges.push(newRightEdge);
      this.triangles.push(new Triangle(middleVertex, rightFrontEdge.startVertex, previousEdge.startVertex, previousEdge, newRightEdge, rightFrontEdge));
      this.reconnectFrontEdges(previousEdge, rightFrontEdge, newRightEdge, newRightEdge);
      this.legalizeEdge(previousEdge);
      this.legalizeEdge(rightFrontEdge);
      rightFrontEdge = newRightEdge;
    }
    while (leftFrontEdge.nextEdge && js_Utils.triangleAreaSigned(middleVertex.point, leftFrontEdge.nextEdge.endVertex.point, leftFrontEdge.endVertex.point) > 0 && middleVertex.point.minus(leftFrontEdge.endVertex.point).angleBetween(leftFrontEdge.nextEdge.endVertex.point.minus(leftFrontEdge.endVertex.point)) < Math.PI / 2) {
      const nextEdge = leftFrontEdge.nextEdge;
      const newLeftEdge = new Edge(middleVertex, nextEdge.endVertex);
      this.edges.push(newLeftEdge);
      this.triangles.push(new Triangle(middleVertex, leftFrontEdge.nextEdge.endVertex, leftFrontEdge.endVertex, nextEdge, leftFrontEdge, newLeftEdge));
      this.reconnectFrontEdges(leftFrontEdge, nextEdge, newLeftEdge, newLeftEdge);
      this.legalizeEdge(nextEdge);
      this.legalizeEdge(leftFrontEdge);
      leftFrontEdge = newLeftEdge;
    }
  }

  /**
   * Handles any "edge events" that delete intersecting edges, creating the new edge, and filling in (all only if
   * necessary).
   * @private
   *
   * @param {Vertex} vertex
   * @param {Edge} rightFrontEdge
   * @param {Edge} leftFrontEdge
   */
  constrainEdges(vertex, rightFrontEdge, leftFrontEdge) {
    assert && assert(vertex instanceof Vertex);
    assert && assert(rightFrontEdge instanceof Edge);
    assert && assert(leftFrontEdge instanceof Edge);
    assert && assert(vertex === rightFrontEdge.endVertex);
    assert && assert(vertex === leftFrontEdge.startVertex);
    for (let i = 0; i < vertex.constrainedVertices.length; i++) {
      const bottomVertex = vertex.constrainedVertices[i];

      // Check if it's one of our front edge vertices (if so, bail out, since the edge already exists)
      if (bottomVertex === rightFrontEdge.startVertex || bottomVertex === leftFrontEdge.endVertex) {
        break;
      }
      const leftEdges = [];
      const rightEdges = [];
      let currentTriangle = null;
      let currentEdge = null;
      const trianglesToRemove = [];
      const edgesToRemove = [];
      let outsideRight = DelaunayTriangulation.vertexProduct(vertex, rightFrontEdge.startVertex, bottomVertex) > 0;
      let outsideLeft = DelaunayTriangulation.vertexProduct(vertex, leftFrontEdge.endVertex, bottomVertex) < 0;

      // If we start inside, we need to identify which triangle we're inside of.
      if (!outsideRight && !outsideLeft) {
        assert && assert(rightFrontEdge.triangles.length === 1);
        assert && assert(leftFrontEdge.triangles.length === 1);
        let lastVertex = rightFrontEdge.startVertex;
        let nextVertex;
        currentTriangle = rightFrontEdge.triangles[0];
        // TODO: Triangle operations to make this more readable
        while (DelaunayTriangulation.vertexProduct(vertex, nextVertex = currentTriangle.getEdgeOppositeFromVertex(vertex).getOtherVertex(lastVertex), bottomVertex) < 0) {
          currentTriangle = currentTriangle.getEdgeOppositeFromVertex(lastVertex).getOtherTriangle(currentTriangle);
          lastVertex = nextVertex;
        }

        // If our initial triangle has our vertex and bottomVertex, then bail out (edge already exists)
        if (currentTriangle.hasVertex(bottomVertex)) {
          break;
        }
        trianglesToRemove.push(currentTriangle);
        currentEdge = currentTriangle.getEdgeOppositeFromVertex(vertex);
        edgesToRemove.push(currentEdge);
        leftEdges.push(currentTriangle.getEdgeOppositeFromVertex(lastVertex));
        rightEdges.push(currentTriangle.getEdgeOppositeFromVertex(currentEdge.getOtherVertex(lastVertex)));
        assert && assert(leftEdges[0].getOtherVertex(vertex).point.x < rightEdges[0].getOtherVertex(vertex).point.x);
      }
      while (true) {
        // eslint-disable-line no-constant-condition
        if (outsideRight) {
          // TODO: implement
          break;
        } else if (outsideLeft) {
          // TODO: implement
          break;
        } else {
          if (currentEdge.triangles.length > 1) {
            const nextTriangle = currentEdge.getOtherTriangle(currentTriangle);
            if (nextTriangle.hasVertex(bottomVertex)) {
              // TODO: do things!
              trianglesToRemove.push(nextTriangle);
              leftEdges.push(nextTriangle.getNextEdge(currentEdge));
              rightEdges.push(nextTriangle.getPreviousEdge(currentEdge));
              break;
            } else {
              // If this is the next edge intersected
              let nextEdge;
              if (nextTriangle.aEdge !== currentEdge && nextTriangle.aEdge.intersectsConstrainedEdge(vertex, bottomVertex)) {
                nextEdge = nextTriangle.aEdge;
              } else if (nextTriangle.bEdge !== currentEdge && nextTriangle.bEdge.intersectsConstrainedEdge(vertex, bottomVertex)) {
                nextEdge = nextTriangle.bEdge;
              } else if (nextTriangle.cEdge !== currentEdge && nextTriangle.cEdge.intersectsConstrainedEdge(vertex, bottomVertex)) {
                nextEdge = nextTriangle.cEdge;
              }
              assert && assert(nextEdge);
              if (nextTriangle.getNextEdge(nextEdge) === currentEdge) {
                leftEdges.push(nextTriangle.getPreviousEdge(nextEdge));
              } else {
                rightEdges.push(nextTriangle.getNextEdge(nextEdge));
              }
              currentEdge = nextEdge;
              edgesToRemove.push(currentEdge);
              currentTriangle = nextTriangle;
              trianglesToRemove.push(currentTriangle);
            }
          }
          // No other triangle, exited
          else {
            if (bottomVertex.point.x < vertex.point.x) {
              outsideLeft = true;
            } else {
              outsideRight = true;
            }
          }
        }
      }
      for (let j = 0; j < trianglesToRemove.length; j++) {
        const triangleToRemove = trianglesToRemove[j];
        js_arrayRemove(this.triangles, triangleToRemove);
        triangleToRemove.remove();
      }
      for (let j = 0; j < edgesToRemove.length; j++) {
        js_arrayRemove(this.edges, edgesToRemove[j]);
      }
      const constraintEdge = new Edge(bottomVertex, vertex);
      constraintEdge.isConstrained = true;
      this.edges.push(constraintEdge);
      leftEdges.push(constraintEdge);
      rightEdges.push(constraintEdge);
      rightEdges.reverse(); // Put edges in counterclockwise order

      // TODO: remove this!
      window.triDebug && window.triDebug(this);
      this.triangulatePolygon(leftEdges);
      this.triangulatePolygon(rightEdges);
    }
  }

  /**
   * Creates edges/triangles to triangulate a simple polygon.
   * @private
   *
   * @param {Array.<Edge>} edges - Should be in counterclockwise order
   */
  triangulatePolygon(edges) {
    // TODO: Something more efficient than ear clipping method below
    while (edges.length > 3) {
      for (let k = 0; k < edges.length; k++) {
        const kx = k < edges.length - 1 ? k + 1 : 0;
        assert && assert(edges[k].getSharedVertex(edges[kx]));
      }

      // Check if each triple of vertices is an ear (and if so, remove it)
      for (let i = 0; i < edges.length; i++) {
        // Next index
        const ix = i < edges.length - 1 ? i + 1 : 0;

        // Information about our potential ear
        const edge = edges[i];
        const nextEdge = edges[ix];
        const sharedVertex = edge.getSharedVertex(nextEdge);
        const startVertex = edge.getOtherVertex(sharedVertex);
        const endVertex = nextEdge.getOtherVertex(sharedVertex);
        if (js_Utils.triangleAreaSigned(startVertex.point, sharedVertex.point, endVertex.point) <= 0) {
          continue;
        }

        // Variables for computing barycentric coordinates
        const endDelta = endVertex.point.minus(sharedVertex.point);
        const startDelta = startVertex.point.minus(sharedVertex.point);
        const endMagnitudeSquared = endDelta.dot(endDelta);
        const startEndProduct = endDelta.dot(startDelta);
        const startMagnitudeSquared = startDelta.dot(startDelta);
        const x = endMagnitudeSquared * startMagnitudeSquared - startEndProduct * startEndProduct;

        // See if there are other vertices in our triangle (it wouldn't be an ear if there is another in it)
        let lastVertex = edges[0].getSharedVertex(edges[edges.length - 1]);
        let hasInteriorVertex = false;
        for (let j = 0; j < edges.length; j++) {
          const vertex = edges[j].getOtherVertex(lastVertex);
          if (vertex !== sharedVertex && vertex !== startVertex && vertex !== endVertex) {
            const pointDelta = vertex.point.minus(sharedVertex.point);
            const pointEndProduct = endDelta.dot(pointDelta);
            const pointStartProduct = startDelta.dot(pointDelta);

            // Compute barycentric coordinates
            const u = (startMagnitudeSquared * pointEndProduct - startEndProduct * pointStartProduct) / x;
            const v = (endMagnitudeSquared * pointStartProduct - startEndProduct * pointEndProduct) / x;

            // Test for whether the point is in our triangle
            if (u >= -1e-10 && v >= -1e-10 && u + v < 1 + 1e-10) {
              hasInteriorVertex = true;
              break;
            }
          }
          lastVertex = vertex;
        }

        // If there is no interior vertex, then we reached an ear.
        if (!hasInteriorVertex) {
          const newEdge = new Edge(startVertex, endVertex);
          this.edges.push(newEdge);
          this.triangles.push(new Triangle(startVertex, sharedVertex, endVertex, nextEdge, newEdge, edge));
          if (ix > i) {
            edges.splice(i, 2, newEdge);
          } else {
            edges.splice(i, 1, newEdge);
            edges.splice(ix, 1);
          }

          // TODO: remove this!
          window.triDebug && window.triDebug(this);
        }
      }
    }

    // Fill in the last triangle
    if (edges.length === 3) {
      this.triangles.push(new Triangle(edges[0].getSharedVertex(edges[1]), edges[1].getSharedVertex(edges[2]), edges[0].getSharedVertex(edges[2]), edges[2], edges[0], edges[1]));

      // TODO: remove this!
      window.triDebug && window.triDebug(this);
    }
  }

  /**
   * Should be called when there are no more remaining vertices left to be processed.
   * @private
   */
  finalize() {
    // Accumulate front edges, excluding the first and last.
    const frontEdges = [];
    let frontEdge = this.firstFrontEdge.nextEdge;
    while (frontEdge && frontEdge.nextEdge) {
      frontEdges.push(frontEdge);
      frontEdge = frontEdge.nextEdge;
    }
    const firstFrontEdge = this.firstFrontEdge;
    const lastFrontEdge = frontEdge;
    assert && assert(this.firstFrontEdge.triangles.length === 1);
    assert && assert(lastFrontEdge.triangles.length === 1);

    // Handle adding any triangles not in the convex hull (on the front edge)
    for (let i = 0; i < frontEdges.length - 1; i++) {
      const firstEdge = frontEdges[i];
      const secondEdge = frontEdges[i + 1];
      if (js_Utils.triangleAreaSigned(secondEdge.endVertex.point, firstEdge.endVertex.point, firstEdge.startVertex.point) > 1e-10) {
        const newEdge = this.fillBorderTriangle(firstEdge, secondEdge, firstEdge.startVertex, firstEdge.endVertex, secondEdge.endVertex);
        frontEdges.splice(i, 2, newEdge);
        // start scanning from behind where we were previously (if possible)
        i = Math.max(i - 2, -1);
        // TODO: remove this!
        window.triDebug && window.triDebug(this);
      }
    }

    // Clear out front edge information, no longer needed.
    this.firstFrontEdge = null;

    // Accumulate back edges and items to get rid of
    const backEdges = [];
    const artificialEdges = [firstFrontEdge];
    let currentSplitEdge = firstFrontEdge;
    while (currentSplitEdge !== lastFrontEdge) {
      const nextTriangle = currentSplitEdge.triangles[0];
      nextTriangle.remove();
      js_arrayRemove(this.triangles, nextTriangle);
      const edge = nextTriangle.getNonArtificialEdge();
      if (edge) {
        backEdges.push(edge);
        const sharedVertex = edge.getSharedVertex(currentSplitEdge);
        currentSplitEdge = nextTriangle.getEdgeOppositeFromVertex(sharedVertex);
      }
      // Our min-max-bottomPoint triangle (pivot, no edge to add)
      else {
        assert && assert(currentSplitEdge.startVertex === this.artificialMaxVertex);

        // Remove the "bottom" edge connecting both artificial points
        artificialEdges.push(nextTriangle.getEdgeOppositeFromVertex(currentSplitEdge.endVertex));

        // Pivot
        currentSplitEdge = nextTriangle.getEdgeOppositeFromVertex(currentSplitEdge.startVertex);
      }
      artificialEdges.push(currentSplitEdge);
    }
    for (let i = 0; i < artificialEdges.length; i++) {
      js_arrayRemove(this.edges, artificialEdges[i]);
    }

    // TODO: remove this!
    window.triDebug && window.triDebug(this);

    // Handle adding any triangles not in the convex hull (on the back edge)
    for (let i = 0; i < backEdges.length - 1; i++) {
      const firstEdge = backEdges[i + 1];
      const secondEdge = backEdges[i];
      const sharedVertex = firstEdge.getSharedVertex(secondEdge);
      const firstVertex = firstEdge.getOtherVertex(sharedVertex);
      const secondVertex = secondEdge.getOtherVertex(sharedVertex);
      if (js_Utils.triangleAreaSigned(secondVertex.point, sharedVertex.point, firstVertex.point) > 1e-10) {
        const newEdge = this.fillBorderTriangle(firstEdge, secondEdge, firstVertex, sharedVertex, secondVertex);
        backEdges.splice(i, 2, newEdge);
        // start scanning from behind where we were previously (if possible)
        i = Math.max(i - 2, -1);
        // TODO: remove this!
        window.triDebug && window.triDebug(this);
      }
    }
    for (let i = 0; i < frontEdges.length; i++) {
      this.convexHull.push(frontEdges[i].startVertex);
    }
    this.convexHull.push(frontEdges[frontEdges.length - 1].endVertex);
    for (let i = backEdges.length - 1; i >= 1; i--) {
      this.convexHull.push(backEdges[i].getSharedVertex(backEdges[i - 1]));
    }
  }

  /**
   * Checks an edge to see whether its two adjacent triangles satisfy the delaunay condition (the far point of one
   * triangle should not be contained in the other triangle's circumcircle), and if it is not satisfied, flips the
   * edge so the condition is satisfied.
   * @private
   *
   * @param {Edge} edge
   */
  legalizeEdge(edge) {
    // Checking each edge to see if it isn't in our triangulation anymore (or can't be illegal because it doesn't
    // have multiple triangles) helps a lot.
    if (!_.includes(this.edges, edge) || edge.triangles.length !== 2 || edge.isConstrained) {
      return;
    }
    const triangle1 = edge.triangles[0];
    const triangle2 = edge.triangles[1];
    const farVertex1 = triangle1.getVertexOppositeFromEdge(edge);
    const farVertex2 = triangle2.getVertexOppositeFromEdge(edge);
    if (js_Utils.pointInCircleFromPoints(triangle1.aVertex.point, triangle1.bVertex.point, triangle1.cVertex.point, farVertex2.point) || js_Utils.pointInCircleFromPoints(triangle2.aVertex.point, triangle2.bVertex.point, triangle2.cVertex.point, farVertex1.point)) {
      // TODO: better helper functions for adding/removing triangles (takes care of the edge stuff)
      triangle1.remove();
      triangle2.remove();
      js_arrayRemove(this.triangles, triangle1);
      js_arrayRemove(this.triangles, triangle2);
      js_arrayRemove(this.edges, edge);
      const newEdge = new Edge(farVertex1, farVertex2);
      this.edges.push(newEdge);
      const triangle1Edge1 = triangle2.getEdgeOppositeFromVertex(triangle2.getVertexBefore(farVertex2));
      const triangle1Edge2 = triangle1.getEdgeOppositeFromVertex(triangle1.getVertexAfter(farVertex1));
      const triangle2Edge1 = triangle1.getEdgeOppositeFromVertex(triangle1.getVertexBefore(farVertex1));
      const triangle2Edge2 = triangle2.getEdgeOppositeFromVertex(triangle2.getVertexAfter(farVertex2));

      // Construct the new triangles with the correct orientations
      this.triangles.push(new Triangle(farVertex1, farVertex2, triangle1.getVertexBefore(farVertex1), triangle1Edge1, triangle1Edge2, newEdge));
      this.triangles.push(new Triangle(farVertex2, farVertex1, triangle2.getVertexBefore(farVertex2), triangle2Edge1, triangle2Edge2, newEdge));
      this.legalizeEdge(triangle1Edge1);
      this.legalizeEdge(triangle1Edge2);
      this.legalizeEdge(triangle2Edge1);
      this.legalizeEdge(triangle2Edge2);
    }
  }

  /**
   * Comparison for sorting points by y, then by x.
   * @private
   *
   * TODO: Do we need to reverse the x sort? "If our edge is horizontal, the ending point with smaller x coordinate
   *       is considered as the upper point"?
   *
   * @param {Vertex} a
   * @param {Vertex} b
   * @returns {number}
   */
  static vertexComparison(a, b) {
    assert && assert(a instanceof Vertex);
    assert && assert(b instanceof Vertex);
    a = a.point;
    b = b.point;
    if (a.y < b.y) {
      return -1;
    } else if (a.y > b.y) {
      return 1;
    } else if (a.x < b.x) {
      return -1;
    } else if (a.x > b.x) {
      return 1;
    } else {
      // NOTE: How would the algorithm work if this is the case? Would the comparison ever test the reflexive
      // property?
      return 0;
    }
  }

  /**
   * Returns the cross product of (aVertex-sharedVertex) and (bVertex-sharedVertex)
   * @private
   *
   * @param {Vertex} sharedVertex
   * @param {Vertex} aVertex
   * @param {Vertex} bVertex
   * @returns {number}
   */
  static vertexProduct(sharedVertex, aVertex, bVertex) {
    const aDiff = aVertex.point.minus(sharedVertex.point);
    const bDiff = bVertex.point.minus(sharedVertex.point);
    return aDiff.crossScalar(bDiff);
  }
}
js_dot.register('DelaunayTriangulation', DelaunayTriangulation);
class Vertex {
  /**
   * Vertex (point with an index)
   * @private
   *
   * @param {Vector2} point
   * @param {number} index - Index of the point in the points array
   */
  constructor(point, index) {
    assert && assert(point instanceof Vector2);
    assert && assert(point.isFinite());
    assert && assert(typeof index === 'number');

    // @public {Vector2}
    this.point = point;

    // @public {number}
    this.index = index;

    // @public {number} - Will be set after construction
    this.sortedIndex = -1;

    // @public {Array.<Vertex>} - Vertices with "lower" y values that have constrained edges with this vertex.
    this.constrainedVertices = [];
  }

  /**
   * Returns whether this is an artificial vertex (index less than zero).
   * @public
   *
   * @returns {boolean}
   */
  isArtificial() {
    return this.index < 0;
  }
}
class Edge {
  /**
   * Edge defined by two vertices
   * @private
   *
   * @param {Vertex} startVertex
   * @param {Vertex} endVertex
   */
  constructor(startVertex, endVertex) {
    assert && assert(startVertex instanceof Vertex);
    assert && assert(endVertex instanceof Vertex);
    assert && assert(startVertex !== endVertex, 'Should be different vertices');

    // @public {Vertex}
    this.startVertex = startVertex;
    this.endVertex = endVertex;

    // @public {Array.<Triangle>} - Adjacent triangles to the edge
    this.triangles = [];

    // @public {Edge|null} - Linked list for the front of the sweep-line (or in the back for the convex hull)
    this.nextEdge = null;
    this.previousEdge = null;

    // @public {boolean} - Can be set to note that it was constrained
    this.isConstrained = false;
  }

  /**
   * Returns whether this is an artificial edge (has an artificial vertex)
   * @public
   *
   * @returns {boolean}
   */
  isArtificial() {
    return this.startVertex.isArtificial() || this.endVertex.isArtificial();
  }

  /**
   * Appends the edge to the end of this edge (for our linked list).
   * @public
   *
   * @param {Edge} edge
   */
  connectAfter(edge) {
    assert && assert(edge instanceof Edge);
    assert && assert(this.endVertex === edge.startVertex);
    this.nextEdge = edge;
    edge.previousEdge = this;
  }

  /**
   * @public
   */
  disconnectAfter() {
    this.nextEdge.previousEdge = null;
    this.nextEdge = null;
  }

  /**
   * Adds an adjacent triangle.
   * @public
   *
   * @param {Triangle} triangle
   */
  addTriangle(triangle) {
    assert && assert(triangle instanceof Triangle);
    assert && assert(this.triangles.length <= 1);
    this.triangles.push(triangle);
  }

  /**
   * Removes an adjacent triangle.
   * @public
   *
   * @param {Triangle} triangle
   */
  removeTriangle(triangle) {
    assert && assert(triangle instanceof Triangle);
    assert && assert(_.includes(this.triangles, triangle));
    js_arrayRemove(this.triangles, triangle);
  }

  /**
   * Returns the triangle in common with both edges.
   * @public
   *
   * @param {Edge} otherEdge
   * @returns {Triangle}
   */
  getSharedTriangle(otherEdge) {
    assert && assert(otherEdge instanceof Edge);
    for (let i = 0; i < this.triangles.length; i++) {
      const triangle = this.triangles[i];
      for (let j = 0; j < otherEdge.triangles.length; j++) {
        if (otherEdge.triangles[j] === triangle) {
          return triangle;
        }
      }
    }
    throw new Error('No common triangle');
  }

  /**
   * Returns the vertex in common with both edges.
   * @public
   *
   * @param {Edge} otherEdge
   * @returns {Vertex}
   */
  getSharedVertex(otherEdge) {
    assert && assert(otherEdge instanceof Edge);
    if (this.startVertex === otherEdge.startVertex || this.startVertex === otherEdge.endVertex) {
      return this.startVertex;
    } else {
      assert && assert(this.endVertex === otherEdge.startVertex || this.endVertex === otherEdge.endVertex);
      return this.endVertex;
    }
  }

  /**
   * Returns the other vertex of the edge.
   * @public
   *
   * @param {Vertex} vertex
   * @returns {Vertex}
   */
  getOtherVertex(vertex) {
    assert && assert(vertex instanceof Vertex);
    assert && assert(vertex === this.startVertex || vertex === this.endVertex);
    if (vertex === this.startVertex) {
      return this.endVertex;
    } else {
      return this.startVertex;
    }
  }

  /**
   * Returns the other triangle associated with this edge (if there are two).
   * @public
   *
   * @param {Triangle} triangle
   * @returns {Triangle}
   */
  getOtherTriangle(triangle) {
    assert && assert(triangle instanceof Triangle);
    assert && assert(this.triangles.length === 2);
    if (this.triangles[0] === triangle) {
      return this.triangles[1];
    } else {
      return this.triangles[0];
    }
  }

  /**
   * Returns whether the line segment defined between the vertex and bottomVertex intersect this edge.
   * @public
   *
   * @param {Vertex} vertex
   * @param {Vertex} bottomVertex
   * @returns {boolean}
   */
  intersectsConstrainedEdge(vertex, bottomVertex) {
    return js_Utils.lineSegmentIntersection(vertex.point.x, vertex.point.y, bottomVertex.point.x, bottomVertex.point.y, this.startVertex.point.x, this.startVertex.point.y, this.endVertex.point.x, this.endVertex.point.y);
  }
}
class Triangle {
  /**
   * Triangle defined by three vertices (with edges)
   * @private
   *
   * @param {Vertex} aVertex
   * @param {Vertex} bVertex
   * @param {Vertex} cVertex
   * @param {Edge} aEdge - Edge opposite the 'a' vertex
   * @param {Edge} bEdge - Edge opposite the 'b' vertex
   * @param {Edge} cEdge - Edge opposite the 'c' vertex
   */
  constructor(aVertex, bVertex, cVertex, aEdge, bEdge, cEdge) {
    // Type checks
    assert && assert(aVertex instanceof Vertex);
    assert && assert(bVertex instanceof Vertex);
    assert && assert(cVertex instanceof Vertex);
    assert && assert(aEdge instanceof Edge);
    assert && assert(bEdge instanceof Edge);
    assert && assert(cEdge instanceof Edge);

    // Ensure each vertex is NOT in the opposite edge
    assert && assert(aVertex !== aEdge.startVertex && aVertex !== aEdge.endVertex, 'Should be an opposite edge');
    assert && assert(bVertex !== bEdge.startVertex && bVertex !== bEdge.endVertex, 'Should be an opposite edge');
    assert && assert(cVertex !== cEdge.startVertex && cVertex !== cEdge.endVertex, 'Should be an opposite edge');

    // Ensure each vertex IS in its adjacent edges
    assert && assert(aVertex === bEdge.startVertex || aVertex === bEdge.endVertex, 'aVertex should be in bEdge');
    assert && assert(aVertex === cEdge.startVertex || aVertex === cEdge.endVertex, 'aVertex should be in cEdge');
    assert && assert(bVertex === aEdge.startVertex || bVertex === aEdge.endVertex, 'bVertex should be in aEdge');
    assert && assert(bVertex === cEdge.startVertex || bVertex === cEdge.endVertex, 'bVertex should be in cEdge');
    assert && assert(cVertex === aEdge.startVertex || cVertex === aEdge.endVertex, 'cVertex should be in aEdge');
    assert && assert(cVertex === bEdge.startVertex || cVertex === bEdge.endVertex, 'cVertex should be in bEdge');
    assert && assert(js_Utils.triangleAreaSigned(aVertex.point, bVertex.point, cVertex.point) > 0, 'Should be counterclockwise');

    // @public {Vertex}
    this.aVertex = aVertex;
    this.bVertex = bVertex;
    this.cVertex = cVertex;

    // @public {Edge}
    this.aEdge = aEdge;
    this.bEdge = bEdge;
    this.cEdge = cEdge;
    this.aEdge.addTriangle(this);
    this.bEdge.addTriangle(this);
    this.cEdge.addTriangle(this);
  }

  /**
   * Returns whether the vertex is one in the triangle.
   * @public
   *
   * @param {Vertex} vertex
   * @returns {boolean}
   */
  hasVertex(vertex) {
    return this.aVertex === vertex || this.bVertex === vertex || this.cVertex === vertex;
  }

  /**
   * Returns the vertex that is opposite from the given edge.
   * @public
   *
   * @param {Edge} edge
   * @returns {Vertex}
   */
  getVertexOppositeFromEdge(edge) {
    assert && assert(edge instanceof Edge);
    assert && assert(edge === this.aEdge || edge === this.bEdge || edge === this.cEdge, 'Should be an edge that is part of this triangle');
    if (edge === this.aEdge) {
      return this.aVertex;
    } else if (edge === this.bEdge) {
      return this.bVertex;
    } else {
      return this.cVertex;
    }
  }

  /**
   * Returns the edge that is opposite from the given vertex.
   * @public
   *
   * @param {Vertex} vertex
   * @returns {Edge}
   */
  getEdgeOppositeFromVertex(vertex) {
    assert && assert(vertex instanceof Vertex);
    assert && assert(vertex === this.aVertex || vertex === this.bVertex || vertex === this.cVertex, 'Should be a vertex that is part of this triangle');
    if (vertex === this.aVertex) {
      return this.aEdge;
    } else if (vertex === this.bVertex) {
      return this.bEdge;
    } else {
      return this.cEdge;
    }
  }

  /**
   * Returns the vertex that is just before the given vertex (in counterclockwise order).
   * @public
   *
   * @param {Vertex} vertex
   * @returns {Vertex}
   */
  getVertexBefore(vertex) {
    assert && assert(vertex instanceof Vertex);
    assert && assert(vertex === this.aVertex || vertex === this.bVertex || vertex === this.cVertex);
    if (vertex === this.aVertex) {
      return this.cVertex;
    } else if (vertex === this.bVertex) {
      return this.aVertex;
    } else {
      return this.bVertex;
    }
  }

  /**
   * Returns the vertex that is just after the given vertex (in counterclockwise order).
   * @public
   *
   * @param {Vertex} vertex
   * @returns {Vertex}
   */
  getVertexAfter(vertex) {
    assert && assert(vertex instanceof Vertex);
    assert && assert(vertex === this.aVertex || vertex === this.bVertex || vertex === this.cVertex);
    if (vertex === this.aVertex) {
      return this.bVertex;
    } else if (vertex === this.bVertex) {
      return this.cVertex;
    } else {
      return this.aVertex;
    }
  }

  /**
   * Returns the one non-artificial edge in the triangle (assuming it exists).
   * @public
   *
   * @returns {Edge|null}
   */
  getNonArtificialEdge() {
    assert && assert(this.aEdge.isArtificial() && this.bEdge.isArtificial() && !this.cEdge.isArtificial() || this.aEdge.isArtificial() && !this.bEdge.isArtificial() && this.cEdge.isArtificial() || !this.aEdge.isArtificial() && this.bEdge.isArtificial() && this.cEdge.isArtificial() || this.aEdge.isArtificial() && this.bEdge.isArtificial() && this.cEdge.isArtificial(), 'At most one edge should be non-artificial');
    if (!this.aEdge.isArtificial()) {
      return this.aEdge;
    } else if (!this.bEdge.isArtificial()) {
      return this.bEdge;
    } else if (!this.cEdge.isArtificial()) {
      return this.cEdge;
    } else {
      return null;
    }
  }

  /**
   * Returns the next edge (counterclockwise).
   * @public
   *
   * @param {Edge} edge
   * @returns {Edge}
   */
  getNextEdge(edge) {
    assert && assert(edge === this.aEdge || edge === this.bEdge || edge === this.cEdge);
    if (this.aEdge === edge) {
      return this.bEdge;
    }
    if (this.bEdge === edge) {
      return this.cEdge;
    }
    if (this.cEdge === edge) {
      return this.aEdge;
    }
    throw new Error('illegal edge');
  }

  /**
   * Returns the previous edge (clockwise).
   * @public
   *
   * @param {Edge} edge
   * @returns {Edge}
   */
  getPreviousEdge(edge) {
    assert && assert(edge === this.aEdge || edge === this.bEdge || edge === this.cEdge);
    if (this.aEdge === edge) {
      return this.cEdge;
    }
    if (this.bEdge === edge) {
      return this.aEdge;
    }
    if (this.cEdge === edge) {
      return this.bEdge;
    }
    throw new Error('illegal edge');
  }

  /**
   * Returns whether this is an artificial triangle (has an artificial vertex)
   * @public
   *
   * @returns {boolean}
   */
  isArtificial() {
    return this.aVertex.isArtificial() || this.bVertex.isArtificial() || this.cVertex.isArtificial();
  }

  /**
   * @public
   */
  remove() {
    this.aEdge.removeTriangle(this);
    this.bEdge.removeTriangle(this);
    this.cEdge.removeTriangle(this);
  }
}
/* harmony default export */ const js_DelaunayTriangulation = ((/* unused pure expression or super */ null && (DelaunayTriangulation)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhcnJheVJlbW92ZSIsIm1lcmdlIiwiQm91bmRzMiIsImRvdCIsIlV0aWxzIiwiVmVjdG9yMiIsIkRlbGF1bmF5VHJpYW5ndWxhdGlvbiIsImNvbnN0cnVjdG9yIiwicG9pbnRzIiwiY29uc3RyYWludHMiLCJvcHRpb25zIiwiaSIsInRyaWFuZ2xlcyIsImVkZ2VzIiwiY29udmV4SHVsbCIsImxlbmd0aCIsInZlcnRpY2VzIiwibWFwIiwicG9pbnQiLCJpbmRleCIsImFzc2VydCIsImlzRmluaXRlIiwiVmVydGV4IiwiY29uc3RyYWludCIsImZpcnN0SW5kZXgiLCJzZWNvbmRJbmRleCIsImNvbnN0cmFpbmVkVmVydGljZXMiLCJwdXNoIiwic29ydCIsInZlcnRleENvbXBhcmlzb24iLCJ2ZXJ0ZXgiLCJzb3J0ZWRJbmRleCIsImoiLCJvdGhlclZlcnRleCIsInNwbGljZSIsImJvdHRvbVZlcnRleCIsInJlbWFpbmluZ1ZlcnRpY2VzIiwic2xpY2UiLCJib3VuZHMiLCJOT1RISU5HIiwiY29weSIsImFkZFBvaW50IiwiYWxwaGEiLCJhcnRpZmljaWFsTWluVmVydGV4IiwibWluWCIsIndpZHRoIiwibWluWSIsImhlaWdodCIsImFydGlmaWNpYWxNYXhWZXJ0ZXgiLCJtYXhYIiwiRWRnZSIsIlRyaWFuZ2xlIiwiZmlyc3RGcm9udEVkZ2UiLCJjb25uZWN0QWZ0ZXIiLCJmaXJzdEh1bGxFZGdlIiwic3RlcCIsInNoaWZ0IiwieCIsImZyb250RWRnZSIsImVuZFZlcnRleCIsImVkZ2UxIiwic3RhcnRWZXJ0ZXgiLCJlZGdlMiIsInJlY29ubmVjdEZyb250RWRnZXMiLCJsZWdhbGl6ZUVkZ2UiLCJhZGRIYWxmUGlIZXVyaXN0aWMiLCJjb25zdHJhaW5FZGdlcyIsImxlZnRPbGRFZGdlIiwibmV4dEVkZ2UiLCJyaWdodE9sZEVkZ2UiLCJtaWRkbGVPbGRWZXJ0ZXgiLCJsZWZ0VmVydGV4IiwicmlnaHRWZXJ0ZXgiLCJsZWZ0RWRnZSIsInJpZ2h0RWRnZSIsIm1pZGRsZUVkZ2UiLCJmaWxsQm9yZGVyVHJpYW5nbGUiLCJmaXJzdEVkZ2UiLCJzZWNvbmRFZGdlIiwiZmlyc3RTaWRlVmVydGV4IiwibWlkZGxlVmVydGV4Iiwic2Vjb25kU2lkZVZlcnRleCIsIm5ld0VkZ2UiLCJvbGRSaWdodEVkZ2UiLCJvbGRMZWZ0RWRnZSIsIm5ld1JpZ2h0RWRnZSIsIm5ld0xlZnRFZGdlIiwicHJldmlvdXNFZGdlIiwiZGlzY29ubmVjdEFmdGVyIiwicmlnaHRGcm9udEVkZ2UiLCJsZWZ0RnJvbnRFZGdlIiwidHJpYW5nbGVBcmVhU2lnbmVkIiwibWludXMiLCJhbmdsZUJldHdlZW4iLCJNYXRoIiwiUEkiLCJsZWZ0RWRnZXMiLCJyaWdodEVkZ2VzIiwiY3VycmVudFRyaWFuZ2xlIiwiY3VycmVudEVkZ2UiLCJ0cmlhbmdsZXNUb1JlbW92ZSIsImVkZ2VzVG9SZW1vdmUiLCJvdXRzaWRlUmlnaHQiLCJ2ZXJ0ZXhQcm9kdWN0Iiwib3V0c2lkZUxlZnQiLCJsYXN0VmVydGV4IiwibmV4dFZlcnRleCIsImdldEVkZ2VPcHBvc2l0ZUZyb21WZXJ0ZXgiLCJnZXRPdGhlclZlcnRleCIsImdldE90aGVyVHJpYW5nbGUiLCJoYXNWZXJ0ZXgiLCJuZXh0VHJpYW5nbGUiLCJnZXROZXh0RWRnZSIsImdldFByZXZpb3VzRWRnZSIsImFFZGdlIiwiaW50ZXJzZWN0c0NvbnN0cmFpbmVkRWRnZSIsImJFZGdlIiwiY0VkZ2UiLCJ0cmlhbmdsZVRvUmVtb3ZlIiwicmVtb3ZlIiwiY29uc3RyYWludEVkZ2UiLCJpc0NvbnN0cmFpbmVkIiwicmV2ZXJzZSIsIndpbmRvdyIsInRyaURlYnVnIiwidHJpYW5ndWxhdGVQb2x5Z29uIiwiayIsImt4IiwiZ2V0U2hhcmVkVmVydGV4IiwiaXgiLCJlZGdlIiwic2hhcmVkVmVydGV4IiwiZW5kRGVsdGEiLCJzdGFydERlbHRhIiwiZW5kTWFnbml0dWRlU3F1YXJlZCIsInN0YXJ0RW5kUHJvZHVjdCIsInN0YXJ0TWFnbml0dWRlU3F1YXJlZCIsImhhc0ludGVyaW9yVmVydGV4IiwicG9pbnREZWx0YSIsInBvaW50RW5kUHJvZHVjdCIsInBvaW50U3RhcnRQcm9kdWN0IiwidSIsInYiLCJmaW5hbGl6ZSIsImZyb250RWRnZXMiLCJsYXN0RnJvbnRFZGdlIiwibWF4IiwiYmFja0VkZ2VzIiwiYXJ0aWZpY2lhbEVkZ2VzIiwiY3VycmVudFNwbGl0RWRnZSIsImdldE5vbkFydGlmaWNpYWxFZGdlIiwiZmlyc3RWZXJ0ZXgiLCJzZWNvbmRWZXJ0ZXgiLCJfIiwiaW5jbHVkZXMiLCJ0cmlhbmdsZTEiLCJ0cmlhbmdsZTIiLCJmYXJWZXJ0ZXgxIiwiZ2V0VmVydGV4T3Bwb3NpdGVGcm9tRWRnZSIsImZhclZlcnRleDIiLCJwb2ludEluQ2lyY2xlRnJvbVBvaW50cyIsImFWZXJ0ZXgiLCJiVmVydGV4IiwiY1ZlcnRleCIsInRyaWFuZ2xlMUVkZ2UxIiwiZ2V0VmVydGV4QmVmb3JlIiwidHJpYW5nbGUxRWRnZTIiLCJnZXRWZXJ0ZXhBZnRlciIsInRyaWFuZ2xlMkVkZ2UxIiwidHJpYW5nbGUyRWRnZTIiLCJhIiwiYiIsInkiLCJhRGlmZiIsImJEaWZmIiwiY3Jvc3NTY2FsYXIiLCJyZWdpc3RlciIsImlzQXJ0aWZpY2lhbCIsImFkZFRyaWFuZ2xlIiwidHJpYW5nbGUiLCJyZW1vdmVUcmlhbmdsZSIsImdldFNoYXJlZFRyaWFuZ2xlIiwib3RoZXJFZGdlIiwiRXJyb3IiLCJsaW5lU2VnbWVudEludGVyc2VjdGlvbiJdLCJzb3VyY2VzIjpbIkRlbGF1bmF5VHJpYW5ndWxhdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxNy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBIYW5kbGVzIGNvbnN0cmFpbmVkIERlbGF1bmF5IHRyaWFuZ3VsYXRpb24gYmFzZWQgb24gXCJTd2VlcC1saW5lIGFsZ29yaXRobSBmb3IgY29uc3RyYWluZWQgRGVsYXVuYXkgdHJpYW5ndWxhdGlvblwiXG4gKiBieSBEb21pdGVyIGFuZCBaYWxpayAoMjAwOCksIHdpdGggc29tZSBkZXRhaWxzIHByb3ZpZGVkIGJ5IFwiQW4gZWZmaWNpZW50IHN3ZWVwLWxpbmUgRGVsYXVuYXkgdHJpYW5ndWxhdGlvblxuICogYWxnb3JpdGhtXCIgYnkgWmFsaWsgKDIwMDUpLlxuICpcbiAqIFRPRE86IFNlY29uZCAoYmFzaW4pIGhldXJpc3RpYyBub3QgeWV0IGltcGxlbWVudGVkLlxuICogVE9ETzogQ29uc3RyYWludHMgbm90IHlldCBpbXBsZW1lbnRlZC5cbiAqIFRPRE86IENoZWNrIG51bWJlciBvZiB0cmlhbmdsZXMvZWRnZXMvdmVydGljZXMgd2l0aCBFdWxlcidzIEZvcm11bGFcbiAqIFRPRE86IEhhbmRsZSBcIm91dHNpZGVcIiBjYXNlcyAoYW5kIGNoYW5naW5nIHRoZSBmcm9udCBlZGdlcykgZm9yIGNvbnN0cmFpbmVkIGVkZ2VzXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBhcnJheVJlbW92ZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvYXJyYXlSZW1vdmUuanMnO1xuaW1wb3J0IG1lcmdlIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9tZXJnZS5qcyc7XG5pbXBvcnQgQm91bmRzMiBmcm9tICcuL0JvdW5kczIuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscy5qcyc7XG5pbXBvcnQgVmVjdG9yMiBmcm9tICcuL1ZlY3RvcjIuanMnO1xuXG5jbGFzcyBEZWxhdW5heVRyaWFuZ3VsYXRpb24ge1xuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxWZWN0b3IyPn0gcG9pbnRzXG4gICAqIEBwYXJhbSB7QXJyYXkuPEFycmF5LjxudW1iZXI+Pn0gY29uc3RyYWludHMgLSBQYWlycyBvZiBpbmRpY2VzIGludG8gdGhlIHBvaW50cyB0aGF0IHNob3VsZCBiZSB0cmVhdGVkIGFzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdHJhaW5lZCBlZGdlcy5cbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKi9cbiAgY29uc3RydWN0b3IoIHBvaW50cywgY29uc3RyYWludHMsIG9wdGlvbnMgKSB7XG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7fSwgb3B0aW9ucyApO1xuXG4gICAgbGV0IGk7XG5cbiAgICAvLyBAcHVibGljIHtBcnJheS48VmVjdG9yMj59XG4gICAgdGhpcy5wb2ludHMgPSBwb2ludHM7XG5cbiAgICAvLyBAcHVibGljIHtBcnJheS48QXJyYXkuPG51bWJlcj4+fVxuICAgIHRoaXMuY29uc3RyYWludHMgPSBjb25zdHJhaW50cztcblxuICAgIC8vIEBwdWJsaWMge0FycmF5LjxUcmlhbmdsZT59XG4gICAgdGhpcy50cmlhbmdsZXMgPSBbXTtcblxuICAgIC8vIEBwdWJsaWMge0FycmF5LjxFZGdlPn1cbiAgICB0aGlzLmVkZ2VzID0gW107XG5cbiAgICAvLyBAcHVibGljIHtBcnJheS48VmVydGV4Pn1cbiAgICB0aGlzLmNvbnZleEh1bGwgPSBbXTtcblxuICAgIGlmICggcG9pbnRzLmxlbmd0aCA9PT0gMCApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBAcHJpdmF0ZSB7QXJyYXkuPFZlcnRleD59XG4gICAgdGhpcy52ZXJ0aWNlcyA9IHBvaW50cy5tYXAoICggcG9pbnQsIGluZGV4ICkgPT4ge1xuICAgICAgYXNzZXJ0ICYmIGFzc2VydCggcG9pbnQgaW5zdGFuY2VvZiBWZWN0b3IyICYmIHBvaW50LmlzRmluaXRlKCkgKTtcblxuICAgICAgcmV0dXJuIG5ldyBWZXJ0ZXgoIHBvaW50LCBpbmRleCApO1xuICAgIH0gKTtcblxuICAgIGZvciAoIGkgPSAwOyBpIDwgdGhpcy5jb25zdHJhaW50cy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGNvbnN0IGNvbnN0cmFpbnQgPSB0aGlzLmNvbnN0cmFpbnRzWyBpIF07XG4gICAgICBjb25zdCBmaXJzdEluZGV4ID0gY29uc3RyYWludFsgMCBdO1xuICAgICAgY29uc3Qgc2Vjb25kSW5kZXggPSBjb25zdHJhaW50WyAxIF07XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlb2YgZmlyc3RJbmRleCA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUoIGZpcnN0SW5kZXggKSAmJiBmaXJzdEluZGV4ICUgMSA9PT0gMCAmJiBmaXJzdEluZGV4ID49IDAgJiYgZmlyc3RJbmRleCA8IHBvaW50cy5sZW5ndGggKTtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHR5cGVvZiBzZWNvbmRJbmRleCA9PT0gJ251bWJlcicgJiYgaXNGaW5pdGUoIHNlY29uZEluZGV4ICkgJiYgc2Vjb25kSW5kZXggJSAxID09PSAwICYmIHNlY29uZEluZGV4ID49IDAgJiYgc2Vjb25kSW5kZXggPCBwb2ludHMubGVuZ3RoICk7XG4gICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmaXJzdEluZGV4ICE9PSBzZWNvbmRJbmRleCApO1xuXG4gICAgICB0aGlzLnZlcnRpY2VzWyBmaXJzdEluZGV4IF0uY29uc3RyYWluZWRWZXJ0aWNlcy5wdXNoKCB0aGlzLnZlcnRpY2VzWyBzZWNvbmRJbmRleCBdICk7XG4gICAgfVxuXG4gICAgdGhpcy52ZXJ0aWNlcy5zb3J0KCBEZWxhdW5heVRyaWFuZ3VsYXRpb24udmVydGV4Q29tcGFyaXNvbiApO1xuXG4gICAgZm9yICggaSA9IDA7IGkgPCB0aGlzLnZlcnRpY2VzLmxlbmd0aDsgaSsrICkge1xuICAgICAgY29uc3QgdmVydGV4ID0gdGhpcy52ZXJ0aWNlc1sgaSBdO1xuICAgICAgdmVydGV4LnNvcnRlZEluZGV4ID0gaTtcbiAgICAgIGZvciAoIGxldCBqID0gdmVydGV4LmNvbnN0cmFpbmVkVmVydGljZXMubGVuZ3RoIC0gMTsgaiA+PSAwOyBqLS0gKSB7XG4gICAgICAgIGNvbnN0IG90aGVyVmVydGV4ID0gdmVydGV4LmNvbnN0cmFpbmVkVmVydGljZXNbIGogXTtcblxuICAgICAgICAvLyBJZiB0aGUgXCJvdGhlclwiIHZlcnRleCBpcyBsYXRlciBpbiB0aGUgc3dlZXAtbGluZSBvcmRlciwgaXQgc2hvdWxkIGhhdmUgdGhlIHJlZmVyZW5jZSB0byB0aGUgZWFybGllciB2ZXJ0ZXgsXG4gICAgICAgIC8vIG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC5cbiAgICAgICAgaWYgKCBvdGhlclZlcnRleC5zb3J0ZWRJbmRleCA9PT0gLTEgKSB7XG4gICAgICAgICAgb3RoZXJWZXJ0ZXguY29uc3RyYWluZWRWZXJ0aWNlcy5wdXNoKCB2ZXJ0ZXggKTtcbiAgICAgICAgICB2ZXJ0ZXguY29uc3RyYWluZWRWZXJ0aWNlcy5zcGxpY2UoIGosIDEgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEBwcml2YXRlIHtWZXJ0ZXh9XG4gICAgdGhpcy5ib3R0b21WZXJ0ZXggPSB0aGlzLnZlcnRpY2VzWyAwIF07XG5cbiAgICAvLyBAcHJpdmF0ZSB7QXJyYXkuPFZlcnRleD59IC0gT3VyIGluaXRpYWxpemF0aW9uIHdpbGwgaGFuZGxlIG91ciBmaXJzdCB2ZXJ0ZXhcbiAgICB0aGlzLnJlbWFpbmluZ1ZlcnRpY2VzID0gdGhpcy52ZXJ0aWNlcy5zbGljZSggMSApO1xuXG4gICAgY29uc3QgYm91bmRzID0gQm91bmRzMi5OT1RISU5HLmNvcHkoKTtcbiAgICBmb3IgKCBpID0gcG9pbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tICkge1xuICAgICAgYm91bmRzLmFkZFBvaW50KCBwb2ludHNbIGkgXSApO1xuICAgIH1cblxuICAgIGNvbnN0IGFscGhhID0gMC40O1xuICAgIC8vIEBwcml2YXRlIHtWZXJ0ZXh9IC0gRmFrZSBpbmRleCAtMVxuICAgIHRoaXMuYXJ0aWZpY2lhbE1pblZlcnRleCA9IG5ldyBWZXJ0ZXgoIG5ldyBWZWN0b3IyKCBib3VuZHMubWluWCAtIGJvdW5kcy53aWR0aCAqIGFscGhhLCBib3VuZHMubWluWSAtIGJvdW5kcy5oZWlnaHQgKiBhbHBoYSApLCAtMSApO1xuICAgIC8vIEBwcml2YXRlIHtWZXJ0ZXh9IC0gRmFrZSBpbmRleCAtMlxuICAgIHRoaXMuYXJ0aWZpY2lhbE1heFZlcnRleCA9IG5ldyBWZXJ0ZXgoIG5ldyBWZWN0b3IyKCBib3VuZHMubWF4WCArIGJvdW5kcy53aWR0aCAqIGFscGhhLCBib3VuZHMubWluWSAtIGJvdW5kcy5oZWlnaHQgKiBhbHBoYSApLCAtMiApO1xuXG4gICAgdGhpcy5lZGdlcy5wdXNoKCBuZXcgRWRnZSggdGhpcy5hcnRpZmljaWFsTWluVmVydGV4LCB0aGlzLmFydGlmaWNpYWxNYXhWZXJ0ZXggKSApO1xuICAgIHRoaXMuZWRnZXMucHVzaCggbmV3IEVkZ2UoIHRoaXMuYXJ0aWZpY2lhbE1heFZlcnRleCwgdGhpcy5ib3R0b21WZXJ0ZXggKSApO1xuICAgIHRoaXMuZWRnZXMucHVzaCggbmV3IEVkZ2UoIHRoaXMuYm90dG9tVmVydGV4LCB0aGlzLmFydGlmaWNpYWxNaW5WZXJ0ZXggKSApO1xuXG4gICAgLy8gU2V0IHVwIG91ciBmaXJzdCAoYXJ0aWZpY2lhbCkgdHJpYW5nbGUuXG4gICAgdGhpcy50cmlhbmdsZXMucHVzaCggbmV3IFRyaWFuZ2xlKCB0aGlzLmFydGlmaWNpYWxNaW5WZXJ0ZXgsIHRoaXMuYXJ0aWZpY2lhbE1heFZlcnRleCwgdGhpcy5ib3R0b21WZXJ0ZXgsXG4gICAgICB0aGlzLmVkZ2VzWyAxIF0sIHRoaXMuZWRnZXNbIDIgXSwgdGhpcy5lZGdlc1sgMCBdICkgKTtcblxuICAgIC8vIEBwcml2YXRlIHtFZGdlfG51bGx9IC0gVGhlIHN0YXJ0IG9mIG91ciBmcm9udCAodGhlIGVkZ2VzIGF0IHRoZSBmcm9udCBvZiB0aGUgc3dlZXAtbGluZSlcbiAgICB0aGlzLmZpcnN0RnJvbnRFZGdlID0gdGhpcy5lZGdlc1sgMSBdO1xuICAgIHRoaXMuZWRnZXNbIDEgXS5jb25uZWN0QWZ0ZXIoIHRoaXMuZWRnZXNbIDIgXSApO1xuXG4gICAgLy8gQHByaXZhdGUge0VkZ2V9IC0gVGhlIHN0YXJ0IG9mIG91ciBodWxsICh0aGUgZWRnZXMgYXQgdGhlIGJhY2ssIG1ha2luZyB1cCB0aGUgY29udmV4IGh1bGwpXG4gICAgdGhpcy5maXJzdEh1bGxFZGdlID0gdGhpcy5lZGdlc1sgMCBdO1xuICB9XG5cbiAgLyoqXG4gICAqIE1vdmVzIHRoZSB0cmlhbmd1bGF0aW9uIGZvcndhcmQgYnkgYSB2ZXJ0ZXguXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzdGVwKCkge1xuICAgIC8vIFRPRE86IHJldmVyc2UgdGhlIGFycmF5IHByaW9yIHRvIHRoaXM/XG4gICAgY29uc3QgdmVydGV4ID0gdGhpcy5yZW1haW5pbmdWZXJ0aWNlcy5zaGlmdCgpO1xuXG4gICAgY29uc3QgeCA9IHZlcnRleC5wb2ludC54O1xuXG4gICAgbGV0IGZyb250RWRnZSA9IHRoaXMuZmlyc3RGcm9udEVkZ2U7XG4gICAgd2hpbGUgKCBmcm9udEVkZ2UgKSB7XG4gICAgICAvLyBUT0RPOiBlcHNpbG9uIG5lZWRlZCBoZXJlP1xuICAgICAgaWYgKCB4ID4gZnJvbnRFZGdlLmVuZFZlcnRleC5wb2ludC54ICkge1xuICAgICAgICBjb25zdCBlZGdlMSA9IG5ldyBFZGdlKCBmcm9udEVkZ2Uuc3RhcnRWZXJ0ZXgsIHZlcnRleCApO1xuICAgICAgICBjb25zdCBlZGdlMiA9IG5ldyBFZGdlKCB2ZXJ0ZXgsIGZyb250RWRnZS5lbmRWZXJ0ZXggKTtcbiAgICAgICAgZWRnZTEuY29ubmVjdEFmdGVyKCBlZGdlMiApO1xuICAgICAgICB0aGlzLmVkZ2VzLnB1c2goIGVkZ2UxICk7XG4gICAgICAgIHRoaXMuZWRnZXMucHVzaCggZWRnZTIgKTtcbiAgICAgICAgdGhpcy50cmlhbmdsZXMucHVzaCggbmV3IFRyaWFuZ2xlKCBmcm9udEVkZ2UuZW5kVmVydGV4LCBmcm9udEVkZ2Uuc3RhcnRWZXJ0ZXgsIHZlcnRleCxcbiAgICAgICAgICBlZGdlMSwgZWRnZTIsIGZyb250RWRnZSApICk7XG4gICAgICAgIHRoaXMucmVjb25uZWN0RnJvbnRFZGdlcyggZnJvbnRFZGdlLCBmcm9udEVkZ2UsIGVkZ2UxLCBlZGdlMiApO1xuICAgICAgICB0aGlzLmxlZ2FsaXplRWRnZSggZnJvbnRFZGdlICk7XG4gICAgICAgIHRoaXMuYWRkSGFsZlBpSGV1cmlzdGljKCBlZGdlMSwgZWRnZTIgKTtcbiAgICAgICAgdGhpcy5jb25zdHJhaW5FZGdlcyggdmVydGV4LCBlZGdlMSwgZWRnZTIgKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICggeCA9PT0gZnJvbnRFZGdlLmVuZFZlcnRleC5wb2ludC54ICkge1xuICAgICAgICBjb25zdCBsZWZ0T2xkRWRnZSA9IGZyb250RWRnZS5uZXh0RWRnZTtcbiAgICAgICAgY29uc3QgcmlnaHRPbGRFZGdlID0gZnJvbnRFZGdlO1xuICAgICAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWZ0T2xkRWRnZSAhPT0gbnVsbCApO1xuXG4gICAgICAgIGNvbnN0IG1pZGRsZU9sZFZlcnRleCA9IGZyb250RWRnZS5lbmRWZXJ0ZXg7XG4gICAgICAgIGNvbnN0IGxlZnRWZXJ0ZXggPSBsZWZ0T2xkRWRnZS5lbmRWZXJ0ZXg7XG4gICAgICAgIGNvbnN0IHJpZ2h0VmVydGV4ID0gcmlnaHRPbGRFZGdlLnN0YXJ0VmVydGV4O1xuXG4gICAgICAgIGNvbnN0IGxlZnRFZGdlID0gbmV3IEVkZ2UoIHZlcnRleCwgbGVmdFZlcnRleCApO1xuICAgICAgICBjb25zdCByaWdodEVkZ2UgPSBuZXcgRWRnZSggcmlnaHRWZXJ0ZXgsIHZlcnRleCApO1xuICAgICAgICBjb25zdCBtaWRkbGVFZGdlID0gbmV3IEVkZ2UoIG1pZGRsZU9sZFZlcnRleCwgdmVydGV4ICk7XG4gICAgICAgIHJpZ2h0RWRnZS5jb25uZWN0QWZ0ZXIoIGxlZnRFZGdlICk7XG4gICAgICAgIHRoaXMuZWRnZXMucHVzaCggbGVmdEVkZ2UgKTtcbiAgICAgICAgdGhpcy5lZGdlcy5wdXNoKCByaWdodEVkZ2UgKTtcbiAgICAgICAgdGhpcy5lZGdlcy5wdXNoKCBtaWRkbGVFZGdlICk7XG4gICAgICAgIHRoaXMudHJpYW5nbGVzLnB1c2goIG5ldyBUcmlhbmdsZSggbGVmdFZlcnRleCwgbWlkZGxlT2xkVmVydGV4LCB2ZXJ0ZXgsXG4gICAgICAgICAgbWlkZGxlRWRnZSwgbGVmdEVkZ2UsIGxlZnRPbGRFZGdlICkgKTtcbiAgICAgICAgdGhpcy50cmlhbmdsZXMucHVzaCggbmV3IFRyaWFuZ2xlKCBtaWRkbGVPbGRWZXJ0ZXgsIHJpZ2h0VmVydGV4LCB2ZXJ0ZXgsXG4gICAgICAgICAgcmlnaHRFZGdlLCBtaWRkbGVFZGdlLCByaWdodE9sZEVkZ2UgKSApO1xuICAgICAgICB0aGlzLnJlY29ubmVjdEZyb250RWRnZXMoIHJpZ2h0T2xkRWRnZSwgbGVmdE9sZEVkZ2UsIHJpZ2h0RWRnZSwgbGVmdEVkZ2UgKTtcbiAgICAgICAgdGhpcy5sZWdhbGl6ZUVkZ2UoIGxlZnRPbGRFZGdlICk7XG4gICAgICAgIHRoaXMubGVnYWxpemVFZGdlKCByaWdodE9sZEVkZ2UgKTtcbiAgICAgICAgdGhpcy5sZWdhbGl6ZUVkZ2UoIG1pZGRsZUVkZ2UgKTtcbiAgICAgICAgdGhpcy5hZGRIYWxmUGlIZXVyaXN0aWMoIHJpZ2h0RWRnZSwgbGVmdEVkZ2UgKTtcbiAgICAgICAgdGhpcy5jb25zdHJhaW5FZGdlcyggdmVydGV4LCByaWdodEVkZ2UsIGxlZnRFZGdlICk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgZnJvbnRFZGdlID0gZnJvbnRFZGdlLm5leHRFZGdlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZHMgYSB0cmlhbmdsZSBiZXR3ZWVuIHR3byB2ZXJ0aWNlcy5cbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtFZGdlfSBmaXJzdEVkZ2VcbiAgICogQHBhcmFtIHtFZGdlfSBzZWNvbmRFZGdlXG4gICAqIEBwYXJhbSB7VmVydGV4fSBmaXJzdFNpZGVWZXJ0ZXhcbiAgICogQHBhcmFtIHtWZXJ0ZXh9IG1pZGRsZVZlcnRleFxuICAgKiBAcGFyYW0ge1ZlcnRleH0gc2Vjb25kU2lkZVZlcnRleFxuICAgKiBAcmV0dXJucyB7RWRnZX0gLSBUaGUgbmV3bHkgY3JlYXRlZCBlZGdlXG4gICAqL1xuICBmaWxsQm9yZGVyVHJpYW5nbGUoIGZpcnN0RWRnZSwgc2Vjb25kRWRnZSwgZmlyc3RTaWRlVmVydGV4LCBtaWRkbGVWZXJ0ZXgsIHNlY29uZFNpZGVWZXJ0ZXggKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmlyc3RFZGdlIGluc3RhbmNlb2YgRWRnZSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHNlY29uZEVkZ2UgaW5zdGFuY2VvZiBFZGdlICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZmlyc3RTaWRlVmVydGV4IGluc3RhbmNlb2YgVmVydGV4ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbWlkZGxlVmVydGV4IGluc3RhbmNlb2YgVmVydGV4ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggc2Vjb25kU2lkZVZlcnRleCBpbnN0YW5jZW9mIFZlcnRleCApO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbWlkZGxlVmVydGV4ID09PSBmaXJzdEVkZ2Uuc3RhcnRWZXJ0ZXggfHwgbWlkZGxlVmVydGV4ID09PSBmaXJzdEVkZ2UuZW5kVmVydGV4LFxuICAgICAgJ21pZGRsZVZlcnRleCBzaG91bGQgYmUgaW4gZmlyc3RFZGdlJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1pZGRsZVZlcnRleCA9PT0gc2Vjb25kRWRnZS5zdGFydFZlcnRleCB8fCBtaWRkbGVWZXJ0ZXggPT09IHNlY29uZEVkZ2UuZW5kVmVydGV4LFxuICAgICAgJ21pZGRsZVZlcnRleCBzaG91bGQgYmUgaW4gc2Vjb25kRWRnZScgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBmaXJzdFNpZGVWZXJ0ZXggPT09IGZpcnN0RWRnZS5zdGFydFZlcnRleCB8fCBmaXJzdFNpZGVWZXJ0ZXggPT09IGZpcnN0RWRnZS5lbmRWZXJ0ZXgsXG4gICAgICAnZmlyc3RTaWRlVmVydGV4IHNob3VsZCBiZSBpbiBmaXJzdEVkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggc2Vjb25kU2lkZVZlcnRleCA9PT0gc2Vjb25kRWRnZS5zdGFydFZlcnRleCB8fCBzZWNvbmRTaWRlVmVydGV4ID09PSBzZWNvbmRFZGdlLmVuZFZlcnRleCxcbiAgICAgICdzZWNvbmRTaWRlVmVydGV4IHNob3VsZCBiZSBpbiBzZWNvbmRFZGdlJyApO1xuXG4gICAgY29uc3QgbmV3RWRnZSA9IG5ldyBFZGdlKCBmaXJzdFNpZGVWZXJ0ZXgsIHNlY29uZFNpZGVWZXJ0ZXggKTtcbiAgICB0aGlzLmVkZ2VzLnB1c2goIG5ld0VkZ2UgKTtcbiAgICB0aGlzLnRyaWFuZ2xlcy5wdXNoKCBuZXcgVHJpYW5nbGUoIHNlY29uZFNpZGVWZXJ0ZXgsIG1pZGRsZVZlcnRleCwgZmlyc3RTaWRlVmVydGV4LFxuICAgICAgZmlyc3RFZGdlLCBuZXdFZGdlLCBzZWNvbmRFZGdlICkgKTtcbiAgICB0aGlzLmxlZ2FsaXplRWRnZSggZmlyc3RFZGdlICk7XG4gICAgdGhpcy5sZWdhbGl6ZUVkZ2UoIHNlY29uZEVkZ2UgKTtcbiAgICByZXR1cm4gbmV3RWRnZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNjb25uZWN0cyBhIHNlY3Rpb24gb2YgZnJvbnQgZWRnZXMsIGFuZCBjb25uZWN0cyBhIG5ldyBzZWN0aW9uLlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBEaXNjb25uZWN0czpcbiAgICogPG5leHRFZGdlPiAoY3V0KSA8b2xkTGVmdEVkZ2U+IC4uLi4uIDxvbGRSaWdodEVkZ2U+IChjdXQpIDxwcmV2aW91c0VkZ2U+XG4gICAqXG4gICAqIENvbm5lY3RzOlxuICAgKiA8bmV4dEVkZ2U+IChqb2luKSA8bmV3TGVmdEVkZ2U+IC4uLi4uIDxuZXdSaWdodEVkZ2U+IChqb2luKSA8cHJldmlvdXNFZGdlPlxuICAgKlxuICAgKiBJZiBwcmV2aW91c0VkZ2UgaXMgbnVsbCwgd2UnbGwgbmVlZCB0byBzZXQgb3VyIGZpcnN0RnJvbnRFZGdlIHRvIHRoZSBuZXdSaWdodEVkZ2UuXG4gICAqXG4gICAqIEBwYXJhbSB7RWRnZX0gb2xkUmlnaHRFZGdlXG4gICAqIEBwYXJhbSB7RWRnZX0gb2xkTGVmdEVkZ2VcbiAgICogQHBhcmFtIHtFZGdlfSBuZXdSaWdodEVkZ2VcbiAgICogQHBhcmFtIHtFZGdlfSBuZXdMZWZ0RWRnZVxuICAgKi9cbiAgcmVjb25uZWN0RnJvbnRFZGdlcyggb2xkUmlnaHRFZGdlLCBvbGRMZWZ0RWRnZSwgbmV3UmlnaHRFZGdlLCBuZXdMZWZ0RWRnZSApIHtcbiAgICBjb25zdCBwcmV2aW91c0VkZ2UgPSBvbGRSaWdodEVkZ2UucHJldmlvdXNFZGdlO1xuICAgIGNvbnN0IG5leHRFZGdlID0gb2xkTGVmdEVkZ2UubmV4dEVkZ2U7XG4gICAgaWYgKCBwcmV2aW91c0VkZ2UgKSB7XG4gICAgICBwcmV2aW91c0VkZ2UuZGlzY29ubmVjdEFmdGVyKCk7XG4gICAgICBwcmV2aW91c0VkZ2UuY29ubmVjdEFmdGVyKCBuZXdSaWdodEVkZ2UgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLmZpcnN0RnJvbnRFZGdlID0gbmV3UmlnaHRFZGdlO1xuICAgIH1cbiAgICBpZiAoIG5leHRFZGdlICkge1xuICAgICAgb2xkTGVmdEVkZ2UuZGlzY29ubmVjdEFmdGVyKCk7XG4gICAgICBuZXdMZWZ0RWRnZS5jb25uZWN0QWZ0ZXIoIG5leHRFZGdlICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWVzIHRvIGZpbGwgaW4gYWN1dGUgYW5nbGVzIHdpdGggdHJpYW5nbGVzIGFmdGVyIHdlIGFkZCBhIHZlcnRleCBpbnRvIHRoZSBmcm9udC5cbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtFZGdlfSByaWdodEZyb250RWRnZVxuICAgKiBAcGFyYW0ge0VkZ2V9IGxlZnRGcm9udEVkZ2VcbiAgICovXG4gIGFkZEhhbGZQaUhldXJpc3RpYyggcmlnaHRGcm9udEVkZ2UsIGxlZnRGcm9udEVkZ2UgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcmlnaHRGcm9udEVkZ2UuZW5kVmVydGV4ID09PSBsZWZ0RnJvbnRFZGdlLnN0YXJ0VmVydGV4ICk7XG5cbiAgICBjb25zdCBtaWRkbGVWZXJ0ZXggPSByaWdodEZyb250RWRnZS5lbmRWZXJ0ZXg7XG5cbiAgICB3aGlsZSAoIHJpZ2h0RnJvbnRFZGdlLnByZXZpb3VzRWRnZSAmJlxuICAgICAgICAgICAgVXRpbHMudHJpYW5nbGVBcmVhU2lnbmVkKCBtaWRkbGVWZXJ0ZXgucG9pbnQsIHJpZ2h0RnJvbnRFZGdlLnN0YXJ0VmVydGV4LnBvaW50LCByaWdodEZyb250RWRnZS5wcmV2aW91c0VkZ2Uuc3RhcnRWZXJ0ZXgucG9pbnQgKSA+IDAgJiZcbiAgICAgICAgICAgICggbWlkZGxlVmVydGV4LnBvaW50Lm1pbnVzKCByaWdodEZyb250RWRnZS5zdGFydFZlcnRleC5wb2ludCApICkuYW5nbGVCZXR3ZWVuKCByaWdodEZyb250RWRnZS5wcmV2aW91c0VkZ2Uuc3RhcnRWZXJ0ZXgucG9pbnQubWludXMoIHJpZ2h0RnJvbnRFZGdlLnN0YXJ0VmVydGV4LnBvaW50ICkgKSA8IE1hdGguUEkgLyAyICkge1xuICAgICAgY29uc3QgcHJldmlvdXNFZGdlID0gcmlnaHRGcm9udEVkZ2UucHJldmlvdXNFZGdlO1xuICAgICAgY29uc3QgbmV3UmlnaHRFZGdlID0gbmV3IEVkZ2UoIHByZXZpb3VzRWRnZS5zdGFydFZlcnRleCwgbWlkZGxlVmVydGV4ICk7XG4gICAgICB0aGlzLmVkZ2VzLnB1c2goIG5ld1JpZ2h0RWRnZSApO1xuICAgICAgdGhpcy50cmlhbmdsZXMucHVzaCggbmV3IFRyaWFuZ2xlKCBtaWRkbGVWZXJ0ZXgsIHJpZ2h0RnJvbnRFZGdlLnN0YXJ0VmVydGV4LCBwcmV2aW91c0VkZ2Uuc3RhcnRWZXJ0ZXgsXG4gICAgICAgIHByZXZpb3VzRWRnZSwgbmV3UmlnaHRFZGdlLCByaWdodEZyb250RWRnZSApICk7XG5cbiAgICAgIHRoaXMucmVjb25uZWN0RnJvbnRFZGdlcyggcHJldmlvdXNFZGdlLCByaWdodEZyb250RWRnZSwgbmV3UmlnaHRFZGdlLCBuZXdSaWdodEVkZ2UgKTtcbiAgICAgIHRoaXMubGVnYWxpemVFZGdlKCBwcmV2aW91c0VkZ2UgKTtcbiAgICAgIHRoaXMubGVnYWxpemVFZGdlKCByaWdodEZyb250RWRnZSApO1xuXG4gICAgICByaWdodEZyb250RWRnZSA9IG5ld1JpZ2h0RWRnZTtcbiAgICB9XG4gICAgd2hpbGUgKCBsZWZ0RnJvbnRFZGdlLm5leHRFZGdlICYmXG4gICAgICAgICAgICBVdGlscy50cmlhbmdsZUFyZWFTaWduZWQoIG1pZGRsZVZlcnRleC5wb2ludCwgbGVmdEZyb250RWRnZS5uZXh0RWRnZS5lbmRWZXJ0ZXgucG9pbnQsIGxlZnRGcm9udEVkZ2UuZW5kVmVydGV4LnBvaW50ICkgPiAwICYmXG4gICAgICAgICAgICAoIG1pZGRsZVZlcnRleC5wb2ludC5taW51cyggbGVmdEZyb250RWRnZS5lbmRWZXJ0ZXgucG9pbnQgKSApLmFuZ2xlQmV0d2VlbiggbGVmdEZyb250RWRnZS5uZXh0RWRnZS5lbmRWZXJ0ZXgucG9pbnQubWludXMoIGxlZnRGcm9udEVkZ2UuZW5kVmVydGV4LnBvaW50ICkgKSA8IE1hdGguUEkgLyAyICkge1xuICAgICAgY29uc3QgbmV4dEVkZ2UgPSBsZWZ0RnJvbnRFZGdlLm5leHRFZGdlO1xuICAgICAgY29uc3QgbmV3TGVmdEVkZ2UgPSBuZXcgRWRnZSggbWlkZGxlVmVydGV4LCBuZXh0RWRnZS5lbmRWZXJ0ZXggKTtcbiAgICAgIHRoaXMuZWRnZXMucHVzaCggbmV3TGVmdEVkZ2UgKTtcbiAgICAgIHRoaXMudHJpYW5nbGVzLnB1c2goIG5ldyBUcmlhbmdsZSggbWlkZGxlVmVydGV4LCBsZWZ0RnJvbnRFZGdlLm5leHRFZGdlLmVuZFZlcnRleCwgbGVmdEZyb250RWRnZS5lbmRWZXJ0ZXgsXG4gICAgICAgIG5leHRFZGdlLCBsZWZ0RnJvbnRFZGdlLCBuZXdMZWZ0RWRnZSApICk7XG4gICAgICB0aGlzLnJlY29ubmVjdEZyb250RWRnZXMoIGxlZnRGcm9udEVkZ2UsIG5leHRFZGdlLCBuZXdMZWZ0RWRnZSwgbmV3TGVmdEVkZ2UgKTtcbiAgICAgIHRoaXMubGVnYWxpemVFZGdlKCBuZXh0RWRnZSApO1xuICAgICAgdGhpcy5sZWdhbGl6ZUVkZ2UoIGxlZnRGcm9udEVkZ2UgKTtcblxuICAgICAgbGVmdEZyb250RWRnZSA9IG5ld0xlZnRFZGdlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGVzIGFueSBcImVkZ2UgZXZlbnRzXCIgdGhhdCBkZWxldGUgaW50ZXJzZWN0aW5nIGVkZ2VzLCBjcmVhdGluZyB0aGUgbmV3IGVkZ2UsIGFuZCBmaWxsaW5nIGluIChhbGwgb25seSBpZlxuICAgKiBuZWNlc3NhcnkpLlxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAcGFyYW0ge1ZlcnRleH0gdmVydGV4XG4gICAqIEBwYXJhbSB7RWRnZX0gcmlnaHRGcm9udEVkZ2VcbiAgICogQHBhcmFtIHtFZGdlfSBsZWZ0RnJvbnRFZGdlXG4gICAqL1xuICBjb25zdHJhaW5FZGdlcyggdmVydGV4LCByaWdodEZyb250RWRnZSwgbGVmdEZyb250RWRnZSApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2ZXJ0ZXggaW5zdGFuY2VvZiBWZXJ0ZXggKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByaWdodEZyb250RWRnZSBpbnN0YW5jZW9mIEVkZ2UgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWZ0RnJvbnRFZGdlIGluc3RhbmNlb2YgRWRnZSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHZlcnRleCA9PT0gcmlnaHRGcm9udEVkZ2UuZW5kVmVydGV4ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdmVydGV4ID09PSBsZWZ0RnJvbnRFZGdlLnN0YXJ0VmVydGV4ICk7XG5cbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB2ZXJ0ZXguY29uc3RyYWluZWRWZXJ0aWNlcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGNvbnN0IGJvdHRvbVZlcnRleCA9IHZlcnRleC5jb25zdHJhaW5lZFZlcnRpY2VzWyBpIF07XG5cbiAgICAgIC8vIENoZWNrIGlmIGl0J3Mgb25lIG9mIG91ciBmcm9udCBlZGdlIHZlcnRpY2VzIChpZiBzbywgYmFpbCBvdXQsIHNpbmNlIHRoZSBlZGdlIGFscmVhZHkgZXhpc3RzKVxuICAgICAgaWYgKCBib3R0b21WZXJ0ZXggPT09IHJpZ2h0RnJvbnRFZGdlLnN0YXJ0VmVydGV4IHx8IGJvdHRvbVZlcnRleCA9PT0gbGVmdEZyb250RWRnZS5lbmRWZXJ0ZXggKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBsZWZ0RWRnZXMgPSBbXTtcbiAgICAgIGNvbnN0IHJpZ2h0RWRnZXMgPSBbXTtcbiAgICAgIGxldCBjdXJyZW50VHJpYW5nbGUgPSBudWxsO1xuICAgICAgbGV0IGN1cnJlbnRFZGdlID0gbnVsbDtcbiAgICAgIGNvbnN0IHRyaWFuZ2xlc1RvUmVtb3ZlID0gW107XG4gICAgICBjb25zdCBlZGdlc1RvUmVtb3ZlID0gW107XG5cbiAgICAgIGxldCBvdXRzaWRlUmlnaHQgPSBEZWxhdW5heVRyaWFuZ3VsYXRpb24udmVydGV4UHJvZHVjdCggdmVydGV4LCByaWdodEZyb250RWRnZS5zdGFydFZlcnRleCwgYm90dG9tVmVydGV4ICkgPiAwO1xuICAgICAgbGV0IG91dHNpZGVMZWZ0ID0gRGVsYXVuYXlUcmlhbmd1bGF0aW9uLnZlcnRleFByb2R1Y3QoIHZlcnRleCwgbGVmdEZyb250RWRnZS5lbmRWZXJ0ZXgsIGJvdHRvbVZlcnRleCApIDwgMDtcblxuICAgICAgLy8gSWYgd2Ugc3RhcnQgaW5zaWRlLCB3ZSBuZWVkIHRvIGlkZW50aWZ5IHdoaWNoIHRyaWFuZ2xlIHdlJ3JlIGluc2lkZSBvZi5cbiAgICAgIGlmICggIW91dHNpZGVSaWdodCAmJiAhb3V0c2lkZUxlZnQgKSB7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHJpZ2h0RnJvbnRFZGdlLnRyaWFuZ2xlcy5sZW5ndGggPT09IDEgKTtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggbGVmdEZyb250RWRnZS50cmlhbmdsZXMubGVuZ3RoID09PSAxICk7XG5cbiAgICAgICAgbGV0IGxhc3RWZXJ0ZXggPSByaWdodEZyb250RWRnZS5zdGFydFZlcnRleDtcbiAgICAgICAgbGV0IG5leHRWZXJ0ZXg7XG4gICAgICAgIGN1cnJlbnRUcmlhbmdsZSA9IHJpZ2h0RnJvbnRFZGdlLnRyaWFuZ2xlc1sgMCBdO1xuICAgICAgICAvLyBUT0RPOiBUcmlhbmdsZSBvcGVyYXRpb25zIHRvIG1ha2UgdGhpcyBtb3JlIHJlYWRhYmxlXG4gICAgICAgIHdoaWxlICggRGVsYXVuYXlUcmlhbmd1bGF0aW9uLnZlcnRleFByb2R1Y3QoIHZlcnRleCwgbmV4dFZlcnRleCA9IGN1cnJlbnRUcmlhbmdsZS5nZXRFZGdlT3Bwb3NpdGVGcm9tVmVydGV4KCB2ZXJ0ZXggKS5nZXRPdGhlclZlcnRleCggbGFzdFZlcnRleCApLCBib3R0b21WZXJ0ZXggKSA8IDAgKSB7XG4gICAgICAgICAgY3VycmVudFRyaWFuZ2xlID0gY3VycmVudFRyaWFuZ2xlLmdldEVkZ2VPcHBvc2l0ZUZyb21WZXJ0ZXgoIGxhc3RWZXJ0ZXggKS5nZXRPdGhlclRyaWFuZ2xlKCBjdXJyZW50VHJpYW5nbGUgKTtcbiAgICAgICAgICBsYXN0VmVydGV4ID0gbmV4dFZlcnRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG91ciBpbml0aWFsIHRyaWFuZ2xlIGhhcyBvdXIgdmVydGV4IGFuZCBib3R0b21WZXJ0ZXgsIHRoZW4gYmFpbCBvdXQgKGVkZ2UgYWxyZWFkeSBleGlzdHMpXG4gICAgICAgIGlmICggY3VycmVudFRyaWFuZ2xlLmhhc1ZlcnRleCggYm90dG9tVmVydGV4ICkgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgICB0cmlhbmdsZXNUb1JlbW92ZS5wdXNoKCBjdXJyZW50VHJpYW5nbGUgKTtcblxuICAgICAgICBjdXJyZW50RWRnZSA9IGN1cnJlbnRUcmlhbmdsZS5nZXRFZGdlT3Bwb3NpdGVGcm9tVmVydGV4KCB2ZXJ0ZXggKTtcbiAgICAgICAgZWRnZXNUb1JlbW92ZS5wdXNoKCBjdXJyZW50RWRnZSApO1xuICAgICAgICBsZWZ0RWRnZXMucHVzaCggY3VycmVudFRyaWFuZ2xlLmdldEVkZ2VPcHBvc2l0ZUZyb21WZXJ0ZXgoIGxhc3RWZXJ0ZXggKSApO1xuICAgICAgICByaWdodEVkZ2VzLnB1c2goIGN1cnJlbnRUcmlhbmdsZS5nZXRFZGdlT3Bwb3NpdGVGcm9tVmVydGV4KCBjdXJyZW50RWRnZS5nZXRPdGhlclZlcnRleCggbGFzdFZlcnRleCApICkgKTtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggbGVmdEVkZ2VzWyAwIF0uZ2V0T3RoZXJWZXJ0ZXgoIHZlcnRleCApLnBvaW50LnggPCByaWdodEVkZ2VzWyAwIF0uZ2V0T3RoZXJWZXJ0ZXgoIHZlcnRleCApLnBvaW50LnggKTtcbiAgICAgIH1cblxuICAgICAgd2hpbGUgKCB0cnVlICkgeyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvblxuICAgICAgICBpZiAoIG91dHNpZGVSaWdodCApIHtcbiAgICAgICAgICAvLyBUT0RPOiBpbXBsZW1lbnRcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICggb3V0c2lkZUxlZnQgKSB7XG4gICAgICAgICAgLy8gVE9ETzogaW1wbGVtZW50XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgaWYgKCBjdXJyZW50RWRnZS50cmlhbmdsZXMubGVuZ3RoID4gMSApIHtcbiAgICAgICAgICAgIGNvbnN0IG5leHRUcmlhbmdsZSA9IGN1cnJlbnRFZGdlLmdldE90aGVyVHJpYW5nbGUoIGN1cnJlbnRUcmlhbmdsZSApO1xuICAgICAgICAgICAgaWYgKCBuZXh0VHJpYW5nbGUuaGFzVmVydGV4KCBib3R0b21WZXJ0ZXggKSApIHtcblxuICAgICAgICAgICAgICAvLyBUT0RPOiBkbyB0aGluZ3MhXG4gICAgICAgICAgICAgIHRyaWFuZ2xlc1RvUmVtb3ZlLnB1c2goIG5leHRUcmlhbmdsZSApO1xuICAgICAgICAgICAgICBsZWZ0RWRnZXMucHVzaCggbmV4dFRyaWFuZ2xlLmdldE5leHRFZGdlKCBjdXJyZW50RWRnZSApICk7XG4gICAgICAgICAgICAgIHJpZ2h0RWRnZXMucHVzaCggbmV4dFRyaWFuZ2xlLmdldFByZXZpb3VzRWRnZSggY3VycmVudEVkZ2UgKSApO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAvLyBJZiB0aGlzIGlzIHRoZSBuZXh0IGVkZ2UgaW50ZXJzZWN0ZWRcbiAgICAgICAgICAgICAgbGV0IG5leHRFZGdlO1xuICAgICAgICAgICAgICBpZiAoIG5leHRUcmlhbmdsZS5hRWRnZSAhPT0gY3VycmVudEVkZ2UgJiYgbmV4dFRyaWFuZ2xlLmFFZGdlLmludGVyc2VjdHNDb25zdHJhaW5lZEVkZ2UoIHZlcnRleCwgYm90dG9tVmVydGV4ICkgKSB7XG4gICAgICAgICAgICAgICAgbmV4dEVkZ2UgPSBuZXh0VHJpYW5nbGUuYUVkZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAoIG5leHRUcmlhbmdsZS5iRWRnZSAhPT0gY3VycmVudEVkZ2UgJiYgbmV4dFRyaWFuZ2xlLmJFZGdlLmludGVyc2VjdHNDb25zdHJhaW5lZEVkZ2UoIHZlcnRleCwgYm90dG9tVmVydGV4ICkgKSB7XG4gICAgICAgICAgICAgICAgbmV4dEVkZ2UgPSBuZXh0VHJpYW5nbGUuYkVkZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSBpZiAoIG5leHRUcmlhbmdsZS5jRWRnZSAhPT0gY3VycmVudEVkZ2UgJiYgbmV4dFRyaWFuZ2xlLmNFZGdlLmludGVyc2VjdHNDb25zdHJhaW5lZEVkZ2UoIHZlcnRleCwgYm90dG9tVmVydGV4ICkgKSB7XG4gICAgICAgICAgICAgICAgbmV4dEVkZ2UgPSBuZXh0VHJpYW5nbGUuY0VkZ2U7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggbmV4dEVkZ2UgKTtcblxuICAgICAgICAgICAgICBpZiAoIG5leHRUcmlhbmdsZS5nZXROZXh0RWRnZSggbmV4dEVkZ2UgKSA9PT0gY3VycmVudEVkZ2UgKSB7XG4gICAgICAgICAgICAgICAgbGVmdEVkZ2VzLnB1c2goIG5leHRUcmlhbmdsZS5nZXRQcmV2aW91c0VkZ2UoIG5leHRFZGdlICkgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICByaWdodEVkZ2VzLnB1c2goIG5leHRUcmlhbmdsZS5nZXROZXh0RWRnZSggbmV4dEVkZ2UgKSApO1xuICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgY3VycmVudEVkZ2UgPSBuZXh0RWRnZTtcbiAgICAgICAgICAgICAgZWRnZXNUb1JlbW92ZS5wdXNoKCBjdXJyZW50RWRnZSApO1xuXG4gICAgICAgICAgICAgIGN1cnJlbnRUcmlhbmdsZSA9IG5leHRUcmlhbmdsZTtcbiAgICAgICAgICAgICAgdHJpYW5nbGVzVG9SZW1vdmUucHVzaCggY3VycmVudFRyaWFuZ2xlICk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIE5vIG90aGVyIHRyaWFuZ2xlLCBleGl0ZWRcbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGlmICggYm90dG9tVmVydGV4LnBvaW50LnggPCB2ZXJ0ZXgucG9pbnQueCApIHtcbiAgICAgICAgICAgICAgb3V0c2lkZUxlZnQgPSB0cnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgIG91dHNpZGVSaWdodCA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IHRyaWFuZ2xlc1RvUmVtb3ZlLmxlbmd0aDsgaisrICkge1xuICAgICAgICBjb25zdCB0cmlhbmdsZVRvUmVtb3ZlID0gdHJpYW5nbGVzVG9SZW1vdmVbIGogXTtcbiAgICAgICAgYXJyYXlSZW1vdmUoIHRoaXMudHJpYW5nbGVzLCB0cmlhbmdsZVRvUmVtb3ZlICk7XG4gICAgICAgIHRyaWFuZ2xlVG9SZW1vdmUucmVtb3ZlKCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IGVkZ2VzVG9SZW1vdmUubGVuZ3RoOyBqKysgKSB7XG4gICAgICAgIGFycmF5UmVtb3ZlKCB0aGlzLmVkZ2VzLCBlZGdlc1RvUmVtb3ZlWyBqIF0gKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY29uc3RyYWludEVkZ2UgPSBuZXcgRWRnZSggYm90dG9tVmVydGV4LCB2ZXJ0ZXggKTtcbiAgICAgIGNvbnN0cmFpbnRFZGdlLmlzQ29uc3RyYWluZWQgPSB0cnVlO1xuICAgICAgdGhpcy5lZGdlcy5wdXNoKCBjb25zdHJhaW50RWRnZSApO1xuICAgICAgbGVmdEVkZ2VzLnB1c2goIGNvbnN0cmFpbnRFZGdlICk7XG4gICAgICByaWdodEVkZ2VzLnB1c2goIGNvbnN0cmFpbnRFZGdlICk7XG4gICAgICByaWdodEVkZ2VzLnJldmVyc2UoKTsgLy8gUHV0IGVkZ2VzIGluIGNvdW50ZXJjbG9ja3dpc2Ugb3JkZXJcblxuICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMhXG4gICAgICB3aW5kb3cudHJpRGVidWcgJiYgd2luZG93LnRyaURlYnVnKCB0aGlzICk7XG5cbiAgICAgIHRoaXMudHJpYW5ndWxhdGVQb2x5Z29uKCBsZWZ0RWRnZXMgKTtcbiAgICAgIHRoaXMudHJpYW5ndWxhdGVQb2x5Z29uKCByaWdodEVkZ2VzICk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgZWRnZXMvdHJpYW5nbGVzIHRvIHRyaWFuZ3VsYXRlIGEgc2ltcGxlIHBvbHlnb24uXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXkuPEVkZ2U+fSBlZGdlcyAtIFNob3VsZCBiZSBpbiBjb3VudGVyY2xvY2t3aXNlIG9yZGVyXG4gICAqL1xuICB0cmlhbmd1bGF0ZVBvbHlnb24oIGVkZ2VzICkge1xuICAgIC8vIFRPRE86IFNvbWV0aGluZyBtb3JlIGVmZmljaWVudCB0aGFuIGVhciBjbGlwcGluZyBtZXRob2QgYmVsb3dcbiAgICB3aGlsZSAoIGVkZ2VzLmxlbmd0aCA+IDMgKSB7XG4gICAgICBmb3IgKCBsZXQgayA9IDA7IGsgPCBlZGdlcy5sZW5ndGg7IGsrKyApIHtcbiAgICAgICAgY29uc3Qga3ggPSBrIDwgZWRnZXMubGVuZ3RoIC0gMSA/IGsgKyAxIDogMDtcbiAgICAgICAgYXNzZXJ0ICYmIGFzc2VydCggZWRnZXNbIGsgXS5nZXRTaGFyZWRWZXJ0ZXgoIGVkZ2VzWyBreCBdICkgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgZWFjaCB0cmlwbGUgb2YgdmVydGljZXMgaXMgYW4gZWFyIChhbmQgaWYgc28sIHJlbW92ZSBpdClcbiAgICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGVkZ2VzLmxlbmd0aDsgaSsrICkge1xuICAgICAgICAvLyBOZXh0IGluZGV4XG4gICAgICAgIGNvbnN0IGl4ID0gaSA8IGVkZ2VzLmxlbmd0aCAtIDEgPyBpICsgMSA6IDA7XG5cbiAgICAgICAgLy8gSW5mb3JtYXRpb24gYWJvdXQgb3VyIHBvdGVudGlhbCBlYXJcbiAgICAgICAgY29uc3QgZWRnZSA9IGVkZ2VzWyBpIF07XG4gICAgICAgIGNvbnN0IG5leHRFZGdlID0gZWRnZXNbIGl4IF07XG4gICAgICAgIGNvbnN0IHNoYXJlZFZlcnRleCA9IGVkZ2UuZ2V0U2hhcmVkVmVydGV4KCBuZXh0RWRnZSApO1xuICAgICAgICBjb25zdCBzdGFydFZlcnRleCA9IGVkZ2UuZ2V0T3RoZXJWZXJ0ZXgoIHNoYXJlZFZlcnRleCApO1xuICAgICAgICBjb25zdCBlbmRWZXJ0ZXggPSBuZXh0RWRnZS5nZXRPdGhlclZlcnRleCggc2hhcmVkVmVydGV4ICk7XG5cbiAgICAgICAgaWYgKCBVdGlscy50cmlhbmdsZUFyZWFTaWduZWQoIHN0YXJ0VmVydGV4LnBvaW50LCBzaGFyZWRWZXJ0ZXgucG9pbnQsIGVuZFZlcnRleC5wb2ludCApIDw9IDAgKSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBWYXJpYWJsZXMgZm9yIGNvbXB1dGluZyBiYXJ5Y2VudHJpYyBjb29yZGluYXRlc1xuICAgICAgICBjb25zdCBlbmREZWx0YSA9IGVuZFZlcnRleC5wb2ludC5taW51cyggc2hhcmVkVmVydGV4LnBvaW50ICk7XG4gICAgICAgIGNvbnN0IHN0YXJ0RGVsdGEgPSBzdGFydFZlcnRleC5wb2ludC5taW51cyggc2hhcmVkVmVydGV4LnBvaW50ICk7XG4gICAgICAgIGNvbnN0IGVuZE1hZ25pdHVkZVNxdWFyZWQgPSBlbmREZWx0YS5kb3QoIGVuZERlbHRhICk7XG4gICAgICAgIGNvbnN0IHN0YXJ0RW5kUHJvZHVjdCA9IGVuZERlbHRhLmRvdCggc3RhcnREZWx0YSApO1xuICAgICAgICBjb25zdCBzdGFydE1hZ25pdHVkZVNxdWFyZWQgPSBzdGFydERlbHRhLmRvdCggc3RhcnREZWx0YSApO1xuICAgICAgICBjb25zdCB4ID0gZW5kTWFnbml0dWRlU3F1YXJlZCAqIHN0YXJ0TWFnbml0dWRlU3F1YXJlZCAtIHN0YXJ0RW5kUHJvZHVjdCAqIHN0YXJ0RW5kUHJvZHVjdDtcblxuICAgICAgICAvLyBTZWUgaWYgdGhlcmUgYXJlIG90aGVyIHZlcnRpY2VzIGluIG91ciB0cmlhbmdsZSAoaXQgd291bGRuJ3QgYmUgYW4gZWFyIGlmIHRoZXJlIGlzIGFub3RoZXIgaW4gaXQpXG4gICAgICAgIGxldCBsYXN0VmVydGV4ID0gZWRnZXNbIDAgXS5nZXRTaGFyZWRWZXJ0ZXgoIGVkZ2VzWyBlZGdlcy5sZW5ndGggLSAxIF0gKTtcbiAgICAgICAgbGV0IGhhc0ludGVyaW9yVmVydGV4ID0gZmFsc2U7XG4gICAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IGVkZ2VzLmxlbmd0aDsgaisrICkge1xuICAgICAgICAgIGNvbnN0IHZlcnRleCA9IGVkZ2VzWyBqIF0uZ2V0T3RoZXJWZXJ0ZXgoIGxhc3RWZXJ0ZXggKTtcblxuICAgICAgICAgIGlmICggdmVydGV4ICE9PSBzaGFyZWRWZXJ0ZXggJiYgdmVydGV4ICE9PSBzdGFydFZlcnRleCAmJiB2ZXJ0ZXggIT09IGVuZFZlcnRleCApIHtcbiAgICAgICAgICAgIGNvbnN0IHBvaW50RGVsdGEgPSB2ZXJ0ZXgucG9pbnQubWludXMoIHNoYXJlZFZlcnRleC5wb2ludCApO1xuICAgICAgICAgICAgY29uc3QgcG9pbnRFbmRQcm9kdWN0ID0gZW5kRGVsdGEuZG90KCBwb2ludERlbHRhICk7XG4gICAgICAgICAgICBjb25zdCBwb2ludFN0YXJ0UHJvZHVjdCA9IHN0YXJ0RGVsdGEuZG90KCBwb2ludERlbHRhICk7XG5cbiAgICAgICAgICAgIC8vIENvbXB1dGUgYmFyeWNlbnRyaWMgY29vcmRpbmF0ZXNcbiAgICAgICAgICAgIGNvbnN0IHUgPSAoIHN0YXJ0TWFnbml0dWRlU3F1YXJlZCAqIHBvaW50RW5kUHJvZHVjdCAtIHN0YXJ0RW5kUHJvZHVjdCAqIHBvaW50U3RhcnRQcm9kdWN0ICkgLyB4O1xuICAgICAgICAgICAgY29uc3QgdiA9ICggZW5kTWFnbml0dWRlU3F1YXJlZCAqIHBvaW50U3RhcnRQcm9kdWN0IC0gc3RhcnRFbmRQcm9kdWN0ICogcG9pbnRFbmRQcm9kdWN0ICkgLyB4O1xuXG4gICAgICAgICAgICAvLyBUZXN0IGZvciB3aGV0aGVyIHRoZSBwb2ludCBpcyBpbiBvdXIgdHJpYW5nbGVcbiAgICAgICAgICAgIGlmICggdSA+PSAtMWUtMTAgJiYgdiA+PSAtMWUtMTAgJiYgdSArIHYgPCAxICsgMWUtMTAgKSB7XG4gICAgICAgICAgICAgIGhhc0ludGVyaW9yVmVydGV4ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGFzdFZlcnRleCA9IHZlcnRleDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHRoZXJlIGlzIG5vIGludGVyaW9yIHZlcnRleCwgdGhlbiB3ZSByZWFjaGVkIGFuIGVhci5cbiAgICAgICAgaWYgKCAhaGFzSW50ZXJpb3JWZXJ0ZXggKSB7XG4gICAgICAgICAgY29uc3QgbmV3RWRnZSA9IG5ldyBFZGdlKCBzdGFydFZlcnRleCwgZW5kVmVydGV4ICk7XG4gICAgICAgICAgdGhpcy5lZGdlcy5wdXNoKCBuZXdFZGdlICk7XG4gICAgICAgICAgdGhpcy50cmlhbmdsZXMucHVzaCggbmV3IFRyaWFuZ2xlKCBzdGFydFZlcnRleCwgc2hhcmVkVmVydGV4LCBlbmRWZXJ0ZXgsXG4gICAgICAgICAgICBuZXh0RWRnZSwgbmV3RWRnZSwgZWRnZSApICk7XG4gICAgICAgICAgaWYgKCBpeCA+IGkgKSB7XG4gICAgICAgICAgICBlZGdlcy5zcGxpY2UoIGksIDIsIG5ld0VkZ2UgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBlZGdlcy5zcGxpY2UoIGksIDEsIG5ld0VkZ2UgKTtcbiAgICAgICAgICAgIGVkZ2VzLnNwbGljZSggaXgsIDEgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyFcbiAgICAgICAgICB3aW5kb3cudHJpRGVidWcgJiYgd2luZG93LnRyaURlYnVnKCB0aGlzICk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWxsIGluIHRoZSBsYXN0IHRyaWFuZ2xlXG4gICAgaWYgKCBlZGdlcy5sZW5ndGggPT09IDMgKSB7XG4gICAgICB0aGlzLnRyaWFuZ2xlcy5wdXNoKCBuZXcgVHJpYW5nbGUoIGVkZ2VzWyAwIF0uZ2V0U2hhcmVkVmVydGV4KCBlZGdlc1sgMSBdICksIGVkZ2VzWyAxIF0uZ2V0U2hhcmVkVmVydGV4KCBlZGdlc1sgMiBdICksIGVkZ2VzWyAwIF0uZ2V0U2hhcmVkVmVydGV4KCBlZGdlc1sgMiBdICksXG4gICAgICAgIGVkZ2VzWyAyIF0sIGVkZ2VzWyAwIF0sIGVkZ2VzWyAxIF0gKSApO1xuXG4gICAgICAvLyBUT0RPOiByZW1vdmUgdGhpcyFcbiAgICAgIHdpbmRvdy50cmlEZWJ1ZyAmJiB3aW5kb3cudHJpRGVidWcoIHRoaXMgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2hvdWxkIGJlIGNhbGxlZCB3aGVuIHRoZXJlIGFyZSBubyBtb3JlIHJlbWFpbmluZyB2ZXJ0aWNlcyBsZWZ0IHRvIGJlIHByb2Nlc3NlZC5cbiAgICogQHByaXZhdGVcbiAgICovXG4gIGZpbmFsaXplKCkge1xuICAgIC8vIEFjY3VtdWxhdGUgZnJvbnQgZWRnZXMsIGV4Y2x1ZGluZyB0aGUgZmlyc3QgYW5kIGxhc3QuXG4gICAgY29uc3QgZnJvbnRFZGdlcyA9IFtdO1xuICAgIGxldCBmcm9udEVkZ2UgPSB0aGlzLmZpcnN0RnJvbnRFZGdlLm5leHRFZGdlO1xuICAgIHdoaWxlICggZnJvbnRFZGdlICYmIGZyb250RWRnZS5uZXh0RWRnZSApIHtcbiAgICAgIGZyb250RWRnZXMucHVzaCggZnJvbnRFZGdlICk7XG4gICAgICBmcm9udEVkZ2UgPSBmcm9udEVkZ2UubmV4dEVkZ2U7XG4gICAgfVxuICAgIGNvbnN0IGZpcnN0RnJvbnRFZGdlID0gdGhpcy5maXJzdEZyb250RWRnZTtcbiAgICBjb25zdCBsYXN0RnJvbnRFZGdlID0gZnJvbnRFZGdlO1xuXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5maXJzdEZyb250RWRnZS50cmlhbmdsZXMubGVuZ3RoID09PSAxICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbGFzdEZyb250RWRnZS50cmlhbmdsZXMubGVuZ3RoID09PSAxICk7XG5cbiAgICAvLyBIYW5kbGUgYWRkaW5nIGFueSB0cmlhbmdsZXMgbm90IGluIHRoZSBjb252ZXggaHVsbCAob24gdGhlIGZyb250IGVkZ2UpXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZnJvbnRFZGdlcy5sZW5ndGggLSAxOyBpKysgKSB7XG4gICAgICBjb25zdCBmaXJzdEVkZ2UgPSBmcm9udEVkZ2VzWyBpIF07XG4gICAgICBjb25zdCBzZWNvbmRFZGdlID0gZnJvbnRFZGdlc1sgaSArIDEgXTtcbiAgICAgIGlmICggVXRpbHMudHJpYW5nbGVBcmVhU2lnbmVkKCBzZWNvbmRFZGdlLmVuZFZlcnRleC5wb2ludCwgZmlyc3RFZGdlLmVuZFZlcnRleC5wb2ludCwgZmlyc3RFZGdlLnN0YXJ0VmVydGV4LnBvaW50ICkgPiAxZS0xMCApIHtcbiAgICAgICAgY29uc3QgbmV3RWRnZSA9IHRoaXMuZmlsbEJvcmRlclRyaWFuZ2xlKCBmaXJzdEVkZ2UsIHNlY29uZEVkZ2UsIGZpcnN0RWRnZS5zdGFydFZlcnRleCwgZmlyc3RFZGdlLmVuZFZlcnRleCwgc2Vjb25kRWRnZS5lbmRWZXJ0ZXggKTtcbiAgICAgICAgZnJvbnRFZGdlcy5zcGxpY2UoIGksIDIsIG5ld0VkZ2UgKTtcbiAgICAgICAgLy8gc3RhcnQgc2Nhbm5pbmcgZnJvbSBiZWhpbmQgd2hlcmUgd2Ugd2VyZSBwcmV2aW91c2x5IChpZiBwb3NzaWJsZSlcbiAgICAgICAgaSA9IE1hdGgubWF4KCBpIC0gMiwgLTEgKTtcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMhXG4gICAgICAgIHdpbmRvdy50cmlEZWJ1ZyAmJiB3aW5kb3cudHJpRGVidWcoIHRoaXMgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGVhciBvdXQgZnJvbnQgZWRnZSBpbmZvcm1hdGlvbiwgbm8gbG9uZ2VyIG5lZWRlZC5cbiAgICB0aGlzLmZpcnN0RnJvbnRFZGdlID0gbnVsbDtcblxuICAgIC8vIEFjY3VtdWxhdGUgYmFjayBlZGdlcyBhbmQgaXRlbXMgdG8gZ2V0IHJpZCBvZlxuICAgIGNvbnN0IGJhY2tFZGdlcyA9IFtdO1xuICAgIGNvbnN0IGFydGlmaWNpYWxFZGdlcyA9IFsgZmlyc3RGcm9udEVkZ2UgXTtcbiAgICBsZXQgY3VycmVudFNwbGl0RWRnZSA9IGZpcnN0RnJvbnRFZGdlO1xuICAgIHdoaWxlICggY3VycmVudFNwbGl0RWRnZSAhPT0gbGFzdEZyb250RWRnZSApIHtcbiAgICAgIGNvbnN0IG5leHRUcmlhbmdsZSA9IGN1cnJlbnRTcGxpdEVkZ2UudHJpYW5nbGVzWyAwIF07XG4gICAgICBuZXh0VHJpYW5nbGUucmVtb3ZlKCk7XG4gICAgICBhcnJheVJlbW92ZSggdGhpcy50cmlhbmdsZXMsIG5leHRUcmlhbmdsZSApO1xuXG4gICAgICBjb25zdCBlZGdlID0gbmV4dFRyaWFuZ2xlLmdldE5vbkFydGlmaWNpYWxFZGdlKCk7XG4gICAgICBpZiAoIGVkZ2UgKSB7XG4gICAgICAgIGJhY2tFZGdlcy5wdXNoKCBlZGdlICk7XG4gICAgICAgIGNvbnN0IHNoYXJlZFZlcnRleCA9IGVkZ2UuZ2V0U2hhcmVkVmVydGV4KCBjdXJyZW50U3BsaXRFZGdlICk7XG4gICAgICAgIGN1cnJlbnRTcGxpdEVkZ2UgPSBuZXh0VHJpYW5nbGUuZ2V0RWRnZU9wcG9zaXRlRnJvbVZlcnRleCggc2hhcmVkVmVydGV4ICk7XG4gICAgICB9XG4gICAgICAvLyBPdXIgbWluLW1heC1ib3R0b21Qb2ludCB0cmlhbmdsZSAocGl2b3QsIG5vIGVkZ2UgdG8gYWRkKVxuICAgICAgZWxzZSB7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGN1cnJlbnRTcGxpdEVkZ2Uuc3RhcnRWZXJ0ZXggPT09IHRoaXMuYXJ0aWZpY2lhbE1heFZlcnRleCApO1xuXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgXCJib3R0b21cIiBlZGdlIGNvbm5lY3RpbmcgYm90aCBhcnRpZmljaWFsIHBvaW50c1xuICAgICAgICBhcnRpZmljaWFsRWRnZXMucHVzaCggbmV4dFRyaWFuZ2xlLmdldEVkZ2VPcHBvc2l0ZUZyb21WZXJ0ZXgoIGN1cnJlbnRTcGxpdEVkZ2UuZW5kVmVydGV4ICkgKTtcblxuICAgICAgICAvLyBQaXZvdFxuICAgICAgICBjdXJyZW50U3BsaXRFZGdlID0gbmV4dFRyaWFuZ2xlLmdldEVkZ2VPcHBvc2l0ZUZyb21WZXJ0ZXgoIGN1cnJlbnRTcGxpdEVkZ2Uuc3RhcnRWZXJ0ZXggKTtcbiAgICAgIH1cbiAgICAgIGFydGlmaWNpYWxFZGdlcy5wdXNoKCBjdXJyZW50U3BsaXRFZGdlICk7XG4gICAgfVxuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYXJ0aWZpY2lhbEVkZ2VzLmxlbmd0aDsgaSsrICkge1xuICAgICAgYXJyYXlSZW1vdmUoIHRoaXMuZWRnZXMsIGFydGlmaWNpYWxFZGdlc1sgaSBdICk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogcmVtb3ZlIHRoaXMhXG4gICAgd2luZG93LnRyaURlYnVnICYmIHdpbmRvdy50cmlEZWJ1ZyggdGhpcyApO1xuXG4gICAgLy8gSGFuZGxlIGFkZGluZyBhbnkgdHJpYW5nbGVzIG5vdCBpbiB0aGUgY29udmV4IGh1bGwgKG9uIHRoZSBiYWNrIGVkZ2UpXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgYmFja0VkZ2VzLmxlbmd0aCAtIDE7IGkrKyApIHtcbiAgICAgIGNvbnN0IGZpcnN0RWRnZSA9IGJhY2tFZGdlc1sgaSArIDEgXTtcbiAgICAgIGNvbnN0IHNlY29uZEVkZ2UgPSBiYWNrRWRnZXNbIGkgXTtcblxuICAgICAgY29uc3Qgc2hhcmVkVmVydGV4ID0gZmlyc3RFZGdlLmdldFNoYXJlZFZlcnRleCggc2Vjb25kRWRnZSApO1xuICAgICAgY29uc3QgZmlyc3RWZXJ0ZXggPSBmaXJzdEVkZ2UuZ2V0T3RoZXJWZXJ0ZXgoIHNoYXJlZFZlcnRleCApO1xuICAgICAgY29uc3Qgc2Vjb25kVmVydGV4ID0gc2Vjb25kRWRnZS5nZXRPdGhlclZlcnRleCggc2hhcmVkVmVydGV4ICk7XG4gICAgICBpZiAoIFV0aWxzLnRyaWFuZ2xlQXJlYVNpZ25lZCggc2Vjb25kVmVydGV4LnBvaW50LCBzaGFyZWRWZXJ0ZXgucG9pbnQsIGZpcnN0VmVydGV4LnBvaW50ICkgPiAxZS0xMCApIHtcbiAgICAgICAgY29uc3QgbmV3RWRnZSA9IHRoaXMuZmlsbEJvcmRlclRyaWFuZ2xlKCBmaXJzdEVkZ2UsIHNlY29uZEVkZ2UsIGZpcnN0VmVydGV4LCBzaGFyZWRWZXJ0ZXgsIHNlY29uZFZlcnRleCApO1xuICAgICAgICBiYWNrRWRnZXMuc3BsaWNlKCBpLCAyLCBuZXdFZGdlICk7XG4gICAgICAgIC8vIHN0YXJ0IHNjYW5uaW5nIGZyb20gYmVoaW5kIHdoZXJlIHdlIHdlcmUgcHJldmlvdXNseSAoaWYgcG9zc2libGUpXG4gICAgICAgIGkgPSBNYXRoLm1heCggaSAtIDIsIC0xICk7XG4gICAgICAgIC8vIFRPRE86IHJlbW92ZSB0aGlzIVxuICAgICAgICB3aW5kb3cudHJpRGVidWcgJiYgd2luZG93LnRyaURlYnVnKCB0aGlzICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgZnJvbnRFZGdlcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgIHRoaXMuY29udmV4SHVsbC5wdXNoKCBmcm9udEVkZ2VzWyBpIF0uc3RhcnRWZXJ0ZXggKTtcbiAgICB9XG4gICAgdGhpcy5jb252ZXhIdWxsLnB1c2goIGZyb250RWRnZXNbIGZyb250RWRnZXMubGVuZ3RoIC0gMSBdLmVuZFZlcnRleCApO1xuICAgIGZvciAoIGxldCBpID0gYmFja0VkZ2VzLmxlbmd0aCAtIDE7IGkgPj0gMTsgaS0tICkge1xuICAgICAgdGhpcy5jb252ZXhIdWxsLnB1c2goIGJhY2tFZGdlc1sgaSBdLmdldFNoYXJlZFZlcnRleCggYmFja0VkZ2VzWyBpIC0gMSBdICkgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2tzIGFuIGVkZ2UgdG8gc2VlIHdoZXRoZXIgaXRzIHR3byBhZGphY2VudCB0cmlhbmdsZXMgc2F0aXNmeSB0aGUgZGVsYXVuYXkgY29uZGl0aW9uICh0aGUgZmFyIHBvaW50IG9mIG9uZVxuICAgKiB0cmlhbmdsZSBzaG91bGQgbm90IGJlIGNvbnRhaW5lZCBpbiB0aGUgb3RoZXIgdHJpYW5nbGUncyBjaXJjdW1jaXJjbGUpLCBhbmQgaWYgaXQgaXMgbm90IHNhdGlzZmllZCwgZmxpcHMgdGhlXG4gICAqIGVkZ2Ugc28gdGhlIGNvbmRpdGlvbiBpcyBzYXRpc2ZpZWQuXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEBwYXJhbSB7RWRnZX0gZWRnZVxuICAgKi9cbiAgbGVnYWxpemVFZGdlKCBlZGdlICkge1xuICAgIC8vIENoZWNraW5nIGVhY2ggZWRnZSB0byBzZWUgaWYgaXQgaXNuJ3QgaW4gb3VyIHRyaWFuZ3VsYXRpb24gYW55bW9yZSAob3IgY2FuJ3QgYmUgaWxsZWdhbCBiZWNhdXNlIGl0IGRvZXNuJ3RcbiAgICAvLyBoYXZlIG11bHRpcGxlIHRyaWFuZ2xlcykgaGVscHMgYSBsb3QuXG4gICAgaWYgKCAhXy5pbmNsdWRlcyggdGhpcy5lZGdlcywgZWRnZSApIHx8IGVkZ2UudHJpYW5nbGVzLmxlbmd0aCAhPT0gMiB8fCBlZGdlLmlzQ29uc3RyYWluZWQgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgdHJpYW5nbGUxID0gZWRnZS50cmlhbmdsZXNbIDAgXTtcbiAgICBjb25zdCB0cmlhbmdsZTIgPSBlZGdlLnRyaWFuZ2xlc1sgMSBdO1xuXG4gICAgY29uc3QgZmFyVmVydGV4MSA9IHRyaWFuZ2xlMS5nZXRWZXJ0ZXhPcHBvc2l0ZUZyb21FZGdlKCBlZGdlICk7XG4gICAgY29uc3QgZmFyVmVydGV4MiA9IHRyaWFuZ2xlMi5nZXRWZXJ0ZXhPcHBvc2l0ZUZyb21FZGdlKCBlZGdlICk7XG5cbiAgICBpZiAoIFV0aWxzLnBvaW50SW5DaXJjbGVGcm9tUG9pbnRzKCB0cmlhbmdsZTEuYVZlcnRleC5wb2ludCwgdHJpYW5nbGUxLmJWZXJ0ZXgucG9pbnQsIHRyaWFuZ2xlMS5jVmVydGV4LnBvaW50LCBmYXJWZXJ0ZXgyLnBvaW50ICkgfHxcbiAgICAgICAgIFV0aWxzLnBvaW50SW5DaXJjbGVGcm9tUG9pbnRzKCB0cmlhbmdsZTIuYVZlcnRleC5wb2ludCwgdHJpYW5nbGUyLmJWZXJ0ZXgucG9pbnQsIHRyaWFuZ2xlMi5jVmVydGV4LnBvaW50LCBmYXJWZXJ0ZXgxLnBvaW50ICkgKSB7XG4gICAgICAvLyBUT0RPOiBiZXR0ZXIgaGVscGVyIGZ1bmN0aW9ucyBmb3IgYWRkaW5nL3JlbW92aW5nIHRyaWFuZ2xlcyAodGFrZXMgY2FyZSBvZiB0aGUgZWRnZSBzdHVmZilcbiAgICAgIHRyaWFuZ2xlMS5yZW1vdmUoKTtcbiAgICAgIHRyaWFuZ2xlMi5yZW1vdmUoKTtcbiAgICAgIGFycmF5UmVtb3ZlKCB0aGlzLnRyaWFuZ2xlcywgdHJpYW5nbGUxICk7XG4gICAgICBhcnJheVJlbW92ZSggdGhpcy50cmlhbmdsZXMsIHRyaWFuZ2xlMiApO1xuICAgICAgYXJyYXlSZW1vdmUoIHRoaXMuZWRnZXMsIGVkZ2UgKTtcblxuICAgICAgY29uc3QgbmV3RWRnZSA9IG5ldyBFZGdlKCBmYXJWZXJ0ZXgxLCBmYXJWZXJ0ZXgyICk7XG4gICAgICB0aGlzLmVkZ2VzLnB1c2goIG5ld0VkZ2UgKTtcblxuICAgICAgY29uc3QgdHJpYW5nbGUxRWRnZTEgPSB0cmlhbmdsZTIuZ2V0RWRnZU9wcG9zaXRlRnJvbVZlcnRleCggdHJpYW5nbGUyLmdldFZlcnRleEJlZm9yZSggZmFyVmVydGV4MiApICk7XG4gICAgICBjb25zdCB0cmlhbmdsZTFFZGdlMiA9IHRyaWFuZ2xlMS5nZXRFZGdlT3Bwb3NpdGVGcm9tVmVydGV4KCB0cmlhbmdsZTEuZ2V0VmVydGV4QWZ0ZXIoIGZhclZlcnRleDEgKSApO1xuICAgICAgY29uc3QgdHJpYW5nbGUyRWRnZTEgPSB0cmlhbmdsZTEuZ2V0RWRnZU9wcG9zaXRlRnJvbVZlcnRleCggdHJpYW5nbGUxLmdldFZlcnRleEJlZm9yZSggZmFyVmVydGV4MSApICk7XG4gICAgICBjb25zdCB0cmlhbmdsZTJFZGdlMiA9IHRyaWFuZ2xlMi5nZXRFZGdlT3Bwb3NpdGVGcm9tVmVydGV4KCB0cmlhbmdsZTIuZ2V0VmVydGV4QWZ0ZXIoIGZhclZlcnRleDIgKSApO1xuXG4gICAgICAvLyBDb25zdHJ1Y3QgdGhlIG5ldyB0cmlhbmdsZXMgd2l0aCB0aGUgY29ycmVjdCBvcmllbnRhdGlvbnNcbiAgICAgIHRoaXMudHJpYW5nbGVzLnB1c2goIG5ldyBUcmlhbmdsZSggZmFyVmVydGV4MSwgZmFyVmVydGV4MiwgdHJpYW5nbGUxLmdldFZlcnRleEJlZm9yZSggZmFyVmVydGV4MSApLFxuICAgICAgICB0cmlhbmdsZTFFZGdlMSwgdHJpYW5nbGUxRWRnZTIsIG5ld0VkZ2UgKSApO1xuICAgICAgdGhpcy50cmlhbmdsZXMucHVzaCggbmV3IFRyaWFuZ2xlKCBmYXJWZXJ0ZXgyLCBmYXJWZXJ0ZXgxLCB0cmlhbmdsZTIuZ2V0VmVydGV4QmVmb3JlKCBmYXJWZXJ0ZXgyICksXG4gICAgICAgIHRyaWFuZ2xlMkVkZ2UxLCB0cmlhbmdsZTJFZGdlMiwgbmV3RWRnZSApICk7XG5cbiAgICAgIHRoaXMubGVnYWxpemVFZGdlKCB0cmlhbmdsZTFFZGdlMSApO1xuICAgICAgdGhpcy5sZWdhbGl6ZUVkZ2UoIHRyaWFuZ2xlMUVkZ2UyICk7XG4gICAgICB0aGlzLmxlZ2FsaXplRWRnZSggdHJpYW5nbGUyRWRnZTEgKTtcbiAgICAgIHRoaXMubGVnYWxpemVFZGdlKCB0cmlhbmdsZTJFZGdlMiApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wYXJpc29uIGZvciBzb3J0aW5nIHBvaW50cyBieSB5LCB0aGVuIGJ5IHguXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIFRPRE86IERvIHdlIG5lZWQgdG8gcmV2ZXJzZSB0aGUgeCBzb3J0PyBcIklmIG91ciBlZGdlIGlzIGhvcml6b250YWwsIHRoZSBlbmRpbmcgcG9pbnQgd2l0aCBzbWFsbGVyIHggY29vcmRpbmF0ZVxuICAgKiAgICAgICBpcyBjb25zaWRlcmVkIGFzIHRoZSB1cHBlciBwb2ludFwiP1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlcnRleH0gYVxuICAgKiBAcGFyYW0ge1ZlcnRleH0gYlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgc3RhdGljIHZlcnRleENvbXBhcmlzb24oIGEsIGIgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYSBpbnN0YW5jZW9mIFZlcnRleCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGIgaW5zdGFuY2VvZiBWZXJ0ZXggKTtcblxuICAgIGEgPSBhLnBvaW50O1xuICAgIGIgPSBiLnBvaW50O1xuICAgIGlmICggYS55IDwgYi55ICkge1xuICAgICAgcmV0dXJuIC0xO1xuICAgIH1cbiAgICBlbHNlIGlmICggYS55ID4gYi55ICkge1xuICAgICAgcmV0dXJuIDE7XG4gICAgfVxuICAgIGVsc2UgaWYgKCBhLnggPCBiLnggKSB7XG4gICAgICByZXR1cm4gLTE7XG4gICAgfVxuICAgIGVsc2UgaWYgKCBhLnggPiBiLnggKSB7XG4gICAgICByZXR1cm4gMTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBOT1RFOiBIb3cgd291bGQgdGhlIGFsZ29yaXRobSB3b3JrIGlmIHRoaXMgaXMgdGhlIGNhc2U/IFdvdWxkIHRoZSBjb21wYXJpc29uIGV2ZXIgdGVzdCB0aGUgcmVmbGV4aXZlXG4gICAgICAvLyBwcm9wZXJ0eT9cbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBjcm9zcyBwcm9kdWN0IG9mIChhVmVydGV4LXNoYXJlZFZlcnRleCkgYW5kIChiVmVydGV4LXNoYXJlZFZlcnRleClcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtWZXJ0ZXh9IHNoYXJlZFZlcnRleFxuICAgKiBAcGFyYW0ge1ZlcnRleH0gYVZlcnRleFxuICAgKiBAcGFyYW0ge1ZlcnRleH0gYlZlcnRleFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgc3RhdGljIHZlcnRleFByb2R1Y3QoIHNoYXJlZFZlcnRleCwgYVZlcnRleCwgYlZlcnRleCApIHtcbiAgICBjb25zdCBhRGlmZiA9IGFWZXJ0ZXgucG9pbnQubWludXMoIHNoYXJlZFZlcnRleC5wb2ludCApO1xuICAgIGNvbnN0IGJEaWZmID0gYlZlcnRleC5wb2ludC5taW51cyggc2hhcmVkVmVydGV4LnBvaW50ICk7XG4gICAgcmV0dXJuIGFEaWZmLmNyb3NzU2NhbGFyKCBiRGlmZiApO1xuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ0RlbGF1bmF5VHJpYW5ndWxhdGlvbicsIERlbGF1bmF5VHJpYW5ndWxhdGlvbiApO1xuXG5jbGFzcyBWZXJ0ZXgge1xuICAvKipcbiAgICogVmVydGV4IChwb2ludCB3aXRoIGFuIGluZGV4KVxuICAgKiBAcHJpdmF0ZVxuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHBvaW50XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpbmRleCAtIEluZGV4IG9mIHRoZSBwb2ludCBpbiB0aGUgcG9pbnRzIGFycmF5XG4gICAqL1xuICBjb25zdHJ1Y3RvciggcG9pbnQsIGluZGV4ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHBvaW50IGluc3RhbmNlb2YgVmVjdG9yMiApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHBvaW50LmlzRmluaXRlKCkgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlb2YgaW5kZXggPT09ICdudW1iZXInICk7XG5cbiAgICAvLyBAcHVibGljIHtWZWN0b3IyfVxuICAgIHRoaXMucG9pbnQgPSBwb2ludDtcblxuICAgIC8vIEBwdWJsaWMge251bWJlcn1cbiAgICB0aGlzLmluZGV4ID0gaW5kZXg7XG5cbiAgICAvLyBAcHVibGljIHtudW1iZXJ9IC0gV2lsbCBiZSBzZXQgYWZ0ZXIgY29uc3RydWN0aW9uXG4gICAgdGhpcy5zb3J0ZWRJbmRleCA9IC0xO1xuXG4gICAgLy8gQHB1YmxpYyB7QXJyYXkuPFZlcnRleD59IC0gVmVydGljZXMgd2l0aCBcImxvd2VyXCIgeSB2YWx1ZXMgdGhhdCBoYXZlIGNvbnN0cmFpbmVkIGVkZ2VzIHdpdGggdGhpcyB2ZXJ0ZXguXG4gICAgdGhpcy5jb25zdHJhaW5lZFZlcnRpY2VzID0gW107XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgaXMgYW4gYXJ0aWZpY2lhbCB2ZXJ0ZXggKGluZGV4IGxlc3MgdGhhbiB6ZXJvKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQXJ0aWZpY2lhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5pbmRleCA8IDA7XG4gIH1cbn1cblxuY2xhc3MgRWRnZSB7XG4gIC8qKlxuICAgKiBFZGdlIGRlZmluZWQgYnkgdHdvIHZlcnRpY2VzXG4gICAqIEBwcml2YXRlXG4gICAqXG4gICAqIEBwYXJhbSB7VmVydGV4fSBzdGFydFZlcnRleFxuICAgKiBAcGFyYW0ge1ZlcnRleH0gZW5kVmVydGV4XG4gICAqL1xuICBjb25zdHJ1Y3Rvciggc3RhcnRWZXJ0ZXgsIGVuZFZlcnRleCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBzdGFydFZlcnRleCBpbnN0YW5jZW9mIFZlcnRleCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGVuZFZlcnRleCBpbnN0YW5jZW9mIFZlcnRleCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHN0YXJ0VmVydGV4ICE9PSBlbmRWZXJ0ZXgsICdTaG91bGQgYmUgZGlmZmVyZW50IHZlcnRpY2VzJyApO1xuXG4gICAgLy8gQHB1YmxpYyB7VmVydGV4fVxuICAgIHRoaXMuc3RhcnRWZXJ0ZXggPSBzdGFydFZlcnRleDtcbiAgICB0aGlzLmVuZFZlcnRleCA9IGVuZFZlcnRleDtcblxuICAgIC8vIEBwdWJsaWMge0FycmF5LjxUcmlhbmdsZT59IC0gQWRqYWNlbnQgdHJpYW5nbGVzIHRvIHRoZSBlZGdlXG4gICAgdGhpcy50cmlhbmdsZXMgPSBbXTtcblxuICAgIC8vIEBwdWJsaWMge0VkZ2V8bnVsbH0gLSBMaW5rZWQgbGlzdCBmb3IgdGhlIGZyb250IG9mIHRoZSBzd2VlcC1saW5lIChvciBpbiB0aGUgYmFjayBmb3IgdGhlIGNvbnZleCBodWxsKVxuICAgIHRoaXMubmV4dEVkZ2UgPSBudWxsO1xuICAgIHRoaXMucHJldmlvdXNFZGdlID0gbnVsbDtcblxuICAgIC8vIEBwdWJsaWMge2Jvb2xlYW59IC0gQ2FuIGJlIHNldCB0byBub3RlIHRoYXQgaXQgd2FzIGNvbnN0cmFpbmVkXG4gICAgdGhpcy5pc0NvbnN0cmFpbmVkID0gZmFsc2U7XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgdGhpcyBpcyBhbiBhcnRpZmljaWFsIGVkZ2UgKGhhcyBhbiBhcnRpZmljaWFsIHZlcnRleClcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzQXJ0aWZpY2lhbCgpIHtcbiAgICByZXR1cm4gdGhpcy5zdGFydFZlcnRleC5pc0FydGlmaWNpYWwoKSB8fCB0aGlzLmVuZFZlcnRleC5pc0FydGlmaWNpYWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmRzIHRoZSBlZGdlIHRvIHRoZSBlbmQgb2YgdGhpcyBlZGdlIChmb3Igb3VyIGxpbmtlZCBsaXN0KS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0VkZ2V9IGVkZ2VcbiAgICovXG4gIGNvbm5lY3RBZnRlciggZWRnZSApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBlZGdlIGluc3RhbmNlb2YgRWRnZSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuZW5kVmVydGV4ID09PSBlZGdlLnN0YXJ0VmVydGV4ICk7XG5cbiAgICB0aGlzLm5leHRFZGdlID0gZWRnZTtcbiAgICBlZGdlLnByZXZpb3VzRWRnZSA9IHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGlzY29ubmVjdEFmdGVyKCkge1xuICAgIHRoaXMubmV4dEVkZ2UucHJldmlvdXNFZGdlID0gbnVsbDtcbiAgICB0aGlzLm5leHRFZGdlID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGFkamFjZW50IHRyaWFuZ2xlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VHJpYW5nbGV9IHRyaWFuZ2xlXG4gICAqL1xuICBhZGRUcmlhbmdsZSggdHJpYW5nbGUgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdHJpYW5nbGUgaW5zdGFuY2VvZiBUcmlhbmdsZSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMudHJpYW5nbGVzLmxlbmd0aCA8PSAxICk7XG5cbiAgICB0aGlzLnRyaWFuZ2xlcy5wdXNoKCB0cmlhbmdsZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYW4gYWRqYWNlbnQgdHJpYW5nbGUuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtUcmlhbmdsZX0gdHJpYW5nbGVcbiAgICovXG4gIHJlbW92ZVRyaWFuZ2xlKCB0cmlhbmdsZSApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0cmlhbmdsZSBpbnN0YW5jZW9mIFRyaWFuZ2xlICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggXy5pbmNsdWRlcyggdGhpcy50cmlhbmdsZXMsIHRyaWFuZ2xlICkgKTtcblxuICAgIGFycmF5UmVtb3ZlKCB0aGlzLnRyaWFuZ2xlcywgdHJpYW5nbGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB0cmlhbmdsZSBpbiBjb21tb24gd2l0aCBib3RoIGVkZ2VzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7RWRnZX0gb3RoZXJFZGdlXG4gICAqIEByZXR1cm5zIHtUcmlhbmdsZX1cbiAgICovXG4gIGdldFNoYXJlZFRyaWFuZ2xlKCBvdGhlckVkZ2UgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3RoZXJFZGdlIGluc3RhbmNlb2YgRWRnZSApO1xuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy50cmlhbmdsZXMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBjb25zdCB0cmlhbmdsZSA9IHRoaXMudHJpYW5nbGVzWyBpIF07XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCBvdGhlckVkZ2UudHJpYW5nbGVzLmxlbmd0aDsgaisrICkge1xuICAgICAgICBpZiAoIG90aGVyRWRnZS50cmlhbmdsZXNbIGogXSA9PT0gdHJpYW5nbGUgKSB7XG4gICAgICAgICAgcmV0dXJuIHRyaWFuZ2xlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvciggJ05vIGNvbW1vbiB0cmlhbmdsZScgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2ZXJ0ZXggaW4gY29tbW9uIHdpdGggYm90aCBlZGdlcy5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0VkZ2V9IG90aGVyRWRnZVxuICAgKiBAcmV0dXJucyB7VmVydGV4fVxuICAgKi9cbiAgZ2V0U2hhcmVkVmVydGV4KCBvdGhlckVkZ2UgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggb3RoZXJFZGdlIGluc3RhbmNlb2YgRWRnZSApO1xuXG4gICAgaWYgKCB0aGlzLnN0YXJ0VmVydGV4ID09PSBvdGhlckVkZ2Uuc3RhcnRWZXJ0ZXggfHwgdGhpcy5zdGFydFZlcnRleCA9PT0gb3RoZXJFZGdlLmVuZFZlcnRleCApIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXJ0VmVydGV4O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMuZW5kVmVydGV4ID09PSBvdGhlckVkZ2Uuc3RhcnRWZXJ0ZXggfHwgdGhpcy5lbmRWZXJ0ZXggPT09IG90aGVyRWRnZS5lbmRWZXJ0ZXggKTtcbiAgICAgIHJldHVybiB0aGlzLmVuZFZlcnRleDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgb3RoZXIgdmVydGV4IG9mIHRoZSBlZGdlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVydGV4fSB2ZXJ0ZXhcbiAgICogQHJldHVybnMge1ZlcnRleH1cbiAgICovXG4gIGdldE90aGVyVmVydGV4KCB2ZXJ0ZXggKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdmVydGV4IGluc3RhbmNlb2YgVmVydGV4ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdmVydGV4ID09PSB0aGlzLnN0YXJ0VmVydGV4IHx8IHZlcnRleCA9PT0gdGhpcy5lbmRWZXJ0ZXggKTtcblxuICAgIGlmICggdmVydGV4ID09PSB0aGlzLnN0YXJ0VmVydGV4ICkge1xuICAgICAgcmV0dXJuIHRoaXMuZW5kVmVydGV4O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLnN0YXJ0VmVydGV4O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBvdGhlciB0cmlhbmdsZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlZGdlIChpZiB0aGVyZSBhcmUgdHdvKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1RyaWFuZ2xlfSB0cmlhbmdsZVxuICAgKiBAcmV0dXJucyB7VHJpYW5nbGV9XG4gICAqL1xuICBnZXRPdGhlclRyaWFuZ2xlKCB0cmlhbmdsZSApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0cmlhbmdsZSBpbnN0YW5jZW9mIFRyaWFuZ2xlICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy50cmlhbmdsZXMubGVuZ3RoID09PSAyICk7XG5cbiAgICBpZiAoIHRoaXMudHJpYW5nbGVzWyAwIF0gPT09IHRyaWFuZ2xlICkge1xuICAgICAgcmV0dXJuIHRoaXMudHJpYW5nbGVzWyAxIF07XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMudHJpYW5nbGVzWyAwIF07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGUgbGluZSBzZWdtZW50IGRlZmluZWQgYmV0d2VlbiB0aGUgdmVydGV4IGFuZCBib3R0b21WZXJ0ZXggaW50ZXJzZWN0IHRoaXMgZWRnZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlcnRleH0gdmVydGV4XG4gICAqIEBwYXJhbSB7VmVydGV4fSBib3R0b21WZXJ0ZXhcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpbnRlcnNlY3RzQ29uc3RyYWluZWRFZGdlKCB2ZXJ0ZXgsIGJvdHRvbVZlcnRleCApIHtcbiAgICByZXR1cm4gVXRpbHMubGluZVNlZ21lbnRJbnRlcnNlY3Rpb24oIHZlcnRleC5wb2ludC54LCB2ZXJ0ZXgucG9pbnQueSwgYm90dG9tVmVydGV4LnBvaW50LngsIGJvdHRvbVZlcnRleC5wb2ludC55LFxuICAgICAgdGhpcy5zdGFydFZlcnRleC5wb2ludC54LCB0aGlzLnN0YXJ0VmVydGV4LnBvaW50LnksXG4gICAgICB0aGlzLmVuZFZlcnRleC5wb2ludC54LCB0aGlzLmVuZFZlcnRleC5wb2ludC55ICk7XG4gIH1cbn1cblxuY2xhc3MgVHJpYW5nbGUge1xuICAvKipcbiAgICogVHJpYW5nbGUgZGVmaW5lZCBieSB0aHJlZSB2ZXJ0aWNlcyAod2l0aCBlZGdlcylcbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHtWZXJ0ZXh9IGFWZXJ0ZXhcbiAgICogQHBhcmFtIHtWZXJ0ZXh9IGJWZXJ0ZXhcbiAgICogQHBhcmFtIHtWZXJ0ZXh9IGNWZXJ0ZXhcbiAgICogQHBhcmFtIHtFZGdlfSBhRWRnZSAtIEVkZ2Ugb3Bwb3NpdGUgdGhlICdhJyB2ZXJ0ZXhcbiAgICogQHBhcmFtIHtFZGdlfSBiRWRnZSAtIEVkZ2Ugb3Bwb3NpdGUgdGhlICdiJyB2ZXJ0ZXhcbiAgICogQHBhcmFtIHtFZGdlfSBjRWRnZSAtIEVkZ2Ugb3Bwb3NpdGUgdGhlICdjJyB2ZXJ0ZXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKCBhVmVydGV4LCBiVmVydGV4LCBjVmVydGV4LCBhRWRnZSwgYkVkZ2UsIGNFZGdlICkge1xuICAgIC8vIFR5cGUgY2hlY2tzXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYVZlcnRleCBpbnN0YW5jZW9mIFZlcnRleCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGJWZXJ0ZXggaW5zdGFuY2VvZiBWZXJ0ZXggKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjVmVydGV4IGluc3RhbmNlb2YgVmVydGV4ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYUVkZ2UgaW5zdGFuY2VvZiBFZGdlICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYkVkZ2UgaW5zdGFuY2VvZiBFZGdlICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY0VkZ2UgaW5zdGFuY2VvZiBFZGdlICk7XG5cbiAgICAvLyBFbnN1cmUgZWFjaCB2ZXJ0ZXggaXMgTk9UIGluIHRoZSBvcHBvc2l0ZSBlZGdlXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYVZlcnRleCAhPT0gYUVkZ2Uuc3RhcnRWZXJ0ZXggJiYgYVZlcnRleCAhPT0gYUVkZ2UuZW5kVmVydGV4LCAnU2hvdWxkIGJlIGFuIG9wcG9zaXRlIGVkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYlZlcnRleCAhPT0gYkVkZ2Uuc3RhcnRWZXJ0ZXggJiYgYlZlcnRleCAhPT0gYkVkZ2UuZW5kVmVydGV4LCAnU2hvdWxkIGJlIGFuIG9wcG9zaXRlIGVkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY1ZlcnRleCAhPT0gY0VkZ2Uuc3RhcnRWZXJ0ZXggJiYgY1ZlcnRleCAhPT0gY0VkZ2UuZW5kVmVydGV4LCAnU2hvdWxkIGJlIGFuIG9wcG9zaXRlIGVkZ2UnICk7XG5cbiAgICAvLyBFbnN1cmUgZWFjaCB2ZXJ0ZXggSVMgaW4gaXRzIGFkamFjZW50IGVkZ2VzXG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYVZlcnRleCA9PT0gYkVkZ2Uuc3RhcnRWZXJ0ZXggfHwgYVZlcnRleCA9PT0gYkVkZ2UuZW5kVmVydGV4LCAnYVZlcnRleCBzaG91bGQgYmUgaW4gYkVkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYVZlcnRleCA9PT0gY0VkZ2Uuc3RhcnRWZXJ0ZXggfHwgYVZlcnRleCA9PT0gY0VkZ2UuZW5kVmVydGV4LCAnYVZlcnRleCBzaG91bGQgYmUgaW4gY0VkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYlZlcnRleCA9PT0gYUVkZ2Uuc3RhcnRWZXJ0ZXggfHwgYlZlcnRleCA9PT0gYUVkZ2UuZW5kVmVydGV4LCAnYlZlcnRleCBzaG91bGQgYmUgaW4gYUVkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYlZlcnRleCA9PT0gY0VkZ2Uuc3RhcnRWZXJ0ZXggfHwgYlZlcnRleCA9PT0gY0VkZ2UuZW5kVmVydGV4LCAnYlZlcnRleCBzaG91bGQgYmUgaW4gY0VkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY1ZlcnRleCA9PT0gYUVkZ2Uuc3RhcnRWZXJ0ZXggfHwgY1ZlcnRleCA9PT0gYUVkZ2UuZW5kVmVydGV4LCAnY1ZlcnRleCBzaG91bGQgYmUgaW4gYUVkZ2UnICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY1ZlcnRleCA9PT0gYkVkZ2Uuc3RhcnRWZXJ0ZXggfHwgY1ZlcnRleCA9PT0gYkVkZ2UuZW5kVmVydGV4LCAnY1ZlcnRleCBzaG91bGQgYmUgaW4gYkVkZ2UnICk7XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBVdGlscy50cmlhbmdsZUFyZWFTaWduZWQoIGFWZXJ0ZXgucG9pbnQsIGJWZXJ0ZXgucG9pbnQsIGNWZXJ0ZXgucG9pbnQgKSA+IDAsXG4gICAgICAnU2hvdWxkIGJlIGNvdW50ZXJjbG9ja3dpc2UnICk7XG5cbiAgICAvLyBAcHVibGljIHtWZXJ0ZXh9XG4gICAgdGhpcy5hVmVydGV4ID0gYVZlcnRleDtcbiAgICB0aGlzLmJWZXJ0ZXggPSBiVmVydGV4O1xuICAgIHRoaXMuY1ZlcnRleCA9IGNWZXJ0ZXg7XG5cbiAgICAvLyBAcHVibGljIHtFZGdlfVxuICAgIHRoaXMuYUVkZ2UgPSBhRWRnZTtcbiAgICB0aGlzLmJFZGdlID0gYkVkZ2U7XG4gICAgdGhpcy5jRWRnZSA9IGNFZGdlO1xuXG4gICAgdGhpcy5hRWRnZS5hZGRUcmlhbmdsZSggdGhpcyApO1xuICAgIHRoaXMuYkVkZ2UuYWRkVHJpYW5nbGUoIHRoaXMgKTtcbiAgICB0aGlzLmNFZGdlLmFkZFRyaWFuZ2xlKCB0aGlzICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoZSB2ZXJ0ZXggaXMgb25lIGluIHRoZSB0cmlhbmdsZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlcnRleH0gdmVydGV4XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaGFzVmVydGV4KCB2ZXJ0ZXggKSB7XG4gICAgcmV0dXJuIHRoaXMuYVZlcnRleCA9PT0gdmVydGV4IHx8IHRoaXMuYlZlcnRleCA9PT0gdmVydGV4IHx8IHRoaXMuY1ZlcnRleCA9PT0gdmVydGV4O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZlcnRleCB0aGF0IGlzIG9wcG9zaXRlIGZyb20gdGhlIGdpdmVuIGVkZ2UuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtFZGdlfSBlZGdlXG4gICAqIEByZXR1cm5zIHtWZXJ0ZXh9XG4gICAqL1xuICBnZXRWZXJ0ZXhPcHBvc2l0ZUZyb21FZGdlKCBlZGdlICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGVkZ2UgaW5zdGFuY2VvZiBFZGdlICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZWRnZSA9PT0gdGhpcy5hRWRnZSB8fCBlZGdlID09PSB0aGlzLmJFZGdlIHx8IGVkZ2UgPT09IHRoaXMuY0VkZ2UsXG4gICAgICAnU2hvdWxkIGJlIGFuIGVkZ2UgdGhhdCBpcyBwYXJ0IG9mIHRoaXMgdHJpYW5nbGUnICk7XG5cbiAgICBpZiAoIGVkZ2UgPT09IHRoaXMuYUVkZ2UgKSB7XG4gICAgICByZXR1cm4gdGhpcy5hVmVydGV4O1xuICAgIH1cbiAgICBlbHNlIGlmICggZWRnZSA9PT0gdGhpcy5iRWRnZSApIHtcbiAgICAgIHJldHVybiB0aGlzLmJWZXJ0ZXg7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY1ZlcnRleDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZWRnZSB0aGF0IGlzIG9wcG9zaXRlIGZyb20gdGhlIGdpdmVuIHZlcnRleC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlcnRleH0gdmVydGV4XG4gICAqIEByZXR1cm5zIHtFZGdlfVxuICAgKi9cbiAgZ2V0RWRnZU9wcG9zaXRlRnJvbVZlcnRleCggdmVydGV4ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHZlcnRleCBpbnN0YW5jZW9mIFZlcnRleCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHZlcnRleCA9PT0gdGhpcy5hVmVydGV4IHx8IHZlcnRleCA9PT0gdGhpcy5iVmVydGV4IHx8IHZlcnRleCA9PT0gdGhpcy5jVmVydGV4LFxuICAgICAgJ1Nob3VsZCBiZSBhIHZlcnRleCB0aGF0IGlzIHBhcnQgb2YgdGhpcyB0cmlhbmdsZScgKTtcblxuICAgIGlmICggdmVydGV4ID09PSB0aGlzLmFWZXJ0ZXggKSB7XG4gICAgICByZXR1cm4gdGhpcy5hRWRnZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHZlcnRleCA9PT0gdGhpcy5iVmVydGV4ICkge1xuICAgICAgcmV0dXJuIHRoaXMuYkVkZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMuY0VkZ2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHZlcnRleCB0aGF0IGlzIGp1c3QgYmVmb3JlIHRoZSBnaXZlbiB2ZXJ0ZXggKGluIGNvdW50ZXJjbG9ja3dpc2Ugb3JkZXIpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVydGV4fSB2ZXJ0ZXhcbiAgICogQHJldHVybnMge1ZlcnRleH1cbiAgICovXG4gIGdldFZlcnRleEJlZm9yZSggdmVydGV4ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHZlcnRleCBpbnN0YW5jZW9mIFZlcnRleCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHZlcnRleCA9PT0gdGhpcy5hVmVydGV4IHx8IHZlcnRleCA9PT0gdGhpcy5iVmVydGV4IHx8IHZlcnRleCA9PT0gdGhpcy5jVmVydGV4ICk7XG5cbiAgICBpZiAoIHZlcnRleCA9PT0gdGhpcy5hVmVydGV4ICkge1xuICAgICAgcmV0dXJuIHRoaXMuY1ZlcnRleDtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHZlcnRleCA9PT0gdGhpcy5iVmVydGV4ICkge1xuICAgICAgcmV0dXJuIHRoaXMuYVZlcnRleDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICByZXR1cm4gdGhpcy5iVmVydGV4O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB2ZXJ0ZXggdGhhdCBpcyBqdXN0IGFmdGVyIHRoZSBnaXZlbiB2ZXJ0ZXggKGluIGNvdW50ZXJjbG9ja3dpc2Ugb3JkZXIpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVydGV4fSB2ZXJ0ZXhcbiAgICogQHJldHVybnMge1ZlcnRleH1cbiAgICovXG4gIGdldFZlcnRleEFmdGVyKCB2ZXJ0ZXggKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdmVydGV4IGluc3RhbmNlb2YgVmVydGV4ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdmVydGV4ID09PSB0aGlzLmFWZXJ0ZXggfHwgdmVydGV4ID09PSB0aGlzLmJWZXJ0ZXggfHwgdmVydGV4ID09PSB0aGlzLmNWZXJ0ZXggKTtcblxuICAgIGlmICggdmVydGV4ID09PSB0aGlzLmFWZXJ0ZXggKSB7XG4gICAgICByZXR1cm4gdGhpcy5iVmVydGV4O1xuICAgIH1cbiAgICBlbHNlIGlmICggdmVydGV4ID09PSB0aGlzLmJWZXJ0ZXggKSB7XG4gICAgICByZXR1cm4gdGhpcy5jVmVydGV4O1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLmFWZXJ0ZXg7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG9uZSBub24tYXJ0aWZpY2lhbCBlZGdlIGluIHRoZSB0cmlhbmdsZSAoYXNzdW1pbmcgaXQgZXhpc3RzKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7RWRnZXxudWxsfVxuICAgKi9cbiAgZ2V0Tm9uQXJ0aWZpY2lhbEVkZ2UoKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggKCB0aGlzLmFFZGdlLmlzQXJ0aWZpY2lhbCgpICYmIHRoaXMuYkVkZ2UuaXNBcnRpZmljaWFsKCkgJiYgIXRoaXMuY0VkZ2UuaXNBcnRpZmljaWFsKCkgKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICggdGhpcy5hRWRnZS5pc0FydGlmaWNpYWwoKSAmJiAhdGhpcy5iRWRnZS5pc0FydGlmaWNpYWwoKSAmJiB0aGlzLmNFZGdlLmlzQXJ0aWZpY2lhbCgpICkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAoICF0aGlzLmFFZGdlLmlzQXJ0aWZpY2lhbCgpICYmIHRoaXMuYkVkZ2UuaXNBcnRpZmljaWFsKCkgJiYgdGhpcy5jRWRnZS5pc0FydGlmaWNpYWwoKSApIHx8XG4gICAgICAgICAgICAgICAgICAgICAgKCB0aGlzLmFFZGdlLmlzQXJ0aWZpY2lhbCgpICYmIHRoaXMuYkVkZ2UuaXNBcnRpZmljaWFsKCkgJiYgdGhpcy5jRWRnZS5pc0FydGlmaWNpYWwoKSApLFxuICAgICAgJ0F0IG1vc3Qgb25lIGVkZ2Ugc2hvdWxkIGJlIG5vbi1hcnRpZmljaWFsJyApO1xuXG4gICAgaWYgKCAhdGhpcy5hRWRnZS5pc0FydGlmaWNpYWwoKSApIHtcbiAgICAgIHJldHVybiB0aGlzLmFFZGdlO1xuICAgIH1cbiAgICBlbHNlIGlmICggIXRoaXMuYkVkZ2UuaXNBcnRpZmljaWFsKCkgKSB7XG4gICAgICByZXR1cm4gdGhpcy5iRWRnZTtcbiAgICB9XG4gICAgZWxzZSBpZiAoICF0aGlzLmNFZGdlLmlzQXJ0aWZpY2lhbCgpICkge1xuICAgICAgcmV0dXJuIHRoaXMuY0VkZ2U7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5leHQgZWRnZSAoY291bnRlcmNsb2Nrd2lzZSkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtFZGdlfSBlZGdlXG4gICAqIEByZXR1cm5zIHtFZGdlfVxuICAgKi9cbiAgZ2V0TmV4dEVkZ2UoIGVkZ2UgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggZWRnZSA9PT0gdGhpcy5hRWRnZSB8fCBlZGdlID09PSB0aGlzLmJFZGdlIHx8IGVkZ2UgPT09IHRoaXMuY0VkZ2UgKTtcblxuICAgIGlmICggdGhpcy5hRWRnZSA9PT0gZWRnZSApIHtcbiAgICAgIHJldHVybiB0aGlzLmJFZGdlO1xuICAgIH1cbiAgICBpZiAoIHRoaXMuYkVkZ2UgPT09IGVkZ2UgKSB7XG4gICAgICByZXR1cm4gdGhpcy5jRWRnZTtcbiAgICB9XG4gICAgaWYgKCB0aGlzLmNFZGdlID09PSBlZGdlICkge1xuICAgICAgcmV0dXJuIHRoaXMuYUVkZ2U7XG4gICAgfVxuICAgIHRocm93IG5ldyBFcnJvciggJ2lsbGVnYWwgZWRnZScgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcmV2aW91cyBlZGdlIChjbG9ja3dpc2UpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7RWRnZX0gZWRnZVxuICAgKiBAcmV0dXJucyB7RWRnZX1cbiAgICovXG4gIGdldFByZXZpb3VzRWRnZSggZWRnZSApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBlZGdlID09PSB0aGlzLmFFZGdlIHx8IGVkZ2UgPT09IHRoaXMuYkVkZ2UgfHwgZWRnZSA9PT0gdGhpcy5jRWRnZSApO1xuXG4gICAgaWYgKCB0aGlzLmFFZGdlID09PSBlZGdlICkge1xuICAgICAgcmV0dXJuIHRoaXMuY0VkZ2U7XG4gICAgfVxuICAgIGlmICggdGhpcy5iRWRnZSA9PT0gZWRnZSApIHtcbiAgICAgIHJldHVybiB0aGlzLmFFZGdlO1xuICAgIH1cbiAgICBpZiAoIHRoaXMuY0VkZ2UgPT09IGVkZ2UgKSB7XG4gICAgICByZXR1cm4gdGhpcy5iRWRnZTtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoICdpbGxlZ2FsIGVkZ2UnICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIHRoaXMgaXMgYW4gYXJ0aWZpY2lhbCB0cmlhbmdsZSAoaGFzIGFuIGFydGlmaWNpYWwgdmVydGV4KVxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNBcnRpZmljaWFsKCkge1xuICAgIHJldHVybiB0aGlzLmFWZXJ0ZXguaXNBcnRpZmljaWFsKCkgfHwgdGhpcy5iVmVydGV4LmlzQXJ0aWZpY2lhbCgpIHx8IHRoaXMuY1ZlcnRleC5pc0FydGlmaWNpYWwoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqL1xuICByZW1vdmUoKSB7XG4gICAgdGhpcy5hRWRnZS5yZW1vdmVUcmlhbmdsZSggdGhpcyApO1xuICAgIHRoaXMuYkVkZ2UucmVtb3ZlVHJpYW5nbGUoIHRoaXMgKTtcbiAgICB0aGlzLmNFZGdlLnJlbW92ZVRyaWFuZ2xlKCB0aGlzICk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgRGVsYXVuYXlUcmlhbmd1bGF0aW9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLFdBQVcsTUFBTSxtQ0FBbUM7QUFDM0QsT0FBT0MsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxPQUFP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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Dimension2.js
// Copyright 2013-2021, University of Colorado Boulder

/**
 * Basic width and height, like a Bounds2 but without the location defined.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class Dimension2 {
  /**
   * Creates a 2-dimensional size with a width and height
   * @public
   *
   * @param {number} width
   * @param {number} height
   */
  constructor(width, height) {
    // @public {number} - Width of the dimension
    this.width = width;

    // @public {number} - Height of the dimension
    this.height = height;
  }

  /**
   * Debugging string for the dimension.
   * @public
   *
   * @returns {string}
   */
  toString() {
    return `[${this.width}w, ${this.height}h]`;
  }

  /**
   * Sets this dimension to be a copy of another dimension.
   * @public
   *
   * This is the mutable form of the function copy(). This will mutate (change) this dimension, in addition to returning
   * this dimension itself.
   *
   * @param {Dimension2} dimension
   * @returns {Dimension2}
   */
  set(dimension) {
    this.width = dimension.width;
    this.height = dimension.height;
    return this;
  }

  /**
   * Sets the width of the dimension, returning this.
   * @public
   *
   * @param {number} width
   * @returns {Dimension2}
   */
  setWidth(width) {
    this.width = width;
    return this;
  }

  /**
   * Sets the height of the dimension, returning this.
   * @public
   *
   * @param {number} height
   * @returns {Dimension2}
   */
  setHeight(height) {
    this.height = height;
    return this;
  }

  /**
   * Creates a copy of this dimension, or if a dimension is passed in, set that dimension's values to ours.
   * @public
   *
   * This is the immutable form of the function set(), if a dimension is provided. This will return a new dimension,
   * and will not modify this dimension.
   *
   * @param {Dimension2} [dimension] - If not provided, creates a new Dimension2 with filled in values. Otherwise, fills
   *                                   in the values of the provided dimension so that it equals this dimension.
   * @returns {Dimension2}
   */
  copy(dimension) {
    if (dimension) {
      return dimension.set(this);
    } else {
      return new Dimension2(this.width, this.height);
    }
  }

  /**
   * Swap width and height and return a new Dimension2
   * @returns {Dimension2}
   * @public
   */
  swapped() {
    return new Dimension2(this.height, this.width);
  }

  /**
   * Creates a Bounds2 from this dimension based on passing in the minimum (top-left) corner as (x,y).
   * @public
   *
   * @param {number} [x] - Minimum x coordinate of the bounds, or 0 if not provided.
   * @param {number} [y] - Minimum y coordinate of the bounds, or 0 if not provided.
   * @returns {Bounds2}
   */
  toBounds(x, y) {
    x = x !== undefined ? x : 0;
    y = y !== undefined ? y : 0;
    return new Bounds2(x, y, this.width + x, this.height + y);
  }

  /**
   * Exact equality comparison between this dimension and another dimension.
   * @public
   *
   * @param {Dimension2} other
   * @returns {boolean} - Whether the two dimensions have equal width and height
   */
  equals(other) {
    return this.width === other.width && this.height === other.height;
  }
}
js_dot.register('Dimension2', Dimension2);
/* harmony default export */ const js_Dimension2 = ((/* unused pure expression or super */ null && (Dimension2)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiZG90IiwiRGltZW5zaW9uMiIsImNvbnN0cnVjdG9yIiwid2lkdGgiLCJoZWlnaHQiLCJ0b1N0cmluZyIsInNldCIsImRpbWVuc2lvbiIsInNldFdpZHRoIiwic2V0SGVpZ2h0IiwiY29weSIsInN3YXBwZWQiLCJ0b0JvdW5kcyIsIngiLCJ5IiwidW5kZWZpbmVkIiwiZXF1YWxzIiwib3RoZXIiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkRpbWVuc2lvbjIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMSwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQmFzaWMgd2lkdGggYW5kIGhlaWdodCwgbGlrZSBhIEJvdW5kczIgYnV0IHdpdGhvdXQgdGhlIGxvY2F0aW9uIGRlZmluZWQuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBCb3VuZHMyIGZyb20gJy4vQm91bmRzMi5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcblxuY2xhc3MgRGltZW5zaW9uMiB7XG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgMi1kaW1lbnNpb25hbCBzaXplIHdpdGggYSB3aWR0aCBhbmQgaGVpZ2h0XG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdpZHRoXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICovXG4gIGNvbnN0cnVjdG9yKCB3aWR0aCwgaGVpZ2h0ICkge1xuICAgIC8vIEBwdWJsaWMge251bWJlcn0gLSBXaWR0aCBvZiB0aGUgZGltZW5zaW9uXG4gICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuXG4gICAgLy8gQHB1YmxpYyB7bnVtYmVyfSAtIEhlaWdodCBvZiB0aGUgZGltZW5zaW9uXG4gICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICAvKipcbiAgICogRGVidWdnaW5nIHN0cmluZyBmb3IgdGhlIGRpbWVuc2lvbi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGBbJHt0aGlzLndpZHRofXcsICR7dGhpcy5oZWlnaHR9aF1gO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBkaW1lbnNpb24gdG8gYmUgYSBjb3B5IG9mIGFub3RoZXIgZGltZW5zaW9uLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIG11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gY29weSgpLiBUaGlzIHdpbGwgbXV0YXRlIChjaGFuZ2UpIHRoaXMgZGltZW5zaW9uLCBpbiBhZGRpdGlvbiB0byByZXR1cm5pbmdcbiAgICogdGhpcyBkaW1lbnNpb24gaXRzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpbWVuc2lvbjJ9IGRpbWVuc2lvblxuICAgKiBAcmV0dXJucyB7RGltZW5zaW9uMn1cbiAgICovXG4gIHNldCggZGltZW5zaW9uICkge1xuICAgIHRoaXMud2lkdGggPSBkaW1lbnNpb24ud2lkdGg7XG4gICAgdGhpcy5oZWlnaHQgPSBkaW1lbnNpb24uaGVpZ2h0O1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHdpZHRoIG9mIHRoZSBkaW1lbnNpb24sIHJldHVybmluZyB0aGlzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgKiBAcmV0dXJucyB7RGltZW5zaW9uMn1cbiAgICovXG4gIHNldFdpZHRoKCB3aWR0aCApIHtcbiAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaGVpZ2h0IG9mIHRoZSBkaW1lbnNpb24sIHJldHVybmluZyB0aGlzLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcbiAgICogQHJldHVybnMge0RpbWVuc2lvbjJ9XG4gICAqL1xuICBzZXRIZWlnaHQoIGhlaWdodCApIHtcbiAgICB0aGlzLmhlaWdodCA9IGhlaWdodDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29weSBvZiB0aGlzIGRpbWVuc2lvbiwgb3IgaWYgYSBkaW1lbnNpb24gaXMgcGFzc2VkIGluLCBzZXQgdGhhdCBkaW1lbnNpb24ncyB2YWx1ZXMgdG8gb3Vycy5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbW11dGFibGUgZm9ybSBvZiB0aGUgZnVuY3Rpb24gc2V0KCksIGlmIGEgZGltZW5zaW9uIGlzIHByb3ZpZGVkLiBUaGlzIHdpbGwgcmV0dXJuIGEgbmV3IGRpbWVuc2lvbixcbiAgICogYW5kIHdpbGwgbm90IG1vZGlmeSB0aGlzIGRpbWVuc2lvbi5cbiAgICpcbiAgICogQHBhcmFtIHtEaW1lbnNpb24yfSBbZGltZW5zaW9uXSAtIElmIG5vdCBwcm92aWRlZCwgY3JlYXRlcyBhIG5ldyBEaW1lbnNpb24yIHdpdGggZmlsbGVkIGluIHZhbHVlcy4gT3RoZXJ3aXNlLCBmaWxsc1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdGhlIHZhbHVlcyBvZiB0aGUgcHJvdmlkZWQgZGltZW5zaW9uIHNvIHRoYXQgaXQgZXF1YWxzIHRoaXMgZGltZW5zaW9uLlxuICAgKiBAcmV0dXJucyB7RGltZW5zaW9uMn1cbiAgICovXG4gIGNvcHkoIGRpbWVuc2lvbiApIHtcbiAgICBpZiAoIGRpbWVuc2lvbiApIHtcbiAgICAgIHJldHVybiBkaW1lbnNpb24uc2V0KCB0aGlzICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcmV0dXJuIG5ldyBEaW1lbnNpb24yKCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTd2FwIHdpZHRoIGFuZCBoZWlnaHQgYW5kIHJldHVybiBhIG5ldyBEaW1lbnNpb24yXG4gICAqIEByZXR1cm5zIHtEaW1lbnNpb24yfVxuICAgKiBAcHVibGljXG4gICAqL1xuICBzd2FwcGVkKCkge1xuICAgIHJldHVybiBuZXcgRGltZW5zaW9uMiggdGhpcy5oZWlnaHQsIHRoaXMud2lkdGggKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgQm91bmRzMiBmcm9tIHRoaXMgZGltZW5zaW9uIGJhc2VkIG9uIHBhc3NpbmcgaW4gdGhlIG1pbmltdW0gKHRvcC1sZWZ0KSBjb3JuZXIgYXMgKHgseSkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IFt4XSAtIE1pbmltdW0geCBjb29yZGluYXRlIG9mIHRoZSBib3VuZHMsIG9yIDAgaWYgbm90IHByb3ZpZGVkLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW3ldIC0gTWluaW11bSB5IGNvb3JkaW5hdGUgb2YgdGhlIGJvdW5kcywgb3IgMCBpZiBub3QgcHJvdmlkZWQuXG4gICAqIEByZXR1cm5zIHtCb3VuZHMyfVxuICAgKi9cbiAgdG9Cb3VuZHMoIHgsIHkgKSB7XG4gICAgeCA9IHggIT09IHVuZGVmaW5lZCA/IHggOiAwO1xuICAgIHkgPSB5ICE9PSB1bmRlZmluZWQgPyB5IDogMDtcbiAgICByZXR1cm4gbmV3IEJvdW5kczIoIHgsIHksIHRoaXMud2lkdGggKyB4LCB0aGlzLmhlaWdodCArIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeGFjdCBlcXVhbGl0eSBjb21wYXJpc29uIGJldHdlZW4gdGhpcyBkaW1lbnNpb24gYW5kIGFub3RoZXIgZGltZW5zaW9uLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7RGltZW5zaW9uMn0gb3RoZXJcbiAgICogQHJldHVybnMge2Jvb2xlYW59IC0gV2hldGhlciB0aGUgdHdvIGRpbWVuc2lvbnMgaGF2ZSBlcXVhbCB3aWR0aCBhbmQgaGVpZ2h0XG4gICAqL1xuICBlcXVhbHMoIG90aGVyICkge1xuICAgIHJldHVybiB0aGlzLndpZHRoID09PSBvdGhlci53aWR0aCAmJiB0aGlzLmhlaWdodCA9PT0gb3RoZXIuaGVpZ2h0O1xuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ0RpbWVuc2lvbjInLCBEaW1lbnNpb24yICk7XG5cbmV4cG9ydCBkZWZhdWx0IERpbWVuc2lvbjI7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLE9BQU8sTUFBTSxjQUFjO0FBQ2xDLE9BQU9DLEdBQUcsTUFBTSxVQUFVO0FBRTFCLE1BQU1DLFVBQVUsQ0FBQztFQUNmO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFdBQVdBLENBQUVDLEtBQUssRUFBRUMsTUFBTSxFQUFHO0lBQzNCO0lBQ0EsSUFBSSxDQUFDRCxLQUFLLEdBQUdBLEtBQUs7O0lBRWxCO0lBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUdBLE1BQU07RUFDdEI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFFBQVFBLENBQUEsRUFBRztJQUNULE9BQVEsSUFBRyxJQUFJLENBQUNGLEtBQU0sTUFBSyxJQUFJLENBQUNDLE1BQU8sSUFBRztFQUM1Qzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFRSxHQUFHQSxDQUFFQyxTQUFTLEVBQUc7SUFDZixJQUFJLENBQUNKLEtBQUssR0FBR0ksU0FBUyxDQUFDSixLQUFLO0lBQzVCLElBQUksQ0FBQ0MsTUFBTSxHQUFHRyxTQUFTLENBQUNILE1BQU07SUFDOUIsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUksUUFBUUEsQ0FBRUwsS0FBSyxFQUFHO0lBQ2hCLElBQUksQ0FBQ0EsS0FBSyxHQUFHQSxLQUFLO0lBQ2xCLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VNLFNBQVNBLENBQUVMLE1BQU0sRUFBRztJQUNsQixJQUFJLENBQUNBLE1BQU0sR0FBR0EsTUFBTTtJQUNwQixPQUFPLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VNLElBQUlBLENBQUVILFNBQVMsRUFBRztJQUNoQixJQUFLQSxTQUFTLEVBQUc7TUFDZixPQUFPQSxTQUFTLENBQUNELEdBQUcsQ0FBRSxJQUFJLENBQUU7SUFDOUIsQ0FBQyxNQUNJO01BQ0gsT0FBTyxJQUFJTCxVQUFVLENBQUUsSUFBSSxDQUFDRSxLQUFLLEVBQUUsSUFBSSxDQUFDQyxNQUFNLENBQUU7SUFDbEQ7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VPLE9BQU9BLENBQUEsRUFBRztJQUNSLE9BQU8sSUFBSVYsVUFBVSxDQUFFLElBQUksQ0FBQ0csTUFBTSxFQUFFLElBQUksQ0FBQ0QsS0FBSyxDQUFFO0VBQ2xEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRVMsUUFBUUEsQ0FBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUc7SUFDZkQsQ0FBQyxHQUFHQSxDQUFDLEtBQUtFLFNBQVMsR0FBR0YsQ0FBQyxHQUFHLENBQUM7SUFDM0JDLENBQUMsR0FBR0EsQ0FBQyxLQUFLQyxTQUFTLEdBQUdELENBQUMsR0FBRyxDQUFDO0lBQzNCLE9BQU8sSUFBSWYsT0FBTyxDQUFFYyxDQUFDLEVBQUVDLENBQUMsRUFBRSxJQUFJLENBQUNYLEtBQUssR0FBR1UsQ0FBQyxFQUFFLElBQUksQ0FBQ1QsTUFBTSxHQUFHVSxDQUFDLENBQUU7RUFDN0Q7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUUsTUFBTUEsQ0FBRUMsS0FBSyxFQUFHO0lBQ2QsT0FBTyxJQUFJLENBQUNkLEtBQUssS0FBS2MsS0FBSyxDQUFDZCxLQUFLLElBQUksSUFBSSxDQUFDQyxNQUFNLEtBQUthLEtBQUssQ0FBQ2IsTUFBTTtFQUNuRTtBQUNGO0FBRUFKLEdBQUcsQ0FBQ2tCLFFBQVEsQ0FBRSxZQUFZLEVBQUVqQixVQUFVLENBQUU7QUFFeEMsZUFBZUEsVUFBVSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/LUDecomposition.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * LU decomposition, based on Jama (http://math.nist.gov/javanumerics/jama/).  Please note the arbitrary-precision
 * copy LUDecompositionDecimal which should be maintained with this file.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



const ArrayType = window.Float64Array || Array;
class LUDecomposition {
  constructor(matrix) {
    let i;
    let j;
    let k;
    this.matrix = matrix;

    // TODO: size!
    this.LU = matrix.getArrayCopy();
    const LU = this.LU;
    this.m = matrix.getRowDimension();
    const m = this.m;
    this.n = matrix.getColumnDimension();
    const n = this.n;
    this.piv = new Uint32Array(m);
    for (i = 0; i < m; i++) {
      this.piv[i] = i;
    }
    this.pivsign = 1;
    const LUcolj = new ArrayType(m);

    // Outer loop.

    for (j = 0; j < n; j++) {
      // Make a copy of the j-th column to localize references.
      for (i = 0; i < m; i++) {
        LUcolj[i] = LU[matrix.index(i, j)];
      }

      // Apply previous transformations.

      for (i = 0; i < m; i++) {
        // Most of the time is spent in the following dot product.
        const kmax = Math.min(i, j);
        let s = 0.0;
        for (k = 0; k < kmax; k++) {
          const ik = matrix.index(i, k);
          s += LU[ik] * LUcolj[k];
        }
        LUcolj[i] -= s;
        LU[matrix.index(i, j)] = LUcolj[i];
      }

      // Find pivot and exchange if necessary.

      let p = j;
      for (i = j + 1; i < m; i++) {
        if (Math.abs(LUcolj[i]) > Math.abs(LUcolj[p])) {
          p = i;
        }
      }
      if (p !== j) {
        for (k = 0; k < n; k++) {
          const pk = matrix.index(p, k);
          const jk = matrix.index(j, k);
          const t = LU[pk];
          LU[pk] = LU[jk];
          LU[jk] = t;
        }
        k = this.piv[p];
        this.piv[p] = this.piv[j];
        this.piv[j] = k;
        this.pivsign = -this.pivsign;
      }

      // Compute multipliers.

      if (j < m && LU[this.matrix.index(j, j)] !== 0.0) {
        for (i = j + 1; i < m; i++) {
          LU[matrix.index(i, j)] /= LU[matrix.index(j, j)];
        }
      }
    }
  }

  /**
   * @public
   *
   * @returns {boolean}
   */
  isNonsingular() {
    for (let j = 0; j < this.n; j++) {
      const index = this.matrix.index(j, j);
      if (this.LU[index] === 0) {
        return false;
      }
    }
    return true;
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getL() {
    const result = new js_Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        if (i > j) {
          result.entries[result.index(i, j)] = this.LU[this.matrix.index(i, j)];
        } else if (i === j) {
          result.entries[result.index(i, j)] = 1.0;
        } else {
          result.entries[result.index(i, j)] = 0.0;
        }
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getU() {
    const result = new js_Matrix(this.n, this.n);
    for (let i = 0; i < this.n; i++) {
      for (let j = 0; j < this.n; j++) {
        if (i <= j) {
          result.entries[result.index(i, j)] = this.LU[this.matrix.index(i, j)];
        } else {
          result.entries[result.index(i, j)] = 0.0;
        }
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @returns {Uint32Array}
   */
  getPivot() {
    const p = new Uint32Array(this.m);
    for (let i = 0; i < this.m; i++) {
      p[i] = this.piv[i];
    }
    return p;
  }

  /**
   * @public
   *
   * @returns {Float64Array}
   */
  getDoublePivot() {
    const vals = new ArrayType(this.m);
    for (let i = 0; i < this.m; i++) {
      vals[i] = this.piv[i];
    }
    return vals;
  }

  /**
   * @public
   *
   * @returns {number}
   */
  det() {
    if (this.m !== this.n) {
      throw new Error('Matrix must be square.');
    }
    let d = this.pivsign;
    for (let j = 0; j < this.n; j++) {
      d *= this.LU[this.matrix.index(j, j)];
    }
    return d;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  solve(matrix) {
    let i;
    let j;
    let k;
    if (matrix.getRowDimension() !== this.m) {
      throw new Error('Matrix row dimensions must agree.');
    }
    if (!this.isNonsingular()) {
      throw new Error('Matrix is singular.');
    }

    // Copy right hand side with pivoting
    const nx = matrix.getColumnDimension();
    const Xmat = matrix.getArrayRowMatrix(this.piv, 0, nx - 1);

    // Solve L*Y = B(piv,:)
    for (k = 0; k < this.n; k++) {
      for (i = k + 1; i < this.n; i++) {
        for (j = 0; j < nx; j++) {
          Xmat.entries[Xmat.index(i, j)] -= Xmat.entries[Xmat.index(k, j)] * this.LU[this.matrix.index(i, k)];
        }
      }
    }

    // Solve U*X = Y;
    for (k = this.n - 1; k >= 0; k--) {
      for (j = 0; j < nx; j++) {
        Xmat.entries[Xmat.index(k, j)] /= this.LU[this.matrix.index(k, k)];
      }
      for (i = 0; i < k; i++) {
        for (j = 0; j < nx; j++) {
          Xmat.entries[Xmat.index(i, j)] -= Xmat.entries[Xmat.index(k, j)] * this.LU[this.matrix.index(i, k)];
        }
      }
    }
    return Xmat;
  }
}
js_dot.register('LUDecomposition', LUDecomposition);
/* harmony default export */ const js_LUDecomposition = (LUDecomposition);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJNYXRyaXgiLCJBcnJheVR5cGUiLCJ3aW5kb3ciLCJGbG9hdDY0QXJyYXkiLCJBcnJheSIsIkxVRGVjb21wb3NpdGlvbiIsImNvbnN0cnVjdG9yIiwibWF0cml4IiwiaSIsImoiLCJrIiwiTFUiLCJnZXRBcnJheUNvcHkiLCJtIiwiZ2V0Um93RGltZW5zaW9uIiwibiIsImdldENvbHVtbkRpbWVuc2lvbiIsInBpdiIsIlVpbnQzMkFycmF5IiwicGl2c2lnbiIsIkxVY29saiIsImluZGV4Iiwia21heCIsIk1hdGgiLCJtaW4iLCJzIiwiaWsiLCJwIiwiYWJzIiwicGsiLCJqayIsInQiLCJpc05vbnNpbmd1bGFyIiwiZ2V0TCIsInJlc3VsdCIsImVudHJpZXMiLCJnZXRVIiwiZ2V0UGl2b3QiLCJnZXREb3VibGVQaXZvdCIsInZhbHMiLCJkZXQiLCJFcnJvciIsImQiLCJzb2x2ZSIsIm54IiwiWG1hdCIsImdldEFycmF5Um93TWF0cml4IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJMVURlY29tcG9zaXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogTFUgZGVjb21wb3NpdGlvbiwgYmFzZWQgb24gSmFtYSAoaHR0cDovL21hdGgubmlzdC5nb3YvamF2YW51bWVyaWNzL2phbWEvKS4gIFBsZWFzZSBub3RlIHRoZSBhcmJpdHJhcnktcHJlY2lzaW9uXG4gKiBjb3B5IExVRGVjb21wb3NpdGlvbkRlY2ltYWwgd2hpY2ggc2hvdWxkIGJlIG1haW50YWluZWQgd2l0aCB0aGlzIGZpbGUuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IE1hdHJpeCBmcm9tICcuL01hdHJpeC5qcyc7XG5cbmNvbnN0IEFycmF5VHlwZSA9IHdpbmRvdy5GbG9hdDY0QXJyYXkgfHwgQXJyYXk7XG5cbmNsYXNzIExVRGVjb21wb3NpdGlvbiB7XG4gIGNvbnN0cnVjdG9yKCBtYXRyaXggKSB7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG4gICAgbGV0IGs7XG5cbiAgICB0aGlzLm1hdHJpeCA9IG1hdHJpeDtcblxuICAgIC8vIFRPRE86IHNpemUhXG4gICAgdGhpcy5MVSA9IG1hdHJpeC5nZXRBcnJheUNvcHkoKTtcbiAgICBjb25zdCBMVSA9IHRoaXMuTFU7XG4gICAgdGhpcy5tID0gbWF0cml4LmdldFJvd0RpbWVuc2lvbigpO1xuICAgIGNvbnN0IG0gPSB0aGlzLm07XG4gICAgdGhpcy5uID0gbWF0cml4LmdldENvbHVtbkRpbWVuc2lvbigpO1xuICAgIGNvbnN0IG4gPSB0aGlzLm47XG4gICAgdGhpcy5waXYgPSBuZXcgVWludDMyQXJyYXkoIG0gKTtcbiAgICBmb3IgKCBpID0gMDsgaSA8IG07IGkrKyApIHtcbiAgICAgIHRoaXMucGl2WyBpIF0gPSBpO1xuICAgIH1cbiAgICB0aGlzLnBpdnNpZ24gPSAxO1xuICAgIGNvbnN0IExVY29saiA9IG5ldyBBcnJheVR5cGUoIG0gKTtcblxuICAgIC8vIE91dGVyIGxvb3AuXG5cbiAgICBmb3IgKCBqID0gMDsgaiA8IG47IGorKyApIHtcblxuICAgICAgLy8gTWFrZSBhIGNvcHkgb2YgdGhlIGotdGggY29sdW1uIHRvIGxvY2FsaXplIHJlZmVyZW5jZXMuXG4gICAgICBmb3IgKCBpID0gMDsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgTFVjb2xqWyBpIF0gPSBMVVsgbWF0cml4LmluZGV4KCBpLCBqICkgXTtcbiAgICAgIH1cblxuICAgICAgLy8gQXBwbHkgcHJldmlvdXMgdHJhbnNmb3JtYXRpb25zLlxuXG4gICAgICBmb3IgKCBpID0gMDsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgLy8gTW9zdCBvZiB0aGUgdGltZSBpcyBzcGVudCBpbiB0aGUgZm9sbG93aW5nIGRvdCBwcm9kdWN0LlxuICAgICAgICBjb25zdCBrbWF4ID0gTWF0aC5taW4oIGksIGogKTtcbiAgICAgICAgbGV0IHMgPSAwLjA7XG4gICAgICAgIGZvciAoIGsgPSAwOyBrIDwga21heDsgaysrICkge1xuICAgICAgICAgIGNvbnN0IGlrID0gbWF0cml4LmluZGV4KCBpLCBrICk7XG4gICAgICAgICAgcyArPSBMVVsgaWsgXSAqIExVY29salsgayBdO1xuICAgICAgICB9XG5cbiAgICAgICAgTFVjb2xqWyBpIF0gLT0gcztcbiAgICAgICAgTFVbIG1hdHJpeC5pbmRleCggaSwgaiApIF0gPSBMVWNvbGpbIGkgXTtcbiAgICAgIH1cblxuICAgICAgLy8gRmluZCBwaXZvdCBhbmQgZXhjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuXG4gICAgICBsZXQgcCA9IGo7XG4gICAgICBmb3IgKCBpID0gaiArIDE7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgIGlmICggTWF0aC5hYnMoIExVY29salsgaSBdICkgPiBNYXRoLmFicyggTFVjb2xqWyBwIF0gKSApIHtcbiAgICAgICAgICBwID0gaTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCBwICE9PSBqICkge1xuICAgICAgICBmb3IgKCBrID0gMDsgayA8IG47IGsrKyApIHtcbiAgICAgICAgICBjb25zdCBwayA9IG1hdHJpeC5pbmRleCggcCwgayApO1xuICAgICAgICAgIGNvbnN0IGprID0gbWF0cml4LmluZGV4KCBqLCBrICk7XG4gICAgICAgICAgY29uc3QgdCA9IExVWyBwayBdO1xuICAgICAgICAgIExVWyBwayBdID0gTFVbIGprIF07XG4gICAgICAgICAgTFVbIGprIF0gPSB0O1xuICAgICAgICB9XG4gICAgICAgIGsgPSB0aGlzLnBpdlsgcCBdO1xuICAgICAgICB0aGlzLnBpdlsgcCBdID0gdGhpcy5waXZbIGogXTtcbiAgICAgICAgdGhpcy5waXZbIGogXSA9IGs7XG4gICAgICAgIHRoaXMucGl2c2lnbiA9IC10aGlzLnBpdnNpZ247XG4gICAgICB9XG5cbiAgICAgIC8vIENvbXB1dGUgbXVsdGlwbGllcnMuXG5cbiAgICAgIGlmICggaiA8IG0gJiYgTFVbIHRoaXMubWF0cml4LmluZGV4KCBqLCBqICkgXSAhPT0gMC4wICkge1xuICAgICAgICBmb3IgKCBpID0gaiArIDE7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgTFVbIG1hdHJpeC5pbmRleCggaSwgaiApIF0gLz0gTFVbIG1hdHJpeC5pbmRleCggaiwgaiApIF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzTm9uc2luZ3VsYXIoKSB7XG4gICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICBjb25zdCBpbmRleCA9IHRoaXMubWF0cml4LmluZGV4KCBqLCBqICk7XG4gICAgICBpZiAoIHRoaXMuTFVbIGluZGV4IF0gPT09IDAgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgZ2V0TCgpIHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWF0cml4KCB0aGlzLm0sIHRoaXMubiApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICAgIGlmICggaSA+IGogKSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSB0aGlzLkxVWyB0aGlzLm1hdHJpeC5pbmRleCggaSwgaiApIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoIGkgPT09IGogKSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSAxLjA7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXh9XG4gICAqL1xuICBnZXRVKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgoIHRoaXMubiwgdGhpcy5uICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5uOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgaWYgKCBpIDw9IGogKSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSB0aGlzLkxVWyB0aGlzLm1hdHJpeC5pbmRleCggaSwgaiApIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtVaW50MzJBcnJheX1cbiAgICovXG4gIGdldFBpdm90KCkge1xuICAgIGNvbnN0IHAgPSBuZXcgVWludDMyQXJyYXkoIHRoaXMubSApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgcFsgaSBdID0gdGhpcy5waXZbIGkgXTtcbiAgICB9XG4gICAgcmV0dXJuIHA7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7RmxvYXQ2NEFycmF5fVxuICAgKi9cbiAgZ2V0RG91YmxlUGl2b3QoKSB7XG4gICAgY29uc3QgdmFscyA9IG5ldyBBcnJheVR5cGUoIHRoaXMubSApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgdmFsc1sgaSBdID0gdGhpcy5waXZbIGkgXTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHM7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZGV0KCkge1xuICAgIGlmICggdGhpcy5tICE9PSB0aGlzLm4gKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoICdNYXRyaXggbXVzdCBiZSBzcXVhcmUuJyApO1xuICAgIH1cbiAgICBsZXQgZCA9IHRoaXMucGl2c2lnbjtcbiAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgIGQgKj0gdGhpcy5MVVsgdGhpcy5tYXRyaXguaW5kZXgoIGosIGogKSBdO1xuICAgIH1cbiAgICByZXR1cm4gZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHNvbHZlKCBtYXRyaXggKSB7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG4gICAgbGV0IGs7XG4gICAgaWYgKCBtYXRyaXguZ2V0Um93RGltZW5zaW9uKCkgIT09IHRoaXMubSApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciggJ01hdHJpeCByb3cgZGltZW5zaW9ucyBtdXN0IGFncmVlLicgKTtcbiAgICB9XG4gICAgaWYgKCAhdGhpcy5pc05vbnNpbmd1bGFyKCkgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoICdNYXRyaXggaXMgc2luZ3VsYXIuJyApO1xuICAgIH1cblxuICAgIC8vIENvcHkgcmlnaHQgaGFuZCBzaWRlIHdpdGggcGl2b3RpbmdcbiAgICBjb25zdCBueCA9IG1hdHJpeC5nZXRDb2x1bW5EaW1lbnNpb24oKTtcbiAgICBjb25zdCBYbWF0ID0gbWF0cml4LmdldEFycmF5Um93TWF0cml4KCB0aGlzLnBpdiwgMCwgbnggLSAxICk7XG5cbiAgICAvLyBTb2x2ZSBMKlkgPSBCKHBpdiw6KVxuICAgIGZvciAoIGsgPSAwOyBrIDwgdGhpcy5uOyBrKysgKSB7XG4gICAgICBmb3IgKCBpID0gayArIDE7IGkgPCB0aGlzLm47IGkrKyApIHtcbiAgICAgICAgZm9yICggaiA9IDA7IGogPCBueDsgaisrICkge1xuICAgICAgICAgIFhtYXQuZW50cmllc1sgWG1hdC5pbmRleCggaSwgaiApIF0gLT0gWG1hdC5lbnRyaWVzWyBYbWF0LmluZGV4KCBrLCBqICkgXSAqIHRoaXMuTFVbIHRoaXMubWF0cml4LmluZGV4KCBpLCBrICkgXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvbHZlIFUqWCA9IFk7XG4gICAgZm9yICggayA9IHRoaXMubiAtIDE7IGsgPj0gMDsgay0tICkge1xuICAgICAgZm9yICggaiA9IDA7IGogPCBueDsgaisrICkge1xuICAgICAgICBYbWF0LmVudHJpZXNbIFhtYXQuaW5kZXgoIGssIGogKSBdIC89IHRoaXMuTFVbIHRoaXMubWF0cml4LmluZGV4KCBrLCBrICkgXTtcbiAgICAgIH1cbiAgICAgIGZvciAoIGkgPSAwOyBpIDwgazsgaSsrICkge1xuICAgICAgICBmb3IgKCBqID0gMDsgaiA8IG54OyBqKysgKSB7XG4gICAgICAgICAgWG1hdC5lbnRyaWVzWyBYbWF0LmluZGV4KCBpLCBqICkgXSAtPSBYbWF0LmVudHJpZXNbIFhtYXQuaW5kZXgoIGssIGogKSBdICogdGhpcy5MVVsgdGhpcy5tYXRyaXguaW5kZXgoIGksIGsgKSBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBYbWF0O1xuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ0xVRGVjb21wb3NpdGlvbicsIExVRGVjb21wb3NpdGlvbiApO1xuXG5leHBvcnQgZGVmYXVsdCBMVURlY29tcG9zaXRpb247Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsR0FBRyxNQUFNLFVBQVU7QUFDMUIsT0FBT0MsTUFBTSxNQUFNLGFBQWE7QUFFaEMsTUFBTUMsU0FBUyxHQUFHQyxNQUFNLENBQUNDLFlBQVksSUFBSUMsS0FBSztBQUU5QyxNQUFNQyxlQUFlLENBQUM7RUFDcEJDLFdBQVdBLENBQUVDLE1BQU0sRUFBRztJQUNwQixJQUFJQyxDQUFDO0lBQ0wsSUFBSUMsQ0FBQztJQUNMLElBQUlDLENBQUM7SUFFTCxJQUFJLENBQUNILE1BQU0sR0FBR0EsTUFBTTs7SUFFcEI7SUFDQSxJQUFJLENBQUNJLEVBQUUsR0FBR0osTUFBTSxDQUFDSyxZQUFZLEVBQUU7SUFDL0IsTUFBTUQsRUFBRSxHQUFHLElBQUksQ0FBQ0EsRUFBRTtJQUNsQixJQUFJLENBQUNFLENBQUMsR0FBR04sTUFBTSxDQUFDTyxlQUFlLEVBQUU7SUFDakMsTUFBTUQsQ0FBQyxHQUFHLElBQUksQ0FBQ0EsQ0FBQztJQUNoQixJQUFJLENBQUNFLENBQUMsR0FBR1IsTUFBTSxDQUFDUyxrQkFBa0IsRUFBRTtJQUNwQyxNQUFNRCxDQUFDLEdBQUcsSUFBSSxDQUFDQSxDQUFDO0lBQ2hCLElBQUksQ0FBQ0UsR0FBRyxHQUFHLElBQUlDLFdBQVcsQ0FBRUwsQ0FBQyxDQUFFO0lBQy9CLEtBQU1MLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0ssQ0FBQyxFQUFFTCxDQUFDLEVBQUUsRUFBRztNQUN4QixJQUFJLENBQUNTLEdBQUcsQ0FBRVQsQ0FBQyxDQUFFLEdBQUdBLENBQUM7SUFDbkI7SUFDQSxJQUFJLENBQUNXLE9BQU8sR0FBRyxDQUFDO0lBQ2hCLE1BQU1DLE1BQU0sR0FBRyxJQUFJbkIsU0FBUyxDQUFFWSxDQUFDLENBQUU7O0lBRWpDOztJQUVBLEtBQU1KLENBQUMsR0FB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/QRDecomposition.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * QR decomposition, based on Jama (http://math.nist.gov/javanumerics/jama/)
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



const QRDecomposition_ArrayType = window.Float64Array || Array;
class QRDecomposition {
  /**
   * @param {Matrix} matrix
   */
  constructor(matrix) {
    this.matrix = matrix;

    // TODO: size!
    this.QR = matrix.getArrayCopy();
    const QR = this.QR;
    this.m = matrix.getRowDimension();
    const m = this.m;
    this.n = matrix.getColumnDimension();
    const n = this.n;
    this.Rdiag = new QRDecomposition_ArrayType(n);
    let i;
    let j;
    let k;

    // Main loop.
    for (k = 0; k < n; k++) {
      // Compute 2-norm of k-th column without under/overflow.
      let nrm = 0;
      for (i = k; i < m; i++) {
        nrm = js_Matrix.hypot(nrm, QR[this.matrix.index(i, k)]);
      }
      if (nrm !== 0.0) {
        // Form k-th Householder vector.
        if (QR[this.matrix.index(k, k)] < 0) {
          nrm = -nrm;
        }
        for (i = k; i < m; i++) {
          QR[this.matrix.index(i, k)] /= nrm;
        }
        QR[this.matrix.index(k, k)] += 1.0;

        // Apply transformation to remaining columns.
        for (j = k + 1; j < n; j++) {
          let s = 0.0;
          for (i = k; i < m; i++) {
            s += QR[this.matrix.index(i, k)] * QR[this.matrix.index(i, j)];
          }
          s = -s / QR[this.matrix.index(k, k)];
          for (i = k; i < m; i++) {
            QR[this.matrix.index(i, j)] += s * QR[this.matrix.index(i, k)];
          }
        }
      }
      this.Rdiag[k] = -nrm;
    }
  }

  /**
   * @public
   *
   * @returns {boolean}
   */
  isFullRank() {
    for (let j = 0; j < this.n; j++) {
      if (this.Rdiag[j] === 0) {
        return false;
      }
    }
    return true;
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getH() {
    const result = new js_Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        if (i >= j) {
          result.entries[result.index(i, j)] = this.QR[this.matrix.index(i, j)];
        } else {
          result.entries[result.index(i, j)] = 0.0;
        }
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getR() {
    const result = new js_Matrix(this.n, this.n);
    for (let i = 0; i < this.n; i++) {
      for (let j = 0; j < this.n; j++) {
        if (i < j) {
          result.entries[result.index(i, j)] = this.QR[this.matrix.index(i, j)];
        } else if (i === j) {
          result.entries[result.index(i, j)] = this.Rdiag[i];
        } else {
          result.entries[result.index(i, j)] = 0.0;
        }
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getQ() {
    let i;
    let j;
    let k;
    const result = new js_Matrix(this.m, this.n);
    for (k = this.n - 1; k >= 0; k--) {
      for (i = 0; i < this.m; i++) {
        result.entries[result.index(i, k)] = 0.0;
      }
      result.entries[result.index(k, k)] = 1.0;
      for (j = k; j < this.n; j++) {
        if (this.QR[this.matrix.index(k, k)] !== 0) {
          let s = 0.0;
          for (i = k; i < this.m; i++) {
            s += this.QR[this.matrix.index(i, k)] * result.entries[result.index(i, j)];
          }
          s = -s / this.QR[this.matrix.index(k, k)];
          for (i = k; i < this.m; i++) {
            result.entries[result.index(i, j)] += s * this.QR[this.matrix.index(i, k)];
          }
        }
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  solve(matrix) {
    if (matrix.getRowDimension() !== this.m) {
      throw new Error('Matrix row dimensions must agree.');
    }
    if (!this.isFullRank()) {
      throw new Error('Matrix is rank deficient.');
    }
    let i;
    let j;
    let k;

    // Copy right hand side
    const nx = matrix.getColumnDimension();
    const X = matrix.getArrayCopy();

    // Compute Y = transpose(Q)*matrix
    for (k = 0; k < this.n; k++) {
      for (j = 0; j < nx; j++) {
        let s = 0.0;
        for (i = k; i < this.m; i++) {
          s += this.QR[this.matrix.index(i, k)] * X[matrix.index(i, j)];
        }
        s = -s / this.QR[this.matrix.index(k, k)];
        for (i = k; i < this.m; i++) {
          X[matrix.index(i, j)] += s * this.QR[this.matrix.index(i, k)];
        }
      }
    }

    // Solve R*X = Y;
    for (k = this.n - 1; k >= 0; k--) {
      for (j = 0; j < nx; j++) {
        X[matrix.index(k, j)] /= this.Rdiag[k];
      }
      for (i = 0; i < k; i++) {
        for (j = 0; j < nx; j++) {
          X[matrix.index(i, j)] -= X[matrix.index(k, j)] * this.QR[this.matrix.index(i, k)];
        }
      }
    }
    return new js_Matrix(this.n, nx, X, true).getMatrix(0, this.n - 1, 0, nx - 1);
  }
}
js_dot.register('QRDecomposition', QRDecomposition);
/* harmony default export */ const js_QRDecomposition = (QRDecomposition);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJNYXRyaXgiLCJBcnJheVR5cGUiLCJ3aW5kb3ciLCJGbG9hdDY0QXJyYXkiLCJBcnJheSIsIlFSRGVjb21wb3NpdGlvbiIsImNvbnN0cnVjdG9yIiwibWF0cml4IiwiUVIiLCJnZXRBcnJheUNvcHkiLCJtIiwiZ2V0Um93RGltZW5zaW9uIiwibiIsImdldENvbHVtbkRpbWVuc2lvbiIsIlJkaWFnIiwiaSIsImoiLCJrIiwibnJtIiwiaHlwb3QiLCJpbmRleCIsInMiLCJpc0Z1bGxSYW5rIiwiZ2V0SCIsInJlc3VsdCIsImVudHJpZXMiLCJnZXRSIiwiZ2V0USIsInNvbHZlIiwiRXJyb3IiLCJueCIsIlgiLCJnZXRNYXRyaXgiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlFSRGVjb21wb3NpdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBRUiBkZWNvbXBvc2l0aW9uLCBiYXNlZCBvbiBKYW1hIChodHRwOi8vbWF0aC5uaXN0Lmdvdi9qYXZhbnVtZXJpY3MvamFtYS8pXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IE1hdHJpeCBmcm9tICcuL01hdHJpeC5qcyc7XG5cbmNvbnN0IEFycmF5VHlwZSA9IHdpbmRvdy5GbG9hdDY0QXJyYXkgfHwgQXJyYXk7XG5cbmNsYXNzIFFSRGVjb21wb3NpdGlvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge01hdHJpeH0gbWF0cml4XG4gICAqL1xuICBjb25zdHJ1Y3RvciggbWF0cml4ICkge1xuICAgIHRoaXMubWF0cml4ID0gbWF0cml4O1xuXG4gICAgLy8gVE9ETzogc2l6ZSFcbiAgICB0aGlzLlFSID0gbWF0cml4LmdldEFycmF5Q29weSgpO1xuICAgIGNvbnN0IFFSID0gdGhpcy5RUjtcbiAgICB0aGlzLm0gPSBtYXRyaXguZ2V0Um93RGltZW5zaW9uKCk7XG4gICAgY29uc3QgbSA9IHRoaXMubTtcbiAgICB0aGlzLm4gPSBtYXRyaXguZ2V0Q29sdW1uRGltZW5zaW9uKCk7XG4gICAgY29uc3QgbiA9IHRoaXMubjtcblxuICAgIHRoaXMuUmRpYWcgPSBuZXcgQXJyYXlUeXBlKCBuICk7XG5cbiAgICBsZXQgaTtcbiAgICBsZXQgajtcbiAgICBsZXQgaztcblxuICAgIC8vIE1haW4gbG9vcC5cbiAgICBmb3IgKCBrID0gMDsgayA8IG47IGsrKyApIHtcbiAgICAgIC8vIENvbXB1dGUgMi1ub3JtIG9mIGstdGggY29sdW1uIHdpdGhvdXQgdW5kZXIvb3ZlcmZsb3cuXG4gICAgICBsZXQgbnJtID0gMDtcbiAgICAgIGZvciAoIGkgPSBrOyBpIDwgbTsgaSsrICkge1xuICAgICAgICBucm0gPSBNYXRyaXguaHlwb3QoIG5ybSwgUVJbIHRoaXMubWF0cml4LmluZGV4KCBpLCBrICkgXSApO1xuICAgICAgfVxuXG4gICAgICBpZiAoIG5ybSAhPT0gMC4wICkge1xuICAgICAgICAvLyBGb3JtIGstdGggSG91c2Vob2xkZXIgdmVjdG9yLlxuICAgICAgICBpZiAoIFFSWyB0aGlzLm1hdHJpeC5pbmRleCggaywgayApIF0gPCAwICkge1xuICAgICAgICAgIG5ybSA9IC1ucm07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICggaSA9IGs7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgUVJbIHRoaXMubWF0cml4LmluZGV4KCBpLCBrICkgXSAvPSBucm07XG4gICAgICAgIH1cbiAgICAgICAgUVJbIHRoaXMubWF0cml4LmluZGV4KCBrLCBrICkgXSArPSAxLjA7XG5cbiAgICAgICAgLy8gQXBwbHkgdHJhbnNmb3JtYXRpb24gdG8gcmVtYWluaW5nIGNvbHVtbnMuXG4gICAgICAgIGZvciAoIGogPSBrICsgMTsgaiA8IG47IGorKyApIHtcbiAgICAgICAgICBsZXQgcyA9IDAuMDtcbiAgICAgICAgICBmb3IgKCBpID0gazsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgICAgIHMgKz0gUVJbIHRoaXMubWF0cml4LmluZGV4KCBpLCBrICkgXSAqIFFSWyB0aGlzLm1hdHJpeC5pbmRleCggaSwgaiApIF07XG4gICAgICAgICAgfVxuICAgICAgICAgIHMgPSAtcyAvIFFSWyB0aGlzLm1hdHJpeC5pbmRleCggaywgayApIF07XG4gICAgICAgICAgZm9yICggaSA9IGs7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgICBRUlsgdGhpcy5tYXRyaXguaW5kZXgoIGksIGogKSBdICs9IHMgKiBRUlsgdGhpcy5tYXRyaXguaW5kZXgoIGksIGsgKSBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5SZGlhZ1sgayBdID0gLW5ybTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRnVsbFJhbmsoKSB7XG4gICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICBpZiAoIHRoaXMuUmRpYWdbIGogXSA9PT0gMCApIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXh9XG4gICAqL1xuICBnZXRIKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgoIHRoaXMubSwgdGhpcy5uICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgaWYgKCBpID49IGogKSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSB0aGlzLlFSWyB0aGlzLm1hdHJpeC5pbmRleCggaSwgaiApIF07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXh9XG4gICAqL1xuICBnZXRSKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgoIHRoaXMubiwgdGhpcy5uICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5uOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgaWYgKCBpIDwgaiApIHtcbiAgICAgICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBqICkgXSA9IHRoaXMuUVJbIHRoaXMubWF0cml4LmluZGV4KCBpLCBqICkgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICggaSA9PT0gaiApIHtcbiAgICAgICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBqICkgXSA9IHRoaXMuUmRpYWdbIGkgXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBqICkgXSA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGdldFEoKSB7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG4gICAgbGV0IGs7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdHJpeCggdGhpcy5tLCB0aGlzLm4gKTtcbiAgICBmb3IgKCBrID0gdGhpcy5uIC0gMTsgayA+PSAwOyBrLS0gKSB7XG4gICAgICBmb3IgKCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBrICkgXSA9IDAuMDtcbiAgICAgIH1cbiAgICAgIHJlc3VsdC5lbnRyaWVzWyByZXN1bHQuaW5kZXgoIGssIGsgKSBdID0gMS4wO1xuICAgICAgZm9yICggaiA9IGs7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgaWYgKCB0aGlzLlFSWyB0aGlzLm1hdHJpeC5pbmRleCggaywgayApIF0gIT09IDAgKSB7XG4gICAgICAgICAgbGV0IHMgPSAwLjA7XG4gICAgICAgICAgZm9yICggaSA9IGs7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgICAgICAgIHMgKz0gdGhpcy5RUlsgdGhpcy5tYXRyaXguaW5kZXgoIGksIGsgKSBdICogcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF07XG4gICAgICAgICAgfVxuICAgICAgICAgIHMgPSAtcyAvIHRoaXMuUVJbIHRoaXMubWF0cml4LmluZGV4KCBrLCBrICkgXTtcbiAgICAgICAgICBmb3IgKCBpID0gazsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gKz0gcyAqIHRoaXMuUVJbIHRoaXMubWF0cml4LmluZGV4KCBpLCBrICkgXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHNvbHZlKCBtYXRyaXggKSB7XG4gICAgaWYgKCBtYXRyaXguZ2V0Um93RGltZW5zaW9uKCkgIT09IHRoaXMubSApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciggJ01hdHJpeCByb3cgZGltZW5zaW9ucyBtdXN0IGFncmVlLicgKTtcbiAgICB9XG4gICAgaWYgKCAhdGhpcy5pc0Z1bGxSYW5rKCkgKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoICdNYXRyaXggaXMgcmFuayBkZWZpY2llbnQuJyApO1xuICAgIH1cblxuICAgIGxldCBpO1xuICAgIGxldCBqO1xuICAgIGxldCBrO1xuXG4gICAgLy8gQ29weSByaWdodCBoYW5kIHNpZGVcbiAgICBjb25zdCBueCA9IG1hdHJpeC5nZXRDb2x1bW5EaW1lbnNpb24oKTtcbiAgICBjb25zdCBYID0gbWF0cml4LmdldEFycmF5Q29weSgpO1xuXG4gICAgLy8gQ29tcHV0ZSBZID0gdHJhbnNwb3NlKFEpKm1hdHJpeFxuICAgIGZvciAoIGsgPSAwOyBrIDwgdGhpcy5uOyBrKysgKSB7XG4gICAgICBmb3IgKCBqID0gMDsgaiA8IG54OyBqKysgKSB7XG4gICAgICAgIGxldCBzID0gMC4wO1xuICAgICAgICBmb3IgKCBpID0gazsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgICAgIHMgKz0gdGhpcy5RUlsgdGhpcy5tYXRyaXguaW5kZXgoIGksIGsgKSBdICogWFsgbWF0cml4LmluZGV4KCBpLCBqICkgXTtcbiAgICAgICAgfVxuICAgICAgICBzID0gLXMgLyB0aGlzLlFSWyB0aGlzLm1hdHJpeC5pbmRleCggaywgayApIF07XG4gICAgICAgIGZvciAoIGkgPSBrOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICAgICAgWFsgbWF0cml4LmluZGV4KCBpLCBqICkgXSArPSBzICogdGhpcy5RUlsgdGhpcy5tYXRyaXguaW5kZXgoIGksIGsgKSBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU29sdmUgUipYID0gWTtcbiAgICBmb3IgKCBrID0gdGhpcy5uIC0gMTsgayA+PSAwOyBrLS0gKSB7XG4gICAgICBmb3IgKCBqID0gMDsgaiA8IG54OyBqKysgKSB7XG4gICAgICAgIFhbIG1hdHJpeC5pbmRleCggaywgaiApIF0gLz0gdGhpcy5SZGlhZ1sgayBdO1xuICAgICAgfVxuICAgICAgZm9yICggaSA9IDA7IGkgPCBrOyBpKysgKSB7XG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgbng7IGorKyApIHtcbiAgICAgICAgICBYWyBtYXRyaXguaW5kZXgoIGksIGogKSBdIC09IFhbIG1hdHJpeC5pbmRleCggaywgaiApIF0gKiB0aGlzLlFSWyB0aGlzLm1hdHJpeC5pbmRleCggaSwgayApIF07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5ldyBNYXRyaXgoIHRoaXMubiwgbngsIFgsIHRydWUgKS5nZXRNYXRyaXgoIDAsIHRoaXMubiAtIDEsIDAsIG54IC0gMSApO1xuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ1FSRGVjb21wb3NpdGlvbicsIFFSRGVjb21wb3NpdGlvbiApO1xuXG5leHBvcnQgZGVmYXVsdCBRUkRlY29tcG9zaXRpb247Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEdBQUcsTUFBTSxVQUFVO0FBQzFCLE9BQU9DLE1BQU0sTUFBTSxhQUFhO0FBRWhDLE1BQU1DLFNBQVMsR0FBR0MsTUFBTSxDQUFDQyxZQUFZLElBQUlDLEtBQUs7QUFFOUMsTUFBTUMsZUFBZSxDQUFDO0VBQ3BCO0FBQ0Y7QUFDQTtFQUNFQyxXQUFXQSxDQUFFQyxNQUFNLEVBQUc7SUFDcEIsSUFBSSxDQUFDQSxNQUFNLEdBQUdBLE1BQU07O0lBRXBCO0lBQ0EsSUFBSSxDQUFDQyxFQUFFLEdBQUdELE1BQU0sQ0FBQ0UsWUFBWSxFQUFFO0lBQy9CLE1BQU1ELEVBQUUsR0FBRyxJQUFJLENBQUNBLEVBQUU7SUFDbEIsSUFBSSxDQUFDRSxDQUFDLEdBQUdILE1BQU0sQ0FBQ0ksZUFBZSxFQUFFO0lBQ2pDLE1BQU1ELENBQUMsR0FBRyxJQUFJLENBQUNBLENBQUM7SUFDaEIsSUFB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/SingularValueDecomposition.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * SVD decomposition, based on Jama (http://math.nist.gov/javanumerics/jama/)
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



const SingularValueDecomposition_ArrayType = window.Float64Array || Array;
class SingularValueDecomposition {
  /**
   * @param {Matrix} matrix
   */
  constructor(matrix) {
    this.matrix = matrix;
    const Arg = matrix;

    // Derived from LINPACK code.
    // Initialize.
    const A = Arg.getArrayCopy();
    this.m = Arg.getRowDimension();
    this.n = Arg.getColumnDimension();
    const m = this.m;
    const n = this.n;
    const min = Math.min;
    const max = Math.max;
    const pow = Math.pow;
    const abs = Math.abs;

    /* Apparently the failing cases are only a proper subset of (m<n),
     so let's not throw error.  Correct fix to come later?
     if (m<n) {
     throw new IllegalArgumentException("Jama SVD only works for m >= n"); }
     */
    const nu = min(m, n);
    this.s = new SingularValueDecomposition_ArrayType(min(m + 1, n));
    const s = this.s;
    this.U = new SingularValueDecomposition_ArrayType(m * nu);
    const U = this.U;
    this.V = new SingularValueDecomposition_ArrayType(n * n);
    const V = this.V;
    const e = new SingularValueDecomposition_ArrayType(n);
    const work = new SingularValueDecomposition_ArrayType(m);
    const wantu = true;
    const wantv = true;
    let i;
    let j;
    let k;
    let t;
    let f;
    let cs;
    let sn;
    const hypot = js_Matrix.hypot;

    // Reduce A to bidiagonal form, storing the diagonal elements
    // in s and the super-diagonal elements in e.

    const nct = min(m - 1, n);
    const nrt = max(0, min(n - 2, m));
    for (k = 0; k < max(nct, nrt); k++) {
      if (k < nct) {
        // Compute the transformation for the k-th column and
        // place the k-th diagonal in s[k].
        // Compute 2-norm of k-th column without under/overflow.
        s[k] = 0;
        for (i = k; i < m; i++) {
          s[k] = hypot(s[k], A[i * n + k]);
        }
        if (s[k] !== 0.0) {
          if (A[k * n + k] < 0.0) {
            s[k] = -s[k];
          }
          for (i = k; i < m; i++) {
            A[i * n + k] /= s[k];
          }
          A[k * n + k] += 1.0;
        }
        s[k] = -s[k];
      }
      for (j = k + 1; j < n; j++) {
        if (k < nct && s[k] !== 0.0) {
          // Apply the transformation.

          t = 0;
          for (i = k; i < m; i++) {
            t += A[i * n + k] * A[i * n + j];
          }
          t = -t / A[k * n + k];
          for (i = k; i < m; i++) {
            A[i * n + j] += t * A[i * n + k];
          }
        }

        // Place the k-th row of A into e for the
        // subsequent calculation of the row transformation.

        e[j] = A[k * n + j];
      }
      if (wantu && k < nct) {
        // Place the transformation in U for subsequent back
        // multiplication.

        for (i = k; i < m; i++) {
          U[i * nu + k] = A[i * n + k];
        }
      }
      if (k < nrt) {
        // Compute the k-th row transformation and place the
        // k-th super-diagonal in e[k].
        // Compute 2-norm without under/overflow.
        e[k] = 0;
        for (i = k + 1; i < n; i++) {
          e[k] = hypot(e[k], e[i]);
        }
        if (e[k] !== 0.0) {
          if (e[k + 1] < 0.0) {
            e[k] = -e[k];
          }
          for (i = k + 1; i < n; i++) {
            e[i] /= e[k];
          }
          e[k + 1] += 1.0;
        }
        e[k] = -e[k];
        if (k + 1 < m && e[k] !== 0.0) {
          // Apply the transformation.

          for (i = k + 1; i < m; i++) {
            work[i] = 0.0;
          }
          for (j = k + 1; j < n; j++) {
            for (i = k + 1; i < m; i++) {
              work[i] += e[j] * A[i * n + j];
            }
          }
          for (j = k + 1; j < n; j++) {
            t = -e[j] / e[k + 1];
            for (i = k + 1; i < m; i++) {
              A[i * n + j] += t * work[i];
            }
          }
        }
        if (wantv) {
          // Place the transformation in V for subsequent
          // back multiplication.

          for (i = k + 1; i < n; i++) {
            V[i * n + k] = e[i];
          }
        }
      }
    }

    // Set up the final bidiagonal matrix or order p.

    let p = min(n, m + 1);
    if (nct < n) {
      s[nct] = A[nct * n + nct];
    }
    if (m < p) {
      s[p - 1] = 0.0;
    }
    if (nrt + 1 < p) {
      e[nrt] = A[nrt * n + p - 1];
    }
    e[p - 1] = 0.0;

    // If required, generate U.

    if (wantu) {
      for (j = nct; j < nu; j++) {
        for (i = 0; i < m; i++) {
          U[i * nu + j] = 0.0;
        }
        U[j * nu + j] = 1.0;
      }
      for (k = nct - 1; k >= 0; k--) {
        if (s[k] !== 0.0) {
          for (j = k + 1; j < nu; j++) {
            t = 0;
            for (i = k; i < m; i++) {
              t += U[i * nu + k] * U[i * nu + j];
            }
            t = -t / U[k * nu + k];
            for (i = k; i < m; i++) {
              U[i * nu + j] += t * U[i * nu + k];
            }
          }
          for (i = k; i < m; i++) {
            U[i * nu + k] = -U[i * nu + k];
          }
          U[k * nu + k] = 1.0 + U[k * nu + k];
          for (i = 0; i < k - 1; i++) {
            U[i * nu + k] = 0.0;
          }
        } else {
          for (i = 0; i < m; i++) {
            U[i * nu + k] = 0.0;
          }
          U[k * nu + k] = 1.0;
        }
      }
    }

    // If required, generate V.

    if (wantv) {
      for (k = n - 1; k >= 0; k--) {
        if (k < nrt && e[k] !== 0.0) {
          for (j = k + 1; j < nu; j++) {
            t = 0;
            for (i = k + 1; i < n; i++) {
              t += V[i * n + k] * V[i * n + j];
            }
            t = -t / V[(k + 1) * n + k];
            for (i = k + 1; i < n; i++) {
              V[i * n + j] += t * V[i * n + k];
            }
          }
        }
        for (i = 0; i < n; i++) {
          V[i * n + k] = 0.0;
        }
        V[k * n + k] = 1.0;
      }
    }

    // Main iteration loop for the singular values.

    const pp = p - 1;
    let iter = 0;
    const eps = pow(2.0, -52.0);
    const tiny = pow(2.0, -966.0);
    while (p > 0) {
      let kase;

      // Here is where a test for too many iterations would go.
      if (iter > 500) {
        break;
      }

      // This section of the program inspects for
      // negligible elements in the s and e arrays.  On
      // completion the variables kase and k are set as follows.

      // kase = 1   if s(p) and e[k-1] are negligible and k<p
      // kase = 2   if s(k) is negligible and k<p
      // kase = 3   if e[k-1] is negligible, k<p, and
      //        s(k), ..., s(p) are not negligible (qr step).
      // kase = 4   if e(p-1) is negligible (convergence).

      for (k = p - 2; k >= -1; k--) {
        if (k === -1) {
          break;
        }
        if (abs(e[k]) <= tiny + eps * (abs(s[k]) + abs(s[k + 1]))) {
          e[k] = 0.0;
          break;
        }
      }
      if (k === p - 2) {
        kase = 4;
      } else {
        let ks;
        for (ks = p - 1; ks >= k; ks--) {
          if (ks === k) {
            break;
          }
          t = (ks !== p ? abs(e[ks]) : 0) + (ks !== k + 1 ? abs(e[ks - 1]) : 0);
          if (abs(s[ks]) <= tiny + eps * t) {
            s[ks] = 0.0;
            break;
          }
        }
        if (ks === k) {
          kase = 3;
        } else if (ks === p - 1) {
          kase = 1;
        } else {
          kase = 2;
          k = ks;
        }
      }
      k++;

      // Perform the task indicated by kase.

      switch (kase) {
        // Deflate negligible s(p).

        case 1:
          {
            f = e[p - 2];
            e[p - 2] = 0.0;
            for (j = p - 2; j >= k; j--) {
              t = hypot(s[j], f);
              cs = s[j] / t;
              sn = f / t;
              s[j] = t;
              if (j !== k) {
                f = -sn * e[j - 1];
                e[j - 1] = cs * e[j - 1];
              }
              if (wantv) {
                for (i = 0; i < n; i++) {
                  t = cs * V[i * n + j] + sn * V[i * n + p - 1];
                  V[i * n + p - 1] = -sn * V[i * n + j] + cs * V[i * n + p - 1];
                  V[i * n + j] = t;
                }
              }
            }
          }
          break;

        // Split at negligible s(k).

        case 2:
          {
            f = e[k - 1];
            e[k - 1] = 0.0;
            for (j = k; j < p; j++) {
              t = hypot(s[j], f);
              cs = s[j] / t;
              sn = f / t;
              s[j] = t;
              f = -sn * e[j];
              e[j] = cs * e[j];
              if (wantu) {
                for (i = 0; i < m; i++) {
                  t = cs * U[i * nu + j] + sn * U[i * nu + k - 1];
                  U[i * nu + k - 1] = -sn * U[i * nu + j] + cs * U[i * nu + k - 1];
                  U[i * nu + j] = t;
                }
              }
            }
          }
          break;

        // Perform one qr step.

        case 3:
          {
            // Calculate the shift.

            const scale = max(max(max(max(abs(s[p - 1]), abs(s[p - 2])), abs(e[p - 2])), abs(s[k])), abs(e[k]));
            const sp = s[p - 1] / scale;
            const spm1 = s[p - 2] / scale;
            const epm1 = e[p - 2] / scale;
            const sk = s[k] / scale;
            const ek = e[k] / scale;
            const b = ((spm1 + sp) * (spm1 - sp) + epm1 * epm1) / 2.0;
            const c = sp * epm1 * (sp * epm1);
            let shift = 0.0;
            if (b !== 0.0 || c !== 0.0) {
              shift = Math.sqrt(b * b + c);
              if (b < 0.0) {
                shift = -shift;
              }
              shift = c / (b + shift);
            }
            f = (sk + sp) * (sk - sp) + shift;
            let g = sk * ek;

            // Chase zeros.

            for (j = k; j < p - 1; j++) {
              t = hypot(f, g);
              cs = f / t;
              sn = g / t;
              if (j !== k) {
                e[j - 1] = t;
              }
              f = cs * s[j] + sn * e[j];
              e[j] = cs * e[j] - sn * s[j];
              g = sn * s[j + 1];
              s[j + 1] = cs * s[j + 1];
              if (wantv) {
                for (i = 0; i < n; i++) {
                  t = cs * V[i * n + j] + sn * V[i * n + j + 1];
                  V[i * n + j + 1] = -sn * V[i * n + j] + cs * V[i * n + j + 1];
                  V[i * n + j] = t;
                }
              }
              t = hypot(f, g);
              cs = f / t;
              sn = g / t;
              s[j] = t;
              f = cs * e[j] + sn * s[j + 1];
              s[j + 1] = -sn * e[j] + cs * s[j + 1];
              g = sn * e[j + 1];
              e[j + 1] = cs * e[j + 1];
              if (wantu && j < m - 1) {
                for (i = 0; i < m; i++) {
                  t = cs * U[i * nu + j] + sn * U[i * nu + j + 1];
                  U[i * nu + j + 1] = -sn * U[i * nu + j] + cs * U[i * nu + j + 1];
                  U[i * nu + j] = t;
                }
              }
            }
            e[p - 2] = f;
            iter = iter + 1;
          }
          break;

        // Convergence.

        case 4:
          {
            // Make the singular values positive.

            if (s[k] <= 0.0) {
              s[k] = s[k] < 0.0 ? -s[k] : 0.0;
              if (wantv) {
                for (i = 0; i <= pp; i++) {
                  V[i * n + k] = -V[i * n + k];
                }
              }
            }

            // Order the singular values.

            while (k < pp) {
              if (s[k] >= s[k + 1]) {
                break;
              }
              t = s[k];
              s[k] = s[k + 1];
              s[k + 1] = t;
              if (wantv && k < n - 1) {
                for (i = 0; i < n; i++) {
                  t = V[i * n + k + 1];
                  V[i * n + k + 1] = V[i * n + k];
                  V[i * n + k] = t;
                }
              }
              if (wantu && k < m - 1) {
                for (i = 0; i < m; i++) {
                  t = U[i * nu + k + 1];
                  U[i * nu + k + 1] = U[i * nu + k];
                  U[i * nu + k] = t;
                }
              }
              k++;
            }
            iter = 0;
            p--;
          }
          break;
        default:
          throw new Error(`invalid kase: ${kase}`);
      }
    }
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getU() {
    return new js_Matrix(this.m, Math.min(this.m + 1, this.n), this.U, true); // the "fast" flag added, since U is ArrayType
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getV() {
    return new js_Matrix(this.n, this.n, this.V, true);
  }

  /**
   * @public
   *
   * @returns {Array.<number>}
   */
  getSingularValues() {
    return this.s;
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  getS() {
    const result = new js_Matrix(this.n, this.n);
    for (let i = 0; i < this.n; i++) {
      for (let j = 0; j < this.n; j++) {
        result.entries[result.index(i, j)] = 0.0;
      }
      result.entries[result.index(i, i)] = this.s[i];
    }
    return result;
  }

  /**
   * @public
   *
   * @returns {number}
   */
  norm2() {
    return this.s[0];
  }

  /**
   * @public
   *
   * @returns {number}
   */
  cond() {
    return this.s[0] / this.s[Math.min(this.m, this.n) - 1];
  }

  /**
   * @public
   *
   * @returns {number}
   */
  rank() {
    // changed to 23 from 52 (bits of mantissa), since we are using floats here!
    const eps = Math.pow(2.0, -23.0);
    const tol = Math.max(this.m, this.n) * this.s[0] * eps;
    let r = 0;
    for (let i = 0; i < this.s.length; i++) {
      if (this.s[i] > tol) {
        r++;
      }
    }
    return r;
  }

  /**
   * Constructs the Moore-Penrose pseudoinverse of the specified matrix, using the SVD construction.
   * @public
   *
   * See https://en.wikipedia.org/wiki/Moore%E2%80%93Penrose_pseudoinverse for details. Helpful for
   * linear least-squares regression.
   *
   * @param {Matrix} matrix, m x n
   * @returns {Matrix} - n x m
   */
  static pseudoinverse(matrix) {
    const svd = new SingularValueDecomposition(matrix);
    const sigmaPseudoinverse = js_Matrix.diagonalMatrix(svd.getSingularValues().map(value => {
      if (Math.abs(value) < 1e-300) {
        return 0;
      } else {
        return 1 / value;
      }
    }));
    return svd.getV().times(sigmaPseudoinverse).times(svd.getU().transpose());
  }
}
js_dot.register('SingularValueDecomposition', SingularValueDecomposition);
/* harmony default export */ const js_SingularValueDecomposition = (SingularValueDecomposition);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJNYXRyaXgiLCJBcnJheVR5cGUiLCJ3aW5kb3ciLCJGbG9hdDY0QXJyYXkiLCJBcnJheSIsIlNpbmd1bGFyVmFsdWVEZWNvbXBvc2l0aW9uIiwiY29uc3RydWN0b3IiLCJtYXRyaXgiLCJBcmciLCJBIiwiZ2V0QXJyYXlDb3B5IiwibSIsImdldFJvd0RpbWVuc2lvbiIsIm4iLCJnZXRDb2x1bW5EaW1lbnNpb24iLCJtaW4iLCJNYXRoIiwibWF4IiwicG93IiwiYWJzIiwibnUiLCJzIiwiVSIsIlYiLCJlIiwid29yayIsIndhbnR1Iiwid2FudHYiLCJpIiwiaiIsImsiLCJ0IiwiZiIsImNzIiwic24iLCJoeXBvdCIsIm5jdCIsIm5ydCIsInAiLCJwcCIsIml0ZXIiLCJlcHMiLCJ0aW55Iiwia2FzZSIsImtzIiwic2NhbGUiLCJzcCIsInNwbTEiLCJlcG0xIiwic2siLCJlayIsImIiLCJjIiwic2hpZnQiLCJzcXJ0IiwiZyIsIkVycm9yIiwiZ2V0VSIsImdldFYiLCJnZXRTaW5ndWxhclZhbHVlcyIsImdldFMiLCJyZXN1bHQiLCJlbnRyaWVzIiwiaW5kZXgiLCJub3JtMiIsImNvbmQiLCJyYW5rIiwidG9sIiwiciIsImxlbmd0aCIsInBzZXVkb2ludmVyc2UiLCJzdmQiLCJzaWdtYVBzZXVkb2ludmVyc2UiLCJkaWFnb25hbE1hdHJpeCIsIm1hcCIsInZhbHVlIiwidGltZXMiLCJ0cmFuc3Bvc2UiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNpbmd1bGFyVmFsdWVEZWNvbXBvc2l0aW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFNWRCBkZWNvbXBvc2l0aW9uLCBiYXNlZCBvbiBKYW1hIChodHRwOi8vbWF0aC5uaXN0Lmdvdi9qYXZhbnVtZXJpY3MvamFtYS8pXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IE1hdHJpeCBmcm9tICcuL01hdHJpeC5qcyc7XG5cbmNvbnN0IEFycmF5VHlwZSA9IHdpbmRvdy5GbG9hdDY0QXJyYXkgfHwgQXJyYXk7XG5cbmNsYXNzIFNpbmd1bGFyVmFsdWVEZWNvbXBvc2l0aW9uIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKCBtYXRyaXggKSB7XG4gICAgdGhpcy5tYXRyaXggPSBtYXRyaXg7XG5cbiAgICBjb25zdCBBcmcgPSBtYXRyaXg7XG5cbiAgICAvLyBEZXJpdmVkIGZyb20gTElOUEFDSyBjb2RlLlxuICAgIC8vIEluaXRpYWxpemUuXG4gICAgY29uc3QgQSA9IEFyZy5nZXRBcnJheUNvcHkoKTtcbiAgICB0aGlzLm0gPSBBcmcuZ2V0Um93RGltZW5zaW9uKCk7XG4gICAgdGhpcy5uID0gQXJnLmdldENvbHVtbkRpbWVuc2lvbigpO1xuICAgIGNvbnN0IG0gPSB0aGlzLm07XG4gICAgY29uc3QgbiA9IHRoaXMubjtcblxuICAgIGNvbnN0IG1pbiA9IE1hdGgubWluO1xuICAgIGNvbnN0IG1heCA9IE1hdGgubWF4O1xuICAgIGNvbnN0IHBvdyA9IE1hdGgucG93O1xuICAgIGNvbnN0IGFicyA9IE1hdGguYWJzO1xuXG4gICAgLyogQXBwYXJlbnRseSB0aGUgZmFpbGluZyBjYXNlcyBhcmUgb25seSBhIHByb3BlciBzdWJzZXQgb2YgKG08biksXG4gICAgIHNvIGxldCdzIG5vdCB0aHJvdyBlcnJvci4gIENvcnJlY3QgZml4IHRvIGNvbWUgbGF0ZXI/XG4gICAgIGlmIChtPG4pIHtcbiAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbihcIkphbWEgU1ZEIG9ubHkgd29ya3MgZm9yIG0gPj0gblwiKTsgfVxuICAgICAqL1xuICAgIGNvbnN0IG51ID0gbWluKCBtLCBuICk7XG4gICAgdGhpcy5zID0gbmV3IEFycmF5VHlwZSggbWluKCBtICsgMSwgbiApICk7XG4gICAgY29uc3QgcyA9IHRoaXMucztcbiAgICB0aGlzLlUgPSBuZXcgQXJyYXlUeXBlKCBtICogbnUgKTtcbiAgICBjb25zdCBVID0gdGhpcy5VO1xuICAgIHRoaXMuViA9IG5ldyBBcnJheVR5cGUoIG4gKiBuICk7XG4gICAgY29uc3QgViA9IHRoaXMuVjtcbiAgICBjb25zdCBlID0gbmV3IEFycmF5VHlwZSggbiApO1xuICAgIGNvbnN0IHdvcmsgPSBuZXcgQXJyYXlUeXBlKCBtICk7XG4gICAgY29uc3Qgd2FudHUgPSB0cnVlO1xuICAgIGNvbnN0IHdhbnR2ID0gdHJ1ZTtcblxuICAgIGxldCBpO1xuICAgIGxldCBqO1xuICAgIGxldCBrO1xuICAgIGxldCB0O1xuICAgIGxldCBmO1xuXG4gICAgbGV0IGNzO1xuICAgIGxldCBzbjtcblxuICAgIGNvbnN0IGh5cG90ID0gTWF0cml4Lmh5cG90O1xuXG4gICAgLy8gUmVkdWNlIEEgdG8gYmlkaWFnb25hbCBmb3JtLCBzdG9yaW5nIHRoZSBkaWFnb25hbCBlbGVtZW50c1xuICAgIC8vIGluIHMgYW5kIHRoZSBzdXBlci1kaWFnb25hbCBlbGVtZW50cyBpbiBlLlxuXG4gICAgY29uc3QgbmN0ID0gbWluKCBtIC0gMSwgbiApO1xuICAgIGNvbnN0IG5ydCA9IG1heCggMCwgbWluKCBuIC0gMiwgbSApICk7XG4gICAgZm9yICggayA9IDA7IGsgPCBtYXgoIG5jdCwgbnJ0ICk7IGsrKyApIHtcbiAgICAgIGlmICggayA8IG5jdCApIHtcblxuICAgICAgICAvLyBDb21wdXRlIHRoZSB0cmFuc2Zvcm1hdGlvbiBmb3IgdGhlIGstdGggY29sdW1uIGFuZFxuICAgICAgICAvLyBwbGFjZSB0aGUgay10aCBkaWFnb25hbCBpbiBzW2tdLlxuICAgICAgICAvLyBDb21wdXRlIDItbm9ybSBvZiBrLXRoIGNvbHVtbiB3aXRob3V0IHVuZGVyL292ZXJmbG93LlxuICAgICAgICBzWyBrIF0gPSAwO1xuICAgICAgICBmb3IgKCBpID0gazsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgICBzWyBrIF0gPSBoeXBvdCggc1sgayBdLCBBWyBpICogbiArIGsgXSApO1xuICAgICAgICB9XG4gICAgICAgIGlmICggc1sgayBdICE9PSAwLjAgKSB7XG4gICAgICAgICAgaWYgKCBBWyBrICogbiArIGsgXSA8IDAuMCApIHtcbiAgICAgICAgICAgIHNbIGsgXSA9IC1zWyBrIF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoIGkgPSBrOyBpIDwgbTsgaSsrICkge1xuICAgICAgICAgICAgQVsgaSAqIG4gKyBrIF0gLz0gc1sgayBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBBWyBrICogbiArIGsgXSArPSAxLjA7XG4gICAgICAgIH1cbiAgICAgICAgc1sgayBdID0gLXNbIGsgXTtcbiAgICAgIH1cbiAgICAgIGZvciAoIGogPSBrICsgMTsgaiA8IG47IGorKyApIHtcbiAgICAgICAgaWYgKCAoIGsgPCBuY3QgKSAmJiAoIHNbIGsgXSAhPT0gMC4wICkgKSB7XG5cbiAgICAgICAgICAvLyBBcHBseSB0aGUgdHJhbnNmb3JtYXRpb24uXG5cbiAgICAgICAgICB0ID0gMDtcbiAgICAgICAgICBmb3IgKCBpID0gazsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgICAgIHQgKz0gQVsgaSAqIG4gKyBrIF0gKiBBWyBpICogbiArIGogXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdCA9IC10IC8gQVsgayAqIG4gKyBrIF07XG4gICAgICAgICAgZm9yICggaSA9IGs7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgICBBWyBpICogbiArIGogXSArPSB0ICogQVsgaSAqIG4gKyBrIF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGxhY2UgdGhlIGstdGggcm93IG9mIEEgaW50byBlIGZvciB0aGVcbiAgICAgICAgLy8gc3Vic2VxdWVudCBjYWxjdWxhdGlvbiBvZiB0aGUgcm93IHRyYW5zZm9ybWF0aW9uLlxuXG4gICAgICAgIGVbIGogXSA9IEFbIGsgKiBuICsgaiBdO1xuICAgICAgfVxuICAgICAgaWYgKCB3YW50dSAmJiAoIGsgPCBuY3QgKSApIHtcblxuICAgICAgICAvLyBQbGFjZSB0aGUgdHJhbnNmb3JtYXRpb24gaW4gVSBmb3Igc3Vic2VxdWVudCBiYWNrXG4gICAgICAgIC8vIG11bHRpcGxpY2F0aW9uLlxuXG4gICAgICAgIGZvciAoIGkgPSBrOyBpIDwgbTsgaSsrICkge1xuICAgICAgICAgIFVbIGkgKiBudSArIGsgXSA9IEFbIGkgKiBuICsgayBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIGsgPCBucnQgKSB7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSB0aGUgay10aCByb3cgdHJhbnNmb3JtYXRpb24gYW5kIHBsYWNlIHRoZVxuICAgICAgICAvLyBrLXRoIHN1cGVyLWRpYWdvbmFsIGluIGVba10uXG4gICAgICAgIC8vIENvbXB1dGUgMi1ub3JtIHdpdGhvdXQgdW5kZXIvb3ZlcmZsb3cuXG4gICAgICAgIGVbIGsgXSA9IDA7XG4gICAgICAgIGZvciAoIGkgPSBrICsgMTsgaSA8IG47IGkrKyApIHtcbiAgICAgICAgICBlWyBrIF0gPSBoeXBvdCggZVsgayBdLCBlWyBpIF0gKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIGVbIGsgXSAhPT0gMC4wICkge1xuICAgICAgICAgIGlmICggZVsgayArIDEgXSA8IDAuMCApIHtcbiAgICAgICAgICAgIGVbIGsgXSA9IC1lWyBrIF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoIGkgPSBrICsgMTsgaSA8IG47IGkrKyApIHtcbiAgICAgICAgICAgIGVbIGkgXSAvPSBlWyBrIF07XG4gICAgICAgICAgfVxuICAgICAgICAgIGVbIGsgKyAxIF0gKz0gMS4wO1xuICAgICAgICB9XG4gICAgICAgIGVbIGsgXSA9IC1lWyBrIF07XG4gICAgICAgIGlmICggKCBrICsgMSA8IG0gKSAmJiAoIGVbIGsgXSAhPT0gMC4wICkgKSB7XG5cbiAgICAgICAgICAvLyBBcHBseSB0aGUgdHJhbnNmb3JtYXRpb24uXG5cbiAgICAgICAgICBmb3IgKCBpID0gayArIDE7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgICB3b3JrWyBpIF0gPSAwLjA7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoIGogPSBrICsgMTsgaiA8IG47IGorKyApIHtcbiAgICAgICAgICAgIGZvciAoIGkgPSBrICsgMTsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgICAgICAgd29ya1sgaSBdICs9IGVbIGogXSAqIEFbIGkgKiBuICsgaiBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKCBqID0gayArIDE7IGogPCBuOyBqKysgKSB7XG4gICAgICAgICAgICB0ID0gLWVbIGogXSAvIGVbIGsgKyAxIF07XG4gICAgICAgICAgICBmb3IgKCBpID0gayArIDE7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgICAgIEFbIGkgKiBuICsgaiBdICs9IHQgKiB3b3JrWyBpIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICggd2FudHYgKSB7XG5cbiAgICAgICAgICAvLyBQbGFjZSB0aGUgdHJhbnNmb3JtYXRpb24gaW4gViBmb3Igc3Vic2VxdWVudFxuICAgICAgICAgIC8vIGJhY2sgbXVsdGlwbGljYXRpb24uXG5cbiAgICAgICAgICBmb3IgKCBpID0gayArIDE7IGkgPCBuOyBpKysgKSB7XG4gICAgICAgICAgICBWWyBpICogbiArIGsgXSA9IGVbIGkgXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZXQgdXAgdGhlIGZpbmFsIGJpZGlhZ29uYWwgbWF0cml4IG9yIG9yZGVyIHAuXG5cbiAgICBsZXQgcCA9IG1pbiggbiwgbSArIDEgKTtcbiAgICBpZiAoIG5jdCA8IG4gKSB7XG4gICAgICBzWyBuY3QgXSA9IEFbIG5jdCAqIG4gKyBuY3QgXTtcbiAgICB9XG4gICAgaWYgKCBtIDwgcCApIHtcbiAgICAgIHNbIHAgLSAxIF0gPSAwLjA7XG4gICAgfVxuICAgIGlmICggbnJ0ICsgMSA8IHAgKSB7XG4gICAgICBlWyBucnQgXSA9IEFbIG5ydCAqIG4gKyBwIC0gMSBdO1xuICAgIH1cbiAgICBlWyBwIC0gMSBdID0gMC4wO1xuXG4gICAgLy8gSWYgcmVxdWlyZWQsIGdlbmVyYXRlIFUuXG5cbiAgICBpZiAoIHdhbnR1ICkge1xuICAgICAgZm9yICggaiA9IG5jdDsgaiA8IG51OyBqKysgKSB7XG4gICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbTsgaSsrICkge1xuICAgICAgICAgIFVbIGkgKiBudSArIGogXSA9IDAuMDtcbiAgICAgICAgfVxuICAgICAgICBVWyBqICogbnUgKyBqIF0gPSAxLjA7XG4gICAgICB9XG4gICAgICBmb3IgKCBrID0gbmN0IC0gMTsgayA+PSAwOyBrLS0gKSB7XG4gICAgICAgIGlmICggc1sgayBdICE9PSAwLjAgKSB7XG4gICAgICAgICAgZm9yICggaiA9IGsgKyAxOyBqIDwgbnU7IGorKyApIHtcbiAgICAgICAgICAgIHQgPSAwO1xuICAgICAgICAgICAgZm9yICggaSA9IGs7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgICAgIHQgKz0gVVsgaSAqIG51ICsgayBdICogVVsgaSAqIG51ICsgaiBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdCA9IC10IC8gVVsgayAqIG51ICsgayBdO1xuICAgICAgICAgICAgZm9yICggaSA9IGs7IGkgPCBtOyBpKysgKSB7XG4gICAgICAgICAgICAgIFVbIGkgKiBudSArIGogXSArPSB0ICogVVsgaSAqIG51ICsgayBdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKCBpID0gazsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgICAgIFVbIGkgKiBudSArIGsgXSA9IC1VWyBpICogbnUgKyBrIF07XG4gICAgICAgICAgfVxuICAgICAgICAgIFVbIGsgKiBudSArIGsgXSA9IDEuMCArIFVbIGsgKiBudSArIGsgXTtcbiAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IGsgLSAxOyBpKysgKSB7XG4gICAgICAgICAgICBVWyBpICogbnUgKyBrIF0gPSAwLjA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbTsgaSsrICkge1xuICAgICAgICAgICAgVVsgaSAqIG51ICsgayBdID0gMC4wO1xuICAgICAgICAgIH1cbiAgICAgICAgICBVWyBrICogbnUgKyBrIF0gPSAxLjA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiByZXF1aXJlZCwgZ2VuZXJhdGUgVi5cblxuICAgIGlmICggd2FudHYgKSB7XG4gICAgICBmb3IgKCBrID0gbiAtIDE7IGsgPj0gMDsgay0tICkge1xuICAgICAgICBpZiAoICggayA8IG5ydCApICYmICggZVsgayBdICE9PSAwLjAgKSApIHtcbiAgICAgICAgICBmb3IgKCBqID0gayArIDE7IGogPCBudTsgaisrICkge1xuICAgICAgICAgICAgdCA9IDA7XG4gICAgICAgICAgICBmb3IgKCBpID0gayArIDE7IGkgPCBuOyBpKysgKSB7XG4gICAgICAgICAgICAgIHQgKz0gVlsgaSAqIG4gKyBrIF0gKiBWWyBpICogbiArIGogXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPSAtdCAvIFZbICggayArIDEgKSAqIG4gKyBrIF07XG4gICAgICAgICAgICBmb3IgKCBpID0gayArIDE7IGkgPCBuOyBpKysgKSB7XG4gICAgICAgICAgICAgIFZbIGkgKiBuICsgaiBdICs9IHQgKiBWWyBpICogbiArIGsgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZm9yICggaSA9IDA7IGkgPCBuOyBpKysgKSB7XG4gICAgICAgICAgVlsgaSAqIG4gKyBrIF0gPSAwLjA7XG4gICAgICAgIH1cbiAgICAgICAgVlsgayAqIG4gKyBrIF0gPSAxLjA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTWFpbiBpdGVyYXRpb24gbG9vcCBmb3IgdGhlIHNpbmd1bGFyIHZhbHVlcy5cblxuICAgIGNvbnN0IHBwID0gcCAtIDE7XG4gICAgbGV0IGl0ZXIgPSAwO1xuICAgIGNvbnN0IGVwcyA9IHBvdyggMi4wLCAtNTIuMCApO1xuICAgIGNvbnN0IHRpbnkgPSBwb3coIDIuMCwgLTk2Ni4wICk7XG4gICAgd2hpbGUgKCBwID4gMCApIHtcbiAgICAgIGxldCBrYXNlO1xuXG4gICAgICAvLyBIZXJlIGlzIHdoZXJlIGEgdGVzdCBmb3IgdG9vIG1hbnkgaXRlcmF0aW9ucyB3b3VsZCBnby5cbiAgICAgIGlmICggaXRlciA+IDUwMCApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIC8vIFRoaXMgc2VjdGlvbiBvZiB0aGUgcHJvZ3JhbSBpbnNwZWN0cyBmb3JcbiAgICAgIC8vIG5lZ2xpZ2libGUgZWxlbWVudHMgaW4gdGhlIHMgYW5kIGUgYXJyYXlzLiAgT25cbiAgICAgIC8vIGNvbXBsZXRpb24gdGhlIHZhcmlhYmxlcyBrYXNlIGFuZCBrIGFyZSBzZXQgYXMgZm9sbG93cy5cblxuICAgICAgLy8ga2FzZSA9IDEgICBpZiBzKHApIGFuZCBlW2stMV0gYXJlIG5lZ2xpZ2libGUgYW5kIGs8cFxuICAgICAgLy8ga2FzZSA9IDIgICBpZiBzKGspIGlzIG5lZ2xpZ2libGUgYW5kIGs8cFxuICAgICAgLy8ga2FzZSA9IDMgICBpZiBlW2stMV0gaXMgbmVnbGlnaWJsZSwgazxwLCBhbmRcbiAgICAgIC8vICAgICAgICBzKGspLCAuLi4sIHMocCkgYXJlIG5vdCBuZWdsaWdpYmxlIChxciBzdGVwKS5cbiAgICAgIC8vIGthc2UgPSA0ICAgaWYgZShwLTEpIGlzIG5lZ2xpZ2libGUgKGNvbnZlcmdlbmNlKS5cblxuICAgICAgZm9yICggayA9IHAgLSAyOyBrID49IC0xOyBrLS0gKSB7XG4gICAgICAgIGlmICggayA9PT0gLTEgKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCBhYnMoIGVbIGsgXSApIDw9XG4gICAgICAgICAgICAgdGlueSArIGVwcyAqICggYWJzKCBzWyBrIF0gKSArIGFicyggc1sgayArIDEgXSApICkgKSB7XG4gICAgICAgICAgZVsgayBdID0gMC4wO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoIGsgPT09IHAgLSAyICkge1xuICAgICAgICBrYXNlID0gNDtcbiAgICAgIH1cbiAgICAgIGVsc2Uge1xuICAgICAgICBsZXQga3M7XG4gICAgICAgIGZvciAoIGtzID0gcCAtIDE7IGtzID49IGs7IGtzLS0gKSB7XG4gICAgICAgICAgaWYgKCBrcyA9PT0gayApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0ID0gKCBrcyAhPT0gcCA/IGFicyggZVsga3MgXSApIDogMCApICtcbiAgICAgICAgICAgICAgKCBrcyAhPT0gayArIDEgPyBhYnMoIGVbIGtzIC0gMSBdICkgOiAwICk7XG4gICAgICAgICAgaWYgKCBhYnMoIHNbIGtzIF0gKSA8PSB0aW55ICsgZXBzICogdCApIHtcbiAgICAgICAgICAgIHNbIGtzIF0gPSAwLjA7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCBrcyA9PT0gayApIHtcbiAgICAgICAgICBrYXNlID0gMztcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICgga3MgPT09IHAgLSAxICkge1xuICAgICAgICAgIGthc2UgPSAxO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGthc2UgPSAyO1xuICAgICAgICAgIGsgPSBrcztcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaysrO1xuXG4gICAgICAvLyBQZXJmb3JtIHRoZSB0YXNrIGluZGljYXRlZCBieSBrYXNlLlxuXG4gICAgICBzd2l0Y2goIGthc2UgKSB7XG5cbiAgICAgICAgLy8gRGVmbGF0ZSBuZWdsaWdpYmxlIHMocCkuXG5cbiAgICAgICAgY2FzZSAxOiB7XG4gICAgICAgICAgZiA9IGVbIHAgLSAyIF07XG4gICAgICAgICAgZVsgcCAtIDIgXSA9IDAuMDtcbiAgICAgICAgICBmb3IgKCBqID0gcCAtIDI7IGogPj0gazsgai0tICkge1xuICAgICAgICAgICAgdCA9IGh5cG90KCBzWyBqIF0sIGYgKTtcbiAgICAgICAgICAgIGNzID0gc1sgaiBdIC8gdDtcbiAgICAgICAgICAgIHNuID0gZiAvIHQ7XG4gICAgICAgICAgICBzWyBqIF0gPSB0O1xuICAgICAgICAgICAgaWYgKCBqICE9PSBrICkge1xuICAgICAgICAgICAgICBmID0gLXNuICogZVsgaiAtIDEgXTtcbiAgICAgICAgICAgICAgZVsgaiAtIDEgXSA9IGNzICogZVsgaiAtIDEgXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICggd2FudHYgKSB7XG4gICAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgICAgICAgICAgIHQgPSBjcyAqIFZbIGkgKiBuICsgaiBdICsgc24gKiBWWyBpICogbiArIHAgLSAxIF07XG4gICAgICAgICAgICAgICAgVlsgaSAqIG4gKyBwIC0gMSBdID0gLXNuICogVlsgaSAqIG4gKyBqIF0gKyBjcyAqIFZbIGkgKiBuICsgcCAtIDEgXTtcbiAgICAgICAgICAgICAgICBWWyBpICogbiArIGogXSA9IHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICAvLyBTcGxpdCBhdCBuZWdsaWdpYmxlIHMoaykuXG5cbiAgICAgICAgY2FzZSAyOiB7XG4gICAgICAgICAgZiA9IGVbIGsgLSAxIF07XG4gICAgICAgICAgZVsgayAtIDEgXSA9IDAuMDtcbiAgICAgICAgICBmb3IgKCBqID0gazsgaiA8IHA7IGorKyApIHtcbiAgICAgICAgICAgIHQgPSBoeXBvdCggc1sgaiBdLCBmICk7XG4gICAgICAgICAgICBjcyA9IHNbIGogXSAvIHQ7XG4gICAgICAgICAgICBzbiA9IGYgLyB0O1xuICAgICAgICAgICAgc1sgaiBdID0gdDtcbiAgICAgICAgICAgIGYgPSAtc24gKiBlWyBqIF07XG4gICAgICAgICAgICBlWyBqIF0gPSBjcyAqIGVbIGogXTtcbiAgICAgICAgICAgIGlmICggd2FudHUgKSB7XG4gICAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbTsgaSsrICkge1xuICAgICAgICAgICAgICAgIHQgPSBjcyAqIFVbIGkgKiBudSArIGogXSArIHNuICogVVsgaSAqIG51ICsgayAtIDEgXTtcbiAgICAgICAgICAgICAgICBVWyBpICogbnUgKyBrIC0gMSBdID0gLXNuICogVVsgaSAqIG51ICsgaiBdICsgY3MgKiBVWyBpICogbnUgKyBrIC0gMSBdO1xuICAgICAgICAgICAgICAgIFVbIGkgKiBudSArIGogXSA9IHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICAvLyBQZXJmb3JtIG9uZSBxciBzdGVwLlxuXG4gICAgICAgIGNhc2UgMzoge1xuXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBzaGlmdC5cblxuICAgICAgICAgIGNvbnN0IHNjYWxlID0gbWF4KCBtYXgoIG1heCggbWF4KCBhYnMoIHNbIHAgLSAxIF0gKSwgYWJzKCBzWyBwIC0gMiBdICkgKSwgYWJzKCBlWyBwIC0gMiBdICkgKSwgYWJzKCBzWyBrIF0gKSApLCBhYnMoIGVbIGsgXSApICk7XG4gICAgICAgICAgY29uc3Qgc3AgPSBzWyBwIC0gMSBdIC8gc2NhbGU7XG4gICAgICAgICAgY29uc3Qgc3BtMSA9IHNbIHAgLSAyIF0gLyBzY2FsZTtcbiAgICAgICAgICBjb25zdCBlcG0xID0gZVsgcCAtIDIgXSAvIHNjYWxlO1xuICAgICAgICAgIGNvbnN0IHNrID0gc1sgayBdIC8gc2NhbGU7XG4gICAgICAgICAgY29uc3QgZWsgPSBlWyBrIF0gLyBzY2FsZTtcbiAgICAgICAgICBjb25zdCBiID0gKCAoIHNwbTEgKyBzcCApICogKCBzcG0xIC0gc3AgKSArIGVwbTEgKiBlcG0xICkgLyAyLjA7XG4gICAgICAgICAgY29uc3QgYyA9ICggc3AgKiBlcG0xICkgKiAoIHNwICogZXBtMSApO1xuICAgICAgICAgIGxldCBzaGlmdCA9IDAuMDtcbiAgICAgICAgICBpZiAoICggYiAhPT0gMC4wICkgfHwgKCBjICE9PSAwLjAgKSApIHtcbiAgICAgICAgICAgIHNoaWZ0ID0gTWF0aC5zcXJ0KCBiICogYiArIGMgKTtcbiAgICAgICAgICAgIGlmICggYiA8IDAuMCApIHtcbiAgICAgICAgICAgICAgc2hpZnQgPSAtc2hpZnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzaGlmdCA9IGMgLyAoIGIgKyBzaGlmdCApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmID0gKCBzayArIHNwICkgKiAoIHNrIC0gc3AgKSArIHNoaWZ0O1xuICAgICAgICAgIGxldCBnID0gc2sgKiBlaztcblxuICAgICAgICAgIC8vIENoYXNlIHplcm9zLlxuXG4gICAgICAgICAgZm9yICggaiA9IGs7IGogPCBwIC0gMTsgaisrICkge1xuICAgICAgICAgICAgdCA9IGh5cG90KCBmLCBnICk7XG4gICAgICAgICAgICBjcyA9IGYgLyB0O1xuICAgICAgICAgICAgc24gPSBnIC8gdDtcbiAgICAgICAgICAgIGlmICggaiAhPT0gayApIHtcbiAgICAgICAgICAgICAgZVsgaiAtIDEgXSA9IHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmID0gY3MgKiBzWyBqIF0gKyBzbiAqIGVbIGogXTtcbiAgICAgICAgICAgIGVbIGogXSA9IGNzICogZVsgaiBdIC0gc24gKiBzWyBqIF07XG4gICAgICAgICAgICBnID0gc24gKiBzWyBqICsgMSBdO1xuICAgICAgICAgICAgc1sgaiArIDEgXSA9IGNzICogc1sgaiArIDEgXTtcbiAgICAgICAgICAgIGlmICggd2FudHYgKSB7XG4gICAgICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgICAgICAgICAgIHQgPSBjcyAqIFZbIGkgKiBuICsgaiBdICsgc24gKiBWWyBpICogbiArIGogKyAxIF07XG4gICAgICAgICAgICAgICAgVlsgaSAqIG4gKyBqICsgMSBdID0gLXNuICogVlsgaSAqIG4gKyBqIF0gKyBjcyAqIFZbIGkgKiBuICsgaiArIDEgXTtcbiAgICAgICAgICAgICAgICBWWyBpICogbiArIGogXSA9IHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHQgPSBoeXBvdCggZiwgZyApO1xuICAgICAgICAgICAgY3MgPSBmIC8gdDtcbiAgICAgICAgICAgIHNuID0gZyAvIHQ7XG4gICAgICAgICAgICBzWyBqIF0gPSB0O1xuICAgICAgICAgICAgZiA9IGNzICogZVsgaiBdICsgc24gKiBzWyBqICsgMSBdO1xuICAgICAgICAgICAgc1sgaiArIDEgXSA9IC1zbiAqIGVbIGogXSArIGNzICogc1sgaiArIDEgXTtcbiAgICAgICAgICAgIGcgPSBzbiAqIGVbIGogKyAxIF07XG4gICAgICAgICAgICBlWyBqICsgMSBdID0gY3MgKiBlWyBqICsgMSBdO1xuICAgICAgICAgICAgaWYgKCB3YW50dSAmJiAoIGogPCBtIC0gMSApICkge1xuICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgICAgICAgICB0ID0gY3MgKiBVWyBpICogbnUgKyBqIF0gKyBzbiAqIFVbIGkgKiBudSArIGogKyAxIF07XG4gICAgICAgICAgICAgICAgVVsgaSAqIG51ICsgaiArIDEgXSA9IC1zbiAqIFVbIGkgKiBudSArIGogXSArIGNzICogVVsgaSAqIG51ICsgaiArIDEgXTtcbiAgICAgICAgICAgICAgICBVWyBpICogbnUgKyBqIF0gPSB0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGVbIHAgLSAyIF0gPSBmO1xuICAgICAgICAgIGl0ZXIgPSBpdGVyICsgMTtcbiAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIC8vIENvbnZlcmdlbmNlLlxuXG4gICAgICAgIGNhc2UgNDoge1xuXG4gICAgICAgICAgLy8gTWFrZSB0aGUgc2luZ3VsYXIgdmFsdWVzIHBvc2l0aXZlLlxuXG4gICAgICAgICAgaWYgKCBzWyBrIF0gPD0gMC4wICkge1xuICAgICAgICAgICAgc1sgayBdID0gKCBzWyBrIF0gPCAwLjAgPyAtc1sgayBdIDogMC4wICk7XG4gICAgICAgICAgICBpZiAoIHdhbnR2ICkge1xuICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8PSBwcDsgaSsrICkge1xuICAgICAgICAgICAgICAgIFZbIGkgKiBuICsgayBdID0gLVZbIGkgKiBuICsgayBdO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gT3JkZXIgdGhlIHNpbmd1bGFyIHZhbHVlcy5cblxuICAgICAgICAgIHdoaWxlICggayA8IHBwICkge1xuICAgICAgICAgICAgaWYgKCBzWyBrIF0gPj0gc1sgayArIDEgXSApIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID0gc1sgayBdO1xuICAgICAgICAgICAgc1sgayBdID0gc1sgayArIDEgXTtcbiAgICAgICAgICAgIHNbIGsgKyAxIF0gPSB0O1xuICAgICAgICAgICAgaWYgKCB3YW50diAmJiAoIGsgPCBuIC0gMSApICkge1xuICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IG47IGkrKyApIHtcbiAgICAgICAgICAgICAgICB0ID0gVlsgaSAqIG4gKyBrICsgMSBdO1xuICAgICAgICAgICAgICAgIFZbIGkgKiBuICsgayArIDEgXSA9IFZbIGkgKiBuICsgayBdO1xuICAgICAgICAgICAgICAgIFZbIGkgKiBuICsgayBdID0gdDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCB3YW50dSAmJiAoIGsgPCBtIC0gMSApICkge1xuICAgICAgICAgICAgICBmb3IgKCBpID0gMDsgaSA8IG07IGkrKyApIHtcbiAgICAgICAgICAgICAgICB0ID0gVVsgaSAqIG51ICsgayArIDEgXTtcbiAgICAgICAgICAgICAgICBVWyBpICogbnUgKyBrICsgMSBdID0gVVsgaSAqIG51ICsgayBdO1xuICAgICAgICAgICAgICAgIFVbIGkgKiBudSArIGsgXSA9IHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGsrKztcbiAgICAgICAgICB9XG4gICAgICAgICAgaXRlciA9IDA7XG4gICAgICAgICAgcC0tO1xuICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIGBpbnZhbGlkIGthc2U6ICR7a2FzZX1gICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGdldFUoKSB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXgoIHRoaXMubSwgTWF0aC5taW4oIHRoaXMubSArIDEsIHRoaXMubiApLCB0aGlzLlUsIHRydWUgKTsgLy8gdGhlIFwiZmFzdFwiIGZsYWcgYWRkZWQsIHNpbmNlIFUgaXMgQXJyYXlUeXBlXG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgZ2V0VigpIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCggdGhpcy5uLCB0aGlzLm4sIHRoaXMuViwgdHJ1ZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge0FycmF5LjxudW1iZXI+fVxuICAgKi9cbiAgZ2V0U2luZ3VsYXJWYWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMucztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXh9XG4gICAqL1xuICBnZXRTKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgoIHRoaXMubiwgdGhpcy5uICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5uOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSAwLjA7XG4gICAgICB9XG4gICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBpICkgXSA9IHRoaXMuc1sgaSBdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG5vcm0yKCkge1xuICAgIHJldHVybiB0aGlzLnNbIDAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBjb25kKCkge1xuICAgIHJldHVybiB0aGlzLnNbIDAgXSAvIHRoaXMuc1sgTWF0aC5taW4oIHRoaXMubSwgdGhpcy5uICkgLSAxIF07XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgcmFuaygpIHtcbiAgICAvLyBjaGFuZ2VkIHRvIDIzIGZyb20gNTIgKGJpdHMgb2YgbWFudGlzc2EpLCBzaW5jZSB3ZSBhcmUgdXNpbmcgZmxvYXRzIGhlcmUhXG4gICAgY29uc3QgZXBzID0gTWF0aC5wb3coIDIuMCwgLTIzLjAgKTtcbiAgICBjb25zdCB0b2wgPSBNYXRoLm1heCggdGhpcy5tLCB0aGlzLm4gKSAqIHRoaXMuc1sgMCBdICogZXBzO1xuICAgIGxldCByID0gMDtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLnMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBpZiAoIHRoaXMuc1sgaSBdID4gdG9sICkge1xuICAgICAgICByKys7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN0cnVjdHMgdGhlIE1vb3JlLVBlbnJvc2UgcHNldWRvaW52ZXJzZSBvZiB0aGUgc3BlY2lmaWVkIG1hdHJpeCwgdXNpbmcgdGhlIFNWRCBjb25zdHJ1Y3Rpb24uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogU2VlIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL01vb3JlJUUyJTgwJTkzUGVucm9zZV9wc2V1ZG9pbnZlcnNlIGZvciBkZXRhaWxzLiBIZWxwZnVsIGZvclxuICAgKiBsaW5lYXIgbGVhc3Qtc3F1YXJlcyByZWdyZXNzaW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeH0gbWF0cml4LCBtIHggblxuICAgKiBAcmV0dXJucyB7TWF0cml4fSAtIG4geCBtXG4gICAqL1xuICBzdGF0aWMgcHNldWRvaW52ZXJzZSggbWF0cml4ICkge1xuICAgIGNvbnN0IHN2ZCA9IG5ldyBTaW5ndWxhclZhbHVlRGVjb21wb3NpdGlvbiggbWF0cml4ICk7XG4gICAgY29uc3Qgc2lnbWFQc2V1ZG9pbnZlcnNlID0gTWF0cml4LmRpYWdvbmFsTWF0cml4KCBzdmQuZ2V0U2luZ3VsYXJWYWx1ZXMoKS5tYXAoIHZhbHVlID0+IHtcbiAgICAgIGlmICggTWF0aC5hYnMoIHZhbHVlICkgPCAxZS0zMDAgKSB7XG4gICAgICAgIHJldHVybiAwO1xuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIHJldHVybiAxIC8gdmFsdWU7XG4gICAgICB9XG4gICAgfSApICk7XG4gICAgcmV0dXJuIHN2ZC5nZXRWKCkudGltZXMoIHNpZ21hUHNldWRvaW52ZXJzZSApLnRpbWVzKCBzdmQuZ2V0VSgpLnRyYW5zcG9zZSgpICk7XG4gIH1cbn1cblxuZG90LnJlZ2lzdGVyKCAnU2luZ3VsYXJWYWx1ZURlY29tcG9zaXRpb24nLCBTaW5ndWxhclZhbHVlRGVjb21wb3NpdGlvbiApO1xuXG5leHBvcnQgZGVmYXVsdCBTaW5ndWxhclZhbHVlRGVjb21wb3NpdGlvbjsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsR0FBRyxNQUFNLFVBQVU7QUFDMUIsT0FBT0MsTUFBTSxNQUFNLGFBQWE7QUFFaEMsTUFBTUMsU0FBUyxHQUFHQyxNQUFNLENBQUNDLFlBQVksSUFBSUMsS0FBSztBQUU5QyxNQUFNQywwQkFBMEIsQ0FBQztFQUMvQjtBQUNGO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsTUFBTSxFQUFHO0lBQ3BCLElBQUksQ0FBQ0EsTUFBTSxHQUFHQSxNQUFNO0lBRXBCLE1BQU1DLEdBQUcsR0FBR0QsTUFBTTs7SUFFbEI7SUFDQTtJQUNBLE1BQU1FLENBQUMsR0FBR0QsR0FBRyxDQUFDRSxZQUFZLEVBQUU7SUFDNUIsSUFBSSxDQUFDQyxDQUFDLEdBQUdILEdBQUcsQ0FBQ0ksZUFBZSxFQUFFO0lBQzlCLElBQUksQ0FBQ0MsQ0FBQyxHQUFHTCxHQUFHLENBQUNNLGtCQUFrQixFQUFFO0lBQ2pDLE1BQU1ILENBQUMsR0FBRyxJQUFJLENBQUNBLENBQUM7SUFDaEIsTUFBTUUsQ0FBQyxHQUFHLElBQUksQ0FBQ0EsQ0FBQztJQUVoQixNQUFNRSxHQUFHLEdBQUdDLElBQUksQ0FBQ0QsR0FBRztJQUNwQixNQUFNRSxHQUFHLEdBQUdELElBQUksQ0FBQ0MsR0FBRztJQUNwQixNQUFNQyxHQUFHLEdBQUdGLElBQUksQ0FBQ0UsR0FBRztJQUNwQixNQUFNQyxHQUFHLEdBQUdILElBQUks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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Matrix.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Arbitrary-dimensional matrix, based on Jama (http://math.nist.gov/javanumerics/jama/)
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */










const Matrix_ArrayType = window.Float64Array || Array;
class Matrix {
  /**
   * @param {number} m - number of rows
   * @param {number} n - number of columns
   * @param {number[] | number} [filler]
   * @param {boolean} [fast]
   */
  constructor(m, n, filler, fast) {
    // @public {number}
    this.m = m;
    this.n = n;
    const size = m * n;
    // @public {number}
    this.size = size;
    let i;
    if (fast) {
      // @public {Array.<number>|Float64Array}
      this.entries = filler;
    } else {
      if (!filler) {
        filler = 0;
      }

      // entries stored in row-major format
      this.entries = new Matrix_ArrayType(size);
      if (js_isArray(filler)) {
        assert && assert(filler.length === size);
        for (i = 0; i < size; i++) {
          this.entries[i] = filler[i];
        }
      } else {
        for (i = 0; i < size; i++) {
          this.entries[i] = filler;
        }
      }
    }
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  copy() {
    const result = new Matrix(this.m, this.n);
    for (let i = 0; i < this.size; i++) {
      result.entries[i] = this.entries[i];
    }
    return result;
  }

  /**
   * @public
   *
   * @returns {Array.<number>}
   */
  getArray() {
    return this.entries;
  }

  /**
   * @public
   *
   * @returns {Array.<number>}
   */
  getArrayCopy() {
    return new Matrix_ArrayType(this.entries);
  }

  /**
   * @public
   *
   * @returns {number}
   */
  getRowDimension() {
    return this.m;
  }

  /**
   * @public
   *
   * @returns {number}
   */
  getColumnDimension() {
    return this.n;
  }

  /**
   * TODO: inline this places if we aren't using an inlining compiler! (check performance)
   * @public
   *
   * @param {number} i
   * @param {number} j
   * @returns {number}
   */
  index(i, j) {
    return i * this.n + j;
  }

  /**
   * Get the matrix element (i,j) with the convention that row and column indices start at zero
   * @public
   *
   * @param {number} i - row index
   * @param {number} j - column index
   * @returns {number}
   */
  get(i, j) {
    return this.entries[this.index(i, j)];
  }

  /**
   * Set the matrix element (i,j) to a value s with the convention that row and column indices start at zero
   * @public
   *
   * @param {number} i - row index
   * @param {number} j - column index
   * @param {number} s - value of the matrix element
   */
  set(i, j, s) {
    this.entries[this.index(i, j)] = s;
  }

  /**
   * @public
   *
   * @param {number} i0
   * @param {number} i1
   * @param {number} j0
   * @param {number} j1
   * @returns {Matrix}
   */
  getMatrix(i0, i1, j0, j1) {
    const result = new Matrix(i1 - i0 + 1, j1 - j0 + 1);
    for (let i = i0; i <= i1; i++) {
      for (let j = j0; j <= j1; j++) {
        result.entries[result.index(i - i0, j - j0)] = this.entries[this.index(i, j)];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Array.<number>} r
   * @param {number} j0
   * @param {number} j1
   * @returns {Matrix}
   */
  getArrayRowMatrix(r, j0, j1) {
    const result = new Matrix(r.length, j1 - j0 + 1);
    for (let i = 0; i < r.length; i++) {
      for (let j = j0; j <= j1; j++) {
        result.entries[result.index(i, j - j0)] = this.entries[this.index(r[i], j)];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} [result] - allow passing in a pre-constructed matrix
   * @returns {Matrix}
   */
  transpose(result) {
    result = result || new Matrix(this.n, this.m);
    assert && assert(result.m === this.n);
    assert && assert(result.n === this.m);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        result.entries[result.index(j, i)] = this.entries[this.index(i, j)];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @returns {number}
   */
  norm1() {
    let f = 0;
    for (let j = 0; j < this.n; j++) {
      let s = 0;
      for (let i = 0; i < this.m; i++) {
        s += Math.abs(this.entries[this.index(i, j)]);
      }
      f = Math.max(f, s);
    }
    return f;
  }

  /**
   * @public
   *
   * @returns {number}
   */
  norm2() {
    return new js_SingularValueDecomposition(this).norm2();
  }

  /**
   * @public
   *
   * @returns {number}
   */
  normInf() {
    let f = 0;
    for (let i = 0; i < this.m; i++) {
      let s = 0;
      for (let j = 0; j < this.n; j++) {
        s += Math.abs(this.entries[this.index(i, j)]);
      }
      f = Math.max(f, s);
    }
    return f;
  }

  /**
   * @public
   *
   * @returns {number}
   */
  normF() {
    let f = 0;
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        f = Matrix.hypot(f, this.entries[this.index(i, j)]);
      }
    }
    return f;
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  uminus() {
    const result = new Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        result.entries[result.index(i, j)] = -this.entries[this.index(i, j)];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  plus(matrix) {
    this.checkMatrixDimensions(matrix);
    const result = new Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = result.index(i, j);
        result.entries[index] = this.entries[index] + matrix.entries[index];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  plusEquals(matrix) {
    this.checkMatrixDimensions(matrix);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        this.entries[index] = this.entries[index] + matrix.entries[index];
      }
    }
    return this;
  }

  /**
   * A linear interpolation between this Matrix (ratio=0) and another Matrix (ratio=1).
   * @public
   *
   * @param {Matrix} matrix
   * @param {number} ratio - Not necessarily constrained in [0, 1]
   * @returns {Matrix}
   */
  blendEquals(matrix, ratio) {
    this.checkMatrixDimensions(matrix);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        const a = this.entries[index];
        const b = matrix.entries[index];
        this.entries[index] = a + (b - a) * ratio;
      }
    }
    return this;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  minus(matrix) {
    this.checkMatrixDimensions(matrix);
    const result = new Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        result.entries[index] = this.entries[index] - matrix.entries[index];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  minusEquals(matrix) {
    this.checkMatrixDimensions(matrix);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        this.entries[index] = this.entries[index] - matrix.entries[index];
      }
    }
    return this;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  arrayTimes(matrix) {
    this.checkMatrixDimensions(matrix);
    const result = new Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = result.index(i, j);
        result.entries[index] = this.entries[index] * matrix.entries[index];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  arrayTimesEquals(matrix) {
    this.checkMatrixDimensions(matrix);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        this.entries[index] = this.entries[index] * matrix.entries[index];
      }
    }
    return this;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  arrayRightDivide(matrix) {
    this.checkMatrixDimensions(matrix);
    const result = new Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        result.entries[index] = this.entries[index] / matrix.entries[index];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  arrayRightDivideEquals(matrix) {
    this.checkMatrixDimensions(matrix);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        this.entries[index] = this.entries[index] / matrix.entries[index];
      }
    }
    return this;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  arrayLeftDivide(matrix) {
    this.checkMatrixDimensions(matrix);
    const result = new Matrix(this.m, this.n);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        result.entries[index] = matrix.entries[index] / this.entries[index];
      }
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  arrayLeftDivideEquals(matrix) {
    this.checkMatrixDimensions(matrix);
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        this.entries[index] = matrix.entries[index] / this.entries[index];
      }
    }
    return this;
  }

  /**
   * @public
   *
   * @param {Matrix|number} matrixOrScalar
   * @returns {Matrix}
   */
  times(matrixOrScalar) {
    let result;
    let i;
    let j;
    let k;
    let s;
    let matrix;
    if (matrixOrScalar.isMatrix) {
      matrix = matrixOrScalar;
      if (matrix.m !== this.n) {
        throw new Error('Matrix inner dimensions must agree.');
      }
      result = new Matrix(this.m, matrix.n);
      const matrixcolj = new Matrix_ArrayType(this.n);
      for (j = 0; j < matrix.n; j++) {
        for (k = 0; k < this.n; k++) {
          matrixcolj[k] = matrix.entries[matrix.index(k, j)];
        }
        for (i = 0; i < this.m; i++) {
          s = 0;
          for (k = 0; k < this.n; k++) {
            s += this.entries[this.index(i, k)] * matrixcolj[k];
          }
          result.entries[result.index(i, j)] = s;
        }
      }
      return result;
    } else {
      s = matrixOrScalar;
      result = new Matrix(this.m, this.n);
      for (i = 0; i < this.m; i++) {
        for (j = 0; j < this.n; j++) {
          result.entries[result.index(i, j)] = s * this.entries[this.index(i, j)];
        }
      }
      return result;
    }
  }

  /**
   * @public
   *
   * @param {number} s
   * @returns {Matrix}
   */
  timesEquals(s) {
    for (let i = 0; i < this.m; i++) {
      for (let j = 0; j < this.n; j++) {
        const index = this.index(i, j);
        this.entries[index] = s * this.entries[index];
      }
    }
    return this;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  solve(matrix) {
    return this.m === this.n ? new js_LUDecomposition(this).solve(matrix) : new js_QRDecomposition(this).solve(matrix);
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   * @returns {Matrix}
   */
  solveTranspose(matrix) {
    return this.transpose().solve(matrix.transpose());
  }

  /**
   * @public
   *
   * @returns {Matrix}
   */
  inverse() {
    return this.solve(Matrix.identity(this.m, this.m));
  }

  /**
   * @public
   *
   * @returns {number}
   */
  det() {
    return new js_LUDecomposition(this).det();
  }

  /**
   * @public
   *
   * @returns {number}
   */
  rank() {
    return new js_SingularValueDecomposition(this).rank();
  }

  /**
   * @public
   *
   * @returns {number}
   */
  cond() {
    return new js_SingularValueDecomposition(this).cond();
  }

  /**
   * @public
   *
   * @returns {number}
   */
  trace() {
    let t = 0;
    for (let i = 0; i < Math.min(this.m, this.n); i++) {
      t += this.entries[this.index(i, i)];
    }
    return t;
  }

  /**
   * @public
   *
   * @param {Matrix} matrix
   */
  checkMatrixDimensions(matrix) {
    if (matrix.m !== this.m || matrix.n !== this.n) {
      throw new Error('Matrix dimensions must agree.');
    }
  }

  /**
   * Returns a string form of this object
   * @public
   *
   * @returns {string}
   */
  toString() {
    let result = '';
    result += `dim: ${this.getRowDimension()}x${this.getColumnDimension()}\n`;
    for (let row = 0; row < this.getRowDimension(); row++) {
      for (let col = 0; col < this.getColumnDimension(); col++) {
        result += `${this.get(row, col)} `;
      }
      result += '\n';
    }
    return result;
  }

  /**
   * Returns a vector that is contained in the specified column
   * @public
   *
   * @param {number} column
   * @returns {Vector2}
   */
  extractVector2(column) {
    assert && assert(this.m === 2); // rows should match vector dimension
    return new Vector2(this.get(0, column), this.get(1, column));
  }

  /**
   * Returns a vector that is contained in the specified column
   * @public
   *
   * @param {number} column
   * @returns {Vector3}
   */
  extractVector3(column) {
    assert && assert(this.m === 3); // rows should match vector dimension
    return new Vector3(this.get(0, column), this.get(1, column), this.get(2, column));
  }

  /**
   * Returns a vector that is contained in the specified column
   * @public
   *
   * @param {number} column
   * @returns {Vector4}
   */
  extractVector4(column) {
    assert && assert(this.m === 4); // rows should match vector dimension
    return new Vector4(this.get(0, column), this.get(1, column), this.get(2, column), this.get(3, column));
  }

  /**
   * Sets the current matrix to the values of the listed column vectors (Vector3).
   * @public
   *
   * @param {Array.<Vector3>} vectors
   * @returns {Matrix}
   */
  setVectors3(vectors) {
    const m = 3;
    const n = vectors.length;
    assert && assert(this.m === m);
    assert && assert(this.n === n);
    for (let i = 0; i < n; i++) {
      const vector = vectors[i];
      this.entries[i] = vector.x;
      this.entries[i + n] = vector.y;
      this.entries[i + 2 * n] = vector.z;
    }
    return this;
  }

  /**
   * sqrt(a^2 + b^2) without under/overflow.
   * @public
   *
   * @param {number} a
   * @param {number} b
   * @returns {number}
   */
  static hypot(a, b) {
    let r;
    if (Math.abs(a) > Math.abs(b)) {
      r = b / a;
      r = Math.abs(a) * Math.sqrt(1 + r * r);
    } else if (b !== 0) {
      r = a / b;
      r = Math.abs(b) * Math.sqrt(1 + r * r);
    } else {
      r = 0.0;
    }
    return r;
  }

  /**
   * Sets this matrix to the identity.
   * @public
   *
   * @param {number} m
   * @param {number} n
   * @returns {Matrix}
   */
  static identity(m, n) {
    const result = new Matrix(m, n);
    for (let i = 0; i < m; i++) {
      for (let j = 0; j < n; j++) {
        result.entries[result.index(i, j)] = i === j ? 1.0 : 0.0;
      }
    }
    return result;
  }

  /**
   * Returns a square diagonal matrix, whose entries along the diagonal are specified by the passed-in array, and the
   * other entries are 0.
   * @public
   *
   * @param {Array.<number>} diagonalValues
   * @returns {Matrix}
   */
  static diagonalMatrix(diagonalValues) {
    const n = diagonalValues.length;
    const result = new Matrix(n, n); // Should fill in zeros
    for (let i = 0; i < n; i++) {
      result.entries[result.index(i, i)] = diagonalValues[i];
    }
    return result;
  }

  /**
   * @public
   *
   * @param {Vector2} vector
   * @returns {Matrix}
   */
  static rowVector2(vector) {
    return new Matrix(1, 2, [vector.x, vector.y]);
  }

  /**
   * @public
   *
   * @param {Vector3} vector
   * @returns {Matrix}
   */
  static rowVector3(vector) {
    return new Matrix(1, 3, [vector.x, vector.y, vector.z]);
  }

  /**
   * @public
   *
   * @param {Vector4} vector
   * @returns {Matrix}
   */
  static rowVector4(vector) {
    return new Matrix(1, 4, [vector.x, vector.y, vector.z, vector.w]);
  }

  /**
   * @public
   *
   * @param {Vector2|Vector3|Vector4} vector
   * @returns {Matrix}
   */
  static rowVector(vector) {
    if (vector.isVector2) {
      return Matrix.rowVector2(vector);
    } else if (vector.isVector3) {
      return Matrix.rowVector3(vector);
    } else if (vector.isVector4) {
      return Matrix.rowVector4(vector);
    } else {
      throw new Error(`undetected type of vector: ${vector.toString()}`);
    }
  }

  /**
   * @public
   *
   * @param {Vector2} vector
   * @returns {Matrix}
   */
  static columnVector2(vector) {
    return new Matrix(2, 1, [vector.x, vector.y]);
  }

  /**
   * @public
   *
   * @param {Vector3} vector
   * @returns {Matrix}
   */
  static columnVector3(vector) {
    return new Matrix(3, 1, [vector.x, vector.y, vector.z]);
  }

  /**
   * @public
   *
   * @param {Vector4} vector
   * @returns {Matrix}
   */
  static columnVector4(vector) {
    return new Matrix(4, 1, [vector.x, vector.y, vector.z, vector.w]);
  }

  /**
   * @public
   *
   * @param {Vector2|Vector3|Vector4} vector
   * @returns {Matrix}
   */
  static columnVector(vector) {
    if (vector.isVector2) {
      return Matrix.columnVector2(vector);
    } else if (vector.isVector3) {
      return Matrix.columnVector3(vector);
    } else if (vector.isVector4) {
      return Matrix.columnVector4(vector);
    } else {
      throw new Error(`undetected type of vector: ${vector.toString()}`);
    }
  }

  /**
   * Create a Matrix where each column is a vector
   * @public
   *
   * @param {Array.<Vector2>} vectors
   */
  static fromVectors2(vectors) {
    const dimension = 2;
    const n = vectors.length;
    const data = new Matrix_ArrayType(dimension * n);
    for (let i = 0; i < n; i++) {
      const vector = vectors[i];
      data[i] = vector.x;
      data[i + n] = vector.y;
    }
    return new Matrix(dimension, n, data, true);
  }

  /**
   * Create a Matrix where each column is a vector
   * @public
   *
   * @param {Array.<Vector3>} vectors
   */
  static fromVectors3(vectors) {
    const dimension = 3;
    const n = vectors.length;
    const data = new Matrix_ArrayType(dimension * n);
    for (let i = 0; i < n; i++) {
      const vector = vectors[i];
      data[i] = vector.x;
      data[i + n] = vector.y;
      data[i + 2 * n] = vector.z;
    }
    return new Matrix(dimension, n, data, true);
  }

  /**
   * Create a Matrix where each column is a vector
   * @public
   *
   * @param {Array.<Vector4>} vectors
   */
  static fromVectors4(vectors) {
    const dimension = 4;
    const n = vectors.length;
    const data = new Matrix_ArrayType(dimension * n);
    for (let i = 0; i < n; i++) {
      const vector = vectors[i];
      data[i] = vector.x;
      data[i + n] = vector.y;
      data[i + 2 * n] = vector.z;
      data[i + 3 * n] = vector.w;
    }
    return new Matrix(dimension, n, data, true);
  }
}

// @public {boolean}
Matrix.prototype.isMatrix = true;
js_dot.register('Matrix', Matrix);
/* harmony default export */ const js_Matrix = (Matrix);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc0FycmF5IiwiZG90IiwiTFVEZWNvbXBvc2l0aW9uIiwiUVJEZWNvbXBvc2l0aW9uIiwiU2luZ3VsYXJWYWx1ZURlY29tcG9zaXRpb24iLCJWZWN0b3IyIiwiVmVjdG9yMyIsIlZlY3RvcjQiLCJBcnJheVR5cGUiLCJ3aW5kb3ciLCJGbG9hdDY0QXJyYXkiLCJBcnJheSIsIk1hdHJpeCIsImNvbnN0cnVjdG9yIiwibSIsIm4iLCJmaWxsZXIiLCJmYXN0Iiwic2l6ZSIsImkiLCJlbnRyaWVzIiwiYXNzZXJ0IiwibGVuZ3RoIiwiY29weSIsInJlc3VsdCIsImdldEFycmF5IiwiZ2V0QXJyYXlDb3B5IiwiZ2V0Um93RGltZW5zaW9uIiwiZ2V0Q29sdW1uRGltZW5zaW9uIiwiaW5kZXgiLCJqIiwiZ2V0Iiwic2V0IiwicyIsImdldE1hdHJpeCIsImkwIiwiaTEiLCJqMCIsImoxIiwiZ2V0QXJyYXlSb3dNYXRyaXgiLCJyIiwidHJhbnNwb3NlIiwibm9ybTEiLCJmIiwiTWF0aCIsImFicyIsIm1heCIsIm5vcm0yIiwibm9ybUluZiIsIm5vcm1GIiwiaHlwb3QiLCJ1bWludXMiLCJwbHVzIiwibWF0cml4IiwiY2hlY2tNYXRyaXhEaW1lbnNpb25zIiwicGx1c0VxdWFscyIsImJsZW5kRXF1YWxzIiwicmF0aW8iLCJhIiwiYiIsIm1pbnVzIiwibWludXNFcXVhbHMiLCJhcnJheVRpbWVzIiwiYXJyYXlUaW1lc0VxdWFscyIsImFycmF5UmlnaHREaXZpZGUiLCJhcnJheVJpZ2h0RGl2aWRlRXF1YWxzIiwiYXJyYXlMZWZ0RGl2aWRlIiwiYXJyYXlMZWZ0RGl2aWRlRXF1YWxzIiwidGltZXMiLCJtYXRyaXhPclNjYWxhciIsImsiLCJpc01hdHJpeCIsIkVycm9yIiwibWF0cml4Y29saiIsInRpbWVzRXF1YWxzIiwic29sdmUiLCJzb2x2ZVRyYW5zcG9zZSIsImludmVyc2UiLCJpZGVudGl0eSIsImRldCIsInJhbmsiLCJjb25kIiwidHJhY2UiLCJ0IiwibWluIiwidG9TdHJpbmciLCJyb3ciLCJjb2wiLCJleHRyYWN0VmVjdG9yMiIsImNvbHVtbiIsImV4dHJhY3RWZWN0b3IzIiwiZXh0cmFjdFZlY3RvcjQiLCJzZXRWZWN0b3JzMyIsInZlY3RvcnMiLCJ2ZWN0b3IiLCJ4IiwieSIsInoiLCJzcXJ0IiwiZGlhZ29uYWxNYXRyaXgiLCJkaWFnb25hbFZhbHVlcyIsInJvd1ZlY3RvcjIiLCJyb3dWZWN0b3IzIiwicm93VmVjdG9yNCIsInciLCJyb3dWZWN0b3IiLCJpc1ZlY3RvcjIiLCJpc1ZlY3RvcjMiLCJpc1ZlY3RvcjQiLCJjb2x1bW5WZWN0b3IyIiwiY29sdW1uVmVjdG9yMyIsImNvbHVtblZlY3RvcjQiLCJjb2x1bW5WZWN0b3IiLCJmcm9tVmVjdG9yczIiLCJkaW1lbnNpb24iLCJkYXRhIiwiZnJvbVZlY3RvcnMzIiwiZnJvbVZlY3RvcnM0IiwicHJvdG90eXBlIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNYXRyaXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQXJiaXRyYXJ5LWRpbWVuc2lvbmFsIG1hdHJpeCwgYmFzZWQgb24gSmFtYSAoaHR0cDovL21hdGgubmlzdC5nb3YvamF2YW51bWVyaWNzL2phbWEvKVxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgaXNBcnJheSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvaXNBcnJheS5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcbmltcG9ydCAnLi9FaWdlbnZhbHVlRGVjb21wb3NpdGlvbi5qcyc7XG5pbXBvcnQgTFVEZWNvbXBvc2l0aW9uIGZyb20gJy4vTFVEZWNvbXBvc2l0aW9uLmpzJztcbmltcG9ydCBRUkRlY29tcG9zaXRpb24gZnJvbSAnLi9RUkRlY29tcG9zaXRpb24uanMnO1xuaW1wb3J0IFNpbmd1bGFyVmFsdWVEZWNvbXBvc2l0aW9uIGZyb20gJy4vU2luZ3VsYXJWYWx1ZURlY29tcG9zaXRpb24uanMnO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi9WZWN0b3IyLmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5pbXBvcnQgVmVjdG9yNCBmcm9tICcuL1ZlY3RvcjQuanMnO1xuXG5jb25zdCBBcnJheVR5cGUgPSB3aW5kb3cuRmxvYXQ2NEFycmF5IHx8IEFycmF5O1xuXG5jbGFzcyBNYXRyaXgge1xuICAvKipcbiAgICogQHBhcmFtIHtudW1iZXJ9IG0gLSBudW1iZXIgb2Ygcm93c1xuICAgKiBAcGFyYW0ge251bWJlcn0gbiAtIG51bWJlciBvZiBjb2x1bW5zXG4gICAqIEBwYXJhbSB7bnVtYmVyW10gfCBudW1iZXJ9IFtmaWxsZXJdXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW2Zhc3RdXG4gICAqL1xuICBjb25zdHJ1Y3RvciggbSwgbiwgZmlsbGVyLCBmYXN0ICkge1xuICAgIC8vIEBwdWJsaWMge251bWJlcn1cbiAgICB0aGlzLm0gPSBtO1xuICAgIHRoaXMubiA9IG47XG5cbiAgICBjb25zdCBzaXplID0gbSAqIG47XG4gICAgLy8gQHB1YmxpYyB7bnVtYmVyfVxuICAgIHRoaXMuc2l6ZSA9IHNpemU7XG4gICAgbGV0IGk7XG5cbiAgICBpZiAoIGZhc3QgKSB7XG4gICAgICAvLyBAcHVibGljIHtBcnJheS48bnVtYmVyPnxGbG9hdDY0QXJyYXl9XG4gICAgICB0aGlzLmVudHJpZXMgPSBmaWxsZXI7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgaWYgKCAhZmlsbGVyICkge1xuICAgICAgICBmaWxsZXIgPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBlbnRyaWVzIHN0b3JlZCBpbiByb3ctbWFqb3IgZm9ybWF0XG4gICAgICB0aGlzLmVudHJpZXMgPSBuZXcgQXJyYXlUeXBlKCBzaXplICk7XG5cbiAgICAgIGlmICggaXNBcnJheSggZmlsbGVyICkgKSB7XG4gICAgICAgIGFzc2VydCAmJiBhc3NlcnQoIGZpbGxlci5sZW5ndGggPT09IHNpemUgKTtcblxuICAgICAgICBmb3IgKCBpID0gMDsgaSA8IHNpemU7IGkrKyApIHtcbiAgICAgICAgICB0aGlzLmVudHJpZXNbIGkgXSA9IGZpbGxlclsgaSBdO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcbiAgICAgICAgZm9yICggaSA9IDA7IGkgPCBzaXplOyBpKysgKSB7XG4gICAgICAgICAgdGhpcy5lbnRyaWVzWyBpIF0gPSBmaWxsZXI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgY29weSgpIHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWF0cml4KCB0aGlzLm0sIHRoaXMubiApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMuc2l6ZTsgaSsrICkge1xuICAgICAgcmVzdWx0LmVudHJpZXNbIGkgXSA9IHRoaXMuZW50cmllc1sgaSBdO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge0FycmF5LjxudW1iZXI+fVxuICAgKi9cbiAgZ2V0QXJyYXkoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtBcnJheS48bnVtYmVyPn1cbiAgICovXG4gIGdldEFycmF5Q29weSgpIHtcbiAgICByZXR1cm4gbmV3IEFycmF5VHlwZSggdGhpcy5lbnRyaWVzICk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0Um93RGltZW5zaW9uKCkge1xuICAgIHJldHVybiB0aGlzLm07XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0Q29sdW1uRGltZW5zaW9uKCkge1xuICAgIHJldHVybiB0aGlzLm47XG4gIH1cblxuICAvKipcbiAgICogVE9ETzogaW5saW5lIHRoaXMgcGxhY2VzIGlmIHdlIGFyZW4ndCB1c2luZyBhbiBpbmxpbmluZyBjb21waWxlciEgKGNoZWNrIHBlcmZvcm1hbmNlKVxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBpbmRleCggaSwgaiApIHtcbiAgICByZXR1cm4gaSAqIHRoaXMubiArIGo7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBtYXRyaXggZWxlbWVudCAoaSxqKSB3aXRoIHRoZSBjb252ZW50aW9uIHRoYXQgcm93IGFuZCBjb2x1bW4gaW5kaWNlcyBzdGFydCBhdCB6ZXJvXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGkgLSByb3cgaW5kZXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGogLSBjb2x1bW4gaW5kZXhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldCggaSwgaiApIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyB0aGlzLmluZGV4KCBpLCBqICkgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIG1hdHJpeCBlbGVtZW50IChpLGopIHRvIGEgdmFsdWUgcyB3aXRoIHRoZSBjb252ZW50aW9uIHRoYXQgcm93IGFuZCBjb2x1bW4gaW5kaWNlcyBzdGFydCBhdCB6ZXJvXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGkgLSByb3cgaW5kZXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGogLSBjb2x1bW4gaW5kZXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHMgLSB2YWx1ZSBvZiB0aGUgbWF0cml4IGVsZW1lbnRcbiAgICovXG4gIHNldCggaSwgaiwgcyApIHtcbiAgICB0aGlzLmVudHJpZXNbIHRoaXMuaW5kZXgoIGksIGogKSBdID0gcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBpMFxuICAgKiBAcGFyYW0ge251bWJlcn0gaTFcbiAgICogQHBhcmFtIHtudW1iZXJ9IGowXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBqMVxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgZ2V0TWF0cml4KCBpMCwgaTEsIGowLCBqMSApIHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWF0cml4KCBpMSAtIGkwICsgMSwgajEgLSBqMCArIDEgKTtcbiAgICBmb3IgKCBsZXQgaSA9IGkwOyBpIDw9IGkxOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IGowOyBqIDw9IGoxOyBqKysgKSB7XG4gICAgICAgIHJlc3VsdC5lbnRyaWVzWyByZXN1bHQuaW5kZXgoIGkgLSBpMCwgaiAtIGowICkgXSA9IHRoaXMuZW50cmllc1sgdGhpcy5pbmRleCggaSwgaiApIF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSByXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBqMFxuICAgKiBAcGFyYW0ge251bWJlcn0gajFcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGdldEFycmF5Um93TWF0cml4KCByLCBqMCwgajEgKSB7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdHJpeCggci5sZW5ndGgsIGoxIC0gajAgKyAxICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgci5sZW5ndGg7IGkrKyApIHtcbiAgICAgIGZvciAoIGxldCBqID0gajA7IGogPD0gajE7IGorKyApIHtcbiAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiAtIGowICkgXSA9IHRoaXMuZW50cmllc1sgdGhpcy5pbmRleCggclsgaSBdLCBqICkgXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBbcmVzdWx0XSAtIGFsbG93IHBhc3NpbmcgaW4gYSBwcmUtY29uc3RydWN0ZWQgbWF0cml4XG4gICAqIEByZXR1cm5zIHtNYXRyaXh9XG4gICAqL1xuICB0cmFuc3Bvc2UoIHJlc3VsdCApIHtcbiAgICByZXN1bHQgPSByZXN1bHQgfHwgbmV3IE1hdHJpeCggdGhpcy5uLCB0aGlzLm0gKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByZXN1bHQubSA9PT0gdGhpcy5uICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcmVzdWx0Lm4gPT09IHRoaXMubSApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICAgIHJlc3VsdC5lbnRyaWVzWyByZXN1bHQuaW5kZXgoIGosIGkgKSBdID0gdGhpcy5lbnRyaWVzWyB0aGlzLmluZGV4KCBpLCBqICkgXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBub3JtMSgpIHtcbiAgICBsZXQgZiA9IDA7XG4gICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICBsZXQgcyA9IDA7XG4gICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgICAgcyArPSBNYXRoLmFicyggdGhpcy5lbnRyaWVzWyB0aGlzLmluZGV4KCBpLCBqICkgXSApO1xuICAgICAgfVxuICAgICAgZiA9IE1hdGgubWF4KCBmLCBzICk7XG4gICAgfVxuICAgIHJldHVybiBmO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG5vcm0yKCkge1xuICAgIHJldHVybiAoIG5ldyBTaW5ndWxhclZhbHVlRGVjb21wb3NpdGlvbiggdGhpcyApLm5vcm0yKCkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBub3JtSW5mKCkge1xuICAgIGxldCBmID0gMDtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgIGxldCBzID0gMDtcbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IHRoaXMubjsgaisrICkge1xuICAgICAgICBzICs9IE1hdGguYWJzKCB0aGlzLmVudHJpZXNbIHRoaXMuaW5kZXgoIGksIGogKSBdICk7XG4gICAgICB9XG4gICAgICBmID0gTWF0aC5tYXgoIGYsIHMgKTtcbiAgICB9XG4gICAgcmV0dXJuIGY7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgbm9ybUYoKSB7XG4gICAgbGV0IGYgPSAwO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICAgIGYgPSBNYXRyaXguaHlwb3QoIGYsIHRoaXMuZW50cmllc1sgdGhpcy5pbmRleCggaSwgaiApIF0gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGY7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgdW1pbnVzKCkge1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgoIHRoaXMubSwgdGhpcy5uICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSAtdGhpcy5lbnRyaWVzWyB0aGlzLmluZGV4KCBpLCBqICkgXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHBsdXMoIG1hdHJpeCApIHtcbiAgICB0aGlzLmNoZWNrTWF0cml4RGltZW5zaW9ucyggbWF0cml4ICk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdHJpeCggdGhpcy5tLCB0aGlzLm4gKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IHRoaXMubjsgaisrICkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHJlc3VsdC5pbmRleCggaSwgaiApO1xuICAgICAgICByZXN1bHQuZW50cmllc1sgaW5kZXggXSA9IHRoaXMuZW50cmllc1sgaW5kZXggXSArIG1hdHJpeC5lbnRyaWVzWyBpbmRleCBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXh9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgcGx1c0VxdWFscyggbWF0cml4ICkge1xuICAgIHRoaXMuY2hlY2tNYXRyaXhEaW1lbnNpb25zKCBtYXRyaXggKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IHRoaXMubjsgaisrICkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaW5kZXgoIGksIGogKTtcbiAgICAgICAgdGhpcy5lbnRyaWVzWyBpbmRleCBdID0gdGhpcy5lbnRyaWVzWyBpbmRleCBdICsgbWF0cml4LmVudHJpZXNbIGluZGV4IF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0aGlzIE1hdHJpeCAocmF0aW89MCkgYW5kIGFub3RoZXIgTWF0cml4IChyYXRpbz0xKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeH0gbWF0cml4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSByYXRpbyAtIE5vdCBuZWNlc3NhcmlseSBjb25zdHJhaW5lZCBpbiBbMCwgMV1cbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGJsZW5kRXF1YWxzKCBtYXRyaXgsIHJhdGlvICkge1xuICAgIHRoaXMuY2hlY2tNYXRyaXhEaW1lbnNpb25zKCBtYXRyaXggKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IHRoaXMubjsgaisrICkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaW5kZXgoIGksIGogKTtcbiAgICAgICAgY29uc3QgYSA9IHRoaXMuZW50cmllc1sgaW5kZXggXTtcbiAgICAgICAgY29uc3QgYiA9IG1hdHJpeC5lbnRyaWVzWyBpbmRleCBdO1xuICAgICAgICB0aGlzLmVudHJpZXNbIGluZGV4IF0gPSBhICsgKCBiIC0gYSApICogcmF0aW87XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXh9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgbWludXMoIG1hdHJpeCApIHtcbiAgICB0aGlzLmNoZWNrTWF0cml4RGltZW5zaW9ucyggbWF0cml4ICk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdHJpeCggdGhpcy5tLCB0aGlzLm4gKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IHRoaXMubjsgaisrICkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaW5kZXgoIGksIGogKTtcbiAgICAgICAgcmVzdWx0LmVudHJpZXNbIGluZGV4IF0gPSB0aGlzLmVudHJpZXNbIGluZGV4IF0gLSBtYXRyaXguZW50cmllc1sgaW5kZXggXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIG1pbnVzRXF1YWxzKCBtYXRyaXggKSB7XG4gICAgdGhpcy5jaGVja01hdHJpeERpbWVuc2lvbnMoIG1hdHJpeCApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pbmRleCggaSwgaiApO1xuICAgICAgICB0aGlzLmVudHJpZXNbIGluZGV4IF0gPSB0aGlzLmVudHJpZXNbIGluZGV4IF0gLSBtYXRyaXguZW50cmllc1sgaW5kZXggXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeH0gbWF0cml4XG4gICAqIEByZXR1cm5zIHtNYXRyaXh9XG4gICAqL1xuICBhcnJheVRpbWVzKCBtYXRyaXggKSB7XG4gICAgdGhpcy5jaGVja01hdHJpeERpbWVuc2lvbnMoIG1hdHJpeCApO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgoIHRoaXMubSwgdGhpcy5uICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSByZXN1bHQuaW5kZXgoIGksIGogKTtcbiAgICAgICAgcmVzdWx0LmVudHJpZXNbIGluZGV4IF0gPSB0aGlzLmVudHJpZXNbIGluZGV4IF0gKiBtYXRyaXguZW50cmllc1sgaW5kZXggXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGFycmF5VGltZXNFcXVhbHMoIG1hdHJpeCApIHtcbiAgICB0aGlzLmNoZWNrTWF0cml4RGltZW5zaW9ucyggbWF0cml4ICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4KCBpLCBqICk7XG4gICAgICAgIHRoaXMuZW50cmllc1sgaW5kZXggXSA9IHRoaXMuZW50cmllc1sgaW5kZXggXSAqIG1hdHJpeC5lbnRyaWVzWyBpbmRleCBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGFycmF5UmlnaHREaXZpZGUoIG1hdHJpeCApIHtcbiAgICB0aGlzLmNoZWNrTWF0cml4RGltZW5zaW9ucyggbWF0cml4ICk7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdHJpeCggdGhpcy5tLCB0aGlzLm4gKTtcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgIGZvciAoIGxldCBqID0gMDsgaiA8IHRoaXMubjsgaisrICkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMuaW5kZXgoIGksIGogKTtcbiAgICAgICAgcmVzdWx0LmVudHJpZXNbIGluZGV4IF0gPSB0aGlzLmVudHJpZXNbIGluZGV4IF0gLyBtYXRyaXguZW50cmllc1sgaW5kZXggXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGFycmF5UmlnaHREaXZpZGVFcXVhbHMoIG1hdHJpeCApIHtcbiAgICB0aGlzLmNoZWNrTWF0cml4RGltZW5zaW9ucyggbWF0cml4ICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4KCBpLCBqICk7XG4gICAgICAgIHRoaXMuZW50cmllc1sgaW5kZXggXSA9IHRoaXMuZW50cmllc1sgaW5kZXggXSAvIG1hdHJpeC5lbnRyaWVzWyBpbmRleCBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4fSBtYXRyaXhcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIGFycmF5TGVmdERpdmlkZSggbWF0cml4ICkge1xuICAgIHRoaXMuY2hlY2tNYXRyaXhEaW1lbnNpb25zKCBtYXRyaXggKTtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWF0cml4KCB0aGlzLm0sIHRoaXMubiApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pbmRleCggaSwgaiApO1xuICAgICAgICByZXN1bHQuZW50cmllc1sgaW5kZXggXSA9IG1hdHJpeC5lbnRyaWVzWyBpbmRleCBdIC8gdGhpcy5lbnRyaWVzWyBpbmRleCBdO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXh9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgYXJyYXlMZWZ0RGl2aWRlRXF1YWxzKCBtYXRyaXggKSB7XG4gICAgdGhpcy5jaGVja01hdHJpeERpbWVuc2lvbnMoIG1hdHJpeCApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHRoaXMubTsgaSsrICkge1xuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5pbmRleCggaSwgaiApO1xuICAgICAgICB0aGlzLmVudHJpZXNbIGluZGV4IF0gPSBtYXRyaXguZW50cmllc1sgaW5kZXggXSAvIHRoaXMuZW50cmllc1sgaW5kZXggXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeHxudW1iZXJ9IG1hdHJpeE9yU2NhbGFyXG4gICAqIEByZXR1cm5zIHtNYXRyaXh9XG4gICAqL1xuICB0aW1lcyggbWF0cml4T3JTY2FsYXIgKSB7XG4gICAgbGV0IHJlc3VsdDtcbiAgICBsZXQgaTtcbiAgICBsZXQgajtcbiAgICBsZXQgaztcbiAgICBsZXQgcztcbiAgICBsZXQgbWF0cml4O1xuICAgIGlmICggbWF0cml4T3JTY2FsYXIuaXNNYXRyaXggKSB7XG4gICAgICBtYXRyaXggPSBtYXRyaXhPclNjYWxhcjtcbiAgICAgIGlmICggbWF0cml4Lm0gIT09IHRoaXMubiApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnTWF0cml4IGlubmVyIGRpbWVuc2lvbnMgbXVzdCBhZ3JlZS4nICk7XG4gICAgICB9XG4gICAgICByZXN1bHQgPSBuZXcgTWF0cml4KCB0aGlzLm0sIG1hdHJpeC5uICk7XG4gICAgICBjb25zdCBtYXRyaXhjb2xqID0gbmV3IEFycmF5VHlwZSggdGhpcy5uICk7XG4gICAgICBmb3IgKCBqID0gMDsgaiA8IG1hdHJpeC5uOyBqKysgKSB7XG4gICAgICAgIGZvciAoIGsgPSAwOyBrIDwgdGhpcy5uOyBrKysgKSB7XG4gICAgICAgICAgbWF0cml4Y29salsgayBdID0gbWF0cml4LmVudHJpZXNbIG1hdHJpeC5pbmRleCggaywgaiApIF07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICggaSA9IDA7IGkgPCB0aGlzLm07IGkrKyApIHtcbiAgICAgICAgICBzID0gMDtcbiAgICAgICAgICBmb3IgKCBrID0gMDsgayA8IHRoaXMubjsgaysrICkge1xuICAgICAgICAgICAgcyArPSB0aGlzLmVudHJpZXNbIHRoaXMuaW5kZXgoIGksIGsgKSBdICogbWF0cml4Y29salsgayBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBqICkgXSA9IHM7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgcyA9IG1hdHJpeE9yU2NhbGFyO1xuICAgICAgcmVzdWx0ID0gbmV3IE1hdHJpeCggdGhpcy5tLCB0aGlzLm4gKTtcbiAgICAgIGZvciAoIGkgPSAwOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgdGhpcy5uOyBqKysgKSB7XG4gICAgICAgICAgcmVzdWx0LmVudHJpZXNbIHJlc3VsdC5pbmRleCggaSwgaiApIF0gPSBzICogdGhpcy5lbnRyaWVzWyB0aGlzLmluZGV4KCBpLCBqICkgXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gc1xuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgdGltZXNFcXVhbHMoIHMgKSB7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5tOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCB0aGlzLm47IGorKyApIHtcbiAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLmluZGV4KCBpLCBqICk7XG4gICAgICAgIHRoaXMuZW50cmllc1sgaW5kZXggXSA9IHMgKiB0aGlzLmVudHJpZXNbIGluZGV4IF07XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXh9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgc29sdmUoIG1hdHJpeCApIHtcbiAgICByZXR1cm4gKCB0aGlzLm0gPT09IHRoaXMubiA/ICggbmV3IExVRGVjb21wb3NpdGlvbiggdGhpcyApICkuc29sdmUoIG1hdHJpeCApIDpcbiAgICAgICAgICAgICAoIG5ldyBRUkRlY29tcG9zaXRpb24oIHRoaXMgKSApLnNvbHZlKCBtYXRyaXggKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXh9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgc29sdmVUcmFuc3Bvc2UoIG1hdHJpeCApIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc3Bvc2UoKS5zb2x2ZSggbWF0cml4LnRyYW5zcG9zZSgpICk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgaW52ZXJzZSgpIHtcbiAgICByZXR1cm4gdGhpcy5zb2x2ZSggTWF0cml4LmlkZW50aXR5KCB0aGlzLm0sIHRoaXMubSApICk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZGV0KCkge1xuICAgIHJldHVybiBuZXcgTFVEZWNvbXBvc2l0aW9uKCB0aGlzICkuZGV0KCk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgcmFuaygpIHtcbiAgICByZXR1cm4gbmV3IFNpbmd1bGFyVmFsdWVEZWNvbXBvc2l0aW9uKCB0aGlzICkucmFuaygpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGNvbmQoKSB7XG4gICAgcmV0dXJuIG5ldyBTaW5ndWxhclZhbHVlRGVjb21wb3NpdGlvbiggdGhpcyApLmNvbmQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICB0cmFjZSgpIHtcbiAgICBsZXQgdCA9IDA7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgTWF0aC5taW4oIHRoaXMubSwgdGhpcy5uICk7IGkrKyApIHtcbiAgICAgIHQgKz0gdGhpcy5lbnRyaWVzWyB0aGlzLmluZGV4KCBpLCBpICkgXTtcbiAgICB9XG4gICAgcmV0dXJuIHQ7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeH0gbWF0cml4XG4gICAqL1xuICBjaGVja01hdHJpeERpbWVuc2lvbnMoIG1hdHJpeCApIHtcbiAgICBpZiAoIG1hdHJpeC5tICE9PSB0aGlzLm0gfHwgbWF0cml4Lm4gIT09IHRoaXMubiApIHtcbiAgICAgIHRocm93IG5ldyBFcnJvciggJ01hdHJpeCBkaW1lbnNpb25zIG11c3QgYWdyZWUuJyApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIGZvcm0gb2YgdGhpcyBvYmplY3RcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuICAgIHJlc3VsdCArPSBgZGltOiAke3RoaXMuZ2V0Um93RGltZW5zaW9uKCl9eCR7dGhpcy5nZXRDb2x1bW5EaW1lbnNpb24oKX1cXG5gO1xuICAgIGZvciAoIGxldCByb3cgPSAwOyByb3cgPCB0aGlzLmdldFJvd0RpbWVuc2lvbigpOyByb3crKyApIHtcbiAgICAgIGZvciAoIGxldCBjb2wgPSAwOyBjb2wgPCB0aGlzLmdldENvbHVtbkRpbWVuc2lvbigpOyBjb2wrKyApIHtcbiAgICAgICAgcmVzdWx0ICs9IGAke3RoaXMuZ2V0KCByb3csIGNvbCApfSBgO1xuICAgICAgfVxuICAgICAgcmVzdWx0ICs9ICdcXG4nO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB2ZWN0b3IgdGhhdCBpcyBjb250YWluZWQgaW4gdGhlIHNwZWNpZmllZCBjb2x1bW5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gY29sdW1uXG4gICAqIEByZXR1cm5zIHtWZWN0b3IyfVxuICAgKi9cbiAgZXh0cmFjdFZlY3RvcjIoIGNvbHVtbiApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLm0gPT09IDIgKTsgLy8gcm93cyBzaG91bGQgbWF0Y2ggdmVjdG9yIGRpbWVuc2lvblxuICAgIHJldHVybiBuZXcgVmVjdG9yMiggdGhpcy5nZXQoIDAsIGNvbHVtbiApLCB0aGlzLmdldCggMSwgY29sdW1uICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdmVjdG9yIHRoYXQgaXMgY29udGFpbmVkIGluIHRoZSBzcGVjaWZpZWQgY29sdW1uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtblxuICAgKiBAcmV0dXJucyB7VmVjdG9yM31cbiAgICovXG4gIGV4dHJhY3RWZWN0b3IzKCBjb2x1bW4gKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5tID09PSAzICk7IC8vIHJvd3Mgc2hvdWxkIG1hdGNoIHZlY3RvciBkaW1lbnNpb25cbiAgICByZXR1cm4gbmV3IFZlY3RvcjMoIHRoaXMuZ2V0KCAwLCBjb2x1bW4gKSwgdGhpcy5nZXQoIDEsIGNvbHVtbiApLCB0aGlzLmdldCggMiwgY29sdW1uICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgdmVjdG9yIHRoYXQgaXMgY29udGFpbmVkIGluIHRoZSBzcGVjaWZpZWQgY29sdW1uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtblxuICAgKiBAcmV0dXJucyB7VmVjdG9yNH1cbiAgICovXG4gIGV4dHJhY3RWZWN0b3I0KCBjb2x1bW4gKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggdGhpcy5tID09PSA0ICk7IC8vIHJvd3Mgc2hvdWxkIG1hdGNoIHZlY3RvciBkaW1lbnNpb25cbiAgICByZXR1cm4gbmV3IFZlY3RvcjQoIHRoaXMuZ2V0KCAwLCBjb2x1bW4gKSwgdGhpcy5nZXQoIDEsIGNvbHVtbiApLCB0aGlzLmdldCggMiwgY29sdW1uICksIHRoaXMuZ2V0KCAzLCBjb2x1bW4gKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGN1cnJlbnQgbWF0cml4IHRvIHRoZSB2YWx1ZXMgb2YgdGhlIGxpc3RlZCBjb2x1bW4gdmVjdG9ycyAoVmVjdG9yMykuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheS48VmVjdG9yMz59IHZlY3RvcnNcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHNldFZlY3RvcnMzKCB2ZWN0b3JzICkge1xuICAgIGNvbnN0IG0gPSAzO1xuICAgIGNvbnN0IG4gPSB2ZWN0b3JzLmxlbmd0aDtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMubSA9PT0gbSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHRoaXMubiA9PT0gbiApO1xuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgY29uc3QgdmVjdG9yID0gdmVjdG9yc1sgaSBdO1xuICAgICAgdGhpcy5lbnRyaWVzWyBpIF0gPSB2ZWN0b3IueDtcbiAgICAgIHRoaXMuZW50cmllc1sgaSArIG4gXSA9IHZlY3Rvci55O1xuICAgICAgdGhpcy5lbnRyaWVzWyBpICsgMiAqIG4gXSA9IHZlY3Rvci56O1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIHNxcnQoYV4yICsgYl4yKSB3aXRob3V0IHVuZGVyL292ZXJmbG93LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBiXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBzdGF0aWMgaHlwb3QoIGEsIGIgKSB7XG4gICAgbGV0IHI7XG4gICAgaWYgKCBNYXRoLmFicyggYSApID4gTWF0aC5hYnMoIGIgKSApIHtcbiAgICAgIHIgPSBiIC8gYTtcbiAgICAgIHIgPSBNYXRoLmFicyggYSApICogTWF0aC5zcXJ0KCAxICsgciAqIHIgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIGIgIT09IDAgKSB7XG4gICAgICByID0gYSAvIGI7XG4gICAgICByID0gTWF0aC5hYnMoIGIgKSAqIE1hdGguc3FydCggMSArIHIgKiByICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgciA9IDAuMDtcbiAgICB9XG4gICAgcmV0dXJuIHI7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIG1hdHJpeCB0byB0aGUgaWRlbnRpdHkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG1cbiAgICogQHBhcmFtIHtudW1iZXJ9IG5cbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHN0YXRpYyBpZGVudGl0eSggbSwgbiApIHtcbiAgICBjb25zdCByZXN1bHQgPSBuZXcgTWF0cml4KCBtLCBuICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbTsgaSsrICkge1xuICAgICAgZm9yICggbGV0IGogPSAwOyBqIDwgbjsgaisrICkge1xuICAgICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBqICkgXSA9ICggaSA9PT0gaiA/IDEuMCA6IDAuMCApO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzcXVhcmUgZGlhZ29uYWwgbWF0cml4LCB3aG9zZSBlbnRyaWVzIGFsb25nIHRoZSBkaWFnb25hbCBhcmUgc3BlY2lmaWVkIGJ5IHRoZSBwYXNzZWQtaW4gYXJyYXksIGFuZCB0aGVcbiAgICogb3RoZXIgZW50cmllcyBhcmUgMC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxudW1iZXI+fSBkaWFnb25hbFZhbHVlc1xuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgc3RhdGljIGRpYWdvbmFsTWF0cml4KCBkaWFnb25hbFZhbHVlcyApIHtcbiAgICBjb25zdCBuID0gZGlhZ29uYWxWYWx1ZXMubGVuZ3RoO1xuICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBNYXRyaXgoIG4sIG4gKTsgLy8gU2hvdWxkIGZpbGwgaW4gemVyb3NcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBuOyBpKysgKSB7XG4gICAgICByZXN1bHQuZW50cmllc1sgcmVzdWx0LmluZGV4KCBpLCBpICkgXSA9IGRpYWdvbmFsVmFsdWVzWyBpIF07XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHZlY3RvclxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgc3RhdGljIHJvd1ZlY3RvcjIoIHZlY3RvciApIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCggMSwgMiwgWyB2ZWN0b3IueCwgdmVjdG9yLnkgXSApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2ZWN0b3JcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHN0YXRpYyByb3dWZWN0b3IzKCB2ZWN0b3IgKSB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXgoIDEsIDMsIFsgdmVjdG9yLngsIHZlY3Rvci55LCB2ZWN0b3IueiBdICk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjR9IHZlY3RvclxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgc3RhdGljIHJvd1ZlY3RvcjQoIHZlY3RvciApIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCggMSwgNCwgWyB2ZWN0b3IueCwgdmVjdG9yLnksIHZlY3Rvci56LCB2ZWN0b3IudyBdICk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ8VmVjdG9yM3xWZWN0b3I0fSB2ZWN0b3JcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHN0YXRpYyByb3dWZWN0b3IoIHZlY3RvciApIHtcbiAgICBpZiAoIHZlY3Rvci5pc1ZlY3RvcjIgKSB7XG4gICAgICByZXR1cm4gTWF0cml4LnJvd1ZlY3RvcjIoIHZlY3RvciApO1xuICAgIH1cbiAgICBlbHNlIGlmICggdmVjdG9yLmlzVmVjdG9yMyApIHtcbiAgICAgIHJldHVybiBNYXRyaXgucm93VmVjdG9yMyggdmVjdG9yICk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCB2ZWN0b3IuaXNWZWN0b3I0ICkge1xuICAgICAgcmV0dXJuIE1hdHJpeC5yb3dWZWN0b3I0KCB2ZWN0b3IgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGB1bmRldGVjdGVkIHR5cGUgb2YgdmVjdG9yOiAke3ZlY3Rvci50b1N0cmluZygpfWAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHZlY3RvclxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgc3RhdGljIGNvbHVtblZlY3RvcjIoIHZlY3RvciApIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCggMiwgMSwgWyB2ZWN0b3IueCwgdmVjdG9yLnkgXSApO1xuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2ZWN0b3JcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHN0YXRpYyBjb2x1bW5WZWN0b3IzKCB2ZWN0b3IgKSB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXgoIDMsIDEsIFsgdmVjdG9yLngsIHZlY3Rvci55LCB2ZWN0b3IueiBdICk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjR9IHZlY3RvclxuICAgKiBAcmV0dXJucyB7TWF0cml4fVxuICAgKi9cbiAgc3RhdGljIGNvbHVtblZlY3RvcjQoIHZlY3RvciApIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeCggNCwgMSwgWyB2ZWN0b3IueCwgdmVjdG9yLnksIHZlY3Rvci56LCB2ZWN0b3IudyBdICk7XG4gIH1cblxuICAvKipcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ8VmVjdG9yM3xWZWN0b3I0fSB2ZWN0b3JcbiAgICogQHJldHVybnMge01hdHJpeH1cbiAgICovXG4gIHN0YXRpYyBjb2x1bW5WZWN0b3IoIHZlY3RvciApIHtcbiAgICBpZiAoIHZlY3Rvci5pc1ZlY3RvcjIgKSB7XG4gICAgICByZXR1cm4gTWF0cml4LmNvbHVtblZlY3RvcjIoIHZlY3RvciApO1xuICAgIH1cbiAgICBlbHNlIGlmICggdmVjdG9yLmlzVmVjdG9yMyApIHtcbiAgICAgIHJldHVybiBNYXRyaXguY29sdW1uVmVjdG9yMyggdmVjdG9yICk7XG4gICAgfVxuICAgIGVsc2UgaWYgKCB2ZWN0b3IuaXNWZWN0b3I0ICkge1xuICAgICAgcmV0dXJuIE1hdHJpeC5jb2x1bW5WZWN0b3I0KCB2ZWN0b3IgKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoIGB1bmRldGVjdGVkIHR5cGUgb2YgdmVjdG9yOiAke3ZlY3Rvci50b1N0cmluZygpfWAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgTWF0cml4IHdoZXJlIGVhY2ggY29sdW1uIGlzIGEgdmVjdG9yXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtBcnJheS48VmVjdG9yMj59IHZlY3RvcnNcbiAgICovXG4gIHN0YXRpYyBmcm9tVmVjdG9yczIoIHZlY3RvcnMgKSB7XG4gICAgY29uc3QgZGltZW5zaW9uID0gMjtcbiAgICBjb25zdCBuID0gdmVjdG9ycy5sZW5ndGg7XG4gICAgY29uc3QgZGF0YSA9IG5ldyBBcnJheVR5cGUoIGRpbWVuc2lvbiAqIG4gKTtcblxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IG47IGkrKyApIHtcbiAgICAgIGNvbnN0IHZlY3RvciA9IHZlY3RvcnNbIGkgXTtcbiAgICAgIGRhdGFbIGkgXSA9IHZlY3Rvci54O1xuICAgICAgZGF0YVsgaSArIG4gXSA9IHZlY3Rvci55O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgTWF0cml4KCBkaW1lbnNpb24sIG4sIGRhdGEsIHRydWUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBNYXRyaXggd2hlcmUgZWFjaCBjb2x1bW4gaXMgYSB2ZWN0b3JcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxWZWN0b3IzPn0gdmVjdG9yc1xuICAgKi9cbiAgc3RhdGljIGZyb21WZWN0b3JzMyggdmVjdG9ycyApIHtcbiAgICBjb25zdCBkaW1lbnNpb24gPSAzO1xuICAgIGNvbnN0IG4gPSB2ZWN0b3JzLmxlbmd0aDtcbiAgICBjb25zdCBkYXRhID0gbmV3IEFycmF5VHlwZSggZGltZW5zaW9uICogbiApO1xuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgY29uc3QgdmVjdG9yID0gdmVjdG9yc1sgaSBdO1xuICAgICAgZGF0YVsgaSBdID0gdmVjdG9yLng7XG4gICAgICBkYXRhWyBpICsgbiBdID0gdmVjdG9yLnk7XG4gICAgICBkYXRhWyBpICsgMiAqIG4gXSA9IHZlY3Rvci56O1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgTWF0cml4KCBkaW1lbnNpb24sIG4sIGRhdGEsIHRydWUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBNYXRyaXggd2hlcmUgZWFjaCBjb2x1bW4gaXMgYSB2ZWN0b3JcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0FycmF5LjxWZWN0b3I0Pn0gdmVjdG9yc1xuICAgKi9cbiAgc3RhdGljIGZyb21WZWN0b3JzNCggdmVjdG9ycyApIHtcbiAgICBjb25zdCBkaW1lbnNpb24gPSA0O1xuICAgIGNvbnN0IG4gPSB2ZWN0b3JzLmxlbmd0aDtcbiAgICBjb25zdCBkYXRhID0gbmV3IEFycmF5VHlwZSggZGltZW5zaW9uICogbiApO1xuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgY29uc3QgdmVjdG9yID0gdmVjdG9yc1sgaSBdO1xuICAgICAgZGF0YVsgaSBdID0gdmVjdG9yLng7XG4gICAgICBkYXRhWyBpICsgbiBdID0gdmVjdG9yLnk7XG4gICAgICBkYXRhWyBpICsgMiAqIG4gXSA9IHZlY3Rvci56O1xuICAgICAgZGF0YVsgaSArIDMgKiBuIF0gPSB2ZWN0b3IudztcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IE1hdHJpeCggZGltZW5zaW9uLCBuLCBkYXRhLCB0cnVlICk7XG4gIH1cbn1cblxuLy8gQHB1YmxpYyB7Ym9vbGVhbn1cbk1hdHJpeC5wcm90b3R5cGUuaXNNYXRyaXggPSB0cnVlO1xuXG5kb3QucmVnaXN0ZXIoICdNYXRyaXgnLCBNYXRyaXggKTtcbmV4cG9ydCBkZWZhdWx0IE1hdHJpeDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLCtCQUErQjtBQUNuRCxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUMxQixPQUFPLDhCQUE4QjtBQUNyQyxPQUFPQyxlQUFlLE1BQU0sc0JBQXNCO0FBQ2xELE9BQU9DLGVBQWUsTUFBTSxzQkFBc0I7QUFDbEQsT0FBT0MsMEJBQTBCLE1BQU0saUNBQWlDO0FBQ3hFLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBQ2xDLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBQ2xDLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBRWxDLE1BQU1DLFNBQVMsR0FBR0MsTUFBTSxDQUFDQyxZQUFZLElBQUlDLEtBQUs7QUFFOUMsTUFBTUMsTUFBTSxDQUFDO0VBQ1g7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFdBQVdBLENBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxNQUFNLEVBQUVDLElBQUksRUFBRztJQUNoQztJQUNBLElBQUksQ0FBQ0gsQ0FBQyxHQUFHQSxDQUFDO0lBQ1YsSUFBSSxDQUFDQyxDQUFDLEdBQUdBLENBQUM7SUFFVixNQUFNRyxJQUFJLEdBQUdKLENBQUMsR0FBR0MsQ0FBQztJQUNsQjtJQUNBLElBQUksQ0FBQ0csSUFBSSxHQUFHQSxJQUFJO0lBQ2hCLElBQUlDLENBQUM7SUFFTCxJQUFLRixJQUFJLEVBQUc7TUFDVjtNQUNBLElBQUksQ0FBQ0csT0FBTyxHQUFHSixNQUFNO0lBQ3ZCLENBQUMsTUFDSTtNQUNILElBQUssQ0FBQ0EsTUFBTSxFQUFHO1FBQ2JBLE1BQU0sR0FBRyxDQUFDO01BQ1o7O01BRUE7TUFDQSxJQUFJLENBQUNJLE9BQU8sR0FBRyxJQUFJWixTQUFTLENBQUVVLElBQUksQ0FBRTtNQUVwQyxJQUFLbEIsT0FBTyxDQUFFZ0IsTUFBTSxDQUFFLEVBQUc7UUFDdkJLLE1BQU0sSUFBSUEsTUFBTSxDQUFFTCxNQUFNLENBQUNNLE1BQU0sS0FBS0osSUFBSSxDQUFFO1FBRTFDLEtBQU1DLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0QsSUFBSSxFQUFFQyxDQUFDLEVBQUUsRUFBRztVQUMzQixJQUFJLENBQUNDLE9BQU8sQ0FBRUQsQ0FBQyxDQUFFLEdBQUdILE1BQU0sQ0FBRUcsQ0FBQyxDQUFFO1FBQ2pDO01BQ0YsQ0FBQyxNQUNJO1FBQ0gsS0FBTUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHRCxJQUFJLEVBQUVDLENBQUMsRUFBRSxFQUFHO1VBQzNCLElBQUksQ0FBQ0MsT0FBTyxDQUFFRCxDQUFDLENBQUUsR0FBR0gsTUFBTTtRQUM1QjtNQUNGO0lBQ0Y7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VPLElBQUlBLENBQUEsRUFBRztJQUNMLE1BQU1DLE1BQU0sR0FBRyxJQUFJWixNQUFNLENBQUUsSUFBSSxDQUFDRSxDQUFDLEVBQUUsSUFBSSxDQUFDQyxDQUFDLENBQUU7SUFDM0MsS0FBTSxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDRCxJQUFJLEVBQUVDLENBQUMsRUFBRSxFQUFHO01BQ3BDSyxNQUFNLENBQUNKLE9BQU8sQ0FBRUQsQ0FBQyxDQUFFLEdBQUcsSUFBSSxDQUFDQyxPQUFPLENBQUVELENBQUMsQ0FBRTtJQUN6QztJQUNBLE9BQU9LLE1BQU07RUFDZjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFFBQVFBLENBQUEsRUFBRztJQUNULE9BQU8sSUFBSSxDQUFDTCxPQUFPO0VBQ3JCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRU0sWUFBWUEsQ0FBQSxFQUFHO0lBQ2IsT0FBTyxJQUFJbEIsU0FBUyxDQUFFLElBQUksQ0FBQ1ksT0FBTyxDQUFFO0VBQ3RDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRU8sZUFBZUEsQ0FBQSxFQUFHO0lBQ2hCLE9BQU8sSUFBSSxDQUFDYixDQUFDO0VBQ2Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFYyxrQkFBa0JBLENBQUEsRUFBRztJQUNuQixPQUFPLElBQUksQ0FBQ2IsQ0FBQztFQUNmOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWMsS0FBS0EsQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLEVBQUc7SUFDWixPQUFPWCxDQUFDLEdBQUcsSUFBSSxDQUFDSixDQUFDLEdBQUdlLENBQUM7RUFDdkI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxHQUFHQSxDQUFFWixDQUFDLEVBQUVXLENBQUMsRUFBRztJQUNWLE9BQU8sSUFBSSxDQUFDVixPQUFPLENBQUUsSUFBSSxDQUFDUyxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFLENBQUU7RUFDM0M7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFRSxHQUFHQSxDQUFFYixDQUFDLEVBQUVXLENBQUMsRUFBRUcsQ0FBQyxFQUFHO0lBQ2IsSUFBSSxDQUFDYixPQUFPLENBQUUsSUFBSSxDQUFDUyxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFLENBQUUsR0FBR0csQ0FBQztFQUN4Qzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsU0FBU0EsQ0FBRUMsRUFBRSxFQUFFQyxFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFHO0lBQzFCLE1BQU1kLE1BQU0sR0FBRyxJQUFJWixNQUFNLENBQUV3QixFQUFFLEdBQUdELEVBQUUsR0FBRyxDQUFDLEVBQUVHLEVBQUUsR0FBR0QsRUFBRSxHQUFHLENBQUMsQ0FBRTtJQUNyRCxLQUFNLElBQUlsQixDQUFDLEdBQUdnQixFQUFFLEVBQUVoQixDQUFDLElBQUlpQixFQUFFLEVBQUVqQixDQUFDLEVBQUUsRUFBRztNQUMvQixLQUFNLElBQUlXLENBQUMsR0FBR08sRUFBRSxFQUFFUCxDQUFDLElBQUlRLEVBQUUsRUFBRVIsQ0FBQyxFQUFFLEVBQUc7UUFDL0JOLE1BQU0sQ0FBQ0osT0FBTyxDQUFFSSxNQUFNLENBQUNLLEtBQUssQ0FBRVYsQ0FBQyxHQUFHZ0IsRUFBRSxFQUFFTCxDQUFDLEdBQUdPLEVBQUUsQ0FBRSxDQUFFLEdBQUcsSUFBSSxDQUFDakIsT0FBTyxDQUFFLElBQUksQ0FBQ1MsS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsQ0FBRSxDQUFFO01BQ3ZGO0lBQ0Y7SUFDQSxPQUFPTixNQUFNO0VBQ2Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFZSxpQkFBaUJBLENBQUVDLENBQUMsRUFBRUgsRUFBRSxFQUFFQyxFQUFFLEVBQUc7SUFDN0IsTUFBTWQsTUFBTSxHQUFHLElBQUlaLE1BQU0sQ0FBRTRCLENBQUMsQ0FBQ2xCLE1BQU0sRUFBRWdCLEVBQUUsR0FBR0QsRUFBRSxHQUFHLENBQUMsQ0FBRTtJQUNsRCxLQUFNLElBQUlsQixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdxQixDQUFDLENBQUNsQixNQUFNLEVBQUVILENBQUMsRUFBRSxFQUFHO01BQ25DLEtBQU0sSUFBSVcsQ0FBQyxHQUFHTyxFQUFFLEVBQUVQLENBQUMsSUFBSVEsRUFBRSxFQUFFUixDQUFDLEVBQUUsRUFBRztRQUMvQk4sTUFBTSxDQUFDSixPQUFPLENBQUVJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsR0FBR08sRUFBRSxDQUFFLENBQUUsR0FBRyxJQUFJLENBQUNqQixPQUFPLENBQUUsSUFBSSxDQUFDUyxLQUFLLENBQUVXLENBQUMsQ0FBRXJCLENBQUMsQ0FBRSxFQUFFVyxDQUFDLENBQUUsQ0FBRTtNQUN2RjtJQUNGO0lBQ0EsT0FBT04sTUFBTTtFQUNmOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFaUIsU0FBU0EsQ0FBRWpCLE1BQU0sRUFBRztJQUNsQkEsTUFBTSxHQUFHQSxNQUFNLElBQUksSUFBSVosTUFBTSxDQUFFLElBQUksQ0FBQ0csQ0FBQyxFQUFFLElBQUksQ0FBQ0QsQ0FBQyxDQUFFO0lBQy9DTyxNQUFNLElBQUlBLE1BQU0sQ0FBRUcsTUFBTSxDQUFDVixDQUFDLEtBQUssSUFBSSxDQUFDQyxDQUFDLENBQUU7SUFDdkNNLE1BQU0sSUFBSUEsTUFBTSxDQUFFRyxNQUFNLENBQUNULENBQUMsS0FBSyxJQUFJLENBQUNELENBQUMsQ0FBRTtJQUN2QyxLQUFNLElBQUlLLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNMLENBQUMsRUFBRUssQ0FBQyxFQUFFLEVBQUc7TUFDakMsS0FBTSxJQUFJVyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDZixDQUFDLEVBQUVlLENBQUMsRUFBRSxFQUFHO1FBQ2pDTixNQUFNLENBQUNKLE9BQU8sQ0FBRUksTUFBTSxDQUFDSyxLQUFLLENBQUVDLENBQUMsRUFBRVgsQ0FBQyxDQUFFLENBQUUsR0FBRyxJQUFJLENBQUNDLE9BQU8sQ0FBRSxJQUFJLENBQUNTLEtBQUssQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLENBQUUsQ0FBRTtNQUM3RTtJQUNGO0lBQ0EsT0FBT04sTUFBTTtFQUNmOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRWtCLEtBQUtBLENBQUEsRUFBRztJQUNOLElBQUlDLENBQUMsR0FBRyxDQUFDO0lBQ1QsS0FBTSxJQUFJYixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDZixDQUFDLEVBQUVlLENBQUMsRUFBRSxFQUFHO01BQ2pDLElBQUlHLENBQUMsR0FBRyxDQUFDO01BQ1QsS0FBTSxJQUFJZCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO1FBQ2pDYyxDQUFDLElBQUlXLElBQUksQ0FBQ0MsR0FBRyxDQUFFLElBQUksQ0FBQ3pCLE9BQU8sQ0FBRSxJQUFJLENBQUNTLEtBQUssQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLENBQUUsQ0FBRSxDQUFFO01BQ3JEO01BQ0FhLENBQUMsR0FBR0MsSUFBSSxDQUFDRSxHQUFHLENBQUVILENBQUMsRUFBRVYsQ0FBQyxDQUFFO0lBQ3RCO0lBQ0EsT0FBT1UsQ0FBQztFQUNWOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRUksS0FBS0EsQ0FBQSxFQUFHO0lBQ04sT0FBUyxJQUFJM0MsMEJBQTBCLENBQUUsSUFBSSxDQUFFLENBQUMyQyxLQUFLLEVBQUU7RUFDekQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxPQUFPQSxDQUFBLEVBQUc7SUFDUixJQUFJTCxDQUFDLEdBQUcsQ0FBQztJQUNULEtBQU0sSUFBSXhCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNMLENBQUMsRUFBRUssQ0FBQyxFQUFFLEVBQUc7TUFDakMsSUFBSWMsQ0FBQyxHQUFHLENBQUM7TUFDVCxLQUFNLElBQUlILENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNmLENBQUMsRUFBRWUsQ0FBQyxFQUFFLEVBQUc7UUFDakNHLENBQUMsSUFBSVcsSUFBSSxDQUFDQyxHQUFHLENBQUUsSUFBSSxDQUFDekIsT0FBTyxDQUFFLElBQUksQ0FBQ1MsS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsQ0FBRSxDQUFFLENBQUU7TUFDckQ7TUFDQWEsQ0FBQyxHQUFHQyxJQUFJLENBQUNFLEdBQUcsQ0FBRUgsQ0FBQyxFQUFFVixDQUFDLENBQUU7SUFDdEI7SUFDQSxPQUFPVSxDQUFDO0VBQ1Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFTSxLQUFLQSxDQUFBLEVBQUc7SUFDTixJQUFJTixDQUFDLEdBQUcsQ0FBQztJQUNULEtBQU0sSUFBSXhCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNMLENBQUMsRUFBRUssQ0FBQyxFQUFFLEVBQUc7TUFDakMsS0FBTSxJQUFJVyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDZixDQUFDLEVBQUVlLENBQUMsRUFBRSxFQUFHO1FBQ2pDYSxDQUFDLEdBQUcvQixNQUFNLENBQUNzQyxLQUFLLENBQUVQLENBQUMsRUFBRSxJQUFJLENBQUN2QixPQUFPLENBQUUsSUFBSSxDQUFDUyxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFLENBQUUsQ0FBRTtNQUMzRDtJQUNGO0lBQ0EsT0FBT2EsQ0FBQztFQUNWOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRVEsTUFBTUEsQ0FBQSxFQUFHO0lBQ1AsTUFBTTNCLE1BQU0sR0FBRyxJQUFJWixNQUFNLENBQUUsSUFBSSxDQUFDRSxDQUFDLEVBQUUsSUFBSSxDQUFDQyxDQUFDLENBQUU7SUFDM0MsS0FBTSxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQ2pDLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztRQUNqQ04sTUFBTSxDQUFDSixPQUFPLENBQUVJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsQ0FBRSxDQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUNWLE9BQU8sQ0FBRSxJQUFJLENBQUNTLEtBQUssQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLENBQUUsQ0FBRTtNQUM5RTtJQUNGO0lBQ0EsT0FBT04sTUFBTTtFQUNmOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFNEIsSUFBSUEsQ0FBRUMsTUFBTSxFQUFHO0lBQ2IsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBRUQsTUFBTSxDQUFFO0lBQ3BDLE1BQU03QixNQUFNLEdBQUcsSUFBSVosTUFBTSxDQUFFLElBQUksQ0FBQ0UsQ0FBQyxFQUFFLElBQUksQ0FBQ0MsQ0FBQyxDQUFFO0lBQzNDLEtBQU0sSUFBSUksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ0wsQ0FBQyxFQUFFSyxDQUFDLEVBQUUsRUFBRztNQUNqQyxLQUFNLElBQUlXLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNmLENBQUMsRUFBRWUsQ0FBQyxFQUFFLEVBQUc7UUFDakMsTUFBTUQsS0FBSyxHQUFHTCxNQUFNLENBQUNLLEtBQUssQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLENBQUU7UUFDbENOLE1BQU0sQ0FBQ0osT0FBTyxDQUFFUyxLQUFLLENBQUUsR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUd3QixNQUFNLENBQUNqQyxPQUFPLENBQUVTLEtBQUssQ0FBRTtNQUMzRTtJQUNGO0lBQ0EsT0FBT0wsTUFBTTtFQUNmOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFK0IsVUFBVUEsQ0FBRUYsTUFBTSxFQUFHO0lBQ25CLElBQUksQ0FBQ0MscUJBQXFCLENBQUVELE1BQU0sQ0FBRTtJQUNwQyxLQUFNLElBQUlsQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQ2pDLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztRQUNqQyxNQUFNRCxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFO1FBQ2hDLElBQUksQ0FBQ1YsT0FBTyxDQUFFUyxLQUFLLENBQUUsR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUd3QixNQUFNLENBQUNqQyxPQUFPLENBQUVTLEtBQUssQ0FBRTtNQUN6RTtJQUNGO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFMkIsV0FBV0EsQ0FBRUgsTUFBTSxFQUFFSSxLQUFLLEVBQUc7SUFDM0IsSUFBSSxDQUFDSCxxQkFBcUIsQ0FBRUQsTUFBTSxDQUFFO0lBQ3BDLEtBQU0sSUFBSWxDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNMLENBQUMsRUFBRUssQ0FBQyxFQUFFLEVBQUc7TUFDakMsS0FBTSxJQUFJVyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDZixDQUFDLEVBQUVlLENBQUMsRUFBRSxFQUFHO1FBQ2pDLE1BQU1ELEtBQUssR0FBRyxJQUFJLENBQUNBLEtBQUssQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLENBQUU7UUFDaEMsTUFBTTRCLENBQUMsR0FBRyxJQUFJLENBQUN0QyxPQUFPLENBQUVTLEtBQUssQ0FBRTtRQUMvQixNQUFNOEIsQ0FBQyxHQUFHTixNQUFNLENBQUNqQyxPQUFPLENBQUVTLEtBQUssQ0FBRTtRQUNqQyxJQUFJLENBQUNULE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUc2QixDQUFDLEdBQUcsQ0FBRUMsQ0FBQyxHQUFHRCxDQUFDLElBQUtELEtBQUs7TUFDL0M7SUFDRjtJQUNBLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFRyxLQUFLQSxDQUFFUCxNQUFNLEVBQUc7SUFDZCxJQUFJLENBQUNDLHFCQUFxQixDQUFFRCxNQUFNLENBQUU7SUFDcEMsTUFBTTdCLE1BQU0sR0FBRyxJQUFJWixNQUFNLENBQUUsSUFBSSxDQUFDRSxDQUFDLEVBQUUsSUFBSSxDQUFDQyxDQUFDLENBQUU7SUFDM0MsS0FBTSxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQ2pDLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztRQUNqQyxNQUFNRCxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFO1FBQ2hDTixNQUFNLENBQUNKLE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUcsSUFBSSxDQUFDVCxPQUFPLENBQUVTLEtBQUssQ0FBRSxHQUFHd0IsTUFBTSxDQUFDakMsT0FBTyxDQUFFUyxLQUFLLENBQUU7TUFDM0U7SUFDRjtJQUNBLE9BQU9MLE1BQU07RUFDZjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRXFDLFdBQVdBLENBQUVSLE1BQU0sRUFBRztJQUNwQixJQUFJLENBQUNDLHFCQUFxQixDQUFFRCxNQUFNLENBQUU7SUFDcEMsS0FBTSxJQUFJbEMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ0wsQ0FBQyxFQUFFSyxDQUFDLEVBQUUsRUFBRztNQUNqQyxLQUFNLElBQUlXLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNmLENBQUMsRUFBRWUsQ0FBQyxFQUFFLEVBQUc7UUFDakMsTUFBTUQsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsQ0FBRTtRQUNoQyxJQUFJLENBQUNWLE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUcsSUFBSSxDQUFDVCxPQUFPLENBQUVTLEtBQUssQ0FBRSxHQUFHd0IsTUFBTSxDQUFDakMsT0FBTyxDQUFFUyxLQUFLLENBQUU7TUFDekU7SUFDRjtJQUNBLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFaUMsVUFBVUEsQ0FBRVQsTUFBTSxFQUFHO0lBQ25CLElBQUksQ0FBQ0MscUJBQXFCLENBQUVELE1BQU0sQ0FBRTtJQUNwQyxNQUFNN0IsTUFBTSxHQUFHLElBQUlaLE1BQU0sQ0FBRSxJQUFJLENBQUNFLENBQUMsRUFBRSxJQUFJLENBQUNDLENBQUMsQ0FBRTtJQUMzQyxLQUFNLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNMLENBQUMsRUFBRUssQ0FBQyxFQUFFLEVBQUc7TUFDakMsS0FBTSxJQUFJVyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDZixDQUFDLEVBQUVlLENBQUMsRUFBRSxFQUFHO1FBQ2pDLE1BQU1ELEtBQUssR0FBR0wsTUFBTSxDQUFDSyxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFO1FBQ2xDTixNQUFNLENBQUNKLE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUcsSUFBSSxDQUFDVCxPQUFPLENBQUVTLEtBQUssQ0FBRSxHQUFHd0IsTUFBTSxDQUFDakMsT0FBTyxDQUFFUyxLQUFLLENBQUU7TUFDM0U7SUFDRjtJQUNBLE9BQU9MLE1BQU07RUFDZjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRXVDLGdCQUFnQkEsQ0FBRVYsTUFBTSxFQUFHO0lBQ3pCLElBQUksQ0FBQ0MscUJBQXFCLENBQUVELE1BQU0sQ0FBRTtJQUNwQyxLQUFNLElBQUlsQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQ2pDLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztRQUNqQyxNQUFNRCxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFO1FBQ2hDLElBQUksQ0FBQ1YsT0FBTyxDQUFFUyxLQUFLLENBQUUsR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUd3QixNQUFNLENBQUNqQyxPQUFPLENBQUVTLEtBQUssQ0FBRTtNQUN6RTtJQUNGO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VtQyxnQkFBZ0JBLENBQUVYLE1BQU0sRUFBRztJQUN6QixJQUFJLENBQUNDLHFCQUFxQixDQUFFRCxNQUFNLENBQUU7SUFDcEMsTUFBTTdCLE1BQU0sR0FBRyxJQUFJWixNQUFNLENBQUUsSUFBSSxDQUFDRSxDQUFDLEVBQUUsSUFBSSxDQUFDQyxDQUFDLENBQUU7SUFDM0MsS0FBTSxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQ2pDLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztRQUNqQyxNQUFNRCxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFO1FBQ2hDTixNQUFNLENBQUNKLE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUcsSUFBSSxDQUFDVCxPQUFPLENBQUVTLEtBQUssQ0FBRSxHQUFHd0IsTUFBTSxDQUFDakMsT0FBTyxDQUFFUyxLQUFLLENBQUU7TUFDM0U7SUFDRjtJQUNBLE9BQU9MLE1BQU07RUFDZjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRXlDLHNCQUFzQkEsQ0FBRVosTUFBTSxFQUFHO0lBQy9CLElBQUksQ0FBQ0MscUJBQXFCLENBQUVELE1BQU0sQ0FBRTtJQUNwQyxLQUFNLElBQUlsQyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQ2pDLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztRQUNqQyxNQUFNRCxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFO1FBQ2hDLElBQUksQ0FBQ1YsT0FBTyxDQUFFUyxLQUFLLENBQUUsR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUd3QixNQUFNLENBQUNqQyxPQUFPLENBQUVTLEtBQUssQ0FBRTtNQUN6RTtJQUNGO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VxQyxlQUFlQSxDQUFFYixNQUFNLEVBQUc7SUFDeEIsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBRUQsTUFBTSxDQUFFO0lBQ3BDLE1BQU03QixNQUFNLEdBQUcsSUFBSVosTUFBTSxDQUFFLElBQUksQ0FBQ0UsQ0FBQyxFQUFFLElBQUksQ0FBQ0MsQ0FBQyxDQUFFO0lBQzNDLEtBQU0sSUFBSUksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ0wsQ0FBQyxFQUFFSyxDQUFDLEVBQUUsRUFBRztNQUNqQyxLQUFNLElBQUlXLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNmLENBQUMsRUFBRWUsQ0FBQyxFQUFFLEVBQUc7UUFDakMsTUFBTUQsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsQ0FBRTtRQUNoQ04sTUFBTSxDQUFDSixPQUFPLENBQUVTLEtBQUssQ0FBRSxHQUFHd0IsTUFBTSxDQUFDakMsT0FBTyxDQUFFUyxLQUFLLENBQUUsR0FBRyxJQUFJLENBQUNULE9BQU8sQ0FBRVMsS0FBSyxDQUFFO01BQzNFO0lBQ0Y7SUFDQSxPQUFPTCxNQUFNO0VBQ2Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UyQyxxQkFBcUJBLENBQUVkLE1BQU0sRUFBRztJQUM5QixJQUFJLENBQUNDLHFCQUFxQixDQUFFRCxNQUFNLENBQUU7SUFDcEMsS0FBTSxJQUFJbEMsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ0wsQ0FBQyxFQUFFSyxDQUFDLEVBQUUsRUFBRztNQUNqQyxLQUFNLElBQUlXLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNmLENBQUMsRUFBRWUsQ0FBQyxFQUFFLEVBQUc7UUFDakMsTUFBTUQsS0FBSyxHQUFHLElBQUksQ0FBQ0EsS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsQ0FBRTtRQUNoQyxJQUFJLENBQUNWLE9BQU8sQ0FBRVMsS0FBSyxDQUFFLEdBQUd3QixNQUFNLENBQUNqQyxPQUFPLENBQUVTLEtBQUssQ0FBRSxHQUFHLElBQUksQ0FBQ1QsT0FBTyxDQUFFUyxLQUFLLENBQUU7TUFDekU7SUFDRjtJQUNBLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFdUMsS0FBS0EsQ0FBRUMsY0FBYyxFQUFHO0lBQ3RCLElBQUk3QyxNQUFNO0lBQ1YsSUFBSUwsQ0FBQztJQUNMLElBQUlXLENBQUM7SUFDTCxJQUFJd0MsQ0FBQztJQUNMLElBQUlyQyxDQUFDO0lBQ0wsSUFBSW9CLE1BQU07SUFDVixJQUFLZ0IsY0FBYyxDQUFDRSxRQUFRLEVBQUc7TUFDN0JsQixNQUFNLEdBQUdnQixjQUFjO01BQ3ZCLElBQUtoQixNQUFNLENBQUN2QyxDQUFDLEtBQUssSUFBSSxDQUFDQyxDQUFDLEVBQUc7UUFDekIsTUFBTSxJQUFJeUQsS0FBSyxDQUFFLHFDQUFxQyxDQUFFO01BQzFEO01BQ0FoRCxNQUFNLEdBQUcsSUFBSVosTUFBTSxDQUFFLElBQUksQ0FBQ0UsQ0FBQyxFQUFFdUMsTUFBTSxDQUFDdEMsQ0FBQyxDQUFFO01BQ3ZDLE1BQU0wRCxVQUFVLEdBQUcsSUFBSWpFLFNBQVMsQ0FBRSxJQUFJLENBQUNPLENBQUMsQ0FBRTtNQUMxQyxLQUFNZSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd1QixNQUFNLENBQUN0QyxDQUFDLEVBQUVlLENBQUMsRUFBRSxFQUFHO1FBQy9CLEtBQU13QyxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDdkQsQ0FBQyxFQUFFdUQsQ0FBQyxFQUFFLEVBQUc7VUFDN0JHLFVBQVUsQ0FBRUgsQ0FBQyxDQUFFLEdBQUdqQixNQUFNLENBQUNqQyxPQUFPLENBQUVpQyxNQUFNLENBQUN4QixLQUFLLENBQUV5QyxDQUFDLEVBQUV4QyxDQUFDLENBQUUsQ0FBRTtRQUMxRDtRQUNBLEtBQU1YLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNMLENBQUMsRUFBRUssQ0FBQyxFQUFFLEVBQUc7VUFDN0JjLENBQUMsR0FBRyxDQUFDO1VBQ0wsS0FBTXFDLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUN2RCxDQUFDLEVBQUV1RCxDQUFDLEVBQUUsRUFBRztZQUM3QnJDLENBQUMsSUFBSSxJQUFJLENBQUNiLE9BQU8sQ0FBRSxJQUFJLENBQUNTLEtBQUssQ0FBRVYsQ0FBQyxFQUFFbUQsQ0FBQyxDQUFFLENBQUUsR0FBR0csVUFBVSxDQUFFSCxDQUFDLENBQUU7VUFDM0Q7VUFDQTlDLE1BQU0sQ0FBQ0osT0FBTyxDQUFFSSxNQUFNLENBQUNLLEtBQUssQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLENBQUUsQ0FBRSxHQUFHRyxDQUFDO1FBQzVDO01BQ0Y7TUFDQSxPQUFPVCxNQUFNO0lBQ2YsQ0FBQyxNQUNJO01BQ0hTLENBQUMsR0FBR29DLGNBQWM7TUFDbEI3QyxNQUFNLEdBQUcsSUFBSVosTUFBTSxDQUFFLElBQUksQ0FBQ0UsQ0FBQyxFQUFFLElBQUksQ0FBQ0MsQ0FBQyxDQUFFO01BQ3JDLEtBQU1JLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNMLENBQUMsRUFBRUssQ0FBQyxFQUFFLEVBQUc7UUFDN0IsS0FBTVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztVQUM3Qk4sTUFBTSxDQUFDSixPQUFPLENBQUVJLE1BQU0sQ0FBQ0ssS0FBSyxDQUFFVixDQUFDLEVBQUVXLENBQUMsQ0FBRSxDQUFFLEdBQUdHLENBQUMsR0FBRyxJQUFJLENBQUNiLE9BQU8sQ0FBRSxJQUFJLENBQUNTLEtBQUssQ0FBRVYsQ0FBQyxFQUFFVyxDQUFDLENBQUUsQ0FBRTtRQUNqRjtNQUNGO01BQ0EsT0FBT04sTUFBTTtJQUNmO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VrRCxXQUFXQSxDQUFFekMsQ0FBQyxFQUFHO0lBQ2YsS0FBTSxJQUFJZCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsSUFBSSxDQUFDTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQ2pDLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLElBQUksQ0FBQ2YsQ0FBQyxFQUFFZSxDQUFDLEVBQUUsRUFBRztRQUNqQyxNQUFNRCxLQUFLLEdBQUcsSUFBSSxDQUFDQSxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFO1FBQ2hDLElBQUksQ0FBQ1YsT0FBTyxDQUFFUyxLQUFLLENBQUUsR0FBR0ksQ0FBQyxHQUFHLElBQUksQ0FBQ2IsT0FBTyxDQUFFUyxLQUFLLENBQUU7TUFDbkQ7SUFDRjtJQUNBLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFOEMsS0FBS0EsQ0FBRXRCLE1BQU0sRUFBRztJQUNkLE9BQVMsSUFBSSxDQUFDdkMsQ0FBQyxLQUFLLElBQUksQ0FBQ0MsQ0FBQyxHQUFLLElBQUliLGVBQWUsQ0FBRSxJQUFJLENBQUUsQ0FBR3lFLEtBQUssQ0FBRXRCLE1BQU0sQ0FBRSxHQUNqRSxJQUFJbEQsZUFBZSxDQUFFLElBQUksQ0FBRSxDQUFHd0UsS0FBSyxDQUFFdEIsTUFBTSxDQUFFO0VBQzFEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFdUIsY0FBY0EsQ0FBRXZCLE1BQU0sRUFBRztJQUN2QixPQUFPLElBQUksQ0FBQ1osU0FBUyxFQUFFLENBQUNrQyxLQUFLLENBQUV0QixNQUFNLENBQUNaLFNBQVMsRUFBRSxDQUFFO0VBQ3JEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRW9DLE9BQU9BLENBQUEsRUFBRztJQUNSLE9BQU8sSUFBSSxDQUFDRixLQUFLLENBQUUvRCxNQUFNLENBQUNrRSxRQUFRLENBQUUsSUFBSSxDQUFDaEUsQ0FBQyxFQUFFLElBQUksQ0FBQ0EsQ0FBQyxDQUFFLENBQUU7RUFDeEQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFaUUsR0FBR0EsQ0FBQSxFQUFHO0lBQ0osT0FBTyxJQUFJN0UsZUFBZSxDQUFFLElBQUksQ0FBRSxDQUFDNkUsR0FBRyxFQUFFO0VBQzFDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsSUFBSUEsQ0FBQSxFQUFHO0lBQ0wsT0FBTyxJQUFJNUUsMEJBQTBCLENBQUUsSUFBSSxDQUFFLENBQUM0RSxJQUFJLEVBQUU7RUFDdEQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxJQUFJQSxDQUFBLEVBQUc7SUFDTCxPQUFPLElBQUk3RSwwQkFBMEIsQ0FBRSxJQUFJLENBQUUsQ0FBQzZFLElBQUksRUFBRTtFQUN0RDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLEtBQUtBLENBQUEsRUFBRztJQUNOLElBQUlDLENBQUMsR0FBRyxDQUFDO0lBQ1QsS0FBTSxJQUFJaEUsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHeUIsSUFBSSxDQUFDd0MsR0FBRyxDQUFFLElBQUksQ0FBQ3RFLENBQUMsRUFBRSxJQUFJLENBQUNDLENBQUMsQ0FBRSxFQUFFSSxDQUFDLEVBQUUsRUFBRztNQUNyRGdFLENBQUMsSUFBSSxJQUFJLENBQUMvRCxPQUFPLENBQUUsSUFBSSxDQUFDUyxLQUFLLENBQUVWLENBQUMsRUFBRUEsQ0FBQyxDQUFFLENBQUU7SUFDekM7SUFDQSxPQUFPZ0UsQ0FBQztFQUNWOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRTdCLHFCQUFxQkEsQ0FBRUQsTUFBTSxFQUFHO0lBQzlCLElBQUtBLE1BQU0sQ0FBQ3ZDLENBQUMsS0FBSyxJQUFJLENBQUNBLENBQUMsSUFBSXVDLE1BQU0sQ0FBQ3RDLENBQUMsS0FBSyxJQUFJLENBQUNBLENBQUMsRUFBRztNQUNoRCxNQUFNLElBQUl5RCxLQUFLLENBQUUsK0JBQStCLENBQUU7SUFDcEQ7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWEsUUFBUUEsQ0FBQSxFQUFHO0lBQ1QsSUFBSTdELE1BQU0sR0FBRyxFQUFFO0lBQ2ZBLE1BQU0sSUFBSyxRQUFPLElBQUksQ0FBQ0csZUFBZSxFQUFHLElBQUcsSUFBSSxDQUFDQyxrQkFBa0IsRUFBRyxJQUFHO0lBQ3pFLEtBQU0sSUFBSTBELEdBQUcsR0FBRyxDQUFDLEVBQUVBLEdBQUcsR0FBRyxJQUFJLENBQUMzRCxlQUFlLEVBQUUsRUFBRTJELEdBQUcsRUFBRSxFQUFHO01BQ3ZELEtBQU0sSUFBSUMsR0FBRyxHQUFHLENBQUMsRUFBRUEsR0FBRyxHQUFHLElBQUksQ0FBQzNELGtCQUFrQixFQUFFLEVBQUUyRCxHQUFHLEVBQUUsRUFBRztRQUMxRC9ELE1BQU0sSUFBSyxHQUFFLElBQUksQ0FBQ08sR0FBRyxDQUFFdUQsR0FBRyxFQUFFQyxHQUFHLENBQUcsR0FBRTtNQUN0QztNQUNBL0QsTUFBTSxJQUFJLElBQUk7SUFDaEI7SUFDQSxPQUFPQSxNQUFNO0VBQ2Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWdFLGNBQWNBLENBQUVDLE1BQU0sRUFBRztJQUN2QnBFLE1BQU0sSUFBSUEsTUFBTSxDQUFFLElBQUksQ0FBQ1AsQ0FBQyxLQUFLLENBQUMsQ0FBRSxDQUFDLENBQUM7SUFDbEMsT0FBTyxJQUFJVCxPQUFPLENBQUUsSUFBSSxDQUFDMEIsR0FBRyxDQUFFLENBQUMsRUFBRTBELE1BQU0sQ0FBRSxFQUFFLElBQUksQ0FBQzFELEdBQUcsQ0FBRSxDQUFDLEVBQUUwRCxNQUFNLENBQUUsQ0FBRTtFQUNwRTs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxjQUFjQSxDQUFFRCxNQUFNLEVBQUc7SUFDdkJwRSxNQUFNLElBQUlBLE1BQU0sQ0FBRSxJQUFJLENBQUNQLENBQUMsS0FBSyxDQUFDLENBQUUsQ0FBQyxDQUFDO0lBQ2xDLE9BQU8sSUFBSVIsT0FBTyxDQUFFLElBQUksQ0FBQ3lCLEdBQUcsQ0FBRSxDQUFDLEVBQUUwRCxNQUFNLENBQUUsRUFBRSxJQUFJLENBQUMxRCxHQUFHLENBQUUsQ0FBQyxFQUFFMEQsTUFBTSxDQUFFLEVBQUUsSUFBSSxDQUFDMUQsR0FBRyxDQUFFLENBQUMsRUFBRTBELE1BQU0sQ0FBRSxDQUFFO0VBQzNGOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VFLGNBQWNBLENBQUVGLE1BQU0sRUFBRztJQUN2QnBFLE1BQU0sSUFBSUEsTUFBTSxDQUFFLElBQUksQ0FBQ1AsQ0FBQyxLQUFLLENBQUMsQ0FBRSxDQUFDLENBQUM7SUFDbEMsT0FBTyxJQUFJUCxPQUFPLENBQUUsSUFBSSxDQUFDd0IsR0FBRyxDQUFFLENBQUMsRUFBRTBELE1BQU0sQ0FBRSxFQUFFLElBQUksQ0FBQzFELEdBQUcsQ0FBRSxDQUFDLEVBQUUwRCxNQUFNLENBQUUsRUFBRSxJQUFJLENBQUMxRCxHQUFHLENBQUUsQ0FBQyxFQUFFMEQsTUFBTSxDQUFFLEVBQUUsSUFBSSxDQUFDMUQsR0FBRyxDQUFFLENBQUMsRUFBRTBELE1BQU0sQ0FBRSxDQUFFO0VBQ2xIOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VHLFdBQVdBLENBQUVDLE9BQU8sRUFBRztJQUNyQixNQUFNL0UsQ0FBQyxHQUFHLENBQUM7SUFDWCxNQUFNQyxDQUFDLEdBQUc4RSxPQUFPLENBQUN2RSxNQUFNO0lBRXhCRCxNQUFNLElBQUlBLE1BQU0sQ0FBRSxJQUFJLENBQUNQLENBQUMsS0FBS0EsQ0FBQyxDQUFFO0lBQ2hDTyxNQUFNLElBQUlBLE1BQU0sQ0FBRSxJQUFJLENBQUNOLENBQUMsS0FBS0EsQ0FBQyxDQUFFO0lBRWhDLEtBQU0sSUFBSUksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHSixDQUFDLEVBQUVJLENBQUMsRUFBRSxFQUFHO01BQzVCLE1BQU0yRSxNQUFNLEdBQUdELE9BQU8sQ0FBRTFFLENBQUMsQ0FBRTtNQUMzQixJQUFJLENBQUNDLE9BQU8sQ0FBRUQsQ0FBQyxDQUFFLEdBQUcyRSxNQUFNLENBQUNDLENBQUM7TUFDNUIsSUFBSSxDQUFDM0UsT0FBTyxDQUFFRCxDQUFDLEdBQUdKLENBQUMsQ0FBRSxHQUFHK0UsTUFBTSxDQUFDRSxDQUFDO01BQ2hDLElBQUksQ0FBQzVFLE9BQU8sQ0FBRUQsQ0FBQyxHQUFHLENBQUMsR0FBR0osQ0FBQyxDQUFFLEdBQUcrRSxNQUFNLENBQUNHLENBQUM7SUFDdEM7SUFFQSxPQUFPLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBTy9DLEtBQUtBLENBQUVRLENBQUMsRUFBRUMsQ0FBQyxFQUFHO0lBQ25CLElBQUluQixDQUFDO0lBQ0wsSUFBS0ksSUFBSSxDQUFDQyxHQUFHLENBQUVhLENBQUMsQ0FBRSxHQUFHZCxJQUFJLENBQUNDLEdBQUcsQ0FBRWMsQ0FBQyxDQUFFLEVBQUc7TUFDbkNuQixDQUFDLEdBQUdtQixDQUFDLEdBQUdELENBQUM7TUFDVGxCLENBQUMsR0FBR0ksSUFBSSxDQUFDQyxHQUFHLENBQUVhLENBQUMsQ0FBRSxHQUFHZCxJQUFJLENBQUNzRCxJQUFJLENBQUUsQ0FBQyxHQUFHMUQsQ0FBQyxHQUFHQSxDQUFDLENBQUU7SUFDNUMsQ0FBQyxNQUNJLElBQUttQixDQUFDLEtBQUssQ0FBQyxFQUFHO01BQ2xCbkIsQ0FBQyxHQUFHa0IsQ0FBQyxHQUFHQyxDQUFDO01BQ1RuQixDQUFDLEdBQUdJLElBQUksQ0FBQ0MsR0FBRyxDQUFFYyxDQUFDLENBQUUsR0FBR2YsSUFBSSxDQUFDc0QsSUFBSSxDQUFFLENBQUMsR0FBRzFELENBQUMsR0FBR0EsQ0FBQyxDQUFFO0lBQzVDLENBQUMsTUFDSTtNQUNIQSxDQUFDLEdBQUcsR0FBRztJQUNUO0lBQ0EsT0FBT0EsQ0FBQztFQUNWOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxPQUFPc0MsUUFBUUEsQ0FBRWhFLENBQUMsRUFBRUMsQ0FBQyxFQUFHO0lBQ3RCLE1BQU1TLE1BQU0sR0FBRyxJQUFJWixNQUFNLENBQUVFLENBQUMsRUFBRUMsQ0FBQyxDQUFFO0lBQ2pDLEtBQU0sSUFBSUksQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHTCxDQUFDLEVBQUVLLENBQUMsRUFBRSxFQUFHO01BQzVCLEtBQU0sSUFBSVcsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHZixDQUFDLEVBQUVlLENBQUMsRUFBRSxFQUFHO1FBQzVCTixNQUFNLENBQUNKLE9BQU8sQ0FBRUksTUFBTSxDQUFDSyxLQUFLLENBQUVWLENBQUMsRUFBRVcsQ0FBQyxDQUFFLENBQUUsR0FBS1gsQ0FBQyxLQUFLVyxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUs7TUFDbEU7SUFDRjtJQUNBLE9BQU9OLE1BQU07RUFDZjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBTzJFLGNBQWNBLENBQUVDLGNBQWMsRUFBRztJQUN0QyxNQUFNckYsQ0FBQyxHQUFHcUYsY0FBYyxDQUFDOUUsTUFBTTtJQUMvQixNQUFNRSxNQUFNLEdBQUcsSUFBSVosTUFBTSxDQUFFRyxDQUFDLEVBQUVBLENBQUMsQ0FBRSxDQUFDLENBQUM7SUFDbkMsS0FBTSxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdKLENBQUMsRUFBRUksQ0FBQyxFQUFFLEVBQUc7TUFDNUJLLE1BQU0sQ0FBQ0osT0FBTyxDQUFFSSxNQUFNLENBQUNLLEtBQUssQ0FBRVYsQ0FBQyxFQUFFQSxDQUFDLENBQUUsQ0FBRSxHQUFHaUYsY0FBYyxDQUFFakYsQ0FBQyxDQUFFO0lBQzlEO0lBQ0EsT0FBT0ssTUFBTTtFQUNmOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU82RSxVQUFVQSxDQUFFUCxNQUFNLEVBQUc7SUFDMUIsT0FBTyxJQUFJbEYsTUFBTSxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBRWtGLE1BQU0sQ0FBQ0MsQ0FBQyxFQUFFRCxNQUFNLENBQUNFLENBQUMsQ0FBRSxDQUFFO0VBQ25EOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU9NLFVBQVVBLENBQUVSLE1BQU0sRUFBRztJQUMxQixPQUFPLElBQUlsRixNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFFa0YsTUFBTSxDQUFDQyxDQUFDLEVBQUVELE1BQU0sQ0FBQ0UsQ0FBQyxFQUFFRixNQUFNLENBQUNHLENBQUMsQ0FBRSxDQUFFO0VBQzdEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU9NLFVBQVVBLENBQUVULE1BQU0sRUFBRztJQUMxQixPQUFPLElBQUlsRixNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFFa0YsTUFBTSxDQUFDQyxDQUFDLEVBQUVELE1BQU0sQ0FBQ0UsQ0FBQyxFQUFFRixNQUFNLENBQUNHLENBQUMsRUFBRUgsTUFBTSxDQUFDVSxDQUFDLENBQUUsQ0FBRTtFQUN2RTs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxPQUFPQyxTQUFTQSxDQUFFWCxNQUFNLEVBQUc7SUFDekIsSUFBS0EsTUFBTSxDQUFDWSxTQUFTLEVBQUc7TUFDdEIsT0FBTzlGLE1BQU0sQ0FBQ3lGLFVBQVUsQ0FBRVAsTUFBTSxDQUFFO0lBQ3BDLENBQUMsTUFDSSxJQUFLQSxNQUFNLENBQUNhLFNBQVMsRUFBRztNQUMzQixPQUFPL0YsTUFBTSxDQUFDMEYsVUFBVSxDQUFFUixNQUFNLENBQUU7SUFDcEMsQ0FBQyxNQUNJLElBQUtBLE1BQU0sQ0FBQ2MsU0FBUyxFQUFHO01BQzNCLE9BQU9oRyxNQUFNLENBQUMyRixVQUFVLENBQUVULE1BQU0sQ0FBRTtJQUNwQyxDQUFDLE1BQ0k7TUFDSCxNQUFNLElBQUl0QixLQUFLLENBQUcsOEJBQTZCc0IsTUFBTSxDQUFDVCxRQUFRLEVBQUcsRUFBQyxDQUFFO0lBQ3RFO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT3dCLGFBQWFBLENBQUVmLE1BQU0sRUFBRztJQUM3QixPQUFPLElBQUlsRixNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFFa0YsTUFBTSxDQUFDQyxDQUFDLEVBQUVELE1BQU0sQ0FBQ0UsQ0FBQyxDQUFFLENBQUU7RUFDbkQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT2MsYUFBYUEsQ0FBRWhCLE1BQU0sRUFBRztJQUM3QixPQUFPLElBQUlsRixNQUFNLENBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFFa0YsTUFBTSxDQUFDQyxDQUFDLEVBQUVELE1BQU0sQ0FBQ0UsQ0FBQyxFQUFFRixNQUFNLENBQUNHLENBQUMsQ0FBRSxDQUFFO0VBQzdEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU9jLGFBQWFBLENBQUVqQixNQUFNLEVBQUc7SUFDN0IsT0FBTyxJQUFJbEYsTUFBTSxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBRWtGLE1BQU0sQ0FBQ0MsQ0FBQyxFQUFFRCxNQUFNLENBQUNFLENBQUMsRUFBRUYsTUFBTSxDQUFDRyxDQUFDLEVBQUVILE1BQU0sQ0FBQ1UsQ0FBQyxDQUFFLENBQUU7RUFDdkU7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT1EsWUFBWUEsQ0FBRWxCLE1BQU0sRUFBRztJQUM1QixJQUFLQSxNQUFNLENBQUNZLFNBQVMsRUFBRztNQUN0QixPQUFPOUYsTUFBTSxDQUFDaUcsYUFBYSxDQUFFZixNQUFNLENBQUU7SUFDdkMsQ0FBQyxNQUNJLElBQUtBLE1BQU0sQ0FBQ2EsU0FBUyxFQUFHO01BQzNCLE9BQU8vRixNQUFNLENBQUNrRyxhQUFhLENBQUVoQixNQUFNLENBQUU7SUFDdkMsQ0FBQyxNQUNJLElBQUtBLE1BQU0sQ0FBQ2MsU0FBUyxFQUFHO01BQzNCLE9BQU9oRyxNQUFNLENBQUNtRyxhQUFhLENBQUVqQixNQUFNLENBQUU7SUFDdkMsQ0FBQyxNQUNJO01BQ0gsTUFBTSxJQUFJdEIsS0FBSyxDQUFHLDhCQUE2QnNCLE1BQU0sQ0FBQ1QsUUFBUSxFQUFHLEVBQUMsQ0FBRTtJQUN0RTtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU80QixZQUFZQSxDQUFFcEIsT0FBTyxFQUFHO0lBQzdCLE1BQU1xQixTQUFTLEdBQUcsQ0FBQztJQUNuQixNQUFNbkcsQ0FBQyxHQUFHOEUsT0FBTyxDQUFDdkUsTUFBTTtJQUN4QixNQUFNNkYsSUFBSSxHQUFHLElBQUkzRyxTQUFTLENBQUUwRyxTQUFTLEdBQUduRyxDQUFDLENBQUU7SUFFM0MsS0FBTSxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdKLENBQUMsRUFBRUksQ0FBQyxFQUFFLEVBQUc7TUFDNUIsTUFBTTJFLE1BQU0sR0FBR0QsT0FBTyxDQUFFMUUsQ0FBQyxDQUFFO01BQzNCZ0csSUFBSSxDQUFFaEcsQ0FBQyxDQUFFLEdBQUcyRSxNQUFNLENBQUNDLENBQUM7TUFDcEJvQixJQUFJLENBQUVoRyxDQUFDLEdBQUdKLENBQUMsQ0FBRSxHQUFHK0UsTUFBTSxDQUFDRSxDQUFDO0lBQzFCO0lBRUEsT0FBTyxJQUFJcEYsTUFBTSxDQUFFc0csU0FBUyxFQUFFbkcsQ0FBQyxFQUFFb0csSUFBSSxFQUFFLElBQUksQ0FBRTtFQUMvQzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxPQUFPQyxZQUFZQSxDQUFFdkIsT0FBTyxFQUFHO0lBQzdCLE1BQU1xQixTQUFTLEdBQUcsQ0FBQztJQUNuQixNQUFNbkcsQ0FBQyxHQUFHOEUsT0FBTyxDQUFDdkUsTUFBTTtJQUN4QixNQUFNNkYsSUFBSSxHQUFHLElBQUkzRyxTQUFTLENBQUUwRyxTQUFTLEdBQUduRyxDQUFDLENBQUU7SUFFM0MsS0FBTSxJQUFJSSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUdKLENBQUMsRUFBRUksQ0FBQyxFQUFFLEVBQUc7TUFDNUIsTUFBTTJFLE1BQU0sR0FBR0QsT0FBTyxDQUFFMUUsQ0FBQyxDQUFFO01BQzNCZ0csSUFBSSxDQUFFaEcsQ0FBQyxDQUFFLEdBQUcyRSxNQUFNLENBQUNDLENBQUM7TUFDcEJvQixJQUFJLENBQUVoRyxDQUFDLEdBQUdKLENBQUMsQ0FBRSxHQUFHK0UsTUFBTSxDQUFDRSxDQUFDO01BQ3hCbUIsSUFBSSxDQUFFaEcsQ0FBQyxHQUFHLENBQUMsR0FBR0osQ0FBQyxDQUFFLEdBQUcrRSxNQUFNLENBQUNHLENBQUM7SUFDOUI7SUFFQSxPQUFPLElBQUlyRixNQUFNLENBQUVzRyxTQUFTLEVBQUVuRyxDQUFDLEVBQUVvRyxJQUFJLEVBQUUsSUFBSSxDQUFFO0VBQy9DOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU9FLFlBQVlBLENBQUV4QixPQUFPLEVBQUc7SUFDN0IsTUFBTXFCLFNBQVMsR0FBRyxDQUFDO0lBQ25CLE1BQU1uRyxDQUFDLEdBQUc4RSxPQUFPLENBQUN2RSxNQUFNO0lBQ3hCLE1BQU02RixJQUFJLEdBQUcsSUFBSTNHLFNBQVMsQ0FBRTBHLFNBQVMsR0FBR25HLENBQUMsQ0FBRTtJQUUzQyxLQUFNLElBQUlJLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR0osQ0FBQyxFQUFFSSxDQUFDLEVBQUUsRUFBRztNQUM1QixNQUFNMkUsTUFBTSxHQUFHRCxPQUFPLENBQUUxRSxDQUFDLENBQUU7TUFDM0JnRyxJQUFJLENBQUVoRyxDQUFDLENBQUUsR0FBRzJFLE1BQU0sQ0FBQ0MsQ0FBQztNQUNwQm9CLElBQUksQ0FBRWhHLENBQUMsR0FBR0osQ0FBQyxDQUFFLEdBQUcrRSxNQUFNLENBQUNFLENBQUM7TUFDeEJtQixJQUFJLENBQUVoRyxDQUFDLEdBQUcsQ0FBQyxHQUFHSixDQUFDLENBQUUsR0FBRytFLE1BQU0sQ0FBQ0csQ0FBQztNQUM1QmtCLElBQUksQ0FBRWhHLENBQUMsR0FBRyxDQUFDLEdBQUdKLENBQUMsQ0FBRSxHQUFHK0UsTUFBTSxDQUFDVSxDQUFDO0lBQzlCO0lBRUEsT0FBTyxJQUFJNUYsTUFBTSxDQUFFc0csU0FBUyxFQUFFbkcsQ0FBQyxFQUFFb0csSUFBSSxFQUFFLElBQUksQ0FBRTtFQUMvQztBQUNGOztBQUVBO0FBQ0F2RyxNQUFNLENBQUMwRyxTQUFTLENBQUMvQyxRQUFRLEdBQUcsSUFBSTtBQUVoQ3RFLEdBQUcsQ0FBQ3NILFFBQVEsQ0FBRSxRQUFRLEVBQUUzRyxNQUFNLENBQUU7QUFDaEMsZUFBZUEsTUFBTSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/EigenvalueDecomposition.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Eigensystem decomposition, based on Jama (http://math.nist.gov/javanumerics/jama/)
 *
 * Eigenvalues and eigenvectors of a real matrix.
 * <P>
 * If A is symmetric, then A = V*D*V' where the eigenvalue matrix D is
 * diagonal and the eigenvector matrix V is orthogonal.
 * I.e. A = V.times(D.times(V.transpose())) and
 * V.times(V.transpose()) equals the identity matrix.
 * <P>
 * If A is not symmetric, then the eigenvalue matrix D is block diagonal
 * with the real eigenvalues in 1-by-1 blocks and any complex eigenvalues,
 * lambda + i*mu, in 2-by-2 blocks, [lambda, mu; -mu, lambda].  The
 * columns of V represent the eigenvectors in the sense that A*V = V*D,
 * i.e. A.times(V) equals V.times(D).  The matrix V may be badly
 * conditioned, or even singular, so the validity of the equation
 * A = V*D*inverse(V) depends upon V.cond().
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



const EigenvalueDecomposition_ArrayType = window.Float64Array || Array;
class EigenvalueDecomposition {
  /**
   * @param {Matrix} matrix - must be a square matrix
   */
  constructor(matrix) {
    let i;
    let j;
    const A = matrix.entries;
    this.n = matrix.getColumnDimension(); // @private  Row and column dimension (square matrix).
    const n = this.n;
    this.V = new EigenvalueDecomposition_ArrayType(n * n); // @private Array for internal storage of eigenvectors.

    // Arrays for internal storage of eigenvalues.
    this.d = new EigenvalueDecomposition_ArrayType(n); // @private
    this.e = new EigenvalueDecomposition_ArrayType(n); // @private

    this.issymmetric = true;
    for (j = 0; j < n && this.issymmetric; j++) {
      for (i = 0; i < n && this.issymmetric; i++) {
        this.issymmetric = A[i * this.n + j] === A[j * this.n + i];
      }
    }
    if (this.issymmetric) {
      for (i = 0; i < n; i++) {
        for (j = 0; j < n; j++) {
          this.V[i * this.n + j] = A[i * this.n + j];
        }
      }

      // Tridiagonalize.
      this.tred2();

      // Diagonalize.
      this.tql2();
    } else {
      this.H = new EigenvalueDecomposition_ArrayType(n * n); // Array for internal storage of nonsymmetric Hessenberg form.
      this.ort = new EigenvalueDecomposition_ArrayType(n); // // Working storage for nonsymmetric algorithm.

      for (j = 0; j < n; j++) {
        for (i = 0; i < n; i++) {
          this.H[i * this.n + j] = A[i * this.n + j];
        }
      }

      // Reduce to Hessenberg form.
      this.orthes();

      // Reduce Hessenberg to real Schur form.
      this.hqr2();
    }
  }

  /**
   * Returns a square array of all eigenvectors arranged in a columnar format
   * @public
   * @returns {ArrayType.<number>} - a n*n matrix
   */
  getV() {
    return this.V.copy();
  }

  /**
   * Returns an array that contains the real part of the eigenvalues
   * @public
   * @returns {ArrayType.<number>} - a one dimensional array
   */
  getRealEigenvalues() {
    return this.d;
  }

  /**
   * Returns an array that contains the imaginary parts of the eigenvalues
   * @public
   * @returns {ArrayType.<number>} - a one dimensional array
   */
  getImagEigenvalues() {
    return this.e;
  }

  /**
   * Return the block diagonal eigenvalue matrix
   * @public
   * @returns {Matrix} - a n * n matrix
   */
  getD() {
    const n = this.n;
    const d = this.d;
    const e = this.e;
    const X = new js_Matrix(n, n);
    const D = X.entries;
    for (let i = 0; i < n; i++) {
      for (let j = 0; j < n; j++) {
        D[i * this.n + j] = 0.0;
      }
      D[i * this.n + i] = d[i];
      if (e[i] > 0) {
        D[i * this.n + i + 1] = e[i];
      } else if (e[i] < 0) {
        D[i * this.n + i - 1] = e[i];
      }
    }
    return X;
  }

  /**
   * Symmetric Householder reduction to tridiagonal form.
   * @private
   */
  tred2() {
    const n = this.n;
    const V = this.V;
    const d = this.d;
    const e = this.e;
    let i;
    let j;
    let k;
    let f;
    let g;
    let h;

    //  This is derived from the Algol procedures tred2 by
    //  Bowdler, Martin, Reinsch, and Wilkinson, Handbook for
    //  Auto. Comp., Vol.ii-Linear Algebra, and the corresponding
    //  Fortran subroutine in EISPACK.

    for (j = 0; j < n; j++) {
      d[j] = V[(n - 1) * n + j];
    }

    // Householder reduction to tridiagonal form.

    for (i = n - 1; i > 0; i--) {
      // Scale to avoid under/overflow.

      let scale = 0.0;
      h = 0.0;
      for (k = 0; k < i; k++) {
        scale = scale + Math.abs(d[k]);
      }
      if (scale === 0.0) {
        e[i] = d[i - 1];
        for (j = 0; j < i; j++) {
          d[j] = V[(i - 1) * n + j];
          V[i * this.n + j] = 0.0;
          V[j * this.n + i] = 0.0;
        }
      } else {
        // Generate Householder vector.

        for (k = 0; k < i; k++) {
          d[k] /= scale;
          h += d[k] * d[k];
        }
        f = d[i - 1];
        g = Math.sqrt(h);
        if (f > 0) {
          g = -g;
        }
        e[i] = scale * g;
        h = h - f * g;
        d[i - 1] = f - g;
        for (j = 0; j < i; j++) {
          e[j] = 0.0;
        }

        // Apply similarity transformation to remaining columns.

        for (j = 0; j < i; j++) {
          f = d[j];
          V[j * this.n + i] = f;
          g = e[j] + V[j * n + j] * f;
          for (k = j + 1; k <= i - 1; k++) {
            g += V[k * n + j] * d[k];
            e[k] += V[k * n + j] * f;
          }
          e[j] = g;
        }
        f = 0.0;
        for (j = 0; j < i; j++) {
          e[j] /= h;
          f += e[j] * d[j];
        }
        const hh = f / (h + h);
        for (j = 0; j < i; j++) {
          e[j] -= hh * d[j];
        }
        for (j = 0; j < i; j++) {
          f = d[j];
          g = e[j];
          for (k = j; k <= i - 1; k++) {
            V[k * n + j] -= f * e[k] + g * d[k];
          }
          d[j] = V[(i - 1) * n + j];
          V[i * this.n + j] = 0.0;
        }
      }
      d[i] = h;
    }

    // Accumulate transformations.

    for (i = 0; i < n - 1; i++) {
      V[(n - 1) * n + i] = V[i * n + i];
      V[i * n + i] = 1.0;
      h = d[i + 1];
      if (h !== 0.0) {
        for (k = 0; k <= i; k++) {
          d[k] = V[k * n + (i + 1)] / h;
        }
        for (j = 0; j <= i; j++) {
          g = 0.0;
          for (k = 0; k <= i; k++) {
            g += V[k * n + (i + 1)] * V[k * n + j];
          }
          for (k = 0; k <= i; k++) {
            V[k * n + j] -= g * d[k];
          }
        }
      }
      for (k = 0; k <= i; k++) {
        V[k * n + (i + 1)] = 0.0;
      }
    }
    for (j = 0; j < n; j++) {
      d[j] = V[(n - 1) * n + j];
      V[(n - 1) * n + j] = 0.0;
    }
    V[(n - 1) * n + (n - 1)] = 1.0;
    e[0] = 0.0;
  }

  /**
   * Symmetric tridiagonal QL algorithm.
   * @private
   */
  tql2() {
    const n = this.n;
    const V = this.V;
    const d = this.d;
    const e = this.e;
    let i;
    let j;
    let k;
    let l;
    let g;
    let p;
    let iter;

    //  This is derived from the Algol procedures tql2, by
    //  Bowdler, Martin, Reinsch, and Wilkinson, Handbook for
    //  Auto. Comp., Vol.ii-Linear Algebra, and the corresponding
    //  Fortran subroutine in EISPACK.

    for (i = 1; i < n; i++) {
      e[i - 1] = e[i];
    }
    e[n - 1] = 0.0;
    let f = 0.0;
    let tst1 = 0.0;
    const eps = Math.pow(2.0, -52.0);
    for (l = 0; l < n; l++) {
      // Find small subdiagonal element

      tst1 = Math.max(tst1, Math.abs(d[l]) + Math.abs(e[l]));
      let m = l;
      while (m < n) {
        if (Math.abs(e[m]) <= eps * tst1) {
          break;
        }
        m++;
      }

      // If m === l, d[l] is an eigenvalue,
      // otherwise, iterate.

      if (m > l) {
        iter = 0;
        do {
          iter = iter + 1; // (Could check iteration count here.)

          // Compute implicit shift

          g = d[l];
          p = (d[l + 1] - g) / (2.0 * e[l]);
          let r = js_Matrix.hypot(p, 1.0);
          if (p < 0) {
            r = -r;
          }
          d[l] = e[l] / (p + r);
          d[l + 1] = e[l] * (p + r);
          const dl1 = d[l + 1];
          let h = g - d[l];
          for (i = l + 2; i < n; i++) {
            d[i] -= h;
          }
          f = f + h;

          // Implicit QL transformation.

          p = d[m];
          let c = 1.0;
          let c2 = c;
          let c3 = c;
          const el1 = e[l + 1];
          let s = 0.0;
          let s2 = 0.0;
          for (i = m - 1; i >= l; i--) {
            c3 = c2;
            c2 = c;
            s2 = s;
            g = c * e[i];
            h = c * p;
            r = js_Matrix.hypot(p, e[i]);
            e[i + 1] = s * r;
            s = e[i] / r;
            c = p / r;
            p = c * d[i] - s * g;
            d[i + 1] = h + s * (c * g + s * d[i]);

            // Accumulate transformation.

            for (k = 0; k < n; k++) {
              h = V[k * n + (i + 1)];
              V[k * n + (i + 1)] = s * V[k * n + i] + c * h;
              V[k * n + i] = c * V[k * n + i] - s * h;
            }
          }
          p = -s * s2 * c3 * el1 * e[l] / dl1;
          e[l] = s * p;
          d[l] = c * p;

          // Check for convergence.
        } while (Math.abs(e[l]) > eps * tst1);
      }
      d[l] = d[l] + f;
      e[l] = 0.0;
    }

    // Sort eigenvalues and corresponding vectors.

    for (i = 0; i < n - 1; i++) {
      k = i;
      p = d[i];
      for (j = i + 1; j < n; j++) {
        if (d[j] < p) {
          k = j;
          p = d[j];
        }
      }
      if (k !== i) {
        d[k] = d[i];
        d[i] = p;
        for (j = 0; j < n; j++) {
          p = V[j * this.n + i];
          V[j * this.n + i] = V[j * n + k];
          V[j * n + k] = p;
        }
      }
    }
  }

  /**
   *  Nonsymmetric reduction to Hessenberg form.
   *  @private
   */
  orthes() {
    const n = this.n;
    const V = this.V;
    const H = this.H;
    const ort = this.ort;
    let i;
    let j;
    let m;
    let f;
    let g;

    //  This is derived from the Algol procedures orthes and ortran,
    //  by Martin and Wilkinson, Handbook for Auto. Comp.,
    //  Vol.ii-Linear Algebra, and the corresponding
    //  Fortran subroutines in EISPACK.

    const low = 0;
    const high = n - 1;
    for (m = low + 1; m <= high - 1; m++) {
      // Scale column.

      let scale = 0.0;
      for (i = m; i <= high; i++) {
        scale = scale + Math.abs(H[i * n + (m - 1)]);
      }
      if (scale !== 0.0) {
        // Compute Householder transformation.

        let h = 0.0;
        for (i = high; i >= m; i--) {
          ort[i] = H[i * n + (m - 1)] / scale;
          h += ort[i] * ort[i];
        }
        g = Math.sqrt(h);
        if (ort[m] > 0) {
          g = -g;
        }
        h = h - ort[m] * g;
        ort[m] = ort[m] - g;

        // Apply Householder similarity transformation
        // H = (I-u*u'/h)*H*(I-u*u')/h)

        for (j = m; j < n; j++) {
          f = 0.0;
          for (i = high; i >= m; i--) {
            f += ort[i] * H[i * this.n + j];
          }
          f = f / h;
          for (i = m; i <= high; i++) {
            H[i * this.n + j] -= f * ort[i];
          }
        }
        for (i = 0; i <= high; i++) {
          f = 0.0;
          for (j = high; j >= m; j--) {
            f += ort[j] * H[i * this.n + j];
          }
          f = f / h;
          for (j = m; j <= high; j++) {
            H[i * this.n + j] -= f * ort[j];
          }
        }
        ort[m] = scale * ort[m];
        H[m * n + (m - 1)] = scale * g;
      }
    }

    // Accumulate transformations (Algol's ortran).

    for (i = 0; i < n; i++) {
      for (j = 0; j < n; j++) {
        V[i * this.n + j] = i === j ? 1.0 : 0.0;
      }
    }
    for (m = high - 1; m >= low + 1; m--) {
      if (H[m * n + (m - 1)] !== 0.0) {
        for (i = m + 1; i <= high; i++) {
          ort[i] = H[i * n + (m - 1)];
        }
        for (j = m; j <= high; j++) {
          g = 0.0;
          for (i = m; i <= high; i++) {
            g += ort[i] * V[i * this.n + j];
          }
          // Double division avoids possible underflow
          g = g / ort[m] / H[m * n + (m - 1)];
          for (i = m; i <= high; i++) {
            V[i * this.n + j] += g * ort[i];
          }
        }
      }
    }
  }

  /**
   * Complex scalar division.
   * @private
   *
   * @param {*} xr
   * @param {*} xi
   * @param {*} yr
   * @param {*} yi
   */
  cdiv(xr, xi, yr, yi) {
    let r;
    let d;
    if (Math.abs(yr) > Math.abs(yi)) {
      r = yi / yr;
      d = yr + r * yi;
      this.cdivr = (xr + r * xi) / d;
      this.cdivi = (xi - r * xr) / d;
    } else {
      r = yr / yi;
      d = yi + r * yr;
      this.cdivr = (r * xr + xi) / d;
      this.cdivi = (r * xi - xr) / d;
    }
  }

  /**
   * This methods finds the eigenvalues and eigenvectors
   * of a real upper hessenberg matrix by the QR algorithm
   *
   * Nonsymmetric reduction from Hessenberg to real Schur form.
   * https://en.wikipedia.org/wiki/QR_algorithm
   *
   * @private
   */
  hqr2() {
    let n;
    const V = this.V;
    const d = this.d;
    const e = this.e;
    const H = this.H;
    let i;
    let j;
    let k;
    let l;
    let m;
    let iter;

    //  This is derived from the Algol procedure hqr2,
    //  by Martin and Wilkinson, Handbook for Auto. Comp.,
    //  Vol.ii-Linear Algebra, and the corresponding
    //  Fortran subroutine in EISPACK.

    // Initialize

    const nn = this.n;
    n = nn - 1;
    const low = 0;
    const high = nn - 1;
    const eps = Math.pow(2.0, -52.0);
    let exshift = 0.0;
    let p = 0;
    let q = 0;
    let r = 0;
    let s = 0;
    let z = 0;
    let t;
    let w;
    let x;
    let y;

    // Store roots isolated by balanc and compute matrix norm

    let norm = 0.0;
    for (i = 0; i < nn; i++) {
      if (i < low || i > high) {
        d[i] = H[i * n + i];
        e[i] = 0.0;
      }
      for (j = Math.max(i - 1, 0); j < nn; j++) {
        norm = norm + Math.abs(H[i * this.n + j]);
      }
    }

    // Outer loop over eigenvalue index

    iter = 0;
    while (n >= low) {
      // Look for single small sub-diagonal element

      l = n;
      while (l > low) {
        s = Math.abs(H[(l - 1) * n + (l - 1)]) + Math.abs(H[l * n + l]);
        if (s === 0.0) {
          s = norm;
        }
        if (Math.abs(H[l * n + (l - 1)]) < eps * s) {
          break;
        }
        l--;
      }

      // Check for convergence
      // One root found

      if (l === n) {
        H[n * n + n] = H[n * n + n] + exshift;
        d[n] = H[n * n + n];
        e[n] = 0.0;
        n--;
        iter = 0;

        // Two roots found
      } else if (l === n - 1) {
        w = H[n * n + n - 1] * H[(n - 1) * n + n];
        p = (H[(n - 1) * n + (n - 1)] - H[n * n + n]) / 2.0;
        q = p * p + w;
        z = Math.sqrt(Math.abs(q));
        H[n * n + n] = H[n * n + n] + exshift;
        H[(n - 1) * n + (n - 1)] = H[(n - 1) * n + (n - 1)] + exshift;
        x = H[n * n + n];

        // Real pair

        if (q >= 0) {
          if (p >= 0) {
            z = p + z;
          } else {
            z = p - z;
          }
          d[n - 1] = x + z;
          d[n] = d[n - 1];
          if (z !== 0.0) {
            d[n] = x - w / z;
          }
          e[n - 1] = 0.0;
          e[n] = 0.0;
          x = H[n * n + n - 1];
          s = Math.abs(x) + Math.abs(z);
          p = x / s;
          q = z / s;
          r = Math.sqrt(p * p + q * q);
          p = p / r;
          q = q / r;

          // Row modification

          for (j = n - 1; j < nn; j++) {
            z = H[(n - 1) * n + j];
            H[(n - 1) * n + j] = q * z + p * H[n * n + j];
            H[n * n + j] = q * H[n * n + j] - p * z;
          }

          // Column modification

          for (i = 0; i <= n; i++) {
            z = H[i * n + n - 1];
            H[i * n + n - 1] = q * z + p * H[i * n + n];
            H[i * n + n] = q * H[i * n + n] - p * z;
          }

          // Accumulate transformations

          for (i = low; i <= high; i++) {
            z = V[i * n + n - 1];
            V[i * n + n - 1] = q * z + p * V[i * n + n];
            V[i * n + n] = q * V[i * n + n] - p * z;
          }

          // Complex pair
        } else {
          d[n - 1] = x + p;
          d[n] = x + p;
          e[n - 1] = z;
          e[n] = -z;
        }
        n = n - 2;
        iter = 0;

        // No convergence yet
      } else {
        // Form shift

        x = H[n * n + n];
        y = 0.0;
        w = 0.0;
        if (l < n) {
          y = H[(n - 1) * n + (n - 1)];
          w = H[n * n + n - 1] * H[(n - 1) * n + n];
        }

        // Wilkinson's original ad hoc shift

        if (iter === 10) {
          exshift += x;
          for (i = low; i <= n; i++) {
            H[i * n + i] -= x;
          }
          s = Math.abs(H[n * n + n - 1]) + Math.abs(H[(n - 1) * n + n - 2]);
          x = y = 0.75 * s;
          w = -0.4375 * s * s;
        }

        // MATLAB's new ad hoc shift

        if (iter === 30) {
          s = (y - x) / 2.0;
          s = s * s + w;
          if (s > 0) {
            s = Math.sqrt(s);
            if (y < x) {
              s = -s;
            }
            s = x - w / ((y - x) / 2.0 + s);
            for (i = low; i <= n; i++) {
              H[i * n + i] -= s;
            }
            exshift += s;
            x = y = w = 0.964;
          }
        }
        iter = iter + 1; // (Could check iteration count here.)

        // Look for two consecutive small sub-diagonal elements

        m = n - 2;
        while (m >= l) {
          z = H[m * n + m];
          r = x - z;
          s = y - z;
          p = (r * s - w) / H[(m + 1) * n + m] + H[m * n + m + 1];
          q = H[(m + 1) * n + m + 1] - z - r - s;
          r = H[(m + 2) * n + m + 1];
          s = Math.abs(p) + Math.abs(q) + Math.abs(r);
          p = p / s;
          q = q / s;
          r = r / s;
          if (m === l) {
            break;
          }
          if (Math.abs(H[m * n + (m - 1)]) * (Math.abs(q) + Math.abs(r)) < eps * (Math.abs(p) * (Math.abs(H[(m - 1) * n + m - 1]) + Math.abs(z) + Math.abs(H[(m + 1) * n + m + 1])))) {
            break;
          }
          m--;
        }
        for (i = m + 2; i <= n; i++) {
          H[i * n + i - 2] = 0.0;
          if (i > m + 2) {
            H[i * n + i - 3] = 0.0;
          }
        }

        // Double QR step involving rows l:n and columns m:n

        for (k = m; k <= n - 1; k++) {
          const notlast = k !== n - 1;
          if (k !== m) {
            p = H[k * n + k - 1];
            q = H[(k + 1) * n + k - 1];
            r = notlast ? H[(k + 2) * n + k - 1] : 0.0;
            x = Math.abs(p) + Math.abs(q) + Math.abs(r);
            if (x !== 0.0) {
              p = p / x;
              q = q / x;
              r = r / x;
            }
          }
          if (x === 0.0) {
            break;
          }
          s = Math.sqrt(p * p + q * q + r * r);
          if (p < 0) {
            s = -s;
          }
          if (s !== 0) {
            if (k !== m) {
              H[k * n + k - 1] = -s * x;
            } else if (l !== m) {
              H[k * n + k - 1] = -H[k * n + k - 1];
            }
            p = p + s;
            x = p / s;
            y = q / s;
            z = r / s;
            q = q / p;
            r = r / p;

            // Row modification

            for (j = k; j < nn; j++) {
              p = H[k * n + j] + q * H[(k + 1) * n + j];
              if (notlast) {
                p = p + r * H[(k + 2) * n + j];
                H[(k + 2) * n + j] = H[(k + 2) * n + j] - p * z;
              }
              H[k * n + j] = H[k * n + j] - p * x;
              H[(k + 1) * n + j] = H[(k + 1) * n + j] - p * y;
            }

            // Column modification

            for (i = 0; i <= Math.min(n, k + 3); i++) {
              p = x * H[i * n + k] + y * H[i * n + k + 1];
              if (notlast) {
                p = p + z * H[i * n + k + 2];
                H[i * n + k + 2] = H[i * n + k + 2] - p * r;
              }
              H[i * n + k] = H[i * n + k] - p;
              H[i * n + k + 1] = H[i * n + k + 1] - p * q;
            }

            // Accumulate transformations

            for (i = low; i <= high; i++) {
              p = x * V[i * n + k] + y * V[i * n + k + 1];
              if (notlast) {
                p = p + z * V[i * n + k + 2];
                V[i * n + k + 2] = V[i * n + k + 2] - p * r;
              }
              V[i * n + k] = V[i * n + k] - p;
              V[i * n + k + 1] = V[i * n + k + 1] - p * q;
            }
          } // (s !== 0)
        } // k loop
      } // check convergence
    } // while (n >= low)

    // Backsubstitute to find vectors of upper triangular form

    if (norm === 0.0) {
      return;
    }
    for (n = nn - 1; n >= 0; n--) {
      p = d[n];
      q = e[n];

      // Real vector

      if (q === 0) {
        l = n;
        H[n * n + n] = 1.0;
        for (i = n - 1; i >= 0; i--) {
          w = H[i * n + i] - p;
          r = 0.0;
          for (j = l; j <= n; j++) {
            r = r + H[i * this.n + j] * H[j * n + n];
          }
          if (e[i] < 0.0) {
            z = w;
            s = r;
          } else {
            l = i;
            if (e[i] === 0.0) {
              if (w !== 0.0) {
                H[i * n + n] = -r / w;
              } else {
                H[i * n + n] = -r / (eps * norm);
              }

              // Solve real equations
            } else {
              x = H[i * n + i + 1];
              y = H[(i + 1) * n + i];
              q = (d[i] - p) * (d[i] - p) + e[i] * e[i];
              t = (x * s - z * r) / q;
              H[i * n + n] = t;
              if (Math.abs(x) > Math.abs(z)) {
                H[(i + 1) * n + n] = (-r - w * t) / x;
              } else {
                H[(i + 1) * n + n] = (-s - y * t) / z;
              }
            }

            // Overflow control

            t = Math.abs(H[i * n + n]);
            if (eps * t * t > 1) {
              for (j = i; j <= n; j++) {
                H[j * n + n] = H[j * n + n] / t;
              }
            }
          }
        }

        // Complex vector
      } else if (q < 0) {
        l = n - 1;

        // Last vector component imaginary so matrix is triangular

        if (Math.abs(H[n * n + n - 1]) > Math.abs(H[(n - 1) * n + n])) {
          H[(n - 1) * n + (n - 1)] = q / H[n * n + n - 1];
          H[(n - 1) * n + n] = -(H[n * n + n] - p) / H[n * n + n - 1];
        } else {
          this.cdiv(0.0, -H[(n - 1) * n + n], H[(n - 1) * n + (n - 1)] - p, q);
          H[(n - 1) * n + (n - 1)] = this.cdivr;
          H[(n - 1) * n + n] = this.cdivi;
        }
        H[n * n + n - 1] = 0.0;
        H[n * n + n] = 1.0;
        for (i = n - 2; i >= 0; i--) {
          let ra;
          let sa;
          let vr;
          let vi;
          ra = 0.0;
          sa = 0.0;
          for (j = l; j <= n; j++) {
            ra = ra + H[i * this.n + j] * H[j * n + n - 1];
            sa = sa + H[i * this.n + j] * H[j * n + n];
          }
          w = H[i * n + i] - p;
          if (e[i] < 0.0) {
            z = w;
            r = ra;
            s = sa;
          } else {
            l = i;
            if (e[i] === 0) {
              this.cdiv(-ra, -sa, w, q);
              H[i * n + n - 1] = this.cdivr;
              H[i * n + n] = this.cdivi;
            } else {
              // Solve complex equations

              x = H[i * n + i + 1];
              y = H[(i + 1) * n + i];
              vr = (d[i] - p) * (d[i] - p) + e[i] * e[i] - q * q;
              vi = (d[i] - p) * 2.0 * q;
              if (vr === 0.0 && vi === 0.0) {
                vr = eps * norm * (Math.abs(w) + Math.abs(q) + Math.abs(x) + Math.abs(y) + Math.abs(z));
              }
              this.cdiv(x * r - z * ra + q * sa, x * s - z * sa - q * ra, vr, vi);
              H[i * n + n - 1] = this.cdivr;
              H[i * n + n] = this.cdivi;
              if (Math.abs(x) > Math.abs(z) + Math.abs(q)) {
                H[(i + 1) * n + n - 1] = (-ra - w * H[i * n + n - 1] + q * H[i * n + n]) / x;
                H[(i + 1) * n + n] = (-sa - w * H[i * n + n] - q * H[i * n + n - 1]) / x;
              } else {
                this.cdiv(-r - y * H[i * n + n - 1], -s - y * H[i * n + n], z, q);
                H[(i + 1) * n + n - 1] = this.cdivr;
                H[(i + 1) * n + n] = this.cdivi;
              }
            }

            // Overflow control
            t = Math.max(Math.abs(H[i * n + n - 1]), Math.abs(H[i * n + n]));
            if (eps * t * t > 1) {
              for (j = i; j <= n; j++) {
                H[j * n + n - 1] = H[j * n + n - 1] / t;
                H[j * n + n] = H[j * n + n] / t;
              }
            }
          }
        }
      }
    }

    // Vectors of isolated roots
    for (i = 0; i < nn; i++) {
      if (i < low || i > high) {
        for (j = i; j < nn; j++) {
          V[i * this.n + j] = H[i * this.n + j];
        }
      }
    }

    // Back transformation to get eigenvectors of original matrix
    for (j = nn - 1; j >= low; j--) {
      for (i = low; i <= high; i++) {
        z = 0.0;
        for (k = low; k <= Math.min(j, high); k++) {
          z = z + V[i * n + k] * H[k * n + j];
        }
        V[i * this.n + j] = z;
      }
    }
  }
}
js_dot.register('EigenvalueDecomposition', EigenvalueDecomposition);
/* harmony default export */ const js_EigenvalueDecomposition = ((/* unused pure expression or super */ null && (EigenvalueDecomposition)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJNYXRyaXgiLCJBcnJheVR5cGUiLCJ3aW5kb3ciLCJGbG9hdDY0QXJyYXkiLCJBcnJheSIsIkVpZ2VudmFsdWVEZWNvbXBvc2l0aW9uIiwiY29uc3RydWN0b3IiLCJtYXRyaXgiLCJpIiwiaiIsIkEiLCJlbnRyaWVzIiwibiIsImdldENvbHVtbkRpbWVuc2lvbiIsIlYiLCJkIiwiZSIsImlzc3ltbWV0cmljIiwidHJlZDIiLCJ0cWwyIiwiSCIsIm9ydCIsIm9ydGhlcyIsImhxcjIiLCJnZXRWIiwiY29weSIsImdldFJlYWxFaWdlbnZhbHVlcyIsImdldEltYWdFaWdlbnZhbHVlcyIsImdldEQiLCJYIiwiRCIsImsiLCJmIiwiZyIsImgiLCJzY2FsZSIsIk1hdGgiLCJhYnMiLCJzcXJ0IiwiaGgiLCJsIiwicCIsIml0ZXIiLCJ0c3QxIiwiZXBzIiwicG93IiwibWF4IiwibSIsInIiLCJoeXBvdCIsImRsMSIsImMiLCJjMiIsImMzIiwiZWwxIiwicyIsInMyIiwibG93IiwiaGlnaCIsImNkaXYiLCJ4ciIsInhpIiwieXIiLCJ5aSIsImNkaXZyIiwiY2RpdmkiLCJubiIsImV4c2hpZnQiLCJxIiwieiIsInQiLCJ3IiwieCIsInkiLCJub3JtIiwibm90bGFzdCIsIm1pbiIsInJhIiwic2EiLCJ2ciIsInZpIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJFaWdlbnZhbHVlRGVjb21wb3NpdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBFaWdlbnN5c3RlbSBkZWNvbXBvc2l0aW9uLCBiYXNlZCBvbiBKYW1hIChodHRwOi8vbWF0aC5uaXN0Lmdvdi9qYXZhbnVtZXJpY3MvamFtYS8pXG4gKlxuICogRWlnZW52YWx1ZXMgYW5kIGVpZ2VudmVjdG9ycyBvZiBhIHJlYWwgbWF0cml4LlxuICogPFA+XG4gKiBJZiBBIGlzIHN5bW1ldHJpYywgdGhlbiBBID0gVipEKlYnIHdoZXJlIHRoZSBlaWdlbnZhbHVlIG1hdHJpeCBEIGlzXG4gKiBkaWFnb25hbCBhbmQgdGhlIGVpZ2VudmVjdG9yIG1hdHJpeCBWIGlzIG9ydGhvZ29uYWwuXG4gKiBJLmUuIEEgPSBWLnRpbWVzKEQudGltZXMoVi50cmFuc3Bvc2UoKSkpIGFuZFxuICogVi50aW1lcyhWLnRyYW5zcG9zZSgpKSBlcXVhbHMgdGhlIGlkZW50aXR5IG1hdHJpeC5cbiAqIDxQPlxuICogSWYgQSBpcyBub3Qgc3ltbWV0cmljLCB0aGVuIHRoZSBlaWdlbnZhbHVlIG1hdHJpeCBEIGlzIGJsb2NrIGRpYWdvbmFsXG4gKiB3aXRoIHRoZSByZWFsIGVpZ2VudmFsdWVzIGluIDEtYnktMSBibG9ja3MgYW5kIGFueSBjb21wbGV4IGVpZ2VudmFsdWVzLFxuICogbGFtYmRhICsgaSptdSwgaW4gMi1ieS0yIGJsb2NrcywgW2xhbWJkYSwgbXU7IC1tdSwgbGFtYmRhXS4gIFRoZVxuICogY29sdW1ucyBvZiBWIHJlcHJlc2VudCB0aGUgZWlnZW52ZWN0b3JzIGluIHRoZSBzZW5zZSB0aGF0IEEqViA9IFYqRCxcbiAqIGkuZS4gQS50aW1lcyhWKSBlcXVhbHMgVi50aW1lcyhEKS4gIFRoZSBtYXRyaXggViBtYXkgYmUgYmFkbHlcbiAqIGNvbmRpdGlvbmVkLCBvciBldmVuIHNpbmd1bGFyLCBzbyB0aGUgdmFsaWRpdHkgb2YgdGhlIGVxdWF0aW9uXG4gKiBBID0gVipEKmludmVyc2UoVikgZGVwZW5kcyB1cG9uIFYuY29uZCgpLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcbmltcG9ydCBNYXRyaXggZnJvbSAnLi9NYXRyaXguanMnO1xuXG5jb25zdCBBcnJheVR5cGUgPSB3aW5kb3cuRmxvYXQ2NEFycmF5IHx8IEFycmF5O1xuXG5jbGFzcyBFaWdlbnZhbHVlRGVjb21wb3NpdGlvbiB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge01hdHJpeH0gbWF0cml4IC0gbXVzdCBiZSBhIHNxdWFyZSBtYXRyaXhcbiAgICovXG4gIGNvbnN0cnVjdG9yKCBtYXRyaXggKSB7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG5cbiAgICBjb25zdCBBID0gbWF0cml4LmVudHJpZXM7XG4gICAgdGhpcy5uID0gbWF0cml4LmdldENvbHVtbkRpbWVuc2lvbigpOyAvLyBAcHJpdmF0ZSAgUm93IGFuZCBjb2x1bW4gZGltZW5zaW9uIChzcXVhcmUgbWF0cml4KS5cbiAgICBjb25zdCBuID0gdGhpcy5uO1xuICAgIHRoaXMuViA9IG5ldyBBcnJheVR5cGUoIG4gKiBuICk7IC8vIEBwcml2YXRlIEFycmF5IGZvciBpbnRlcm5hbCBzdG9yYWdlIG9mIGVpZ2VudmVjdG9ycy5cblxuICAgIC8vIEFycmF5cyBmb3IgaW50ZXJuYWwgc3RvcmFnZSBvZiBlaWdlbnZhbHVlcy5cbiAgICB0aGlzLmQgPSBuZXcgQXJyYXlUeXBlKCBuICk7IC8vIEBwcml2YXRlXG4gICAgdGhpcy5lID0gbmV3IEFycmF5VHlwZSggbiApOyAvLyBAcHJpdmF0ZVxuXG4gICAgdGhpcy5pc3N5bW1ldHJpYyA9IHRydWU7XG4gICAgZm9yICggaiA9IDA7ICggaiA8IG4gKSAmJiB0aGlzLmlzc3ltbWV0cmljOyBqKysgKSB7XG4gICAgICBmb3IgKCBpID0gMDsgKCBpIDwgbiApICYmIHRoaXMuaXNzeW1tZXRyaWM7IGkrKyApIHtcbiAgICAgICAgdGhpcy5pc3N5bW1ldHJpYyA9ICggQVsgaSAqIHRoaXMubiArIGogXSA9PT0gQVsgaiAqIHRoaXMubiArIGkgXSApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICggdGhpcy5pc3N5bW1ldHJpYyApIHtcbiAgICAgIGZvciAoIGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgICBmb3IgKCBqID0gMDsgaiA8IG47IGorKyApIHtcbiAgICAgICAgICB0aGlzLlZbIGkgKiB0aGlzLm4gKyBqIF0gPSBBWyBpICogdGhpcy5uICsgaiBdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFRyaWRpYWdvbmFsaXplLlxuICAgICAgdGhpcy50cmVkMigpO1xuXG4gICAgICAvLyBEaWFnb25hbGl6ZS5cbiAgICAgIHRoaXMudHFsMigpO1xuXG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgdGhpcy5IID0gbmV3IEFycmF5VHlwZSggbiAqIG4gKTsgLy8gQXJyYXkgZm9yIGludGVybmFsIHN0b3JhZ2Ugb2Ygbm9uc3ltbWV0cmljIEhlc3NlbmJlcmcgZm9ybS5cbiAgICAgIHRoaXMub3J0ID0gbmV3IEFycmF5VHlwZSggbiApOyAvLyAvLyBXb3JraW5nIHN0b3JhZ2UgZm9yIG5vbnN5bW1ldHJpYyBhbGdvcml0aG0uXG5cbiAgICAgIGZvciAoIGogPSAwOyBqIDwgbjsgaisrICkge1xuICAgICAgICBmb3IgKCBpID0gMDsgaSA8IG47IGkrKyApIHtcbiAgICAgICAgICB0aGlzLkhbIGkgKiB0aGlzLm4gKyBqIF0gPSBBWyBpICogdGhpcy5uICsgaiBdO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZHVjZSB0byBIZXNzZW5iZXJnIGZvcm0uXG4gICAgICB0aGlzLm9ydGhlcygpO1xuXG4gICAgICAvLyBSZWR1Y2UgSGVzc2VuYmVyZyB0byByZWFsIFNjaHVyIGZvcm0uXG4gICAgICB0aGlzLmhxcjIoKTtcbiAgICB9XG4gIH1cblxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3F1YXJlIGFycmF5IG9mIGFsbCBlaWdlbnZlY3RvcnMgYXJyYW5nZWQgaW4gYSBjb2x1bW5hciBmb3JtYXRcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJucyB7QXJyYXlUeXBlLjxudW1iZXI+fSAtIGEgbipuIG1hdHJpeFxuICAgKi9cbiAgZ2V0VigpIHtcbiAgICByZXR1cm4gdGhpcy5WLmNvcHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIHJlYWwgcGFydCBvZiB0aGUgZWlnZW52YWx1ZXNcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJucyB7QXJyYXlUeXBlLjxudW1iZXI+fSAtIGEgb25lIGRpbWVuc2lvbmFsIGFycmF5XG4gICAqL1xuICBnZXRSZWFsRWlnZW52YWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFycmF5IHRoYXQgY29udGFpbnMgdGhlIGltYWdpbmFyeSBwYXJ0cyBvZiB0aGUgZWlnZW52YWx1ZXNcbiAgICogQHB1YmxpY1xuICAgKiBAcmV0dXJucyB7QXJyYXlUeXBlLjxudW1iZXI+fSAtIGEgb25lIGRpbWVuc2lvbmFsIGFycmF5XG4gICAqL1xuICBnZXRJbWFnRWlnZW52YWx1ZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm4gdGhlIGJsb2NrIGRpYWdvbmFsIGVpZ2VudmFsdWUgbWF0cml4XG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybnMge01hdHJpeH0gLSBhIG4gKiBuIG1hdHJpeFxuICAgKi9cbiAgZ2V0RCgpIHtcbiAgICBjb25zdCBuID0gdGhpcy5uO1xuICAgIGNvbnN0IGQgPSB0aGlzLmQ7XG4gICAgY29uc3QgZSA9IHRoaXMuZTtcblxuICAgIGNvbnN0IFggPSBuZXcgTWF0cml4KCBuLCBuICk7XG4gICAgY29uc3QgRCA9IFguZW50cmllcztcbiAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBuOyBpKysgKSB7XG4gICAgICBmb3IgKCBsZXQgaiA9IDA7IGogPCBuOyBqKysgKSB7XG4gICAgICAgIERbIGkgKiB0aGlzLm4gKyBqIF0gPSAwLjA7XG4gICAgICB9XG4gICAgICBEWyBpICogdGhpcy5uICsgaSBdID0gZFsgaSBdO1xuICAgICAgaWYgKCBlWyBpIF0gPiAwICkge1xuICAgICAgICBEWyBpICogdGhpcy5uICsgaSArIDEgXSA9IGVbIGkgXTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCBlWyBpIF0gPCAwICkge1xuICAgICAgICBEWyBpICogdGhpcy5uICsgaSAtIDEgXSA9IGVbIGkgXTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIFg7XG4gIH1cblxuICAvKipcbiAgICogU3ltbWV0cmljIEhvdXNlaG9sZGVyIHJlZHVjdGlvbiB0byB0cmlkaWFnb25hbCBmb3JtLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHJlZDIoKSB7XG4gICAgY29uc3QgbiA9IHRoaXMubjtcbiAgICBjb25zdCBWID0gdGhpcy5WO1xuICAgIGNvbnN0IGQgPSB0aGlzLmQ7XG4gICAgY29uc3QgZSA9IHRoaXMuZTtcbiAgICBsZXQgaTtcbiAgICBsZXQgajtcbiAgICBsZXQgaztcbiAgICBsZXQgZjtcbiAgICBsZXQgZztcbiAgICBsZXQgaDtcblxuICAgIC8vICBUaGlzIGlzIGRlcml2ZWQgZnJvbSB0aGUgQWxnb2wgcHJvY2VkdXJlcyB0cmVkMiBieVxuICAgIC8vICBCb3dkbGVyLCBNYXJ0aW4sIFJlaW5zY2gsIGFuZCBXaWxraW5zb24sIEhhbmRib29rIGZvclxuICAgIC8vICBBdXRvLiBDb21wLiwgVm9sLmlpLUxpbmVhciBBbGdlYnJhLCBhbmQgdGhlIGNvcnJlc3BvbmRpbmdcbiAgICAvLyAgRm9ydHJhbiBzdWJyb3V0aW5lIGluIEVJU1BBQ0suXG5cbiAgICBmb3IgKCBqID0gMDsgaiA8IG47IGorKyApIHtcbiAgICAgIGRbIGogXSA9IFZbICggbiAtIDEgKSAqIG4gKyBqIF07XG4gICAgfVxuXG4gICAgLy8gSG91c2Vob2xkZXIgcmVkdWN0aW9uIHRvIHRyaWRpYWdvbmFsIGZvcm0uXG5cbiAgICBmb3IgKCBpID0gbiAtIDE7IGkgPiAwOyBpLS0gKSB7XG5cbiAgICAgIC8vIFNjYWxlIHRvIGF2b2lkIHVuZGVyL292ZXJmbG93LlxuXG4gICAgICBsZXQgc2NhbGUgPSAwLjA7XG4gICAgICBoID0gMC4wO1xuICAgICAgZm9yICggayA9IDA7IGsgPCBpOyBrKysgKSB7XG4gICAgICAgIHNjYWxlID0gc2NhbGUgKyBNYXRoLmFicyggZFsgayBdICk7XG4gICAgICB9XG4gICAgICBpZiAoIHNjYWxlID09PSAwLjAgKSB7XG4gICAgICAgIGVbIGkgXSA9IGRbIGkgLSAxIF07XG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgaTsgaisrICkge1xuICAgICAgICAgIGRbIGogXSA9IFZbICggaSAtIDEgKSAqIG4gKyBqIF07XG4gICAgICAgICAgVlsgaSAqIHRoaXMubiArIGogXSA9IDAuMDtcbiAgICAgICAgICBWWyBqICogdGhpcy5uICsgaSBdID0gMC4wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBlbHNlIHtcblxuICAgICAgICAvLyBHZW5lcmF0ZSBIb3VzZWhvbGRlciB2ZWN0b3IuXG5cbiAgICAgICAgZm9yICggayA9IDA7IGsgPCBpOyBrKysgKSB7XG4gICAgICAgICAgZFsgayBdIC89IHNjYWxlO1xuICAgICAgICAgIGggKz0gZFsgayBdICogZFsgayBdO1xuICAgICAgICB9XG4gICAgICAgIGYgPSBkWyBpIC0gMSBdO1xuICAgICAgICBnID0gTWF0aC5zcXJ0KCBoICk7XG4gICAgICAgIGlmICggZiA+IDAgKSB7XG4gICAgICAgICAgZyA9IC1nO1xuICAgICAgICB9XG4gICAgICAgIGVbIGkgXSA9IHNjYWxlICogZztcbiAgICAgICAgaCA9IGggLSBmICogZztcbiAgICAgICAgZFsgaSAtIDEgXSA9IGYgLSBnO1xuICAgICAgICBmb3IgKCBqID0gMDsgaiA8IGk7IGorKyApIHtcbiAgICAgICAgICBlWyBqIF0gPSAwLjA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBcHBseSBzaW1pbGFyaXR5IHRyYW5zZm9ybWF0aW9uIHRvIHJlbWFpbmluZyBjb2x1bW5zLlxuXG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgaTsgaisrICkge1xuICAgICAgICAgIGYgPSBkWyBqIF07XG4gICAgICAgICAgVlsgaiAqIHRoaXMubiArIGkgXSA9IGY7XG4gICAgICAgICAgZyA9IGVbIGogXSArIFZbIGogKiBuICsgaiBdICogZjtcbiAgICAgICAgICBmb3IgKCBrID0gaiArIDE7IGsgPD0gaSAtIDE7IGsrKyApIHtcbiAgICAgICAgICAgIGcgKz0gVlsgayAqIG4gKyBqIF0gKiBkWyBrIF07XG4gICAgICAgICAgICBlWyBrIF0gKz0gVlsgayAqIG4gKyBqIF0gKiBmO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlWyBqIF0gPSBnO1xuICAgICAgICB9XG4gICAgICAgIGYgPSAwLjA7XG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgaTsgaisrICkge1xuICAgICAgICAgIGVbIGogXSAvPSBoO1xuICAgICAgICAgIGYgKz0gZVsgaiBdICogZFsgaiBdO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGhoID0gZiAvICggaCArIGggKTtcbiAgICAgICAgZm9yICggaiA9IDA7IGogPCBpOyBqKysgKSB7XG4gICAgICAgICAgZVsgaiBdIC09IGhoICogZFsgaiBdO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgaTsgaisrICkge1xuICAgICAgICAgIGYgPSBkWyBqIF07XG4gICAgICAgICAgZyA9IGVbIGogXTtcbiAgICAgICAgICBmb3IgKCBrID0gajsgayA8PSBpIC0gMTsgaysrICkge1xuICAgICAgICAgICAgVlsgayAqIG4gKyBqIF0gLT0gKCBmICogZVsgayBdICsgZyAqIGRbIGsgXSApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkWyBqIF0gPSBWWyAoIGkgLSAxICkgKiBuICsgaiBdO1xuICAgICAgICAgIFZbIGkgKiB0aGlzLm4gKyBqIF0gPSAwLjA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGRbIGkgXSA9IGg7XG4gICAgfVxuXG4gICAgLy8gQWNjdW11bGF0ZSB0cmFuc2Zvcm1hdGlvbnMuXG5cbiAgICBmb3IgKCBpID0gMDsgaSA8IG4gLSAxOyBpKysgKSB7XG4gICAgICBWWyAoIG4gLSAxICkgKiBuICsgaSBdID0gVlsgaSAqIG4gKyBpIF07XG4gICAgICBWWyBpICogbiArIGkgXSA9IDEuMDtcbiAgICAgIGggPSBkWyBpICsgMSBdO1xuICAgICAgaWYgKCBoICE9PSAwLjAgKSB7XG4gICAgICAgIGZvciAoIGsgPSAwOyBrIDw9IGk7IGsrKyApIHtcbiAgICAgICAgICBkWyBrIF0gPSBWWyBrICogbiArICggaSArIDEgKSBdIC8gaDtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKCBqID0gMDsgaiA8PSBpOyBqKysgKSB7XG4gICAgICAgICAgZyA9IDAuMDtcbiAgICAgICAgICBmb3IgKCBrID0gMDsgayA8PSBpOyBrKysgKSB7XG4gICAgICAgICAgICBnICs9IFZbIGsgKiBuICsgKCBpICsgMSApIF0gKiBWWyBrICogbiArIGogXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yICggayA9IDA7IGsgPD0gaTsgaysrICkge1xuICAgICAgICAgICAgVlsgayAqIG4gKyBqIF0gLT0gZyAqIGRbIGsgXTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGZvciAoIGsgPSAwOyBrIDw9IGk7IGsrKyApIHtcbiAgICAgICAgVlsgayAqIG4gKyAoIGkgKyAxICkgXSA9IDAuMDtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yICggaiA9IDA7IGogPCBuOyBqKysgKSB7XG4gICAgICBkWyBqIF0gPSBWWyAoIG4gLSAxICkgKiBuICsgaiBdO1xuICAgICAgVlsgKCBuIC0gMSApICogbiArIGogXSA9IDAuMDtcbiAgICB9XG4gICAgVlsgKCBuIC0gMSApICogbiArICggbiAtIDEgKSBdID0gMS4wO1xuICAgIGVbIDAgXSA9IDAuMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTeW1tZXRyaWMgdHJpZGlhZ29uYWwgUUwgYWxnb3JpdGhtLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgdHFsMigpIHtcbiAgICBjb25zdCBuID0gdGhpcy5uO1xuICAgIGNvbnN0IFYgPSB0aGlzLlY7XG4gICAgY29uc3QgZCA9IHRoaXMuZDtcbiAgICBjb25zdCBlID0gdGhpcy5lO1xuICAgIGxldCBpO1xuICAgIGxldCBqO1xuICAgIGxldCBrO1xuICAgIGxldCBsO1xuICAgIGxldCBnO1xuICAgIGxldCBwO1xuICAgIGxldCBpdGVyO1xuXG4gICAgLy8gIFRoaXMgaXMgZGVyaXZlZCBmcm9tIHRoZSBBbGdvbCBwcm9jZWR1cmVzIHRxbDIsIGJ5XG4gICAgLy8gIEJvd2RsZXIsIE1hcnRpbiwgUmVpbnNjaCwgYW5kIFdpbGtpbnNvbiwgSGFuZGJvb2sgZm9yXG4gICAgLy8gIEF1dG8uIENvbXAuLCBWb2wuaWktTGluZWFyIEFsZ2VicmEsIGFuZCB0aGUgY29ycmVzcG9uZGluZ1xuICAgIC8vICBGb3J0cmFuIHN1YnJvdXRpbmUgaW4gRUlTUEFDSy5cblxuICAgIGZvciAoIGkgPSAxOyBpIDwgbjsgaSsrICkge1xuICAgICAgZVsgaSAtIDEgXSA9IGVbIGkgXTtcbiAgICB9XG4gICAgZVsgbiAtIDEgXSA9IDAuMDtcblxuICAgIGxldCBmID0gMC4wO1xuICAgIGxldCB0c3QxID0gMC4wO1xuICAgIGNvbnN0IGVwcyA9IE1hdGgucG93KCAyLjAsIC01Mi4wICk7XG4gICAgZm9yICggbCA9IDA7IGwgPCBuOyBsKysgKSB7XG5cbiAgICAgIC8vIEZpbmQgc21hbGwgc3ViZGlhZ29uYWwgZWxlbWVudFxuXG4gICAgICB0c3QxID0gTWF0aC5tYXgoIHRzdDEsIE1hdGguYWJzKCBkWyBsIF0gKSArIE1hdGguYWJzKCBlWyBsIF0gKSApO1xuICAgICAgbGV0IG0gPSBsO1xuICAgICAgd2hpbGUgKCBtIDwgbiApIHtcbiAgICAgICAgaWYgKCBNYXRoLmFicyggZVsgbSBdICkgPD0gZXBzICogdHN0MSApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBtKys7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG0gPT09IGwsIGRbbF0gaXMgYW4gZWlnZW52YWx1ZSxcbiAgICAgIC8vIG90aGVyd2lzZSwgaXRlcmF0ZS5cblxuICAgICAgaWYgKCBtID4gbCApIHtcbiAgICAgICAgaXRlciA9IDA7XG4gICAgICAgIGRvIHtcbiAgICAgICAgICBpdGVyID0gaXRlciArIDE7ICAvLyAoQ291bGQgY2hlY2sgaXRlcmF0aW9uIGNvdW50IGhlcmUuKVxuXG4gICAgICAgICAgLy8gQ29tcHV0ZSBpbXBsaWNpdCBzaGlmdFxuXG4gICAgICAgICAgZyA9IGRbIGwgXTtcbiAgICAgICAgICBwID0gKCBkWyBsICsgMSBdIC0gZyApIC8gKCAyLjAgKiBlWyBsIF0gKTtcbiAgICAgICAgICBsZXQgciA9IE1hdHJpeC5oeXBvdCggcCwgMS4wICk7XG4gICAgICAgICAgaWYgKCBwIDwgMCApIHtcbiAgICAgICAgICAgIHIgPSAtcjtcbiAgICAgICAgICB9XG4gICAgICAgICAgZFsgbCBdID0gZVsgbCBdIC8gKCBwICsgciApO1xuICAgICAgICAgIGRbIGwgKyAxIF0gPSBlWyBsIF0gKiAoIHAgKyByICk7XG4gICAgICAgICAgY29uc3QgZGwxID0gZFsgbCArIDEgXTtcbiAgICAgICAgICBsZXQgaCA9IGcgLSBkWyBsIF07XG4gICAgICAgICAgZm9yICggaSA9IGwgKyAyOyBpIDwgbjsgaSsrICkge1xuICAgICAgICAgICAgZFsgaSBdIC09IGg7XG4gICAgICAgICAgfVxuICAgICAgICAgIGYgPSBmICsgaDtcblxuICAgICAgICAgIC8vIEltcGxpY2l0IFFMIHRyYW5zZm9ybWF0aW9uLlxuXG4gICAgICAgICAgcCA9IGRbIG0gXTtcbiAgICAgICAgICBsZXQgYyA9IDEuMDtcbiAgICAgICAgICBsZXQgYzIgPSBjO1xuICAgICAgICAgIGxldCBjMyA9IGM7XG4gICAgICAgICAgY29uc3QgZWwxID0gZVsgbCArIDEgXTtcbiAgICAgICAgICBsZXQgcyA9IDAuMDtcbiAgICAgICAgICBsZXQgczIgPSAwLjA7XG4gICAgICAgICAgZm9yICggaSA9IG0gLSAxOyBpID49IGw7IGktLSApIHtcbiAgICAgICAgICAgIGMzID0gYzI7XG4gICAgICAgICAgICBjMiA9IGM7XG4gICAgICAgICAgICBzMiA9IHM7XG4gICAgICAgICAgICBnID0gYyAqIGVbIGkgXTtcbiAgICAgICAgICAgIGggPSBjICogcDtcbiAgICAgICAgICAgIHIgPSBNYXRyaXguaHlwb3QoIHAsIGVbIGkgXSApO1xuICAgICAgICAgICAgZVsgaSArIDEgXSA9IHMgKiByO1xuICAgICAgICAgICAgcyA9IGVbIGkgXSAvIHI7XG4gICAgICAgICAgICBjID0gcCAvIHI7XG4gICAgICAgICAgICBwID0gYyAqIGRbIGkgXSAtIHMgKiBnO1xuICAgICAgICAgICAgZFsgaSArIDEgXSA9IGggKyBzICogKCBjICogZyArIHMgKiBkWyBpIF0gKTtcblxuICAgICAgICAgICAgLy8gQWNjdW11bGF0ZSB0cmFuc2Zvcm1hdGlvbi5cblxuICAgICAgICAgICAgZm9yICggayA9IDA7IGsgPCBuOyBrKysgKSB7XG4gICAgICAgICAgICAgIGggPSBWWyBrICogbiArICggaSArIDEgKSBdO1xuICAgICAgICAgICAgICBWWyBrICogbiArICggaSArIDEgKSBdID0gcyAqIFZbIGsgKiBuICsgaSBdICsgYyAqIGg7XG4gICAgICAgICAgICAgIFZbIGsgKiBuICsgaSBdID0gYyAqIFZbIGsgKiBuICsgaSBdIC0gcyAqIGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHAgPSAtcyAqIHMyICogYzMgKiBlbDEgKiBlWyBsIF0gLyBkbDE7XG4gICAgICAgICAgZVsgbCBdID0gcyAqIHA7XG4gICAgICAgICAgZFsgbCBdID0gYyAqIHA7XG5cbiAgICAgICAgICAvLyBDaGVjayBmb3IgY29udmVyZ2VuY2UuXG5cbiAgICAgICAgfSB3aGlsZSAoIE1hdGguYWJzKCBlWyBsIF0gKSA+IGVwcyAqIHRzdDEgKTtcbiAgICAgIH1cbiAgICAgIGRbIGwgXSA9IGRbIGwgXSArIGY7XG4gICAgICBlWyBsIF0gPSAwLjA7XG4gICAgfVxuXG4gICAgLy8gU29ydCBlaWdlbnZhbHVlcyBhbmQgY29ycmVzcG9uZGluZyB2ZWN0b3JzLlxuXG4gICAgZm9yICggaSA9IDA7IGkgPCBuIC0gMTsgaSsrICkge1xuICAgICAgayA9IGk7XG4gICAgICBwID0gZFsgaSBdO1xuICAgICAgZm9yICggaiA9IGkgKyAxOyBqIDwgbjsgaisrICkge1xuICAgICAgICBpZiAoIGRbIGogXSA8IHAgKSB7XG4gICAgICAgICAgayA9IGo7XG4gICAgICAgICAgcCA9IGRbIGogXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKCBrICE9PSBpICkge1xuICAgICAgICBkWyBrIF0gPSBkWyBpIF07XG4gICAgICAgIGRbIGkgXSA9IHA7XG4gICAgICAgIGZvciAoIGogPSAwOyBqIDwgbjsgaisrICkge1xuICAgICAgICAgIHAgPSBWWyBqICogdGhpcy5uICsgaSBdO1xuICAgICAgICAgIFZbIGogKiB0aGlzLm4gKyBpIF0gPSBWWyBqICogbiArIGsgXTtcbiAgICAgICAgICBWWyBqICogbiArIGsgXSA9IHA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogIE5vbnN5bW1ldHJpYyByZWR1Y3Rpb24gdG8gSGVzc2VuYmVyZyBmb3JtLlxuICAgKiAgQHByaXZhdGVcbiAgICovXG4gIG9ydGhlcygpIHtcbiAgICBjb25zdCBuID0gdGhpcy5uO1xuICAgIGNvbnN0IFYgPSB0aGlzLlY7XG4gICAgY29uc3QgSCA9IHRoaXMuSDtcbiAgICBjb25zdCBvcnQgPSB0aGlzLm9ydDtcbiAgICBsZXQgaTtcbiAgICBsZXQgajtcbiAgICBsZXQgbTtcbiAgICBsZXQgZjtcbiAgICBsZXQgZztcblxuICAgIC8vICBUaGlzIGlzIGRlcml2ZWQgZnJvbSB0aGUgQWxnb2wgcHJvY2VkdXJlcyBvcnRoZXMgYW5kIG9ydHJhbixcbiAgICAvLyAgYnkgTWFydGluIGFuZCBXaWxraW5zb24sIEhhbmRib29rIGZvciBBdXRvLiBDb21wLixcbiAgICAvLyAgVm9sLmlpLUxpbmVhciBBbGdlYnJhLCBhbmQgdGhlIGNvcnJlc3BvbmRpbmdcbiAgICAvLyAgRm9ydHJhbiBzdWJyb3V0aW5lcyBpbiBFSVNQQUNLLlxuXG4gICAgY29uc3QgbG93ID0gMDtcbiAgICBjb25zdCBoaWdoID0gbiAtIDE7XG5cbiAgICBmb3IgKCBtID0gbG93ICsgMTsgbSA8PSBoaWdoIC0gMTsgbSsrICkge1xuXG4gICAgICAvLyBTY2FsZSBjb2x1bW4uXG5cbiAgICAgIGxldCBzY2FsZSA9IDAuMDtcbiAgICAgIGZvciAoIGkgPSBtOyBpIDw9IGhpZ2g7IGkrKyApIHtcbiAgICAgICAgc2NhbGUgPSBzY2FsZSArIE1hdGguYWJzKCBIWyBpICogbiArICggbSAtIDEgKSBdICk7XG4gICAgICB9XG4gICAgICBpZiAoIHNjYWxlICE9PSAwLjAgKSB7XG5cbiAgICAgICAgLy8gQ29tcHV0ZSBIb3VzZWhvbGRlciB0cmFuc2Zvcm1hdGlvbi5cblxuICAgICAgICBsZXQgaCA9IDAuMDtcbiAgICAgICAgZm9yICggaSA9IGhpZ2g7IGkgPj0gbTsgaS0tICkge1xuICAgICAgICAgIG9ydFsgaSBdID0gSFsgaSAqIG4gKyAoIG0gLSAxICkgXSAvIHNjYWxlO1xuICAgICAgICAgIGggKz0gb3J0WyBpIF0gKiBvcnRbIGkgXTtcbiAgICAgICAgfVxuICAgICAgICBnID0gTWF0aC5zcXJ0KCBoICk7XG4gICAgICAgIGlmICggb3J0WyBtIF0gPiAwICkge1xuICAgICAgICAgIGcgPSAtZztcbiAgICAgICAgfVxuICAgICAgICBoID0gaCAtIG9ydFsgbSBdICogZztcbiAgICAgICAgb3J0WyBtIF0gPSBvcnRbIG0gXSAtIGc7XG5cbiAgICAgICAgLy8gQXBwbHkgSG91c2Vob2xkZXIgc2ltaWxhcml0eSB0cmFuc2Zvcm1hdGlvblxuICAgICAgICAvLyBIID0gKEktdSp1Jy9oKSpIKihJLXUqdScpL2gpXG5cbiAgICAgICAgZm9yICggaiA9IG07IGogPCBuOyBqKysgKSB7XG4gICAgICAgICAgZiA9IDAuMDtcbiAgICAgICAgICBmb3IgKCBpID0gaGlnaDsgaSA+PSBtOyBpLS0gKSB7XG4gICAgICAgICAgICBmICs9IG9ydFsgaSBdICogSFsgaSAqIHRoaXMubiArIGogXTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZiA9IGYgLyBoO1xuICAgICAgICAgIGZvciAoIGkgPSBtOyBpIDw9IGhpZ2g7IGkrKyApIHtcbiAgICAgICAgICAgIEhbIGkgKiB0aGlzLm4gKyBqIF0gLT0gZiAqIG9ydFsgaSBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoIGkgPSAwOyBpIDw9IGhpZ2g7IGkrKyApIHtcbiAgICAgICAgICBmID0gMC4wO1xuICAgICAgICAgIGZvciAoIGogPSBoaWdoOyBqID49IG07IGotLSApIHtcbiAgICAgICAgICAgIGYgKz0gb3J0WyBqIF0gKiBIWyBpICogdGhpcy5uICsgaiBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmID0gZiAvIGg7XG4gICAgICAgICAgZm9yICggaiA9IG07IGogPD0gaGlnaDsgaisrICkge1xuICAgICAgICAgICAgSFsgaSAqIHRoaXMubiArIGogXSAtPSBmICogb3J0WyBqIF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIG9ydFsgbSBdID0gc2NhbGUgKiBvcnRbIG0gXTtcbiAgICAgICAgSFsgbSAqIG4gKyAoIG0gLSAxICkgXSA9IHNjYWxlICogZztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBY2N1bXVsYXRlIHRyYW5zZm9ybWF0aW9ucyAoQWxnb2wncyBvcnRyYW4pLlxuXG4gICAgZm9yICggaSA9IDA7IGkgPCBuOyBpKysgKSB7XG4gICAgICBmb3IgKCBqID0gMDsgaiA8IG47IGorKyApIHtcbiAgICAgICAgVlsgaSAqIHRoaXMubiArIGogXSA9ICggaSA9PT0gaiA/IDEuMCA6IDAuMCApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoIG0gPSBoaWdoIC0gMTsgbSA+PSBsb3cgKyAxOyBtLS0gKSB7XG4gICAgICBpZiAoIEhbIG0gKiBuICsgKCBtIC0gMSApIF0gIT09IDAuMCApIHtcbiAgICAgICAgZm9yICggaSA9IG0gKyAxOyBpIDw9IGhpZ2g7IGkrKyApIHtcbiAgICAgICAgICBvcnRbIGkgXSA9IEhbIGkgKiBuICsgKCBtIC0gMSApIF07XG4gICAgICAgIH1cbiAgICAgICAgZm9yICggaiA9IG07IGogPD0gaGlnaDsgaisrICkge1xuICAgICAgICAgIGcgPSAwLjA7XG4gICAgICAgICAgZm9yICggaSA9IG07IGkgPD0gaGlnaDsgaSsrICkge1xuICAgICAgICAgICAgZyArPSBvcnRbIGkgXSAqIFZbIGkgKiB0aGlzLm4gKyBqIF07XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIERvdWJsZSBkaXZpc2lvbiBhdm9pZHMgcG9zc2libGUgdW5kZXJmbG93XG4gICAgICAgICAgZyA9ICggZyAvIG9ydFsgbSBdICkgLyBIWyBtICogbiArICggbSAtIDEgKSBdO1xuICAgICAgICAgIGZvciAoIGkgPSBtOyBpIDw9IGhpZ2g7IGkrKyApIHtcbiAgICAgICAgICAgIFZbIGkgKiB0aGlzLm4gKyBqIF0gKz0gZyAqIG9ydFsgaSBdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb21wbGV4IHNjYWxhciBkaXZpc2lvbi5cbiAgICogQHByaXZhdGVcbiAgICpcbiAgICogQHBhcmFtIHsqfSB4clxuICAgKiBAcGFyYW0geyp9IHhpXG4gICAqIEBwYXJhbSB7Kn0geXJcbiAgICogQHBhcmFtIHsqfSB5aVxuICAgKi9cbiAgY2RpdiggeHIsIHhpLCB5ciwgeWkgKSB7XG4gICAgbGV0IHI7XG4gICAgbGV0IGQ7XG4gICAgaWYgKCBNYXRoLmFicyggeXIgKSA+IE1hdGguYWJzKCB5aSApICkge1xuICAgICAgciA9IHlpIC8geXI7XG4gICAgICBkID0geXIgKyByICogeWk7XG4gICAgICB0aGlzLmNkaXZyID0gKCB4ciArIHIgKiB4aSApIC8gZDtcbiAgICAgIHRoaXMuY2RpdmkgPSAoIHhpIC0gciAqIHhyICkgLyBkO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHIgPSB5ciAvIHlpO1xuICAgICAgZCA9IHlpICsgciAqIHlyO1xuICAgICAgdGhpcy5jZGl2ciA9ICggciAqIHhyICsgeGkgKSAvIGQ7XG4gICAgICB0aGlzLmNkaXZpID0gKCByICogeGkgLSB4ciApIC8gZDtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBtZXRob2RzIGZpbmRzIHRoZSBlaWdlbnZhbHVlcyBhbmQgZWlnZW52ZWN0b3JzXG4gICAqIG9mIGEgcmVhbCB1cHBlciBoZXNzZW5iZXJnIG1hdHJpeCBieSB0aGUgUVIgYWxnb3JpdGhtXG4gICAqXG4gICAqIE5vbnN5bW1ldHJpYyByZWR1Y3Rpb24gZnJvbSBIZXNzZW5iZXJnIHRvIHJlYWwgU2NodXIgZm9ybS5cbiAgICogaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvUVJfYWxnb3JpdGhtXG4gICAqXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBocXIyKCkge1xuICAgIGxldCBuO1xuICAgIGNvbnN0IFYgPSB0aGlzLlY7XG4gICAgY29uc3QgZCA9IHRoaXMuZDtcbiAgICBjb25zdCBlID0gdGhpcy5lO1xuICAgIGNvbnN0IEggPSB0aGlzLkg7XG4gICAgbGV0IGk7XG4gICAgbGV0IGo7XG4gICAgbGV0IGs7XG4gICAgbGV0IGw7XG4gICAgbGV0IG07XG4gICAgbGV0IGl0ZXI7XG5cbiAgICAvLyAgVGhpcyBpcyBkZXJpdmVkIGZyb20gdGhlIEFsZ29sIHByb2NlZHVyZSBocXIyLFxuICAgIC8vICBieSBNYXJ0aW4gYW5kIFdpbGtpbnNvbiwgSGFuZGJvb2sgZm9yIEF1dG8uIENvbXAuLFxuICAgIC8vICBWb2wuaWktTGluZWFyIEFsZ2VicmEsIGFuZCB0aGUgY29ycmVzcG9uZGluZ1xuICAgIC8vICBGb3J0cmFuIHN1YnJvdXRpbmUgaW4gRUlTUEFDSy5cblxuICAgIC8vIEluaXRpYWxpemVcblxuICAgIGNvbnN0IG5uID0gdGhpcy5uO1xuICAgIG4gPSBubiAtIDE7XG4gICAgY29uc3QgbG93ID0gMDtcbiAgICBjb25zdCBoaWdoID0gbm4gLSAxO1xuICAgIGNvbnN0IGVwcyA9IE1hdGgucG93KCAyLjAsIC01Mi4wICk7XG4gICAgbGV0IGV4c2hpZnQgPSAwLjA7XG4gICAgbGV0IHAgPSAwO1xuICAgIGxldCBxID0gMDtcbiAgICBsZXQgciA9IDA7XG4gICAgbGV0IHMgPSAwO1xuICAgIGxldCB6ID0gMDtcbiAgICBsZXQgdDtcbiAgICBsZXQgdztcbiAgICBsZXQgeDtcbiAgICBsZXQgeTtcblxuICAgIC8vIFN0b3JlIHJvb3RzIGlzb2xhdGVkIGJ5IGJhbGFuYyBhbmQgY29tcHV0ZSBtYXRyaXggbm9ybVxuXG4gICAgbGV0IG5vcm0gPSAwLjA7XG4gICAgZm9yICggaSA9IDA7IGkgPCBubjsgaSsrICkge1xuICAgICAgaWYgKCBpIDwgbG93IHx8IGkgPiBoaWdoICkge1xuICAgICAgICBkWyBpIF0gPSBIWyBpICogbiArIGkgXTtcbiAgICAgICAgZVsgaSBdID0gMC4wO1xuICAgICAgfVxuICAgICAgZm9yICggaiA9IE1hdGgubWF4KCBpIC0gMSwgMCApOyBqIDwgbm47IGorKyApIHtcbiAgICAgICAgbm9ybSA9IG5vcm0gKyBNYXRoLmFicyggSFsgaSAqIHRoaXMubiArIGogXSApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE91dGVyIGxvb3Agb3ZlciBlaWdlbnZhbHVlIGluZGV4XG5cbiAgICBpdGVyID0gMDtcbiAgICB3aGlsZSAoIG4gPj0gbG93ICkge1xuXG4gICAgICAvLyBMb29rIGZvciBzaW5nbGUgc21hbGwgc3ViLWRpYWdvbmFsIGVsZW1lbnRcblxuICAgICAgbCA9IG47XG4gICAgICB3aGlsZSAoIGwgPiBsb3cgKSB7XG4gICAgICAgIHMgPSBNYXRoLmFicyggSFsgKCBsIC0gMSApICogbiArICggbCAtIDEgKSBdICkgKyBNYXRoLmFicyggSFsgbCAqIG4gKyBsIF0gKTtcbiAgICAgICAgaWYgKCBzID09PSAwLjAgKSB7XG4gICAgICAgICAgcyA9IG5vcm07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCBNYXRoLmFicyggSFsgbCAqIG4gKyAoIGwgLSAxICkgXSApIDwgZXBzICogcyApIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBsLS07XG4gICAgICB9XG5cbiAgICAgIC8vIENoZWNrIGZvciBjb252ZXJnZW5jZVxuICAgICAgLy8gT25lIHJvb3QgZm91bmRcblxuICAgICAgaWYgKCBsID09PSBuICkge1xuICAgICAgICBIWyBuICogbiArIG4gXSA9IEhbIG4gKiBuICsgbiBdICsgZXhzaGlmdDtcbiAgICAgICAgZFsgbiBdID0gSFsgbiAqIG4gKyBuIF07XG4gICAgICAgIGVbIG4gXSA9IDAuMDtcbiAgICAgICAgbi0tO1xuICAgICAgICBpdGVyID0gMDtcblxuICAgICAgICAvLyBUd28gcm9vdHMgZm91bmRcblxuICAgICAgfVxuICAgICAgZWxzZSBpZiAoIGwgPT09IG4gLSAxICkge1xuICAgICAgICB3ID0gSFsgbiAqIG4gKyBuIC0gMSBdICogSFsgKCBuIC0gMSApICogbiArIG4gXTtcbiAgICAgICAgcCA9ICggSFsgKCBuIC0gMSApICogbiArICggbiAtIDEgKSBdIC0gSFsgbiAqIG4gKyBuIF0gKSAvIDIuMDtcbiAgICAgICAgcSA9IHAgKiBwICsgdztcbiAgICAgICAgeiA9IE1hdGguc3FydCggTWF0aC5hYnMoIHEgKSApO1xuICAgICAgICBIWyBuICogbiArIG4gXSA9IEhbIG4gKiBuICsgbiBdICsgZXhzaGlmdDtcbiAgICAgICAgSFsgKCBuIC0gMSApICogbiArICggbiAtIDEgKSBdID0gSFsgKCBuIC0gMSApICogbiArICggbiAtIDEgKSBdICsgZXhzaGlmdDtcbiAgICAgICAgeCA9IEhbIG4gKiBuICsgbiBdO1xuXG4gICAgICAgIC8vIFJlYWwgcGFpclxuXG4gICAgICAgIGlmICggcSA+PSAwICkge1xuICAgICAgICAgIGlmICggcCA+PSAwICkge1xuICAgICAgICAgICAgeiA9IHAgKyB6O1xuICAgICAgICAgIH1cbiAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHogPSBwIC0gejtcbiAgICAgICAgICB9XG4gICAgICAgICAgZFsgbiAtIDEgXSA9IHggKyB6O1xuICAgICAgICAgIGRbIG4gXSA9IGRbIG4gLSAxIF07XG4gICAgICAgICAgaWYgKCB6ICE9PSAwLjAgKSB7XG4gICAgICAgICAgICBkWyBuIF0gPSB4IC0gdyAvIHo7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVbIG4gLSAxIF0gPSAwLjA7XG4gICAgICAgICAgZVsgbiBdID0gMC4wO1xuICAgICAgICAgIHggPSBIWyBuICogbiArIG4gLSAxIF07XG4gICAgICAgICAgcyA9IE1hdGguYWJzKCB4ICkgKyBNYXRoLmFicyggeiApO1xuICAgICAgICAgIHAgPSB4IC8gcztcbiAgICAgICAgICBxID0geiAvIHM7XG4gICAgICAgICAgciA9IE1hdGguc3FydCggcCAqIHAgKyBxICogcSApO1xuICAgICAgICAgIHAgPSBwIC8gcjtcbiAgICAgICAgICBxID0gcSAvIHI7XG5cbiAgICAgICAgICAvLyBSb3cgbW9kaWZpY2F0aW9uXG5cbiAgICAgICAgICBmb3IgKCBqID0gbiAtIDE7IGogPCBubjsgaisrICkge1xuICAgICAgICAgICAgeiA9IEhbICggbiAtIDEgKSAqIG4gKyBqIF07XG4gICAgICAgICAgICBIWyAoIG4gLSAxICkgKiBuICsgaiBdID0gcSAqIHogKyBwICogSFsgbiAqIG4gKyBqIF07XG4gICAgICAgICAgICBIWyBuICogbiArIGogXSA9IHEgKiBIWyBuICogbiArIGogXSAtIHAgKiB6O1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENvbHVtbiBtb2RpZmljYXRpb25cblxuICAgICAgICAgIGZvciAoIGkgPSAwOyBpIDw9IG47IGkrKyApIHtcbiAgICAgICAgICAgIHogPSBIWyBpICogbiArIG4gLSAxIF07XG4gICAgICAgICAgICBIWyBpICogbiArIG4gLSAxIF0gPSBxICogeiArIHAgKiBIWyBpICogbiArIG4gXTtcbiAgICAgICAgICAgIEhbIGkgKiBuICsgbiBdID0gcSAqIEhbIGkgKiBuICsgbiBdIC0gcCAqIHo7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQWNjdW11bGF0ZSB0cmFuc2Zvcm1hdGlvbnNcblxuICAgICAgICAgIGZvciAoIGkgPSBsb3c7IGkgPD0gaGlnaDsgaSsrICkge1xuICAgICAgICAgICAgeiA9IFZbIGkgKiBuICsgbiAtIDEgXTtcbiAgICAgICAgICAgIFZbIGkgKiBuICsgbiAtIDEgXSA9IHEgKiB6ICsgcCAqIFZbIGkgKiBuICsgbiBdO1xuICAgICAgICAgICAgVlsgaSAqIG4gKyBuIF0gPSBxICogVlsgaSAqIG4gKyBuIF0gLSBwICogejtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDb21wbGV4IHBhaXJcblxuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIGRbIG4gLSAxIF0gPSB4ICsgcDtcbiAgICAgICAgICBkWyBuIF0gPSB4ICsgcDtcbiAgICAgICAgICBlWyBuIC0gMSBdID0gejtcbiAgICAgICAgICBlWyBuIF0gPSAtejtcbiAgICAgICAgfVxuICAgICAgICBuID0gbiAtIDI7XG4gICAgICAgIGl0ZXIgPSAwO1xuXG4gICAgICAgIC8vIE5vIGNvbnZlcmdlbmNlIHlldFxuXG4gICAgICB9XG4gICAgICBlbHNlIHtcblxuICAgICAgICAvLyBGb3JtIHNoaWZ0XG5cbiAgICAgICAgeCA9IEhbIG4gKiBuICsgbiBdO1xuICAgICAgICB5ID0gMC4wO1xuICAgICAgICB3ID0gMC4wO1xuICAgICAgICBpZiAoIGwgPCBuICkge1xuICAgICAgICAgIHkgPSBIWyAoIG4gLSAxICkgKiBuICsgKCBuIC0gMSApIF07XG4gICAgICAgICAgdyA9IEhbIG4gKiBuICsgbiAtIDEgXSAqIEhbICggbiAtIDEgKSAqIG4gKyBuIF07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXaWxraW5zb24ncyBvcmlnaW5hbCBhZCBob2Mgc2hpZnRcblxuICAgICAgICBpZiAoIGl0ZXIgPT09IDEwICkge1xuICAgICAgICAgIGV4c2hpZnQgKz0geDtcbiAgICAgICAgICBmb3IgKCBpID0gbG93OyBpIDw9IG47IGkrKyApIHtcbiAgICAgICAgICAgIEhbIGkgKiBuICsgaSBdIC09IHg7XG4gICAgICAgICAgfVxuICAgICAgICAgIHMgPSBNYXRoLmFicyggSFsgbiAqIG4gKyBuIC0gMSBdICkgKyBNYXRoLmFicyggSFsgKCBuIC0gMSApICogbiArIG4gLSAyIF0gKTtcbiAgICAgICAgICB4ID0geSA9IDAuNzUgKiBzO1xuICAgICAgICAgIHcgPSAtMC40Mzc1ICogcyAqIHM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBNQVRMQUIncyBuZXcgYWQgaG9jIHNoaWZ0XG5cbiAgICAgICAgaWYgKCBpdGVyID09PSAzMCApIHtcbiAgICAgICAgICBzID0gKCB5IC0geCApIC8gMi4wO1xuICAgICAgICAgIHMgPSBzICogcyArIHc7XG4gICAgICAgICAgaWYgKCBzID4gMCApIHtcbiAgICAgICAgICAgIHMgPSBNYXRoLnNxcnQoIHMgKTtcbiAgICAgICAgICAgIGlmICggeSA8IHggKSB7XG4gICAgICAgICAgICAgIHMgPSAtcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHMgPSB4IC0gdyAvICggKCB5IC0geCApIC8gMi4wICsgcyApO1xuICAgICAgICAgICAgZm9yICggaSA9IGxvdzsgaSA8PSBuOyBpKysgKSB7XG4gICAgICAgICAgICAgIEhbIGkgKiBuICsgaSBdIC09IHM7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBleHNoaWZ0ICs9IHM7XG4gICAgICAgICAgICB4ID0geSA9IHcgPSAwLjk2NDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpdGVyID0gaXRlciArIDE7ICAgLy8gKENvdWxkIGNoZWNrIGl0ZXJhdGlvbiBjb3VudCBoZXJlLilcblxuICAgICAgICAvLyBMb29rIGZvciB0d28gY29uc2VjdXRpdmUgc21hbGwgc3ViLWRpYWdvbmFsIGVsZW1lbnRzXG5cbiAgICAgICAgbSA9IG4gLSAyO1xuICAgICAgICB3aGlsZSAoIG0gPj0gbCApIHtcbiAgICAgICAgICB6ID0gSFsgbSAqIG4gKyBtIF07XG4gICAgICAgICAgciA9IHggLSB6O1xuICAgICAgICAgIHMgPSB5IC0gejtcbiAgICAgICAgICBwID0gKCByICogcyAtIHcgKSAvIEhbICggbSArIDEgKSAqIG4gKyBtIF0gKyBIWyBtICogbiArIG0gKyAxIF07XG4gICAgICAgICAgcSA9IEhbICggbSArIDEgKSAqIG4gKyBtICsgMSBdIC0geiAtIHIgLSBzO1xuICAgICAgICAgIHIgPSBIWyAoIG0gKyAyICkgKiBuICsgbSArIDEgXTtcbiAgICAgICAgICBzID0gTWF0aC5hYnMoIHAgKSArIE1hdGguYWJzKCBxICkgKyBNYXRoLmFicyggciApO1xuICAgICAgICAgIHAgPSBwIC8gcztcbiAgICAgICAgICBxID0gcSAvIHM7XG4gICAgICAgICAgciA9IHIgLyBzO1xuICAgICAgICAgIGlmICggbSA9PT0gbCApIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIE1hdGguYWJzKCBIWyBtICogbiArICggbSAtIDEgKSBdICkgKiAoIE1hdGguYWJzKCBxICkgKyBNYXRoLmFicyggciApICkgPFxuICAgICAgICAgICAgICAgZXBzICogKCBNYXRoLmFicyggcCApICogKCBNYXRoLmFicyggSFsgKCBtIC0gMSApICogbiArIG0gLSAxIF0gKSArIE1hdGguYWJzKCB6ICkgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyggSFsgKCBtICsgMSApICogbiArIG0gKyAxIF0gKSApICkgKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgbS0tO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICggaSA9IG0gKyAyOyBpIDw9IG47IGkrKyApIHtcbiAgICAgICAgICBIWyBpICogbiArIGkgLSAyIF0gPSAwLjA7XG4gICAgICAgICAgaWYgKCBpID4gbSArIDIgKSB7XG4gICAgICAgICAgICBIWyBpICogbiArIGkgLSAzIF0gPSAwLjA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gRG91YmxlIFFSIHN0ZXAgaW52b2x2aW5nIHJvd3MgbDpuIGFuZCBjb2x1bW5zIG06blxuXG4gICAgICAgIGZvciAoIGsgPSBtOyBrIDw9IG4gLSAxOyBrKysgKSB7XG4gICAgICAgICAgY29uc3Qgbm90bGFzdCA9ICggayAhPT0gbiAtIDEgKTtcbiAgICAgICAgICBpZiAoIGsgIT09IG0gKSB7XG4gICAgICAgICAgICBwID0gSFsgayAqIG4gKyBrIC0gMSBdO1xuICAgICAgICAgICAgcSA9IEhbICggayArIDEgKSAqIG4gKyBrIC0gMSBdO1xuICAgICAgICAgICAgciA9ICggbm90bGFzdCA/IEhbICggayArIDIgKSAqIG4gKyBrIC0gMSBdIDogMC4wICk7XG4gICAgICAgICAgICB4ID0gTWF0aC5hYnMoIHAgKSArIE1hdGguYWJzKCBxICkgKyBNYXRoLmFicyggciApO1xuICAgICAgICAgICAgaWYgKCB4ICE9PSAwLjAgKSB7XG4gICAgICAgICAgICAgIHAgPSBwIC8geDtcbiAgICAgICAgICAgICAgcSA9IHEgLyB4O1xuICAgICAgICAgICAgICByID0gciAvIHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggeCA9PT0gMC4wICkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHMgPSBNYXRoLnNxcnQoIHAgKiBwICsgcSAqIHEgKyByICogciApO1xuICAgICAgICAgIGlmICggcCA8IDAgKSB7XG4gICAgICAgICAgICBzID0gLXM7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggcyAhPT0gMCApIHtcbiAgICAgICAgICAgIGlmICggayAhPT0gbSApIHtcbiAgICAgICAgICAgICAgSFsgayAqIG4gKyBrIC0gMSBdID0gLXMgKiB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZiAoIGwgIT09IG0gKSB7XG4gICAgICAgICAgICAgIEhbIGsgKiBuICsgayAtIDEgXSA9IC1IWyBrICogbiArIGsgLSAxIF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwID0gcCArIHM7XG4gICAgICAgICAgICB4ID0gcCAvIHM7XG4gICAgICAgICAgICB5ID0gcSAvIHM7XG4gICAgICAgICAgICB6ID0gciAvIHM7XG4gICAgICAgICAgICBxID0gcSAvIHA7XG4gICAgICAgICAgICByID0gciAvIHA7XG5cbiAgICAgICAgICAgIC8vIFJvdyBtb2RpZmljYXRpb25cblxuICAgICAgICAgICAgZm9yICggaiA9IGs7IGogPCBubjsgaisrICkge1xuICAgICAgICAgICAgICBwID0gSFsgayAqIG4gKyBqIF0gKyBxICogSFsgKCBrICsgMSApICogbiArIGogXTtcbiAgICAgICAgICAgICAgaWYgKCBub3RsYXN0ICkge1xuICAgICAgICAgICAgICAgIHAgPSBwICsgciAqIEhbICggayArIDIgKSAqIG4gKyBqIF07XG4gICAgICAgICAgICAgICAgSFsgKCBrICsgMiApICogbiArIGogXSA9IEhbICggayArIDIgKSAqIG4gKyBqIF0gLSBwICogejtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBIWyBrICogbiArIGogXSA9IEhbIGsgKiBuICsgaiBdIC0gcCAqIHg7XG4gICAgICAgICAgICAgIEhbICggayArIDEgKSAqIG4gKyBqIF0gPSBIWyAoIGsgKyAxICkgKiBuICsgaiBdIC0gcCAqIHk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIENvbHVtbiBtb2RpZmljYXRpb25cblxuICAgICAgICAgICAgZm9yICggaSA9IDA7IGkgPD0gTWF0aC5taW4oIG4sIGsgKyAzICk7IGkrKyApIHtcbiAgICAgICAgICAgICAgcCA9IHggKiBIWyBpICogbiArIGsgXSArIHkgKiBIWyBpICogbiArIGsgKyAxIF07XG4gICAgICAgICAgICAgIGlmICggbm90bGFzdCApIHtcbiAgICAgICAgICAgICAgICBwID0gcCArIHogKiBIWyBpICogbiArIGsgKyAyIF07XG4gICAgICAgICAgICAgICAgSFsgaSAqIG4gKyBrICsgMiBdID0gSFsgaSAqIG4gKyBrICsgMiBdIC0gcCAqIHI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgSFsgaSAqIG4gKyBrIF0gPSBIWyBpICogbiArIGsgXSAtIHA7XG4gICAgICAgICAgICAgIEhbIGkgKiBuICsgayArIDEgXSA9IEhbIGkgKiBuICsgayArIDEgXSAtIHAgKiBxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBBY2N1bXVsYXRlIHRyYW5zZm9ybWF0aW9uc1xuXG4gICAgICAgICAgICBmb3IgKCBpID0gbG93OyBpIDw9IGhpZ2g7IGkrKyApIHtcbiAgICAgICAgICAgICAgcCA9IHggKiBWWyBpICogbiArIGsgXSArIHkgKiBWWyBpICogbiArIGsgKyAxIF07XG4gICAgICAgICAgICAgIGlmICggbm90bGFzdCApIHtcbiAgICAgICAgICAgICAgICBwID0gcCArIHogKiBWWyBpICogbiArIGsgKyAyIF07XG4gICAgICAgICAgICAgICAgVlsgaSAqIG4gKyBrICsgMiBdID0gVlsgaSAqIG4gKyBrICsgMiBdIC0gcCAqIHI7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgVlsgaSAqIG4gKyBrIF0gPSBWWyBpICogbiArIGsgXSAtIHA7XG4gICAgICAgICAgICAgIFZbIGkgKiBuICsgayArIDEgXSA9IFZbIGkgKiBuICsgayArIDEgXSAtIHAgKiBxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gIC8vIChzICE9PSAwKVxuICAgICAgICB9ICAvLyBrIGxvb3BcbiAgICAgIH0gIC8vIGNoZWNrIGNvbnZlcmdlbmNlXG4gICAgfSAgLy8gd2hpbGUgKG4gPj0gbG93KVxuXG4gICAgLy8gQmFja3N1YnN0aXR1dGUgdG8gZmluZCB2ZWN0b3JzIG9mIHVwcGVyIHRyaWFuZ3VsYXIgZm9ybVxuXG4gICAgaWYgKCBub3JtID09PSAwLjAgKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yICggbiA9IG5uIC0gMTsgbiA+PSAwOyBuLS0gKSB7XG4gICAgICBwID0gZFsgbiBdO1xuICAgICAgcSA9IGVbIG4gXTtcblxuICAgICAgLy8gUmVhbCB2ZWN0b3JcblxuICAgICAgaWYgKCBxID09PSAwICkge1xuICAgICAgICBsID0gbjtcbiAgICAgICAgSFsgbiAqIG4gKyBuIF0gPSAxLjA7XG4gICAgICAgIGZvciAoIGkgPSBuIC0gMTsgaSA+PSAwOyBpLS0gKSB7XG4gICAgICAgICAgdyA9IEhbIGkgKiBuICsgaSBdIC0gcDtcbiAgICAgICAgICByID0gMC4wO1xuICAgICAgICAgIGZvciAoIGogPSBsOyBqIDw9IG47IGorKyApIHtcbiAgICAgICAgICAgIHIgPSByICsgSFsgaSAqIHRoaXMubiArIGogXSAqIEhbIGogKiBuICsgbiBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIGVbIGkgXSA8IDAuMCApIHtcbiAgICAgICAgICAgIHogPSB3O1xuICAgICAgICAgICAgcyA9IHI7XG4gICAgICAgICAgfVxuICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgbCA9IGk7XG4gICAgICAgICAgICBpZiAoIGVbIGkgXSA9PT0gMC4wICkge1xuICAgICAgICAgICAgICBpZiAoIHcgIT09IDAuMCApIHtcbiAgICAgICAgICAgICAgICBIWyBpICogbiArIG4gXSA9IC1yIC8gdztcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBIWyBpICogbiArIG4gXSA9IC1yIC8gKCBlcHMgKiBub3JtICk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAvLyBTb2x2ZSByZWFsIGVxdWF0aW9uc1xuXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgeCA9IEhbIGkgKiBuICsgaSArIDEgXTtcbiAgICAgICAgICAgICAgeSA9IEhbICggaSArIDEgKSAqIG4gKyBpIF07XG4gICAgICAgICAgICAgIHEgPSAoIGRbIGkgXSAtIHAgKSAqICggZFsgaSBdIC0gcCApICsgZVsgaSBdICogZVsgaSBdO1xuICAgICAgICAgICAgICB0ID0gKCB4ICogcyAtIHogKiByICkgLyBxO1xuICAgICAgICAgICAgICBIWyBpICogbiArIG4gXSA9IHQ7XG4gICAgICAgICAgICAgIGlmICggTWF0aC5hYnMoIHggKSA+IE1hdGguYWJzKCB6ICkgKSB7XG4gICAgICAgICAgICAgICAgSFsgKCBpICsgMSApICogbiArIG4gXSA9ICggLXIgLSB3ICogdCApIC8geDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBIWyAoIGkgKyAxICkgKiBuICsgbiBdID0gKCAtcyAtIHkgKiB0ICkgLyB6O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE92ZXJmbG93IGNvbnRyb2xcblxuICAgICAgICAgICAgdCA9IE1hdGguYWJzKCBIWyBpICogbiArIG4gXSApO1xuICAgICAgICAgICAgaWYgKCAoIGVwcyAqIHQgKSAqIHQgPiAxICkge1xuICAgICAgICAgICAgICBmb3IgKCBqID0gaTsgaiA8PSBuOyBqKysgKSB7XG4gICAgICAgICAgICAgICAgSFsgaiAqIG4gKyBuIF0gPSBIWyBqICogbiArIG4gXSAvIHQ7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb21wbGV4IHZlY3RvclxuXG4gICAgICB9XG4gICAgICBlbHNlIGlmICggcSA8IDAgKSB7XG4gICAgICAgIGwgPSBuIC0gMTtcblxuICAgICAgICAvLyBMYXN0IHZlY3RvciBjb21wb25lbnQgaW1hZ2luYXJ5IHNvIG1hdHJpeCBpcyB0cmlhbmd1bGFyXG5cbiAgICAgICAgaWYgKCBNYXRoLmFicyggSFsgbiAqIG4gKyBuIC0gMSBdICkgPiBNYXRoLmFicyggSFsgKCBuIC0gMSApICogbiArIG4gXSApICkge1xuICAgICAgICAgIEhbICggbiAtIDEgKSAqIG4gKyAoIG4gLSAxICkgXSA9IHEgLyBIWyBuICogbiArIG4gLSAxIF07XG4gICAgICAgICAgSFsgKCBuIC0gMSApICogbiArIG4gXSA9IC0oIEhbIG4gKiBuICsgbiBdIC0gcCApIC8gSFsgbiAqIG4gKyBuIC0gMSBdO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRoaXMuY2RpdiggMC4wLCAtSFsgKCBuIC0gMSApICogbiArIG4gXSwgSFsgKCBuIC0gMSApICogbiArICggbiAtIDEgKSBdIC0gcCwgcSApO1xuICAgICAgICAgIEhbICggbiAtIDEgKSAqIG4gKyAoIG4gLSAxICkgXSA9IHRoaXMuY2RpdnI7XG4gICAgICAgICAgSFsgKCBuIC0gMSApICogbiArIG4gXSA9IHRoaXMuY2Rpdmk7XG4gICAgICAgIH1cbiAgICAgICAgSFsgbiAqIG4gKyBuIC0gMSBdID0gMC4wO1xuICAgICAgICBIWyBuICogbiArIG4gXSA9IDEuMDtcbiAgICAgICAgZm9yICggaSA9IG4gLSAyOyBpID49IDA7IGktLSApIHtcbiAgICAgICAgICBsZXQgcmE7XG4gICAgICAgICAgbGV0IHNhO1xuICAgICAgICAgIGxldCB2cjtcbiAgICAgICAgICBsZXQgdmk7XG4gICAgICAgICAgcmEgPSAwLjA7XG4gICAgICAgICAgc2EgPSAwLjA7XG4gICAgICAgICAgZm9yICggaiA9IGw7IGogPD0gbjsgaisrICkge1xuICAgICAgICAgICAgcmEgPSByYSArIEhbIGkgKiB0aGlzLm4gKyBqIF0gKiBIWyBqICogbiArIG4gLSAxIF07XG4gICAgICAgICAgICBzYSA9IHNhICsgSFsgaSAqIHRoaXMubiArIGogXSAqIEhbIGogKiBuICsgbiBdO1xuICAgICAgICAgIH1cbiAgICAgICAgICB3ID0gSFsgaSAqIG4gKyBpIF0gLSBwO1xuXG4gICAgICAgICAgaWYgKCBlWyBpIF0gPCAwLjAgKSB7XG4gICAgICAgICAgICB6ID0gdztcbiAgICAgICAgICAgIHIgPSByYTtcbiAgICAgICAgICAgIHMgPSBzYTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsID0gaTtcbiAgICAgICAgICAgIGlmICggZVsgaSBdID09PSAwICkge1xuICAgICAgICAgICAgICB0aGlzLmNkaXYoIC1yYSwgLXNhLCB3LCBxICk7XG4gICAgICAgICAgICAgIEhbIGkgKiBuICsgbiAtIDEgXSA9IHRoaXMuY2RpdnI7XG4gICAgICAgICAgICAgIEhbIGkgKiBuICsgbiBdID0gdGhpcy5jZGl2aTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAgIC8vIFNvbHZlIGNvbXBsZXggZXF1YXRpb25zXG5cbiAgICAgICAgICAgICAgeCA9IEhbIGkgKiBuICsgaSArIDEgXTtcbiAgICAgICAgICAgICAgeSA9IEhbICggaSArIDEgKSAqIG4gKyBpIF07XG4gICAgICAgICAgICAgIHZyID0gKCBkWyBpIF0gLSBwICkgKiAoIGRbIGkgXSAtIHAgKSArIGVbIGkgXSAqIGVbIGkgXSAtIHEgKiBxO1xuICAgICAgICAgICAgICB2aSA9ICggZFsgaSBdIC0gcCApICogMi4wICogcTtcbiAgICAgICAgICAgICAgaWYgKCB2ciA9PT0gMC4wICYmIHZpID09PSAwLjAgKSB7XG4gICAgICAgICAgICAgICAgdnIgPSBlcHMgKiBub3JtICogKCBNYXRoLmFicyggdyApICsgTWF0aC5hYnMoIHEgKSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBNYXRoLmFicyggeCApICsgTWF0aC5hYnMoIHkgKSArIE1hdGguYWJzKCB6ICkgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB0aGlzLmNkaXYoIHggKiByIC0geiAqIHJhICsgcSAqIHNhLCB4ICogcyAtIHogKiBzYSAtIHEgKiByYSwgdnIsIHZpICk7XG4gICAgICAgICAgICAgIEhbIGkgKiBuICsgbiAtIDEgXSA9IHRoaXMuY2RpdnI7XG4gICAgICAgICAgICAgIEhbIGkgKiBuICsgbiBdID0gdGhpcy5jZGl2aTtcbiAgICAgICAgICAgICAgaWYgKCBNYXRoLmFicyggeCApID4gKCBNYXRoLmFicyggeiApICsgTWF0aC5hYnMoIHEgKSApICkge1xuICAgICAgICAgICAgICAgIEhbICggaSArIDEgKSAqIG4gKyBuIC0gMSBdID0gKCAtcmEgLSB3ICogSFsgaSAqIG4gKyBuIC0gMSBdICsgcSAqIEhbIGkgKiBuICsgbiBdICkgLyB4O1xuICAgICAgICAgICAgICAgIEhbICggaSArIDEgKSAqIG4gKyBuIF0gPSAoIC1zYSAtIHcgKiBIWyBpICogbiArIG4gXSAtIHEgKiBIWyBpICogbiArIG4gLSAxIF0gKSAvIHg7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5jZGl2KCAtciAtIHkgKiBIWyBpICogbiArIG4gLSAxIF0sIC1zIC0geSAqIEhbIGkgKiBuICsgbiBdLCB6LCBxICk7XG4gICAgICAgICAgICAgICAgSFsgKCBpICsgMSApICogbiArIG4gLSAxIF0gPSB0aGlzLmNkaXZyO1xuICAgICAgICAgICAgICAgIEhbICggaSArIDEgKSAqIG4gKyBuIF0gPSB0aGlzLmNkaXZpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIE92ZXJmbG93IGNvbnRyb2xcbiAgICAgICAgICAgIHQgPSBNYXRoLm1heCggTWF0aC5hYnMoIEhbIGkgKiBuICsgbiAtIDEgXSApLCBNYXRoLmFicyggSFsgaSAqIG4gKyBuIF0gKSApO1xuICAgICAgICAgICAgaWYgKCAoIGVwcyAqIHQgKSAqIHQgPiAxICkge1xuICAgICAgICAgICAgICBmb3IgKCBqID0gaTsgaiA8PSBuOyBqKysgKSB7XG4gICAgICAgICAgICAgICAgSFsgaiAqIG4gKyBuIC0gMSBdID0gSFsgaiAqIG4gKyBuIC0gMSBdIC8gdDtcbiAgICAgICAgICAgICAgICBIWyBqICogbiArIG4gXSA9IEhbIGogKiBuICsgbiBdIC8gdDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFZlY3RvcnMgb2YgaXNvbGF0ZWQgcm9vdHNcbiAgICBmb3IgKCBpID0gMDsgaSA8IG5uOyBpKysgKSB7XG4gICAgICBpZiAoIGkgPCBsb3cgfHwgaSA+IGhpZ2ggKSB7XG4gICAgICAgIGZvciAoIGogPSBpOyBqIDwgbm47IGorKyApIHtcbiAgICAgICAgICBWWyBpICogdGhpcy5uICsgaiBdID0gSFsgaSAqIHRoaXMubiArIGogXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEJhY2sgdHJhbnNmb3JtYXRpb24gdG8gZ2V0IGVpZ2VudmVjdG9ycyBvZiBvcmlnaW5hbCBtYXRyaXhcbiAgICBmb3IgKCBqID0gbm4gLSAxOyBqID49IGxvdzsgai0tICkge1xuICAgICAgZm9yICggaSA9IGxvdzsgaSA8PSBoaWdoOyBpKysgKSB7XG4gICAgICAgIHogPSAwLjA7XG4gICAgICAgIGZvciAoIGsgPSBsb3c7IGsgPD0gTWF0aC5taW4oIGosIGhpZ2ggKTsgaysrICkge1xuICAgICAgICAgIHogPSB6ICsgVlsgaSAqIG4gKyBrIF0gKiBIWyBrICogbiArIGogXTtcbiAgICAgICAgfVxuICAgICAgICBWWyBpICogdGhpcy5uICsgaiBdID0gejtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZG90LnJlZ2lzdGVyKCAnRWlnZW52YWx1ZURlY29tcG9zaXRpb24nLCBFaWdlbnZhbHVlRGVjb21wb3NpdGlvbiApO1xuXG5leHBvcnQgZGVmYXVsdCBFaWdlbnZhbHVlRGVjb21wb3NpdGlvbjsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/LinearFunction.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Function for doing a linear mapping between two domains ('a' and 'b').
 * <p>
 * Example usage:
 * <code>
 * var f = new LinearFunction( 0, 100, 0, 200 );
 * f.evaluate( 50 ); // 100
 * f.inverse( 100 ); // 50
 * </code>
 *
 * @author Chris Malley (PixelZoom, Inc.)
 */



class LinearFunction {
  /**
   * @param a1
   * @param a2
   * @param b1
   * @param b2
   * @param clamp - clamp the result to the provided ranges, false by default
   */
  constructor(a1, a2, b1, b2, clamp = false) {
    this.a1 = a1;
    this.a2 = a2;
    this.b1 = b1;
    this.b2 = b2;
    this.clamp = clamp;
  }

  /**
   * Maps from a to b.
   */
  evaluate(a3) {
    return map(this.a1, this.a2, this.b1, this.b2, a3, this.clamp);
  }

  /**
   * Maps from b to a
   */
  inverse(b3) {
    return map(this.b1, this.b2, this.a1, this.a2, b3, this.clamp);
  }
}

/**
 * Linearly interpolate two points and evaluate the line equation for a third point.
 * f( a1 ) = b1, f( a2 ) = b2, f( a3 ) = <linear mapped value>
 * Optionally clamp the result to the range [b1,b2].
 */
const map = (a1, a2, b1, b2, a3, clamp) => {
  let b3 = js_Utils.linear(a1, a2, b1, b2, a3);
  if (clamp) {
    const max = Math.max(b1, b2);
    const min = Math.min(b1, b2);
    b3 = js_Utils.clamp(b3, min, max);
  }
  return b3;
};
js_dot.register('LinearFunction', LinearFunction);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJVdGlscyIsImRvdCIsIkxpbmVhckZ1bmN0aW9uIiwiY29uc3RydWN0b3IiLCJhMSIsImEyIiwiYjEiLCJiMiIsImNsYW1wIiwiZXZhbHVhdGUiLCJhMyIsIm1hcCIsImludmVyc2UiLCJiMyIsImxpbmVhciIsIm1heCIsIk1hdGgiLCJtaW4iLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIkxpbmVhckZ1bmN0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEZ1bmN0aW9uIGZvciBkb2luZyBhIGxpbmVhciBtYXBwaW5nIGJldHdlZW4gdHdvIGRvbWFpbnMgKCdhJyBhbmQgJ2InKS5cbiAqIDxwPlxuICogRXhhbXBsZSB1c2FnZTpcbiAqIDxjb2RlPlxuICogdmFyIGYgPSBuZXcgTGluZWFyRnVuY3Rpb24oIDAsIDEwMCwgMCwgMjAwICk7XG4gKiBmLmV2YWx1YXRlKCA1MCApOyAvLyAxMDBcbiAqIGYuaW52ZXJzZSggMTAwICk7IC8vIDUwXG4gKiA8L2NvZGU+XG4gKlxuICogQGF1dGhvciBDaHJpcyBNYWxsZXkgKFBpeGVsWm9vbSwgSW5jLilcbiAqL1xuXG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscy5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTGluZWFyRnVuY3Rpb24ge1xuICBwcml2YXRlIGExOiBudW1iZXI7XG4gIHByaXZhdGUgYTI6IG51bWJlcjtcbiAgcHJpdmF0ZSBiMTogbnVtYmVyO1xuICBwcml2YXRlIGIyOiBudW1iZXI7XG4gIHByaXZhdGUgY2xhbXA6IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEBwYXJhbSBhMVxuICAgKiBAcGFyYW0gYTJcbiAgICogQHBhcmFtIGIxXG4gICAqIEBwYXJhbSBiMlxuICAgKiBAcGFyYW0gY2xhbXAgLSBjbGFtcCB0aGUgcmVzdWx0IHRvIHRoZSBwcm92aWRlZCByYW5nZXMsIGZhbHNlIGJ5IGRlZmF1bHRcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggYTE6IG51bWJlciwgYTI6IG51bWJlciwgYjE6IG51bWJlciwgYjI6IG51bWJlciwgY2xhbXAgPSBmYWxzZSApIHtcbiAgICB0aGlzLmExID0gYTE7XG4gICAgdGhpcy5hMiA9IGEyO1xuICAgIHRoaXMuYjEgPSBiMTtcbiAgICB0aGlzLmIyID0gYjI7XG4gICAgdGhpcy5jbGFtcCA9IGNsYW1wO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcHMgZnJvbSBhIHRvIGIuXG4gICAqL1xuICBwdWJsaWMgZXZhbHVhdGUoIGEzOiBudW1iZXIgKTogbnVtYmVyIHtcbiAgICByZXR1cm4gbWFwKCB0aGlzLmExLCB0aGlzLmEyLCB0aGlzLmIxLCB0aGlzLmIyLCBhMywgdGhpcy5jbGFtcCApO1xuICB9XG5cbiAgLyoqXG4gICAqIE1hcHMgZnJvbSBiIHRvIGFcbiAgICovXG4gIHB1YmxpYyBpbnZlcnNlKCBiMzogbnVtYmVyICk6IG51bWJlciB7XG4gICAgcmV0dXJuIG1hcCggdGhpcy5iMSwgdGhpcy5iMiwgdGhpcy5hMSwgdGhpcy5hMiwgYjMsIHRoaXMuY2xhbXAgKTtcbiAgfVxufVxuXG4vKipcbiAqIExpbmVhcmx5IGludGVycG9sYXRlIHR3byBwb2ludHMgYW5kIGV2YWx1YXRlIHRoZSBsaW5lIGVxdWF0aW9uIGZvciBhIHRoaXJkIHBvaW50LlxuICogZiggYTEgKSA9IGIxLCBmKCBhMiApID0gYjIsIGYoIGEzICkgPSA8bGluZWFyIG1hcHBlZCB2YWx1ZT5cbiAqIE9wdGlvbmFsbHkgY2xhbXAgdGhlIHJlc3VsdCB0byB0aGUgcmFuZ2UgW2IxLGIyXS5cbiAqL1xuY29uc3QgbWFwID0gKCBhMTogbnVtYmVyLCBhMjogbnVtYmVyLCBiMTogbnVtYmVyLCBiMjogbnVtYmVyLCBhMzogbnVtYmVyLCBjbGFtcDogYm9vbGVhbiApOiBudW1iZXIgPT4ge1xuICBsZXQgYjMgPSBVdGlscy5saW5lYXIoIGExLCBhMiwgYjEsIGIyLCBhMyApO1xuICBpZiAoIGNsYW1wICkge1xuICAgIGNvbnN0IG1heCA9IE1hdGgubWF4KCBiMSwgYjIgKTtcbiAgICBjb25zdCBtaW4gPSBNYXRoLm1pbiggYjEsIGIyICk7XG4gICAgYjMgPSBVdGlscy5jbGFtcCggYjMsIG1pbiwgbWF4ICk7XG4gIH1cbiAgcmV0dXJuIGIzO1xufTtcblxuZG90LnJlZ2lzdGVyKCAnTGluZWFyRnVuY3Rpb24nLCBMaW5lYXJGdW5jdGlvbiApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLFlBQVk7QUFDOUIsT0FBT0MsR0FBRyxNQUFNLFVBQVU7QUFFMUIsZUFBZSxNQUFNQyxjQUFjLENBQUM7RUFPbEM7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDU0MsV0FBV0EsQ0FBRUMsRUFBVSxFQUFFQyxFQUFVLEVBQUVDLEVBQVUsRUFBRUMsRUFBVSxFQUFFQyxLQUFLLEdBQUcsS0FBSyxFQUFHO0lBQ2xGLElBQUksQ0FBQ0osRUFBRSxHQUFHQSxFQUFFO0lBQ1osSUFBSSxDQUFDQyxFQUFFLEdBQUdBLEVBQUU7SUFDWixJQUFJLENBQUNDLEVBQUUsR0FBR0EsRUFBRTtJQUNaLElBQUksQ0FBQ0MsRUFBRSxHQUFHQSxFQUFFO0lBQ1osSUFBSSxDQUFDQyxLQUFLLEdBQUdBLEtBQUs7RUFDcEI7O0VBRUE7QUFDRjtBQUNBO0VBQ1NDLFFBQVFBLENBQUVDLEVBQVUsRUFBVztJQUNwQyxPQUFPQyxHQUFHLENBQUUsSUFBSSxDQUFDUCxFQUFFLEVBQUUsSUFBSSxDQUFDQyxFQUFFLEVBQUUsSUFBSSxDQUFDQyxFQUFFLEVBQUUsSUFBSSxDQUFDQyxFQUFFLEVBQUVHLEVBQUUsRUFBRSxJQUFJLENBQUNGLEtBQUssQ0FBRTtFQUNsRTs7RUFFQTtBQUNGO0FBQ0E7RUFDU0ksT0FBT0EsQ0FBRUMsRUFBVSxFQUFXO0lBQ25DLE9BQU9GLEdBQUcsQ0FBRSxJQUFJLENBQUNMLEVBQUUsRUFBRSxJQUFJLENBQUNDLEVBQUUsRUFBRSxJQUFJLENBQUNILEVBQUUsRUFBRSxJQUFJLENBQUNDLEVBQUUsRUFBRVEsRUFBRSxFQUFFLElBQUksQ0FBQ0wsS0FBSyxDQUFFO0VBQ2xFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU1HLEdBQUcsR0FBR0EsQ0FBRVAsRUFBVSxFQUFFQyxFQUFVLEVBQUVDLEVBQVUsRUFBRUMsRUFBVSxFQUFFRyxFQUFVLEVBQUVGLEtBQWMsS0FBYztFQUNwRyxJQUFJSyxFQUFFLEdBQUdiLEtBQUssQ0FBQ2MsTUFBTSxDQUFFVixFQUFFLEVBQUVDLEVBQUUsRUFBRUMsRUFBRSxFQUFFQyxFQUFFLEVBQUVHLEVBQUUsQ0FBRTtFQUMzQyxJQUFLRixLQUFLLEVBQUc7SUFDWCxNQUFNTyxHQUFHLEdBQUdDLElBQUksQ0FBQ0QsR0FBRyxDQUFFVCxFQUFFLEVBQUVDLEVBQUUsQ0FBRTtJQUM5QixNQUFNVSxHQUFHLEdBQUdELElBQUksQ0FBQ0MsR0FBRyxDQUFFWCxFQUFFLEVBQUVDLEVBQUUsQ0FBRTtJQUM5Qk0sRUFBRSxHQUFHYixLQUFLLENBQUNRLEtBQUssQ0FBRUssRUFBRSxFQUFFSSxHQUFHLEVBQUVGLEdBQUcsQ0FBRTtFQUNsQztFQUNBLE9BQU9GLEVBQUU7QUFDWCxDQUFDO0FBRURaLEdBQUcsQ0FBQ2lCLFFBQVEsQ0FBRSxnQkFBZ0IsRUFBRWhCLGNBQWMsQ0FBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Matrix4.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * 4-dimensional Matrix
 *
 * TODO: consider adding affine flag if it will help performance (a la Matrix3)
 * TODO: get rotation angles
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */

/* eslint-disable bad-sim-text */





const Float32Array = window.Float32Array || Array;
class Matrix4 {
  /**
   * @param {number} [v00]
   * @param {number} [v01]
   * @param {number} [v02]
   * @param {number} [v03]
   * @param {number} [v10]
   * @param {number} [v11]
   * @param {number} [v12]
   * @param {number} [v13]
   * @param {number} [v20]
   * @param {number} [v21]
   * @param {number} [v22]
   * @param {number} [v23]
   * @param {number} [v30]
   * @param {number} [v31]
   * @param {number} [v32]
   * @param {number} [v33]
   * @param {Matrix4.Types|undefined} [type]
   */
  constructor(v00, v01, v02, v03, v10, v11, v12, v13, v20, v21, v22, v23, v30, v31, v32, v33, type) {
    // @public {Float32Array} - entries stored in column-major format
    this.entries = new Float32Array(16);

    // @public {Matrix4.Types}
    this.type = Types.OTHER; // will be set by rowMajor

    this.rowMajor(v00 !== undefined ? v00 : 1, v01 !== undefined ? v01 : 0, v02 !== undefined ? v02 : 0, v03 !== undefined ? v03 : 0, v10 !== undefined ? v10 : 0, v11 !== undefined ? v11 : 1, v12 !== undefined ? v12 : 0, v13 !== undefined ? v13 : 0, v20 !== undefined ? v20 : 0, v21 !== undefined ? v21 : 0, v22 !== undefined ? v22 : 1, v23 !== undefined ? v23 : 0, v30 !== undefined ? v30 : 0, v31 !== undefined ? v31 : 0, v32 !== undefined ? v32 : 0, v33 !== undefined ? v33 : 1, type);
  }

  /**
   * Sets all entries of the matrix in row-major order.
   * @public
   *
   * @param {number} v00
   * @param {number} v01
   * @param {number} v02
   * @param {number} v03
   * @param {number} v10
   * @param {number} v11
   * @param {number} v12
   * @param {number} v13
   * @param {number} v20
   * @param {number} v21
   * @param {number} v22
   * @param {number} v23
   * @param {number} v30
   * @param {number} v31
   * @param {number} v32
   * @param {number} v33
   * @param {Matrix4.Types|undefined} [type]
   * @returns {Matrix4} - Self reference
   */
  rowMajor(v00, v01, v02, v03, v10, v11, v12, v13, v20, v21, v22, v23, v30, v31, v32, v33, type) {
    this.entries[0] = v00;
    this.entries[1] = v10;
    this.entries[2] = v20;
    this.entries[3] = v30;
    this.entries[4] = v01;
    this.entries[5] = v11;
    this.entries[6] = v21;
    this.entries[7] = v31;
    this.entries[8] = v02;
    this.entries[9] = v12;
    this.entries[10] = v22;
    this.entries[11] = v32;
    this.entries[12] = v03;
    this.entries[13] = v13;
    this.entries[14] = v23;
    this.entries[15] = v33;

    // TODO: consider performance of the affine check here
    this.type = type === undefined ? v30 === 0 && v31 === 0 && v32 === 0 && v33 === 1 ? Types.AFFINE : Types.OTHER : type;
    return this;
  }

  /**
   * Sets all entries of the matrix in column-major order.
   * @public
   *
   * @param {*} v00
   * @param {*} v10
   * @param {*} v20
   * @param {*} v30
   * @param {*} v01
   * @param {*} v11
   * @param {*} v21
   * @param {*} v31
   * @param {*} v02
   * @param {*} v12
   * @param {*} v22
   * @param {*} v32
   * @param {*} v03
   * @param {*} v13
   * @param {*} v23
   * @param {*} v33
   * @param {Matrix4.Types|undefined} [type]
   * @returns {Matrix4} - Self reference
   */
  columnMajor(v00, v10, v20, v30, v01, v11, v21, v31, v02, v12, v22, v32, v03, v13, v23, v33, type) {
    return this.rowMajor(v00, v01, v02, v03, v10, v11, v12, v13, v20, v21, v22, v23, v30, v31, v32, v33, type);
  }

  /**
   * Sets this matrix to the value of the passed-in matrix.
   * @public
   *
   * @param {Matrix4} matrix
   * @returns {Matrix4} - Self reference
   */
  set(matrix) {
    return this.rowMajor(matrix.m00(), matrix.m01(), matrix.m02(), matrix.m03(), matrix.m10(), matrix.m11(), matrix.m12(), matrix.m13(), matrix.m20(), matrix.m21(), matrix.m22(), matrix.m23(), matrix.m30(), matrix.m31(), matrix.m32(), matrix.m33(), matrix.type);
  }

  /**
   * Returns the 0,0 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m00() {
    return this.entries[0];
  }

  /**
   * Returns the 0,1 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m01() {
    return this.entries[4];
  }

  /**
   * Returns the 0,2 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m02() {
    return this.entries[8];
  }

  /**
   * Returns the 0,3 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m03() {
    return this.entries[12];
  }

  /**
   * Returns the 1,0 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m10() {
    return this.entries[1];
  }

  /**
   * Returns the 1,1 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m11() {
    return this.entries[5];
  }

  /**
   * Returns the 1,2 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m12() {
    return this.entries[9];
  }

  /**
   * Returns the 1,3 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m13() {
    return this.entries[13];
  }

  /**
   * Returns the 2,0 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m20() {
    return this.entries[2];
  }

  /**
   * Returns the 2,1 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m21() {
    return this.entries[6];
  }

  /**
   * Returns the 2,2 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m22() {
    return this.entries[10];
  }

  /**
   * Returns the 2,3 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m23() {
    return this.entries[14];
  }

  /**
   * Returns the 3,0 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m30() {
    return this.entries[3];
  }

  /**
   * Returns the 3,1 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m31() {
    return this.entries[7];
  }

  /**
   * Returns the 3,2 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m32() {
    return this.entries[11];
  }

  /**
   * Returns the 3,3 entry of this matrix.
   * @public
   *
   * @returns {number}
   */
  m33() {
    return this.entries[15];
  }

  /**
   * Returns whether all of this matrix's entries are finite (non-infinite and non-NaN).
   * @public
   *
   * @returns {boolean}
   */
  isFinite() {
    return isFinite(this.m00()) && isFinite(this.m01()) && isFinite(this.m02()) && isFinite(this.m03()) && isFinite(this.m10()) && isFinite(this.m11()) && isFinite(this.m12()) && isFinite(this.m13()) && isFinite(this.m20()) && isFinite(this.m21()) && isFinite(this.m22()) && isFinite(this.m23()) && isFinite(this.m30()) && isFinite(this.m31()) && isFinite(this.m32()) && isFinite(this.m33());
  }

  /**
   * Returns the 3D translation, assuming multiplication with a homogeneous vector.
   * @public
   *
   * @returns {Vector3}
   */
  getTranslation() {
    return new Vector3(this.m03(), this.m13(), this.m23());
  }
  get translation() {
    return this.getTranslation();
  }

  /**
   * Returns a vector that is equivalent to ( T(1,0,0).magnitude, T(0,1,0).magnitude, T(0,0,1).magnitude )
   * where T is a relative transform.
   * @public
   *
   * @returns {Vector3}
   */
  getScaleVector() {
    const m0003 = this.m00() + this.m03();
    const m1013 = this.m10() + this.m13();
    const m2023 = this.m20() + this.m23();
    const m3033 = this.m30() + this.m33();
    const m0103 = this.m01() + this.m03();
    const m1113 = this.m11() + this.m13();
    const m2123 = this.m21() + this.m23();
    const m3133 = this.m31() + this.m33();
    const m0203 = this.m02() + this.m03();
    const m1213 = this.m12() + this.m13();
    const m2223 = this.m22() + this.m23();
    const m3233 = this.m32() + this.m33();
    return new Vector3(Math.sqrt(m0003 * m0003 + m1013 * m1013 + m2023 * m2023 + m3033 * m3033), Math.sqrt(m0103 * m0103 + m1113 * m1113 + m2123 * m2123 + m3133 * m3133), Math.sqrt(m0203 * m0203 + m1213 * m1213 + m2223 * m2223 + m3233 * m3233));
  }
  get scaleVector() {
    return this.getScaleVector();
  }

  /**
   * Returns the CSS transform string for the associated homogeneous 3d transformation.
   * @public
   *
   * @returns {string}
   */
  getCSSTransform() {
    // See http://www.w3.org/TR/css3-transforms/, particularly Section 13 that discusses the SVG compatibility

    // the inner part of a CSS3 transform, but remember to add the browser-specific parts!
    // NOTE: the toFixed calls are inlined for performance reasons
    return `matrix3d(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[2].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[5].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)},${this.entries[8].toFixed(20)},${this.entries[9].toFixed(20)},${this.entries[10].toFixed(20)},${this.entries[11].toFixed(20)},${this.entries[12].toFixed(20)},${this.entries[13].toFixed(20)},${this.entries[14].toFixed(20)},${this.entries[15].toFixed(20)})`;
  }
  get cssTransform() {
    return this.getCSSTransform();
  }

  /**
   * Returns exact equality with another matrix
   * @public
   *
   * @param {Matrix4} matrix
   * @returns {boolean}
   */
  equals(matrix) {
    return this.m00() === matrix.m00() && this.m01() === matrix.m01() && this.m02() === matrix.m02() && this.m03() === matrix.m03() && this.m10() === matrix.m10() && this.m11() === matrix.m11() && this.m12() === matrix.m12() && this.m13() === matrix.m13() && this.m20() === matrix.m20() && this.m21() === matrix.m21() && this.m22() === matrix.m22() && this.m23() === matrix.m23() && this.m30() === matrix.m30() && this.m31() === matrix.m31() && this.m32() === matrix.m32() && this.m33() === matrix.m33();
  }

  /**
   * Returns equality within a margin of error with another matrix
   * @public
   *
   * @param {Matrix4} matrix
   * @param {number} epsilon
   * @returns {boolean}
   */
  equalsEpsilon(matrix, epsilon) {
    return Math.abs(this.m00() - matrix.m00()) < epsilon && Math.abs(this.m01() - matrix.m01()) < epsilon && Math.abs(this.m02() - matrix.m02()) < epsilon && Math.abs(this.m03() - matrix.m03()) < epsilon && Math.abs(this.m10() - matrix.m10()) < epsilon && Math.abs(this.m11() - matrix.m11()) < epsilon && Math.abs(this.m12() - matrix.m12()) < epsilon && Math.abs(this.m13() - matrix.m13()) < epsilon && Math.abs(this.m20() - matrix.m20()) < epsilon && Math.abs(this.m21() - matrix.m21()) < epsilon && Math.abs(this.m22() - matrix.m22()) < epsilon && Math.abs(this.m23() - matrix.m23()) < epsilon && Math.abs(this.m30() - matrix.m30()) < epsilon && Math.abs(this.m31() - matrix.m31()) < epsilon && Math.abs(this.m32() - matrix.m32()) < epsilon && Math.abs(this.m33() - matrix.m33()) < epsilon;
  }

  /*---------------------------------------------------------------------------*
   * Immutable operations (returning a new matrix)
   *----------------------------------------------------------------------------*/

  /**
   * Returns a copy of this matrix
   * @public
   *
   * @returns {Matrix4}
   */
  copy() {
    return new Matrix4(this.m00(), this.m01(), this.m02(), this.m03(), this.m10(), this.m11(), this.m12(), this.m13(), this.m20(), this.m21(), this.m22(), this.m23(), this.m30(), this.m31(), this.m32(), this.m33(), this.type);
  }

  /**
   * Returns a new matrix, defined by this matrix plus the provided matrix
   * @public
   *
   * @param {Matrix4} matrix
   * @returns {Matrix4}
   */
  plus(matrix) {
    return new Matrix4(this.m00() + matrix.m00(), this.m01() + matrix.m01(), this.m02() + matrix.m02(), this.m03() + matrix.m03(), this.m10() + matrix.m10(), this.m11() + matrix.m11(), this.m12() + matrix.m12(), this.m13() + matrix.m13(), this.m20() + matrix.m20(), this.m21() + matrix.m21(), this.m22() + matrix.m22(), this.m23() + matrix.m23(), this.m30() + matrix.m30(), this.m31() + matrix.m31(), this.m32() + matrix.m32(), this.m33() + matrix.m33());
  }

  /**
   * Returns a new matrix, defined by this matrix plus the provided matrix
   * @public
   *
   * @param {Matrix4} matrix
   * @returns {Matrix4}
   */
  minus(matrix) {
    return new Matrix4(this.m00() - matrix.m00(), this.m01() - matrix.m01(), this.m02() - matrix.m02(), this.m03() - matrix.m03(), this.m10() - matrix.m10(), this.m11() - matrix.m11(), this.m12() - matrix.m12(), this.m13() - matrix.m13(), this.m20() - matrix.m20(), this.m21() - matrix.m21(), this.m22() - matrix.m22(), this.m23() - matrix.m23(), this.m30() - matrix.m30(), this.m31() - matrix.m31(), this.m32() - matrix.m32(), this.m33() - matrix.m33());
  }

  /**
   * Returns a transposed copy of this matrix
   * @public
   *
   * @returns {Matrix4}
   */
  transposed() {
    return new Matrix4(this.m00(), this.m10(), this.m20(), this.m30(), this.m01(), this.m11(), this.m21(), this.m31(), this.m02(), this.m12(), this.m22(), this.m32(), this.m03(), this.m13(), this.m23(), this.m33());
  }

  /**
   * Returns a negated copy of this matrix
   * @public
   *
   * @returns {Matrix3}
   */
  negated() {
    return new Matrix4(-this.m00(), -this.m01(), -this.m02(), -this.m03(), -this.m10(), -this.m11(), -this.m12(), -this.m13(), -this.m20(), -this.m21(), -this.m22(), -this.m23(), -this.m30(), -this.m31(), -this.m32(), -this.m33());
  }

  /**
   * Returns an inverted copy of this matrix
   * @public
   *
   * @returns {Matrix3}
   */
  inverted() {
    let det;
    switch (this.type) {
      case Types.IDENTITY:
        return this;
      case Types.TRANSLATION_3D:
        return new Matrix4(1, 0, 0, -this.m03(), 0, 1, 0, -this.m13(), 0, 0, 1, -this.m23(), 0, 0, 0, 1, Types.TRANSLATION_3D);
      case Types.SCALING:
        return new Matrix4(1 / this.m00(), 0, 0, 0, 0, 1 / this.m11(), 0, 0, 0, 0, 1 / this.m22(), 0, 0, 0, 0, 1 / this.m33(), Types.SCALING);
      case Types.AFFINE:
      case Types.OTHER:
        det = this.getDeterminant();
        if (det !== 0) {
          return new Matrix4((-this.m31() * this.m22() * this.m13() + this.m21() * this.m32() * this.m13() + this.m31() * this.m12() * this.m23() - this.m11() * this.m32() * this.m23() - this.m21() * this.m12() * this.m33() + this.m11() * this.m22() * this.m33()) / det, (this.m31() * this.m22() * this.m03() - this.m21() * this.m32() * this.m03() - this.m31() * this.m02() * this.m23() + this.m01() * this.m32() * this.m23() + this.m21() * this.m02() * this.m33() - this.m01() * this.m22() * this.m33()) / det, (-this.m31() * this.m12() * this.m03() + this.m11() * this.m32() * this.m03() + this.m31() * this.m02() * this.m13() - this.m01() * this.m32() * this.m13() - this.m11() * this.m02() * this.m33() + this.m01() * this.m12() * this.m33()) / det, (this.m21() * this.m12() * this.m03() - this.m11() * this.m22() * this.m03() - this.m21() * this.m02() * this.m13() + this.m01() * this.m22() * this.m13() + this.m11() * this.m02() * this.m23() - this.m01() * this.m12() * this.m23()) / det, (this.m30() * this.m22() * this.m13() - this.m20() * this.m32() * this.m13() - this.m30() * this.m12() * this.m23() + this.m10() * this.m32() * this.m23() + this.m20() * this.m12() * this.m33() - this.m10() * this.m22() * this.m33()) / det, (-this.m30() * this.m22() * this.m03() + this.m20() * this.m32() * this.m03() + this.m30() * this.m02() * this.m23() - this.m00() * this.m32() * this.m23() - this.m20() * this.m02() * this.m33() + this.m00() * this.m22() * this.m33()) / det, (this.m30() * this.m12() * this.m03() - this.m10() * this.m32() * this.m03() - this.m30() * this.m02() * this.m13() + this.m00() * this.m32() * this.m13() + this.m10() * this.m02() * this.m33() - this.m00() * this.m12() * this.m33()) / det, (-this.m20() * this.m12() * this.m03() + this.m10() * this.m22() * this.m03() + this.m20() * this.m02() * this.m13() - this.m00() * this.m22() * this.m13() - this.m10() * this.m02() * this.m23() + this.m00() * this.m12() * this.m23()) / det, (-this.m30() * this.m21() * this.m13() + this.m20() * this.m31() * this.m13() + this.m30() * this.m11() * this.m23() - this.m10() * this.m31() * this.m23() - this.m20() * this.m11() * this.m33() + this.m10() * this.m21() * this.m33()) / det, (this.m30() * this.m21() * this.m03() - this.m20() * this.m31() * this.m03() - this.m30() * this.m01() * this.m23() + this.m00() * this.m31() * this.m23() + this.m20() * this.m01() * this.m33() - this.m00() * this.m21() * this.m33()) / det, (-this.m30() * this.m11() * this.m03() + this.m10() * this.m31() * this.m03() + this.m30() * this.m01() * this.m13() - this.m00() * this.m31() * this.m13() - this.m10() * this.m01() * this.m33() + this.m00() * this.m11() * this.m33()) / det, (this.m20() * this.m11() * this.m03() - this.m10() * this.m21() * this.m03() - this.m20() * this.m01() * this.m13() + this.m00() * this.m21() * this.m13() + this.m10() * this.m01() * this.m23() - this.m00() * this.m11() * this.m23()) / det, (this.m30() * this.m21() * this.m12() - this.m20() * this.m31() * this.m12() - this.m30() * this.m11() * this.m22() + this.m10() * this.m31() * this.m22() + this.m20() * this.m11() * this.m32() - this.m10() * this.m21() * this.m32()) / det, (-this.m30() * this.m21() * this.m02() + this.m20() * this.m31() * this.m02() + this.m30() * this.m01() * this.m22() - this.m00() * this.m31() * this.m22() - this.m20() * this.m01() * this.m32() + this.m00() * this.m21() * this.m32()) / det, (this.m30() * this.m11() * this.m02() - this.m10() * this.m31() * this.m02() - this.m30() * this.m01() * this.m12() + this.m00() * this.m31() * this.m12() + this.m10() * this.m01() * this.m32() - this.m00() * this.m11() * this.m32()) / det, (-this.m20() * this.m11() * this.m02() + this.m10() * this.m21() * this.m02() + this.m20() * this.m01() * this.m12() - this.m00() * this.m21() * this.m12() - this.m10() * this.m01() * this.m22() + this.m00() * this.m11() * this.m22()) / det);
        } else {
          throw new Error('Matrix could not be inverted, determinant === 0');
        }
      default:
        throw new Error(`Matrix4.inverted with unknown type: ${this.type}`);
    }
  }

  /**
   * Returns a matrix, defined by the multiplication of this * matrix.
   * @public
   *
   * @param {Matrix4} matrix
   * @returns {Matrix4} - NOTE: this may be the same matrix!
   */
  timesMatrix(matrix) {
    // I * M === M * I === I (the identity)
    if (this.type === Types.IDENTITY || matrix.type === Types.IDENTITY) {
      return this.type === Types.IDENTITY ? matrix : this;
    }
    if (this.type === matrix.type) {
      // currently two matrices of the same type will result in the same result type
      if (this.type === Types.TRANSLATION_3D) {
        // faster combination of translations
        return new Matrix4(1, 0, 0, this.m03() + matrix.m02(), 0, 1, 0, this.m13() + matrix.m12(), 0, 0, 1, this.m23() + matrix.m23(), 0, 0, 0, 1, Types.TRANSLATION_3D);
      } else if (this.type === Types.SCALING) {
        // faster combination of scaling
        return new Matrix4(this.m00() * matrix.m00(), 0, 0, 0, 0, this.m11() * matrix.m11(), 0, 0, 0, 0, this.m22() * matrix.m22(), 0, 0, 0, 0, 1, Types.SCALING);
      }
    }
    if (this.type !== Types.OTHER && matrix.type !== Types.OTHER) {
      // currently two matrices that are anything but "other" are technically affine, and the result will be affine

      // affine case
      return new Matrix4(this.m00() * matrix.m00() + this.m01() * matrix.m10() + this.m02() * matrix.m20(), this.m00() * matrix.m01() + this.m01() * matrix.m11() + this.m02() * matrix.m21(), this.m00() * matrix.m02() + this.m01() * matrix.m12() + this.m02() * matrix.m22(), this.m00() * matrix.m03() + this.m01() * matrix.m13() + this.m02() * matrix.m23() + this.m03(), this.m10() * matrix.m00() + this.m11() * matrix.m10() + this.m12() * matrix.m20(), this.m10() * matrix.m01() + this.m11() * matrix.m11() + this.m12() * matrix.m21(), this.m10() * matrix.m02() + this.m11() * matrix.m12() + this.m12() * matrix.m22(), this.m10() * matrix.m03() + this.m11() * matrix.m13() + this.m12() * matrix.m23() + this.m13(), this.m20() * matrix.m00() + this.m21() * matrix.m10() + this.m22() * matrix.m20(), this.m20() * matrix.m01() + this.m21() * matrix.m11() + this.m22() * matrix.m21(), this.m20() * matrix.m02() + this.m21() * matrix.m12() + this.m22() * matrix.m22(), this.m20() * matrix.m03() + this.m21() * matrix.m13() + this.m22() * matrix.m23() + this.m23(), 0, 0, 0, 1, Types.AFFINE);
    }

    // general case
    return new Matrix4(this.m00() * matrix.m00() + this.m01() * matrix.m10() + this.m02() * matrix.m20() + this.m03() * matrix.m30(), this.m00() * matrix.m01() + this.m01() * matrix.m11() + this.m02() * matrix.m21() + this.m03() * matrix.m31(), this.m00() * matrix.m02() + this.m01() * matrix.m12() + this.m02() * matrix.m22() + this.m03() * matrix.m32(), this.m00() * matrix.m03() + this.m01() * matrix.m13() + this.m02() * matrix.m23() + this.m03() * matrix.m33(), this.m10() * matrix.m00() + this.m11() * matrix.m10() + this.m12() * matrix.m20() + this.m13() * matrix.m30(), this.m10() * matrix.m01() + this.m11() * matrix.m11() + this.m12() * matrix.m21() + this.m13() * matrix.m31(), this.m10() * matrix.m02() + this.m11() * matrix.m12() + this.m12() * matrix.m22() + this.m13() * matrix.m32(), this.m10() * matrix.m03() + this.m11() * matrix.m13() + this.m12() * matrix.m23() + this.m13() * matrix.m33(), this.m20() * matrix.m00() + this.m21() * matrix.m10() + this.m22() * matrix.m20() + this.m23() * matrix.m30(), this.m20() * matrix.m01() + this.m21() * matrix.m11() + this.m22() * matrix.m21() + this.m23() * matrix.m31(), this.m20() * matrix.m02() + this.m21() * matrix.m12() + this.m22() * matrix.m22() + this.m23() * matrix.m32(), this.m20() * matrix.m03() + this.m21() * matrix.m13() + this.m22() * matrix.m23() + this.m23() * matrix.m33(), this.m30() * matrix.m00() + this.m31() * matrix.m10() + this.m32() * matrix.m20() + this.m33() * matrix.m30(), this.m30() * matrix.m01() + this.m31() * matrix.m11() + this.m32() * matrix.m21() + this.m33() * matrix.m31(), this.m30() * matrix.m02() + this.m31() * matrix.m12() + this.m32() * matrix.m22() + this.m33() * matrix.m32(), this.m30() * matrix.m03() + this.m31() * matrix.m13() + this.m32() * matrix.m23() + this.m33() * matrix.m33());
  }

  /**
   * Returns the multiplication of this matrix times the provided vector
   * @public
   *
   * @param {Vector4} vector4
   * @returns {Vector4}
   */
  timesVector4(vector4) {
    const x = this.m00() * vector4.x + this.m01() * vector4.y + this.m02() * vector4.z + this.m03() * vector4.w;
    const y = this.m10() * vector4.x + this.m11() * vector4.y + this.m12() * vector4.z + this.m13() * vector4.w;
    const z = this.m20() * vector4.x + this.m21() * vector4.y + this.m22() * vector4.z + this.m23() * vector4.w;
    const w = this.m30() * vector4.x + this.m31() * vector4.y + this.m32() * vector4.z + this.m33() * vector4.w;
    return new Vector4(x, y, z, w);
  }

  /**
   * Returns the multiplication of this matrix times the provided vector (treating this matrix as homogeneous, so that
   * it is the technical multiplication of (x,y,z,1)).
   * @public
   *
   * @param {Vector3} vector3
   * @returns {Vector3}
   */
  timesVector3(vector3) {
    return this.timesVector4(vector3.toVector4()).toVector3();
  }

  /**
   * Returns the multiplication of this matrix's transpose times the provided vector
   * @public
   *
   * @param {Vector4} vector4
   * @returns {Vector4}
   */
  timesTransposeVector4(vector4) {
    const x = this.m00() * vector4.x + this.m10() * vector4.y + this.m20() * vector4.z + this.m30() * vector4.w;
    const y = this.m01() * vector4.x + this.m11() * vector4.y + this.m21() * vector4.z + this.m31() * vector4.w;
    const z = this.m02() * vector4.x + this.m12() * vector4.y + this.m22() * vector4.z + this.m32() * vector4.w;
    const w = this.m03() * vector4.x + this.m13() * vector4.y + this.m23() * vector4.z + this.m33() * vector4.w;
    return new Vector4(x, y, z, w);
  }

  /**
   * Returns the multiplication of this matrix's transpose times the provided vector (homogeneous).
   * @public
   *
   * @param {Vector3} vector3
   * @returns {Vector3}
   */
  timesTransposeVector3(vector3) {
    return this.timesTransposeVector4(vector3.toVector4()).toVector3();
  }

  /**
   * Equivalent to the multiplication of (x,y,z,0), ignoring the homogeneous part.
   * @public
   *
   * @param {Vector3} vector3
   * @returns {Vector3}
   */
  timesRelativeVector3(vector3) {
    const x = this.m00() * vector3.x + this.m10() * vector3.y + this.m20() * vector3.z;
    const y = this.m01() * vector3.y + this.m11() * vector3.y + this.m21() * vector3.z;
    const z = this.m02() * vector3.z + this.m12() * vector3.y + this.m22() * vector3.z;
    return new Vector3(x, y, z);
  }

  /**
   * Returns the determinant of this matrix.
   * @public
   *
   * @returns {number}
   */
  getDeterminant() {
    return this.m03() * this.m12() * this.m21() * this.m30() - this.m02() * this.m13() * this.m21() * this.m30() - this.m03() * this.m11() * this.m22() * this.m30() + this.m01() * this.m13() * this.m22() * this.m30() + this.m02() * this.m11() * this.m23() * this.m30() - this.m01() * this.m12() * this.m23() * this.m30() - this.m03() * this.m12() * this.m20() * this.m31() + this.m02() * this.m13() * this.m20() * this.m31() + this.m03() * this.m10() * this.m22() * this.m31() - this.m00() * this.m13() * this.m22() * this.m31() - this.m02() * this.m10() * this.m23() * this.m31() + this.m00() * this.m12() * this.m23() * this.m31() + this.m03() * this.m11() * this.m20() * this.m32() - this.m01() * this.m13() * this.m20() * this.m32() - this.m03() * this.m10() * this.m21() * this.m32() + this.m00() * this.m13() * this.m21() * this.m32() + this.m01() * this.m10() * this.m23() * this.m32() - this.m00() * this.m11() * this.m23() * this.m32() - this.m02() * this.m11() * this.m20() * this.m33() + this.m01() * this.m12() * this.m20() * this.m33() + this.m02() * this.m10() * this.m21() * this.m33() - this.m00() * this.m12() * this.m21() * this.m33() - this.m01() * this.m10() * this.m22() * this.m33() + this.m00() * this.m11() * this.m22() * this.m33();
  }
  get determinant() {
    return this.getDeterminant();
  }

  /**
   * Returns a string form of this object
   * @public
   *
   * @returns {string}
   */
  toString() {
    return `${this.m00()} ${this.m01()} ${this.m02()} ${this.m03()}\n${this.m10()} ${this.m11()} ${this.m12()} ${this.m13()}\n${this.m20()} ${this.m21()} ${this.m22()} ${this.m23()}\n${this.m30()} ${this.m31()} ${this.m32()} ${this.m33()}`;
  }

  /**
   * Makes this matrix effectively immutable to the normal methods (except direct setters?)
   * @public
   *
   * @returns {Matrix3} - Self reference
   */
  makeImmutable() {
    if (assert) {
      this.rowMajor = () => {
        throw new Error('Cannot modify immutable matrix');
      };
    }
    return this;
  }

  /**
   * Copies the entries of this matrix over to an arbitrary array (typed or normal).
   * @public
   *
   * @param {Array|Float32Array|Float64Array} array
   * @returns {Array|Float32Array|Float64Array} - Returned for chaining
   */
  copyToArray(array) {
    array[0] = this.m00();
    array[1] = this.m10();
    array[2] = this.m20();
    array[3] = this.m30();
    array[4] = this.m01();
    array[5] = this.m11();
    array[6] = this.m21();
    array[7] = this.m31();
    array[8] = this.m02();
    array[9] = this.m12();
    array[10] = this.m22();
    array[11] = this.m32();
    array[12] = this.m03();
    array[13] = this.m13();
    array[14] = this.m23();
    array[15] = this.m33();
    return array;
  }

  /**
   * Returns an identity matrix.
   * @public
   *
   * @returns {Matrix4}
   */
  static identity() {
    return new Matrix4(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, Types.IDENTITY);
  }

  /**
   * Returns a translation matrix.
   * @public
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Matrix4}
   */
  static translation(x, y, z) {
    return new Matrix4(1, 0, 0, x, 0, 1, 0, y, 0, 0, 1, z, 0, 0, 0, 1, Types.TRANSLATION_3D);
  }

  /**
   * Returns a translation matrix computed from a vector.
   * @public
   *
   * @param {Vector3|Vector4} vector
   * @returns {Matrix4}
   */
  static translationFromVector(vector) {
    return Matrix4.translation(vector.x, vector.y, vector.z);
  }

  /**
   * Returns a matrix that scales things in each dimension.
   * @public
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @returns {Matrix4}
   */
  static scaling(x, y, z) {
    // allow using one parameter to scale everything
    y = y === undefined ? x : y;
    z = z === undefined ? x : z;
    return new Matrix4(x, 0, 0, 0, 0, y, 0, 0, 0, 0, z, 0, 0, 0, 0, 1, Types.SCALING);
  }

  /**
   * Returns a homogeneous matrix rotation defined by a rotation of the specified angle around the given unit axis.
   * @public
   *
   * @param {Vector3} axis - normalized
   * @param {number} angle - in radians
   * @returns {Matrix4}
   */
  static rotationAxisAngle(axis, angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    const C = 1 - c;
    return new Matrix4(axis.x * axis.x * C + c, axis.x * axis.y * C - axis.z * s, axis.x * axis.z * C + axis.y * s, 0, axis.y * axis.x * C + axis.z * s, axis.y * axis.y * C + c, axis.y * axis.z * C - axis.x * s, 0, axis.z * axis.x * C - axis.y * s, axis.z * axis.y * C + axis.x * s, axis.z * axis.z * C + c, 0, 0, 0, 0, 1, Types.AFFINE);
  }

  // TODO: add in rotation from quaternion, and from quat + translation

  /**
   * Returns a rotation matrix in the yz plane.
   * @public
   *
   * @param {number} angle - in radians
   * @returns {Matrix4}
   */
  static rotationX(angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return new Matrix4(1, 0, 0, 0, 0, c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, Types.AFFINE);
  }

  /**
   * Returns a rotation matrix in the xz plane.
   * @public
   *
   * @param {number} angle - in radians
   * @returns {Matrix4}
   */
  static rotationY(angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return new Matrix4(c, 0, s, 0, 0, 1, 0, 0, -s, 0, c, 0, 0, 0, 0, 1, Types.AFFINE);
  }

  /**
   * Returns a rotation matrix in the xy plane.
   * @public
   *
   * @param {number} angle - in radians
   * @returns {Matrix4}
   */
  static rotationZ(angle) {
    const c = Math.cos(angle);
    const s = Math.sin(angle);
    return new Matrix4(c, -s, 0, 0, s, c, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, Types.AFFINE);
  }

  /**
   * Returns the specific perspective matrix needed for certain WebGL contexts.
   * @public
   *
   * @param {number} fovYRadians
   * @param {number} aspect - aspect === width / height
   * @param {number} zNear
   * @param {number} zFar
   * @returns {Matrix4}
   */
  static gluPerspective(fovYRadians, aspect, zNear, zFar) {
    const cotangent = Math.cos(fovYRadians) / Math.sin(fovYRadians);
    return new Matrix4(cotangent / aspect, 0, 0, 0, 0, cotangent, 0, 0, 0, 0, (zFar + zNear) / (zNear - zFar), 2 * zFar * zNear / (zNear - zFar), 0, 0, -1, 0);
  }
}
js_dot.register('Matrix4', Matrix4);
const Types = js_EnumerationDeprecated.byKeys(['OTHER', 'IDENTITY', 'TRANSLATION_3D', 'SCALING', 'AFFINE']);

// @public {EnumerationDeprecated}
Matrix4.Types = Types;

// @public {Matrix4}
Matrix4.IDENTITY = new Matrix4().makeImmutable();
/* harmony default export */ const js_Matrix4 = (Matrix4);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbkRlcHJlY2F0ZWQiLCJkb3QiLCJWZWN0b3IzIiwiVmVjdG9yNCIsIkZsb2F0MzJBcnJheSIsIndpbmRvdyIsIkFycmF5IiwiTWF0cml4NCIsImNvbnN0cnVjdG9yIiwidjAwIiwidjAxIiwidjAyIiwidjAzIiwidjEwIiwidjExIiwidjEyIiwidjEzIiwidjIwIiwidjIxIiwidjIyIiwidjIzIiwidjMwIiwidjMxIiwidjMyIiwidjMzIiwidHlwZSIsImVudHJpZXMiLCJUeXBlcyIsIk9USEVSIiwicm93TWFqb3IiLCJ1bmRlZmluZWQiLCJBRkZJTkUiLCJjb2x1bW5NYWpvciIsInNldCIsIm1hdHJpeCIsIm0wMCIsIm0wMSIsIm0wMiIsIm0wMyIsIm0xMCIsIm0xMSIsIm0xMiIsIm0xMyIsIm0yMCIsIm0yMSIsIm0yMiIsIm0yMyIsIm0zMCIsIm0zMSIsIm0zMiIsIm0zMyIsImlzRmluaXRlIiwiZ2V0VHJhbnNsYXRpb24iLCJ0cmFuc2xhdGlvbiIsImdldFNjYWxlVmVjdG9yIiwibTAwMDMiLCJtMTAxMyIsIm0yMDIzIiwibTMwMzMiLCJtMDEwMyIsIm0xMTEzIiwibTIxMjMiLCJtMzEzMyIsIm0wMjAzIiwibTEyMTMiLCJtMjIyMyIsIm0zMjMzIiwiTWF0aCIsInNxcnQiLCJzY2FsZVZlY3RvciIsImdldENTU1RyYW5zZm9ybSIsInRvRml4ZWQiLCJjc3NUcmFuc2Zvcm0iLCJlcXVhbHMiLCJlcXVhbHNFcHNpbG9uIiwiZXBzaWxvbiIsImFicyIsImNvcHkiLCJwbHVzIiwibWludXMiLCJ0cmFuc3Bvc2VkIiwibmVnYXRlZCIsImludmVydGVkIiwiZGV0IiwiSURFTlRJVFkiLCJUUkFOU0xBVElPTl8zRCIsIlNDQUxJTkciLCJnZXREZXRlcm1pbmFudCIsIkVycm9yIiwidGltZXNNYXRyaXgiLCJ0aW1lc1ZlY3RvcjQiLCJ2ZWN0b3I0IiwieCIsInkiLCJ6IiwidyIsInRpbWVzVmVjdG9yMyIsInZlY3RvcjMiLCJ0b1ZlY3RvcjQiLCJ0b1ZlY3RvcjMiLCJ0aW1lc1RyYW5zcG9zZVZlY3RvcjQiLCJ0aW1lc1RyYW5zcG9zZVZlY3RvcjMiLCJ0aW1lc1JlbGF0aXZlVmVjdG9yMyIsImRldGVybWluYW50IiwidG9TdHJpbmciLCJtYWtlSW1tdXRhYmxlIiwiYXNzZXJ0IiwiY29weVRvQXJyYXkiLCJhcnJheSIsImlkZW50aXR5IiwidHJhbnNsYXRpb25Gcm9tVmVjdG9yIiwidmVjdG9yIiwic2NhbGluZyIsInJvdGF0aW9uQXhpc0FuZ2xlIiwiYXhpcyIsImFuZ2xlIiwiYyIsImNvcyIsInMiLCJzaW4iLCJDIiwicm90YXRpb25YIiwicm90YXRpb25ZIiwicm90YXRpb25aIiwiZ2x1UGVyc3BlY3RpdmUiLCJmb3ZZUmFkaWFucyIsImFzcGVjdCIsInpOZWFyIiwiekZhciIsImNvdGFuZ2VudCIsInJlZ2lzdGVyIiwiYnlLZXlzIl0sInNvdXJjZXMiOlsiTWF0cml4NC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiA0LWRpbWVuc2lvbmFsIE1hdHJpeFxuICpcbiAqIFRPRE86IGNvbnNpZGVyIGFkZGluZyBhZmZpbmUgZmxhZyBpZiBpdCB3aWxsIGhlbHAgcGVyZm9ybWFuY2UgKGEgbGEgTWF0cml4MylcbiAqIFRPRE86IGdldCByb3RhdGlvbiBhbmdsZXNcbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuLyogZXNsaW50LWRpc2FibGUgYmFkLXNpbS10ZXh0ICovXG5cbmltcG9ydCBFbnVtZXJhdGlvbkRlcHJlY2F0ZWQgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL0VudW1lcmF0aW9uRGVwcmVjYXRlZC5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5pbXBvcnQgVmVjdG9yNCBmcm9tICcuL1ZlY3RvcjQuanMnO1xuXG5jb25zdCBGbG9hdDMyQXJyYXkgPSB3aW5kb3cuRmxvYXQzMkFycmF5IHx8IEFycmF5O1xuXG5jbGFzcyBNYXRyaXg0IHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdjAwXVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3YwMV1cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2MDJdXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdjAzXVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3YxMF1cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2MTFdXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdjEyXVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3YxM11cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2MjBdXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdjIxXVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3YyMl1cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2MjNdXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdjMwXVxuICAgKiBAcGFyYW0ge251bWJlcn0gW3YzMV1cbiAgICogQHBhcmFtIHtudW1iZXJ9IFt2MzJdXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbdjMzXVxuICAgKiBAcGFyYW0ge01hdHJpeDQuVHlwZXN8dW5kZWZpbmVkfSBbdHlwZV1cbiAgICovXG4gIGNvbnN0cnVjdG9yKCB2MDAsIHYwMSwgdjAyLCB2MDMsIHYxMCwgdjExLCB2MTIsIHYxMywgdjIwLCB2MjEsIHYyMiwgdjIzLCB2MzAsIHYzMSwgdjMyLCB2MzMsIHR5cGUgKSB7XG5cbiAgICAvLyBAcHVibGljIHtGbG9hdDMyQXJyYXl9IC0gZW50cmllcyBzdG9yZWQgaW4gY29sdW1uLW1ham9yIGZvcm1hdFxuICAgIHRoaXMuZW50cmllcyA9IG5ldyBGbG9hdDMyQXJyYXkoIDE2ICk7XG5cbiAgICAvLyBAcHVibGljIHtNYXRyaXg0LlR5cGVzfVxuICAgIHRoaXMudHlwZSA9IFR5cGVzLk9USEVSOyAvLyB3aWxsIGJlIHNldCBieSByb3dNYWpvclxuXG4gICAgdGhpcy5yb3dNYWpvcihcbiAgICAgIHYwMCAhPT0gdW5kZWZpbmVkID8gdjAwIDogMSwgdjAxICE9PSB1bmRlZmluZWQgPyB2MDEgOiAwLCB2MDIgIT09IHVuZGVmaW5lZCA/IHYwMiA6IDAsIHYwMyAhPT0gdW5kZWZpbmVkID8gdjAzIDogMCxcbiAgICAgIHYxMCAhPT0gdW5kZWZpbmVkID8gdjEwIDogMCwgdjExICE9PSB1bmRlZmluZWQgPyB2MTEgOiAxLCB2MTIgIT09IHVuZGVmaW5lZCA/IHYxMiA6IDAsIHYxMyAhPT0gdW5kZWZpbmVkID8gdjEzIDogMCxcbiAgICAgIHYyMCAhPT0gdW5kZWZpbmVkID8gdjIwIDogMCwgdjIxICE9PSB1bmRlZmluZWQgPyB2MjEgOiAwLCB2MjIgIT09IHVuZGVmaW5lZCA/IHYyMiA6IDEsIHYyMyAhPT0gdW5kZWZpbmVkID8gdjIzIDogMCxcbiAgICAgIHYzMCAhPT0gdW5kZWZpbmVkID8gdjMwIDogMCwgdjMxICE9PSB1bmRlZmluZWQgPyB2MzEgOiAwLCB2MzIgIT09IHVuZGVmaW5lZCA/IHYzMiA6IDAsIHYzMyAhPT0gdW5kZWZpbmVkID8gdjMzIDogMSxcbiAgICAgIHR5cGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIGFsbCBlbnRyaWVzIG9mIHRoZSBtYXRyaXggaW4gcm93LW1ham9yIG9yZGVyLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2MDBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHYwMVxuICAgKiBAcGFyYW0ge251bWJlcn0gdjAyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2MDNcbiAgICogQHBhcmFtIHtudW1iZXJ9IHYxMFxuICAgKiBAcGFyYW0ge251bWJlcn0gdjExXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2MTJcbiAgICogQHBhcmFtIHtudW1iZXJ9IHYxM1xuICAgKiBAcGFyYW0ge251bWJlcn0gdjIwXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2MjFcbiAgICogQHBhcmFtIHtudW1iZXJ9IHYyMlxuICAgKiBAcGFyYW0ge251bWJlcn0gdjIzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2MzBcbiAgICogQHBhcmFtIHtudW1iZXJ9IHYzMVxuICAgKiBAcGFyYW0ge251bWJlcn0gdjMyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB2MzNcbiAgICogQHBhcmFtIHtNYXRyaXg0LlR5cGVzfHVuZGVmaW5lZH0gW3R5cGVdXG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fSAtIFNlbGYgcmVmZXJlbmNlXG4gICAqL1xuICByb3dNYWpvciggdjAwLCB2MDEsIHYwMiwgdjAzLCB2MTAsIHYxMSwgdjEyLCB2MTMsIHYyMCwgdjIxLCB2MjIsIHYyMywgdjMwLCB2MzEsIHYzMiwgdjMzLCB0eXBlICkge1xuICAgIHRoaXMuZW50cmllc1sgMCBdID0gdjAwO1xuICAgIHRoaXMuZW50cmllc1sgMSBdID0gdjEwO1xuICAgIHRoaXMuZW50cmllc1sgMiBdID0gdjIwO1xuICAgIHRoaXMuZW50cmllc1sgMyBdID0gdjMwO1xuICAgIHRoaXMuZW50cmllc1sgNCBdID0gdjAxO1xuICAgIHRoaXMuZW50cmllc1sgNSBdID0gdjExO1xuICAgIHRoaXMuZW50cmllc1sgNiBdID0gdjIxO1xuICAgIHRoaXMuZW50cmllc1sgNyBdID0gdjMxO1xuICAgIHRoaXMuZW50cmllc1sgOCBdID0gdjAyO1xuICAgIHRoaXMuZW50cmllc1sgOSBdID0gdjEyO1xuICAgIHRoaXMuZW50cmllc1sgMTAgXSA9IHYyMjtcbiAgICB0aGlzLmVudHJpZXNbIDExIF0gPSB2MzI7XG4gICAgdGhpcy5lbnRyaWVzWyAxMiBdID0gdjAzO1xuICAgIHRoaXMuZW50cmllc1sgMTMgXSA9IHYxMztcbiAgICB0aGlzLmVudHJpZXNbIDE0IF0gPSB2MjM7XG4gICAgdGhpcy5lbnRyaWVzWyAxNSBdID0gdjMzO1xuXG4gICAgLy8gVE9ETzogY29uc2lkZXIgcGVyZm9ybWFuY2Ugb2YgdGhlIGFmZmluZSBjaGVjayBoZXJlXG4gICAgdGhpcy50eXBlID0gdHlwZSA9PT0gdW5kZWZpbmVkID8gKCAoIHYzMCA9PT0gMCAmJiB2MzEgPT09IDAgJiYgdjMyID09PSAwICYmIHYzMyA9PT0gMSApID8gVHlwZXMuQUZGSU5FIDogVHlwZXMuT1RIRVIgKSA6IHR5cGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyBhbGwgZW50cmllcyBvZiB0aGUgbWF0cml4IGluIGNvbHVtbi1tYWpvciBvcmRlci5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0geyp9IHYwMFxuICAgKiBAcGFyYW0geyp9IHYxMFxuICAgKiBAcGFyYW0geyp9IHYyMFxuICAgKiBAcGFyYW0geyp9IHYzMFxuICAgKiBAcGFyYW0geyp9IHYwMVxuICAgKiBAcGFyYW0geyp9IHYxMVxuICAgKiBAcGFyYW0geyp9IHYyMVxuICAgKiBAcGFyYW0geyp9IHYzMVxuICAgKiBAcGFyYW0geyp9IHYwMlxuICAgKiBAcGFyYW0geyp9IHYxMlxuICAgKiBAcGFyYW0geyp9IHYyMlxuICAgKiBAcGFyYW0geyp9IHYzMlxuICAgKiBAcGFyYW0geyp9IHYwM1xuICAgKiBAcGFyYW0geyp9IHYxM1xuICAgKiBAcGFyYW0geyp9IHYyM1xuICAgKiBAcGFyYW0geyp9IHYzM1xuICAgKiBAcGFyYW0ge01hdHJpeDQuVHlwZXN8dW5kZWZpbmVkfSBbdHlwZV1cbiAgICogQHJldHVybnMge01hdHJpeDR9IC0gU2VsZiByZWZlcmVuY2VcbiAgICovXG4gIGNvbHVtbk1ham9yKCB2MDAsIHYxMCwgdjIwLCB2MzAsIHYwMSwgdjExLCB2MjEsIHYzMSwgdjAyLCB2MTIsIHYyMiwgdjMyLCB2MDMsIHYxMywgdjIzLCB2MzMsIHR5cGUgKSB7XG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoIHYwMCwgdjAxLCB2MDIsIHYwMywgdjEwLCB2MTEsIHYxMiwgdjEzLCB2MjAsIHYyMSwgdjIyLCB2MjMsIHYzMCwgdjMxLCB2MzIsIHYzMywgdHlwZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBtYXRyaXggdG8gdGhlIHZhbHVlIG9mIHRoZSBwYXNzZWQtaW4gbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4NH0gbWF0cml4XG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fSAtIFNlbGYgcmVmZXJlbmNlXG4gICAqL1xuICBzZXQoIG1hdHJpeCApIHtcbiAgICByZXR1cm4gdGhpcy5yb3dNYWpvcihcbiAgICAgIG1hdHJpeC5tMDAoKSwgbWF0cml4Lm0wMSgpLCBtYXRyaXgubTAyKCksIG1hdHJpeC5tMDMoKSxcbiAgICAgIG1hdHJpeC5tMTAoKSwgbWF0cml4Lm0xMSgpLCBtYXRyaXgubTEyKCksIG1hdHJpeC5tMTMoKSxcbiAgICAgIG1hdHJpeC5tMjAoKSwgbWF0cml4Lm0yMSgpLCBtYXRyaXgubTIyKCksIG1hdHJpeC5tMjMoKSxcbiAgICAgIG1hdHJpeC5tMzAoKSwgbWF0cml4Lm0zMSgpLCBtYXRyaXgubTMyKCksIG1hdHJpeC5tMzMoKSxcbiAgICAgIG1hdHJpeC50eXBlICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgMCwwIGVudHJ5IG9mIHRoaXMgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtMDAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMCBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIDAsMSBlbnRyeSBvZiB0aGlzIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgbTAxKCkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXNbIDQgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAwLDIgZW50cnkgb2YgdGhpcyBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG0wMigpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyA4IF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgMCwzIGVudHJ5IG9mIHRoaXMgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtMDMoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMTIgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAxLDAgZW50cnkgb2YgdGhpcyBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG0xMCgpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyAxIF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgMSwxIGVudHJ5IG9mIHRoaXMgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtMTEoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgNSBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIDEsMiBlbnRyeSBvZiB0aGlzIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgbTEyKCkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXNbIDkgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAxLDMgZW50cnkgb2YgdGhpcyBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG0xMygpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyAxMyBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIDIsMCBlbnRyeSBvZiB0aGlzIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgbTIwKCkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXNbIDIgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAyLDEgZW50cnkgb2YgdGhpcyBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG0yMSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyA2IF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgMiwyIGVudHJ5IG9mIHRoaXMgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtMjIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMTAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAyLDMgZW50cnkgb2YgdGhpcyBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG0yMygpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyAxNCBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIDMsMCBlbnRyeSBvZiB0aGlzIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgbTMwKCkge1xuICAgIHJldHVybiB0aGlzLmVudHJpZXNbIDMgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAzLDEgZW50cnkgb2YgdGhpcyBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG0zMSgpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyA3IF07XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgMywyIGVudHJ5IG9mIHRoaXMgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBtMzIoKSB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMTEgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAzLDMgZW50cnkgb2YgdGhpcyBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG0zMygpIHtcbiAgICByZXR1cm4gdGhpcy5lbnRyaWVzWyAxNSBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciBhbGwgb2YgdGhpcyBtYXRyaXgncyBlbnRyaWVzIGFyZSBmaW5pdGUgKG5vbi1pbmZpbml0ZSBhbmQgbm9uLU5hTikuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBpc0Zpbml0ZSgpIHtcbiAgICByZXR1cm4gaXNGaW5pdGUoIHRoaXMubTAwKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMDEoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0wMigpICkgJiZcbiAgICAgICAgICAgaXNGaW5pdGUoIHRoaXMubTAzKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMTAoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0xMSgpICkgJiZcbiAgICAgICAgICAgaXNGaW5pdGUoIHRoaXMubTEyKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMTMoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0yMCgpICkgJiZcbiAgICAgICAgICAgaXNGaW5pdGUoIHRoaXMubTIxKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMjIoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0yMygpICkgJiZcbiAgICAgICAgICAgaXNGaW5pdGUoIHRoaXMubTMwKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMzEoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0zMigpICkgJiZcbiAgICAgICAgICAgaXNGaW5pdGUoIHRoaXMubTMzKCkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSAzRCB0cmFuc2xhdGlvbiwgYXNzdW1pbmcgbXVsdGlwbGljYXRpb24gd2l0aCBhIGhvbW9nZW5lb3VzIHZlY3Rvci5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7VmVjdG9yM31cbiAgICovXG4gIGdldFRyYW5zbGF0aW9uKCkge1xuICAgIHJldHVybiBuZXcgVmVjdG9yMyggdGhpcy5tMDMoKSwgdGhpcy5tMTMoKSwgdGhpcy5tMjMoKSApO1xuICB9XG5cbiAgZ2V0IHRyYW5zbGF0aW9uKCkgeyByZXR1cm4gdGhpcy5nZXRUcmFuc2xhdGlvbigpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB2ZWN0b3IgdGhhdCBpcyBlcXVpdmFsZW50IHRvICggVCgxLDAsMCkubWFnbml0dWRlLCBUKDAsMSwwKS5tYWduaXR1ZGUsIFQoMCwwLDEpLm1hZ25pdHVkZSApXG4gICAqIHdoZXJlIFQgaXMgYSByZWxhdGl2ZSB0cmFuc2Zvcm0uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge1ZlY3RvcjN9XG4gICAqL1xuICBnZXRTY2FsZVZlY3RvcigpIHtcbiAgICBjb25zdCBtMDAwMyA9IHRoaXMubTAwKCkgKyB0aGlzLm0wMygpO1xuICAgIGNvbnN0IG0xMDEzID0gdGhpcy5tMTAoKSArIHRoaXMubTEzKCk7XG4gICAgY29uc3QgbTIwMjMgPSB0aGlzLm0yMCgpICsgdGhpcy5tMjMoKTtcbiAgICBjb25zdCBtMzAzMyA9IHRoaXMubTMwKCkgKyB0aGlzLm0zMygpO1xuICAgIGNvbnN0IG0wMTAzID0gdGhpcy5tMDEoKSArIHRoaXMubTAzKCk7XG4gICAgY29uc3QgbTExMTMgPSB0aGlzLm0xMSgpICsgdGhpcy5tMTMoKTtcbiAgICBjb25zdCBtMjEyMyA9IHRoaXMubTIxKCkgKyB0aGlzLm0yMygpO1xuICAgIGNvbnN0IG0zMTMzID0gdGhpcy5tMzEoKSArIHRoaXMubTMzKCk7XG4gICAgY29uc3QgbTAyMDMgPSB0aGlzLm0wMigpICsgdGhpcy5tMDMoKTtcbiAgICBjb25zdCBtMTIxMyA9IHRoaXMubTEyKCkgKyB0aGlzLm0xMygpO1xuICAgIGNvbnN0IG0yMjIzID0gdGhpcy5tMjIoKSArIHRoaXMubTIzKCk7XG4gICAgY29uc3QgbTMyMzMgPSB0aGlzLm0zMigpICsgdGhpcy5tMzMoKTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjMoXG4gICAgICBNYXRoLnNxcnQoIG0wMDAzICogbTAwMDMgKyBtMTAxMyAqIG0xMDEzICsgbTIwMjMgKiBtMjAyMyArIG0zMDMzICogbTMwMzMgKSxcbiAgICAgIE1hdGguc3FydCggbTAxMDMgKiBtMDEwMyArIG0xMTEzICogbTExMTMgKyBtMjEyMyAqIG0yMTIzICsgbTMxMzMgKiBtMzEzMyApLFxuICAgICAgTWF0aC5zcXJ0KCBtMDIwMyAqIG0wMjAzICsgbTEyMTMgKiBtMTIxMyArIG0yMjIzICogbTIyMjMgKyBtMzIzMyAqIG0zMjMzICkgKTtcbiAgfVxuXG4gIGdldCBzY2FsZVZlY3RvcigpIHsgcmV0dXJuIHRoaXMuZ2V0U2NhbGVWZWN0b3IoKTsgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBDU1MgdHJhbnNmb3JtIHN0cmluZyBmb3IgdGhlIGFzc29jaWF0ZWQgaG9tb2dlbmVvdXMgM2QgdHJhbnNmb3JtYXRpb24uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge3N0cmluZ31cbiAgICovXG4gIGdldENTU1RyYW5zZm9ybSgpIHtcbiAgICAvLyBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy10cmFuc2Zvcm1zLywgcGFydGljdWxhcmx5IFNlY3Rpb24gMTMgdGhhdCBkaXNjdXNzZXMgdGhlIFNWRyBjb21wYXRpYmlsaXR5XG5cbiAgICAvLyB0aGUgaW5uZXIgcGFydCBvZiBhIENTUzMgdHJhbnNmb3JtLCBidXQgcmVtZW1iZXIgdG8gYWRkIHRoZSBicm93c2VyLXNwZWNpZmljIHBhcnRzIVxuICAgIC8vIE5PVEU6IHRoZSB0b0ZpeGVkIGNhbGxzIGFyZSBpbmxpbmVkIGZvciBwZXJmb3JtYW5jZSByZWFzb25zXG4gICAgcmV0dXJuIGBtYXRyaXgzZCgke1xuICAgICAgdGhpcy5lbnRyaWVzWyAwIF0udG9GaXhlZCggMjAgKX0sJHtcbiAgICAgIHRoaXMuZW50cmllc1sgMSBdLnRvRml4ZWQoIDIwICl9LCR7XG4gICAgICB0aGlzLmVudHJpZXNbIDIgXS50b0ZpeGVkKCAyMCApfSwke1xuICAgICAgdGhpcy5lbnRyaWVzWyAzIF0udG9GaXhlZCggMjAgKX0sJHtcbiAgICAgIHRoaXMuZW50cmllc1sgNCBdLnRvRml4ZWQoIDIwICl9LCR7XG4gICAgICB0aGlzLmVudHJpZXNbIDUgXS50b0ZpeGVkKCAyMCApfSwke1xuICAgICAgdGhpcy5lbnRyaWVzWyA2IF0udG9GaXhlZCggMjAgKX0sJHtcbiAgICAgIHRoaXMuZW50cmllc1sgNyBdLnRvRml4ZWQoIDIwICl9LCR7XG4gICAgICB0aGlzLmVudHJpZXNbIDggXS50b0ZpeGVkKCAyMCApfSwke1xuICAgICAgdGhpcy5lbnRyaWVzWyA5IF0udG9GaXhlZCggMjAgKX0sJHtcbiAgICAgIHRoaXMuZW50cmllc1sgMTAgXS50b0ZpeGVkKCAyMCApfSwke1xuICAgICAgdGhpcy5lbnRyaWVzWyAxMSBdLnRvRml4ZWQoIDIwICl9LCR7XG4gICAgICB0aGlzLmVudHJpZXNbIDEyIF0udG9GaXhlZCggMjAgKX0sJHtcbiAgICAgIHRoaXMuZW50cmllc1sgMTMgXS50b0ZpeGVkKCAyMCApfSwke1xuICAgICAgdGhpcy5lbnRyaWVzWyAxNCBdLnRvRml4ZWQoIDIwICl9LCR7XG4gICAgICB0aGlzLmVudHJpZXNbIDE1IF0udG9GaXhlZCggMjAgKX0pYDtcbiAgfVxuXG4gIGdldCBjc3NUcmFuc2Zvcm0oKSB7IHJldHVybiB0aGlzLmdldENTU1RyYW5zZm9ybSgpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZXhhY3QgZXF1YWxpdHkgd2l0aCBhbm90aGVyIG1hdHJpeFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4NH0gbWF0cml4XG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgZXF1YWxzKCBtYXRyaXggKSB7XG4gICAgcmV0dXJuIHRoaXMubTAwKCkgPT09IG1hdHJpeC5tMDAoKSAmJiB0aGlzLm0wMSgpID09PSBtYXRyaXgubTAxKCkgJiYgdGhpcy5tMDIoKSA9PT0gbWF0cml4Lm0wMigpICYmIHRoaXMubTAzKCkgPT09IG1hdHJpeC5tMDMoKSAmJlxuICAgICAgICAgICB0aGlzLm0xMCgpID09PSBtYXRyaXgubTEwKCkgJiYgdGhpcy5tMTEoKSA9PT0gbWF0cml4Lm0xMSgpICYmIHRoaXMubTEyKCkgPT09IG1hdHJpeC5tMTIoKSAmJiB0aGlzLm0xMygpID09PSBtYXRyaXgubTEzKCkgJiZcbiAgICAgICAgICAgdGhpcy5tMjAoKSA9PT0gbWF0cml4Lm0yMCgpICYmIHRoaXMubTIxKCkgPT09IG1hdHJpeC5tMjEoKSAmJiB0aGlzLm0yMigpID09PSBtYXRyaXgubTIyKCkgJiYgdGhpcy5tMjMoKSA9PT0gbWF0cml4Lm0yMygpICYmXG4gICAgICAgICAgIHRoaXMubTMwKCkgPT09IG1hdHJpeC5tMzAoKSAmJiB0aGlzLm0zMSgpID09PSBtYXRyaXgubTMxKCkgJiYgdGhpcy5tMzIoKSA9PT0gbWF0cml4Lm0zMigpICYmIHRoaXMubTMzKCkgPT09IG1hdHJpeC5tMzMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGVxdWFsaXR5IHdpdGhpbiBhIG1hcmdpbiBvZiBlcnJvciB3aXRoIGFub3RoZXIgbWF0cml4XG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXg0fSBtYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGVwc2lsb25cbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBlcXVhbHNFcHNpbG9uKCBtYXRyaXgsIGVwc2lsb24gKSB7XG4gICAgcmV0dXJuIE1hdGguYWJzKCB0aGlzLm0wMCgpIC0gbWF0cml4Lm0wMCgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0wMSgpIC0gbWF0cml4Lm0wMSgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0wMigpIC0gbWF0cml4Lm0wMigpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0wMygpIC0gbWF0cml4Lm0wMygpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0xMCgpIC0gbWF0cml4Lm0xMCgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0xMSgpIC0gbWF0cml4Lm0xMSgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0xMigpIC0gbWF0cml4Lm0xMigpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0xMygpIC0gbWF0cml4Lm0xMygpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0yMCgpIC0gbWF0cml4Lm0yMCgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0yMSgpIC0gbWF0cml4Lm0yMSgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0yMigpIC0gbWF0cml4Lm0yMigpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0yMygpIC0gbWF0cml4Lm0yMygpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0zMCgpIC0gbWF0cml4Lm0zMCgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0zMSgpIC0gbWF0cml4Lm0zMSgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0zMigpIC0gbWF0cml4Lm0zMigpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0zMygpIC0gbWF0cml4Lm0zMygpICkgPCBlcHNpbG9uO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIEltbXV0YWJsZSBvcGVyYXRpb25zIChyZXR1cm5pbmcgYSBuZXcgbWF0cml4KVxuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgY29weSBvZiB0aGlzIG1hdHJpeFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fVxuICAgKi9cbiAgY29weSgpIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICB0aGlzLm0wMCgpLCB0aGlzLm0wMSgpLCB0aGlzLm0wMigpLCB0aGlzLm0wMygpLFxuICAgICAgdGhpcy5tMTAoKSwgdGhpcy5tMTEoKSwgdGhpcy5tMTIoKSwgdGhpcy5tMTMoKSxcbiAgICAgIHRoaXMubTIwKCksIHRoaXMubTIxKCksIHRoaXMubTIyKCksIHRoaXMubTIzKCksXG4gICAgICB0aGlzLm0zMCgpLCB0aGlzLm0zMSgpLCB0aGlzLm0zMigpLCB0aGlzLm0zMygpLFxuICAgICAgdGhpcy50eXBlXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IG1hdHJpeCwgZGVmaW5lZCBieSB0aGlzIG1hdHJpeCBwbHVzIHRoZSBwcm92aWRlZCBtYXRyaXhcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeDR9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4NH1cbiAgICovXG4gIHBsdXMoIG1hdHJpeCApIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICB0aGlzLm0wMCgpICsgbWF0cml4Lm0wMCgpLCB0aGlzLm0wMSgpICsgbWF0cml4Lm0wMSgpLCB0aGlzLm0wMigpICsgbWF0cml4Lm0wMigpLCB0aGlzLm0wMygpICsgbWF0cml4Lm0wMygpLFxuICAgICAgdGhpcy5tMTAoKSArIG1hdHJpeC5tMTAoKSwgdGhpcy5tMTEoKSArIG1hdHJpeC5tMTEoKSwgdGhpcy5tMTIoKSArIG1hdHJpeC5tMTIoKSwgdGhpcy5tMTMoKSArIG1hdHJpeC5tMTMoKSxcbiAgICAgIHRoaXMubTIwKCkgKyBtYXRyaXgubTIwKCksIHRoaXMubTIxKCkgKyBtYXRyaXgubTIxKCksIHRoaXMubTIyKCkgKyBtYXRyaXgubTIyKCksIHRoaXMubTIzKCkgKyBtYXRyaXgubTIzKCksXG4gICAgICB0aGlzLm0zMCgpICsgbWF0cml4Lm0zMCgpLCB0aGlzLm0zMSgpICsgbWF0cml4Lm0zMSgpLCB0aGlzLm0zMigpICsgbWF0cml4Lm0zMigpLCB0aGlzLm0zMygpICsgbWF0cml4Lm0zMygpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IG1hdHJpeCwgZGVmaW5lZCBieSB0aGlzIG1hdHJpeCBwbHVzIHRoZSBwcm92aWRlZCBtYXRyaXhcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeDR9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4NH1cbiAgICovXG4gIG1pbnVzKCBtYXRyaXggKSB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXg0KFxuICAgICAgdGhpcy5tMDAoKSAtIG1hdHJpeC5tMDAoKSwgdGhpcy5tMDEoKSAtIG1hdHJpeC5tMDEoKSwgdGhpcy5tMDIoKSAtIG1hdHJpeC5tMDIoKSwgdGhpcy5tMDMoKSAtIG1hdHJpeC5tMDMoKSxcbiAgICAgIHRoaXMubTEwKCkgLSBtYXRyaXgubTEwKCksIHRoaXMubTExKCkgLSBtYXRyaXgubTExKCksIHRoaXMubTEyKCkgLSBtYXRyaXgubTEyKCksIHRoaXMubTEzKCkgLSBtYXRyaXgubTEzKCksXG4gICAgICB0aGlzLm0yMCgpIC0gbWF0cml4Lm0yMCgpLCB0aGlzLm0yMSgpIC0gbWF0cml4Lm0yMSgpLCB0aGlzLm0yMigpIC0gbWF0cml4Lm0yMigpLCB0aGlzLm0yMygpIC0gbWF0cml4Lm0yMygpLFxuICAgICAgdGhpcy5tMzAoKSAtIG1hdHJpeC5tMzAoKSwgdGhpcy5tMzEoKSAtIG1hdHJpeC5tMzEoKSwgdGhpcy5tMzIoKSAtIG1hdHJpeC5tMzIoKSwgdGhpcy5tMzMoKSAtIG1hdHJpeC5tMzMoKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHRyYW5zcG9zZWQgY29weSBvZiB0aGlzIG1hdHJpeFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fVxuICAgKi9cbiAgdHJhbnNwb3NlZCgpIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICB0aGlzLm0wMCgpLCB0aGlzLm0xMCgpLCB0aGlzLm0yMCgpLCB0aGlzLm0zMCgpLFxuICAgICAgdGhpcy5tMDEoKSwgdGhpcy5tMTEoKSwgdGhpcy5tMjEoKSwgdGhpcy5tMzEoKSxcbiAgICAgIHRoaXMubTAyKCksIHRoaXMubTEyKCksIHRoaXMubTIyKCksIHRoaXMubTMyKCksXG4gICAgICB0aGlzLm0wMygpLCB0aGlzLm0xMygpLCB0aGlzLm0yMygpLCB0aGlzLm0zMygpICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5lZ2F0ZWQgY29weSBvZiB0aGlzIG1hdHJpeFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXgzfVxuICAgKi9cbiAgbmVnYXRlZCgpIHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICAtdGhpcy5tMDAoKSwgLXRoaXMubTAxKCksIC10aGlzLm0wMigpLCAtdGhpcy5tMDMoKSxcbiAgICAgIC10aGlzLm0xMCgpLCAtdGhpcy5tMTEoKSwgLXRoaXMubTEyKCksIC10aGlzLm0xMygpLFxuICAgICAgLXRoaXMubTIwKCksIC10aGlzLm0yMSgpLCAtdGhpcy5tMjIoKSwgLXRoaXMubTIzKCksXG4gICAgICAtdGhpcy5tMzAoKSwgLXRoaXMubTMxKCksIC10aGlzLm0zMigpLCAtdGhpcy5tMzMoKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaW52ZXJ0ZWQgY29weSBvZiB0aGlzIG1hdHJpeFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXgzfVxuICAgKi9cbiAgaW52ZXJ0ZWQoKSB7XG4gICAgbGV0IGRldDtcbiAgICBzd2l0Y2goIHRoaXMudHlwZSApIHtcbiAgICAgIGNhc2UgVHlwZXMuSURFTlRJVFk6XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgY2FzZSBUeXBlcy5UUkFOU0xBVElPTl8zRDpcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXg0KFxuICAgICAgICAgIDEsIDAsIDAsIC10aGlzLm0wMygpLFxuICAgICAgICAgIDAsIDEsIDAsIC10aGlzLm0xMygpLFxuICAgICAgICAgIDAsIDAsIDEsIC10aGlzLm0yMygpLFxuICAgICAgICAgIDAsIDAsIDAsIDEsIFR5cGVzLlRSQU5TTEFUSU9OXzNEICk7XG4gICAgICBjYXNlIFR5cGVzLlNDQUxJTkc6XG4gICAgICAgIHJldHVybiBuZXcgTWF0cml4NChcbiAgICAgICAgICAxIC8gdGhpcy5tMDAoKSwgMCwgMCwgMCxcbiAgICAgICAgICAwLCAxIC8gdGhpcy5tMTEoKSwgMCwgMCxcbiAgICAgICAgICAwLCAwLCAxIC8gdGhpcy5tMjIoKSwgMCxcbiAgICAgICAgICAwLCAwLCAwLCAxIC8gdGhpcy5tMzMoKSwgVHlwZXMuU0NBTElORyApO1xuICAgICAgY2FzZSBUeXBlcy5BRkZJTkU6XG4gICAgICBjYXNlIFR5cGVzLk9USEVSOlxuICAgICAgICBkZXQgPSB0aGlzLmdldERldGVybWluYW50KCk7XG4gICAgICAgIGlmICggZGV0ICE9PSAwICkge1xuICAgICAgICAgIHJldHVybiBuZXcgTWF0cml4NChcbiAgICAgICAgICAgICggLXRoaXMubTMxKCkgKiB0aGlzLm0yMigpICogdGhpcy5tMTMoKSArIHRoaXMubTIxKCkgKiB0aGlzLm0zMigpICogdGhpcy5tMTMoKSArIHRoaXMubTMxKCkgKiB0aGlzLm0xMigpICogdGhpcy5tMjMoKSAtIHRoaXMubTExKCkgKiB0aGlzLm0zMigpICogdGhpcy5tMjMoKSAtIHRoaXMubTIxKCkgKiB0aGlzLm0xMigpICogdGhpcy5tMzMoKSArIHRoaXMubTExKCkgKiB0aGlzLm0yMigpICogdGhpcy5tMzMoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0zMSgpICogdGhpcy5tMjIoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0yMSgpICogdGhpcy5tMzIoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0zMSgpICogdGhpcy5tMDIoKSAqIHRoaXMubTIzKCkgKyB0aGlzLm0wMSgpICogdGhpcy5tMzIoKSAqIHRoaXMubTIzKCkgKyB0aGlzLm0yMSgpICogdGhpcy5tMDIoKSAqIHRoaXMubTMzKCkgLSB0aGlzLm0wMSgpICogdGhpcy5tMjIoKSAqIHRoaXMubTMzKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTMxKCkgKiB0aGlzLm0xMigpICogdGhpcy5tMDMoKSArIHRoaXMubTExKCkgKiB0aGlzLm0zMigpICogdGhpcy5tMDMoKSArIHRoaXMubTMxKCkgKiB0aGlzLm0wMigpICogdGhpcy5tMTMoKSAtIHRoaXMubTAxKCkgKiB0aGlzLm0zMigpICogdGhpcy5tMTMoKSAtIHRoaXMubTExKCkgKiB0aGlzLm0wMigpICogdGhpcy5tMzMoKSArIHRoaXMubTAxKCkgKiB0aGlzLm0xMigpICogdGhpcy5tMzMoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0yMSgpICogdGhpcy5tMTIoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0xMSgpICogdGhpcy5tMjIoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0yMSgpICogdGhpcy5tMDIoKSAqIHRoaXMubTEzKCkgKyB0aGlzLm0wMSgpICogdGhpcy5tMjIoKSAqIHRoaXMubTEzKCkgKyB0aGlzLm0xMSgpICogdGhpcy5tMDIoKSAqIHRoaXMubTIzKCkgLSB0aGlzLm0wMSgpICogdGhpcy5tMTIoKSAqIHRoaXMubTIzKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMzAoKSAqIHRoaXMubTIyKCkgKiB0aGlzLm0xMygpIC0gdGhpcy5tMjAoKSAqIHRoaXMubTMyKCkgKiB0aGlzLm0xMygpIC0gdGhpcy5tMzAoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0yMygpICsgdGhpcy5tMTAoKSAqIHRoaXMubTMyKCkgKiB0aGlzLm0yMygpICsgdGhpcy5tMjAoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0zMygpIC0gdGhpcy5tMTAoKSAqIHRoaXMubTIyKCkgKiB0aGlzLm0zMygpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0zMCgpICogdGhpcy5tMjIoKSAqIHRoaXMubTAzKCkgKyB0aGlzLm0yMCgpICogdGhpcy5tMzIoKSAqIHRoaXMubTAzKCkgKyB0aGlzLm0zMCgpICogdGhpcy5tMDIoKSAqIHRoaXMubTIzKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMzIoKSAqIHRoaXMubTIzKCkgLSB0aGlzLm0yMCgpICogdGhpcy5tMDIoKSAqIHRoaXMubTMzKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMjIoKSAqIHRoaXMubTMzKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMzAoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0wMygpIC0gdGhpcy5tMTAoKSAqIHRoaXMubTMyKCkgKiB0aGlzLm0wMygpIC0gdGhpcy5tMzAoKSAqIHRoaXMubTAyKCkgKiB0aGlzLm0xMygpICsgdGhpcy5tMDAoKSAqIHRoaXMubTMyKCkgKiB0aGlzLm0xMygpICsgdGhpcy5tMTAoKSAqIHRoaXMubTAyKCkgKiB0aGlzLm0zMygpIC0gdGhpcy5tMDAoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0zMygpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0yMCgpICogdGhpcy5tMTIoKSAqIHRoaXMubTAzKCkgKyB0aGlzLm0xMCgpICogdGhpcy5tMjIoKSAqIHRoaXMubTAzKCkgKyB0aGlzLm0yMCgpICogdGhpcy5tMDIoKSAqIHRoaXMubTEzKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMjIoKSAqIHRoaXMubTEzKCkgLSB0aGlzLm0xMCgpICogdGhpcy5tMDIoKSAqIHRoaXMubTIzKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMTIoKSAqIHRoaXMubTIzKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTMwKCkgKiB0aGlzLm0yMSgpICogdGhpcy5tMTMoKSArIHRoaXMubTIwKCkgKiB0aGlzLm0zMSgpICogdGhpcy5tMTMoKSArIHRoaXMubTMwKCkgKiB0aGlzLm0xMSgpICogdGhpcy5tMjMoKSAtIHRoaXMubTEwKCkgKiB0aGlzLm0zMSgpICogdGhpcy5tMjMoKSAtIHRoaXMubTIwKCkgKiB0aGlzLm0xMSgpICogdGhpcy5tMzMoKSArIHRoaXMubTEwKCkgKiB0aGlzLm0yMSgpICogdGhpcy5tMzMoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0zMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0yMCgpICogdGhpcy5tMzEoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0zMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTIzKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMzEoKSAqIHRoaXMubTIzKCkgKyB0aGlzLm0yMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTMzKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTMzKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTMwKCkgKiB0aGlzLm0xMSgpICogdGhpcy5tMDMoKSArIHRoaXMubTEwKCkgKiB0aGlzLm0zMSgpICogdGhpcy5tMDMoKSArIHRoaXMubTMwKCkgKiB0aGlzLm0wMSgpICogdGhpcy5tMTMoKSAtIHRoaXMubTAwKCkgKiB0aGlzLm0zMSgpICogdGhpcy5tMTMoKSAtIHRoaXMubTEwKCkgKiB0aGlzLm0wMSgpICogdGhpcy5tMzMoKSArIHRoaXMubTAwKCkgKiB0aGlzLm0xMSgpICogdGhpcy5tMzMoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0yMCgpICogdGhpcy5tMTEoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0xMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTAzKCkgLSB0aGlzLm0yMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTEzKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTEzKCkgKyB0aGlzLm0xMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTIzKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMTEoKSAqIHRoaXMubTIzKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMzAoKSAqIHRoaXMubTIxKCkgKiB0aGlzLm0xMigpIC0gdGhpcy5tMjAoKSAqIHRoaXMubTMxKCkgKiB0aGlzLm0xMigpIC0gdGhpcy5tMzAoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0yMigpICsgdGhpcy5tMTAoKSAqIHRoaXMubTMxKCkgKiB0aGlzLm0yMigpICsgdGhpcy5tMjAoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0zMigpIC0gdGhpcy5tMTAoKSAqIHRoaXMubTIxKCkgKiB0aGlzLm0zMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0zMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTAyKCkgKyB0aGlzLm0yMCgpICogdGhpcy5tMzEoKSAqIHRoaXMubTAyKCkgKyB0aGlzLm0zMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTIyKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMzEoKSAqIHRoaXMubTIyKCkgLSB0aGlzLm0yMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTMyKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTMyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMzAoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0wMigpIC0gdGhpcy5tMTAoKSAqIHRoaXMubTMxKCkgKiB0aGlzLm0wMigpIC0gdGhpcy5tMzAoKSAqIHRoaXMubTAxKCkgKiB0aGlzLm0xMigpICsgdGhpcy5tMDAoKSAqIHRoaXMubTMxKCkgKiB0aGlzLm0xMigpICsgdGhpcy5tMTAoKSAqIHRoaXMubTAxKCkgKiB0aGlzLm0zMigpIC0gdGhpcy5tMDAoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0zMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0yMCgpICogdGhpcy5tMTEoKSAqIHRoaXMubTAyKCkgKyB0aGlzLm0xMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTAyKCkgKyB0aGlzLm0yMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTEyKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMjEoKSAqIHRoaXMubTEyKCkgLSB0aGlzLm0xMCgpICogdGhpcy5tMDEoKSAqIHRoaXMubTIyKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMTEoKSAqIHRoaXMubTIyKCkgKSAvIGRldFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnTWF0cml4IGNvdWxkIG5vdCBiZSBpbnZlcnRlZCwgZGV0ZXJtaW5hbnQgPT09IDAnICk7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvciggYE1hdHJpeDQuaW52ZXJ0ZWQgd2l0aCB1bmtub3duIHR5cGU6ICR7dGhpcy50eXBlfWAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG1hdHJpeCwgZGVmaW5lZCBieSB0aGUgbXVsdGlwbGljYXRpb24gb2YgdGhpcyAqIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeDR9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7TWF0cml4NH0gLSBOT1RFOiB0aGlzIG1heSBiZSB0aGUgc2FtZSBtYXRyaXghXG4gICAqL1xuICB0aW1lc01hdHJpeCggbWF0cml4ICkge1xuICAgIC8vIEkgKiBNID09PSBNICogSSA9PT0gSSAodGhlIGlkZW50aXR5KVxuICAgIGlmICggdGhpcy50eXBlID09PSBUeXBlcy5JREVOVElUWSB8fCBtYXRyaXgudHlwZSA9PT0gVHlwZXMuSURFTlRJVFkgKSB7XG4gICAgICByZXR1cm4gdGhpcy50eXBlID09PSBUeXBlcy5JREVOVElUWSA/IG1hdHJpeCA6IHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKCB0aGlzLnR5cGUgPT09IG1hdHJpeC50eXBlICkge1xuICAgICAgLy8gY3VycmVudGx5IHR3byBtYXRyaWNlcyBvZiB0aGUgc2FtZSB0eXBlIHdpbGwgcmVzdWx0IGluIHRoZSBzYW1lIHJlc3VsdCB0eXBlXG4gICAgICBpZiAoIHRoaXMudHlwZSA9PT0gVHlwZXMuVFJBTlNMQVRJT05fM0QgKSB7XG4gICAgICAgIC8vIGZhc3RlciBjb21iaW5hdGlvbiBvZiB0cmFuc2xhdGlvbnNcbiAgICAgICAgcmV0dXJuIG5ldyBNYXRyaXg0KFxuICAgICAgICAgIDEsIDAsIDAsIHRoaXMubTAzKCkgKyBtYXRyaXgubTAyKCksXG4gICAgICAgICAgMCwgMSwgMCwgdGhpcy5tMTMoKSArIG1hdHJpeC5tMTIoKSxcbiAgICAgICAgICAwLCAwLCAxLCB0aGlzLm0yMygpICsgbWF0cml4Lm0yMygpLFxuICAgICAgICAgIDAsIDAsIDAsIDEsIFR5cGVzLlRSQU5TTEFUSU9OXzNEICk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICggdGhpcy50eXBlID09PSBUeXBlcy5TQ0FMSU5HICkge1xuICAgICAgICAvLyBmYXN0ZXIgY29tYmluYXRpb24gb2Ygc2NhbGluZ1xuICAgICAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDAoKSwgMCwgMCwgMCxcbiAgICAgICAgICAwLCB0aGlzLm0xMSgpICogbWF0cml4Lm0xMSgpLCAwLCAwLFxuICAgICAgICAgIDAsIDAsIHRoaXMubTIyKCkgKiBtYXRyaXgubTIyKCksIDAsXG4gICAgICAgICAgMCwgMCwgMCwgMSwgVHlwZXMuU0NBTElORyApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICggdGhpcy50eXBlICE9PSBUeXBlcy5PVEhFUiAmJiBtYXRyaXgudHlwZSAhPT0gVHlwZXMuT1RIRVIgKSB7XG4gICAgICAvLyBjdXJyZW50bHkgdHdvIG1hdHJpY2VzIHRoYXQgYXJlIGFueXRoaW5nIGJ1dCBcIm90aGVyXCIgYXJlIHRlY2huaWNhbGx5IGFmZmluZSwgYW5kIHRoZSByZXN1bHQgd2lsbCBiZSBhZmZpbmVcblxuICAgICAgLy8gYWZmaW5lIGNhc2VcbiAgICAgIHJldHVybiBuZXcgTWF0cml4NChcbiAgICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0wMigpICogbWF0cml4Lm0yMCgpLFxuICAgICAgICB0aGlzLm0wMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMDEoKSAqIG1hdHJpeC5tMTEoKSArIHRoaXMubTAyKCkgKiBtYXRyaXgubTIxKCksXG4gICAgICAgIHRoaXMubTAwKCkgKiBtYXRyaXgubTAyKCkgKyB0aGlzLm0wMSgpICogbWF0cml4Lm0xMigpICsgdGhpcy5tMDIoKSAqIG1hdHJpeC5tMjIoKSxcbiAgICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDMoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEzKCkgKyB0aGlzLm0wMigpICogbWF0cml4Lm0yMygpICsgdGhpcy5tMDMoKSxcbiAgICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0xMigpICogbWF0cml4Lm0yMCgpLFxuICAgICAgICB0aGlzLm0xMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTEoKSArIHRoaXMubTEyKCkgKiBtYXRyaXgubTIxKCksXG4gICAgICAgIHRoaXMubTEwKCkgKiBtYXRyaXgubTAyKCkgKyB0aGlzLm0xMSgpICogbWF0cml4Lm0xMigpICsgdGhpcy5tMTIoKSAqIG1hdHJpeC5tMjIoKSxcbiAgICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDMoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTEzKCkgKyB0aGlzLm0xMigpICogbWF0cml4Lm0yMygpICsgdGhpcy5tMTMoKSxcbiAgICAgICAgdGhpcy5tMjAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTIxKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0yMigpICogbWF0cml4Lm0yMCgpLFxuICAgICAgICB0aGlzLm0yMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMjEoKSAqIG1hdHJpeC5tMTEoKSArIHRoaXMubTIyKCkgKiBtYXRyaXgubTIxKCksXG4gICAgICAgIHRoaXMubTIwKCkgKiBtYXRyaXgubTAyKCkgKyB0aGlzLm0yMSgpICogbWF0cml4Lm0xMigpICsgdGhpcy5tMjIoKSAqIG1hdHJpeC5tMjIoKSxcbiAgICAgICAgdGhpcy5tMjAoKSAqIG1hdHJpeC5tMDMoKSArIHRoaXMubTIxKCkgKiBtYXRyaXgubTEzKCkgKyB0aGlzLm0yMigpICogbWF0cml4Lm0yMygpICsgdGhpcy5tMjMoKSxcbiAgICAgICAgMCwgMCwgMCwgMSwgVHlwZXMuQUZGSU5FICk7XG4gICAgfVxuXG4gICAgLy8gZ2VuZXJhbCBjYXNlXG4gICAgcmV0dXJuIG5ldyBNYXRyaXg0KFxuICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0wMigpICogbWF0cml4Lm0yMCgpICsgdGhpcy5tMDMoKSAqIG1hdHJpeC5tMzAoKSxcbiAgICAgIHRoaXMubTAwKCkgKiBtYXRyaXgubTAxKCkgKyB0aGlzLm0wMSgpICogbWF0cml4Lm0xMSgpICsgdGhpcy5tMDIoKSAqIG1hdHJpeC5tMjEoKSArIHRoaXMubTAzKCkgKiBtYXRyaXgubTMxKCksXG4gICAgICB0aGlzLm0wMCgpICogbWF0cml4Lm0wMigpICsgdGhpcy5tMDEoKSAqIG1hdHJpeC5tMTIoKSArIHRoaXMubTAyKCkgKiBtYXRyaXgubTIyKCkgKyB0aGlzLm0wMygpICogbWF0cml4Lm0zMigpLFxuICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDMoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEzKCkgKyB0aGlzLm0wMigpICogbWF0cml4Lm0yMygpICsgdGhpcy5tMDMoKSAqIG1hdHJpeC5tMzMoKSxcbiAgICAgIHRoaXMubTEwKCkgKiBtYXRyaXgubTAwKCkgKyB0aGlzLm0xMSgpICogbWF0cml4Lm0xMCgpICsgdGhpcy5tMTIoKSAqIG1hdHJpeC5tMjAoKSArIHRoaXMubTEzKCkgKiBtYXRyaXgubTMwKCksXG4gICAgICB0aGlzLm0xMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTEoKSArIHRoaXMubTEyKCkgKiBtYXRyaXgubTIxKCkgKyB0aGlzLm0xMygpICogbWF0cml4Lm0zMSgpLFxuICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDIoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTEyKCkgKyB0aGlzLm0xMigpICogbWF0cml4Lm0yMigpICsgdGhpcy5tMTMoKSAqIG1hdHJpeC5tMzIoKSxcbiAgICAgIHRoaXMubTEwKCkgKiBtYXRyaXgubTAzKCkgKyB0aGlzLm0xMSgpICogbWF0cml4Lm0xMygpICsgdGhpcy5tMTIoKSAqIG1hdHJpeC5tMjMoKSArIHRoaXMubTEzKCkgKiBtYXRyaXgubTMzKCksXG4gICAgICB0aGlzLm0yMCgpICogbWF0cml4Lm0wMCgpICsgdGhpcy5tMjEoKSAqIG1hdHJpeC5tMTAoKSArIHRoaXMubTIyKCkgKiBtYXRyaXgubTIwKCkgKyB0aGlzLm0yMygpICogbWF0cml4Lm0zMCgpLFxuICAgICAgdGhpcy5tMjAoKSAqIG1hdHJpeC5tMDEoKSArIHRoaXMubTIxKCkgKiBtYXRyaXgubTExKCkgKyB0aGlzLm0yMigpICogbWF0cml4Lm0yMSgpICsgdGhpcy5tMjMoKSAqIG1hdHJpeC5tMzEoKSxcbiAgICAgIHRoaXMubTIwKCkgKiBtYXRyaXgubTAyKCkgKyB0aGlzLm0yMSgpICogbWF0cml4Lm0xMigpICsgdGhpcy5tMjIoKSAqIG1hdHJpeC5tMjIoKSArIHRoaXMubTIzKCkgKiBtYXRyaXgubTMyKCksXG4gICAgICB0aGlzLm0yMCgpICogbWF0cml4Lm0wMygpICsgdGhpcy5tMjEoKSAqIG1hdHJpeC5tMTMoKSArIHRoaXMubTIyKCkgKiBtYXRyaXgubTIzKCkgKyB0aGlzLm0yMygpICogbWF0cml4Lm0zMygpLFxuICAgICAgdGhpcy5tMzAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTMxKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0zMigpICogbWF0cml4Lm0yMCgpICsgdGhpcy5tMzMoKSAqIG1hdHJpeC5tMzAoKSxcbiAgICAgIHRoaXMubTMwKCkgKiBtYXRyaXgubTAxKCkgKyB0aGlzLm0zMSgpICogbWF0cml4Lm0xMSgpICsgdGhpcy5tMzIoKSAqIG1hdHJpeC5tMjEoKSArIHRoaXMubTMzKCkgKiBtYXRyaXgubTMxKCksXG4gICAgICB0aGlzLm0zMCgpICogbWF0cml4Lm0wMigpICsgdGhpcy5tMzEoKSAqIG1hdHJpeC5tMTIoKSArIHRoaXMubTMyKCkgKiBtYXRyaXgubTIyKCkgKyB0aGlzLm0zMygpICogbWF0cml4Lm0zMigpLFxuICAgICAgdGhpcy5tMzAoKSAqIG1hdHJpeC5tMDMoKSArIHRoaXMubTMxKCkgKiBtYXRyaXgubTEzKCkgKyB0aGlzLm0zMigpICogbWF0cml4Lm0yMygpICsgdGhpcy5tMzMoKSAqIG1hdHJpeC5tMzMoKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG11bHRpcGxpY2F0aW9uIG9mIHRoaXMgbWF0cml4IHRpbWVzIHRoZSBwcm92aWRlZCB2ZWN0b3JcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjR9IHZlY3RvcjRcbiAgICogQHJldHVybnMge1ZlY3RvcjR9XG4gICAqL1xuICB0aW1lc1ZlY3RvcjQoIHZlY3RvcjQgKSB7XG4gICAgY29uc3QgeCA9IHRoaXMubTAwKCkgKiB2ZWN0b3I0LnggKyB0aGlzLm0wMSgpICogdmVjdG9yNC55ICsgdGhpcy5tMDIoKSAqIHZlY3RvcjQueiArIHRoaXMubTAzKCkgKiB2ZWN0b3I0Lnc7XG4gICAgY29uc3QgeSA9IHRoaXMubTEwKCkgKiB2ZWN0b3I0LnggKyB0aGlzLm0xMSgpICogdmVjdG9yNC55ICsgdGhpcy5tMTIoKSAqIHZlY3RvcjQueiArIHRoaXMubTEzKCkgKiB2ZWN0b3I0Lnc7XG4gICAgY29uc3QgeiA9IHRoaXMubTIwKCkgKiB2ZWN0b3I0LnggKyB0aGlzLm0yMSgpICogdmVjdG9yNC55ICsgdGhpcy5tMjIoKSAqIHZlY3RvcjQueiArIHRoaXMubTIzKCkgKiB2ZWN0b3I0Lnc7XG4gICAgY29uc3QgdyA9IHRoaXMubTMwKCkgKiB2ZWN0b3I0LnggKyB0aGlzLm0zMSgpICogdmVjdG9yNC55ICsgdGhpcy5tMzIoKSAqIHZlY3RvcjQueiArIHRoaXMubTMzKCkgKiB2ZWN0b3I0Lnc7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3I0KCB4LCB5LCB6LCB3ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbXVsdGlwbGljYXRpb24gb2YgdGhpcyBtYXRyaXggdGltZXMgdGhlIHByb3ZpZGVkIHZlY3RvciAodHJlYXRpbmcgdGhpcyBtYXRyaXggYXMgaG9tb2dlbmVvdXMsIHNvIHRoYXRcbiAgICogaXQgaXMgdGhlIHRlY2huaWNhbCBtdWx0aXBsaWNhdGlvbiBvZiAoeCx5LHosMSkpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yM30gdmVjdG9yM1xuICAgKiBAcmV0dXJucyB7VmVjdG9yM31cbiAgICovXG4gIHRpbWVzVmVjdG9yMyggdmVjdG9yMyApIHtcbiAgICByZXR1cm4gdGhpcy50aW1lc1ZlY3RvcjQoIHZlY3RvcjMudG9WZWN0b3I0KCkgKS50b1ZlY3RvcjMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtdWx0aXBsaWNhdGlvbiBvZiB0aGlzIG1hdHJpeCdzIHRyYW5zcG9zZSB0aW1lcyB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3I0fSB2ZWN0b3I0XG4gICAqIEByZXR1cm5zIHtWZWN0b3I0fVxuICAgKi9cbiAgdGltZXNUcmFuc3Bvc2VWZWN0b3I0KCB2ZWN0b3I0ICkge1xuICAgIGNvbnN0IHggPSB0aGlzLm0wMCgpICogdmVjdG9yNC54ICsgdGhpcy5tMTAoKSAqIHZlY3RvcjQueSArIHRoaXMubTIwKCkgKiB2ZWN0b3I0LnogKyB0aGlzLm0zMCgpICogdmVjdG9yNC53O1xuICAgIGNvbnN0IHkgPSB0aGlzLm0wMSgpICogdmVjdG9yNC54ICsgdGhpcy5tMTEoKSAqIHZlY3RvcjQueSArIHRoaXMubTIxKCkgKiB2ZWN0b3I0LnogKyB0aGlzLm0zMSgpICogdmVjdG9yNC53O1xuICAgIGNvbnN0IHogPSB0aGlzLm0wMigpICogdmVjdG9yNC54ICsgdGhpcy5tMTIoKSAqIHZlY3RvcjQueSArIHRoaXMubTIyKCkgKiB2ZWN0b3I0LnogKyB0aGlzLm0zMigpICogdmVjdG9yNC53O1xuICAgIGNvbnN0IHcgPSB0aGlzLm0wMygpICogdmVjdG9yNC54ICsgdGhpcy5tMTMoKSAqIHZlY3RvcjQueSArIHRoaXMubTIzKCkgKiB2ZWN0b3I0LnogKyB0aGlzLm0zMygpICogdmVjdG9yNC53O1xuICAgIHJldHVybiBuZXcgVmVjdG9yNCggeCwgeSwgeiwgdyApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG11bHRpcGxpY2F0aW9uIG9mIHRoaXMgbWF0cml4J3MgdHJhbnNwb3NlIHRpbWVzIHRoZSBwcm92aWRlZCB2ZWN0b3IgKGhvbW9nZW5lb3VzKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjN9IHZlY3RvcjNcbiAgICogQHJldHVybnMge1ZlY3RvcjN9XG4gICAqL1xuICB0aW1lc1RyYW5zcG9zZVZlY3RvcjMoIHZlY3RvcjMgKSB7XG4gICAgcmV0dXJuIHRoaXMudGltZXNUcmFuc3Bvc2VWZWN0b3I0KCB2ZWN0b3IzLnRvVmVjdG9yNCgpICkudG9WZWN0b3IzKCk7XG4gIH1cblxuICAvKipcbiAgICogRXF1aXZhbGVudCB0byB0aGUgbXVsdGlwbGljYXRpb24gb2YgKHgseSx6LDApLCBpZ25vcmluZyB0aGUgaG9tb2dlbmVvdXMgcGFydC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjN9IHZlY3RvcjNcbiAgICogQHJldHVybnMge1ZlY3RvcjN9XG4gICAqL1xuICB0aW1lc1JlbGF0aXZlVmVjdG9yMyggdmVjdG9yMyApIHtcbiAgICBjb25zdCB4ID0gdGhpcy5tMDAoKSAqIHZlY3RvcjMueCArIHRoaXMubTEwKCkgKiB2ZWN0b3IzLnkgKyB0aGlzLm0yMCgpICogdmVjdG9yMy56O1xuICAgIGNvbnN0IHkgPSB0aGlzLm0wMSgpICogdmVjdG9yMy55ICsgdGhpcy5tMTEoKSAqIHZlY3RvcjMueSArIHRoaXMubTIxKCkgKiB2ZWN0b3IzLno7XG4gICAgY29uc3QgeiA9IHRoaXMubTAyKCkgKiB2ZWN0b3IzLnogKyB0aGlzLm0xMigpICogdmVjdG9yMy55ICsgdGhpcy5tMjIoKSAqIHZlY3RvcjMuejtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjMoIHgsIHksIHogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkZXRlcm1pbmFudCBvZiB0aGlzIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0RGV0ZXJtaW5hbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMubTAzKCkgKiB0aGlzLm0xMigpICogdGhpcy5tMjEoKSAqIHRoaXMubTMwKCkgLVxuICAgICAgICAgICB0aGlzLm0wMigpICogdGhpcy5tMTMoKSAqIHRoaXMubTIxKCkgKiB0aGlzLm0zMCgpIC1cbiAgICAgICAgICAgdGhpcy5tMDMoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0yMigpICogdGhpcy5tMzAoKSArXG4gICAgICAgICAgIHRoaXMubTAxKCkgKiB0aGlzLm0xMygpICogdGhpcy5tMjIoKSAqIHRoaXMubTMwKCkgK1xuICAgICAgICAgICB0aGlzLm0wMigpICogdGhpcy5tMTEoKSAqIHRoaXMubTIzKCkgKiB0aGlzLm0zMCgpIC1cbiAgICAgICAgICAgdGhpcy5tMDEoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0yMygpICogdGhpcy5tMzAoKSAtXG4gICAgICAgICAgIHRoaXMubTAzKCkgKiB0aGlzLm0xMigpICogdGhpcy5tMjAoKSAqIHRoaXMubTMxKCkgK1xuICAgICAgICAgICB0aGlzLm0wMigpICogdGhpcy5tMTMoKSAqIHRoaXMubTIwKCkgKiB0aGlzLm0zMSgpICtcbiAgICAgICAgICAgdGhpcy5tMDMoKSAqIHRoaXMubTEwKCkgKiB0aGlzLm0yMigpICogdGhpcy5tMzEoKSAtXG4gICAgICAgICAgIHRoaXMubTAwKCkgKiB0aGlzLm0xMygpICogdGhpcy5tMjIoKSAqIHRoaXMubTMxKCkgLVxuICAgICAgICAgICB0aGlzLm0wMigpICogdGhpcy5tMTAoKSAqIHRoaXMubTIzKCkgKiB0aGlzLm0zMSgpICtcbiAgICAgICAgICAgdGhpcy5tMDAoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0yMygpICogdGhpcy5tMzEoKSArXG4gICAgICAgICAgIHRoaXMubTAzKCkgKiB0aGlzLm0xMSgpICogdGhpcy5tMjAoKSAqIHRoaXMubTMyKCkgLVxuICAgICAgICAgICB0aGlzLm0wMSgpICogdGhpcy5tMTMoKSAqIHRoaXMubTIwKCkgKiB0aGlzLm0zMigpIC1cbiAgICAgICAgICAgdGhpcy5tMDMoKSAqIHRoaXMubTEwKCkgKiB0aGlzLm0yMSgpICogdGhpcy5tMzIoKSArXG4gICAgICAgICAgIHRoaXMubTAwKCkgKiB0aGlzLm0xMygpICogdGhpcy5tMjEoKSAqIHRoaXMubTMyKCkgK1xuICAgICAgICAgICB0aGlzLm0wMSgpICogdGhpcy5tMTAoKSAqIHRoaXMubTIzKCkgKiB0aGlzLm0zMigpIC1cbiAgICAgICAgICAgdGhpcy5tMDAoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0yMygpICogdGhpcy5tMzIoKSAtXG4gICAgICAgICAgIHRoaXMubTAyKCkgKiB0aGlzLm0xMSgpICogdGhpcy5tMjAoKSAqIHRoaXMubTMzKCkgK1xuICAgICAgICAgICB0aGlzLm0wMSgpICogdGhpcy5tMTIoKSAqIHRoaXMubTIwKCkgKiB0aGlzLm0zMygpICtcbiAgICAgICAgICAgdGhpcy5tMDIoKSAqIHRoaXMubTEwKCkgKiB0aGlzLm0yMSgpICogdGhpcy5tMzMoKSAtXG4gICAgICAgICAgIHRoaXMubTAwKCkgKiB0aGlzLm0xMigpICogdGhpcy5tMjEoKSAqIHRoaXMubTMzKCkgLVxuICAgICAgICAgICB0aGlzLm0wMSgpICogdGhpcy5tMTAoKSAqIHRoaXMubTIyKCkgKiB0aGlzLm0zMygpICtcbiAgICAgICAgICAgdGhpcy5tMDAoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0yMigpICogdGhpcy5tMzMoKTtcbiAgfVxuXG4gIGdldCBkZXRlcm1pbmFudCgpIHsgcmV0dXJuIHRoaXMuZ2V0RGV0ZXJtaW5hbnQoKTsgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgc3RyaW5nIGZvcm0gb2YgdGhpcyBvYmplY3RcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7c3RyaW5nfVxuICAgKi9cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIGAke3RoaXMubTAwKCl9ICR7dGhpcy5tMDEoKX0gJHt0aGlzLm0wMigpfSAke3RoaXMubTAzKCl9XFxuJHtcbiAgICAgIHRoaXMubTEwKCl9ICR7dGhpcy5tMTEoKX0gJHt0aGlzLm0xMigpfSAke3RoaXMubTEzKCl9XFxuJHtcbiAgICAgIHRoaXMubTIwKCl9ICR7dGhpcy5tMjEoKX0gJHt0aGlzLm0yMigpfSAke3RoaXMubTIzKCl9XFxuJHtcbiAgICAgIHRoaXMubTMwKCl9ICR7dGhpcy5tMzEoKX0gJHt0aGlzLm0zMigpfSAke3RoaXMubTMzKCl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYWtlcyB0aGlzIG1hdHJpeCBlZmZlY3RpdmVseSBpbW11dGFibGUgdG8gdGhlIG5vcm1hbCBtZXRob2RzIChleGNlcHQgZGlyZWN0IHNldHRlcnM/KVxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXgzfSAtIFNlbGYgcmVmZXJlbmNlXG4gICAqL1xuICBtYWtlSW1tdXRhYmxlKCkge1xuICAgIGlmICggYXNzZXJ0ICkge1xuICAgICAgdGhpcy5yb3dNYWpvciA9ICgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnQ2Fubm90IG1vZGlmeSBpbW11dGFibGUgbWF0cml4JyApO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQ29waWVzIHRoZSBlbnRyaWVzIG9mIHRoaXMgbWF0cml4IG92ZXIgdG8gYW4gYXJiaXRyYXJ5IGFycmF5ICh0eXBlZCBvciBub3JtYWwpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl8RmxvYXQzMkFycmF5fEZsb2F0NjRBcnJheX0gYXJyYXlcbiAgICogQHJldHVybnMge0FycmF5fEZsb2F0MzJBcnJheXxGbG9hdDY0QXJyYXl9IC0gUmV0dXJuZWQgZm9yIGNoYWluaW5nXG4gICAqL1xuICBjb3B5VG9BcnJheSggYXJyYXkgKSB7XG4gICAgYXJyYXlbIDAgXSA9IHRoaXMubTAwKCk7XG4gICAgYXJyYXlbIDEgXSA9IHRoaXMubTEwKCk7XG4gICAgYXJyYXlbIDIgXSA9IHRoaXMubTIwKCk7XG4gICAgYXJyYXlbIDMgXSA9IHRoaXMubTMwKCk7XG4gICAgYXJyYXlbIDQgXSA9IHRoaXMubTAxKCk7XG4gICAgYXJyYXlbIDUgXSA9IHRoaXMubTExKCk7XG4gICAgYXJyYXlbIDYgXSA9IHRoaXMubTIxKCk7XG4gICAgYXJyYXlbIDcgXSA9IHRoaXMubTMxKCk7XG4gICAgYXJyYXlbIDggXSA9IHRoaXMubTAyKCk7XG4gICAgYXJyYXlbIDkgXSA9IHRoaXMubTEyKCk7XG4gICAgYXJyYXlbIDEwIF0gPSB0aGlzLm0yMigpO1xuICAgIGFycmF5WyAxMSBdID0gdGhpcy5tMzIoKTtcbiAgICBhcnJheVsgMTIgXSA9IHRoaXMubTAzKCk7XG4gICAgYXJyYXlbIDEzIF0gPSB0aGlzLm0xMygpO1xuICAgIGFycmF5WyAxNCBdID0gdGhpcy5tMjMoKTtcbiAgICBhcnJheVsgMTUgXSA9IHRoaXMubTMzKCk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaWRlbnRpdHkgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fVxuICAgKi9cbiAgc3RhdGljIGlkZW50aXR5KCkge1xuICAgIHJldHVybiBuZXcgTWF0cml4NChcbiAgICAgIDEsIDAsIDAsIDAsXG4gICAgICAwLCAxLCAwLCAwLFxuICAgICAgMCwgMCwgMSwgMCxcbiAgICAgIDAsIDAsIDAsIDEsXG4gICAgICBUeXBlcy5JREVOVElUWSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB0cmFuc2xhdGlvbiBtYXRyaXguXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpcbiAgICogQHJldHVybnMge01hdHJpeDR9XG4gICAqL1xuICBzdGF0aWMgdHJhbnNsYXRpb24oIHgsIHksIHogKSB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXg0KFxuICAgICAgMSwgMCwgMCwgeCxcbiAgICAgIDAsIDEsIDAsIHksXG4gICAgICAwLCAwLCAxLCB6LFxuICAgICAgMCwgMCwgMCwgMSxcbiAgICAgIFR5cGVzLlRSQU5TTEFUSU9OXzNEICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHRyYW5zbGF0aW9uIG1hdHJpeCBjb21wdXRlZCBmcm9tIGEgdmVjdG9yLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yM3xWZWN0b3I0fSB2ZWN0b3JcbiAgICogQHJldHVybnMge01hdHJpeDR9XG4gICAqL1xuICBzdGF0aWMgdHJhbnNsYXRpb25Gcm9tVmVjdG9yKCB2ZWN0b3IgKSB7XG4gICAgcmV0dXJuIE1hdHJpeDQudHJhbnNsYXRpb24oIHZlY3Rvci54LCB2ZWN0b3IueSwgdmVjdG9yLnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbWF0cml4IHRoYXQgc2NhbGVzIHRoaW5ncyBpbiBlYWNoIGRpbWVuc2lvbi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcGFyYW0ge251bWJlcn0gelxuICAgKiBAcmV0dXJucyB7TWF0cml4NH1cbiAgICovXG4gIHN0YXRpYyBzY2FsaW5nKCB4LCB5LCB6ICkge1xuICAgIC8vIGFsbG93IHVzaW5nIG9uZSBwYXJhbWV0ZXIgdG8gc2NhbGUgZXZlcnl0aGluZ1xuICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyB4IDogeTtcbiAgICB6ID0geiA9PT0gdW5kZWZpbmVkID8geCA6IHo7XG5cbiAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICB4LCAwLCAwLCAwLFxuICAgICAgMCwgeSwgMCwgMCxcbiAgICAgIDAsIDAsIHosIDAsXG4gICAgICAwLCAwLCAwLCAxLFxuICAgICAgVHlwZXMuU0NBTElORyApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBob21vZ2VuZW91cyBtYXRyaXggcm90YXRpb24gZGVmaW5lZCBieSBhIHJvdGF0aW9uIG9mIHRoZSBzcGVjaWZpZWQgYW5nbGUgYXJvdW5kIHRoZSBnaXZlbiB1bml0IGF4aXMuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSBheGlzIC0gbm9ybWFsaXplZFxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fVxuICAgKi9cbiAgc3RhdGljIHJvdGF0aW9uQXhpc0FuZ2xlKCBheGlzLCBhbmdsZSApIHtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoIGFuZ2xlICk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKCBhbmdsZSApO1xuICAgIGNvbnN0IEMgPSAxIC0gYztcblxuICAgIHJldHVybiBuZXcgTWF0cml4NChcbiAgICAgIGF4aXMueCAqIGF4aXMueCAqIEMgKyBjLCBheGlzLnggKiBheGlzLnkgKiBDIC0gYXhpcy56ICogcywgYXhpcy54ICogYXhpcy56ICogQyArIGF4aXMueSAqIHMsIDAsXG4gICAgICBheGlzLnkgKiBheGlzLnggKiBDICsgYXhpcy56ICogcywgYXhpcy55ICogYXhpcy55ICogQyArIGMsIGF4aXMueSAqIGF4aXMueiAqIEMgLSBheGlzLnggKiBzLCAwLFxuICAgICAgYXhpcy56ICogYXhpcy54ICogQyAtIGF4aXMueSAqIHMsIGF4aXMueiAqIGF4aXMueSAqIEMgKyBheGlzLnggKiBzLCBheGlzLnogKiBheGlzLnogKiBDICsgYywgMCxcbiAgICAgIDAsIDAsIDAsIDEsXG4gICAgICBUeXBlcy5BRkZJTkUgKTtcbiAgfVxuXG4gIC8vIFRPRE86IGFkZCBpbiByb3RhdGlvbiBmcm9tIHF1YXRlcm5pb24sIGFuZCBmcm9tIHF1YXQgKyB0cmFuc2xhdGlvblxuXG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSByb3RhdGlvbiBtYXRyaXggaW4gdGhlIHl6IHBsYW5lLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhbmdsZSAtIGluIHJhZGlhbnNcbiAgICogQHJldHVybnMge01hdHJpeDR9XG4gICAqL1xuICBzdGF0aWMgcm90YXRpb25YKCBhbmdsZSApIHtcbiAgICBjb25zdCBjID0gTWF0aC5jb3MoIGFuZ2xlICk7XG4gICAgY29uc3QgcyA9IE1hdGguc2luKCBhbmdsZSApO1xuXG4gICAgcmV0dXJuIG5ldyBNYXRyaXg0KFxuICAgICAgMSwgMCwgMCwgMCxcbiAgICAgIDAsIGMsIC1zLCAwLFxuICAgICAgMCwgcywgYywgMCxcbiAgICAgIDAsIDAsIDAsIDEsXG4gICAgICBUeXBlcy5BRkZJTkUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcm90YXRpb24gbWF0cml4IGluIHRoZSB4eiBwbGFuZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fVxuICAgKi9cbiAgc3RhdGljIHJvdGF0aW9uWSggYW5nbGUgKSB7XG4gICAgY29uc3QgYyA9IE1hdGguY29zKCBhbmdsZSApO1xuICAgIGNvbnN0IHMgPSBNYXRoLnNpbiggYW5nbGUgKTtcblxuICAgIHJldHVybiBuZXcgTWF0cml4NChcbiAgICAgIGMsIDAsIHMsIDAsXG4gICAgICAwLCAxLCAwLCAwLFxuICAgICAgLXMsIDAsIGMsIDAsXG4gICAgICAwLCAwLCAwLCAxLFxuICAgICAgVHlwZXMuQUZGSU5FICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHJvdGF0aW9uIG1hdHJpeCBpbiB0aGUgeHkgcGxhbmUuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGFuZ2xlIC0gaW4gcmFkaWFuc1xuICAgKiBAcmV0dXJucyB7TWF0cml4NH1cbiAgICovXG4gIHN0YXRpYyByb3RhdGlvblooIGFuZ2xlICkge1xuICAgIGNvbnN0IGMgPSBNYXRoLmNvcyggYW5nbGUgKTtcbiAgICBjb25zdCBzID0gTWF0aC5zaW4oIGFuZ2xlICk7XG5cbiAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICBjLCAtcywgMCwgMCxcbiAgICAgIHMsIGMsIDAsIDAsXG4gICAgICAwLCAwLCAxLCAwLFxuICAgICAgMCwgMCwgMCwgMSxcbiAgICAgIFR5cGVzLkFGRklORSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHNwZWNpZmljIHBlcnNwZWN0aXZlIG1hdHJpeCBuZWVkZWQgZm9yIGNlcnRhaW4gV2ViR0wgY29udGV4dHMuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IGZvdllSYWRpYW5zXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBhc3BlY3QgLSBhc3BlY3QgPT09IHdpZHRoIC8gaGVpZ2h0XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB6TmVhclxuICAgKiBAcGFyYW0ge251bWJlcn0gekZhclxuICAgKiBAcmV0dXJucyB7TWF0cml4NH1cbiAgICovXG4gIHN0YXRpYyBnbHVQZXJzcGVjdGl2ZSggZm92WVJhZGlhbnMsIGFzcGVjdCwgek5lYXIsIHpGYXIgKSB7XG4gICAgY29uc3QgY290YW5nZW50ID0gTWF0aC5jb3MoIGZvdllSYWRpYW5zICkgLyBNYXRoLnNpbiggZm92WVJhZGlhbnMgKTtcblxuICAgIHJldHVybiBuZXcgTWF0cml4NChcbiAgICAgIGNvdGFuZ2VudCAvIGFzcGVjdCwgMCwgMCwgMCxcbiAgICAgIDAsIGNvdGFuZ2VudCwgMCwgMCxcbiAgICAgIDAsIDAsICggekZhciArIHpOZWFyICkgLyAoIHpOZWFyIC0gekZhciApLCAoIDIgKiB6RmFyICogek5lYXIgKSAvICggek5lYXIgLSB6RmFyICksXG4gICAgICAwLCAwLCAtMSwgMCApO1xuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ01hdHJpeDQnLCBNYXRyaXg0ICk7XG5cbmNvbnN0IFR5cGVzID0gRW51bWVyYXRpb25EZXByZWNhdGVkLmJ5S2V5cyggW1xuICAnT1RIRVInLFxuICAnSURFTlRJVFknLFxuICAnVFJBTlNMQVRJT05fM0QnLFxuICAnU0NBTElORycsXG4gICdBRkZJTkUnXG5dICk7XG5cbi8vIEBwdWJsaWMge0VudW1lcmF0aW9uRGVwcmVjYXRlZH1cbk1hdHJpeDQuVHlwZXMgPSBUeXBlcztcblxuLy8gQHB1YmxpYyB7TWF0cml4NH1cbk1hdHJpeDQuSURFTlRJVFkgPSBuZXcgTWF0cml4NCgpLm1ha2VJbW11dGFibGUoKTtcblxuZXhwb3J0IGRlZmF1bHQgTWF0cml4NDsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUEsT0FBT0EscUJBQXFCLE1BQU0sNkNBQTZDO0FBQy9FLE9BQU9DLEdBQUcsTUFBTSxVQUFVO0FBQzFCLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBQ2xDLE9BQU9DLE9BQU8sTUFBTSxjQUFjO0FBRWxDLE1BQU1DLFlBQVksR0FBR0MsTUFBTSxDQUFDRCxZQUFZLElBQUlFLEtBQUs7QUFFakQsTUFBTUMsT0FBTyxDQUFDO0VBQ1o7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFFQyxJQUFJLEVBQUc7SUFFbEc7SUFDQSxJQUFJLENBQUNDLE9BQU8sR0FBRyxJQUFJdEIsWUFBWSxDQUFFLEVBQUUsQ0FBRTs7SUFFckM7SUFDQSxJQUFJLENBQUNxQixJQUFJLEdBQUdF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QyxJQUFJLENBQUNYLEdBQUcsRUFBRSxFQUFFLElBQUksQ0FBQ0ksR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDSSxHQUFHLEVBQUUsRUFBRSxJQUFJLENBQUNJLEdBQUcsRUFBRSxFQUM5QyxJQUFJLENBQUNYLEdBQUcsRUFBRSxFQUFFLElBQUksQ0FBQ0ksR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDSSxHQUFHLEVBQUUsRUFBRSxJQUFJLENBQUNJLEdBQUcsRUFBRSxFQUM5QyxJQUFJLENBQUNYLEdBQUcsRUFBRSxFQUFFLElBQUksQ0FBQ0ksR0FBRyxFQUFFLEVBQUUsSUFBSSxDQUFDSSxHQUFHLEVBQUUsRUFBRSxJQUFJLENBQUNJLEdBQUcsRUFBRSxDQUFFO0VBQ3BEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFK0IsT0FBT0EsQ0FBQSxFQUFHO0lBQ1IsT0FBTyxJQUFJMUUsT0FBTyxDQUNoQixDQUFDLElBQUksQ0FBQzRCLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUNDLEdBQUcsRUFBRSxFQUNsRCxDQUFDLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUNDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEVBQ2xELENBQUMsSUFBSSxDQUFDQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUNDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDQyxHQUFHLEVBQUUsRUFDbEQsQ0FBQyxJQUFJLENBQUNDLEdBQUcsRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDQyxHQUFHLEVBQUUsRUFBRSxDQUFDLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEVBQUUsQ0FBQyxJQUFJLENBQUNDLEdBQUcsRUFBRSxD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RyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2EsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDZCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLElBQUtpQyxHQUFHLEVBQ2pQLENBQUUsQ0FBQyxJQUFJLENBQUNuQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDVSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNhLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2EsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDZCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLElBQUtpQyxHQUFHLEVBQ2xQLENBQUUsSUFBSSxDQUFDdkMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ04sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxJQUFLcUMsR0FBRyxFQUNqUCxDQUFFLElBQUksQ0FBQ3BDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ04sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsSUFBS2lDLEdBQUcsRUFDalAsQ0FBRSxDQUFDLElBQUksQ0FBQ3BDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDWCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ04sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDYSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNmLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsSUFBS2lDLEdBQUcsRUFDbFAsQ0FBRSxJQUFJLENBQUNwQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNOLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNVLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNWLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNjLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNGLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2EsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDZixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLElBQUtpQyxHQUFHLEVBQ2pQLENBQUUsQ0FBQyxJQUFJLENBQUN4QyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNGLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNOLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNVLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNGLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDWCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLElBQUtxQyxHQUFHLEVBQ2xQLENBQUUsQ0FBQyxJQUFJLENBQUNwQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ04sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDWCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLElBQUtpQyxHQUFHLEVBQ2xQLENBQUUsSUFBSSxDQUFDcEMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNOLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNWLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDWCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNVLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDYSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNGLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNjLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxJQUFLaUMsR0FBRyxFQUNqUCxDQUFFLENBQUMsSUFBSSxDQUFDcEMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNGLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNWLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDWCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDYSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNOLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNjLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNVLEdBQUcsRUFBRSxJQUFLaUMsR0FBRyxFQUNsUCxDQUFFLElBQUksQ0FBQ3hDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDVSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsSUFBS3FDLEdBQUcsRUFDalAsQ0FBRSxJQUFJLENBQUNwQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDVixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLElBQUtrQyxHQUFHLEVBQ2pQLENBQUUsQ0FBQyxJQUFJLENBQUNwQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDVSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDVixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNhLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2EsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDZCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLElBQUtrQyxHQUFHLEVBQ2xQLENBQUUsSUFBSSxDQUFDcEMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDWCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ04sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDYSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNhLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ2QsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxJQUFLa0MsR0FBRyxFQUNqUCxDQUFFLENBQUMsSUFBSSxDQUFDeEMsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ04sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ1YsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxJQUFLc0MsR0FBRyxDQUNuUDtRQUNILENBQUMsTUFDSTtVQUNILE1BQU0sSUFBSUssS0FBSyxDQUFFLGlEQUFpRCxDQUFFO1FBQ3RFO01BQ0Y7UUFDRSxNQUFNLElBQUlBLEtBQUssQ0FBRyx1Q0FBc0MsSUFBSSxDQUFDL0QsSUFBSyxFQUFDLENBQUU7SUFBQztFQUU1RTs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFZ0UsV0FBV0EsQ0FBRXZELE1BQU0sRUFBRztJQUNwQjtJQUNBLElBQUssSUFBSSxDQUFDVCxJQUFJLEtBQUtFLEtBQUssQ0FBQ3lELFFBQVEsSUFBSWxELE1BQU0sQ0FBQ1QsSUFBSSxLQUFLRSxLQUFLLENBQUN5RCxRQUFRLEVBQUc7TUFDcEUsT0FBTyxJQUFJLENBQUMzRCxJQUFJLEtBQUtFLEtBQUssQ0FBQ3lELFFBQVEsR0FBR2xELE1BQU0sR0FBRyxJQUFJO0lBQ3JEO0lBRUEsSUFBSyxJQUFJLENBQUNULElBQUksS0FBS1MsTUFBTSxDQUFDVCxJQUFJLEVBQUc7TUFDL0I7TUFDQSxJQUFLLElBQUksQ0FBQ0EsSUFBSSxLQUFLRSxLQUFLLENBQUMwRCxjQUFjLEVBQUc7UUFDeEM7UUFDQSxPQUFPLElBQUk5RSxPQUFPLENBQ2hCLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQytCLEdBQUcsRUFBRSxHQUFHSixNQUFNLENBQUNHLEdBQUcsRUFBRSxFQUNsQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHUixNQUFNLENBQUNPLEdBQUcsRUFBRSxFQUNsQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHWixNQUFNLENBQUNZLEdBQUcsRUFBRSxFQUNsQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUVuQixLQUFLLENBQUMwRCxjQUFjLENBQUU7TUFDdEMsQ0FBQyxNQUNJLElBQUssSUFBSSxDQUFDNUQsSUFBSSxLQUFLRSxLQUFLLENBQUMyRCxPQUFPLEVBQUc7UUFDdEM7UUFDQSxPQUFPLElBQUkvRSxPQUFPLENBQ2hCLElBQUksQ0FBQzRCLEdBQUcsRUFBRSxHQUFHRCxNQUFNLENBQUNDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNsQyxDQUFDLEVBQUUsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBR04sTUFBTSxDQUFDTSxHQUFHLEVBQUUsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNsQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUdYLE1BQU0sQ0FBQ1csR0FBRyxFQUFFLEVBQUUsQ0FBQyxFQUNsQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUVsQixLQUFLLENBQUMyRCxPQUFPLENBQUU7TUFDL0I7SUFDRjtJQUVBLElBQUssSUFBSSxDQUFDN0QsSUFBSSxLQUFLRSxLQUFLLENBQUNDLEtBQUssSUFBSU0sTUFBTSxDQUFDVCxJQUFJLEtBQUtFLEtBQUssQ0FBQ0MsS0FBSyxFQUFHO01BQzlEOztNQUVBO01BQ0EsT0FBTyxJQUFJckIsT0FBTyxDQUNoQixJQUFJLENBQUM0QixHQUFHLEVBQUUsR0FBR0QsTUFBTSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUFHRixNQUFNLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUdILE1BQU0sQ0FBQ1MsR0FBRyxFQUFFLEVBQ2pGLElBQUksQ0FBQ1IsR0FBRyxFQUFFLEdBQUdELE1BQU0sQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQSxHQUFHLEVBQUUsR0FBR0YsTUFBTSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHSCxNQUFNLENBQUNVLEdBQUcsRUFBRSxFQUNqRixJQUFJLENBQUNULEdBQUcsRUFBRSxHQUFHRCxNQUFNLENBQUNHLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0QsR0FBRyxFQUFFLEdBQUdGLE1BQU0sQ0FBQ08sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSixHQUFHLEVBQUUsR0FBR0gsTUFBTSxDQUFDVyxHQUFHLEVBQUUsRUFDakYsSUFBSSxDQUFDVixHQUFHLEVBQUUsR0FBR0QsTUFBTSxDQUFDSSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNGLEdBQUcsRUFBRSxHQUFHRixNQUFNLENBQUNRLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0wsR0FBRyxFQUFFLEdBQUdILE1BQU0sQ0FBQ1ksR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUixHQUFHLEVBQUUsRUFDOUYsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBR0wsTUFBTSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHTixNQUFNLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUdQLE1BQU0sQ0FBQ1MsR0FBRyxFQUFFLEVBQ2pGLElBQUksQ0FBQ0osR0FBRyxFQUFFLEdBQUdMLE1BQU0sQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSSxHQUFHLEVBQUUsR0FBR04sTUFBTSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUFHUCxNQUFNLENBQUNVLEdBQUcsRUFBRSxFQUNqRixJQUFJLENBQUNMLEdBQUcsRUFBRSxHQUFHTCxNQUFNLENBQUNHLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUdOLE1BQU0sQ0FBQ08sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQSxHQUFHLEVBQUUsR0FBR1AsTUFBTSxDQUFDVyxHQUFHLEVBQUUsRUFDakYsSUFBSSxDQUFDTixHQUFHLEVBQUUsR0FBR0wsTUFBTSxDQUFDSSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNFLEdBQUcsRUFBRSxHQUFHTixNQUFNLENBQUNRLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0QsR0FBRyxFQUFFLEdBQUdQLE1BQU0sQ0FBQ1ksR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSixHQUFHLEVBQUUsRUFDOUYsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBR1QsTUFBTSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNTLEdBQUcsRUFBRSxHQUFHVixNQUFNLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUdYLE1BQU0sQ0FBQ1MsR0FBRyxFQUFFLEVBQ2pGLElBQUksQ0FBQ0EsR0FBRyxFQUFFLEdBQUdULE1BQU0sQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUSxHQUFHLEVBQUUsR0FBR1YsTUFBTSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHWCxNQUFNLENBQUNVLEdBQUcsRUFBRSxFQUNqRixJQUFJLENBQUNELEdBQUcsRUFBRSxHQUFHVCxNQUFNLENBQUNHLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ08sR0FBRyxFQUFFLEdBQUdWLE1BQU0sQ0FBQ08sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSSxHQUFHLEVBQUUsR0FBR1gsTUFBTSxDQUFDVyxHQUFHLEVBQUUsRUFDakYsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBR1QsTUFBTSxDQUFDSSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUFHVixNQUFNLENBQUNRLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUdYLE1BQU0sQ0FBQ1ksR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQSxHQUFHLEVBQUUsRUFDOUYsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFbkIsS0FBSyxDQUFDSSxNQUFNLENBQUU7SUFDOUI7O0lBRUE7SUFDQSxPQUFPLElBQUl4QixPQUFPLENBQ2hCLElBQUksQ0FBQzRCLEdBQUcsRUFBRSxHQUFHRCxNQUFNLENBQUNDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEdBQUdGLE1BQU0sQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBR0gsTUFBTSxDQUFDUyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNMLEdBQUcsRUFBRSxHQUFHSixNQUFNLENBQUNhLEdBQUcsRUFBRSxFQUM3RyxJQUFJLENBQUNaLEdBQUcsRUFBRSxHQUFHRCxNQUFNLENBQUNFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0EsR0FBRyxFQUFFLEdBQUdGLE1BQU0sQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBR0gsTUFBTSxDQUFDVSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNOLEdBQUcsRUFBRSxHQUFHSixNQUFNLENBQUNjLEdBQUcsRUFBRSxFQUM3RyxJQUFJLENBQUNiLEdBQUcsRUFBRSxHQUFHRCxNQUFNLENBQUNHLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0QsR0FBRyxFQUFFLEdBQUdGLE1BQU0sQ0FBQ08sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSixHQUFHLEVBQUUsR0FBR0gsTUFBTSxDQUFDVyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNQLEdBQUcsRUFBRSxHQUFHSixNQUFNLENBQUNlLEdBQUcsRUFBRSxFQUM3RyxJQUFJLENBQUNkLEdBQUcsRUFBRSxHQUFHRCxNQUFNLENBQUNJLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0YsR0FBRyxFQUFFLEdBQUdGLE1BQU0sQ0FBQ1EsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTCxHQUFHLEVBQUUsR0FBR0gsTUFBTSxDQUFDWSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNSLEdBQUcsRUFBRSxHQUFHSixNQUFNLENBQUNnQixHQUFHLEVBQUUsRUFDN0csSUFBSSxDQUFDWCxHQUFHLEVBQUUsR0FBR0wsTUFBTSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHTixNQUFNLENBQUNLLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUdQLE1BQU0sQ0FBQ1MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRCxHQUFHLEVBQUUsR0FBR1IsTUFBTSxDQUFDYSxHQUFHLEVBQUUsRUFDN0csSUFBSSxDQUFDUixHQUFHLEVBQUUsR0FBR0wsTUFBTSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNJLEdBQUcsRUFBRSxHQUFHTixNQUFNLENBQUNNLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEdBQUdQLE1BQU0sQ0FBQ1UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRixHQUFHLEVBQUUsR0FBR1IsTUFBTSxDQUFDYyxHQUFHLEVBQUUsRUFDN0csSUFBSSxDQUFDVCxHQUFHLEVBQUUsR0FBR0wsTUFBTSxDQUFDRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNHLEdBQUcsRUFBRSxHQUFHTixNQUFNLENBQUNPLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0EsR0FBRyxFQUFFLEdBQUdQLE1BQU0sQ0FBQ1csR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBR1IsTUFBTSxDQUFDZSxHQUFHLEVBQUUsRUFDN0csSUFBSSxDQUFDVixHQUFHLEVBQUUsR0FBR0wsTUFBTSxDQUFDSSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNFLEdBQUcsRUFBRSxHQUFHTixNQUFNLENBQUNRLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0QsR0FBRyxFQUFFLEdBQUdQLE1BQU0sQ0FBQ1ksR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSixHQUFHLEVBQUUsR0FBR1IsTUFBTSxDQUFDZ0IsR0FBRyxFQUFFLEVBQzdHLElBQUksQ0FBQ1AsR0FBRyxFQUFFLEdBQUdULE1BQU0sQ0FBQ0MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUyxHQUFHLEVBQUUsR0FBR1YsTUFBTSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUFHWCxNQUFNLENBQUNTLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUdaLE1BQU0sQ0FBQ2EsR0FBRyxFQUFFLEVBQzdHLElBQUksQ0FBQ0osR0FBRyxFQUFFLEdBQUdULE1BQU0sQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDUSxHQUFHLEVBQUUsR0FBR1YsTUFBTSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUFHWCxNQUFNLENBQUNVLEdBQUcsRUFBRSxHQUFHLElBQUks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Q0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNHLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNULEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNFLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNFLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNWLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNULEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNWLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNHLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNiLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ08sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNHLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNFLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNiLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNFLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNWLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNiLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNYLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNkLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ08sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNiLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNHLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNkLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNHLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNaLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNPLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNkLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNPLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNiLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0UsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNmLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ00sR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNNLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNkLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0csR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxHQUNqRCxJQUFJLENBQUNmLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ssR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRTtFQUMxRDtFQUVBLElBQUlxRCxXQUFXQSxDQUFBLEVBQUc7SUFBRSxPQUFPLElBQUksQ0FBQ2hCLGNBQWMsRUFBRTtFQUFFOztFQUVsRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRWlCLFFBQVFBLENBQUEsRUFBRztJQUNULE9BQVEsR0FBRSxJQUFJLENBQUNyRSxHQUFHLEVBQUcsSUFBRyxJQUFJLENBQUNDLEdBQUcsRUFBRyxJQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFHLElBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUcsS0FDN0QsSUFBSSxDQUFDQyxHQUFHLEVBQUcsSUFBRyxJQUFJLENBQUNDLEdBQUcsRUFBRyxJQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFHLElBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUcsS0FDckQsSUFBSSxDQUFDQyxHQUFHLEVBQUcsSUFBRyxJQUFJLENBQUNDLEdBQUcsRUFBRyxJQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFHLElBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUcsS0FDckQsSUFBSSxDQUFDQyxHQUFHLEVBQUcsSUFBRyxJQUFJLENBQUNDLEdBQUcsRUFBRyxJQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFHLElBQUcsSUFBSSxDQUFDQyxHQUFHLEVBQUcsRUFBQztFQUMxRDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRXVELGFBQWFBLENBQUEsRUFBRztJQUNkLElBQUtDLE1BQU0sRUFBRztNQUNaLElBQUksQ0FBQzdFLFFBQVEsR0FBRyxNQUFNO1FBQ3BCLE1BQU0sSUFBSTJELEtBQUssQ0FBRSxnQ0FBZ0MsQ0FBRTtNQUNyRCxDQUFDO0lBQ0g7SUFDQSxPQUFPLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFbUIsV0FBV0EsQ0FBRUMsS0FBSyxFQUFHO0lBQ25CQSxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUcsSUFBSSxDQUFDekUsR0FBRyxFQUFFO0lBQ3ZCeUUsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHLElBQUksQ0FBQ3JFLEdBQUcsRUFBRTtJQUN2QnFFLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBRyxJQUFJLENBQUNqRSxHQUFHLEVBQUU7SUFDdkJpRSxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUcsSUFBSSxDQUFDN0QsR0FBRyxFQUFFO0lBQ3ZCNkQsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHLElBQUksQ0FBQ3hFLEdBQUcsRUFBRTtJQUN2QndFLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBRyxJQUFJLENBQUNwRSxHQUFHLEVBQUU7SUFDdkJvRSxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUcsSUFBSSxDQUFDaEUsR0FBRyxFQUFFO0lBQ3ZCZ0UsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHLElBQUksQ0FBQzVELEdBQUcsRUFBRTtJQUN2QjRELEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBRyxJQUFJLENBQUN2RSxHQUFHLEVBQUU7SUFDdkJ1RSxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUcsSUFBSSxDQUFDbkUsR0FBRyxFQUFFO0lBQ3ZCbUUsS0FBSyxDQUFFLEVBQUUsQ0FBRSxHQUFHLElBQUksQ0FBQy9ELEdBQUcsRUFBRTtJQUN4QitELEtBQUssQ0FBRSxFQUFFLENBQUUsR0FBRyxJQUFJLENBQUMzRCxHQUFHLEVBQUU7SUFDeEIyRCxLQUFLLENBQUUsRUFBRSxDQUFFLEdBQUcsSUFBSSxDQUFDdEUsR0FBRyxFQUFFO0lBQ3hCc0UsS0FBSyxDQUFFLEVBQUUsQ0FBRSxHQUFHLElBQUksQ0FBQ2xFLEdBQUcsRUFBRTtJQUN4QmtFLEtBQUssQ0FBRSxFQUFFLENBQUUsR0FBRyxJQUFJLENBQUM5RCxHQUFHLEVBQUU7SUFDeEI4RCxLQUFLLENBQUUsRUFBRSxDQUFFLEdBQUcsSUFBSSxDQUFDMUQsR0FBRyxFQUFFO0lBQ3hCLE9BQU8wRCxLQUFLO0VBQ2Q7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBT0MsUUFBUUEsQ0FBQSxFQUFHO0lBQ2hCLE9BQU8sSUFBSXRHLE9BQU8sQ0FDaEIsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNWLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFDVixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1YsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNWb0IsS0FBSyxDQUFDeUQsUUFBUSxDQUFFO0VBQ3BCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU8vQixXQUFXQSxDQUFFdUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRztJQUM1QixPQUFPLElBQUl2RixPQUFPLENBQ2hCLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFcUYsQ0FBQyxFQUNWLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFQyxDQUFDLEVBQ1YsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUVDLENBQUMsRUFDVixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1ZuRSxLQUFLLENBQUMwRCxjQUFjLENBQUU7RUFDMUI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxPQUFPeUIscUJBQXFCQSxDQUFFQyxNQUFNLEVBQUc7SUFDckMsT0FBT3hHLE9BQU8sQ0FBQzhDLFdBQVcsQ0FBRTBELE1BQU0sQ0FBQ25CLENBQUMsRUFBRW1CLE1BQU0sQ0FBQ2xCLENBQUMsRUFBRWtCLE1BQU0sQ0FBQ2pCLENBQUMsQ0FBRTtFQUM1RDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxPQUFPa0IsT0FBT0EsQ0FBRXBCLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUc7SUFDeEI7SUFDQUQsQ0FBQyxHQUFHQSxDQUFDLEtBQUsvRCxTQUFTLEdBQUc4RCxDQUFDLEdBQUdDLENBQUM7SUFDM0JDLENBQUMsR0FBR0EsQ0FBQyxLQUFLaEUsU0FBUyxHQUFHOEQsQ0FBQyxHQUFHRSxDQUFDO0lBRTNCLE9BQU8sSUFBSXZGLE9BQU8sQ0FDaEJxRixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1YsQ0FBQyxFQUFFQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFDVixDQUFDLEVBQUUsQ0FBQyxFQUFFQyxDQUFDLEVBQUUsQ0FBQyxFQUNWLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFDVm5FLEtBQUssQ0FBQzJELE9BQU8sQ0FBRTtFQUNuQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBTzJCLGlCQUFpQkEsQ0FBRUMsSUFBSSxFQUFFQyxLQUFLLEVBQUc7SUFDdEMsTUFBTUMsQ0FBQyxHQUFHakQsSUFBSSxDQUFDa0QsR0FBRyxDQUFFRixLQUFLLENBQUU7SUFDM0IsTUFBTUcsQ0FBQyxHQUFHbkQsSUFBSSxDQUFDb0QsR0FBRyxDQUFFSixLQUFLLENBQUU7SUFDM0IsTUFBTUssQ0FBQyxHQUFHLENBQUMsR0FBR0osQ0FBQztJQUVmLE9BQU8sSUFBSTdHLE9BQU8sQ0FDaEIyRyxJQUFJLENBQUN0QixDQUFDLEdBQUdzQixJQUFJLENBQUN0QixDQUFDLEdBQUc0QixDQUFDLEdBQUdKLENBQUMsRUFBRUYsSUFBSSxDQUFDdEIsQ0FBQyxHQUFHc0IsSUFBSSxDQUFDckIsQ0FBQyxHQUFHMkIsQ0FBQyxHQUFHTixJQUFJLENBQUNwQixDQUFDLEdBQUd3QixDQUFDLEVBQUVKLElBQUksQ0FBQ3RCLENBQUMsR0FBR3NCLElBQUksQ0FBQ3BCLENBQUMsR0FBRzBCLENBQUMsR0FBR04sSUFBSSxDQUFDckIsQ0FBQyxHQUFHeUIsQ0FBQyxFQUFFLENBQUMsRUFDOUZKLElBQUksQ0FBQ3JCLENBQUMsR0FBR3FCLElBQUksQ0FBQ3RCLENBQUMsR0FBRzRCLENBQUMsR0FBR04sSUFBSSxDQUFDcEIsQ0FBQyxHQUFHd0IsQ0FBQyxFQUFFSixJQUFJLENBQUNyQixDQUFDLEdBQUdxQixJQUFJLENBQUNyQixDQUFDLEdBQUcyQixDQUFDLEdBQUdKLENBQUMsRUFBRUYsSUFBSSxDQUFDckIsQ0FBQyxHQUFHcUIsSUFBSSxDQUFDcEIsQ0FBQyxHQUFHMEIsQ0FBQyxHQUFHTixJQUFJLENBQUN0QixDQUFDLEdBQUcwQixDQUFDLEVBQUUsQ0FBQyxFQUM5RkosSUFBSSxDQUFDcEIsQ0FBQyxHQUFHb0IsSUFBSSxDQUFDdEIsQ0FBQyxHQUFHNEIsQ0FBQyxHQUFHTixJQUFJLENBQUNyQixDQUFDLEdBQUd5QixDQUFDLEVBQUVKLElBQUksQ0FBQ3BCLENBQUMsR0FBR29CLElBQUksQ0FBQ3JCLENBQUMsR0FBRzJCLENBQUMsR0FBR04sSUFBSSxDQUFDdEIsQ0FBQyxHQUFHMEIsQ0FBQyxFQUFFSixJQUFJLENBQUNwQixDQUFDLEdBQUdvQixJQUFJLENBQUNwQixDQUFDLEdBQUcwQixDQUFDLEdBQUdKLENBQUMsRUFBRSxDQUFDLEVBQzlGLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFDVnpGLEtBQUssQ0FBQ0ksTUFBTSxDQUFFO0VBQ2xCOztFQUVBOztFQUdBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBTzBGLFNBQVNBLENBQUVOLEtBQUssRUFBRztJQUN4QixNQUFNQyxDQUFDLEdBQUdqRCxJQUFJLENBQUNrRCxHQUFHLENBQUVGLEtBQUssQ0FBRTtJQUMzQixNQUFNRyxDQUFDLEdBQUduRCxJQUFJLENBQUNvRCxHQUFHLENBQUVKLEtBQUssQ0FBRTtJQUUzQixPQUFPLElBQUk1RyxPQUFPLENBQ2hCLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFDVixDQUFDLEVBQUU2RyxDQUFDLEVBQUUsQ0FBQ0UsQ0FBQyxFQUFFLENBQUMsRUFDWCxDQUFDLEVBQUVBLENBQUMsRUFBRUYsQ0FBQyxFQUFFLENBQUMsRUFDVixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1Z6RixLQUFLLENBQUNJLE1BQU0sQ0FBRTtFQUNsQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQU8yRixTQUFTQSxDQUFFUCxLQUFLLEVBQUc7SUFDeEIsTUFBTUMsQ0FBQyxHQUFHakQsSUFBSSxDQUFDa0QsR0FBRyxDQUFFRixLQUFLLENBQUU7SUFDM0IsTUFBTUcsQ0FBQyxHQUFHbkQsSUFBSSxDQUFDb0QsR0FBRyxDQUFFSixLQUFLLENBQUU7SUFFM0IsT0FBTyxJQUFJNUcsT0FBTyxDQUNoQjZHLENBQUMsRUFBRSxDQUFDLEVBQUVFLENBQUMsRUFBRSxDQUFDLEVBQ1YsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNWLENBQUNBLENBQUMsRUFBRSxDQUFDLEVBQUVGLENBQUMsRUFBRSxDQUFDLEVBQ1gsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNWekYsS0FBSyxDQUFDSSxNQUFNLENBQUU7RUFDbEI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRSxPQUFPNEYsU0FBU0EsQ0FBRVIsS0FBSyxFQUFHO0lBQ3hCLE1BQU1DLENBQUMsR0FBR2pELElBQUksQ0FBQ2tELEdBQUcsQ0FBRUYsS0FBSyxDQUFFO0lBQzNCLE1BQU1HLENBQUMsR0FBR25ELElBQUksQ0FBQ29ELEdBQUcsQ0FBRUosS0FBSyxDQUFFO0lBRTNCLE9BQU8sSUFBSTVHLE9BQU8sQ0FDaEI2RyxDQUFDLEVBQUUsQ0FBQ0UsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1hBLENBQUMsRUFBRUYsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQ1YsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNWLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFDVnpGLEtBQUssQ0FBQ0ksTUFBTSxDQUFFO0VBQ2xCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsT0FBTzZGLGNBQWNBLENBQUVDLFdBQVcsRUFBRUMsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRztJQUN4RCxNQUFNQyxTQUFTLEdBQUc5RCxJQUFJLENBQUNrRCxHQUFHLENBQUVRLFdBQVcsQ0FBRSxHQUFHMUQsSUFBSSxDQUFDb0QsR0FBRyxDQUFFTSxXQUFXLENBQUU7SUFFbkUsT0FBTyxJQUFJdEgsT0FBTyxDQUNoQjBILFNBQVMsR0FBR0gsTUFBTSxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUMzQixDQUFDLEVBQUVHLFNBQVMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUNsQixDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUVELElBQUksR0FBR0QsS0FBSyxLQUFPQSxLQUFLLEdBQUdDLElBQUksQ0FBRSxFQUFJLENBQUMsR0FBR0EsSUFBSSxHQUFHRCxLQUFLLElBQU9BLEtBQUssR0FBR0MsSUFBSSxDQUFFLEVBQ2xGLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFFO0VBQ2pCO0FBQ0Y7QUFFQS9ILEdBQUcsQ0FBQ2lJLFFBQVEsQ0FBRSxTQUFTLEVBQUUzSCxPQUFPLENBQUU7QUFFbEMsTUFBTW9CLEtBQUssR0FBRzNCLHFCQUFxQixDQUFDbUksTUFBTSxDQUFFLENBQzFDLE9BQU8sRUFDUCxVQUFVLEVBQ1YsZ0JBQWdCLEVBQ2hCLFNBQVMsRUFDVCxRQUFRLENBQ1QsQ0FBRTs7QUFFSDtBQUNBNUgsT0FBTyxDQUFDb0IsS0FBSyxHQUFHQSxLQUFLOztBQUVyQjtBQUNBcEIsT0FBTyxDQUFDNkUsUUFBUSxHQUFHLElBQUk3RSxPQUFPLEVBQUUsQ0FBQ2tHLGFBQWEsRUFBRTtBQUVoRCxlQUFlbEcsT0FBTyJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/toSVGNumber.js
// Copyright 2020-2021, University of Colorado Boulder

/**
 * Outputs a number for use in SVG's style/transform/path strings.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/**
 * Outputs a number for use in SVG's style/transform/path strings.
 *
 * We need to prevent the numbers from being in an exponential toString form, since the CSS transform does not support
 * that.
 *
 * @param {number} number
 * @returns {string}
 */
function toSVGNumber(number) {
  // Largest guaranteed number of digits according to https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed
  // See https://github.com/phetsims/dot/issues/36
  return number.toFixed(20); // eslint-disable-line bad-sim-text
}

js_dot.register('toSVGNumber', toSVGNumber);
/* harmony default export */ const js_toSVGNumber = (toSVGNumber);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJ0b1NWR051bWJlciIsIm51bWJlciIsInRvRml4ZWQiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbInRvU1ZHTnVtYmVyLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDIwLTIwMjEsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIE91dHB1dHMgYSBudW1iZXIgZm9yIHVzZSBpbiBTVkcncyBzdHlsZS90cmFuc2Zvcm0vcGF0aCBzdHJpbmdzLlxuICpcbiAqIEBhdXRob3IgSm9uYXRoYW4gT2xzb24gPGpvbmF0aGFuLm9sc29uQGNvbG9yYWRvLmVkdT5cbiAqL1xuXG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcblxuLyoqXG4gKiBPdXRwdXRzIGEgbnVtYmVyIGZvciB1c2UgaW4gU1ZHJ3Mgc3R5bGUvdHJhbnNmb3JtL3BhdGggc3RyaW5ncy5cbiAqXG4gKiBXZSBuZWVkIHRvIHByZXZlbnQgdGhlIG51bWJlcnMgZnJvbSBiZWluZyBpbiBhbiBleHBvbmVudGlhbCB0b1N0cmluZyBmb3JtLCBzaW5jZSB0aGUgQ1NTIHRyYW5zZm9ybSBkb2VzIG5vdCBzdXBwb3J0XG4gKiB0aGF0LlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBudW1iZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIHRvU1ZHTnVtYmVyKCBudW1iZXIgKSB7XG4gIC8vIExhcmdlc3QgZ3VhcmFudGVlZCBudW1iZXIgb2YgZGlnaXRzIGFjY29yZGluZyB0byBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci90b0ZpeGVkXG4gIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vcGhldHNpbXMvZG90L2lzc3Vlcy8zNlxuICByZXR1cm4gbnVtYmVyLnRvRml4ZWQoIDIwICk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgYmFkLXNpbS10ZXh0XG59XG5cbmRvdC5yZWdpc3RlciggJ3RvU1ZHTnVtYmVyJywgdG9TVkdOdW1iZXIgKTtcbmV4cG9ydCBkZWZhdWx0IHRvU1ZHTnVtYmVyOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxHQUFHLE1BQU0sVUFBVTs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsV0FBV0EsQ0FBRUMsTUFBTSxFQUFHO0VBQzdCO0VBQ0E7RUFDQSxPQUFPQSxNQUFNLENBQUNDLE9BQU8sQ0FBRSxFQUFFLENBQUUsQ0FBQyxDQUFDO0FBQy9COztBQUVBSCxHQUFHLENBQUNJLFFBQVEsQ0FBRSxhQUFhLEVBQUVILFdBQVcsQ0FBRTtBQUMxQyxlQUFlQSxXQUFXIn0=
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Matrix3.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * 3-dimensional Matrix
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */













class Matrix3Type extends js_EnumerationValue {
  static OTHER = new Matrix3Type();
  static IDENTITY = new Matrix3Type();
  static TRANSLATION_2D = new Matrix3Type();
  static SCALING = new Matrix3Type();
  static AFFINE = new Matrix3Type();
  static enumeration = new js_Enumeration(Matrix3Type);
}
class Matrix3 {
  // Entries stored in column-major format

  /**
   * Creates an identity matrix, that can then be mutated into the proper form.
   */
  constructor() {
    //Make sure no clients are expecting to create a matrix with non-identity values
    assert && assert(arguments.length === 0, 'Matrix3 constructor should not be called with any arguments.  Use m3()/Matrix3.identity()/etc.');
    this.entries = [1, 0, 0, 0, 1, 0, 0, 0, 1];
    this.type = Matrix3Type.IDENTITY;
  }

  /**
   * Convenience getter for the individual 0,0 entry of the matrix.
   */
  m00() {
    return this.entries[0];
  }

  /**
   * Convenience getter for the individual 0,1 entry of the matrix.
   */
  m01() {
    return this.entries[3];
  }

  /**
   * Convenience getter for the individual 0,2 entry of the matrix.
   */
  m02() {
    return this.entries[6];
  }

  /**
   * Convenience getter for the individual 1,0 entry of the matrix.
   */
  m10() {
    return this.entries[1];
  }

  /**
   * Convenience getter for the individual 1,1 entry of the matrix.
   */
  m11() {
    return this.entries[4];
  }

  /**
   * Convenience getter for the individual 1,2 entry of the matrix.
   */
  m12() {
    return this.entries[7];
  }

  /**
   * Convenience getter for the individual 2,0 entry of the matrix.
   */
  m20() {
    return this.entries[2];
  }

  /**
   * Convenience getter for the individual 2,1 entry of the matrix.
   */
  m21() {
    return this.entries[5];
  }

  /**
   * Convenience getter for the individual 2,2 entry of the matrix.
   */
  m22() {
    return this.entries[8];
  }

  /**
   * Returns whether this matrix is an identity matrix.
   */
  isIdentity() {
    return this.type === Matrix3Type.IDENTITY || this.equals(Matrix3.IDENTITY);
  }

  /**
   * Returns whether this matrix is likely to be an identity matrix (returning false means "inconclusive, may be
   * identity or not"), but true is guaranteed to be an identity matrix.
   */
  isFastIdentity() {
    return this.type === Matrix3Type.IDENTITY;
  }

  /**
   * Returns whether this matrix is a translation matrix.
   * By this we mean it has no shear, rotation, or scaling
   * It may be a translation of zero.
   */
  isTranslation() {
    return this.type === Matrix3Type.TRANSLATION_2D || this.m00() === 1 && this.m11() === 1 && this.m22() === 1 && this.m01() === 0 && this.m10() === 0 && this.m20() === 0 && this.m21() === 0;
  }

  /**
   * Returns whether this matrix is an affine matrix (e.g. no shear).
   */
  isAffine() {
    return this.type === Matrix3Type.AFFINE || this.m20() === 0 && this.m21() === 0 && this.m22() === 1;
  }

  /**
   * Returns whether it's an affine matrix where the components of transforms are independent, i.e. constructed from
   * arbitrary component scaling and translation.
   */
  isAligned() {
    // non-diagonal non-translation entries should all be zero.
    return this.isAffine() && this.m01() === 0 && this.m10() === 0;
  }

  /**
   * Returns if it's an affine matrix where the components of transforms are independent, but may be switched (unlike isAligned)
   *
   * i.e. the 2x2 rotational sub-matrix is of one of the two forms:
   * A 0  or  0  A
   * 0 B      B  0
   * This means that moving a transformed point by (x,0) or (0,y) will result in a motion along one of the axes.
   */
  isAxisAligned() {
    return this.isAffine() && (this.m01() === 0 && this.m10() === 0 || this.m00() === 0 && this.m11() === 0);
  }

  /**
   * Returns whether every single entry in this matrix is a finite number (non-NaN, non-infinite).
   */
  isFinite() {
    return isFinite(this.m00()) && isFinite(this.m01()) && isFinite(this.m02()) && isFinite(this.m10()) && isFinite(this.m11()) && isFinite(this.m12()) && isFinite(this.m20()) && isFinite(this.m21()) && isFinite(this.m22());
  }

  /**
   * Returns the determinant of this matrix.
   */
  getDeterminant() {
    return this.m00() * this.m11() * this.m22() + this.m01() * this.m12() * this.m20() + this.m02() * this.m10() * this.m21() - this.m02() * this.m11() * this.m20() - this.m01() * this.m10() * this.m22() - this.m00() * this.m12() * this.m21();
  }
  get determinant() {
    return this.getDeterminant();
  }

  /**
   * Returns the 2D translation, assuming multiplication with a homogeneous vector
   */
  getTranslation() {
    return new Vector2(this.m02(), this.m12());
  }
  get translation() {
    return this.getTranslation();
  }

  /**
   * Returns a vector that is equivalent to ( T(1,0).magnitude(), T(0,1).magnitude() ) where T is a relative transform
   */
  getScaleVector() {
    return new Vector2(Math.sqrt(this.m00() * this.m00() + this.m10() * this.m10()), Math.sqrt(this.m01() * this.m01() + this.m11() * this.m11()));
  }
  get scaleVector() {
    return this.getScaleVector();
  }

  /**
   * Returns the angle in radians for the 2d rotation from this matrix, between pi, -pi
   */
  getRotation() {
    return Math.atan2(this.m10(), this.m00());
  }
  get rotation() {
    return this.getRotation();
  }

  /**
   * Returns an identity-padded copy of this matrix with an increased dimension.
   */
  toMatrix4() {
    return new js_Matrix4(this.m00(), this.m01(), this.m02(), 0, this.m10(), this.m11(), this.m12(), 0, this.m20(), this.m21(), this.m22(), 0, 0, 0, 0, 1);
  }

  /**
   * Returns an identity-padded copy of this matrix with an increased dimension, treating this matrix's affine
   * components only.
   */
  toAffineMatrix4() {
    return new js_Matrix4(this.m00(), this.m01(), 0, this.m02(), this.m10(), this.m11(), 0, this.m12(), 0, 0, 1, 0, 0, 0, 0, 1);
  }

  /**
   * Returns a string form of this object
   */
  toString() {
    return `${this.m00()} ${this.m01()} ${this.m02()}\n${this.m10()} ${this.m11()} ${this.m12()}\n${this.m20()} ${this.m21()} ${this.m22()}`;
  }

  /**
   * Creates an SVG form of this matrix, for high-performance processing in SVG output.
   */
  toSVGMatrix() {
    const result = document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGMatrix();

    // top two rows
    result.a = this.m00();
    result.b = this.m10();
    result.c = this.m01();
    result.d = this.m11();
    result.e = this.m02();
    result.f = this.m12();
    return result;
  }

  /**
   * Returns the CSS form (simplified if possible) for this transformation matrix.
   */
  getCSSTransform() {
    // See http://www.w3.org/TR/css3-transforms/, particularly Section 13 that discusses the SVG compatibility

    // We need to prevent the numbers from being in an exponential toString form, since the CSS transform does not support that
    // 20 is the largest guaranteed number of digits according to https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed
    // See https://github.com/phetsims/dot/issues/36

    // the inner part of a CSS3 transform, but remember to add the browser-specific parts!
    // NOTE: the toFixed calls are inlined for performance reasons
    return `matrix(${this.entries[0].toFixed(20)},${this.entries[1].toFixed(20)},${this.entries[3].toFixed(20)},${this.entries[4].toFixed(20)},${this.entries[6].toFixed(20)},${this.entries[7].toFixed(20)})`; // eslint-disable-line bad-sim-text
  }

  get cssTransform() {
    return this.getCSSTransform();
  }

  /**
   * Returns the CSS-like SVG matrix form for this transformation matrix.
   */
  getSVGTransform() {
    // SVG transform presentation attribute. See http://www.w3.org/TR/SVG/coords.html#TransformAttribute
    switch (this.type) {
      case Matrix3Type.IDENTITY:
        return '';
      case Matrix3Type.TRANSLATION_2D:
        return `translate(${js_toSVGNumber(this.entries[6])},${js_toSVGNumber(this.entries[7])})`;
      case Matrix3Type.SCALING:
        return `scale(${js_toSVGNumber(this.entries[0])}${this.entries[0] === this.entries[4] ? '' : `,${js_toSVGNumber(this.entries[4])}`})`;
      default:
        return `matrix(${js_toSVGNumber(this.entries[0])},${js_toSVGNumber(this.entries[1])},${js_toSVGNumber(this.entries[3])},${js_toSVGNumber(this.entries[4])},${js_toSVGNumber(this.entries[6])},${js_toSVGNumber(this.entries[7])})`;
    }
  }
  get svgTransform() {
    return this.getSVGTransform();
  }

  /**
   * Returns a parameter object suitable for use with jQuery's .css()
   */
  getCSSTransformStyles() {
    const transformCSS = this.getCSSTransform();

    // notes on triggering hardware acceleration: http://creativejs.com/2011/12/day-2-gpu-accelerate-your-dom-elements/
    return {
      // force iOS hardware acceleration
      '-webkit-perspective': '1000',
      '-webkit-backface-visibility': 'hidden',
      '-webkit-transform': `${transformCSS} translateZ(0)`,
      // trigger hardware acceleration if possible
      '-moz-transform': `${transformCSS} translateZ(0)`,
      // trigger hardware acceleration if possible
      '-ms-transform': transformCSS,
      '-o-transform': transformCSS,
      transform: transformCSS,
      'transform-origin': 'top left',
      // at the origin of the component. consider 0px 0px instead. Critical, since otherwise this defaults to 50% 50%!!! see https://developer.mozilla.org/en-US/docs/CSS/transform-origin
      '-ms-transform-origin': 'top left' // TODO: do we need other platform-specific transform-origin styles?
    };
  }

  get cssTransformStyles() {
    return this.getCSSTransformStyles();
  }

  /**
   * Returns exact equality with another matrix
   */
  equals(matrix) {
    return this.m00() === matrix.m00() && this.m01() === matrix.m01() && this.m02() === matrix.m02() && this.m10() === matrix.m10() && this.m11() === matrix.m11() && this.m12() === matrix.m12() && this.m20() === matrix.m20() && this.m21() === matrix.m21() && this.m22() === matrix.m22();
  }

  /**
   * Returns equality within a margin of error with another matrix
   */
  equalsEpsilon(matrix, epsilon) {
    return Math.abs(this.m00() - matrix.m00()) < epsilon && Math.abs(this.m01() - matrix.m01()) < epsilon && Math.abs(this.m02() - matrix.m02()) < epsilon && Math.abs(this.m10() - matrix.m10()) < epsilon && Math.abs(this.m11() - matrix.m11()) < epsilon && Math.abs(this.m12() - matrix.m12()) < epsilon && Math.abs(this.m20() - matrix.m20()) < epsilon && Math.abs(this.m21() - matrix.m21()) < epsilon && Math.abs(this.m22() - matrix.m22()) < epsilon;
  }

  /*---------------------------------------------------------------------------*
   * Immutable operations (returns a new matrix)
   *----------------------------------------------------------------------------*/

  /**
   * Returns a copy of this matrix
   */
  copy() {
    return m3(this.m00(), this.m01(), this.m02(), this.m10(), this.m11(), this.m12(), this.m20(), this.m21(), this.m22(), this.type);
  }

  /**
   * Returns a new matrix, defined by this matrix plus the provided matrix
   */
  plus(matrix) {
    return m3(this.m00() + matrix.m00(), this.m01() + matrix.m01(), this.m02() + matrix.m02(), this.m10() + matrix.m10(), this.m11() + matrix.m11(), this.m12() + matrix.m12(), this.m20() + matrix.m20(), this.m21() + matrix.m21(), this.m22() + matrix.m22());
  }

  /**
   * Returns a new matrix, defined by this matrix plus the provided matrix
   */
  minus(matrix) {
    return m3(this.m00() - matrix.m00(), this.m01() - matrix.m01(), this.m02() - matrix.m02(), this.m10() - matrix.m10(), this.m11() - matrix.m11(), this.m12() - matrix.m12(), this.m20() - matrix.m20(), this.m21() - matrix.m21(), this.m22() - matrix.m22());
  }

  /**
   * Returns a transposed copy of this matrix
   */
  transposed() {
    return m3(this.m00(), this.m10(), this.m20(), this.m01(), this.m11(), this.m21(), this.m02(), this.m12(), this.m22(), this.type === Matrix3Type.IDENTITY || this.type === Matrix3Type.SCALING ? this.type : undefined);
  }

  /**
   * Returns a negated copy of this matrix
   */
  negated() {
    return m3(-this.m00(), -this.m01(), -this.m02(), -this.m10(), -this.m11(), -this.m12(), -this.m20(), -this.m21(), -this.m22());
  }

  /**
   * Returns an inverted copy of this matrix
   */
  inverted() {
    let det;
    switch (this.type) {
      case Matrix3Type.IDENTITY:
        return this;
      case Matrix3Type.TRANSLATION_2D:
        return m3(1, 0, -this.m02(), 0, 1, -this.m12(), 0, 0, 1, Matrix3Type.TRANSLATION_2D);
      case Matrix3Type.SCALING:
        return m3(1 / this.m00(), 0, 0, 0, 1 / this.m11(), 0, 0, 0, 1 / this.m22(), Matrix3Type.SCALING);
      case Matrix3Type.AFFINE:
        det = this.getDeterminant();
        if (det !== 0) {
          return m3((-this.m12() * this.m21() + this.m11() * this.m22()) / det, (this.m02() * this.m21() - this.m01() * this.m22()) / det, (-this.m02() * this.m11() + this.m01() * this.m12()) / det, (this.m12() * this.m20() - this.m10() * this.m22()) / det, (-this.m02() * this.m20() + this.m00() * this.m22()) / det, (this.m02() * this.m10() - this.m00() * this.m12()) / det, 0, 0, 1, Matrix3Type.AFFINE);
        } else {
          throw new Error('Matrix could not be inverted, determinant === 0');
        }
      case Matrix3Type.OTHER:
        det = this.getDeterminant();
        if (det !== 0) {
          return m3((-this.m12() * this.m21() + this.m11() * this.m22()) / det, (this.m02() * this.m21() - this.m01() * this.m22()) / det, (-this.m02() * this.m11() + this.m01() * this.m12()) / det, (this.m12() * this.m20() - this.m10() * this.m22()) / det, (-this.m02() * this.m20() + this.m00() * this.m22()) / det, (this.m02() * this.m10() - this.m00() * this.m12()) / det, (-this.m11() * this.m20() + this.m10() * this.m21()) / det, (this.m01() * this.m20() - this.m00() * this.m21()) / det, (-this.m01() * this.m10() + this.m00() * this.m11()) / det, Matrix3Type.OTHER);
        } else {
          throw new Error('Matrix could not be inverted, determinant === 0');
        }
      default:
        throw new Error(`Matrix3.inverted with unknown type: ${this.type}`);
    }
  }

  /**
   * Returns a matrix, defined by the multiplication of this * matrix.
   *
   * @param matrix
   * @returns - NOTE: this may be the same matrix!
   */
  timesMatrix(matrix) {
    // I * M === M * I === M (the identity)
    if (this.type === Matrix3Type.IDENTITY || matrix.type === Matrix3Type.IDENTITY) {
      return this.type === Matrix3Type.IDENTITY ? matrix : this;
    }
    if (this.type === matrix.type) {
      // currently two matrices of the same type will result in the same result type
      if (this.type === Matrix3Type.TRANSLATION_2D) {
        // faster combination of translations
        return m3(1, 0, this.m02() + matrix.m02(), 0, 1, this.m12() + matrix.m12(), 0, 0, 1, Matrix3Type.TRANSLATION_2D);
      } else if (this.type === Matrix3Type.SCALING) {
        // faster combination of scaling
        return m3(this.m00() * matrix.m00(), 0, 0, 0, this.m11() * matrix.m11(), 0, 0, 0, 1, Matrix3Type.SCALING);
      }
    }
    if (this.type !== Matrix3Type.OTHER && matrix.type !== Matrix3Type.OTHER) {
      // currently two matrices that are anything but "other" are technically affine, and the result will be affine

      // affine case
      return m3(this.m00() * matrix.m00() + this.m01() * matrix.m10(), this.m00() * matrix.m01() + this.m01() * matrix.m11(), this.m00() * matrix.m02() + this.m01() * matrix.m12() + this.m02(), this.m10() * matrix.m00() + this.m11() * matrix.m10(), this.m10() * matrix.m01() + this.m11() * matrix.m11(), this.m10() * matrix.m02() + this.m11() * matrix.m12() + this.m12(), 0, 0, 1, Matrix3Type.AFFINE);
    }

    // general case
    return m3(this.m00() * matrix.m00() + this.m01() * matrix.m10() + this.m02() * matrix.m20(), this.m00() * matrix.m01() + this.m01() * matrix.m11() + this.m02() * matrix.m21(), this.m00() * matrix.m02() + this.m01() * matrix.m12() + this.m02() * matrix.m22(), this.m10() * matrix.m00() + this.m11() * matrix.m10() + this.m12() * matrix.m20(), this.m10() * matrix.m01() + this.m11() * matrix.m11() + this.m12() * matrix.m21(), this.m10() * matrix.m02() + this.m11() * matrix.m12() + this.m12() * matrix.m22(), this.m20() * matrix.m00() + this.m21() * matrix.m10() + this.m22() * matrix.m20(), this.m20() * matrix.m01() + this.m21() * matrix.m11() + this.m22() * matrix.m21(), this.m20() * matrix.m02() + this.m21() * matrix.m12() + this.m22() * matrix.m22());
  }

  /*---------------------------------------------------------------------------*
   * Immutable operations (returns new form of a parameter)
   *----------------------------------------------------------------------------*/

  /**
   * Returns the multiplication of this matrix times the provided vector (treating this matrix as homogeneous, so that
   * it is the technical multiplication of (x,y,1)).
   */
  timesVector2(vector2) {
    const x = this.m00() * vector2.x + this.m01() * vector2.y + this.m02();
    const y = this.m10() * vector2.x + this.m11() * vector2.y + this.m12();
    return new Vector2(x, y);
  }

  /**
   * Returns the multiplication of this matrix times the provided vector
   */
  timesVector3(vector3) {
    const x = this.m00() * vector3.x + this.m01() * vector3.y + this.m02() * vector3.z;
    const y = this.m10() * vector3.x + this.m11() * vector3.y + this.m12() * vector3.z;
    const z = this.m20() * vector3.x + this.m21() * vector3.y + this.m22() * vector3.z;
    return new Vector3(x, y, z);
  }

  /**
   * Returns the multiplication of the transpose of this matrix times the provided vector (assuming the 2x2 quadrant)
   */
  timesTransposeVector2(vector2) {
    const x = this.m00() * vector2.x + this.m10() * vector2.y;
    const y = this.m01() * vector2.x + this.m11() * vector2.y;
    return new Vector2(x, y);
  }

  /**
   * TODO: this operation seems to not work for transformDelta2, should be vetted
   */
  timesRelativeVector2(vector2) {
    const x = this.m00() * vector2.x + this.m01() * vector2.y;
    const y = this.m10() * vector2.y + this.m11() * vector2.y;
    return new Vector2(x, y);
  }

  /*---------------------------------------------------------------------------*
   * Mutable operations (changes this matrix)
   *----------------------------------------------------------------------------*/

  /**
   * Sets the entire state of the matrix, in row-major order.
   *
   * NOTE: Every mutable method goes through rowMajor
   */
  rowMajor(v00, v01, v02, v10, v11, v12, v20, v21, v22, type) {
    this.entries[0] = v00;
    this.entries[1] = v10;
    this.entries[2] = v20;
    this.entries[3] = v01;
    this.entries[4] = v11;
    this.entries[5] = v21;
    this.entries[6] = v02;
    this.entries[7] = v12;
    this.entries[8] = v22;

    // TODO: consider performance of the affine check here
    this.type = type === undefined ? v20 === 0 && v21 === 0 && v22 === 1 ? Matrix3Type.AFFINE : Matrix3Type.OTHER : type;
    return this;
  }

  /**
   * Sets this matrix to be a copy of another matrix.
   */
  set(matrix) {
    return this.rowMajor(matrix.m00(), matrix.m01(), matrix.m02(), matrix.m10(), matrix.m11(), matrix.m12(), matrix.m20(), matrix.m21(), matrix.m22(), matrix.type);
  }

  /**
   * Sets this matrix to be a copy of the column-major data stored in an array (e.g. WebGL).
   */
  setArray(array) {
    return this.rowMajor(array[0], array[3], array[6], array[1], array[4], array[7], array[2], array[5], array[8]);
  }

  /**
   * Sets the individual 0,0 component of this matrix.
   */
  set00(value) {
    this.entries[0] = value;
    return this;
  }

  /**
   * Sets the individual 0,1 component of this matrix.
   */
  set01(value) {
    this.entries[3] = value;
    return this;
  }

  /**
   * Sets the individual 0,2 component of this matrix.
   */
  set02(value) {
    this.entries[6] = value;
    return this;
  }

  /**
   * Sets the individual 1,0 component of this matrix.
   */
  set10(value) {
    this.entries[1] = value;
    return this;
  }

  /**
   * Sets the individual 1,1 component of this matrix.
   */
  set11(value) {
    this.entries[4] = value;
    return this;
  }

  /**
   * Sets the individual 1,2 component of this matrix.
   */
  set12(value) {
    this.entries[7] = value;
    return this;
  }

  /**
   * Sets the individual 2,0 component of this matrix.
   */
  set20(value) {
    this.entries[2] = value;
    return this;
  }

  /**
   * Sets the individual 2,1 component of this matrix.
   */
  set21(value) {
    this.entries[5] = value;
    return this;
  }

  /**
   * Sets the individual 2,2 component of this matrix.
   */
  set22(value) {
    this.entries[8] = value;
    return this;
  }

  /**
   * Makes this matrix effectively immutable to the normal methods (except direct setters?)
   */
  makeImmutable() {
    if (assert) {
      this.rowMajor = () => {
        throw new Error('Cannot modify immutable matrix');
      };
    }
    return this;
  }

  /**
   * Sets the entire state of the matrix, in column-major order.
   */
  columnMajor(v00, v10, v20, v01, v11, v21, v02, v12, v22, type) {
    return this.rowMajor(v00, v01, v02, v10, v11, v12, v20, v21, v22, type);
  }

  /**
   * Sets this matrix to itself plus the given matrix.
   */
  add(matrix) {
    return this.rowMajor(this.m00() + matrix.m00(), this.m01() + matrix.m01(), this.m02() + matrix.m02(), this.m10() + matrix.m10(), this.m11() + matrix.m11(), this.m12() + matrix.m12(), this.m20() + matrix.m20(), this.m21() + matrix.m21(), this.m22() + matrix.m22());
  }

  /**
   * Sets this matrix to itself minus the given matrix.
   */
  subtract(m) {
    return this.rowMajor(this.m00() - m.m00(), this.m01() - m.m01(), this.m02() - m.m02(), this.m10() - m.m10(), this.m11() - m.m11(), this.m12() - m.m12(), this.m20() - m.m20(), this.m21() - m.m21(), this.m22() - m.m22());
  }

  /**
   * Sets this matrix to its own transpose.
   */
  transpose() {
    return this.rowMajor(this.m00(), this.m10(), this.m20(), this.m01(), this.m11(), this.m21(), this.m02(), this.m12(), this.m22(), this.type === Matrix3Type.IDENTITY || this.type === Matrix3Type.SCALING ? this.type : undefined);
  }

  /**
   * Sets this matrix to its own negation.
   */
  negate() {
    return this.rowMajor(-this.m00(), -this.m01(), -this.m02(), -this.m10(), -this.m11(), -this.m12(), -this.m20(), -this.m21(), -this.m22());
  }

  /**
   * Sets this matrix to its own inverse.
   */
  invert() {
    let det;
    switch (this.type) {
      case Matrix3Type.IDENTITY:
        return this;
      case Matrix3Type.TRANSLATION_2D:
        return this.rowMajor(1, 0, -this.m02(), 0, 1, -this.m12(), 0, 0, 1, Matrix3Type.TRANSLATION_2D);
      case Matrix3Type.SCALING:
        return this.rowMajor(1 / this.m00(), 0, 0, 0, 1 / this.m11(), 0, 0, 0, 1 / this.m22(), Matrix3Type.SCALING);
      case Matrix3Type.AFFINE:
        det = this.getDeterminant();
        if (det !== 0) {
          return this.rowMajor((-this.m12() * this.m21() + this.m11() * this.m22()) / det, (this.m02() * this.m21() - this.m01() * this.m22()) / det, (-this.m02() * this.m11() + this.m01() * this.m12()) / det, (this.m12() * this.m20() - this.m10() * this.m22()) / det, (-this.m02() * this.m20() + this.m00() * this.m22()) / det, (this.m02() * this.m10() - this.m00() * this.m12()) / det, 0, 0, 1, Matrix3Type.AFFINE);
        } else {
          throw new Error('Matrix could not be inverted, determinant === 0');
        }
      case Matrix3Type.OTHER:
        det = this.getDeterminant();
        if (det !== 0) {
          return this.rowMajor((-this.m12() * this.m21() + this.m11() * this.m22()) / det, (this.m02() * this.m21() - this.m01() * this.m22()) / det, (-this.m02() * this.m11() + this.m01() * this.m12()) / det, (this.m12() * this.m20() - this.m10() * this.m22()) / det, (-this.m02() * this.m20() + this.m00() * this.m22()) / det, (this.m02() * this.m10() - this.m00() * this.m12()) / det, (-this.m11() * this.m20() + this.m10() * this.m21()) / det, (this.m01() * this.m20() - this.m00() * this.m21()) / det, (-this.m01() * this.m10() + this.m00() * this.m11()) / det, Matrix3Type.OTHER);
        } else {
          throw new Error('Matrix could not be inverted, determinant === 0');
        }
      default:
        throw new Error(`Matrix3.inverted with unknown type: ${this.type}`);
    }
  }

  /**
   * Sets this matrix to the value of itself times the provided matrix
   */
  multiplyMatrix(matrix) {
    // M * I === M (the identity)
    if (matrix.type === Matrix3Type.IDENTITY) {
      // no change needed
      return this;
    }

    // I * M === M (the identity)
    if (this.type === Matrix3Type.IDENTITY) {
      // copy the other matrix to us
      return this.set(matrix);
    }
    if (this.type === matrix.type) {
      // currently two matrices of the same type will result in the same result type
      if (this.type === Matrix3Type.TRANSLATION_2D) {
        // faster combination of translations
        return this.rowMajor(1, 0, this.m02() + matrix.m02(), 0, 1, this.m12() + matrix.m12(), 0, 0, 1, Matrix3Type.TRANSLATION_2D);
      } else if (this.type === Matrix3Type.SCALING) {
        // faster combination of scaling
        return this.rowMajor(this.m00() * matrix.m00(), 0, 0, 0, this.m11() * matrix.m11(), 0, 0, 0, 1, Matrix3Type.SCALING);
      }
    }
    if (this.type !== Matrix3Type.OTHER && matrix.type !== Matrix3Type.OTHER) {
      // currently two matrices that are anything but "other" are technically affine, and the result will be affine

      // affine case
      return this.rowMajor(this.m00() * matrix.m00() + this.m01() * matrix.m10(), this.m00() * matrix.m01() + this.m01() * matrix.m11(), this.m00() * matrix.m02() + this.m01() * matrix.m12() + this.m02(), this.m10() * matrix.m00() + this.m11() * matrix.m10(), this.m10() * matrix.m01() + this.m11() * matrix.m11(), this.m10() * matrix.m02() + this.m11() * matrix.m12() + this.m12(), 0, 0, 1, Matrix3Type.AFFINE);
    }

    // general case
    return this.rowMajor(this.m00() * matrix.m00() + this.m01() * matrix.m10() + this.m02() * matrix.m20(), this.m00() * matrix.m01() + this.m01() * matrix.m11() + this.m02() * matrix.m21(), this.m00() * matrix.m02() + this.m01() * matrix.m12() + this.m02() * matrix.m22(), this.m10() * matrix.m00() + this.m11() * matrix.m10() + this.m12() * matrix.m20(), this.m10() * matrix.m01() + this.m11() * matrix.m11() + this.m12() * matrix.m21(), this.m10() * matrix.m02() + this.m11() * matrix.m12() + this.m12() * matrix.m22(), this.m20() * matrix.m00() + this.m21() * matrix.m10() + this.m22() * matrix.m20(), this.m20() * matrix.m01() + this.m21() * matrix.m11() + this.m22() * matrix.m21(), this.m20() * matrix.m02() + this.m21() * matrix.m12() + this.m22() * matrix.m22());
  }

  /**
   * Mutates this matrix, equivalent to (translation * this).
   */
  prependTranslation(x, y) {
    this.set02(this.m02() + x);
    this.set12(this.m12() + y);
    if (this.type === Matrix3Type.IDENTITY || this.type === Matrix3Type.TRANSLATION_2D) {
      this.type = Matrix3Type.TRANSLATION_2D;
    } else if (this.type === Matrix3Type.OTHER) {
      this.type = Matrix3Type.OTHER;
    } else {
      this.type = Matrix3Type.AFFINE;
    }
    return this; // for chaining
  }

  /**
   * Sets this matrix to the 3x3 identity matrix.
   */
  setToIdentity() {
    return this.rowMajor(1, 0, 0, 0, 1, 0, 0, 0, 1, Matrix3Type.IDENTITY);
  }

  /**
   * Sets this matrix to the affine translation matrix.
   */
  setToTranslation(x, y) {
    return this.rowMajor(1, 0, x, 0, 1, y, 0, 0, 1, Matrix3Type.TRANSLATION_2D);
  }

  /**
   * Sets this matrix to the affine scaling matrix.
   */
  setToScale(x, y) {
    // allow using one parameter to scale everything
    y = y === undefined ? x : y;
    return this.rowMajor(x, 0, 0, 0, y, 0, 0, 0, 1, Matrix3Type.SCALING);
  }

  /**
   * Sets this matrix to an affine matrix with the specified row-major values.
   */
  setToAffine(m00, m01, m02, m10, m11, m12) {
    return this.rowMajor(m00, m01, m02, m10, m11, m12, 0, 0, 1, Matrix3Type.AFFINE);
  }

  /**
   * Sets the matrix to a rotation defined by a rotation of the specified angle around the given unit axis.
   *
   * @param axis - normalized
   * @param angle - in radians
   */
  setToRotationAxisAngle(axis, angle) {
    let c = Math.cos(angle);
    let s = Math.sin(angle);

    // Handle cases close to 0, since we want Math.PI/2 rotations (and the like) to be exact
    if (Math.abs(c) < 1e-15) {
      c = 0;
    }
    if (Math.abs(s) < 1e-15) {
      s = 0;
    }
    const C = 1 - c;
    return this.rowMajor(axis.x * axis.x * C + c, axis.x * axis.y * C - axis.z * s, axis.x * axis.z * C + axis.y * s, axis.y * axis.x * C + axis.z * s, axis.y * axis.y * C + c, axis.y * axis.z * C - axis.x * s, axis.z * axis.x * C - axis.y * s, axis.z * axis.y * C + axis.x * s, axis.z * axis.z * C + c, Matrix3Type.OTHER);
  }

  /**
   * Sets this matrix to a rotation around the x axis (in the yz plane).
   *
   * @param angle - in radians
   */
  setToRotationX(angle) {
    let c = Math.cos(angle);
    let s = Math.sin(angle);

    // Handle cases close to 0, since we want Math.PI/2 rotations (and the like) to be exact
    if (Math.abs(c) < 1e-15) {
      c = 0;
    }
    if (Math.abs(s) < 1e-15) {
      s = 0;
    }
    return this.rowMajor(1, 0, 0, 0, c, -s, 0, s, c, Matrix3Type.OTHER);
  }

  /**
   * Sets this matrix to a rotation around the y axis (in the xz plane).
   *
   * @param angle - in radians
   */
  setToRotationY(angle) {
    let c = Math.cos(angle);
    let s = Math.sin(angle);

    // Handle cases close to 0, since we want Math.PI/2 rotations (and the like) to be exact
    if (Math.abs(c) < 1e-15) {
      c = 0;
    }
    if (Math.abs(s) < 1e-15) {
      s = 0;
    }
    return this.rowMajor(c, 0, s, 0, 1, 0, -s, 0, c, Matrix3Type.OTHER);
  }

  /**
   * Sets this matrix to a rotation around the z axis (in the xy plane).
   *
   * @param angle - in radians
   */
  setToRotationZ(angle) {
    let c = Math.cos(angle);
    let s = Math.sin(angle);

    // Handle cases close to 0, since we want Math.PI/2 rotations (and the like) to be exact
    if (Math.abs(c) < 1e-15) {
      c = 0;
    }
    if (Math.abs(s) < 1e-15) {
      s = 0;
    }
    return this.rowMajor(c, -s, 0, s, c, 0, 0, 0, 1, Matrix3Type.AFFINE);
  }

  /**
   * Sets this matrix to the combined translation+rotation (where the rotation logically would happen first, THEN it
   * would be translated).
   *
   * @param x
   * @param y
   * @param angle - in radians
   */
  setToTranslationRotation(x, y, angle) {
    let c = Math.cos(angle);
    let s = Math.sin(angle);

    // Handle cases close to 0, since we want Math.PI/2 rotations (and the like) to be exact
    if (Math.abs(c) < 1e-15) {
      c = 0;
    }
    if (Math.abs(s) < 1e-15) {
      s = 0;
    }
    return this.rowMajor(c, -s, x, s, c, y, 0, 0, 1, Matrix3Type.AFFINE);
  }

  /**
   * Sets this matrix to the combined translation+rotation (where the rotation logically would happen first, THEN it
   * would be translated).
   *
   * @param translation
   * @param angle - in radians
   */
  setToTranslationRotationPoint(translation, angle) {
    return this.setToTranslationRotation(translation.x, translation.y, angle);
  }

  /**
   * Sets this matrix to the values contained in an SVGMatrix.
   */
  setToSVGMatrix(svgMatrix) {
    return this.rowMajor(svgMatrix.a, svgMatrix.c, svgMatrix.e, svgMatrix.b, svgMatrix.d, svgMatrix.f, 0, 0, 1, Matrix3Type.AFFINE);
  }

  /**
   * Sets this matrix to a rotation matrix that rotates A to B (Vector3 instances), by rotating about the axis
   * A.cross( B ) -- Shortest path. ideally should be unit vectors.
   */
  setRotationAToB(a, b) {
    // see http://graphics.cs.brown.edu/~jfh/papers/Moller-EBA-1999/paper.pdf for information on this implementation
    const start = a;
    const end = b;
    const epsilon = 0.0001;
    let v = start.cross(end);
    const e = start.dot(end);
    const f = e < 0 ? -e : e;

    // if "from" and "to" vectors are nearly parallel
    if (f > 1.0 - epsilon) {
      let x = new Vector3(start.x > 0.0 ? start.x : -start.x, start.y > 0.0 ? start.y : -start.y, start.z > 0.0 ? start.z : -start.z);
      if (x.x < x.y) {
        if (x.x < x.z) {
          x = Vector3.X_UNIT;
        } else {
          x = Vector3.Z_UNIT;
        }
      } else {
        if (x.y < x.z) {
          x = Vector3.Y_UNIT;
        } else {
          x = Vector3.Z_UNIT;
        }
      }
      const u = x.minus(start);
      v = x.minus(end);
      const c1 = 2.0 / u.dot(u);
      const c2 = 2.0 / v.dot(v);
      const c3 = c1 * c2 * u.dot(v);
      return this.rowMajor(-c1 * u.x * u.x - c2 * v.x * v.x + c3 * v.x * u.x + 1, -c1 * u.x * u.y - c2 * v.x * v.y + c3 * v.x * u.y, -c1 * u.x * u.z - c2 * v.x * v.z + c3 * v.x * u.z, -c1 * u.y * u.x - c2 * v.y * v.x + c3 * v.y * u.x, -c1 * u.y * u.y - c2 * v.y * v.y + c3 * v.y * u.y + 1, -c1 * u.y * u.z - c2 * v.y * v.z + c3 * v.y * u.z, -c1 * u.z * u.x - c2 * v.z * v.x + c3 * v.z * u.x, -c1 * u.z * u.y - c2 * v.z * v.y + c3 * v.z * u.y, -c1 * u.z * u.z - c2 * v.z * v.z + c3 * v.z * u.z + 1);
    } else {
      // the most common case, unless "start"="end", or "start"=-"end"
      const h = 1.0 / (1.0 + e);
      const hvx = h * v.x;
      const hvz = h * v.z;
      const hvxy = hvx * v.y;
      const hvxz = hvx * v.z;
      const hvyz = hvz * v.y;
      return this.rowMajor(e + hvx * v.x, hvxy - v.z, hvxz + v.y, hvxy + v.z, e + h * v.y * v.y, hvyz - v.x, hvxz - v.y, hvyz + v.x, e + hvz * v.z);
    }
  }

  /*---------------------------------------------------------------------------*
   * Mutable operations (changes the parameter)
   *----------------------------------------------------------------------------*/

  /**
   * Sets the vector to the result of (matrix * vector), as a homogeneous multiplication.
   *
   * @returns - The vector that was mutated
   */
  multiplyVector2(vector2) {
    return vector2.setXY(this.m00() * vector2.x + this.m01() * vector2.y + this.m02(), this.m10() * vector2.x + this.m11() * vector2.y + this.m12());
  }

  /**
   * Sets the vector to the result of (matrix * vector).
   *
   * @returns - The vector that was mutated
   */
  multiplyVector3(vector3) {
    return vector3.setXYZ(this.m00() * vector3.x + this.m01() * vector3.y + this.m02() * vector3.z, this.m10() * vector3.x + this.m11() * vector3.y + this.m12() * vector3.z, this.m20() * vector3.x + this.m21() * vector3.y + this.m22() * vector3.z);
  }

  /**
   * Sets the vector to the result of (transpose(matrix) * vector), ignoring the translation parameters.
   *
   * @returns - The vector that was mutated
   */
  multiplyTransposeVector2(v) {
    return v.setXY(this.m00() * v.x + this.m10() * v.y, this.m01() * v.x + this.m11() * v.y);
  }

  /**
   * Sets the vector to the result of (matrix * vector - matrix * zero). Since this is a homogeneous operation, it is
   * equivalent to the multiplication of (x,y,0).
   *
   * @returns - The vector that was mutated
   */
  multiplyRelativeVector2(v) {
    return v.setXY(this.m00() * v.x + this.m01() * v.y, this.m10() * v.y + this.m11() * v.y);
  }

  /**
   * Sets the transform of a Canvas 2D rendering context to the affine part of this matrix
   */
  canvasSetTransform(context) {
    context.setTransform(
    // inlined array entries
    this.entries[0], this.entries[1], this.entries[3], this.entries[4], this.entries[6], this.entries[7]);
  }

  /**
   * Appends to the affine part of this matrix to the Canvas 2D rendering context
   */
  canvasAppendTransform(context) {
    if (this.type !== Matrix3Type.IDENTITY) {
      context.transform(
      // inlined array entries
      this.entries[0], this.entries[1], this.entries[3], this.entries[4], this.entries[6], this.entries[7]);
    }
  }

  /**
   * Copies the entries of this matrix over to an arbitrary array (typed or normal).
   */
  copyToArray(array) {
    array[0] = this.m00();
    array[1] = this.m10();
    array[2] = this.m20();
    array[3] = this.m01();
    array[4] = this.m11();
    array[5] = this.m21();
    array[6] = this.m02();
    array[7] = this.m12();
    array[8] = this.m22();
    return array;
  }
  freeToPool() {
    Matrix3.pool.freeToPool(this);
  }
  static pool = new Pool(Matrix3, {
    initialize: Matrix3.prototype.rowMajor,
    useDefaultConstruction: true,
    maxSize: 300
  });

  /**
   * Returns an identity matrix.
   */
  static identity() {
    return fromPool().setToIdentity();
  }

  /**
   * Returns a translation matrix.
   */
  static translation(x, y) {
    return fromPool().setToTranslation(x, y);
  }

  /**
   * Returns a translation matrix computed from a vector.
   */
  static translationFromVector(vector) {
    return Matrix3.translation(vector.x, vector.y);
  }

  /**
   * Returns a matrix that scales things in each dimension.
   */
  static scaling(x, y) {
    return fromPool().setToScale(x, y);
  }

  /**
   * Returns a matrix that scales things in each dimension.
   */
  static scale(x, y) {
    return Matrix3.scaling(x, y);
  }

  /**
   * Returns an affine matrix with the given parameters.
   */
  static affine(m00, m01, m02, m10, m11, m12) {
    return fromPool().setToAffine(m00, m01, m02, m10, m11, m12);
  }

  /**
   * Creates a new matrix with all entries determined in row-major order.
   */
  static rowMajor(v00, v01, v02, v10, v11, v12, v20, v21, v22, type) {
    return fromPool().rowMajor(v00, v01, v02, v10, v11, v12, v20, v21, v22, type);
  }

  /**
   * Returns a matrix rotation defined by a rotation of the specified angle around the given unit axis.
   *
   * @param axis - normalized
   * @param angle - in radians
   */
  static rotationAxisAngle(axis, angle) {
    return fromPool().setToRotationAxisAngle(axis, angle);
  }

  /**
   * Returns a matrix that rotates around the x axis (in the yz plane).
   *
   * @param angle - in radians
   */
  static rotationX(angle) {
    return fromPool().setToRotationX(angle);
  }

  /**
   * Returns a matrix that rotates around the y axis (in the xz plane).
   *
   * @param angle - in radians
   */
  static rotationY(angle) {
    return fromPool().setToRotationY(angle);
  }

  /**
   * Returns a matrix that rotates around the z axis (in the xy plane).
   *
   * @param angle - in radians
   */
  static rotationZ(angle) {
    return fromPool().setToRotationZ(angle);
  }

  /**
   * Returns a combined 2d translation + rotation (with the rotation effectively applied first).
   *
   * @param angle - in radians
   */
  static translationRotation(x, y, angle) {
    return fromPool().setToTranslationRotation(x, y, angle);
  }

  /**
   * Standard 2d rotation matrix for a given angle.
   *
   * @param angle - in radians
   */
  static rotation2(angle) {
    return fromPool().setToRotationZ(angle);
  }

  /**
   * Returns a matrix which will be a 2d rotation around a given x,y point.
   *
   * @param angle - in radians
   * @param x
   * @param y
   */
  static rotationAround(angle, x, y) {
    return Matrix3.translation(x, y).timesMatrix(Matrix3.rotation2(angle)).timesMatrix(Matrix3.translation(-x, -y));
  }

  /**
   * Returns a matrix which will be a 2d rotation around a given 2d point.
   *
   * @param angle - in radians
   * @param point
   */
  static rotationAroundPoint(angle, point) {
    return Matrix3.rotationAround(angle, point.x, point.y);
  }

  /**
   * Returns a matrix equivalent to a given SVGMatrix.
   */
  static fromSVGMatrix(svgMatrix) {
    return fromPool().setToSVGMatrix(svgMatrix);
  }

  /**
   * Returns a rotation matrix that rotates A to B, by rotating about the axis A.cross( B ) -- Shortest path. ideally
   * should be unit vectors.
   */
  static rotateAToB(a, b) {
    return fromPool().setRotationAToB(a, b);
  }

  /**
   * Shortcut for translation times a matrix (without allocating a translation matrix), see scenery#119
   */
  static translationTimesMatrix(x, y, matrix) {
    let type;
    if (matrix.type === Matrix3Type.IDENTITY || matrix.type === Matrix3Type.TRANSLATION_2D) {
      return m3(1, 0, matrix.m02() + x, 0, 1, matrix.m12() + y, 0, 0, 1, Matrix3Type.TRANSLATION_2D);
    } else if (matrix.type === Matrix3Type.OTHER) {
      type = Matrix3Type.OTHER;
    } else {
      type = Matrix3Type.AFFINE;
    }
    return m3(matrix.m00(), matrix.m01(), matrix.m02() + x, matrix.m10(), matrix.m11(), matrix.m12() + y, matrix.m20(), matrix.m21(), matrix.m22(), type);
  }

  /**
   * Serialize to an Object that can be handled by PhET-iO
   */
  static toStateObject(matrix3) {
    return {
      entries: matrix3.entries,
      type: matrix3.type.name
    };
  }

  /**
   * Convert back from a serialized Object to a Matrix3
   */
  static fromStateObject(stateObject) {
    const matrix = Matrix3.identity();
    matrix.entries = stateObject.entries;
    matrix.type = Matrix3Type.enumeration.getValue(stateObject.type);
    return matrix;
  }
}
js_dot.register('Matrix3', Matrix3);
const m3 = Matrix3.pool.create.bind(Matrix3.pool);
js_dot.register('m3', m3);
const fromPool = Matrix3.pool.fetch.bind(Matrix3.pool);
Matrix3.IDENTITY = Matrix3.identity().makeImmutable();
Matrix3.X_REFLECTION = m3(-1, 0, 0, 0, 1, 0, 0, 0, 1, Matrix3Type.AFFINE).makeImmutable();
Matrix3.Y_REFLECTION = m3(1, 0, 0, 0, -1, 0, 0, 0, 1, Matrix3Type.AFFINE).makeImmutable();
Matrix3.Matrix3IO = new IOType('Matrix3IO', {
  valueType: Matrix3,
  documentation: 'A 3x3 matrix often used for holding transform data.',
  toStateObject: matrix3 => Matrix3.toStateObject(matrix3),
  fromStateObject: Matrix3.fromStateObject,
  stateSchema: {
    entries: types_ArrayIO(types_NumberIO),
    type: types_EnumerationIO(Matrix3Type)
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFbnVtZXJhdGlvbklPIiwiQXJyYXlJTyIsIklPVHlwZSIsIk51bWJlcklPIiwiZG90IiwiTWF0cml4NCIsInRvU1ZHTnVtYmVyIiwiVmVjdG9yMiIsIlZlY3RvcjMiLCJFbnVtZXJhdGlvblZhbHVlIiwiRW51bWVyYXRpb24iLCJQb29sIiwiTWF0cml4M1R5cGUiLCJPVEhFUiIsIklERU5USVRZIiwiVFJBTlNMQVRJT05fMkQiLCJTQ0FMSU5HIiwiQUZGSU5FIiwiZW51bWVyYXRpb24iLCJNYXRyaXgzIiwiY29uc3RydWN0b3IiLCJhc3NlcnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJlbnRyaWVzIiwidHlwZSIsIm0wMCIsIm0wMSIsIm0wMiIsIm0xMCIsIm0xMSIsIm0xMiIsIm0yMCIsIm0yMSIsIm0yMiIsImlzSWRlbnRpdHkiLCJlcXVhbHMiLCJpc0Zhc3RJZGVudGl0eSIsImlzVHJhbnNsYXRpb24iLCJpc0FmZmluZSIsImlzQWxpZ25lZCIsImlzQXhpc0FsaWduZWQiLCJpc0Zpbml0ZSIsImdldERldGVybWluYW50IiwiZGV0ZXJtaW5hbnQiLCJnZXRUcmFuc2xhdGlvbiIsInRyYW5zbGF0aW9uIiwiZ2V0U2NhbGVWZWN0b3IiLCJNYXRoIiwic3FydCIsInNjYWxlVmVjdG9yIiwiZ2V0Um90YXRpb24iLCJhdGFuMiIsInJvdGF0aW9uIiwidG9NYXRyaXg0IiwidG9BZmZpbmVNYXRyaXg0IiwidG9TdHJpbmciLCJ0b1NWR01hdHJpeCIsInJlc3VsdCIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudE5TIiwiY3JlYXRlU1ZHTWF0cml4IiwiYSIsImIiLCJjIiwiZCIsImUiLCJmIiwiZ2V0Q1NTVHJhbnNmb3JtIiwidG9GaXhlZCIsImNzc1RyYW5zZm9ybSIsImdldFNWR1RyYW5zZm9ybSIsInN2Z1RyYW5zZm9ybSIsImdldENTU1RyYW5zZm9ybVN0eWxlcyIsInRyYW5zZm9ybUNTUyIsInRyYW5zZm9ybSIsImNzc1RyYW5zZm9ybVN0eWxlcyIsIm1hdHJpeCIsImVxdWFsc0Vwc2lsb24iLCJlcHNpbG9uIiwiYWJzIiwiY29weSIsIm0zIiwicGx1cyIsIm1pbnVzIiwidHJhbnNwb3NlZCIsInVuZGVmaW5lZCIsIm5lZ2F0ZWQiLCJpbnZlcnRlZCIsImRldCIsIkVycm9yIiwidGltZXNNYXRyaXgiLCJ0aW1lc1ZlY3RvcjIiLCJ2ZWN0b3IyIiwieCIsInkiLCJ0aW1lc1ZlY3RvcjMiLCJ2ZWN0b3IzIiwieiIsInRpbWVzVHJhbnNwb3NlVmVjdG9yMiIsInRpbWVzUmVsYXRpdmVWZWN0b3IyIiwicm93TWFqb3IiLCJ2MDAiLCJ2MDEiLCJ2MDIiLCJ2MTAiLCJ2MTEiLCJ2MTIiLCJ2MjAiLCJ2MjEiLCJ2MjIiLCJzZXQiLCJzZXRBcnJheSIsImFycmF5Iiwic2V0MDAiLCJ2YWx1ZSIsInNldDAxIiwic2V0MDIiLCJzZXQxMCIsInNldDExIiwic2V0MTIiLCJzZXQyMCIsInNldDIxIiwic2V0MjIiLCJtYWtlSW1tdXRhYmxlIiwiY29sdW1uTWFqb3IiLCJhZGQiLCJzdWJ0cmFjdCIsIm0iLCJ0cmFuc3Bvc2UiLCJuZWdhdGUiLCJpbnZlcnQiLCJtdWx0aXBseU1hdHJpeCIsInByZXBlbmRUcmFuc2xhdGlvbiIsInNldFRvSWRlbnRpdHkiLCJzZXRUb1RyYW5zbGF0aW9uIiwic2V0VG9TY2FsZSIsInNldFRvQWZmaW5lIiwic2V0VG9Sb3RhdGlvbkF4aXNBbmdsZSIsImF4aXMiLCJhbmdsZSIsImNvcyIsInMiLCJzaW4iLCJDIiwic2V0VG9Sb3RhdGlvblgiLCJzZXRUb1JvdGF0aW9uWSIsInNldFRvUm90YXRpb25aIiwic2V0VG9UcmFuc2xhdGlvblJvdGF0aW9uIiwic2V0VG9UcmFuc2xhdGlvblJvdGF0aW9uUG9pbnQiLCJzZXRUb1NWR01hdHJpeCIsInN2Z01hdHJpeCIsInNldFJvdGF0aW9uQVRvQiIsInN0YXJ0IiwiZW5kIiwidiIsImNyb3NzIiwiWF9VTklUIiwiWl9VTklUIiwiWV9VTklUIiwidSIsImMxIiwiYzIiLCJjMyIsImgiLCJodngiLCJodnoiLCJodnh5IiwiaHZ4eiIsImh2eXoiLCJtdWx0aXBseVZlY3RvcjIiLCJzZXRYWSIsIm11bHRpcGx5VmVjdG9yMyIsInNldFhZWiIsIm11bHRpcGx5VHJhbnNwb3NlVmVjdG9yMiIsIm11bHRpcGx5UmVsYXRpdmVWZWN0b3IyIiwiY2FudmFzU2V0VHJhbnNmb3JtIiwiY29udGV4dCIsInNldFRyYW5zZm9ybSIsImNhbnZhc0FwcGVuZFRyYW5zZm9ybSIsImNvcHlUb0FycmF5IiwiZnJlZVRvUG9vbCIsInBvb2wiLCJpbml0aWFsaXplIiwicHJvdG90eXBlIiwidXNlRGVmYXVsdENvbnN0cnVjdGlvbiIsIm1heFNpemUiLCJpZGVudGl0eSIsImZyb21Qb29sIiwidHJhbnNsYXRpb25Gcm9tVmVjdG9yIiwidmVjdG9yIiwic2NhbGluZyIsInNjYWxlIiwiYWZmaW5lIiwicm90YXRpb25BeGlzQW5nbGUiLCJyb3RhdGlvblgiLCJyb3RhdGlvblkiLCJyb3RhdGlvbloiLCJ0cmFuc2xhdGlvblJvdGF0aW9uIiwicm90YXRpb24yIiwicm90YXRpb25Bcm91bmQiLCJyb3RhdGlvbkFyb3VuZFBvaW50IiwicG9pbnQiLCJmcm9tU1ZHTWF0cml4Iiwicm90YXRlQVRvQiIsInRyYW5zbGF0aW9uVGltZXNNYXRyaXgiLCJ0b1N0YXRlT2JqZWN0IiwibWF0cml4MyIsIm5hbWUiLCJmcm9tU3RhdGVPYmplY3QiLCJzdGF0ZU9iamVjdCIsImdldFZhbHVlIiwicmVnaXN0ZXIiLCJjcmVhdGUiLCJiaW5kIiwiZmV0Y2giLCJYX1JFRkxFQ1RJT04iLCJZX1JFRkxFQ1RJT04iLCJNYXRyaXgzSU8iLCJ2YWx1ZVR5cGUiLCJkb2N1bWVudGF0aW9uIiwic3RhdGVTY2hlbWEiXSwic291cmNlcyI6WyJNYXRyaXgzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIDMtZGltZW5zaW9uYWwgTWF0cml4XG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBFbnVtZXJhdGlvbklPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9FbnVtZXJhdGlvbklPLmpzJztcbmltcG9ydCBBcnJheUlPIGZyb20gJy4uLy4uL3RhbmRlbS9qcy90eXBlcy9BcnJheUlPLmpzJztcbmltcG9ydCBJT1R5cGUgZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL0lPVHlwZS5qcyc7XG5pbXBvcnQgTnVtYmVySU8gZnJvbSAnLi4vLi4vdGFuZGVtL2pzL3R5cGVzL051bWJlcklPLmpzJztcbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IE1hdHJpeDQgZnJvbSAnLi9NYXRyaXg0LmpzJztcbmltcG9ydCB0b1NWR051bWJlciBmcm9tICcuL3RvU1ZHTnVtYmVyLmpzJztcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4vVmVjdG9yMi5qcyc7XG5pbXBvcnQgVmVjdG9yMyBmcm9tICcuL1ZlY3RvcjMuanMnO1xuaW1wb3J0IEVudW1lcmF0aW9uVmFsdWUgZnJvbSAnLi4vLi4vcGhldC1jb3JlL2pzL0VudW1lcmF0aW9uVmFsdWUuanMnO1xuaW1wb3J0IEVudW1lcmF0aW9uIGZyb20gJy4uLy4uL3BoZXQtY29yZS9qcy9FbnVtZXJhdGlvbi5qcyc7XG5pbXBvcnQgUG9vbCwgeyBUUG9vbGFibGUgfSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvUG9vbC5qcyc7XG5cbmV4cG9ydCBjbGFzcyBNYXRyaXgzVHlwZSBleHRlbmRzIEVudW1lcmF0aW9uVmFsdWUge1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IE9USEVSID0gbmV3IE1hdHJpeDNUeXBlKCk7XG4gIHB1YmxpYyBzdGF0aWMgcmVhZG9ubHkgSURFTlRJVFkgPSBuZXcgTWF0cml4M1R5cGUoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBUUkFOU0xBVElPTl8yRCA9IG5ldyBNYXRyaXgzVHlwZSgpO1xuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IFNDQUxJTkcgPSBuZXcgTWF0cml4M1R5cGUoKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBBRkZJTkUgPSBuZXcgTWF0cml4M1R5cGUoKTtcblxuICBwdWJsaWMgc3RhdGljIHJlYWRvbmx5IGVudW1lcmF0aW9uID0gbmV3IEVudW1lcmF0aW9uKCBNYXRyaXgzVHlwZSApO1xufVxuXG50eXBlIE5pbmVOdW1iZXJzID0gW1xuICBudW1iZXIsIG51bWJlciwgbnVtYmVyLFxuICBudW1iZXIsIG51bWJlciwgbnVtYmVyLFxuICBudW1iZXIsIG51bWJlciwgbnVtYmVyXG5dO1xuXG5leHBvcnQgdHlwZSBNYXRyaXgzU3RhdGVPYmplY3QgPSB7XG4gIGVudHJpZXM6IE5pbmVOdW1iZXJzO1xuICB0eXBlOiBzdHJpbmc7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXRyaXgzIGltcGxlbWVudHMgVFBvb2xhYmxlIHtcblxuICAvLyBFbnRyaWVzIHN0b3JlZCBpbiBjb2x1bW4tbWFqb3IgZm9ybWF0XG4gIHB1YmxpYyBlbnRyaWVzOiBOaW5lTnVtYmVycztcblxuICBwdWJsaWMgdHlwZTogTWF0cml4M1R5cGU7XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gaWRlbnRpdHkgbWF0cml4LCB0aGF0IGNhbiB0aGVuIGJlIG11dGF0ZWQgaW50byB0aGUgcHJvcGVyIGZvcm0uXG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoKSB7XG4gICAgLy9NYWtlIHN1cmUgbm8gY2xpZW50cyBhcmUgZXhwZWN0aW5nIHRvIGNyZWF0ZSBhIG1hdHJpeCB3aXRoIG5vbi1pZGVudGl0eSB2YWx1ZXNcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBhcmd1bWVudHMubGVuZ3RoID09PSAwLCAnTWF0cml4MyBjb25zdHJ1Y3RvciBzaG91bGQgbm90IGJlIGNhbGxlZCB3aXRoIGFueSBhcmd1bWVudHMuICBVc2UgbTMoKS9NYXRyaXgzLmlkZW50aXR5KCkvZXRjLicgKTtcblxuICAgIHRoaXMuZW50cmllcyA9IFsgMSwgMCwgMCwgMCwgMSwgMCwgMCwgMCwgMSBdO1xuICAgIHRoaXMudHlwZSA9IE1hdHJpeDNUeXBlLklERU5USVRZO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMCwwIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTAwKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMCBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMCwxIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTAxKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMyBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMCwyIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTAyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgNiBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMSwwIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTEwKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMSBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMSwxIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTExKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgNCBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMSwyIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTEyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgNyBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMiwwIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTIwKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgMiBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMiwxIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTIxKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgNSBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIGdldHRlciBmb3IgdGhlIGluZGl2aWR1YWwgMiwyIGVudHJ5IG9mIHRoZSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgbTIyKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuZW50cmllc1sgOCBdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIG1hdHJpeCBpcyBhbiBpZGVudGl0eSBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgaXNJZGVudGl0eSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSBNYXRyaXgzVHlwZS5JREVOVElUWSB8fCB0aGlzLmVxdWFscyggTWF0cml4My5JREVOVElUWSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIG1hdHJpeCBpcyBsaWtlbHkgdG8gYmUgYW4gaWRlbnRpdHkgbWF0cml4IChyZXR1cm5pbmcgZmFsc2UgbWVhbnMgXCJpbmNvbmNsdXNpdmUsIG1heSBiZVxuICAgKiBpZGVudGl0eSBvciBub3RcIiksIGJ1dCB0cnVlIGlzIGd1YXJhbnRlZWQgdG8gYmUgYW4gaWRlbnRpdHkgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIGlzRmFzdElkZW50aXR5KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLklERU5USVRZO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIG1hdHJpeCBpcyBhIHRyYW5zbGF0aW9uIG1hdHJpeC5cbiAgICogQnkgdGhpcyB3ZSBtZWFuIGl0IGhhcyBubyBzaGVhciwgcm90YXRpb24sIG9yIHNjYWxpbmdcbiAgICogSXQgbWF5IGJlIGEgdHJhbnNsYXRpb24gb2YgemVyby5cbiAgICovXG4gIHB1YmxpYyBpc1RyYW5zbGF0aW9uKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLlRSQU5TTEFUSU9OXzJEIHx8ICggdGhpcy5tMDAoKSA9PT0gMSAmJiB0aGlzLm0xMSgpID09PSAxICYmIHRoaXMubTIyKCkgPT09IDEgJiYgdGhpcy5tMDEoKSA9PT0gMCAmJiB0aGlzLm0xMCgpID09PSAwICYmIHRoaXMubTIwKCkgPT09IDAgJiYgdGhpcy5tMjEoKSA9PT0gMCApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciB0aGlzIG1hdHJpeCBpcyBhbiBhZmZpbmUgbWF0cml4IChlLmcuIG5vIHNoZWFyKS5cbiAgICovXG4gIHB1YmxpYyBpc0FmZmluZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy50eXBlID09PSBNYXRyaXgzVHlwZS5BRkZJTkUgfHwgKCB0aGlzLm0yMCgpID09PSAwICYmIHRoaXMubTIxKCkgPT09IDAgJiYgdGhpcy5tMjIoKSA9PT0gMSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciBpdCdzIGFuIGFmZmluZSBtYXRyaXggd2hlcmUgdGhlIGNvbXBvbmVudHMgb2YgdHJhbnNmb3JtcyBhcmUgaW5kZXBlbmRlbnQsIGkuZS4gY29uc3RydWN0ZWQgZnJvbVxuICAgKiBhcmJpdHJhcnkgY29tcG9uZW50IHNjYWxpbmcgYW5kIHRyYW5zbGF0aW9uLlxuICAgKi9cbiAgcHVibGljIGlzQWxpZ25lZCgpOiBib29sZWFuIHtcbiAgICAvLyBub24tZGlhZ29uYWwgbm9uLXRyYW5zbGF0aW9uIGVudHJpZXMgc2hvdWxkIGFsbCBiZSB6ZXJvLlxuICAgIHJldHVybiB0aGlzLmlzQWZmaW5lKCkgJiYgdGhpcy5tMDEoKSA9PT0gMCAmJiB0aGlzLm0xMCgpID09PSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgaWYgaXQncyBhbiBhZmZpbmUgbWF0cml4IHdoZXJlIHRoZSBjb21wb25lbnRzIG9mIHRyYW5zZm9ybXMgYXJlIGluZGVwZW5kZW50LCBidXQgbWF5IGJlIHN3aXRjaGVkICh1bmxpa2UgaXNBbGlnbmVkKVxuICAgKlxuICAgKiBpLmUuIHRoZSAyeDIgcm90YXRpb25hbCBzdWItbWF0cml4IGlzIG9mIG9uZSBvZiB0aGUgdHdvIGZvcm1zOlxuICAgKiBBIDAgIG9yICAwICBBXG4gICAqIDAgQiAgICAgIEIgIDBcbiAgICogVGhpcyBtZWFucyB0aGF0IG1vdmluZyBhIHRyYW5zZm9ybWVkIHBvaW50IGJ5ICh4LDApIG9yICgwLHkpIHdpbGwgcmVzdWx0IGluIGEgbW90aW9uIGFsb25nIG9uZSBvZiB0aGUgYXhlcy5cbiAgICovXG4gIHB1YmxpYyBpc0F4aXNBbGlnbmVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzQWZmaW5lKCkgJiYgKCAoIHRoaXMubTAxKCkgPT09IDAgJiYgdGhpcy5tMTAoKSA9PT0gMCApIHx8ICggdGhpcy5tMDAoKSA9PT0gMCAmJiB0aGlzLm0xMSgpID09PSAwICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgZXZlcnkgc2luZ2xlIGVudHJ5IGluIHRoaXMgbWF0cml4IGlzIGEgZmluaXRlIG51bWJlciAobm9uLU5hTiwgbm9uLWluZmluaXRlKS5cbiAgICovXG4gIHB1YmxpYyBpc0Zpbml0ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gaXNGaW5pdGUoIHRoaXMubTAwKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMDEoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0wMigpICkgJiZcbiAgICAgICAgICAgaXNGaW5pdGUoIHRoaXMubTEwKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMTEoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0xMigpICkgJiZcbiAgICAgICAgICAgaXNGaW5pdGUoIHRoaXMubTIwKCkgKSAmJlxuICAgICAgICAgICBpc0Zpbml0ZSggdGhpcy5tMjEoKSApICYmXG4gICAgICAgICAgIGlzRmluaXRlKCB0aGlzLm0yMigpICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgZGV0ZXJtaW5hbnQgb2YgdGhpcyBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgZ2V0RGV0ZXJtaW5hbnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5tMDAoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0yMigpICsgdGhpcy5tMDEoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0yMCgpICsgdGhpcy5tMDIoKSAqIHRoaXMubTEwKCkgKiB0aGlzLm0yMSgpIC0gdGhpcy5tMDIoKSAqIHRoaXMubTExKCkgKiB0aGlzLm0yMCgpIC0gdGhpcy5tMDEoKSAqIHRoaXMubTEwKCkgKiB0aGlzLm0yMigpIC0gdGhpcy5tMDAoKSAqIHRoaXMubTEyKCkgKiB0aGlzLm0yMSgpO1xuICB9XG5cbiAgcHVibGljIGdldCBkZXRlcm1pbmFudCgpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5nZXREZXRlcm1pbmFudCgpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIDJEIHRyYW5zbGF0aW9uLCBhc3N1bWluZyBtdWx0aXBsaWNhdGlvbiB3aXRoIGEgaG9tb2dlbmVvdXMgdmVjdG9yXG4gICAqL1xuICBwdWJsaWMgZ2V0VHJhbnNsYXRpb24oKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKCB0aGlzLm0wMigpLCB0aGlzLm0xMigpICk7XG4gIH1cblxuICBwdWJsaWMgZ2V0IHRyYW5zbGF0aW9uKCk6IFZlY3RvcjIgeyByZXR1cm4gdGhpcy5nZXRUcmFuc2xhdGlvbigpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB2ZWN0b3IgdGhhdCBpcyBlcXVpdmFsZW50IHRvICggVCgxLDApLm1hZ25pdHVkZSgpLCBUKDAsMSkubWFnbml0dWRlKCkgKSB3aGVyZSBUIGlzIGEgcmVsYXRpdmUgdHJhbnNmb3JtXG4gICAqL1xuICBwdWJsaWMgZ2V0U2NhbGVWZWN0b3IoKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKFxuICAgICAgTWF0aC5zcXJ0KCB0aGlzLm0wMCgpICogdGhpcy5tMDAoKSArIHRoaXMubTEwKCkgKiB0aGlzLm0xMCgpICksXG4gICAgICBNYXRoLnNxcnQoIHRoaXMubTAxKCkgKiB0aGlzLm0wMSgpICsgdGhpcy5tMTEoKSAqIHRoaXMubTExKCkgKSApO1xuICB9XG5cbiAgcHVibGljIGdldCBzY2FsZVZlY3RvcigpOiBWZWN0b3IyIHsgcmV0dXJuIHRoaXMuZ2V0U2NhbGVWZWN0b3IoKTsgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBhbmdsZSBpbiByYWRpYW5zIGZvciB0aGUgMmQgcm90YXRpb24gZnJvbSB0aGlzIG1hdHJpeCwgYmV0d2VlbiBwaSwgLXBpXG4gICAqL1xuICBwdWJsaWMgZ2V0Um90YXRpb24oKTogbnVtYmVyIHtcbiAgICByZXR1cm4gTWF0aC5hdGFuMiggdGhpcy5tMTAoKSwgdGhpcy5tMDAoKSApO1xuICB9XG5cbiAgcHVibGljIGdldCByb3RhdGlvbigpOiBudW1iZXIgeyByZXR1cm4gdGhpcy5nZXRSb3RhdGlvbigpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaWRlbnRpdHktcGFkZGVkIGNvcHkgb2YgdGhpcyBtYXRyaXggd2l0aCBhbiBpbmNyZWFzZWQgZGltZW5zaW9uLlxuICAgKi9cbiAgcHVibGljIHRvTWF0cml4NCgpOiBNYXRyaXg0IHtcbiAgICByZXR1cm4gbmV3IE1hdHJpeDQoXG4gICAgICB0aGlzLm0wMCgpLCB0aGlzLm0wMSgpLCB0aGlzLm0wMigpLCAwLFxuICAgICAgdGhpcy5tMTAoKSwgdGhpcy5tMTEoKSwgdGhpcy5tMTIoKSwgMCxcbiAgICAgIHRoaXMubTIwKCksIHRoaXMubTIxKCksIHRoaXMubTIyKCksIDAsXG4gICAgICAwLCAwLCAwLCAxICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBpZGVudGl0eS1wYWRkZWQgY29weSBvZiB0aGlzIG1hdHJpeCB3aXRoIGFuIGluY3JlYXNlZCBkaW1lbnNpb24sIHRyZWF0aW5nIHRoaXMgbWF0cml4J3MgYWZmaW5lXG4gICAqIGNvbXBvbmVudHMgb25seS5cbiAgICovXG4gIHB1YmxpYyB0b0FmZmluZU1hdHJpeDQoKTogTWF0cml4NCB7XG4gICAgcmV0dXJuIG5ldyBNYXRyaXg0KFxuICAgICAgdGhpcy5tMDAoKSwgdGhpcy5tMDEoKSwgMCwgdGhpcy5tMDIoKSxcbiAgICAgIHRoaXMubTEwKCksIHRoaXMubTExKCksIDAsIHRoaXMubTEyKCksXG4gICAgICAwLCAwLCAxLCAwLFxuICAgICAgMCwgMCwgMCwgMSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBzdHJpbmcgZm9ybSBvZiB0aGlzIG9iamVjdFxuICAgKi9cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMubTAwKCl9ICR7dGhpcy5tMDEoKX0gJHt0aGlzLm0wMigpfVxcbiR7XG4gICAgICB0aGlzLm0xMCgpfSAke3RoaXMubTExKCl9ICR7dGhpcy5tMTIoKX1cXG4ke1xuICAgICAgdGhpcy5tMjAoKX0gJHt0aGlzLm0yMSgpfSAke3RoaXMubTIyKCl9YDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIFNWRyBmb3JtIG9mIHRoaXMgbWF0cml4LCBmb3IgaGlnaC1wZXJmb3JtYW5jZSBwcm9jZXNzaW5nIGluIFNWRyBvdXRwdXQuXG4gICAqL1xuICBwdWJsaWMgdG9TVkdNYXRyaXgoKTogU1ZHTWF0cml4IHtcbiAgICBjb25zdCByZXN1bHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZycsICdzdmcnICkuY3JlYXRlU1ZHTWF0cml4KCk7XG5cbiAgICAvLyB0b3AgdHdvIHJvd3NcbiAgICByZXN1bHQuYSA9IHRoaXMubTAwKCk7XG4gICAgcmVzdWx0LmIgPSB0aGlzLm0xMCgpO1xuICAgIHJlc3VsdC5jID0gdGhpcy5tMDEoKTtcbiAgICByZXN1bHQuZCA9IHRoaXMubTExKCk7XG4gICAgcmVzdWx0LmUgPSB0aGlzLm0wMigpO1xuICAgIHJlc3VsdC5mID0gdGhpcy5tMTIoKTtcblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgQ1NTIGZvcm0gKHNpbXBsaWZpZWQgaWYgcG9zc2libGUpIGZvciB0aGlzIHRyYW5zZm9ybWF0aW9uIG1hdHJpeC5cbiAgICovXG4gIHB1YmxpYyBnZXRDU1NUcmFuc2Zvcm0oKTogc3RyaW5nIHtcbiAgICAvLyBTZWUgaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy10cmFuc2Zvcm1zLywgcGFydGljdWxhcmx5IFNlY3Rpb24gMTMgdGhhdCBkaXNjdXNzZXMgdGhlIFNWRyBjb21wYXRpYmlsaXR5XG5cbiAgICAvLyBXZSBuZWVkIHRvIHByZXZlbnQgdGhlIG51bWJlcnMgZnJvbSBiZWluZyBpbiBhbiBleHBvbmVudGlhbCB0b1N0cmluZyBmb3JtLCBzaW5jZSB0aGUgQ1NTIHRyYW5zZm9ybSBkb2VzIG5vdCBzdXBwb3J0IHRoYXRcbiAgICAvLyAyMCBpcyB0aGUgbGFyZ2VzdCBndWFyYW50ZWVkIG51bWJlciBvZiBkaWdpdHMgYWNjb3JkaW5nIHRvIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTnVtYmVyL3RvRml4ZWRcbiAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3BoZXRzaW1zL2RvdC9pc3N1ZXMvMzZcblxuICAgIC8vIHRoZSBpbm5lciBwYXJ0IG9mIGEgQ1NTMyB0cmFuc2Zvcm0sIGJ1dCByZW1lbWJlciB0byBhZGQgdGhlIGJyb3dzZXItc3BlY2lmaWMgcGFydHMhXG4gICAgLy8gTk9URTogdGhlIHRvRml4ZWQgY2FsbHMgYXJlIGlubGluZWQgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnNcbiAgICByZXR1cm4gYG1hdHJpeCgke3RoaXMuZW50cmllc1sgMCBdLnRvRml4ZWQoIDIwICl9LCR7dGhpcy5lbnRyaWVzWyAxIF0udG9GaXhlZCggMjAgKX0sJHt0aGlzLmVudHJpZXNbIDMgXS50b0ZpeGVkKCAyMCApfSwke3RoaXMuZW50cmllc1sgNCBdLnRvRml4ZWQoIDIwICl9LCR7dGhpcy5lbnRyaWVzWyA2IF0udG9GaXhlZCggMjAgKX0sJHt0aGlzLmVudHJpZXNbIDcgXS50b0ZpeGVkKCAyMCApfSlgOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxuICB9XG5cbiAgcHVibGljIGdldCBjc3NUcmFuc2Zvcm0oKTogc3RyaW5nIHsgcmV0dXJuIHRoaXMuZ2V0Q1NTVHJhbnNmb3JtKCk7IH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgQ1NTLWxpa2UgU1ZHIG1hdHJpeCBmb3JtIGZvciB0aGlzIHRyYW5zZm9ybWF0aW9uIG1hdHJpeC5cbiAgICovXG4gIHB1YmxpYyBnZXRTVkdUcmFuc2Zvcm0oKTogc3RyaW5nIHtcbiAgICAvLyBTVkcgdHJhbnNmb3JtIHByZXNlbnRhdGlvbiBhdHRyaWJ1dGUuIFNlZSBodHRwOi8vd3d3LnczLm9yZy9UUi9TVkcvY29vcmRzLmh0bWwjVHJhbnNmb3JtQXR0cmlidXRlXG4gICAgc3dpdGNoKCB0aGlzLnR5cGUgKSB7XG4gICAgICBjYXNlIE1hdHJpeDNUeXBlLklERU5USVRZOlxuICAgICAgICByZXR1cm4gJyc7XG4gICAgICBjYXNlIE1hdHJpeDNUeXBlLlRSQU5TTEFUSU9OXzJEOlxuICAgICAgICByZXR1cm4gYHRyYW5zbGF0ZSgke3RvU1ZHTnVtYmVyKCB0aGlzLmVudHJpZXNbIDYgXSApfSwke3RvU1ZHTnVtYmVyKCB0aGlzLmVudHJpZXNbIDcgXSApfSlgO1xuICAgICAgY2FzZSBNYXRyaXgzVHlwZS5TQ0FMSU5HOlxuICAgICAgICByZXR1cm4gYHNjYWxlKCR7dG9TVkdOdW1iZXIoIHRoaXMuZW50cmllc1sgMCBdICl9JHt0aGlzLmVudHJpZXNbIDAgXSA9PT0gdGhpcy5lbnRyaWVzWyA0IF0gPyAnJyA6IGAsJHt0b1NWR051bWJlciggdGhpcy5lbnRyaWVzWyA0IF0gKX1gfSlgO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIGBtYXRyaXgoJHt0b1NWR051bWJlciggdGhpcy5lbnRyaWVzWyAwIF0gKX0sJHt0b1NWR051bWJlciggdGhpcy5lbnRyaWVzWyAxIF0gKX0sJHt0b1NWR051bWJlciggdGhpcy5lbnRyaWVzWyAzIF0gKX0sJHt0b1NWR051bWJlciggdGhpcy5lbnRyaWVzWyA0IF0gKX0sJHt0b1NWR051bWJlciggdGhpcy5lbnRyaWVzWyA2IF0gKX0sJHt0b1NWR051bWJlciggdGhpcy5lbnRyaWVzWyA3IF0gKX0pYDtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0IHN2Z1RyYW5zZm9ybSgpOiBzdHJpbmcgeyByZXR1cm4gdGhpcy5nZXRTVkdUcmFuc2Zvcm0oKTsgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcGFyYW1ldGVyIG9iamVjdCBzdWl0YWJsZSBmb3IgdXNlIHdpdGggalF1ZXJ5J3MgLmNzcygpXG4gICAqL1xuICBwdWJsaWMgZ2V0Q1NTVHJhbnNmb3JtU3R5bGVzKCk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGNvbnN0IHRyYW5zZm9ybUNTUyA9IHRoaXMuZ2V0Q1NTVHJhbnNmb3JtKCk7XG5cbiAgICAvLyBub3RlcyBvbiB0cmlnZ2VyaW5nIGhhcmR3YXJlIGFjY2VsZXJhdGlvbjogaHR0cDovL2NyZWF0aXZlanMuY29tLzIwMTEvMTIvZGF5LTItZ3B1LWFjY2VsZXJhdGUteW91ci1kb20tZWxlbWVudHMvXG4gICAgcmV0dXJuIHtcbiAgICAgIC8vIGZvcmNlIGlPUyBoYXJkd2FyZSBhY2NlbGVyYXRpb25cbiAgICAgICctd2Via2l0LXBlcnNwZWN0aXZlJzogJzEwMDAnLFxuICAgICAgJy13ZWJraXQtYmFja2ZhY2UtdmlzaWJpbGl0eSc6ICdoaWRkZW4nLFxuXG4gICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiBgJHt0cmFuc2Zvcm1DU1N9IHRyYW5zbGF0ZVooMClgLCAvLyB0cmlnZ2VyIGhhcmR3YXJlIGFjY2VsZXJhdGlvbiBpZiBwb3NzaWJsZVxuICAgICAgJy1tb3otdHJhbnNmb3JtJzogYCR7dHJhbnNmb3JtQ1NTfSB0cmFuc2xhdGVaKDApYCwgLy8gdHJpZ2dlciBoYXJkd2FyZSBhY2NlbGVyYXRpb24gaWYgcG9zc2libGVcbiAgICAgICctbXMtdHJhbnNmb3JtJzogdHJhbnNmb3JtQ1NTLFxuICAgICAgJy1vLXRyYW5zZm9ybSc6IHRyYW5zZm9ybUNTUyxcbiAgICAgIHRyYW5zZm9ybTogdHJhbnNmb3JtQ1NTLFxuICAgICAgJ3RyYW5zZm9ybS1vcmlnaW4nOiAndG9wIGxlZnQnLCAvLyBhdCB0aGUgb3JpZ2luIG9mIHRoZSBjb21wb25lbnQuIGNvbnNpZGVyIDBweCAwcHggaW5zdGVhZC4gQ3JpdGljYWwsIHNpbmNlIG90aGVyd2lzZSB0aGlzIGRlZmF1bHRzIHRvIDUwJSA1MCUhISEgc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL3RyYW5zZm9ybS1vcmlnaW5cbiAgICAgICctbXMtdHJhbnNmb3JtLW9yaWdpbic6ICd0b3AgbGVmdCcgLy8gVE9ETzogZG8gd2UgbmVlZCBvdGhlciBwbGF0Zm9ybS1zcGVjaWZpYyB0cmFuc2Zvcm0tb3JpZ2luIHN0eWxlcz9cbiAgICB9O1xuICB9XG5cbiAgcHVibGljIGdldCBjc3NUcmFuc2Zvcm1TdHlsZXMoKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7IHJldHVybiB0aGlzLmdldENTU1RyYW5zZm9ybVN0eWxlcygpOyB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgZXhhY3QgZXF1YWxpdHkgd2l0aCBhbm90aGVyIG1hdHJpeFxuICAgKi9cbiAgcHVibGljIGVxdWFscyggbWF0cml4OiBNYXRyaXgzICk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLm0wMCgpID09PSBtYXRyaXgubTAwKCkgJiYgdGhpcy5tMDEoKSA9PT0gbWF0cml4Lm0wMSgpICYmIHRoaXMubTAyKCkgPT09IG1hdHJpeC5tMDIoKSAmJlxuICAgICAgICAgICB0aGlzLm0xMCgpID09PSBtYXRyaXgubTEwKCkgJiYgdGhpcy5tMTEoKSA9PT0gbWF0cml4Lm0xMSgpICYmIHRoaXMubTEyKCkgPT09IG1hdHJpeC5tMTIoKSAmJlxuICAgICAgICAgICB0aGlzLm0yMCgpID09PSBtYXRyaXgubTIwKCkgJiYgdGhpcy5tMjEoKSA9PT0gbWF0cml4Lm0yMSgpICYmIHRoaXMubTIyKCkgPT09IG1hdHJpeC5tMjIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGVxdWFsaXR5IHdpdGhpbiBhIG1hcmdpbiBvZiBlcnJvciB3aXRoIGFub3RoZXIgbWF0cml4XG4gICAqL1xuICBwdWJsaWMgZXF1YWxzRXBzaWxvbiggbWF0cml4OiBNYXRyaXgzLCBlcHNpbG9uOiBudW1iZXIgKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIE1hdGguYWJzKCB0aGlzLm0wMCgpIC0gbWF0cml4Lm0wMCgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0wMSgpIC0gbWF0cml4Lm0wMSgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0wMigpIC0gbWF0cml4Lm0wMigpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0xMCgpIC0gbWF0cml4Lm0xMCgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0xMSgpIC0gbWF0cml4Lm0xMSgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0xMigpIC0gbWF0cml4Lm0xMigpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0yMCgpIC0gbWF0cml4Lm0yMCgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0yMSgpIC0gbWF0cml4Lm0yMSgpICkgPCBlcHNpbG9uICYmXG4gICAgICAgICAgIE1hdGguYWJzKCB0aGlzLm0yMigpIC0gbWF0cml4Lm0yMigpICkgPCBlcHNpbG9uO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIEltbXV0YWJsZSBvcGVyYXRpb25zIChyZXR1cm5zIGEgbmV3IG1hdHJpeClcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNvcHkgb2YgdGhpcyBtYXRyaXhcbiAgICovXG4gIHB1YmxpYyBjb3B5KCk6IE1hdHJpeDMge1xuICAgIHJldHVybiBtMyhcbiAgICAgIHRoaXMubTAwKCksIHRoaXMubTAxKCksIHRoaXMubTAyKCksXG4gICAgICB0aGlzLm0xMCgpLCB0aGlzLm0xMSgpLCB0aGlzLm0xMigpLFxuICAgICAgdGhpcy5tMjAoKSwgdGhpcy5tMjEoKSwgdGhpcy5tMjIoKSxcbiAgICAgIHRoaXMudHlwZVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBtYXRyaXgsIGRlZmluZWQgYnkgdGhpcyBtYXRyaXggcGx1cyB0aGUgcHJvdmlkZWQgbWF0cml4XG4gICAqL1xuICBwdWJsaWMgcGx1cyggbWF0cml4OiBNYXRyaXgzICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBtMyhcbiAgICAgIHRoaXMubTAwKCkgKyBtYXRyaXgubTAwKCksIHRoaXMubTAxKCkgKyBtYXRyaXgubTAxKCksIHRoaXMubTAyKCkgKyBtYXRyaXgubTAyKCksXG4gICAgICB0aGlzLm0xMCgpICsgbWF0cml4Lm0xMCgpLCB0aGlzLm0xMSgpICsgbWF0cml4Lm0xMSgpLCB0aGlzLm0xMigpICsgbWF0cml4Lm0xMigpLFxuICAgICAgdGhpcy5tMjAoKSArIG1hdHJpeC5tMjAoKSwgdGhpcy5tMjEoKSArIG1hdHJpeC5tMjEoKSwgdGhpcy5tMjIoKSArIG1hdHJpeC5tMjIoKVxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG5ldyBtYXRyaXgsIGRlZmluZWQgYnkgdGhpcyBtYXRyaXggcGx1cyB0aGUgcHJvdmlkZWQgbWF0cml4XG4gICAqL1xuICBwdWJsaWMgbWludXMoIG1hdHJpeDogTWF0cml4MyApOiBNYXRyaXgzIHtcbiAgICByZXR1cm4gbTMoXG4gICAgICB0aGlzLm0wMCgpIC0gbWF0cml4Lm0wMCgpLCB0aGlzLm0wMSgpIC0gbWF0cml4Lm0wMSgpLCB0aGlzLm0wMigpIC0gbWF0cml4Lm0wMigpLFxuICAgICAgdGhpcy5tMTAoKSAtIG1hdHJpeC5tMTAoKSwgdGhpcy5tMTEoKSAtIG1hdHJpeC5tMTEoKSwgdGhpcy5tMTIoKSAtIG1hdHJpeC5tMTIoKSxcbiAgICAgIHRoaXMubTIwKCkgLSBtYXRyaXgubTIwKCksIHRoaXMubTIxKCkgLSBtYXRyaXgubTIxKCksIHRoaXMubTIyKCkgLSBtYXRyaXgubTIyKClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB0cmFuc3Bvc2VkIGNvcHkgb2YgdGhpcyBtYXRyaXhcbiAgICovXG4gIHB1YmxpYyB0cmFuc3Bvc2VkKCk6IE1hdHJpeDMge1xuICAgIHJldHVybiBtMyhcbiAgICAgIHRoaXMubTAwKCksIHRoaXMubTEwKCksIHRoaXMubTIwKCksXG4gICAgICB0aGlzLm0wMSgpLCB0aGlzLm0xMSgpLCB0aGlzLm0yMSgpLFxuICAgICAgdGhpcy5tMDIoKSwgdGhpcy5tMTIoKSwgdGhpcy5tMjIoKSwgKCB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLklERU5USVRZIHx8IHRoaXMudHlwZSA9PT0gTWF0cml4M1R5cGUuU0NBTElORyApID8gdGhpcy50eXBlIDogdW5kZWZpbmVkXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmVnYXRlZCBjb3B5IG9mIHRoaXMgbWF0cml4XG4gICAqL1xuICBwdWJsaWMgbmVnYXRlZCgpOiBNYXRyaXgzIHtcbiAgICByZXR1cm4gbTMoXG4gICAgICAtdGhpcy5tMDAoKSwgLXRoaXMubTAxKCksIC10aGlzLm0wMigpLFxuICAgICAgLXRoaXMubTEwKCksIC10aGlzLm0xMSgpLCAtdGhpcy5tMTIoKSxcbiAgICAgIC10aGlzLm0yMCgpLCAtdGhpcy5tMjEoKSwgLXRoaXMubTIyKClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaW52ZXJ0ZWQgY29weSBvZiB0aGlzIG1hdHJpeFxuICAgKi9cbiAgcHVibGljIGludmVydGVkKCk6IE1hdHJpeDMge1xuICAgIGxldCBkZXQ7XG5cbiAgICBzd2l0Y2goIHRoaXMudHlwZSApIHtcbiAgICAgIGNhc2UgTWF0cml4M1R5cGUuSURFTlRJVFk6XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgY2FzZSBNYXRyaXgzVHlwZS5UUkFOU0xBVElPTl8yRDpcbiAgICAgICAgcmV0dXJuIG0zKFxuICAgICAgICAgIDEsIDAsIC10aGlzLm0wMigpLFxuICAgICAgICAgIDAsIDEsIC10aGlzLm0xMigpLFxuICAgICAgICAgIDAsIDAsIDEsIE1hdHJpeDNUeXBlLlRSQU5TTEFUSU9OXzJEICk7XG4gICAgICBjYXNlIE1hdHJpeDNUeXBlLlNDQUxJTkc6XG4gICAgICAgIHJldHVybiBtMyhcbiAgICAgICAgICAxIC8gdGhpcy5tMDAoKSwgMCwgMCxcbiAgICAgICAgICAwLCAxIC8gdGhpcy5tMTEoKSwgMCxcbiAgICAgICAgICAwLCAwLCAxIC8gdGhpcy5tMjIoKSwgTWF0cml4M1R5cGUuU0NBTElORyApO1xuICAgICAgY2FzZSBNYXRyaXgzVHlwZS5BRkZJTkU6XG4gICAgICAgIGRldCA9IHRoaXMuZ2V0RGV0ZXJtaW5hbnQoKTtcbiAgICAgICAgaWYgKCBkZXQgIT09IDAgKSB7XG4gICAgICAgICAgcmV0dXJuIG0zKFxuICAgICAgICAgICAgKCAtdGhpcy5tMTIoKSAqIHRoaXMubTIxKCkgKyB0aGlzLm0xMSgpICogdGhpcy5tMjIoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0wMigpICogdGhpcy5tMjEoKSAtIHRoaXMubTAxKCkgKiB0aGlzLm0yMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0wMigpICogdGhpcy5tMTEoKSArIHRoaXMubTAxKCkgKiB0aGlzLm0xMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIHRoaXMubTEyKCkgKiB0aGlzLm0yMCgpIC0gdGhpcy5tMTAoKSAqIHRoaXMubTIyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTAyKCkgKiB0aGlzLm0yMCgpICsgdGhpcy5tMDAoKSAqIHRoaXMubTIyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMDIoKSAqIHRoaXMubTEwKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMTIoKSApIC8gZGV0LFxuICAgICAgICAgICAgMCwgMCwgMSwgTWF0cml4M1R5cGUuQUZGSU5FXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdNYXRyaXggY291bGQgbm90IGJlIGludmVydGVkLCBkZXRlcm1pbmFudCA9PT0gMCcgKTtcbiAgICAgICAgfVxuICAgICAgY2FzZSBNYXRyaXgzVHlwZS5PVEhFUjpcbiAgICAgICAgZGV0ID0gdGhpcy5nZXREZXRlcm1pbmFudCgpO1xuICAgICAgICBpZiAoIGRldCAhPT0gMCApIHtcbiAgICAgICAgICByZXR1cm4gbTMoXG4gICAgICAgICAgICAoIC10aGlzLm0xMigpICogdGhpcy5tMjEoKSArIHRoaXMubTExKCkgKiB0aGlzLm0yMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIHRoaXMubTAyKCkgKiB0aGlzLm0yMSgpIC0gdGhpcy5tMDEoKSAqIHRoaXMubTIyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTAyKCkgKiB0aGlzLm0xMSgpICsgdGhpcy5tMDEoKSAqIHRoaXMubTEyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMTIoKSAqIHRoaXMubTIwKCkgLSB0aGlzLm0xMCgpICogdGhpcy5tMjIoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCAtdGhpcy5tMDIoKSAqIHRoaXMubTIwKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMjIoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0wMigpICogdGhpcy5tMTAoKSAtIHRoaXMubTAwKCkgKiB0aGlzLm0xMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0xMSgpICogdGhpcy5tMjAoKSArIHRoaXMubTEwKCkgKiB0aGlzLm0yMSgpICkgLyBkZXQsXG4gICAgICAgICAgICAoIHRoaXMubTAxKCkgKiB0aGlzLm0yMCgpIC0gdGhpcy5tMDAoKSAqIHRoaXMubTIxKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTAxKCkgKiB0aGlzLm0xMCgpICsgdGhpcy5tMDAoKSAqIHRoaXMubTExKCkgKSAvIGRldCxcbiAgICAgICAgICAgIE1hdHJpeDNUeXBlLk9USEVSXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoICdNYXRyaXggY291bGQgbm90IGJlIGludmVydGVkLCBkZXRlcm1pbmFudCA9PT0gMCcgKTtcbiAgICAgICAgfVxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBgTWF0cml4My5pbnZlcnRlZCB3aXRoIHVua25vd24gdHlwZTogJHt0aGlzLnR5cGV9YCApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbWF0cml4LCBkZWZpbmVkIGJ5IHRoZSBtdWx0aXBsaWNhdGlvbiBvZiB0aGlzICogbWF0cml4LlxuICAgKlxuICAgKiBAcGFyYW0gbWF0cml4XG4gICAqIEByZXR1cm5zIC0gTk9URTogdGhpcyBtYXkgYmUgdGhlIHNhbWUgbWF0cml4IVxuICAgKi9cbiAgcHVibGljIHRpbWVzTWF0cml4KCBtYXRyaXg6IE1hdHJpeDMgKTogTWF0cml4MyB7XG4gICAgLy8gSSAqIE0gPT09IE0gKiBJID09PSBNICh0aGUgaWRlbnRpdHkpXG4gICAgaWYgKCB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLklERU5USVRZIHx8IG1hdHJpeC50eXBlID09PSBNYXRyaXgzVHlwZS5JREVOVElUWSApIHtcbiAgICAgIHJldHVybiB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLklERU5USVRZID8gbWF0cml4IDogdGhpcztcbiAgICB9XG5cbiAgICBpZiAoIHRoaXMudHlwZSA9PT0gbWF0cml4LnR5cGUgKSB7XG4gICAgICAvLyBjdXJyZW50bHkgdHdvIG1hdHJpY2VzIG9mIHRoZSBzYW1lIHR5cGUgd2lsbCByZXN1bHQgaW4gdGhlIHNhbWUgcmVzdWx0IHR5cGVcbiAgICAgIGlmICggdGhpcy50eXBlID09PSBNYXRyaXgzVHlwZS5UUkFOU0xBVElPTl8yRCApIHtcbiAgICAgICAgLy8gZmFzdGVyIGNvbWJpbmF0aW9uIG9mIHRyYW5zbGF0aW9uc1xuICAgICAgICByZXR1cm4gbTMoXG4gICAgICAgICAgMSwgMCwgdGhpcy5tMDIoKSArIG1hdHJpeC5tMDIoKSxcbiAgICAgICAgICAwLCAxLCB0aGlzLm0xMigpICsgbWF0cml4Lm0xMigpLFxuICAgICAgICAgIDAsIDAsIDEsIE1hdHJpeDNUeXBlLlRSQU5TTEFUSU9OXzJEICk7XG4gICAgICB9XG4gICAgICBlbHNlIGlmICggdGhpcy50eXBlID09PSBNYXRyaXgzVHlwZS5TQ0FMSU5HICkge1xuICAgICAgICAvLyBmYXN0ZXIgY29tYmluYXRpb24gb2Ygc2NhbGluZ1xuICAgICAgICByZXR1cm4gbTMoXG4gICAgICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDAoKSwgMCwgMCxcbiAgICAgICAgICAwLCB0aGlzLm0xMSgpICogbWF0cml4Lm0xMSgpLCAwLFxuICAgICAgICAgIDAsIDAsIDEsIE1hdHJpeDNUeXBlLlNDQUxJTkcgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIHRoaXMudHlwZSAhPT0gTWF0cml4M1R5cGUuT1RIRVIgJiYgbWF0cml4LnR5cGUgIT09IE1hdHJpeDNUeXBlLk9USEVSICkge1xuICAgICAgLy8gY3VycmVudGx5IHR3byBtYXRyaWNlcyB0aGF0IGFyZSBhbnl0aGluZyBidXQgXCJvdGhlclwiIGFyZSB0ZWNobmljYWxseSBhZmZpbmUsIGFuZCB0aGUgcmVzdWx0IHdpbGwgYmUgYWZmaW5lXG5cbiAgICAgIC8vIGFmZmluZSBjYXNlXG4gICAgICByZXR1cm4gbTMoXG4gICAgICAgIHRoaXMubTAwKCkgKiBtYXRyaXgubTAwKCkgKyB0aGlzLm0wMSgpICogbWF0cml4Lm0xMCgpLFxuICAgICAgICB0aGlzLm0wMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMDEoKSAqIG1hdHJpeC5tMTEoKSxcbiAgICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDIoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEyKCkgKyB0aGlzLm0wMigpLFxuICAgICAgICB0aGlzLm0xMCgpICogbWF0cml4Lm0wMCgpICsgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTAoKSxcbiAgICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDEoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTExKCksXG4gICAgICAgIHRoaXMubTEwKCkgKiBtYXRyaXgubTAyKCkgKyB0aGlzLm0xMSgpICogbWF0cml4Lm0xMigpICsgdGhpcy5tMTIoKSxcbiAgICAgICAgMCwgMCwgMSwgTWF0cml4M1R5cGUuQUZGSU5FICk7XG4gICAgfVxuXG4gICAgLy8gZ2VuZXJhbCBjYXNlXG4gICAgcmV0dXJuIG0zKFxuICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0wMigpICogbWF0cml4Lm0yMCgpLFxuICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDEoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTExKCkgKyB0aGlzLm0wMigpICogbWF0cml4Lm0yMSgpLFxuICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDIoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEyKCkgKyB0aGlzLm0wMigpICogbWF0cml4Lm0yMigpLFxuICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0xMigpICogbWF0cml4Lm0yMCgpLFxuICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDEoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTExKCkgKyB0aGlzLm0xMigpICogbWF0cml4Lm0yMSgpLFxuICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDIoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTEyKCkgKyB0aGlzLm0xMigpICogbWF0cml4Lm0yMigpLFxuICAgICAgdGhpcy5tMjAoKSAqIG1hdHJpeC5tMDAoKSArIHRoaXMubTIxKCkgKiBtYXRyaXgubTEwKCkgKyB0aGlzLm0yMigpICogbWF0cml4Lm0yMCgpLFxuICAgICAgdGhpcy5tMjAoKSAqIG1hdHJpeC5tMDEoKSArIHRoaXMubTIxKCkgKiBtYXRyaXgubTExKCkgKyB0aGlzLm0yMigpICogbWF0cml4Lm0yMSgpLFxuICAgICAgdGhpcy5tMjAoKSAqIG1hdHJpeC5tMDIoKSArIHRoaXMubTIxKCkgKiBtYXRyaXgubTEyKCkgKyB0aGlzLm0yMigpICogbWF0cml4Lm0yMigpICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogSW1tdXRhYmxlIG9wZXJhdGlvbnMgKHJldHVybnMgbmV3IGZvcm0gb2YgYSBwYXJhbWV0ZXIpXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG11bHRpcGxpY2F0aW9uIG9mIHRoaXMgbWF0cml4IHRpbWVzIHRoZSBwcm92aWRlZCB2ZWN0b3IgKHRyZWF0aW5nIHRoaXMgbWF0cml4IGFzIGhvbW9nZW5lb3VzLCBzbyB0aGF0XG4gICAqIGl0IGlzIHRoZSB0ZWNobmljYWwgbXVsdGlwbGljYXRpb24gb2YgKHgseSwxKSkuXG4gICAqL1xuICBwdWJsaWMgdGltZXNWZWN0b3IyKCB2ZWN0b3IyOiBWZWN0b3IyICk6IFZlY3RvcjIge1xuICAgIGNvbnN0IHggPSB0aGlzLm0wMCgpICogdmVjdG9yMi54ICsgdGhpcy5tMDEoKSAqIHZlY3RvcjIueSArIHRoaXMubTAyKCk7XG4gICAgY29uc3QgeSA9IHRoaXMubTEwKCkgKiB2ZWN0b3IyLnggKyB0aGlzLm0xMSgpICogdmVjdG9yMi55ICsgdGhpcy5tMTIoKTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoIHgsIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBtdWx0aXBsaWNhdGlvbiBvZiB0aGlzIG1hdHJpeCB0aW1lcyB0aGUgcHJvdmlkZWQgdmVjdG9yXG4gICAqL1xuICBwdWJsaWMgdGltZXNWZWN0b3IzKCB2ZWN0b3IzOiBWZWN0b3IzICk6IFZlY3RvcjMge1xuICAgIGNvbnN0IHggPSB0aGlzLm0wMCgpICogdmVjdG9yMy54ICsgdGhpcy5tMDEoKSAqIHZlY3RvcjMueSArIHRoaXMubTAyKCkgKiB2ZWN0b3IzLno7XG4gICAgY29uc3QgeSA9IHRoaXMubTEwKCkgKiB2ZWN0b3IzLnggKyB0aGlzLm0xMSgpICogdmVjdG9yMy55ICsgdGhpcy5tMTIoKSAqIHZlY3RvcjMuejtcbiAgICBjb25zdCB6ID0gdGhpcy5tMjAoKSAqIHZlY3RvcjMueCArIHRoaXMubTIxKCkgKiB2ZWN0b3IzLnkgKyB0aGlzLm0yMigpICogdmVjdG9yMy56O1xuICAgIHJldHVybiBuZXcgVmVjdG9yMyggeCwgeSwgeiApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG11bHRpcGxpY2F0aW9uIG9mIHRoZSB0cmFuc3Bvc2Ugb2YgdGhpcyBtYXRyaXggdGltZXMgdGhlIHByb3ZpZGVkIHZlY3RvciAoYXNzdW1pbmcgdGhlIDJ4MiBxdWFkcmFudClcbiAgICovXG4gIHB1YmxpYyB0aW1lc1RyYW5zcG9zZVZlY3RvcjIoIHZlY3RvcjI6IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgY29uc3QgeCA9IHRoaXMubTAwKCkgKiB2ZWN0b3IyLnggKyB0aGlzLm0xMCgpICogdmVjdG9yMi55O1xuICAgIGNvbnN0IHkgPSB0aGlzLm0wMSgpICogdmVjdG9yMi54ICsgdGhpcy5tMTEoKSAqIHZlY3RvcjIueTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoIHgsIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUT0RPOiB0aGlzIG9wZXJhdGlvbiBzZWVtcyB0byBub3Qgd29yayBmb3IgdHJhbnNmb3JtRGVsdGEyLCBzaG91bGQgYmUgdmV0dGVkXG4gICAqL1xuICBwdWJsaWMgdGltZXNSZWxhdGl2ZVZlY3RvcjIoIHZlY3RvcjI6IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgY29uc3QgeCA9IHRoaXMubTAwKCkgKiB2ZWN0b3IyLnggKyB0aGlzLm0wMSgpICogdmVjdG9yMi55O1xuICAgIGNvbnN0IHkgPSB0aGlzLm0xMCgpICogdmVjdG9yMi55ICsgdGhpcy5tMTEoKSAqIHZlY3RvcjIueTtcbiAgICByZXR1cm4gbmV3IFZlY3RvcjIoIHgsIHkgKTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxuICAgKiBNdXRhYmxlIG9wZXJhdGlvbnMgKGNoYW5nZXMgdGhpcyBtYXRyaXgpXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIGVudGlyZSBzdGF0ZSBvZiB0aGUgbWF0cml4LCBpbiByb3ctbWFqb3Igb3JkZXIuXG4gICAqXG4gICAqIE5PVEU6IEV2ZXJ5IG11dGFibGUgbWV0aG9kIGdvZXMgdGhyb3VnaCByb3dNYWpvclxuICAgKi9cbiAgcHVibGljIHJvd01ham9yKCB2MDA6IG51bWJlciwgdjAxOiBudW1iZXIsIHYwMjogbnVtYmVyLCB2MTA6IG51bWJlciwgdjExOiBudW1iZXIsIHYxMjogbnVtYmVyLCB2MjA6IG51bWJlciwgdjIxOiBudW1iZXIsIHYyMjogbnVtYmVyLCB0eXBlPzogTWF0cml4M1R5cGUgKTogdGhpcyB7XG4gICAgdGhpcy5lbnRyaWVzWyAwIF0gPSB2MDA7XG4gICAgdGhpcy5lbnRyaWVzWyAxIF0gPSB2MTA7XG4gICAgdGhpcy5lbnRyaWVzWyAyIF0gPSB2MjA7XG4gICAgdGhpcy5lbnRyaWVzWyAzIF0gPSB2MDE7XG4gICAgdGhpcy5lbnRyaWVzWyA0IF0gPSB2MTE7XG4gICAgdGhpcy5lbnRyaWVzWyA1IF0gPSB2MjE7XG4gICAgdGhpcy5lbnRyaWVzWyA2IF0gPSB2MDI7XG4gICAgdGhpcy5lbnRyaWVzWyA3IF0gPSB2MTI7XG4gICAgdGhpcy5lbnRyaWVzWyA4IF0gPSB2MjI7XG5cbiAgICAvLyBUT0RPOiBjb25zaWRlciBwZXJmb3JtYW5jZSBvZiB0aGUgYWZmaW5lIGNoZWNrIGhlcmVcbiAgICB0aGlzLnR5cGUgPSB0eXBlID09PSB1bmRlZmluZWQgPyAoICggdjIwID09PSAwICYmIHYyMSA9PT0gMCAmJiB2MjIgPT09IDEgKSA/IE1hdHJpeDNUeXBlLkFGRklORSA6IE1hdHJpeDNUeXBlLk9USEVSICkgOiB0eXBlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBtYXRyaXggdG8gYmUgYSBjb3B5IG9mIGFub3RoZXIgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldCggbWF0cml4OiBNYXRyaXgzICk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgbWF0cml4Lm0wMCgpLCBtYXRyaXgubTAxKCksIG1hdHJpeC5tMDIoKSxcbiAgICAgIG1hdHJpeC5tMTAoKSwgbWF0cml4Lm0xMSgpLCBtYXRyaXgubTEyKCksXG4gICAgICBtYXRyaXgubTIwKCksIG1hdHJpeC5tMjEoKSwgbWF0cml4Lm0yMigpLFxuICAgICAgbWF0cml4LnR5cGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIGJlIGEgY29weSBvZiB0aGUgY29sdW1uLW1ham9yIGRhdGEgc3RvcmVkIGluIGFuIGFycmF5IChlLmcuIFdlYkdMKS5cbiAgICovXG4gIHB1YmxpYyBzZXRBcnJheSggYXJyYXk6IG51bWJlcltdIHwgRmxvYXQzMkFycmF5IHwgRmxvYXQ2NEFycmF5ICk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgYXJyYXlbIDAgXSwgYXJyYXlbIDMgXSwgYXJyYXlbIDYgXSxcbiAgICAgIGFycmF5WyAxIF0sIGFycmF5WyA0IF0sIGFycmF5WyA3IF0sXG4gICAgICBhcnJheVsgMiBdLCBhcnJheVsgNSBdLCBhcnJheVsgOCBdICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAwLDAgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDAwKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgMCBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAwLDEgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDAxKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgMyBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAwLDIgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDAyKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgNiBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAxLDAgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDEwKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgMSBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAxLDEgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDExKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgNCBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAxLDIgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDEyKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgNyBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAyLDAgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDIwKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgMiBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAyLDEgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDIxKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgNSBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgaW5kaXZpZHVhbCAyLDIgY29tcG9uZW50IG9mIHRoaXMgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldDIyKCB2YWx1ZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHRoaXMuZW50cmllc1sgOCBdID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogTWFrZXMgdGhpcyBtYXRyaXggZWZmZWN0aXZlbHkgaW1tdXRhYmxlIHRvIHRoZSBub3JtYWwgbWV0aG9kcyAoZXhjZXB0IGRpcmVjdCBzZXR0ZXJzPylcbiAgICovXG4gIHB1YmxpYyBtYWtlSW1tdXRhYmxlKCk6IHRoaXMge1xuICAgIGlmICggYXNzZXJ0ICkge1xuICAgICAgdGhpcy5yb3dNYWpvciA9ICgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnQ2Fubm90IG1vZGlmeSBpbW11dGFibGUgbWF0cml4JyApO1xuICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgZW50aXJlIHN0YXRlIG9mIHRoZSBtYXRyaXgsIGluIGNvbHVtbi1tYWpvciBvcmRlci5cbiAgICovXG4gIHB1YmxpYyBjb2x1bW5NYWpvciggdjAwOiBudW1iZXIsIHYxMDogbnVtYmVyLCB2MjA6IG51bWJlciwgdjAxOiBudW1iZXIsIHYxMTogbnVtYmVyLCB2MjE6IG51bWJlciwgdjAyOiBudW1iZXIsIHYxMjogbnVtYmVyLCB2MjI6IG51bWJlciwgdHlwZTogTWF0cml4M1R5cGUgKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoIHYwMCwgdjAxLCB2MDIsIHYxMCwgdjExLCB2MTIsIHYyMCwgdjIxLCB2MjIsIHR5cGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIGl0c2VsZiBwbHVzIHRoZSBnaXZlbiBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgYWRkKCBtYXRyaXg6IE1hdHJpeDMgKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICB0aGlzLm0wMCgpICsgbWF0cml4Lm0wMCgpLCB0aGlzLm0wMSgpICsgbWF0cml4Lm0wMSgpLCB0aGlzLm0wMigpICsgbWF0cml4Lm0wMigpLFxuICAgICAgdGhpcy5tMTAoKSArIG1hdHJpeC5tMTAoKSwgdGhpcy5tMTEoKSArIG1hdHJpeC5tMTEoKSwgdGhpcy5tMTIoKSArIG1hdHJpeC5tMTIoKSxcbiAgICAgIHRoaXMubTIwKCkgKyBtYXRyaXgubTIwKCksIHRoaXMubTIxKCkgKyBtYXRyaXgubTIxKCksIHRoaXMubTIyKCkgKyBtYXRyaXgubTIyKClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBtYXRyaXggdG8gaXRzZWxmIG1pbnVzIHRoZSBnaXZlbiBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgc3VidHJhY3QoIG06IE1hdHJpeDMgKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICB0aGlzLm0wMCgpIC0gbS5tMDAoKSwgdGhpcy5tMDEoKSAtIG0ubTAxKCksIHRoaXMubTAyKCkgLSBtLm0wMigpLFxuICAgICAgdGhpcy5tMTAoKSAtIG0ubTEwKCksIHRoaXMubTExKCkgLSBtLm0xMSgpLCB0aGlzLm0xMigpIC0gbS5tMTIoKSxcbiAgICAgIHRoaXMubTIwKCkgLSBtLm0yMCgpLCB0aGlzLm0yMSgpIC0gbS5tMjEoKSwgdGhpcy5tMjIoKSAtIG0ubTIyKClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBtYXRyaXggdG8gaXRzIG93biB0cmFuc3Bvc2UuXG4gICAqL1xuICBwdWJsaWMgdHJhbnNwb3NlKCk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgdGhpcy5tMDAoKSwgdGhpcy5tMTAoKSwgdGhpcy5tMjAoKSxcbiAgICAgIHRoaXMubTAxKCksIHRoaXMubTExKCksIHRoaXMubTIxKCksXG4gICAgICB0aGlzLm0wMigpLCB0aGlzLm0xMigpLCB0aGlzLm0yMigpLFxuICAgICAgKCB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLklERU5USVRZIHx8IHRoaXMudHlwZSA9PT0gTWF0cml4M1R5cGUuU0NBTElORyApID8gdGhpcy50eXBlIDogdW5kZWZpbmVkXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIGl0cyBvd24gbmVnYXRpb24uXG4gICAqL1xuICBwdWJsaWMgbmVnYXRlKCk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgLXRoaXMubTAwKCksIC10aGlzLm0wMSgpLCAtdGhpcy5tMDIoKSxcbiAgICAgIC10aGlzLm0xMCgpLCAtdGhpcy5tMTEoKSwgLXRoaXMubTEyKCksXG4gICAgICAtdGhpcy5tMjAoKSwgLXRoaXMubTIxKCksIC10aGlzLm0yMigpXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIGl0cyBvd24gaW52ZXJzZS5cbiAgICovXG4gIHB1YmxpYyBpbnZlcnQoKTogdGhpcyB7XG4gICAgbGV0IGRldDtcblxuICAgIHN3aXRjaCggdGhpcy50eXBlICkge1xuICAgICAgY2FzZSBNYXRyaXgzVHlwZS5JREVOVElUWTpcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICBjYXNlIE1hdHJpeDNUeXBlLlRSQU5TTEFUSU9OXzJEOlxuICAgICAgICByZXR1cm4gdGhpcy5yb3dNYWpvcihcbiAgICAgICAgICAxLCAwLCAtdGhpcy5tMDIoKSxcbiAgICAgICAgICAwLCAxLCAtdGhpcy5tMTIoKSxcbiAgICAgICAgICAwLCAwLCAxLCBNYXRyaXgzVHlwZS5UUkFOU0xBVElPTl8yRCApO1xuICAgICAgY2FzZSBNYXRyaXgzVHlwZS5TQ0FMSU5HOlxuICAgICAgICByZXR1cm4gdGhpcy5yb3dNYWpvcihcbiAgICAgICAgICAxIC8gdGhpcy5tMDAoKSwgMCwgMCxcbiAgICAgICAgICAwLCAxIC8gdGhpcy5tMTEoKSwgMCxcbiAgICAgICAgICAwLCAwLCAxIC8gdGhpcy5tMjIoKSwgTWF0cml4M1R5cGUuU0NBTElORyApO1xuICAgICAgY2FzZSBNYXRyaXgzVHlwZS5BRkZJTkU6XG4gICAgICAgIGRldCA9IHRoaXMuZ2V0RGV0ZXJtaW5hbnQoKTtcbiAgICAgICAgaWYgKCBkZXQgIT09IDAgKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICAgICAgICAoIC10aGlzLm0xMigpICogdGhpcy5tMjEoKSArIHRoaXMubTExKCkgKiB0aGlzLm0yMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIHRoaXMubTAyKCkgKiB0aGlzLm0yMSgpIC0gdGhpcy5tMDEoKSAqIHRoaXMubTIyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTAyKCkgKiB0aGlzLm0xMSgpICsgdGhpcy5tMDEoKSAqIHRoaXMubTEyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMTIoKSAqIHRoaXMubTIwKCkgLSB0aGlzLm0xMCgpICogdGhpcy5tMjIoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCAtdGhpcy5tMDIoKSAqIHRoaXMubTIwKCkgKyB0aGlzLm0wMCgpICogdGhpcy5tMjIoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0wMigpICogdGhpcy5tMTAoKSAtIHRoaXMubTAwKCkgKiB0aGlzLm0xMigpICkgLyBkZXQsXG4gICAgICAgICAgICAwLCAwLCAxLCBNYXRyaXgzVHlwZS5BRkZJTkVcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvciggJ01hdHJpeCBjb3VsZCBub3QgYmUgaW52ZXJ0ZWQsIGRldGVybWluYW50ID09PSAwJyApO1xuICAgICAgICB9XG4gICAgICBjYXNlIE1hdHJpeDNUeXBlLk9USEVSOlxuICAgICAgICBkZXQgPSB0aGlzLmdldERldGVybWluYW50KCk7XG4gICAgICAgIGlmICggZGV0ICE9PSAwICkge1xuICAgICAgICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgICAgICAgKCAtdGhpcy5tMTIoKSAqIHRoaXMubTIxKCkgKyB0aGlzLm0xMSgpICogdGhpcy5tMjIoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0wMigpICogdGhpcy5tMjEoKSAtIHRoaXMubTAxKCkgKiB0aGlzLm0yMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0wMigpICogdGhpcy5tMTEoKSArIHRoaXMubTAxKCkgKiB0aGlzLm0xMigpICkgLyBkZXQsXG4gICAgICAgICAgICAoIHRoaXMubTEyKCkgKiB0aGlzLm0yMCgpIC0gdGhpcy5tMTAoKSAqIHRoaXMubTIyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggLXRoaXMubTAyKCkgKiB0aGlzLm0yMCgpICsgdGhpcy5tMDAoKSAqIHRoaXMubTIyKCkgKSAvIGRldCxcbiAgICAgICAgICAgICggdGhpcy5tMDIoKSAqIHRoaXMubTEwKCkgLSB0aGlzLm0wMCgpICogdGhpcy5tMTIoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCAtdGhpcy5tMTEoKSAqIHRoaXMubTIwKCkgKyB0aGlzLm0xMCgpICogdGhpcy5tMjEoKSApIC8gZGV0LFxuICAgICAgICAgICAgKCB0aGlzLm0wMSgpICogdGhpcy5tMjAoKSAtIHRoaXMubTAwKCkgKiB0aGlzLm0yMSgpICkgLyBkZXQsXG4gICAgICAgICAgICAoIC10aGlzLm0wMSgpICogdGhpcy5tMTAoKSArIHRoaXMubTAwKCkgKiB0aGlzLm0xMSgpICkgLyBkZXQsXG4gICAgICAgICAgICBNYXRyaXgzVHlwZS5PVEhFUlxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCAnTWF0cml4IGNvdWxkIG5vdCBiZSBpbnZlcnRlZCwgZGV0ZXJtaW5hbnQgPT09IDAnICk7XG4gICAgICAgIH1cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBFcnJvciggYE1hdHJpeDMuaW52ZXJ0ZWQgd2l0aCB1bmtub3duIHR5cGU6ICR7dGhpcy50eXBlfWAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIG1hdHJpeCB0byB0aGUgdmFsdWUgb2YgaXRzZWxmIHRpbWVzIHRoZSBwcm92aWRlZCBtYXRyaXhcbiAgICovXG4gIHB1YmxpYyBtdWx0aXBseU1hdHJpeCggbWF0cml4OiBNYXRyaXgzICk6IHRoaXMge1xuICAgIC8vIE0gKiBJID09PSBNICh0aGUgaWRlbnRpdHkpXG4gICAgaWYgKCBtYXRyaXgudHlwZSA9PT0gTWF0cml4M1R5cGUuSURFTlRJVFkgKSB7XG4gICAgICAvLyBubyBjaGFuZ2UgbmVlZGVkXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBJICogTSA9PT0gTSAodGhlIGlkZW50aXR5KVxuICAgIGlmICggdGhpcy50eXBlID09PSBNYXRyaXgzVHlwZS5JREVOVElUWSApIHtcbiAgICAgIC8vIGNvcHkgdGhlIG90aGVyIG1hdHJpeCB0byB1c1xuICAgICAgcmV0dXJuIHRoaXMuc2V0KCBtYXRyaXggKTtcbiAgICB9XG5cbiAgICBpZiAoIHRoaXMudHlwZSA9PT0gbWF0cml4LnR5cGUgKSB7XG4gICAgICAvLyBjdXJyZW50bHkgdHdvIG1hdHJpY2VzIG9mIHRoZSBzYW1lIHR5cGUgd2lsbCByZXN1bHQgaW4gdGhlIHNhbWUgcmVzdWx0IHR5cGVcbiAgICAgIGlmICggdGhpcy50eXBlID09PSBNYXRyaXgzVHlwZS5UUkFOU0xBVElPTl8yRCApIHtcbiAgICAgICAgLy8gZmFzdGVyIGNvbWJpbmF0aW9uIG9mIHRyYW5zbGF0aW9uc1xuICAgICAgICByZXR1cm4gdGhpcy5yb3dNYWpvcihcbiAgICAgICAgICAxLCAwLCB0aGlzLm0wMigpICsgbWF0cml4Lm0wMigpLFxuICAgICAgICAgIDAsIDEsIHRoaXMubTEyKCkgKyBtYXRyaXgubTEyKCksXG4gICAgICAgICAgMCwgMCwgMSwgTWF0cml4M1R5cGUuVFJBTlNMQVRJT05fMkQgKTtcbiAgICAgIH1cbiAgICAgIGVsc2UgaWYgKCB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLlNDQUxJTkcgKSB7XG4gICAgICAgIC8vIGZhc3RlciBjb21iaW5hdGlvbiBvZiBzY2FsaW5nXG4gICAgICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgICAgIHRoaXMubTAwKCkgKiBtYXRyaXgubTAwKCksIDAsIDAsXG4gICAgICAgICAgMCwgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTEoKSwgMCxcbiAgICAgICAgICAwLCAwLCAxLCBNYXRyaXgzVHlwZS5TQ0FMSU5HICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCB0aGlzLnR5cGUgIT09IE1hdHJpeDNUeXBlLk9USEVSICYmIG1hdHJpeC50eXBlICE9PSBNYXRyaXgzVHlwZS5PVEhFUiApIHtcbiAgICAgIC8vIGN1cnJlbnRseSB0d28gbWF0cmljZXMgdGhhdCBhcmUgYW55dGhpbmcgYnV0IFwib3RoZXJcIiBhcmUgdGVjaG5pY2FsbHkgYWZmaW5lLCBhbmQgdGhlIHJlc3VsdCB3aWxsIGJlIGFmZmluZVxuXG4gICAgICAvLyBhZmZpbmUgY2FzZVxuICAgICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICAgIHRoaXMubTAwKCkgKiBtYXRyaXgubTAwKCkgKyB0aGlzLm0wMSgpICogbWF0cml4Lm0xMCgpLFxuICAgICAgICB0aGlzLm0wMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMDEoKSAqIG1hdHJpeC5tMTEoKSxcbiAgICAgICAgdGhpcy5tMDAoKSAqIG1hdHJpeC5tMDIoKSArIHRoaXMubTAxKCkgKiBtYXRyaXgubTEyKCkgKyB0aGlzLm0wMigpLFxuICAgICAgICB0aGlzLm0xMCgpICogbWF0cml4Lm0wMCgpICsgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTAoKSxcbiAgICAgICAgdGhpcy5tMTAoKSAqIG1hdHJpeC5tMDEoKSArIHRoaXMubTExKCkgKiBtYXRyaXgubTExKCksXG4gICAgICAgIHRoaXMubTEwKCkgKiBtYXRyaXgubTAyKCkgKyB0aGlzLm0xMSgpICogbWF0cml4Lm0xMigpICsgdGhpcy5tMTIoKSxcbiAgICAgICAgMCwgMCwgMSwgTWF0cml4M1R5cGUuQUZGSU5FICk7XG4gICAgfVxuXG4gICAgLy8gZ2VuZXJhbCBjYXNlXG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICB0aGlzLm0wMCgpICogbWF0cml4Lm0wMCgpICsgdGhpcy5tMDEoKSAqIG1hdHJpeC5tMTAoKSArIHRoaXMubTAyKCkgKiBtYXRyaXgubTIwKCksXG4gICAgICB0aGlzLm0wMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMDEoKSAqIG1hdHJpeC5tMTEoKSArIHRoaXMubTAyKCkgKiBtYXRyaXgubTIxKCksXG4gICAgICB0aGlzLm0wMCgpICogbWF0cml4Lm0wMigpICsgdGhpcy5tMDEoKSAqIG1hdHJpeC5tMTIoKSArIHRoaXMubTAyKCkgKiBtYXRyaXgubTIyKCksXG4gICAgICB0aGlzLm0xMCgpICogbWF0cml4Lm0wMCgpICsgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTAoKSArIHRoaXMubTEyKCkgKiBtYXRyaXgubTIwKCksXG4gICAgICB0aGlzLm0xMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTEoKSArIHRoaXMubTEyKCkgKiBtYXRyaXgubTIxKCksXG4gICAgICB0aGlzLm0xMCgpICogbWF0cml4Lm0wMigpICsgdGhpcy5tMTEoKSAqIG1hdHJpeC5tMTIoKSArIHRoaXMubTEyKCkgKiBtYXRyaXgubTIyKCksXG4gICAgICB0aGlzLm0yMCgpICogbWF0cml4Lm0wMCgpICsgdGhpcy5tMjEoKSAqIG1hdHJpeC5tMTAoKSArIHRoaXMubTIyKCkgKiBtYXRyaXgubTIwKCksXG4gICAgICB0aGlzLm0yMCgpICogbWF0cml4Lm0wMSgpICsgdGhpcy5tMjEoKSAqIG1hdHJpeC5tMTEoKSArIHRoaXMubTIyKCkgKiBtYXRyaXgubTIxKCksXG4gICAgICB0aGlzLm0yMCgpICogbWF0cml4Lm0wMigpICsgdGhpcy5tMjEoKSAqIG1hdHJpeC5tMTIoKSArIHRoaXMubTIyKCkgKiBtYXRyaXgubTIyKCkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdXRhdGVzIHRoaXMgbWF0cml4LCBlcXVpdmFsZW50IHRvICh0cmFuc2xhdGlvbiAqIHRoaXMpLlxuICAgKi9cbiAgcHVibGljIHByZXBlbmRUcmFuc2xhdGlvbiggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogdGhpcyB7XG4gICAgdGhpcy5zZXQwMiggdGhpcy5tMDIoKSArIHggKTtcbiAgICB0aGlzLnNldDEyKCB0aGlzLm0xMigpICsgeSApO1xuXG4gICAgaWYgKCB0aGlzLnR5cGUgPT09IE1hdHJpeDNUeXBlLklERU5USVRZIHx8IHRoaXMudHlwZSA9PT0gTWF0cml4M1R5cGUuVFJBTlNMQVRJT05fMkQgKSB7XG4gICAgICB0aGlzLnR5cGUgPSBNYXRyaXgzVHlwZS5UUkFOU0xBVElPTl8yRDtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHRoaXMudHlwZSA9PT0gTWF0cml4M1R5cGUuT1RIRVIgKSB7XG4gICAgICB0aGlzLnR5cGUgPSBNYXRyaXgzVHlwZS5PVEhFUjtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICB0aGlzLnR5cGUgPSBNYXRyaXgzVHlwZS5BRkZJTkU7XG4gICAgfVxuICAgIHJldHVybiB0aGlzOyAvLyBmb3IgY2hhaW5pbmdcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIHRoZSAzeDMgaWRlbnRpdHkgbWF0cml4LlxuICAgKi9cbiAgcHVibGljIHNldFRvSWRlbnRpdHkoKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICAxLCAwLCAwLFxuICAgICAgMCwgMSwgMCxcbiAgICAgIDAsIDAsIDEsXG4gICAgICBNYXRyaXgzVHlwZS5JREVOVElUWSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBtYXRyaXggdG8gdGhlIGFmZmluZSB0cmFuc2xhdGlvbiBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgc2V0VG9UcmFuc2xhdGlvbiggeDogbnVtYmVyLCB5OiBudW1iZXIgKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICAxLCAwLCB4LFxuICAgICAgMCwgMSwgeSxcbiAgICAgIDAsIDAsIDEsXG4gICAgICBNYXRyaXgzVHlwZS5UUkFOU0xBVElPTl8yRCApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBtYXRyaXggdG8gdGhlIGFmZmluZSBzY2FsaW5nIG1hdHJpeC5cbiAgICovXG4gIHB1YmxpYyBzZXRUb1NjYWxlKCB4OiBudW1iZXIsIHk/OiBudW1iZXIgKTogdGhpcyB7XG4gICAgLy8gYWxsb3cgdXNpbmcgb25lIHBhcmFtZXRlciB0byBzY2FsZSBldmVyeXRoaW5nXG4gICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IHggOiB5O1xuXG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICB4LCAwLCAwLFxuICAgICAgMCwgeSwgMCxcbiAgICAgIDAsIDAsIDEsXG4gICAgICBNYXRyaXgzVHlwZS5TQ0FMSU5HICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIG1hdHJpeCB0byBhbiBhZmZpbmUgbWF0cml4IHdpdGggdGhlIHNwZWNpZmllZCByb3ctbWFqb3IgdmFsdWVzLlxuICAgKi9cbiAgcHVibGljIHNldFRvQWZmaW5lKCBtMDA6IG51bWJlciwgbTAxOiBudW1iZXIsIG0wMjogbnVtYmVyLCBtMTA6IG51bWJlciwgbTExOiBudW1iZXIsIG0xMjogbnVtYmVyICk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzLnJvd01ham9yKCBtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyLCAwLCAwLCAxLCBNYXRyaXgzVHlwZS5BRkZJTkUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSBtYXRyaXggdG8gYSByb3RhdGlvbiBkZWZpbmVkIGJ5IGEgcm90YXRpb24gb2YgdGhlIHNwZWNpZmllZCBhbmdsZSBhcm91bmQgdGhlIGdpdmVuIHVuaXQgYXhpcy5cbiAgICpcbiAgICogQHBhcmFtIGF4aXMgLSBub3JtYWxpemVkXG4gICAqIEBwYXJhbSBhbmdsZSAtIGluIHJhZGlhbnNcbiAgICovXG4gIHB1YmxpYyBzZXRUb1JvdGF0aW9uQXhpc0FuZ2xlKCBheGlzOiBWZWN0b3IzLCBhbmdsZTogbnVtYmVyICk6IHRoaXMge1xuICAgIGxldCBjID0gTWF0aC5jb3MoIGFuZ2xlICk7XG4gICAgbGV0IHMgPSBNYXRoLnNpbiggYW5nbGUgKTtcblxuICAgIC8vIEhhbmRsZSBjYXNlcyBjbG9zZSB0byAwLCBzaW5jZSB3ZSB3YW50IE1hdGguUEkvMiByb3RhdGlvbnMgKGFuZCB0aGUgbGlrZSkgdG8gYmUgZXhhY3RcbiAgICBpZiAoIE1hdGguYWJzKCBjICkgPCAxZS0xNSApIHtcbiAgICAgIGMgPSAwO1xuICAgIH1cbiAgICBpZiAoIE1hdGguYWJzKCBzICkgPCAxZS0xNSApIHtcbiAgICAgIHMgPSAwO1xuICAgIH1cblxuICAgIGNvbnN0IEMgPSAxIC0gYztcblxuICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgYXhpcy54ICogYXhpcy54ICogQyArIGMsIGF4aXMueCAqIGF4aXMueSAqIEMgLSBheGlzLnogKiBzLCBheGlzLnggKiBheGlzLnogKiBDICsgYXhpcy55ICogcyxcbiAgICAgIGF4aXMueSAqIGF4aXMueCAqIEMgKyBheGlzLnogKiBzLCBheGlzLnkgKiBheGlzLnkgKiBDICsgYywgYXhpcy55ICogYXhpcy56ICogQyAtIGF4aXMueCAqIHMsXG4gICAgICBheGlzLnogKiBheGlzLnggKiBDIC0gYXhpcy55ICogcywgYXhpcy56ICogYXhpcy55ICogQyArIGF4aXMueCAqIHMsIGF4aXMueiAqIGF4aXMueiAqIEMgKyBjLFxuICAgICAgTWF0cml4M1R5cGUuT1RIRVIgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIGEgcm90YXRpb24gYXJvdW5kIHRoZSB4IGF4aXMgKGluIHRoZSB5eiBwbGFuZSkuXG4gICAqXG4gICAqIEBwYXJhbSBhbmdsZSAtIGluIHJhZGlhbnNcbiAgICovXG4gIHB1YmxpYyBzZXRUb1JvdGF0aW9uWCggYW5nbGU6IG51bWJlciApOiB0aGlzIHtcbiAgICBsZXQgYyA9IE1hdGguY29zKCBhbmdsZSApO1xuICAgIGxldCBzID0gTWF0aC5zaW4oIGFuZ2xlICk7XG5cbiAgICAvLyBIYW5kbGUgY2FzZXMgY2xvc2UgdG8gMCwgc2luY2Ugd2Ugd2FudCBNYXRoLlBJLzIgcm90YXRpb25zIChhbmQgdGhlIGxpa2UpIHRvIGJlIGV4YWN0XG4gICAgaWYgKCBNYXRoLmFicyggYyApIDwgMWUtMTUgKSB7XG4gICAgICBjID0gMDtcbiAgICB9XG4gICAgaWYgKCBNYXRoLmFicyggcyApIDwgMWUtMTUgKSB7XG4gICAgICBzID0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yb3dNYWpvcihcbiAgICAgIDEsIDAsIDAsXG4gICAgICAwLCBjLCAtcyxcbiAgICAgIDAsIHMsIGMsXG4gICAgICBNYXRyaXgzVHlwZS5PVEhFUiApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhpcyBtYXRyaXggdG8gYSByb3RhdGlvbiBhcm91bmQgdGhlIHkgYXhpcyAoaW4gdGhlIHh6IHBsYW5lKS5cbiAgICpcbiAgICogQHBhcmFtIGFuZ2xlIC0gaW4gcmFkaWFuc1xuICAgKi9cbiAgcHVibGljIHNldFRvUm90YXRpb25ZKCBhbmdsZTogbnVtYmVyICk6IHRoaXMge1xuICAgIGxldCBjID0gTWF0aC5jb3MoIGFuZ2xlICk7XG4gICAgbGV0IHMgPSBNYXRoLnNpbiggYW5nbGUgKTtcblxuICAgIC8vIEhhbmRsZSBjYXNlcyBjbG9zZSB0byAwLCBzaW5jZSB3ZSB3YW50IE1hdGguUEkvMiByb3RhdGlvbnMgKGFuZCB0aGUgbGlrZSkgdG8gYmUgZXhhY3RcbiAgICBpZiAoIE1hdGguYWJzKCBjICkgPCAxZS0xNSApIHtcbiAgICAgIGMgPSAwO1xuICAgIH1cbiAgICBpZiAoIE1hdGguYWJzKCBzICkgPCAxZS0xNSApIHtcbiAgICAgIHMgPSAwO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgYywgMCwgcyxcbiAgICAgIDAsIDEsIDAsXG4gICAgICAtcywgMCwgYyxcbiAgICAgIE1hdHJpeDNUeXBlLk9USEVSICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIG1hdHJpeCB0byBhIHJvdGF0aW9uIGFyb3VuZCB0aGUgeiBheGlzIChpbiB0aGUgeHkgcGxhbmUpLlxuICAgKlxuICAgKiBAcGFyYW0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqL1xuICBwdWJsaWMgc2V0VG9Sb3RhdGlvblooIGFuZ2xlOiBudW1iZXIgKTogdGhpcyB7XG4gICAgbGV0IGMgPSBNYXRoLmNvcyggYW5nbGUgKTtcbiAgICBsZXQgcyA9IE1hdGguc2luKCBhbmdsZSApO1xuXG4gICAgLy8gSGFuZGxlIGNhc2VzIGNsb3NlIHRvIDAsIHNpbmNlIHdlIHdhbnQgTWF0aC5QSS8yIHJvdGF0aW9ucyAoYW5kIHRoZSBsaWtlKSB0byBiZSBleGFjdFxuICAgIGlmICggTWF0aC5hYnMoIGMgKSA8IDFlLTE1ICkge1xuICAgICAgYyA9IDA7XG4gICAgfVxuICAgIGlmICggTWF0aC5hYnMoIHMgKSA8IDFlLTE1ICkge1xuICAgICAgcyA9IDA7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICBjLCAtcywgMCxcbiAgICAgIHMsIGMsIDAsXG4gICAgICAwLCAwLCAxLFxuICAgICAgTWF0cml4M1R5cGUuQUZGSU5FICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGlzIG1hdHJpeCB0byB0aGUgY29tYmluZWQgdHJhbnNsYXRpb24rcm90YXRpb24gKHdoZXJlIHRoZSByb3RhdGlvbiBsb2dpY2FsbHkgd291bGQgaGFwcGVuIGZpcnN0LCBUSEVOIGl0XG4gICAqIHdvdWxkIGJlIHRyYW5zbGF0ZWQpLlxuICAgKlxuICAgKiBAcGFyYW0geFxuICAgKiBAcGFyYW0geVxuICAgKiBAcGFyYW0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqL1xuICBwdWJsaWMgc2V0VG9UcmFuc2xhdGlvblJvdGF0aW9uKCB4OiBudW1iZXIsIHk6IG51bWJlciwgYW5nbGU6IG51bWJlciApOiB0aGlzIHtcbiAgICBsZXQgYyA9IE1hdGguY29zKCBhbmdsZSApO1xuICAgIGxldCBzID0gTWF0aC5zaW4oIGFuZ2xlICk7XG5cbiAgICAvLyBIYW5kbGUgY2FzZXMgY2xvc2UgdG8gMCwgc2luY2Ugd2Ugd2FudCBNYXRoLlBJLzIgcm90YXRpb25zIChhbmQgdGhlIGxpa2UpIHRvIGJlIGV4YWN0XG4gICAgaWYgKCBNYXRoLmFicyggYyApIDwgMWUtMTUgKSB7XG4gICAgICBjID0gMDtcbiAgICB9XG4gICAgaWYgKCBNYXRoLmFicyggcyApIDwgMWUtMTUgKSB7XG4gICAgICBzID0gMDtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5yb3dNYWpvcihcbiAgICAgIGMsIC1zLCB4LFxuICAgICAgcywgYywgeSxcbiAgICAgIDAsIDAsIDEsXG4gICAgICBNYXRyaXgzVHlwZS5BRkZJTkUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIHRoZSBjb21iaW5lZCB0cmFuc2xhdGlvbityb3RhdGlvbiAod2hlcmUgdGhlIHJvdGF0aW9uIGxvZ2ljYWxseSB3b3VsZCBoYXBwZW4gZmlyc3QsIFRIRU4gaXRcbiAgICogd291bGQgYmUgdHJhbnNsYXRlZCkuXG4gICAqXG4gICAqIEBwYXJhbSB0cmFuc2xhdGlvblxuICAgKiBAcGFyYW0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqL1xuICBwdWJsaWMgc2V0VG9UcmFuc2xhdGlvblJvdGF0aW9uUG9pbnQoIHRyYW5zbGF0aW9uOiBWZWN0b3IyLCBhbmdsZTogbnVtYmVyICk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzLnNldFRvVHJhbnNsYXRpb25Sb3RhdGlvbiggdHJhbnNsYXRpb24ueCwgdHJhbnNsYXRpb24ueSwgYW5nbGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIHRoZSB2YWx1ZXMgY29udGFpbmVkIGluIGFuIFNWR01hdHJpeC5cbiAgICovXG4gIHB1YmxpYyBzZXRUb1NWR01hdHJpeCggc3ZnTWF0cml4OiBTVkdNYXRyaXggKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXMucm93TWFqb3IoXG4gICAgICBzdmdNYXRyaXguYSwgc3ZnTWF0cml4LmMsIHN2Z01hdHJpeC5lLFxuICAgICAgc3ZnTWF0cml4LmIsIHN2Z01hdHJpeC5kLCBzdmdNYXRyaXguZixcbiAgICAgIDAsIDAsIDEsXG4gICAgICBNYXRyaXgzVHlwZS5BRkZJTkUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoaXMgbWF0cml4IHRvIGEgcm90YXRpb24gbWF0cml4IHRoYXQgcm90YXRlcyBBIHRvIEIgKFZlY3RvcjMgaW5zdGFuY2VzKSwgYnkgcm90YXRpbmcgYWJvdXQgdGhlIGF4aXNcbiAgICogQS5jcm9zcyggQiApIC0tIFNob3J0ZXN0IHBhdGguIGlkZWFsbHkgc2hvdWxkIGJlIHVuaXQgdmVjdG9ycy5cbiAgICovXG4gIHB1YmxpYyBzZXRSb3RhdGlvbkFUb0IoIGE6IFZlY3RvcjMsIGI6IFZlY3RvcjMgKTogdGhpcyB7XG4gICAgLy8gc2VlIGh0dHA6Ly9ncmFwaGljcy5jcy5icm93bi5lZHUvfmpmaC9wYXBlcnMvTW9sbGVyLUVCQS0xOTk5L3BhcGVyLnBkZiBmb3IgaW5mb3JtYXRpb24gb24gdGhpcyBpbXBsZW1lbnRhdGlvblxuICAgIGNvbnN0IHN0YXJ0ID0gYTtcbiAgICBjb25zdCBlbmQgPSBiO1xuXG4gICAgY29uc3QgZXBzaWxvbiA9IDAuMDAwMTtcblxuICAgIGxldCB2ID0gc3RhcnQuY3Jvc3MoIGVuZCApO1xuICAgIGNvbnN0IGUgPSBzdGFydC5kb3QoIGVuZCApO1xuICAgIGNvbnN0IGYgPSAoIGUgPCAwICkgPyAtZSA6IGU7XG5cbiAgICAvLyBpZiBcImZyb21cIiBhbmQgXCJ0b1wiIHZlY3RvcnMgYXJlIG5lYXJseSBwYXJhbGxlbFxuICAgIGlmICggZiA+IDEuMCAtIGVwc2lsb24gKSB7XG4gICAgICBsZXQgeCA9IG5ldyBWZWN0b3IzKFxuICAgICAgICAoIHN0YXJ0LnggPiAwLjAgKSA/IHN0YXJ0LnggOiAtc3RhcnQueCxcbiAgICAgICAgKCBzdGFydC55ID4gMC4wICkgPyBzdGFydC55IDogLXN0YXJ0LnksXG4gICAgICAgICggc3RhcnQueiA+IDAuMCApID8gc3RhcnQueiA6IC1zdGFydC56XG4gICAgICApO1xuXG4gICAgICBpZiAoIHgueCA8IHgueSApIHtcbiAgICAgICAgaWYgKCB4LnggPCB4LnogKSB7XG4gICAgICAgICAgeCA9IFZlY3RvcjMuWF9VTklUO1xuICAgICAgICB9XG4gICAgICAgIGVsc2Uge1xuICAgICAgICAgIHggPSBWZWN0b3IzLlpfVU5JVDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgZWxzZSB7XG4gICAgICAgIGlmICggeC55IDwgeC56ICkge1xuICAgICAgICAgIHggPSBWZWN0b3IzLllfVU5JVDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICB4ID0gVmVjdG9yMy5aX1VOSVQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgdSA9IHgubWludXMoIHN0YXJ0ICk7XG4gICAgICB2ID0geC5taW51cyggZW5kICk7XG5cbiAgICAgIGNvbnN0IGMxID0gMi4wIC8gdS5kb3QoIHUgKTtcbiAgICAgIGNvbnN0IGMyID0gMi4wIC8gdi5kb3QoIHYgKTtcbiAgICAgIGNvbnN0IGMzID0gYzEgKiBjMiAqIHUuZG90KCB2ICk7XG5cbiAgICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgICAtYzEgKiB1LnggKiB1LnggLSBjMiAqIHYueCAqIHYueCArIGMzICogdi54ICogdS54ICsgMSxcbiAgICAgICAgLWMxICogdS54ICogdS55IC0gYzIgKiB2LnggKiB2LnkgKyBjMyAqIHYueCAqIHUueSxcbiAgICAgICAgLWMxICogdS54ICogdS56IC0gYzIgKiB2LnggKiB2LnogKyBjMyAqIHYueCAqIHUueixcbiAgICAgICAgLWMxICogdS55ICogdS54IC0gYzIgKiB2LnkgKiB2LnggKyBjMyAqIHYueSAqIHUueCxcbiAgICAgICAgLWMxICogdS55ICogdS55IC0gYzIgKiB2LnkgKiB2LnkgKyBjMyAqIHYueSAqIHUueSArIDEsXG4gICAgICAgIC1jMSAqIHUueSAqIHUueiAtIGMyICogdi55ICogdi56ICsgYzMgKiB2LnkgKiB1LnosXG4gICAgICAgIC1jMSAqIHUueiAqIHUueCAtIGMyICogdi56ICogdi54ICsgYzMgKiB2LnogKiB1LngsXG4gICAgICAgIC1jMSAqIHUueiAqIHUueSAtIGMyICogdi56ICogdi55ICsgYzMgKiB2LnogKiB1LnksXG4gICAgICAgIC1jMSAqIHUueiAqIHUueiAtIGMyICogdi56ICogdi56ICsgYzMgKiB2LnogKiB1LnogKyAxXG4gICAgICApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIHRoZSBtb3N0IGNvbW1vbiBjYXNlLCB1bmxlc3MgXCJzdGFydFwiPVwiZW5kXCIsIG9yIFwic3RhcnRcIj0tXCJlbmRcIlxuICAgICAgY29uc3QgaCA9IDEuMCAvICggMS4wICsgZSApO1xuICAgICAgY29uc3QgaHZ4ID0gaCAqIHYueDtcbiAgICAgIGNvbnN0IGh2eiA9IGggKiB2Lno7XG4gICAgICBjb25zdCBodnh5ID0gaHZ4ICogdi55O1xuICAgICAgY29uc3QgaHZ4eiA9IGh2eCAqIHYuejtcbiAgICAgIGNvbnN0IGh2eXogPSBodnogKiB2Lnk7XG5cbiAgICAgIHJldHVybiB0aGlzLnJvd01ham9yKFxuICAgICAgICBlICsgaHZ4ICogdi54LCBodnh5IC0gdi56LCBodnh6ICsgdi55LFxuICAgICAgICBodnh5ICsgdi56LCBlICsgaCAqIHYueSAqIHYueSwgaHZ5eiAtIHYueCxcbiAgICAgICAgaHZ4eiAtIHYueSwgaHZ5eiArIHYueCwgZSArIGh2eiAqIHYuelxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogTXV0YWJsZSBvcGVyYXRpb25zIChjaGFuZ2VzIHRoZSBwYXJhbWV0ZXIpXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZlY3RvciB0byB0aGUgcmVzdWx0IG9mIChtYXRyaXggKiB2ZWN0b3IpLCBhcyBhIGhvbW9nZW5lb3VzIG11bHRpcGxpY2F0aW9uLlxuICAgKlxuICAgKiBAcmV0dXJucyAtIFRoZSB2ZWN0b3IgdGhhdCB3YXMgbXV0YXRlZFxuICAgKi9cbiAgcHVibGljIG11bHRpcGx5VmVjdG9yMiggdmVjdG9yMjogVmVjdG9yMiApOiBWZWN0b3IyIHtcbiAgICByZXR1cm4gdmVjdG9yMi5zZXRYWShcbiAgICAgIHRoaXMubTAwKCkgKiB2ZWN0b3IyLnggKyB0aGlzLm0wMSgpICogdmVjdG9yMi55ICsgdGhpcy5tMDIoKSxcbiAgICAgIHRoaXMubTEwKCkgKiB2ZWN0b3IyLnggKyB0aGlzLm0xMSgpICogdmVjdG9yMi55ICsgdGhpcy5tMTIoKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHZlY3RvciB0byB0aGUgcmVzdWx0IG9mIChtYXRyaXggKiB2ZWN0b3IpLlxuICAgKlxuICAgKiBAcmV0dXJucyAtIFRoZSB2ZWN0b3IgdGhhdCB3YXMgbXV0YXRlZFxuICAgKi9cbiAgcHVibGljIG11bHRpcGx5VmVjdG9yMyggdmVjdG9yMzogVmVjdG9yMyApOiBWZWN0b3IzIHtcbiAgICByZXR1cm4gdmVjdG9yMy5zZXRYWVooXG4gICAgICB0aGlzLm0wMCgpICogdmVjdG9yMy54ICsgdGhpcy5tMDEoKSAqIHZlY3RvcjMueSArIHRoaXMubTAyKCkgKiB2ZWN0b3IzLnosXG4gICAgICB0aGlzLm0xMCgpICogdmVjdG9yMy54ICsgdGhpcy5tMTEoKSAqIHZlY3RvcjMueSArIHRoaXMubTEyKCkgKiB2ZWN0b3IzLnosXG4gICAgICB0aGlzLm0yMCgpICogdmVjdG9yMy54ICsgdGhpcy5tMjEoKSAqIHZlY3RvcjMueSArIHRoaXMubTIyKCkgKiB2ZWN0b3IzLnogKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB2ZWN0b3IgdG8gdGhlIHJlc3VsdCBvZiAodHJhbnNwb3NlKG1hdHJpeCkgKiB2ZWN0b3IpLCBpZ25vcmluZyB0aGUgdHJhbnNsYXRpb24gcGFyYW1ldGVycy5cbiAgICpcbiAgICogQHJldHVybnMgLSBUaGUgdmVjdG9yIHRoYXQgd2FzIG11dGF0ZWRcbiAgICovXG4gIHB1YmxpYyBtdWx0aXBseVRyYW5zcG9zZVZlY3RvcjIoIHY6IFZlY3RvcjIgKTogVmVjdG9yMiB7XG4gICAgcmV0dXJuIHYuc2V0WFkoXG4gICAgICB0aGlzLm0wMCgpICogdi54ICsgdGhpcy5tMTAoKSAqIHYueSxcbiAgICAgIHRoaXMubTAxKCkgKiB2LnggKyB0aGlzLm0xMSgpICogdi55ICk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmVjdG9yIHRvIHRoZSByZXN1bHQgb2YgKG1hdHJpeCAqIHZlY3RvciAtIG1hdHJpeCAqIHplcm8pLiBTaW5jZSB0aGlzIGlzIGEgaG9tb2dlbmVvdXMgb3BlcmF0aW9uLCBpdCBpc1xuICAgKiBlcXVpdmFsZW50IHRvIHRoZSBtdWx0aXBsaWNhdGlvbiBvZiAoeCx5LDApLlxuICAgKlxuICAgKiBAcmV0dXJucyAtIFRoZSB2ZWN0b3IgdGhhdCB3YXMgbXV0YXRlZFxuICAgKi9cbiAgcHVibGljIG11bHRpcGx5UmVsYXRpdmVWZWN0b3IyKCB2OiBWZWN0b3IyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiB2LnNldFhZKFxuICAgICAgdGhpcy5tMDAoKSAqIHYueCArIHRoaXMubTAxKCkgKiB2LnksXG4gICAgICB0aGlzLm0xMCgpICogdi55ICsgdGhpcy5tMTEoKSAqIHYueSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHRyYW5zZm9ybSBvZiBhIENhbnZhcyAyRCByZW5kZXJpbmcgY29udGV4dCB0byB0aGUgYWZmaW5lIHBhcnQgb2YgdGhpcyBtYXRyaXhcbiAgICovXG4gIHB1YmxpYyBjYW52YXNTZXRUcmFuc2Zvcm0oIGNvbnRleHQ6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRCApOiB2b2lkIHtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybShcbiAgICAgIC8vIGlubGluZWQgYXJyYXkgZW50cmllc1xuICAgICAgdGhpcy5lbnRyaWVzWyAwIF0sXG4gICAgICB0aGlzLmVudHJpZXNbIDEgXSxcbiAgICAgIHRoaXMuZW50cmllc1sgMyBdLFxuICAgICAgdGhpcy5lbnRyaWVzWyA0IF0sXG4gICAgICB0aGlzLmVudHJpZXNbIDYgXSxcbiAgICAgIHRoaXMuZW50cmllc1sgNyBdXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmRzIHRvIHRoZSBhZmZpbmUgcGFydCBvZiB0aGlzIG1hdHJpeCB0byB0aGUgQ2FudmFzIDJEIHJlbmRlcmluZyBjb250ZXh0XG4gICAqL1xuICBwdWJsaWMgY2FudmFzQXBwZW5kVHJhbnNmb3JtKCBjb250ZXh0OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQgKTogdm9pZCB7XG4gICAgaWYgKCB0aGlzLnR5cGUgIT09IE1hdHJpeDNUeXBlLklERU5USVRZICkge1xuICAgICAgY29udGV4dC50cmFuc2Zvcm0oXG4gICAgICAgIC8vIGlubGluZWQgYXJyYXkgZW50cmllc1xuICAgICAgICB0aGlzLmVudHJpZXNbIDAgXSxcbiAgICAgICAgdGhpcy5lbnRyaWVzWyAxIF0sXG4gICAgICAgIHRoaXMuZW50cmllc1sgMyBdLFxuICAgICAgICB0aGlzLmVudHJpZXNbIDQgXSxcbiAgICAgICAgdGhpcy5lbnRyaWVzWyA2IF0sXG4gICAgICAgIHRoaXMuZW50cmllc1sgNyBdXG4gICAgICApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDb3BpZXMgdGhlIGVudHJpZXMgb2YgdGhpcyBtYXRyaXggb3ZlciB0byBhbiBhcmJpdHJhcnkgYXJyYXkgKHR5cGVkIG9yIG5vcm1hbCkuXG4gICAqL1xuICBwdWJsaWMgY29weVRvQXJyYXkoIGFycmF5OiBudW1iZXJbXSB8IEZsb2F0MzJBcnJheSB8IEZsb2F0NjRBcnJheSApOiBudW1iZXJbXSB8IEZsb2F0MzJBcnJheSB8IEZsb2F0NjRBcnJheSB7XG4gICAgYXJyYXlbIDAgXSA9IHRoaXMubTAwKCk7XG4gICAgYXJyYXlbIDEgXSA9IHRoaXMubTEwKCk7XG4gICAgYXJyYXlbIDIgXSA9IHRoaXMubTIwKCk7XG4gICAgYXJyYXlbIDMgXSA9IHRoaXMubTAxKCk7XG4gICAgYXJyYXlbIDQgXSA9IHRoaXMubTExKCk7XG4gICAgYXJyYXlbIDUgXSA9IHRoaXMubTIxKCk7XG4gICAgYXJyYXlbIDYgXSA9IHRoaXMubTAyKCk7XG4gICAgYXJyYXlbIDcgXSA9IHRoaXMubTEyKCk7XG4gICAgYXJyYXlbIDggXSA9IHRoaXMubTIyKCk7XG4gICAgcmV0dXJuIGFycmF5O1xuICB9XG5cbiAgcHVibGljIGZyZWVUb1Bvb2woKTogdm9pZCB7XG4gICAgTWF0cml4My5wb29sLmZyZWVUb1Bvb2woIHRoaXMgKTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgcG9vbCA9IG5ldyBQb29sKCBNYXRyaXgzLCB7XG4gICAgaW5pdGlhbGl6ZTogTWF0cml4My5wcm90b3R5cGUucm93TWFqb3IsXG4gICAgdXNlRGVmYXVsdENvbnN0cnVjdGlvbjogdHJ1ZSxcbiAgICBtYXhTaXplOiAzMDBcbiAgfSApO1xuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGlkZW50aXR5IG1hdHJpeC5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpdHkoKTogTWF0cml4MyB7XG4gICAgcmV0dXJuIGZyb21Qb29sKCkuc2V0VG9JZGVudGl0eSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB0cmFuc2xhdGlvbiBtYXRyaXguXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHRyYW5zbGF0aW9uKCB4OiBudW1iZXIsIHk6IG51bWJlciApOiBNYXRyaXgzIHtcbiAgICByZXR1cm4gZnJvbVBvb2woKS5zZXRUb1RyYW5zbGF0aW9uKCB4LCB5ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHRyYW5zbGF0aW9uIG1hdHJpeCBjb21wdXRlZCBmcm9tIGEgdmVjdG9yLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyB0cmFuc2xhdGlvbkZyb21WZWN0b3IoIHZlY3RvcjogVmVjdG9yMiB8IFZlY3RvcjMgKTogTWF0cml4MyB7XG4gICAgcmV0dXJuIE1hdHJpeDMudHJhbnNsYXRpb24oIHZlY3Rvci54LCB2ZWN0b3IueSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCBzY2FsZXMgdGhpbmdzIGluIGVhY2ggZGltZW5zaW9uLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzY2FsaW5nKCB4OiBudW1iZXIsIHk/OiBudW1iZXIgKTogTWF0cml4MyB7XG4gICAgcmV0dXJuIGZyb21Qb29sKCkuc2V0VG9TY2FsZSggeCwgeSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCBzY2FsZXMgdGhpbmdzIGluIGVhY2ggZGltZW5zaW9uLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBzY2FsZSggeDogbnVtYmVyLCB5PzogbnVtYmVyICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBNYXRyaXgzLnNjYWxpbmcoIHgsIHkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGFuIGFmZmluZSBtYXRyaXggd2l0aCB0aGUgZ2l2ZW4gcGFyYW1ldGVycy5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgYWZmaW5lKCBtMDA6IG51bWJlciwgbTAxOiBudW1iZXIsIG0wMjogbnVtYmVyLCBtMTA6IG51bWJlciwgbTExOiBudW1iZXIsIG0xMjogbnVtYmVyICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBmcm9tUG9vbCgpLnNldFRvQWZmaW5lKCBtMDAsIG0wMSwgbTAyLCBtMTAsIG0xMSwgbTEyICk7XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBtYXRyaXggd2l0aCBhbGwgZW50cmllcyBkZXRlcm1pbmVkIGluIHJvdy1tYWpvciBvcmRlci5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcm93TWFqb3IoIHYwMDogbnVtYmVyLCB2MDE6IG51bWJlciwgdjAyOiBudW1iZXIsIHYxMDogbnVtYmVyLCB2MTE6IG51bWJlciwgdjEyOiBudW1iZXIsIHYyMDogbnVtYmVyLCB2MjE6IG51bWJlciwgdjIyOiBudW1iZXIsIHR5cGU/OiBNYXRyaXgzVHlwZSApOiBNYXRyaXgzIHtcbiAgICByZXR1cm4gZnJvbVBvb2woKS5yb3dNYWpvcihcbiAgICAgIHYwMCwgdjAxLCB2MDIsXG4gICAgICB2MTAsIHYxMSwgdjEyLFxuICAgICAgdjIwLCB2MjEsIHYyMixcbiAgICAgIHR5cGVcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtYXRyaXggcm90YXRpb24gZGVmaW5lZCBieSBhIHJvdGF0aW9uIG9mIHRoZSBzcGVjaWZpZWQgYW5nbGUgYXJvdW5kIHRoZSBnaXZlbiB1bml0IGF4aXMuXG4gICAqXG4gICAqIEBwYXJhbSBheGlzIC0gbm9ybWFsaXplZFxuICAgKiBAcGFyYW0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHJvdGF0aW9uQXhpc0FuZ2xlKCBheGlzOiBWZWN0b3IzLCBhbmdsZTogbnVtYmVyICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBmcm9tUG9vbCgpLnNldFRvUm90YXRpb25BeGlzQW5nbGUoIGF4aXMsIGFuZ2xlICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG1hdHJpeCB0aGF0IHJvdGF0ZXMgYXJvdW5kIHRoZSB4IGF4aXMgKGluIHRoZSB5eiBwbGFuZSkuXG4gICAqXG4gICAqIEBwYXJhbSBhbmdsZSAtIGluIHJhZGlhbnNcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcm90YXRpb25YKCBhbmdsZTogbnVtYmVyICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBmcm9tUG9vbCgpLnNldFRvUm90YXRpb25YKCBhbmdsZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtYXRyaXggdGhhdCByb3RhdGVzIGFyb3VuZCB0aGUgeSBheGlzIChpbiB0aGUgeHogcGxhbmUpLlxuICAgKlxuICAgKiBAcGFyYW0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHJvdGF0aW9uWSggYW5nbGU6IG51bWJlciApOiBNYXRyaXgzIHtcbiAgICByZXR1cm4gZnJvbVBvb2woKS5zZXRUb1JvdGF0aW9uWSggYW5nbGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbWF0cml4IHRoYXQgcm90YXRlcyBhcm91bmQgdGhlIHogYXhpcyAoaW4gdGhlIHh5IHBsYW5lKS5cbiAgICpcbiAgICogQHBhcmFtIGFuZ2xlIC0gaW4gcmFkaWFuc1xuICAgKi9cbiAgcHVibGljIHN0YXRpYyByb3RhdGlvblooIGFuZ2xlOiBudW1iZXIgKTogTWF0cml4MyB7XG4gICAgcmV0dXJuIGZyb21Qb29sKCkuc2V0VG9Sb3RhdGlvblooIGFuZ2xlICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIGNvbWJpbmVkIDJkIHRyYW5zbGF0aW9uICsgcm90YXRpb24gKHdpdGggdGhlIHJvdGF0aW9uIGVmZmVjdGl2ZWx5IGFwcGxpZWQgZmlyc3QpLlxuICAgKlxuICAgKiBAcGFyYW0gYW5nbGUgLSBpbiByYWRpYW5zXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHRyYW5zbGF0aW9uUm90YXRpb24oIHg6IG51bWJlciwgeTogbnVtYmVyLCBhbmdsZTogbnVtYmVyICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBmcm9tUG9vbCgpLnNldFRvVHJhbnNsYXRpb25Sb3RhdGlvbiggeCwgeSwgYW5nbGUgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFuZGFyZCAyZCByb3RhdGlvbiBtYXRyaXggZm9yIGEgZ2l2ZW4gYW5nbGUuXG4gICAqXG4gICAqIEBwYXJhbSBhbmdsZSAtIGluIHJhZGlhbnNcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcm90YXRpb24yKCBhbmdsZTogbnVtYmVyICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBmcm9tUG9vbCgpLnNldFRvUm90YXRpb25aKCBhbmdsZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBtYXRyaXggd2hpY2ggd2lsbCBiZSBhIDJkIHJvdGF0aW9uIGFyb3VuZCBhIGdpdmVuIHgseSBwb2ludC5cbiAgICpcbiAgICogQHBhcmFtIGFuZ2xlIC0gaW4gcmFkaWFuc1xuICAgKiBAcGFyYW0geFxuICAgKiBAcGFyYW0geVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByb3RhdGlvbkFyb3VuZCggYW5nbGU6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIgKTogTWF0cml4MyB7XG4gICAgcmV0dXJuIE1hdHJpeDMudHJhbnNsYXRpb24oIHgsIHkgKS50aW1lc01hdHJpeCggTWF0cml4My5yb3RhdGlvbjIoIGFuZ2xlICkgKS50aW1lc01hdHJpeCggTWF0cml4My50cmFuc2xhdGlvbiggLXgsIC15ICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbWF0cml4IHdoaWNoIHdpbGwgYmUgYSAyZCByb3RhdGlvbiBhcm91bmQgYSBnaXZlbiAyZCBwb2ludC5cbiAgICpcbiAgICogQHBhcmFtIGFuZ2xlIC0gaW4gcmFkaWFuc1xuICAgKiBAcGFyYW0gcG9pbnRcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcm90YXRpb25Bcm91bmRQb2ludCggYW5nbGU6IG51bWJlciwgcG9pbnQ6IFZlY3RvcjIgKTogTWF0cml4MyB7XG4gICAgcmV0dXJuIE1hdHJpeDMucm90YXRpb25Bcm91bmQoIGFuZ2xlLCBwb2ludC54LCBwb2ludC55ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIG1hdHJpeCBlcXVpdmFsZW50IHRvIGEgZ2l2ZW4gU1ZHTWF0cml4LlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tU1ZHTWF0cml4KCBzdmdNYXRyaXg6IFNWR01hdHJpeCApOiBNYXRyaXgzIHtcbiAgICByZXR1cm4gZnJvbVBvb2woKS5zZXRUb1NWR01hdHJpeCggc3ZnTWF0cml4ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHJvdGF0aW9uIG1hdHJpeCB0aGF0IHJvdGF0ZXMgQSB0byBCLCBieSByb3RhdGluZyBhYm91dCB0aGUgYXhpcyBBLmNyb3NzKCBCICkgLS0gU2hvcnRlc3QgcGF0aC4gaWRlYWxseVxuICAgKiBzaG91bGQgYmUgdW5pdCB2ZWN0b3JzLlxuICAgKi9cbiAgcHVibGljIHN0YXRpYyByb3RhdGVBVG9CKCBhOiBWZWN0b3IzLCBiOiBWZWN0b3IzICk6IE1hdHJpeDMge1xuICAgIHJldHVybiBmcm9tUG9vbCgpLnNldFJvdGF0aW9uQVRvQiggYSwgYiApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3J0Y3V0IGZvciB0cmFuc2xhdGlvbiB0aW1lcyBhIG1hdHJpeCAod2l0aG91dCBhbGxvY2F0aW5nIGEgdHJhbnNsYXRpb24gbWF0cml4KSwgc2VlIHNjZW5lcnkjMTE5XG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHRyYW5zbGF0aW9uVGltZXNNYXRyaXgoIHg6IG51bWJlciwgeTogbnVtYmVyLCBtYXRyaXg6IE1hdHJpeDMgKTogTWF0cml4MyB7XG4gICAgbGV0IHR5cGU7XG4gICAgaWYgKCBtYXRyaXgudHlwZSA9PT0gTWF0cml4M1R5cGUuSURFTlRJVFkgfHwgbWF0cml4LnR5cGUgPT09IE1hdHJpeDNUeXBlLlRSQU5TTEFUSU9OXzJEICkge1xuICAgICAgcmV0dXJuIG0zKFxuICAgICAgICAxLCAwLCBtYXRyaXgubTAyKCkgKyB4LFxuICAgICAgICAwLCAxLCBtYXRyaXgubTEyKCkgKyB5LFxuICAgICAgICAwLCAwLCAxLFxuICAgICAgICBNYXRyaXgzVHlwZS5UUkFOU0xBVElPTl8yRCApO1xuICAgIH1cbiAgICBlbHNlIGlmICggbWF0cml4LnR5cGUgPT09IE1hdHJpeDNUeXBlLk9USEVSICkge1xuICAgICAgdHlwZSA9IE1hdHJpeDNUeXBlLk9USEVSO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHR5cGUgPSBNYXRyaXgzVHlwZS5BRkZJTkU7XG4gICAgfVxuICAgIHJldHVybiBtMyhcbiAgICAgIG1hdHJpeC5tMDAoKSwgbWF0cml4Lm0wMSgpLCBtYXRyaXgubTAyKCkgKyB4LFxuICAgICAgbWF0cml4Lm0xMCgpLCBtYXRyaXgubTExKCksIG1hdHJpeC5tMTIoKSArIHksXG4gICAgICBtYXRyaXgubTIwKCksIG1hdHJpeC5tMjEoKSwgbWF0cml4Lm0yMigpLFxuICAgICAgdHlwZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlcmlhbGl6ZSB0byBhbiBPYmplY3QgdGhhdCBjYW4gYmUgaGFuZGxlZCBieSBQaEVULWlPXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHRvU3RhdGVPYmplY3QoIG1hdHJpeDM6IE1hdHJpeDMgKTogTWF0cml4M1N0YXRlT2JqZWN0IHtcbiAgICByZXR1cm4ge1xuICAgICAgZW50cmllczogbWF0cml4My5lbnRyaWVzLFxuICAgICAgdHlwZTogbWF0cml4My50eXBlLm5hbWVcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYmFjayBmcm9tIGEgc2VyaWFsaXplZCBPYmplY3QgdG8gYSBNYXRyaXgzXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIGZyb21TdGF0ZU9iamVjdCggc3RhdGVPYmplY3Q6IE1hdHJpeDNTdGF0ZU9iamVjdCApOiBNYXRyaXgzIHtcbiAgICBjb25zdCBtYXRyaXggPSBNYXRyaXgzLmlkZW50aXR5KCk7XG4gICAgbWF0cml4LmVudHJpZXMgPSBzdGF0ZU9iamVjdC5lbnRyaWVzO1xuICAgIG1hdHJpeC50eXBlID0gTWF0cml4M1R5cGUuZW51bWVyYXRpb24uZ2V0VmFsdWUoIHN0YXRlT2JqZWN0LnR5cGUgKTtcbiAgICByZXR1cm4gbWF0cml4O1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBJREVOVElUWTogTWF0cml4MzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSB1cHBlcmNhc2Utc3RhdGljcy1zaG91bGQtYmUtcmVhZG9ubHlcbiAgcHVibGljIHN0YXRpYyBYX1JFRkxFQ1RJT046IE1hdHJpeDM7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgdXBwZXJjYXNlLXN0YXRpY3Mtc2hvdWxkLWJlLXJlYWRvbmx5XG4gIHB1YmxpYyBzdGF0aWMgWV9SRUZMRUNUSU9OOiBNYXRyaXgzOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHVwcGVyY2FzZS1zdGF0aWNzLXNob3VsZC1iZS1yZWFkb25seVxuICBwdWJsaWMgc3RhdGljIE1hdHJpeDNJTzogSU9UeXBlO1xufVxuXG5kb3QucmVnaXN0ZXIoICdNYXRyaXgzJywgTWF0cml4MyApO1xuXG5jb25zdCBtMyA9IE1hdHJpeDMucG9vbC5jcmVhdGUuYmluZCggTWF0cml4My5wb29sICk7XG5kb3QucmVnaXN0ZXIoICdtMycsIG0zICk7XG5cbmNvbnN0IGZyb21Qb29sID0gTWF0cml4My5wb29sLmZldGNoLmJpbmQoIE1hdHJpeDMucG9vbCApO1xuXG5NYXRyaXgzLklERU5USVRZID0gTWF0cml4My5pZGVudGl0eSgpLm1ha2VJbW11dGFibGUoKTtcbk1hdHJpeDMuWF9SRUZMRUNUSU9OID0gbTMoXG4gIC0xLCAwLCAwLFxuICAwLCAxLCAwLFxuICAwLCAwLCAxLFxuICBNYXRyaXgzVHlwZS5BRkZJTkVcbikubWFrZUltbXV0YWJsZSgpO1xuTWF0cml4My5ZX1JFRkxFQ1RJT04gPSBtMyhcbiAgMSwgMCwgMCxcbiAgMCwgLTEsIDAsXG4gIDAsIDAsIDEsXG4gIE1hdHJpeDNUeXBlLkFGRklORVxuKS5tYWtlSW1tdXRhYmxlKCk7XG5cbk1hdHJpeDMuTWF0cml4M0lPID0gbmV3IElPVHlwZSggJ01hdHJpeDNJTycsIHtcbiAgdmFsdWVUeXBlOiBNYXRyaXgzLFxuICBkb2N1bWVudGF0aW9uOiAnQSAzeDMgbWF0cml4IG9mdGVuIHVzZWQgZm9yIGhvbGRpbmcgdHJhbnNmb3JtIGRhdGEuJyxcbiAgdG9TdGF0ZU9iamVjdDogKCBtYXRyaXgzOiBNYXRyaXgzICkgPT4gTWF0cml4My50b1N0YXRlT2JqZWN0KCBtYXRyaXgzICksXG4gIGZyb21TdGF0ZU9iamVjdDogTWF0cml4My5mcm9tU3RhdGVPYmplY3QsXG4gIHN0YXRlU2NoZW1hOiB7XG4gICAgZW50cmllczogQXJyYXlJTyggTnVtYmVySU8gKSxcbiAgICB0eXBlOiBFbnVtZXJhdGlvbklPKCBNYXRyaXgzVHlwZSApXG4gIH1cbn0gKTtcbiJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxPQUFPQSxh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Q0FBQzlDLGNBQWMsRUFBRTtRQUMzQixJQUFLOEMsR0FBRyxLQUFLLENBQUMsRUFBRztVQUNmLE9BQU9QLEVBQUUsQ0FDUCxDQUFFLENBQUMsSUFBSSxDQUFDbkQsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ksR0FBRyxFQUFFLElBQUt1RCxHQUFHLEVBQzVELENBQUUsSUFBSSxDQUFDN0QsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNOLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ08sR0FBRyxFQUFFLElBQUt1RCxHQUFHLEVBQzNELENBQUUsQ0FBQyxJQUFJLENBQUM3RCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNFLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSSxHQUFHLEVBQUUsSUFBSzBELEdBQUcsRUFDNUQsQ0FBRSxJQUFJLENBQUMxRCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNDLEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0gsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSyxHQUFHLEVBQUUsSUFBS3VELEdBQUcsRUFDM0QsQ0FBRSxDQUFDLElBQUksQ0FBQzdELEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0ksR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDTixHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNRLEdBQUcsRUFBRSxJQUFLdUQsR0FBRyxFQUM1RCxDQUFFLElBQUksQ0FBQzdELEdBQUcsRUFBRSxHQUFHLElBQUksQ0FBQ0MsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDSCxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNLLEdBQUcsRUFBRSxJQUFLMEQsR0FBRyxFQUMzRCxDQUFFLENBQUMsSUFBSSxDQUFDM0QsR0FBRyxFQUFFLEdBQUcsSUFBSSxDQUFDRSxHQUFHLEVBQUUsR0FBRyxJQUFJLENBQUNILEdB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/MatrixOps3.js
// Copyright 2015-2020, University of Colorado Boulder

/**
 * Fast 3x3 matrix computations at the lower level, including an SVD implementation that is fully stable.
 * Overall, it uses a heavily mutable style, passing in the object where the result(s) will be stored.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



/*
 * Matrices are stored as flat typed arrays with row-major indices. For example, for a 3x3:
 * [0] [1] [2]
 * [3] [4] [5]
 * [6] [7] [8]
 *
 * NOTE: We assume the typed arrays are AT LEAST as long as necessary (but could be longer). This allows us to use
 * an array as big as the largest one we'll need.
 */

// constants
const SQRT_HALF = Math.sqrt(0.5);
const MatrixOps3 = {
  // use typed arrays if possible
  Array: js_dot.FastArray,
  /*---------------------------------------------------------------------------*
   * 3x3 matrix math
   *----------------------------------------------------------------------------*/

  /*
   * From 0-indexed row and column indices, returns the index into the flat array
   *
   * @param {number} row
   * @param {number} col
   */
  index3(row, col) {
    assert && assert(row >= 0 && row < 3);
    assert && assert(col >= 0 && col < 3);
    return 3 * row + col;
  },
  /*
   * Copies one matrix into another
   *
   * @param {FastMath.Array} matrix - [input] 3x3 Matrix
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   */
  set3(matrix, result) {
    assert && assert(matrix.length >= 9);
    assert && assert(result.length >= 9);
    result[0] = matrix[0];
    result[1] = matrix[1];
    result[2] = matrix[2];
    result[3] = matrix[3];
    result[4] = matrix[4];
    result[5] = matrix[5];
    result[6] = matrix[6];
    result[7] = matrix[7];
    result[8] = matrix[8];
  },
  /*
   * Writes the transpose of the input matrix into the result matrix (in-place modification is OK)
   *
   * @param {FastMath.Array} matrix - [input] 3x3 Matrix
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   */
  transpose3(matrix, result) {
    assert && assert(matrix.length >= 9);
    assert && assert(result.length >= 9);
    const m1 = matrix[3];
    const m2 = matrix[6];
    const m3 = matrix[1];
    const m5 = matrix[7];
    const m6 = matrix[2];
    const m7 = matrix[5];
    result[0] = matrix[0];
    result[1] = m1;
    result[2] = m2;
    result[3] = m3;
    result[4] = matrix[4];
    result[5] = m5;
    result[6] = m6;
    result[7] = m7;
    result[8] = matrix[8];
  },
  /*
   * The determinant of a 3x3 matrix
   *
   * @param {FastMath.Array} matrix - [input] 3x3 Matrix
   * @returns {number} - The determinant. 0 indicates a singular (non-invertible) matrix.
   */
  det3(matrix) {
    assert && assert(matrix.length >= 9);
    return matrix[0] * matrix[4] * matrix[8] + matrix[1] * matrix[5] * matrix[6] + matrix[2] * matrix[3] * matrix[7] - matrix[2] * matrix[4] * matrix[6] - matrix[1] * matrix[3] * matrix[8] - matrix[0] * matrix[5] * matrix[7];
  },
  /*
   * Writes the matrix multiplication ( left * right ) into result. (in-place modification is OK)
   *
   * @param {FastMath.Array} left - [input] 3x3 Matrix
   * @param {FastMath.Array} right - [input] 3x3 Matrix
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   */
  mult3(left, right, result) {
    assert && assert(left.length >= 9);
    assert && assert(right.length >= 9);
    assert && assert(result.length >= 9);
    const m0 = left[0] * right[0] + left[1] * right[3] + left[2] * right[6];
    const m1 = left[0] * right[1] + left[1] * right[4] + left[2] * right[7];
    const m2 = left[0] * right[2] + left[1] * right[5] + left[2] * right[8];
    const m3 = left[3] * right[0] + left[4] * right[3] + left[5] * right[6];
    const m4 = left[3] * right[1] + left[4] * right[4] + left[5] * right[7];
    const m5 = left[3] * right[2] + left[4] * right[5] + left[5] * right[8];
    const m6 = left[6] * right[0] + left[7] * right[3] + left[8] * right[6];
    const m7 = left[6] * right[1] + left[7] * right[4] + left[8] * right[7];
    const m8 = left[6] * right[2] + left[7] * right[5] + left[8] * right[8];
    result[0] = m0;
    result[1] = m1;
    result[2] = m2;
    result[3] = m3;
    result[4] = m4;
    result[5] = m5;
    result[6] = m6;
    result[7] = m7;
    result[8] = m8;
  },
  /*
   * Writes the matrix multiplication ( transpose( left ) * right ) into result. (in-place modification is OK)
   *
   * @param {FastMath.Array} left - [input] 3x3 Matrix
   * @param {FastMath.Array} right - [input] 3x3 Matrix
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   */
  mult3LeftTranspose(left, right, result) {
    assert && assert(left.length >= 9);
    assert && assert(right.length >= 9);
    assert && assert(result.length >= 9);
    const m0 = left[0] * right[0] + left[3] * right[3] + left[6] * right[6];
    const m1 = left[0] * right[1] + left[3] * right[4] + left[6] * right[7];
    const m2 = left[0] * right[2] + left[3] * right[5] + left[6] * right[8];
    const m3 = left[1] * right[0] + left[4] * right[3] + left[7] * right[6];
    const m4 = left[1] * right[1] + left[4] * right[4] + left[7] * right[7];
    const m5 = left[1] * right[2] + left[4] * right[5] + left[7] * right[8];
    const m6 = left[2] * right[0] + left[5] * right[3] + left[8] * right[6];
    const m7 = left[2] * right[1] + left[5] * right[4] + left[8] * right[7];
    const m8 = left[2] * right[2] + left[5] * right[5] + left[8] * right[8];
    result[0] = m0;
    result[1] = m1;
    result[2] = m2;
    result[3] = m3;
    result[4] = m4;
    result[5] = m5;
    result[6] = m6;
    result[7] = m7;
    result[8] = m8;
  },
  /*
   * Writes the matrix multiplication ( left * transpose( right ) ) into result. (in-place modification is OK)
   *
   * @param {FastMath.Array} left - [input] 3x3 Matrix
   * @param {FastMath.Array} right - [input] 3x3 Matrix
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   */
  mult3RightTranspose(left, right, result) {
    assert && assert(left.length >= 9);
    assert && assert(right.length >= 9);
    assert && assert(result.length >= 9);
    const m0 = left[0] * right[0] + left[1] * right[1] + left[2] * right[2];
    const m1 = left[0] * right[3] + left[1] * right[4] + left[2] * right[5];
    const m2 = left[0] * right[6] + left[1] * right[7] + left[2] * right[8];
    const m3 = left[3] * right[0] + left[4] * right[1] + left[5] * right[2];
    const m4 = left[3] * right[3] + left[4] * right[4] + left[5] * right[5];
    const m5 = left[3] * right[6] + left[4] * right[7] + left[5] * right[8];
    const m6 = left[6] * right[0] + left[7] * right[1] + left[8] * right[2];
    const m7 = left[6] * right[3] + left[7] * right[4] + left[8] * right[5];
    const m8 = left[6] * right[6] + left[7] * right[7] + left[8] * right[8];
    result[0] = m0;
    result[1] = m1;
    result[2] = m2;
    result[3] = m3;
    result[4] = m4;
    result[5] = m5;
    result[6] = m6;
    result[7] = m7;
    result[8] = m8;
  },
  /*
   * Writes the matrix multiplication ( transpose( left ) * transpose( right ) ) into result.
   * (in-place modification is OK)
   * NOTE: This is equivalent to transpose( right * left ).
   *
   * @param {FastMath.Array} left - [input] 3x3 Matrix
   * @param {FastMath.Array} right - [input] 3x3 Matrix
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   */
  mult3BothTranspose(left, right, result) {
    assert && assert(left.length >= 9);
    assert && assert(right.length >= 9);
    assert && assert(result.length >= 9);
    const m0 = left[0] * right[0] + left[3] * right[1] + left[6] * right[2];
    const m1 = left[0] * right[3] + left[3] * right[4] + left[6] * right[5];
    const m2 = left[0] * right[6] + left[3] * right[7] + left[6] * right[8];
    const m3 = left[1] * right[0] + left[4] * right[1] + left[7] * right[2];
    const m4 = left[1] * right[3] + left[4] * right[4] + left[7] * right[5];
    const m5 = left[1] * right[6] + left[4] * right[7] + left[7] * right[8];
    const m6 = left[2] * right[0] + left[5] * right[1] + left[8] * right[2];
    const m7 = left[2] * right[3] + left[5] * right[4] + left[8] * right[5];
    const m8 = left[2] * right[6] + left[5] * right[7] + left[8] * right[8];
    result[0] = m0;
    result[1] = m1;
    result[2] = m2;
    result[3] = m3;
    result[4] = m4;
    result[5] = m5;
    result[6] = m6;
    result[7] = m7;
    result[8] = m8;
  },
  /*
   * Writes the product ( matrix * vector ) into result. (in-place modification is OK)
   *
   * @param {FastMath.Array} matrix - [input] 3x3 Matrix
   * @param {Vector3} vector - [input]
   * @param {Vector3} result - [output]
   */
  mult3Vector3(matrix, vector, result) {
    assert && assert(matrix.length >= 9);
    const x = matrix[0] * vector.x + matrix[1] * vector.y + matrix[2] * vector.z;
    const y = matrix[3] * vector.x + matrix[4] * vector.y + matrix[5] * vector.z;
    const z = matrix[6] * vector.x + matrix[7] * vector.y + matrix[8] * vector.z;
    result.x = x;
    result.y = y;
    result.z = z;
  },
  /*
   * Swaps two columns in a matrix, negating one of them to maintain the sign of the determinant.
   *
   * @param {FastMath.Array} matrix - [input] 3x3 Matrix
   * @param {number} idx0 - In the range [0,2]
   * @param {number} idx1 - In the range [0,2]
   */
  swapNegateColumn(matrix, idx0, idx1) {
    assert && assert(matrix.length >= 9);
    const tmp0 = matrix[idx0];
    const tmp1 = matrix[idx0 + 3];
    const tmp2 = matrix[idx0 + 6];
    matrix[idx0] = matrix[idx1];
    matrix[idx0 + 3] = matrix[idx1 + 3];
    matrix[idx0 + 6] = matrix[idx1 + 6];
    matrix[idx1] = -tmp0;
    matrix[idx1 + 3] = -tmp1;
    matrix[idx1 + 6] = -tmp2;
  },
  /*
   * Sets the result matrix to the identity.
   *
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   */
  setIdentity3(result) {
    result[0] = result[4] = result[8] = 1; // diagonal
    result[1] = result[2] = result[3] = result[5] = result[6] = result[7] = 0; // non-diagonal
  },

  /*
   * Sets the result matrix to the Givens rotation (performs a rotation between two components). Instead of an angle,
   * the 'cos' and 'sin' values are passed in directly since we skip the trigonometry almost everywhere we can.
   *
   * See http://en.wikipedia.org/wiki/Givens_rotation (note that we use the other sign convention for the sin)
   *
   * @param {FastMath.Array} result - [output] 3x3 Matrix
   * @param {number} cos - [input] The cosine of the Givens rotation angle
   * @param {number} sin - [input] The sine of the Givens rotation angle
   * @param {number} idx0 - [input] The smaller row/column index
   * @param {number} idx1 - [input] The larger row/column index
   */
  setGivens3(result, cos, sin, idx0, idx1) {
    assert && assert(idx0 < idx1);
    this.setIdentity3(result);
    result[this.index3(idx0, idx0)] = cos;
    result[this.index3(idx1, idx1)] = cos;
    result[this.index3(idx0, idx1)] = sin;
    result[this.index3(idx1, idx0)] = -sin;
  },
  /*
   * Efficiently pre-multiples the matrix in-place by the specified Givens rotation (matrix <= rotation * matrix).
   * Equivalent to using setGivens3 and mult3.
   *
   * @param {FastMath.Array} result - [input AND output] 3x3 Matrix
   * @param {number} cos - [input] The cosine of the Givens rotation angle
   * @param {number} sin - [input] The sine of the Givens rotation angle
   * @param {number} idx0 - [input] The smaller row/column index
   * @param {number} idx1 - [input] The larger row/column index
   */
  preMult3Givens(matrix, cos, sin, idx0, idx1) {
    const baseA = idx0 * 3;
    const baseB = idx1 * 3;
    // lexicographically in column-major order for "affine" section
    const a = cos * matrix[baseA + 0] + sin * matrix[baseB + 0];
    const b = cos * matrix[baseB + 0] - sin * matrix[baseA + 0];
    const c = cos * matrix[baseA + 1] + sin * matrix[baseB + 1];
    const d = cos * matrix[baseB + 1] - sin * matrix[baseA + 1];
    const e = cos * matrix[baseA + 2] + sin * matrix[baseB + 2];
    const f = cos * matrix[baseB + 2] - sin * matrix[baseA + 2];
    matrix[baseA + 0] = a;
    matrix[baseB + 0] = b;
    matrix[baseA + 1] = c;
    matrix[baseB + 1] = d;
    matrix[baseA + 2] = e;
    matrix[baseB + 2] = f;
  },
  /*
   * Efficiently post-multiples the matrix in-place by the transpose of the specified Givens rotation
   * (matrix <= matrix * rotation^T).
   * Equivalent to using setGivens3 and mult3RightTranspose.
   *
   * @param {FastMath.Array} result - [input AND output] 3x3 Matrix
   * @param {number} cos - [input] The cosine of the Givens rotation angle
   * @param {number} sin - [input] The sine of the Givens rotation angle
   * @param {number} idx0 - [input] The smaller row/column index
   * @param {number} idx1 - [input] The larger row/column index
   */
  postMult3Givens(matrix, cos, sin, idx0, idx1) {
    // lexicographically in row-major order for the "transposed affine" section
    const a = cos * matrix[idx0 + 0] + sin * matrix[idx1 + 0];
    const b = cos * matrix[idx1 + 0] - sin * matrix[idx0 + 0];
    const c = cos * matrix[idx0 + 3] + sin * matrix[idx1 + 3];
    const d = cos * matrix[idx1 + 3] - sin * matrix[idx0 + 3];
    const e = cos * matrix[idx0 + 6] + sin * matrix[idx1 + 6];
    const f = cos * matrix[idx1 + 6] - sin * matrix[idx0 + 6];
    matrix[idx0 + 0] = a;
    matrix[idx1 + 0] = b;
    matrix[idx0 + 3] = c;
    matrix[idx1 + 3] = d;
    matrix[idx0 + 6] = e;
    matrix[idx1 + 6] = f;
  },
  /*
   * Zeros out the [idx0,idx1] and [idx1,idx0] entries of the matrix mS by applying a Givens rotation as part of the
   * Jacobi iteration. In addition, the Givens rotation is prepended to mQ so we can track the accumulated rotations
   * applied (this is how we get V in the SVD).
   *
   * @param {FastMath.Array} mS - [input AND output] Symmetric 3x3 Matrix
   * @param {FastMath.Array} mQ - [input AND output] Unitary 3x3 Matrix
   * @param {number} idx0 - [input] The smaller row/column index
   * @param {number} idx1 - [input] The larger row/column index
   */
  applyJacobi3(mS, mQ, idx0, idx1) {
    // submatrix entries for idx0,idx1
    const a11 = mS[3 * idx0 + idx0];
    const a12 = mS[3 * idx0 + idx1]; // we assume mS is symmetric, so we don't need a21
    const a22 = mS[3 * idx1 + idx1];

    // Approximate givens angle, see https://graphics.cs.wisc.edu/Papers/2011/MSTTS11/SVD_TR1690.pdf (section 2.3)
    // "Computing the Singular Value Decomposition of 3x3 matrices with minimal branching and elementary floating point operations"
    // Aleka McAdams, Andrew Selle, Rasmus Tamstorf, Joseph Teran, Eftychios Sifakis
    const lhs = a12 * a12;
    let rhs = a11 - a22;
    rhs = rhs * rhs;
    const useAngle = lhs < rhs;
    const w = 1 / Math.sqrt(lhs + rhs);
    // NOTE: exact Givens angle is 0.5 * Math.atan( 2 * a12 / ( a11 - a22 ) ), but clamped to withing +-Math.PI / 4
    const cos = useAngle ? w * (a11 - a22) : SQRT_HALF;
    const sin = useAngle ? w * a12 : SQRT_HALF;

    // S' = Q * S * transpose( Q )
    this.preMult3Givens(mS, cos, sin, idx0, idx1);
    this.postMult3Givens(mS, cos, sin, idx0, idx1);

    // Q' = Q * mQ
    this.preMult3Givens(mQ, cos, sin, idx0, idx1);
  },
  /*
   * The Jacobi method, which in turn zeros out all the non-diagonal entries repeatedly until mS converges into
   * a diagonal matrix. We track the applied Givens rotations in mQ, so that when given mS and mQ=identity, we will
   * maintain the value mQ * mS * mQ^T
   *
   * @param {FastMath.Array} mS - [input AND output] Symmetric 3x3 Matrix
   * @param {FastMath.Array} mQ - [input AND output] Unitary 3x3 Matrix
   * @param {number} n - [input] The number of iterations to run
   */
  jacobiIteration3(mS, mQ, n) {
    // for 3x3, we eliminate non-diagonal entries iteratively
    for (let i = 0; i < n; i++) {
      this.applyJacobi3(mS, mQ, 0, 1);
      this.applyJacobi3(mS, mQ, 0, 2);
      this.applyJacobi3(mS, mQ, 1, 2);
    }
  },
  /*
   * One step in computing the QR decomposition. Zeros out the (row,col) entry in 'r', while maintaining the
   * value of (q * r). We will end up with an orthogonal Q and upper-triangular R (or in the SVD case,
   * R will be diagonal)
   *
   * @param {FastMath.Array} q - [input AND ouput] 3x3 Matrix
   * @param {FastMath.Array} r - [input AND ouput] 3x3 Matrix
   * @param {number} row - [input] The row of the entry to zero out
   * @param {number} col - [input] The column of the entry to zero out
   */
  qrAnnihilate3(q, r, row, col) {
    assert && assert(row > col); // only in the lower-triangular area

    const epsilon = 0.0000000001;
    let cos;
    let sin;
    const diagonalValue = r[this.index3(col, col)];
    const targetValue = r[this.index3(row, col)];
    const diagonalSquared = diagonalValue * diagonalValue;
    const targetSquared = targetValue * targetValue;

    // handle the case where both (row,col) and (col,col) are very small (would cause instabilities)
    if (diagonalSquared + targetSquared < epsilon) {
      cos = diagonalValue > 0 ? 1 : 0;
      sin = 0;
    } else {
      const rsqr = 1 / Math.sqrt(diagonalSquared + targetSquared);
      cos = rsqr * diagonalValue;
      sin = rsqr * targetValue;
    }
    this.preMult3Givens(r, cos, sin, col, row);
    this.postMult3Givens(q, cos, sin, col, row);
  },
  /*
   * 3x3 Singular Value Decomposition, handling singular cases.
   * Based on https://graphics.cs.wisc.edu/Papers/2011/MSTTS11/SVD_TR1690.pdf
   * "Computing the Singular Value Decomposition of 3x3 matrices with minimal branching and elementary floating point operations"
   * Aleka McAdams, Andrew Selle, Rasmus Tamstorf, Joseph Teran, Eftychios Sifakis
   *
   * @param {FastMath.Array} a - [input] 3x3 Matrix that we want the SVD of.
   * @param {number} jacobiIterationCount - [input] How many Jacobi iterations to run (larger is more accurate to a point)
   * @param {FastMath.Array} resultU - [output] 3x3 U matrix (unitary)
   * @param {FastMath.Array} resultSigma - [output] 3x3 diagonal matrix of singular values
   * @param {FastMath.Array} resultV - [output] 3x3 V matrix (unitary)
   */
  svd3(a, jacobiIterationCount, resultU, resultSigma, resultV) {
    // shorthands
    const q = resultU;
    const v = resultV;
    const r = resultSigma;

    // for now, use 'r' as our S == transpose( A ) * A, so we don't have to use scratch matrices
    this.mult3LeftTranspose(a, a, r);
    // we'll accumulate into 'q' == transpose( V ) during the Jacobi iteration
    this.setIdentity3(q);

    // Jacobi iteration turns Q into V^T and R into Sigma^2 (we'll ditch R since the QR decomposition will be beter)
    this.jacobiIteration3(r, q, jacobiIterationCount);
    // final determination of V
    this.transpose3(q, v); // done with this 'q' until we reuse the scratch matrix later below for the QR decomposition

    this.mult3(a, v, r); // R = AV

    // Sort columns of R and V based on singular values (needed for the QR step, and useful anyways).
    // Their product will remain unchanged.
    let mag0 = r[0] * r[0] + r[3] * r[3] + r[6] * r[6]; // column vector magnitudes
    let mag1 = r[1] * r[1] + r[4] * r[4] + r[7] * r[7];
    let mag2 = r[2] * r[2] + r[5] * r[5] + r[8] * r[8];
    let tmpMag;
    if (mag0 < mag1) {
      // swap magnitudes
      tmpMag = mag0;
      mag0 = mag1;
      mag1 = tmpMag;
      this.swapNegateColumn(r, 0, 1);
      this.swapNegateColumn(v, 0, 1);
    }
    if (mag0 < mag2) {
      // swap magnitudes
      tmpMag = mag0;
      mag0 = mag2;
      mag2 = tmpMag;
      this.swapNegateColumn(r, 0, 2);
      this.swapNegateColumn(v, 0, 2);
    }
    if (mag1 < mag2) {
      this.swapNegateColumn(r, 1, 2);
      this.swapNegateColumn(v, 1, 2);
    }

    // QR decomposition
    this.setIdentity3(q); // reusing Q now for the QR
    // Zero out all three strictly lower-triangular values. Should turn the matrix diagonal
    this.qrAnnihilate3(q, r, 1, 0);
    this.qrAnnihilate3(q, r, 2, 0);
    this.qrAnnihilate3(q, r, 2, 1);

    // checks for a singular U value, we'll add in the needed 1 entries to make sure our U is orthogonal
    const bigEpsilon = 0.001; // they really should be around 1
    if (q[0] * q[0] + q[1] * q[1] + q[2] * q[2] < bigEpsilon) {
      q[0] = 1;
    }
    if (q[3] * q[3] + q[4] * q[4] + q[5] * q[5] < bigEpsilon) {
      q[4] = 1;
    }
    if (q[6] * q[6] + q[7] * q[7] + q[8] * q[8] < bigEpsilon) {
      q[8] = 1;
    }
  },
  /*---------------------------------------------------------------------------*
   * 3xN matrix math
   *----------------------------------------------------------------------------*/

  /*
   * Sets the 3xN result matrix to be made out of column vectors
   *
   * @param {Array.<Vector3>} columnVectors - [input] List of 3D column vectors
   * @param {FastMath.Array} result - [output] 3xN Matrix, where N is the number of column vectors
   */
  setVectors3(columnVectors, result) {
    const m = 3;
    const n = columnVectors.length;
    assert && assert(result.length >= m * n, 'Array length check');
    for (let i = 0; i < n; i++) {
      const vector = columnVectors[i];
      result[i] = vector.x;
      result[i + n] = vector.y;
      result[i + 2 * n] = vector.z;
    }
  },
  /*
   * Retrieves column vector values from a 3xN matrix.
   *
   * @param {number} m - [input] The number of rows in the matrix (sanity check, should always be 3)
   * @param {number} n - [input] The number of columns in the matrix
   * @param {FastMath.Array} matrix - [input] 3xN Matrix
   * @param {number} columnIndex - [input] 3xN Matrix
   * @param {Vector3} result - [output] Vector to store the x,y,z
   */
  getColumnVector3(m, n, matrix, columnIndex, result) {
    assert && assert(m === 3 && columnIndex < n);
    result.x = matrix[columnIndex];
    result.y = matrix[columnIndex + n];
    result.z = matrix[columnIndex + 2 * n];
  },
  /*---------------------------------------------------------------------------*
   * Arbitrary dimension matrix math
   *----------------------------------------------------------------------------*/

  /*
   * From 0-indexed row and column indices, returns the index into the flat array
   *
   * @param {number} m - Number of rows in the matrix
   * @param {number} n - Number of columns in the matrix
   * @param {number} row
   * @param {number} col
   */
  index(m, n, row, col) {
    return n * row + col;
  },
  /*
   * Writes the transpose of the matrix into the result.
   *
   * @param {number} m - Number of rows in the original matrix
   * @param {number} n - Number of columns in the original matrix
   * @param {FastMath.Array} matrix - [input] MxN Matrix
   * @param {FastMath.Array} result - [output] NxM Matrix
   */
  transpose(m, n, matrix, result) {
    assert && assert(matrix.length >= m * n);
    assert && assert(result.length >= n * m);
    assert && assert(matrix !== result, 'In-place modification not implemented yet');
    for (let row = 0; row < m; row++) {
      for (let col = 0; col < n; col++) {
        result[m * col + row] = matrix[n * row + col];
      }
    }
  },
  /*
   * Writes the matrix multiplication of ( left * right ) into result
   *
   * @param {number} m - Number of rows in the left matrix
   * @param {number} n - Number of columns in the left matrix, number of rows in the right matrix
   * @param {number} p - Number of columns in the right matrix
   * @param {FastMath.Array} left - [input] MxN Matrix
   * @param {FastMath.Array} right - [input] NxP Matrix
   * @param {FastMath.Array} result - [output] MxP Matrix
   */
  mult(m, n, p, left, right, result) {
    assert && assert(left.length >= m * n);
    assert && assert(right.length >= n * p);
    assert && assert(result.length >= m * p);
    assert && assert(left !== result && right !== result, 'In-place modification not implemented yet');
    for (let row = 0; row < m; row++) {
      for (let col = 0; col < p; col++) {
        let x = 0;
        for (let k = 0; k < n; k++) {
          x += left[this.index(m, n, row, k)] * right[this.index(n, p, k, col)];
        }
        result[this.index(m, p, row, col)] = x;
      }
    }
  },
  /*
   * Writes the matrix multiplication of ( left * transpose( right ) ) into result
   *
   * @param {number} m - Number of rows in the left matrix
   * @param {number} n - Number of columns in the left matrix, number of columns in the right matrix
   * @param {number} p - Number of rows in the right matrix
   * @param {FastMath.Array} left - [input] MxN Matrix
   * @param {FastMath.Array} right - [input] PxN Matrix
   * @param {FastMath.Array} result - [output] MxP Matrix
   */
  multRightTranspose(m, n, p, left, right, result) {
    assert && assert(left.length >= m * n);
    assert && assert(right.length >= n * p);
    assert && assert(result.length >= m * p);
    assert && assert(left !== result && right !== result, 'In-place modification not implemented yet');
    for (let row = 0; row < m; row++) {
      for (let col = 0; col < p; col++) {
        let x = 0;
        for (let k = 0; k < n; k++) {
          x += left[this.index(m, n, row, k)] * right[this.index(p, n, col, k)];
        }
        result[this.index(m, p, row, col)] = x;
      }
    }
  },
  /*
   * Writes the matrix into the result, permuting the columns.
   *
   * @param {number} m - Number of rows in the original matrix
   * @param {number} n - Number of columns in the original matrix
   * @param {FastMath.Array} matrix - [input] MxN Matrix
   * @param {Permutation} permutation - [input] Permutation
   * @param {FastMath.Array} result - [output] MxN Matrix
   */
  permuteColumns(m, n, matrix, permutation, result) {
    assert && assert(matrix !== result, 'In-place modification not implemented yet');
    assert && assert(matrix.length >= m * n);
    assert && assert(result.length >= m * n);
    for (let col = 0; col < n; col++) {
      const permutedColumnIndex = permutation.indices[col];
      for (let row = 0; row < m; row++) {
        result[this.index(m, n, row, col)] = matrix[this.index(m, n, row, permutedColumnIndex)];
      }
    }
  }
};
js_dot.register('MatrixOps3', MatrixOps3);
/* harmony default export */ const js_MatrixOps3 = ((/* unused pure expression or super */ null && (MatrixOps3)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJTUVJUX0hBTEYiLCJNYXRoIiwic3FydCIsIk1hdHJpeE9wczMiLCJBcnJheSIsIkZhc3RBcnJheSIsImluZGV4MyIsInJvdyIsImNvbCIsImFzc2VydCIsInNldDMiLCJtYXRyaXgiLCJyZXN1bHQiLCJsZW5ndGgiLCJ0cmFuc3Bvc2UzIiwibTEiLCJtMiIsIm0zIiwibTUiLCJtNiIsIm03IiwiZGV0MyIsIm11bHQzIiwibGVmdCIsInJpZ2h0IiwibTAiLCJtNCIsIm04IiwibXVsdDNMZWZ0VHJhbnNwb3NlIiwibXVsdDNSaWdodFRyYW5zcG9zZSIsIm11bHQzQm90aFRyYW5zcG9zZSIsIm11bHQzVmVjdG9yMyIsInZlY3RvciIsIngiLCJ5IiwieiIsInN3YXBOZWdhdGVDb2x1bW4iLCJpZHgwIiwiaWR4MSIsInRtcDAiLCJ0bXAxIiwidG1wMiIsInNldElkZW50aXR5MyIsInNldEdpdmVuczMiLCJjb3MiLCJzaW4iLCJwcmVNdWx0M0dpdmVucyIsImJhc2VBIiwiYmFzZUIiLCJhIiwiYiIsImMiLCJkIiwiZSIsImYiLCJwb3N0TXVsdDNHaXZlbnMiLCJhcHBseUphY29iaTMiLCJtUyIsIm1RIiwiYTExIiwiYTEyIiwiYTIyIiwibGhzIiwicmhzIiwidXNlQW5nbGUiLCJ3IiwiamFjb2JpSXRlcmF0aW9uMyIsIm4iLCJpIiwicXJBbm5paGlsYXRlMyIsInEiLCJyIiwiZXBzaWxvbiIsImRpYWdvbmFsVmFsdWUiLCJ0YXJnZXRWYWx1ZSIsImRpYWdvbmFsU3F1YXJlZCIsInRhcmdldFNxdWFyZWQiLCJyc3FyIiwic3ZkMyIsImphY29iaUl0ZXJhdGlvbkNvdW50IiwicmVzdWx0VSIsInJlc3VsdFNpZ21hIiwicmVzdWx0ViIsInYiLCJtYWcwIiwibWFnMSIsIm1hZzIiLCJ0bXBNYWciLCJiaWdFcHNpbG9uIiwic2V0VmVjdG9yczMiLCJjb2x1bW5WZWN0b3JzIiwibSIsImdldENvbHVtblZlY3RvcjMiLCJjb2x1bW5JbmRleCIsImluZGV4IiwidHJhbnNwb3NlIiwibXVsdCIsInAiLCJrIiwibXVsdFJpZ2h0VHJhbnNwb3NlIiwicGVybXV0ZUNvbHVtbnMiLCJwZXJtdXRhdGlvbiIsInBlcm11dGVkQ29sdW1uSW5kZXgiLCJpbmRpY2VzIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJNYXRyaXhPcHMzLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE1LTIwMjAsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEZhc3QgM3gzIG1hdHJpeCBjb21wdXRhdGlvbnMgYXQgdGhlIGxvd2VyIGxldmVsLCBpbmNsdWRpbmcgYW4gU1ZEIGltcGxlbWVudGF0aW9uIHRoYXQgaXMgZnVsbHkgc3RhYmxlLlxuICogT3ZlcmFsbCwgaXQgdXNlcyBhIGhlYXZpbHkgbXV0YWJsZSBzdHlsZSwgcGFzc2luZyBpbiB0aGUgb2JqZWN0IHdoZXJlIHRoZSByZXN1bHQocykgd2lsbCBiZSBzdG9yZWQuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuXG4vKlxuICogTWF0cmljZXMgYXJlIHN0b3JlZCBhcyBmbGF0IHR5cGVkIGFycmF5cyB3aXRoIHJvdy1tYWpvciBpbmRpY2VzLiBGb3IgZXhhbXBsZSwgZm9yIGEgM3gzOlxuICogWzBdIFsxXSBbMl1cbiAqIFszXSBbNF0gWzVdXG4gKiBbNl0gWzddIFs4XVxuICpcbiAqIE5PVEU6IFdlIGFzc3VtZSB0aGUgdHlwZWQgYXJyYXlzIGFyZSBBVCBMRUFTVCBhcyBsb25nIGFzIG5lY2Vzc2FyeSAoYnV0IGNvdWxkIGJlIGxvbmdlcikuIFRoaXMgYWxsb3dzIHVzIHRvIHVzZVxuICogYW4gYXJyYXkgYXMgYmlnIGFzIHRoZSBsYXJnZXN0IG9uZSB3ZSdsbCBuZWVkLlxuICovXG5cbi8vIGNvbnN0YW50c1xuY29uc3QgU1FSVF9IQUxGID0gTWF0aC5zcXJ0KCAwLjUgKTtcblxuY29uc3QgTWF0cml4T3BzMyA9IHtcbiAgLy8gdXNlIHR5cGVkIGFycmF5cyBpZiBwb3NzaWJsZVxuICBBcnJheTogZG90LkZhc3RBcnJheSxcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogM3gzIG1hdHJpeCBtYXRoXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLypcbiAgICogRnJvbSAwLWluZGV4ZWQgcm93IGFuZCBjb2x1bW4gaW5kaWNlcywgcmV0dXJucyB0aGUgaW5kZXggaW50byB0aGUgZmxhdCBhcnJheVxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gcm93XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb2xcbiAgICovXG4gIGluZGV4Myggcm93LCBjb2wgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcm93ID49IDAgJiYgcm93IDwgMyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGNvbCA+PSAwICYmIGNvbCA8IDMgKTtcbiAgICByZXR1cm4gMyAqIHJvdyArIGNvbDtcbiAgfSxcblxuICAvKlxuICAgKiBDb3BpZXMgb25lIG1hdHJpeCBpbnRvIGFub3RoZXJcbiAgICpcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gbWF0cml4IC0gW2lucHV0XSAzeDMgTWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdCAtIFtvdXRwdXRdIDN4MyBNYXRyaXhcbiAgICovXG4gIHNldDMoIG1hdHJpeCwgcmVzdWx0ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1hdHJpeC5sZW5ndGggPj0gOSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJlc3VsdC5sZW5ndGggPj0gOSApO1xuICAgIHJlc3VsdFsgMCBdID0gbWF0cml4WyAwIF07XG4gICAgcmVzdWx0WyAxIF0gPSBtYXRyaXhbIDEgXTtcbiAgICByZXN1bHRbIDIgXSA9IG1hdHJpeFsgMiBdO1xuICAgIHJlc3VsdFsgMyBdID0gbWF0cml4WyAzIF07XG4gICAgcmVzdWx0WyA0IF0gPSBtYXRyaXhbIDQgXTtcbiAgICByZXN1bHRbIDUgXSA9IG1hdHJpeFsgNSBdO1xuICAgIHJlc3VsdFsgNiBdID0gbWF0cml4WyA2IF07XG4gICAgcmVzdWx0WyA3IF0gPSBtYXRyaXhbIDcgXTtcbiAgICByZXN1bHRbIDggXSA9IG1hdHJpeFsgOCBdO1xuICB9LFxuXG4gIC8qXG4gICAqIFdyaXRlcyB0aGUgdHJhbnNwb3NlIG9mIHRoZSBpbnB1dCBtYXRyaXggaW50byB0aGUgcmVzdWx0IG1hdHJpeCAoaW4tcGxhY2UgbW9kaWZpY2F0aW9uIGlzIE9LKVxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtYXRyaXggLSBbaW5wdXRdIDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmVzdWx0IC0gW291dHB1dF0gM3gzIE1hdHJpeFxuICAgKi9cbiAgdHJhbnNwb3NlMyggbWF0cml4LCByZXN1bHQgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbWF0cml4Lmxlbmd0aCA+PSA5ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcmVzdWx0Lmxlbmd0aCA+PSA5ICk7XG4gICAgY29uc3QgbTEgPSBtYXRyaXhbIDMgXTtcbiAgICBjb25zdCBtMiA9IG1hdHJpeFsgNiBdO1xuICAgIGNvbnN0IG0zID0gbWF0cml4WyAxIF07XG4gICAgY29uc3QgbTUgPSBtYXRyaXhbIDcgXTtcbiAgICBjb25zdCBtNiA9IG1hdHJpeFsgMiBdO1xuICAgIGNvbnN0IG03ID0gbWF0cml4WyA1IF07XG4gICAgcmVzdWx0WyAwIF0gPSBtYXRyaXhbIDAgXTtcbiAgICByZXN1bHRbIDEgXSA9IG0xO1xuICAgIHJlc3VsdFsgMiBdID0gbTI7XG4gICAgcmVzdWx0WyAzIF0gPSBtMztcbiAgICByZXN1bHRbIDQgXSA9IG1hdHJpeFsgNCBdO1xuICAgIHJlc3VsdFsgNSBdID0gbTU7XG4gICAgcmVzdWx0WyA2IF0gPSBtNjtcbiAgICByZXN1bHRbIDcgXSA9IG03O1xuICAgIHJlc3VsdFsgOCBdID0gbWF0cml4WyA4IF07XG4gIH0sXG5cbiAgLypcbiAgICogVGhlIGRldGVybWluYW50IG9mIGEgM3gzIG1hdHJpeFxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtYXRyaXggLSBbaW5wdXRdIDN4MyBNYXRyaXhcbiAgICogQHJldHVybnMge251bWJlcn0gLSBUaGUgZGV0ZXJtaW5hbnQuIDAgaW5kaWNhdGVzIGEgc2luZ3VsYXIgKG5vbi1pbnZlcnRpYmxlKSBtYXRyaXguXG4gICAqL1xuICBkZXQzKCBtYXRyaXggKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggbWF0cml4Lmxlbmd0aCA+PSA5ICk7XG4gICAgcmV0dXJuIG1hdHJpeFsgMCBdICogbWF0cml4WyA0IF0gKiBtYXRyaXhbIDggXSArIG1hdHJpeFsgMSBdICogbWF0cml4WyA1IF0gKiBtYXRyaXhbIDYgXSArXG4gICAgICAgICAgIG1hdHJpeFsgMiBdICogbWF0cml4WyAzIF0gKiBtYXRyaXhbIDcgXSAtIG1hdHJpeFsgMiBdICogbWF0cml4WyA0IF0gKiBtYXRyaXhbIDYgXSAtXG4gICAgICAgICAgIG1hdHJpeFsgMSBdICogbWF0cml4WyAzIF0gKiBtYXRyaXhbIDggXSAtIG1hdHJpeFsgMCBdICogbWF0cml4WyA1IF0gKiBtYXRyaXhbIDcgXTtcbiAgfSxcblxuICAvKlxuICAgKiBXcml0ZXMgdGhlIG1hdHJpeCBtdWx0aXBsaWNhdGlvbiAoIGxlZnQgKiByaWdodCApIGludG8gcmVzdWx0LiAoaW4tcGxhY2UgbW9kaWZpY2F0aW9uIGlzIE9LKVxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBsZWZ0IC0gW2lucHV0XSAzeDMgTWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJpZ2h0IC0gW2lucHV0XSAzeDMgTWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdCAtIFtvdXRwdXRdIDN4MyBNYXRyaXhcbiAgICovXG4gIG11bHQzKCBsZWZ0LCByaWdodCwgcmVzdWx0ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGxlZnQubGVuZ3RoID49IDkgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByaWdodC5sZW5ndGggPj0gOSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJlc3VsdC5sZW5ndGggPj0gOSApO1xuICAgIGNvbnN0IG0wID0gbGVmdFsgMCBdICogcmlnaHRbIDAgXSArIGxlZnRbIDEgXSAqIHJpZ2h0WyAzIF0gKyBsZWZ0WyAyIF0gKiByaWdodFsgNiBdO1xuICAgIGNvbnN0IG0xID0gbGVmdFsgMCBdICogcmlnaHRbIDEgXSArIGxlZnRbIDEgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyAyIF0gKiByaWdodFsgNyBdO1xuICAgIGNvbnN0IG0yID0gbGVmdFsgMCBdICogcmlnaHRbIDIgXSArIGxlZnRbIDEgXSAqIHJpZ2h0WyA1IF0gKyBsZWZ0WyAyIF0gKiByaWdodFsgOCBdO1xuICAgIGNvbnN0IG0zID0gbGVmdFsgMyBdICogcmlnaHRbIDAgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyAzIF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgNiBdO1xuICAgIGNvbnN0IG00ID0gbGVmdFsgMyBdICogcmlnaHRbIDEgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgNyBdO1xuICAgIGNvbnN0IG01ID0gbGVmdFsgMyBdICogcmlnaHRbIDIgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyA1IF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgOCBdO1xuICAgIGNvbnN0IG02ID0gbGVmdFsgNiBdICogcmlnaHRbIDAgXSArIGxlZnRbIDcgXSAqIHJpZ2h0WyAzIF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgNiBdO1xuICAgIGNvbnN0IG03ID0gbGVmdFsgNiBdICogcmlnaHRbIDEgXSArIGxlZnRbIDcgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgNyBdO1xuICAgIGNvbnN0IG04ID0gbGVmdFsgNiBdICogcmlnaHRbIDIgXSArIGxlZnRbIDcgXSAqIHJpZ2h0WyA1IF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgOCBdO1xuICAgIHJlc3VsdFsgMCBdID0gbTA7XG4gICAgcmVzdWx0WyAxIF0gPSBtMTtcbiAgICByZXN1bHRbIDIgXSA9IG0yO1xuICAgIHJlc3VsdFsgMyBdID0gbTM7XG4gICAgcmVzdWx0WyA0IF0gPSBtNDtcbiAgICByZXN1bHRbIDUgXSA9IG01O1xuICAgIHJlc3VsdFsgNiBdID0gbTY7XG4gICAgcmVzdWx0WyA3IF0gPSBtNztcbiAgICByZXN1bHRbIDggXSA9IG04O1xuICB9LFxuXG4gIC8qXG4gICAqIFdyaXRlcyB0aGUgbWF0cml4IG11bHRpcGxpY2F0aW9uICggdHJhbnNwb3NlKCBsZWZ0ICkgKiByaWdodCApIGludG8gcmVzdWx0LiAoaW4tcGxhY2UgbW9kaWZpY2F0aW9uIGlzIE9LKVxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBsZWZ0IC0gW2lucHV0XSAzeDMgTWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJpZ2h0IC0gW2lucHV0XSAzeDMgTWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdCAtIFtvdXRwdXRdIDN4MyBNYXRyaXhcbiAgICovXG4gIG11bHQzTGVmdFRyYW5zcG9zZSggbGVmdCwgcmlnaHQsIHJlc3VsdCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWZ0Lmxlbmd0aCA+PSA5ICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcmlnaHQubGVuZ3RoID49IDkgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByZXN1bHQubGVuZ3RoID49IDkgKTtcbiAgICBjb25zdCBtMCA9IGxlZnRbIDAgXSAqIHJpZ2h0WyAwIF0gKyBsZWZ0WyAzIF0gKiByaWdodFsgMyBdICsgbGVmdFsgNiBdICogcmlnaHRbIDYgXTtcbiAgICBjb25zdCBtMSA9IGxlZnRbIDAgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyAzIF0gKiByaWdodFsgNCBdICsgbGVmdFsgNiBdICogcmlnaHRbIDcgXTtcbiAgICBjb25zdCBtMiA9IGxlZnRbIDAgXSAqIHJpZ2h0WyAyIF0gKyBsZWZ0WyAzIF0gKiByaWdodFsgNSBdICsgbGVmdFsgNiBdICogcmlnaHRbIDggXTtcbiAgICBjb25zdCBtMyA9IGxlZnRbIDEgXSAqIHJpZ2h0WyAwIF0gKyBsZWZ0WyA0IF0gKiByaWdodFsgMyBdICsgbGVmdFsgNyBdICogcmlnaHRbIDYgXTtcbiAgICBjb25zdCBtNCA9IGxlZnRbIDEgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyA0IF0gKiByaWdodFsgNCBdICsgbGVmdFsgNyBdICogcmlnaHRbIDcgXTtcbiAgICBjb25zdCBtNSA9IGxlZnRbIDEgXSAqIHJpZ2h0WyAyIF0gKyBsZWZ0WyA0IF0gKiByaWdodFsgNSBdICsgbGVmdFsgNyBdICogcmlnaHRbIDggXTtcbiAgICBjb25zdCBtNiA9IGxlZnRbIDIgXSAqIHJpZ2h0WyAwIF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgMyBdICsgbGVmdFsgOCBdICogcmlnaHRbIDYgXTtcbiAgICBjb25zdCBtNyA9IGxlZnRbIDIgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgNCBdICsgbGVmdFsgOCBdICogcmlnaHRbIDcgXTtcbiAgICBjb25zdCBtOCA9IGxlZnRbIDIgXSAqIHJpZ2h0WyAyIF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgNSBdICsgbGVmdFsgOCBdICogcmlnaHRbIDggXTtcbiAgICByZXN1bHRbIDAgXSA9IG0wO1xuICAgIHJlc3VsdFsgMSBdID0gbTE7XG4gICAgcmVzdWx0WyAyIF0gPSBtMjtcbiAgICByZXN1bHRbIDMgXSA9IG0zO1xuICAgIHJlc3VsdFsgNCBdID0gbTQ7XG4gICAgcmVzdWx0WyA1IF0gPSBtNTtcbiAgICByZXN1bHRbIDYgXSA9IG02O1xuICAgIHJlc3VsdFsgNyBdID0gbTc7XG4gICAgcmVzdWx0WyA4IF0gPSBtODtcbiAgfSxcblxuICAvKlxuICAgKiBXcml0ZXMgdGhlIG1hdHJpeCBtdWx0aXBsaWNhdGlvbiAoIGxlZnQgKiB0cmFuc3Bvc2UoIHJpZ2h0ICkgKSBpbnRvIHJlc3VsdC4gKGluLXBsYWNlIG1vZGlmaWNhdGlvbiBpcyBPSylcbiAgICpcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gbGVmdCAtIFtpbnB1dF0gM3gzIE1hdHJpeFxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSByaWdodCAtIFtpbnB1dF0gM3gzIE1hdHJpeFxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSByZXN1bHQgLSBbb3V0cHV0XSAzeDMgTWF0cml4XG4gICAqL1xuICBtdWx0M1JpZ2h0VHJhbnNwb3NlKCBsZWZ0LCByaWdodCwgcmVzdWx0ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGxlZnQubGVuZ3RoID49IDkgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByaWdodC5sZW5ndGggPj0gOSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJlc3VsdC5sZW5ndGggPj0gOSApO1xuICAgIGNvbnN0IG0wID0gbGVmdFsgMCBdICogcmlnaHRbIDAgXSArIGxlZnRbIDEgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyAyIF0gKiByaWdodFsgMiBdO1xuICAgIGNvbnN0IG0xID0gbGVmdFsgMCBdICogcmlnaHRbIDMgXSArIGxlZnRbIDEgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyAyIF0gKiByaWdodFsgNSBdO1xuICAgIGNvbnN0IG0yID0gbGVmdFsgMCBdICogcmlnaHRbIDYgXSArIGxlZnRbIDEgXSAqIHJpZ2h0WyA3IF0gKyBsZWZ0WyAyIF0gKiByaWdodFsgOCBdO1xuICAgIGNvbnN0IG0zID0gbGVmdFsgMyBdICogcmlnaHRbIDAgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgMiBdO1xuICAgIGNvbnN0IG00ID0gbGVmdFsgMyBdICogcmlnaHRbIDMgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgNSBdO1xuICAgIGNvbnN0IG01ID0gbGVmdFsgMyBdICogcmlnaHRbIDYgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyA3IF0gKyBsZWZ0WyA1IF0gKiByaWdodFsgOCBdO1xuICAgIGNvbnN0IG02ID0gbGVmdFsgNiBdICogcmlnaHRbIDAgXSArIGxlZnRbIDcgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgMiBdO1xuICAgIGNvbnN0IG03ID0gbGVmdFsgNiBdICogcmlnaHRbIDMgXSArIGxlZnRbIDcgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgNSBdO1xuICAgIGNvbnN0IG04ID0gbGVmdFsgNiBdICogcmlnaHRbIDYgXSArIGxlZnRbIDcgXSAqIHJpZ2h0WyA3IF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgOCBdO1xuICAgIHJlc3VsdFsgMCBdID0gbTA7XG4gICAgcmVzdWx0WyAxIF0gPSBtMTtcbiAgICByZXN1bHRbIDIgXSA9IG0yO1xuICAgIHJlc3VsdFsgMyBdID0gbTM7XG4gICAgcmVzdWx0WyA0IF0gPSBtNDtcbiAgICByZXN1bHRbIDUgXSA9IG01O1xuICAgIHJlc3VsdFsgNiBdID0gbTY7XG4gICAgcmVzdWx0WyA3IF0gPSBtNztcbiAgICByZXN1bHRbIDggXSA9IG04O1xuICB9LFxuXG4gIC8qXG4gICAqIFdyaXRlcyB0aGUgbWF0cml4IG11bHRpcGxpY2F0aW9uICggdHJhbnNwb3NlKCBsZWZ0ICkgKiB0cmFuc3Bvc2UoIHJpZ2h0ICkgKSBpbnRvIHJlc3VsdC5cbiAgICogKGluLXBsYWNlIG1vZGlmaWNhdGlvbiBpcyBPSylcbiAgICogTk9URTogVGhpcyBpcyBlcXVpdmFsZW50IHRvIHRyYW5zcG9zZSggcmlnaHQgKiBsZWZ0ICkuXG4gICAqXG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IGxlZnQgLSBbaW5wdXRdIDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmlnaHQgLSBbaW5wdXRdIDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmVzdWx0IC0gW291dHB1dF0gM3gzIE1hdHJpeFxuICAgKi9cbiAgbXVsdDNCb3RoVHJhbnNwb3NlKCBsZWZ0LCByaWdodCwgcmVzdWx0ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIGxlZnQubGVuZ3RoID49IDkgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByaWdodC5sZW5ndGggPj0gOSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJlc3VsdC5sZW5ndGggPj0gOSApO1xuICAgIGNvbnN0IG0wID0gbGVmdFsgMCBdICogcmlnaHRbIDAgXSArIGxlZnRbIDMgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyA2IF0gKiByaWdodFsgMiBdO1xuICAgIGNvbnN0IG0xID0gbGVmdFsgMCBdICogcmlnaHRbIDMgXSArIGxlZnRbIDMgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyA2IF0gKiByaWdodFsgNSBdO1xuICAgIGNvbnN0IG0yID0gbGVmdFsgMCBdICogcmlnaHRbIDYgXSArIGxlZnRbIDMgXSAqIHJpZ2h0WyA3IF0gKyBsZWZ0WyA2IF0gKiByaWdodFsgOCBdO1xuICAgIGNvbnN0IG0zID0gbGVmdFsgMSBdICogcmlnaHRbIDAgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyA3IF0gKiByaWdodFsgMiBdO1xuICAgIGNvbnN0IG00ID0gbGVmdFsgMSBdICogcmlnaHRbIDMgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyA3IF0gKiByaWdodFsgNSBdO1xuICAgIGNvbnN0IG01ID0gbGVmdFsgMSBdICogcmlnaHRbIDYgXSArIGxlZnRbIDQgXSAqIHJpZ2h0WyA3IF0gKyBsZWZ0WyA3IF0gKiByaWdodFsgOCBdO1xuICAgIGNvbnN0IG02ID0gbGVmdFsgMiBdICogcmlnaHRbIDAgXSArIGxlZnRbIDUgXSAqIHJpZ2h0WyAxIF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgMiBdO1xuICAgIGNvbnN0IG03ID0gbGVmdFsgMiBdICogcmlnaHRbIDMgXSArIGxlZnRbIDUgXSAqIHJpZ2h0WyA0IF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgNSBdO1xuICAgIGNvbnN0IG04ID0gbGVmdFsgMiBdICogcmlnaHRbIDYgXSArIGxlZnRbIDUgXSAqIHJpZ2h0WyA3IF0gKyBsZWZ0WyA4IF0gKiByaWdodFsgOCBdO1xuICAgIHJlc3VsdFsgMCBdID0gbTA7XG4gICAgcmVzdWx0WyAxIF0gPSBtMTtcbiAgICByZXN1bHRbIDIgXSA9IG0yO1xuICAgIHJlc3VsdFsgMyBdID0gbTM7XG4gICAgcmVzdWx0WyA0IF0gPSBtNDtcbiAgICByZXN1bHRbIDUgXSA9IG01O1xuICAgIHJlc3VsdFsgNiBdID0gbTY7XG4gICAgcmVzdWx0WyA3IF0gPSBtNztcbiAgICByZXN1bHRbIDggXSA9IG04O1xuICB9LFxuXG4gIC8qXG4gICAqIFdyaXRlcyB0aGUgcHJvZHVjdCAoIG1hdHJpeCAqIHZlY3RvciApIGludG8gcmVzdWx0LiAoaW4tcGxhY2UgbW9kaWZpY2F0aW9uIGlzIE9LKVxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtYXRyaXggLSBbaW5wdXRdIDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2ZWN0b3IgLSBbaW5wdXRdXG4gICAqIEBwYXJhbSB7VmVjdG9yM30gcmVzdWx0IC0gW291dHB1dF1cbiAgICovXG4gIG11bHQzVmVjdG9yMyggbWF0cml4LCB2ZWN0b3IsIHJlc3VsdCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYXRyaXgubGVuZ3RoID49IDkgKTtcbiAgICBjb25zdCB4ID0gbWF0cml4WyAwIF0gKiB2ZWN0b3IueCArIG1hdHJpeFsgMSBdICogdmVjdG9yLnkgKyBtYXRyaXhbIDIgXSAqIHZlY3Rvci56O1xuICAgIGNvbnN0IHkgPSBtYXRyaXhbIDMgXSAqIHZlY3Rvci54ICsgbWF0cml4WyA0IF0gKiB2ZWN0b3IueSArIG1hdHJpeFsgNSBdICogdmVjdG9yLno7XG4gICAgY29uc3QgeiA9IG1hdHJpeFsgNiBdICogdmVjdG9yLnggKyBtYXRyaXhbIDcgXSAqIHZlY3Rvci55ICsgbWF0cml4WyA4IF0gKiB2ZWN0b3IuejtcbiAgICByZXN1bHQueCA9IHg7XG4gICAgcmVzdWx0LnkgPSB5O1xuICAgIHJlc3VsdC56ID0gejtcbiAgfSxcblxuICAvKlxuICAgKiBTd2FwcyB0d28gY29sdW1ucyBpbiBhIG1hdHJpeCwgbmVnYXRpbmcgb25lIG9mIHRoZW0gdG8gbWFpbnRhaW4gdGhlIHNpZ24gb2YgdGhlIGRldGVybWluYW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtYXRyaXggLSBbaW5wdXRdIDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkeDAgLSBJbiB0aGUgcmFuZ2UgWzAsMl1cbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkeDEgLSBJbiB0aGUgcmFuZ2UgWzAsMl1cbiAgICovXG4gIHN3YXBOZWdhdGVDb2x1bW4oIG1hdHJpeCwgaWR4MCwgaWR4MSApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYXRyaXgubGVuZ3RoID49IDkgKTtcbiAgICBjb25zdCB0bXAwID0gbWF0cml4WyBpZHgwIF07XG4gICAgY29uc3QgdG1wMSA9IG1hdHJpeFsgaWR4MCArIDMgXTtcbiAgICBjb25zdCB0bXAyID0gbWF0cml4WyBpZHgwICsgNiBdO1xuXG4gICAgbWF0cml4WyBpZHgwIF0gPSBtYXRyaXhbIGlkeDEgXTtcbiAgICBtYXRyaXhbIGlkeDAgKyAzIF0gPSBtYXRyaXhbIGlkeDEgKyAzIF07XG4gICAgbWF0cml4WyBpZHgwICsgNiBdID0gbWF0cml4WyBpZHgxICsgNiBdO1xuXG4gICAgbWF0cml4WyBpZHgxIF0gPSAtdG1wMDtcbiAgICBtYXRyaXhbIGlkeDEgKyAzIF0gPSAtdG1wMTtcbiAgICBtYXRyaXhbIGlkeDEgKyA2IF0gPSAtdG1wMjtcbiAgfSxcblxuICAvKlxuICAgKiBTZXRzIHRoZSByZXN1bHQgbWF0cml4IHRvIHRoZSBpZGVudGl0eS5cbiAgICpcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmVzdWx0IC0gW291dHB1dF0gM3gzIE1hdHJpeFxuICAgKi9cbiAgc2V0SWRlbnRpdHkzKCByZXN1bHQgKSB7XG4gICAgcmVzdWx0WyAwIF0gPSByZXN1bHRbIDQgXSA9IHJlc3VsdFsgOCBdID0gMTsgLy8gZGlhZ29uYWxcbiAgICByZXN1bHRbIDEgXSA9IHJlc3VsdFsgMiBdID0gcmVzdWx0WyAzIF0gPSByZXN1bHRbIDUgXSA9IHJlc3VsdFsgNiBdID0gcmVzdWx0WyA3IF0gPSAwOyAvLyBub24tZGlhZ29uYWxcbiAgfSxcblxuICAvKlxuICAgKiBTZXRzIHRoZSByZXN1bHQgbWF0cml4IHRvIHRoZSBHaXZlbnMgcm90YXRpb24gKHBlcmZvcm1zIGEgcm90YXRpb24gYmV0d2VlbiB0d28gY29tcG9uZW50cykuIEluc3RlYWQgb2YgYW4gYW5nbGUsXG4gICAqIHRoZSAnY29zJyBhbmQgJ3NpbicgdmFsdWVzIGFyZSBwYXNzZWQgaW4gZGlyZWN0bHkgc2luY2Ugd2Ugc2tpcCB0aGUgdHJpZ29ub21ldHJ5IGFsbW9zdCBldmVyeXdoZXJlIHdlIGNhbi5cbiAgICpcbiAgICogU2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvR2l2ZW5zX3JvdGF0aW9uIChub3RlIHRoYXQgd2UgdXNlIHRoZSBvdGhlciBzaWduIGNvbnZlbnRpb24gZm9yIHRoZSBzaW4pXG4gICAqXG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdCAtIFtvdXRwdXRdIDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvcyAtIFtpbnB1dF0gVGhlIGNvc2luZSBvZiB0aGUgR2l2ZW5zIHJvdGF0aW9uIGFuZ2xlXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzaW4gLSBbaW5wdXRdIFRoZSBzaW5lIG9mIHRoZSBHaXZlbnMgcm90YXRpb24gYW5nbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkeDAgLSBbaW5wdXRdIFRoZSBzbWFsbGVyIHJvdy9jb2x1bW4gaW5kZXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkeDEgLSBbaW5wdXRdIFRoZSBsYXJnZXIgcm93L2NvbHVtbiBpbmRleFxuICAgKi9cbiAgc2V0R2l2ZW5zMyggcmVzdWx0LCBjb3MsIHNpbiwgaWR4MCwgaWR4MSApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBpZHgwIDwgaWR4MSApO1xuICAgIHRoaXMuc2V0SWRlbnRpdHkzKCByZXN1bHQgKTtcbiAgICByZXN1bHRbIHRoaXMuaW5kZXgzKCBpZHgwLCBpZHgwICkgXSA9IGNvcztcbiAgICByZXN1bHRbIHRoaXMuaW5kZXgzKCBpZHgxLCBpZHgxICkgXSA9IGNvcztcbiAgICByZXN1bHRbIHRoaXMuaW5kZXgzKCBpZHgwLCBpZHgxICkgXSA9IHNpbjtcbiAgICByZXN1bHRbIHRoaXMuaW5kZXgzKCBpZHgxLCBpZHgwICkgXSA9IC1zaW47XG4gIH0sXG5cbiAgLypcbiAgICogRWZmaWNpZW50bHkgcHJlLW11bHRpcGxlcyB0aGUgbWF0cml4IGluLXBsYWNlIGJ5IHRoZSBzcGVjaWZpZWQgR2l2ZW5zIHJvdGF0aW9uIChtYXRyaXggPD0gcm90YXRpb24gKiBtYXRyaXgpLlxuICAgKiBFcXVpdmFsZW50IHRvIHVzaW5nIHNldEdpdmVuczMgYW5kIG11bHQzLlxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSByZXN1bHQgLSBbaW5wdXQgQU5EIG91dHB1dF0gM3gzIE1hdHJpeFxuICAgKiBAcGFyYW0ge251bWJlcn0gY29zIC0gW2lucHV0XSBUaGUgY29zaW5lIG9mIHRoZSBHaXZlbnMgcm90YXRpb24gYW5nbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNpbiAtIFtpbnB1dF0gVGhlIHNpbmUgb2YgdGhlIEdpdmVucyByb3RhdGlvbiBhbmdsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaWR4MCAtIFtpbnB1dF0gVGhlIHNtYWxsZXIgcm93L2NvbHVtbiBpbmRleFxuICAgKiBAcGFyYW0ge251bWJlcn0gaWR4MSAtIFtpbnB1dF0gVGhlIGxhcmdlciByb3cvY29sdW1uIGluZGV4XG4gICAqL1xuICBwcmVNdWx0M0dpdmVucyggbWF0cml4LCBjb3MsIHNpbiwgaWR4MCwgaWR4MSApIHtcbiAgICBjb25zdCBiYXNlQSA9IGlkeDAgKiAzO1xuICAgIGNvbnN0IGJhc2VCID0gaWR4MSAqIDM7XG4gICAgLy8gbGV4aWNvZ3JhcGhpY2FsbHkgaW4gY29sdW1uLW1ham9yIG9yZGVyIGZvciBcImFmZmluZVwiIHNlY3Rpb25cbiAgICBjb25zdCBhID0gY29zICogbWF0cml4WyBiYXNlQSArIDAgXSArIHNpbiAqIG1hdHJpeFsgYmFzZUIgKyAwIF07XG4gICAgY29uc3QgYiA9IGNvcyAqIG1hdHJpeFsgYmFzZUIgKyAwIF0gLSBzaW4gKiBtYXRyaXhbIGJhc2VBICsgMCBdO1xuICAgIGNvbnN0IGMgPSBjb3MgKiBtYXRyaXhbIGJhc2VBICsgMSBdICsgc2luICogbWF0cml4WyBiYXNlQiArIDEgXTtcbiAgICBjb25zdCBkID0gY29zICogbWF0cml4WyBiYXNlQiArIDEgXSAtIHNpbiAqIG1hdHJpeFsgYmFzZUEgKyAxIF07XG4gICAgY29uc3QgZSA9IGNvcyAqIG1hdHJpeFsgYmFzZUEgKyAyIF0gKyBzaW4gKiBtYXRyaXhbIGJhc2VCICsgMiBdO1xuICAgIGNvbnN0IGYgPSBjb3MgKiBtYXRyaXhbIGJhc2VCICsgMiBdIC0gc2luICogbWF0cml4WyBiYXNlQSArIDIgXTtcbiAgICBtYXRyaXhbIGJhc2VBICsgMCBdID0gYTtcbiAgICBtYXRyaXhbIGJhc2VCICsgMCBdID0gYjtcbiAgICBtYXRyaXhbIGJhc2VBICsgMSBdID0gYztcbiAgICBtYXRyaXhbIGJhc2VCICsgMSBdID0gZDtcbiAgICBtYXRyaXhbIGJhc2VBICsgMiBdID0gZTtcbiAgICBtYXRyaXhbIGJhc2VCICsgMiBdID0gZjtcbiAgfSxcblxuICAvKlxuICAgKiBFZmZpY2llbnRseSBwb3N0LW11bHRpcGxlcyB0aGUgbWF0cml4IGluLXBsYWNlIGJ5IHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIHNwZWNpZmllZCBHaXZlbnMgcm90YXRpb25cbiAgICogKG1hdHJpeCA8PSBtYXRyaXggKiByb3RhdGlvbl5UKS5cbiAgICogRXF1aXZhbGVudCB0byB1c2luZyBzZXRHaXZlbnMzIGFuZCBtdWx0M1JpZ2h0VHJhbnNwb3NlLlxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSByZXN1bHQgLSBbaW5wdXQgQU5EIG91dHB1dF0gM3gzIE1hdHJpeFxuICAgKiBAcGFyYW0ge251bWJlcn0gY29zIC0gW2lucHV0XSBUaGUgY29zaW5lIG9mIHRoZSBHaXZlbnMgcm90YXRpb24gYW5nbGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHNpbiAtIFtpbnB1dF0gVGhlIHNpbmUgb2YgdGhlIEdpdmVucyByb3RhdGlvbiBhbmdsZVxuICAgKiBAcGFyYW0ge251bWJlcn0gaWR4MCAtIFtpbnB1dF0gVGhlIHNtYWxsZXIgcm93L2NvbHVtbiBpbmRleFxuICAgKiBAcGFyYW0ge251bWJlcn0gaWR4MSAtIFtpbnB1dF0gVGhlIGxhcmdlciByb3cvY29sdW1uIGluZGV4XG4gICAqL1xuICBwb3N0TXVsdDNHaXZlbnMoIG1hdHJpeCwgY29zLCBzaW4sIGlkeDAsIGlkeDEgKSB7XG4gICAgLy8gbGV4aWNvZ3JhcGhpY2FsbHkgaW4gcm93LW1ham9yIG9yZGVyIGZvciB0aGUgXCJ0cmFuc3Bvc2VkIGFmZmluZVwiIHNlY3Rpb25cbiAgICBjb25zdCBhID0gY29zICogbWF0cml4WyBpZHgwICsgMCBdICsgc2luICogbWF0cml4WyBpZHgxICsgMCBdO1xuICAgIGNvbnN0IGIgPSBjb3MgKiBtYXRyaXhbIGlkeDEgKyAwIF0gLSBzaW4gKiBtYXRyaXhbIGlkeDAgKyAwIF07XG4gICAgY29uc3QgYyA9IGNvcyAqIG1hdHJpeFsgaWR4MCArIDMgXSArIHNpbiAqIG1hdHJpeFsgaWR4MSArIDMgXTtcbiAgICBjb25zdCBkID0gY29zICogbWF0cml4WyBpZHgxICsgMyBdIC0gc2luICogbWF0cml4WyBpZHgwICsgMyBdO1xuICAgIGNvbnN0IGUgPSBjb3MgKiBtYXRyaXhbIGlkeDAgKyA2IF0gKyBzaW4gKiBtYXRyaXhbIGlkeDEgKyA2IF07XG4gICAgY29uc3QgZiA9IGNvcyAqIG1hdHJpeFsgaWR4MSArIDYgXSAtIHNpbiAqIG1hdHJpeFsgaWR4MCArIDYgXTtcbiAgICBtYXRyaXhbIGlkeDAgKyAwIF0gPSBhO1xuICAgIG1hdHJpeFsgaWR4MSArIDAgXSA9IGI7XG4gICAgbWF0cml4WyBpZHgwICsgMyBdID0gYztcbiAgICBtYXRyaXhbIGlkeDEgKyAzIF0gPSBkO1xuICAgIG1hdHJpeFsgaWR4MCArIDYgXSA9IGU7XG4gICAgbWF0cml4WyBpZHgxICsgNiBdID0gZjtcbiAgfSxcblxuICAvKlxuICAgKiBaZXJvcyBvdXQgdGhlIFtpZHgwLGlkeDFdIGFuZCBbaWR4MSxpZHgwXSBlbnRyaWVzIG9mIHRoZSBtYXRyaXggbVMgYnkgYXBwbHlpbmcgYSBHaXZlbnMgcm90YXRpb24gYXMgcGFydCBvZiB0aGVcbiAgICogSmFjb2JpIGl0ZXJhdGlvbi4gSW4gYWRkaXRpb24sIHRoZSBHaXZlbnMgcm90YXRpb24gaXMgcHJlcGVuZGVkIHRvIG1RIHNvIHdlIGNhbiB0cmFjayB0aGUgYWNjdW11bGF0ZWQgcm90YXRpb25zXG4gICAqIGFwcGxpZWQgKHRoaXMgaXMgaG93IHdlIGdldCBWIGluIHRoZSBTVkQpLlxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtUyAtIFtpbnB1dCBBTkQgb3V0cHV0XSBTeW1tZXRyaWMgM3gzIE1hdHJpeFxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtUSAtIFtpbnB1dCBBTkQgb3V0cHV0XSBVbml0YXJ5IDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkeDAgLSBbaW5wdXRdIFRoZSBzbWFsbGVyIHJvdy9jb2x1bW4gaW5kZXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGlkeDEgLSBbaW5wdXRdIFRoZSBsYXJnZXIgcm93L2NvbHVtbiBpbmRleFxuICAgKi9cbiAgYXBwbHlKYWNvYmkzKCBtUywgbVEsIGlkeDAsIGlkeDEgKSB7XG4gICAgLy8gc3VibWF0cml4IGVudHJpZXMgZm9yIGlkeDAsaWR4MVxuICAgIGNvbnN0IGExMSA9IG1TWyAzICogaWR4MCArIGlkeDAgXTtcbiAgICBjb25zdCBhMTIgPSBtU1sgMyAqIGlkeDAgKyBpZHgxIF07IC8vIHdlIGFzc3VtZSBtUyBpcyBzeW1tZXRyaWMsIHNvIHdlIGRvbid0IG5lZWQgYTIxXG4gICAgY29uc3QgYTIyID0gbVNbIDMgKiBpZHgxICsgaWR4MSBdO1xuXG4gICAgLy8gQXBwcm94aW1hdGUgZ2l2ZW5zIGFuZ2xlLCBzZWUgaHR0cHM6Ly9ncmFwaGljcy5jcy53aXNjLmVkdS9QYXBlcnMvMjAxMS9NU1RUUzExL1NWRF9UUjE2OTAucGRmIChzZWN0aW9uIDIuMylcbiAgICAvLyBcIkNvbXB1dGluZyB0aGUgU2luZ3VsYXIgVmFsdWUgRGVjb21wb3NpdGlvbiBvZiAzeDMgbWF0cmljZXMgd2l0aCBtaW5pbWFsIGJyYW5jaGluZyBhbmQgZWxlbWVudGFyeSBmbG9hdGluZyBwb2ludCBvcGVyYXRpb25zXCJcbiAgICAvLyBBbGVrYSBNY0FkYW1zLCBBbmRyZXcgU2VsbGUsIFJhc211cyBUYW1zdG9yZiwgSm9zZXBoIFRlcmFuLCBFZnR5Y2hpb3MgU2lmYWtpc1xuICAgIGNvbnN0IGxocyA9IGExMiAqIGExMjtcbiAgICBsZXQgcmhzID0gYTExIC0gYTIyO1xuICAgIHJocyA9IHJocyAqIHJocztcbiAgICBjb25zdCB1c2VBbmdsZSA9IGxocyA8IHJocztcbiAgICBjb25zdCB3ID0gMSAvIE1hdGguc3FydCggbGhzICsgcmhzICk7XG4gICAgLy8gTk9URTogZXhhY3QgR2l2ZW5zIGFuZ2xlIGlzIDAuNSAqIE1hdGguYXRhbiggMiAqIGExMiAvICggYTExIC0gYTIyICkgKSwgYnV0IGNsYW1wZWQgdG8gd2l0aGluZyArLU1hdGguUEkgLyA0XG4gICAgY29uc3QgY29zID0gdXNlQW5nbGUgPyAoIHcgKiAoIGExMSAtIGEyMiApICkgOiBTUVJUX0hBTEY7XG4gICAgY29uc3Qgc2luID0gdXNlQW5nbGUgPyAoIHcgKiBhMTIgKSA6IFNRUlRfSEFMRjtcblxuICAgIC8vIFMnID0gUSAqIFMgKiB0cmFuc3Bvc2UoIFEgKVxuICAgIHRoaXMucHJlTXVsdDNHaXZlbnMoIG1TLCBjb3MsIHNpbiwgaWR4MCwgaWR4MSApO1xuICAgIHRoaXMucG9zdE11bHQzR2l2ZW5zKCBtUywgY29zLCBzaW4sIGlkeDAsIGlkeDEgKTtcblxuICAgIC8vIFEnID0gUSAqIG1RXG4gICAgdGhpcy5wcmVNdWx0M0dpdmVucyggbVEsIGNvcywgc2luLCBpZHgwLCBpZHgxICk7XG4gIH0sXG5cbiAgLypcbiAgICogVGhlIEphY29iaSBtZXRob2QsIHdoaWNoIGluIHR1cm4gemVyb3Mgb3V0IGFsbCB0aGUgbm9uLWRpYWdvbmFsIGVudHJpZXMgcmVwZWF0ZWRseSB1bnRpbCBtUyBjb252ZXJnZXMgaW50b1xuICAgKiBhIGRpYWdvbmFsIG1hdHJpeC4gV2UgdHJhY2sgdGhlIGFwcGxpZWQgR2l2ZW5zIHJvdGF0aW9ucyBpbiBtUSwgc28gdGhhdCB3aGVuIGdpdmVuIG1TIGFuZCBtUT1pZGVudGl0eSwgd2Ugd2lsbFxuICAgKiBtYWludGFpbiB0aGUgdmFsdWUgbVEgKiBtUyAqIG1RXlRcbiAgICpcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gbVMgLSBbaW5wdXQgQU5EIG91dHB1dF0gU3ltbWV0cmljIDN4MyBNYXRyaXhcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gbVEgLSBbaW5wdXQgQU5EIG91dHB1dF0gVW5pdGFyeSAzeDMgTWF0cml4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuIC0gW2lucHV0XSBUaGUgbnVtYmVyIG9mIGl0ZXJhdGlvbnMgdG8gcnVuXG4gICAqL1xuICBqYWNvYmlJdGVyYXRpb24zKCBtUywgbVEsIG4gKSB7XG4gICAgLy8gZm9yIDN4Mywgd2UgZWxpbWluYXRlIG5vbi1kaWFnb25hbCBlbnRyaWVzIGl0ZXJhdGl2ZWx5XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgdGhpcy5hcHBseUphY29iaTMoIG1TLCBtUSwgMCwgMSApO1xuICAgICAgdGhpcy5hcHBseUphY29iaTMoIG1TLCBtUSwgMCwgMiApO1xuICAgICAgdGhpcy5hcHBseUphY29iaTMoIG1TLCBtUSwgMSwgMiApO1xuICAgIH1cbiAgfSxcblxuICAvKlxuICAgKiBPbmUgc3RlcCBpbiBjb21wdXRpbmcgdGhlIFFSIGRlY29tcG9zaXRpb24uIFplcm9zIG91dCB0aGUgKHJvdyxjb2wpIGVudHJ5IGluICdyJywgd2hpbGUgbWFpbnRhaW5pbmcgdGhlXG4gICAqIHZhbHVlIG9mIChxICogcikuIFdlIHdpbGwgZW5kIHVwIHdpdGggYW4gb3J0aG9nb25hbCBRIGFuZCB1cHBlci10cmlhbmd1bGFyIFIgKG9yIGluIHRoZSBTVkQgY2FzZSxcbiAgICogUiB3aWxsIGJlIGRpYWdvbmFsKVxuICAgKlxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBxIC0gW2lucHV0IEFORCBvdXB1dF0gM3gzIE1hdHJpeFxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSByIC0gW2lucHV0IEFORCBvdXB1dF0gM3gzIE1hdHJpeFxuICAgKiBAcGFyYW0ge251bWJlcn0gcm93IC0gW2lucHV0XSBUaGUgcm93IG9mIHRoZSBlbnRyeSB0byB6ZXJvIG91dFxuICAgKiBAcGFyYW0ge251bWJlcn0gY29sIC0gW2lucHV0XSBUaGUgY29sdW1uIG9mIHRoZSBlbnRyeSB0byB6ZXJvIG91dFxuICAgKi9cbiAgcXJBbm5paGlsYXRlMyggcSwgciwgcm93LCBjb2wgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcm93ID4gY29sICk7IC8vIG9ubHkgaW4gdGhlIGxvd2VyLXRyaWFuZ3VsYXIgYXJlYVxuXG4gICAgY29uc3QgZXBzaWxvbiA9IDAuMDAwMDAwMDAwMTtcbiAgICBsZXQgY29zO1xuICAgIGxldCBzaW47XG5cbiAgICBjb25zdCBkaWFnb25hbFZhbHVlID0gclsgdGhpcy5pbmRleDMoIGNvbCwgY29sICkgXTtcbiAgICBjb25zdCB0YXJnZXRWYWx1ZSA9IHJbIHRoaXMuaW5kZXgzKCByb3csIGNvbCApIF07XG4gICAgY29uc3QgZGlhZ29uYWxTcXVhcmVkID0gZGlhZ29uYWxWYWx1ZSAqIGRpYWdvbmFsVmFsdWU7XG4gICAgY29uc3QgdGFyZ2V0U3F1YXJlZCA9IHRhcmdldFZhbHVlICogdGFyZ2V0VmFsdWU7XG5cbiAgICAvLyBoYW5kbGUgdGhlIGNhc2Ugd2hlcmUgYm90aCAocm93LGNvbCkgYW5kIChjb2wsY29sKSBhcmUgdmVyeSBzbWFsbCAod291bGQgY2F1c2UgaW5zdGFiaWxpdGllcylcbiAgICBpZiAoIGRpYWdvbmFsU3F1YXJlZCArIHRhcmdldFNxdWFyZWQgPCBlcHNpbG9uICkge1xuICAgICAgY29zID0gZGlhZ29uYWxWYWx1ZSA+IDAgPyAxIDogMDtcbiAgICAgIHNpbiA9IDA7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgY29uc3QgcnNxciA9IDEgLyBNYXRoLnNxcnQoIGRpYWdvbmFsU3F1YXJlZCArIHRhcmdldFNxdWFyZWQgKTtcbiAgICAgIGNvcyA9IHJzcXIgKiBkaWFnb25hbFZhbHVlO1xuICAgICAgc2luID0gcnNxciAqIHRhcmdldFZhbHVlO1xuICAgIH1cblxuICAgIHRoaXMucHJlTXVsdDNHaXZlbnMoIHIsIGNvcywgc2luLCBjb2wsIHJvdyApO1xuICAgIHRoaXMucG9zdE11bHQzR2l2ZW5zKCBxLCBjb3MsIHNpbiwgY29sLCByb3cgKTtcbiAgfSxcblxuICAvKlxuICAgKiAzeDMgU2luZ3VsYXIgVmFsdWUgRGVjb21wb3NpdGlvbiwgaGFuZGxpbmcgc2luZ3VsYXIgY2FzZXMuXG4gICAqIEJhc2VkIG9uIGh0dHBzOi8vZ3JhcGhpY3MuY3Mud2lzYy5lZHUvUGFwZXJzLzIwMTEvTVNUVFMxMS9TVkRfVFIxNjkwLnBkZlxuICAgKiBcIkNvbXB1dGluZyB0aGUgU2luZ3VsYXIgVmFsdWUgRGVjb21wb3NpdGlvbiBvZiAzeDMgbWF0cmljZXMgd2l0aCBtaW5pbWFsIGJyYW5jaGluZyBhbmQgZWxlbWVudGFyeSBmbG9hdGluZyBwb2ludCBvcGVyYXRpb25zXCJcbiAgICogQWxla2EgTWNBZGFtcywgQW5kcmV3IFNlbGxlLCBSYXNtdXMgVGFtc3RvcmYsIEpvc2VwaCBUZXJhbiwgRWZ0eWNoaW9zIFNpZmFraXNcbiAgICpcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gYSAtIFtpbnB1dF0gM3gzIE1hdHJpeCB0aGF0IHdlIHdhbnQgdGhlIFNWRCBvZi5cbiAgICogQHBhcmFtIHtudW1iZXJ9IGphY29iaUl0ZXJhdGlvbkNvdW50IC0gW2lucHV0XSBIb3cgbWFueSBKYWNvYmkgaXRlcmF0aW9ucyB0byBydW4gKGxhcmdlciBpcyBtb3JlIGFjY3VyYXRlIHRvIGEgcG9pbnQpXG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdFUgLSBbb3V0cHV0XSAzeDMgVSBtYXRyaXggKHVuaXRhcnkpXG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdFNpZ21hIC0gW291dHB1dF0gM3gzIGRpYWdvbmFsIG1hdHJpeCBvZiBzaW5ndWxhciB2YWx1ZXNcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmVzdWx0ViAtIFtvdXRwdXRdIDN4MyBWIG1hdHJpeCAodW5pdGFyeSlcbiAgICovXG4gIHN2ZDMoIGEsIGphY29iaUl0ZXJhdGlvbkNvdW50LCByZXN1bHRVLCByZXN1bHRTaWdtYSwgcmVzdWx0ViApIHtcbiAgICAvLyBzaG9ydGhhbmRzXG4gICAgY29uc3QgcSA9IHJlc3VsdFU7XG4gICAgY29uc3QgdiA9IHJlc3VsdFY7XG4gICAgY29uc3QgciA9IHJlc3VsdFNpZ21hO1xuXG4gICAgLy8gZm9yIG5vdywgdXNlICdyJyBhcyBvdXIgUyA9PSB0cmFuc3Bvc2UoIEEgKSAqIEEsIHNvIHdlIGRvbid0IGhhdmUgdG8gdXNlIHNjcmF0Y2ggbWF0cmljZXNcbiAgICB0aGlzLm11bHQzTGVmdFRyYW5zcG9zZSggYSwgYSwgciApO1xuICAgIC8vIHdlJ2xsIGFjY3VtdWxhdGUgaW50byAncScgPT0gdHJhbnNwb3NlKCBWICkgZHVyaW5nIHRoZSBKYWNvYmkgaXRlcmF0aW9uXG4gICAgdGhpcy5zZXRJZGVudGl0eTMoIHEgKTtcblxuICAgIC8vIEphY29iaSBpdGVyYXRpb24gdHVybnMgUSBpbnRvIFZeVCBhbmQgUiBpbnRvIFNpZ21hXjIgKHdlJ2xsIGRpdGNoIFIgc2luY2UgdGhlIFFSIGRlY29tcG9zaXRpb24gd2lsbCBiZSBiZXRlcilcbiAgICB0aGlzLmphY29iaUl0ZXJhdGlvbjMoIHIsIHEsIGphY29iaUl0ZXJhdGlvbkNvdW50ICk7XG4gICAgLy8gZmluYWwgZGV0ZXJtaW5hdGlvbiBvZiBWXG4gICAgdGhpcy50cmFuc3Bvc2UzKCBxLCB2ICk7IC8vIGRvbmUgd2l0aCB0aGlzICdxJyB1bnRpbCB3ZSByZXVzZSB0aGUgc2NyYXRjaCBtYXRyaXggbGF0ZXIgYmVsb3cgZm9yIHRoZSBRUiBkZWNvbXBvc2l0aW9uXG5cbiAgICB0aGlzLm11bHQzKCBhLCB2LCByICk7IC8vIFIgPSBBVlxuXG4gICAgLy8gU29ydCBjb2x1bW5zIG9mIFIgYW5kIFYgYmFzZWQgb24gc2luZ3VsYXIgdmFsdWVzIChuZWVkZWQgZm9yIHRoZSBRUiBzdGVwLCBhbmQgdXNlZnVsIGFueXdheXMpLlxuICAgIC8vIFRoZWlyIHByb2R1Y3Qgd2lsbCByZW1haW4gdW5jaGFuZ2VkLlxuICAgIGxldCBtYWcwID0gclsgMCBdICogclsgMCBdICsgclsgMyBdICogclsgMyBdICsgclsgNiBdICogclsgNiBdOyAvLyBjb2x1bW4gdmVjdG9yIG1hZ25pdHVkZXNcbiAgICBsZXQgbWFnMSA9IHJbIDEgXSAqIHJbIDEgXSArIHJbIDQgXSAqIHJbIDQgXSArIHJbIDcgXSAqIHJbIDcgXTtcbiAgICBsZXQgbWFnMiA9IHJbIDIgXSAqIHJbIDIgXSArIHJbIDUgXSAqIHJbIDUgXSArIHJbIDggXSAqIHJbIDggXTtcbiAgICBsZXQgdG1wTWFnO1xuICAgIGlmICggbWFnMCA8IG1hZzEgKSB7XG4gICAgICAvLyBzd2FwIG1hZ25pdHVkZXNcbiAgICAgIHRtcE1hZyA9IG1hZzA7XG4gICAgICBtYWcwID0gbWFnMTtcbiAgICAgIG1hZzEgPSB0bXBNYWc7XG4gICAgICB0aGlzLnN3YXBOZWdhdGVDb2x1bW4oIHIsIDAsIDEgKTtcbiAgICAgIHRoaXMuc3dhcE5lZ2F0ZUNvbHVtbiggdiwgMCwgMSApO1xuICAgIH1cbiAgICBpZiAoIG1hZzAgPCBtYWcyICkge1xuICAgICAgLy8gc3dhcCBtYWduaXR1ZGVzXG4gICAgICB0bXBNYWcgPSBtYWcwO1xuICAgICAgbWFnMCA9IG1hZzI7XG4gICAgICBtYWcyID0gdG1wTWFnO1xuICAgICAgdGhpcy5zd2FwTmVnYXRlQ29sdW1uKCByLCAwLCAyICk7XG4gICAgICB0aGlzLnN3YXBOZWdhdGVDb2x1bW4oIHYsIDAsIDIgKTtcbiAgICB9XG4gICAgaWYgKCBtYWcxIDwgbWFnMiApIHtcbiAgICAgIHRoaXMuc3dhcE5lZ2F0ZUNvbHVtbiggciwgMSwgMiApO1xuICAgICAgdGhpcy5zd2FwTmVnYXRlQ29sdW1uKCB2LCAxLCAyICk7XG4gICAgfVxuXG4gICAgLy8gUVIgZGVjb21wb3NpdGlvblxuICAgIHRoaXMuc2V0SWRlbnRpdHkzKCBxICk7IC8vIHJldXNpbmcgUSBub3cgZm9yIHRoZSBRUlxuICAgIC8vIFplcm8gb3V0IGFsbCB0aHJlZSBzdHJpY3RseSBsb3dlci10cmlhbmd1bGFyIHZhbHVlcy4gU2hvdWxkIHR1cm4gdGhlIG1hdHJpeCBkaWFnb25hbFxuICAgIHRoaXMucXJBbm5paGlsYXRlMyggcSwgciwgMSwgMCApO1xuICAgIHRoaXMucXJBbm5paGlsYXRlMyggcSwgciwgMiwgMCApO1xuICAgIHRoaXMucXJBbm5paGlsYXRlMyggcSwgciwgMiwgMSApO1xuXG4gICAgLy8gY2hlY2tzIGZvciBhIHNpbmd1bGFyIFUgdmFsdWUsIHdlJ2xsIGFkZCBpbiB0aGUgbmVlZGVkIDEgZW50cmllcyB0byBtYWtlIHN1cmUgb3VyIFUgaXMgb3J0aG9nb25hbFxuICAgIGNvbnN0IGJpZ0Vwc2lsb24gPSAwLjAwMTsgLy8gdGhleSByZWFsbHkgc2hvdWxkIGJlIGFyb3VuZCAxXG4gICAgaWYgKCBxWyAwIF0gKiBxWyAwIF0gKyBxWyAxIF0gKiBxWyAxIF0gKyBxWyAyIF0gKiBxWyAyIF0gPCBiaWdFcHNpbG9uICkge1xuICAgICAgcVsgMCBdID0gMTtcbiAgICB9XG4gICAgaWYgKCBxWyAzIF0gKiBxWyAzIF0gKyBxWyA0IF0gKiBxWyA0IF0gKyBxWyA1IF0gKiBxWyA1IF0gPCBiaWdFcHNpbG9uICkge1xuICAgICAgcVsgNCBdID0gMTtcbiAgICB9XG4gICAgaWYgKCBxWyA2IF0gKiBxWyA2IF0gKyBxWyA3IF0gKiBxWyA3IF0gKyBxWyA4IF0gKiBxWyA4IF0gPCBiaWdFcHNpbG9uICkge1xuICAgICAgcVsgOCBdID0gMTtcbiAgICB9XG4gIH0sXG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIDN4TiBtYXRyaXggbWF0aFxuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qXG4gICAqIFNldHMgdGhlIDN4TiByZXN1bHQgbWF0cml4IHRvIGJlIG1hZGUgb3V0IG9mIGNvbHVtbiB2ZWN0b3JzXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXkuPFZlY3RvcjM+fSBjb2x1bW5WZWN0b3JzIC0gW2lucHV0XSBMaXN0IG9mIDNEIGNvbHVtbiB2ZWN0b3JzXG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdCAtIFtvdXRwdXRdIDN4TiBNYXRyaXgsIHdoZXJlIE4gaXMgdGhlIG51bWJlciBvZiBjb2x1bW4gdmVjdG9yc1xuICAgKi9cbiAgc2V0VmVjdG9yczMoIGNvbHVtblZlY3RvcnMsIHJlc3VsdCApIHtcbiAgICBjb25zdCBtID0gMztcbiAgICBjb25zdCBuID0gY29sdW1uVmVjdG9ycy5sZW5ndGg7XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByZXN1bHQubGVuZ3RoID49IG0gKiBuLCAnQXJyYXkgbGVuZ3RoIGNoZWNrJyApO1xuXG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgbjsgaSsrICkge1xuICAgICAgY29uc3QgdmVjdG9yID0gY29sdW1uVmVjdG9yc1sgaSBdO1xuICAgICAgcmVzdWx0WyBpIF0gPSB2ZWN0b3IueDtcbiAgICAgIHJlc3VsdFsgaSArIG4gXSA9IHZlY3Rvci55O1xuICAgICAgcmVzdWx0WyBpICsgMiAqIG4gXSA9IHZlY3Rvci56O1xuICAgIH1cbiAgfSxcblxuICAvKlxuICAgKiBSZXRyaWV2ZXMgY29sdW1uIHZlY3RvciB2YWx1ZXMgZnJvbSBhIDN4TiBtYXRyaXguXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtIC0gW2lucHV0XSBUaGUgbnVtYmVyIG9mIHJvd3MgaW4gdGhlIG1hdHJpeCAoc2FuaXR5IGNoZWNrLCBzaG91bGQgYWx3YXlzIGJlIDMpXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuIC0gW2lucHV0XSBUaGUgbnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG1hdHJpeFxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtYXRyaXggLSBbaW5wdXRdIDN4TiBNYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IGNvbHVtbkluZGV4IC0gW2lucHV0XSAzeE4gTWF0cml4XG4gICAqIEBwYXJhbSB7VmVjdG9yM30gcmVzdWx0IC0gW291dHB1dF0gVmVjdG9yIHRvIHN0b3JlIHRoZSB4LHkselxuICAgKi9cbiAgZ2V0Q29sdW1uVmVjdG9yMyggbSwgbiwgbWF0cml4LCBjb2x1bW5JbmRleCwgcmVzdWx0ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG0gPT09IDMgJiYgY29sdW1uSW5kZXggPCBuICk7XG5cbiAgICByZXN1bHQueCA9IG1hdHJpeFsgY29sdW1uSW5kZXggXTtcbiAgICByZXN1bHQueSA9IG1hdHJpeFsgY29sdW1uSW5kZXggKyBuIF07XG4gICAgcmVzdWx0LnogPSBtYXRyaXhbIGNvbHVtbkluZGV4ICsgMiAqIG4gXTtcbiAgfSxcblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogQXJiaXRyYXJ5IGRpbWVuc2lvbiBtYXRyaXggbWF0aFxuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qXG4gICAqIEZyb20gMC1pbmRleGVkIHJvdyBhbmQgY29sdW1uIGluZGljZXMsIHJldHVybnMgdGhlIGluZGV4IGludG8gdGhlIGZsYXQgYXJyYXlcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG0gLSBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgbWF0cml4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuIC0gTnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG1hdHJpeFxuICAgKiBAcGFyYW0ge251bWJlcn0gcm93XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBjb2xcbiAgICovXG4gIGluZGV4KCBtLCBuLCByb3csIGNvbCApIHtcbiAgICByZXR1cm4gbiAqIHJvdyArIGNvbDtcbiAgfSxcblxuICAvKlxuICAgKiBXcml0ZXMgdGhlIHRyYW5zcG9zZSBvZiB0aGUgbWF0cml4IGludG8gdGhlIHJlc3VsdC5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG0gLSBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgb3JpZ2luYWwgbWF0cml4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuIC0gTnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIG9yaWdpbmFsIG1hdHJpeFxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBtYXRyaXggLSBbaW5wdXRdIE14TiBNYXRyaXhcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmVzdWx0IC0gW291dHB1dF0gTnhNIE1hdHJpeFxuICAgKi9cbiAgdHJhbnNwb3NlKCBtLCBuLCBtYXRyaXgsIHJlc3VsdCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYXRyaXgubGVuZ3RoID49IG0gKiBuICk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcmVzdWx0Lmxlbmd0aCA+PSBuICogbSApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1hdHJpeCAhPT0gcmVzdWx0LCAnSW4tcGxhY2UgbW9kaWZpY2F0aW9uIG5vdCBpbXBsZW1lbnRlZCB5ZXQnICk7XG5cbiAgICBmb3IgKCBsZXQgcm93ID0gMDsgcm93IDwgbTsgcm93KysgKSB7XG4gICAgICBmb3IgKCBsZXQgY29sID0gMDsgY29sIDwgbjsgY29sKysgKSB7XG4gICAgICAgIHJlc3VsdFsgbSAqIGNvbCArIHJvdyBdID0gbWF0cml4WyBuICogcm93ICsgY29sIF07XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qXG4gICAqIFdyaXRlcyB0aGUgbWF0cml4IG11bHRpcGxpY2F0aW9uIG9mICggbGVmdCAqIHJpZ2h0ICkgaW50byByZXN1bHRcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IG0gLSBOdW1iZXIgb2Ygcm93cyBpbiB0aGUgbGVmdCBtYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IG4gLSBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgbGVmdCBtYXRyaXgsIG51bWJlciBvZiByb3dzIGluIHRoZSByaWdodCBtYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHAgLSBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgcmlnaHQgbWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IGxlZnQgLSBbaW5wdXRdIE14TiBNYXRyaXhcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmlnaHQgLSBbaW5wdXRdIE54UCBNYXRyaXhcbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmVzdWx0IC0gW291dHB1dF0gTXhQIE1hdHJpeFxuICAgKi9cbiAgbXVsdCggbSwgbiwgcCwgbGVmdCwgcmlnaHQsIHJlc3VsdCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWZ0Lmxlbmd0aCA+PSBtICogbiApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJpZ2h0Lmxlbmd0aCA+PSBuICogcCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJlc3VsdC5sZW5ndGggPj0gbSAqIHAgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWZ0ICE9PSByZXN1bHQgJiYgcmlnaHQgIT09IHJlc3VsdCwgJ0luLXBsYWNlIG1vZGlmaWNhdGlvbiBub3QgaW1wbGVtZW50ZWQgeWV0JyApO1xuXG4gICAgZm9yICggbGV0IHJvdyA9IDA7IHJvdyA8IG07IHJvdysrICkge1xuICAgICAgZm9yICggbGV0IGNvbCA9IDA7IGNvbCA8IHA7IGNvbCsrICkge1xuICAgICAgICBsZXQgeCA9IDA7XG4gICAgICAgIGZvciAoIGxldCBrID0gMDsgayA8IG47IGsrKyApIHtcbiAgICAgICAgICB4ICs9IGxlZnRbIHRoaXMuaW5kZXgoIG0sIG4sIHJvdywgayApIF0gKiByaWdodFsgdGhpcy5pbmRleCggbiwgcCwgaywgY29sICkgXTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRbIHRoaXMuaW5kZXgoIG0sIHAsIHJvdywgY29sICkgXSA9IHg7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qXG4gICAqIFdyaXRlcyB0aGUgbWF0cml4IG11bHRpcGxpY2F0aW9uIG9mICggbGVmdCAqIHRyYW5zcG9zZSggcmlnaHQgKSApIGludG8gcmVzdWx0XG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtIC0gTnVtYmVyIG9mIHJvd3MgaW4gdGhlIGxlZnQgbWF0cml4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBuIC0gTnVtYmVyIG9mIGNvbHVtbnMgaW4gdGhlIGxlZnQgbWF0cml4LCBudW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgcmlnaHQgbWF0cml4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSBwIC0gTnVtYmVyIG9mIHJvd3MgaW4gdGhlIHJpZ2h0IG1hdHJpeFxuICAgKiBAcGFyYW0ge0Zhc3RNYXRoLkFycmF5fSBsZWZ0IC0gW2lucHV0XSBNeE4gTWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJpZ2h0IC0gW2lucHV0XSBQeE4gTWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IHJlc3VsdCAtIFtvdXRwdXRdIE14UCBNYXRyaXhcbiAgICovXG4gIG11bHRSaWdodFRyYW5zcG9zZSggbSwgbiwgcCwgbGVmdCwgcmlnaHQsIHJlc3VsdCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWZ0Lmxlbmd0aCA+PSBtICogbiApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJpZ2h0Lmxlbmd0aCA+PSBuICogcCApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHJlc3VsdC5sZW5ndGggPj0gbSAqIHAgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBsZWZ0ICE9PSByZXN1bHQgJiYgcmlnaHQgIT09IHJlc3VsdCwgJ0luLXBsYWNlIG1vZGlmaWNhdGlvbiBub3QgaW1wbGVtZW50ZWQgeWV0JyApO1xuXG4gICAgZm9yICggbGV0IHJvdyA9IDA7IHJvdyA8IG07IHJvdysrICkge1xuICAgICAgZm9yICggbGV0IGNvbCA9IDA7IGNvbCA8IHA7IGNvbCsrICkge1xuICAgICAgICBsZXQgeCA9IDA7XG4gICAgICAgIGZvciAoIGxldCBrID0gMDsgayA8IG47IGsrKyApIHtcbiAgICAgICAgICB4ICs9IGxlZnRbIHRoaXMuaW5kZXgoIG0sIG4sIHJvdywgayApIF0gKiByaWdodFsgdGhpcy5pbmRleCggcCwgbiwgY29sLCBrICkgXTtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHRbIHRoaXMuaW5kZXgoIG0sIHAsIHJvdywgY29sICkgXSA9IHg7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qXG4gICAqIFdyaXRlcyB0aGUgbWF0cml4IGludG8gdGhlIHJlc3VsdCwgcGVybXV0aW5nIHRoZSBjb2x1bW5zLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gbSAtIE51bWJlciBvZiByb3dzIGluIHRoZSBvcmlnaW5hbCBtYXRyaXhcbiAgICogQHBhcmFtIHtudW1iZXJ9IG4gLSBOdW1iZXIgb2YgY29sdW1ucyBpbiB0aGUgb3JpZ2luYWwgbWF0cml4XG4gICAqIEBwYXJhbSB7RmFzdE1hdGguQXJyYXl9IG1hdHJpeCAtIFtpbnB1dF0gTXhOIE1hdHJpeFxuICAgKiBAcGFyYW0ge1Blcm11dGF0aW9ufSBwZXJtdXRhdGlvbiAtIFtpbnB1dF0gUGVybXV0YXRpb25cbiAgICogQHBhcmFtIHtGYXN0TWF0aC5BcnJheX0gcmVzdWx0IC0gW291dHB1dF0gTXhOIE1hdHJpeFxuICAgKi9cbiAgcGVybXV0ZUNvbHVtbnMoIG0sIG4sIG1hdHJpeCwgcGVybXV0YXRpb24sIHJlc3VsdCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYXRyaXggIT09IHJlc3VsdCwgJ0luLXBsYWNlIG1vZGlmaWNhdGlvbiBub3QgaW1wbGVtZW50ZWQgeWV0JyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1hdHJpeC5sZW5ndGggPj0gbSAqIG4gKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByZXN1bHQubGVuZ3RoID49IG0gKiBuICk7XG5cbiAgICBmb3IgKCBsZXQgY29sID0gMDsgY29sIDwgbjsgY29sKysgKSB7XG4gICAgICBjb25zdCBwZXJtdXRlZENvbHVtbkluZGV4ID0gcGVybXV0YXRpb24uaW5kaWNlc1sgY29sIF07XG4gICAgICBmb3IgKCBsZXQgcm93ID0gMDsgcm93IDwgbTsgcm93KysgKSB7XG4gICAgICAgIHJlc3VsdFsgdGhpcy5pbmRleCggbSwgbiwgcm93LCBjb2wgKSBdID0gbWF0cml4WyB0aGlzLmluZGV4KCBtLCBuLCByb3csIHBlcm11dGVkQ29sdW1uSW5kZXggKSBdO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbmRvdC5yZWdpc3RlciggJ01hdHJpeE9wczMnLCBNYXRyaXhPcHMzICk7XG5cbmV4cG9ydCBkZWZhdWx0IE1hdHJpeE9wczM7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsR0FBRyxNQUFNLFVBQVU7O0FBRTFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLE1BQU1DLFNBQVMsR0FBR0MsSUFBSSxDQUFDQyxJQUFJLENBQUUsR0FBRyxDQUFFO0FBRWxDLE1BQU1DLFVBQVUsR0FBRztFQUNqQjtFQUNBQyxLQUFLLEVBQUVMLEdBQUcsQ0FBQ00sU0FBUztFQUVwQjtBQUNGO0FBQ0E7O0VBRUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLE1BQU1BLENBQUVDLEdBQUcsRUFBRUMsR0FBRyxFQUFHO0lBQ2pCQyxNQUFNLElBQUlBLE1BQU0sQ0FBRUYsR0FBRyxJQUFJLENBQUMsSUFBSUEsR0FBRyxHQUFHLENBQUMsQ0FBRTtJQUN2Q0UsTUFBTSxJQUFJQSxNQUFNLENBQUVELEdBQUcsSUFBSSxDQUFDLElBQUlBLEdBQUcsR0FBRyxDQUFDLENBQUU7SUFDdkMsT0FBTyxDQUFDLEdBQUdELEdBQUcsR0FBR0MsR0FBRztFQUN0QixDQUFDO0VBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VFLElBQUlBLENBQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFHO0lBQ3JCSCxNQUFNLElBQUlBLE1BQU0sQ0FBRUUsTUFBTSxDQUFD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QUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1QLEVBQUUsR0FBR00sSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUU7SUFDbkYsTUFBTUUsRUFBRSxHQUFHSCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRixNQUFNTixFQUFFLEdBQUdLLElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1MLEVBQUUsR0FBR0ksSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUU7SUFDbkYsTUFBTUosRUFBRSxHQUFHRyxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRixNQUFNRyxFQUFFLEdBQUdKLElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GWixNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdhLEVBQUU7SUFDaEJiLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR0csRUFBRTtJQUNoQkgsTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHSSxFQUFFO0lBQ2hCSixNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdLLEVBQUU7SUFDaEJMLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR2MsRUFBRTtJQUNoQmQsTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHTSxFQUFFO0lBQ2hCTixNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdPLEVBQUU7SUFDaEJQLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR1EsRUFBRTtJQUNoQlIsTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHZSxFQUFFO0VBQ2xCLENBQUM7RUFFRDtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxrQkFBa0JBLENBQUVMLElBQUksRUFBRUMsS0FBSyxFQUFFWixNQUFNLEVBQUc7SUFDeENILE1BQU0sSUFBSUEsTUFBTSxDQUFFYyxJQUFJLENBQUNWLE1BQU0sSUFBSSxDQUFDLENBQUU7SUFDcENKLE1BQU0sSUFBSUEsTUFBTSxDQUFFZSxLQUFLLENBQUNYLE1BQU0sSUFBSSxDQUFDLENBQUU7SUFDckNKLE1BQU0sSUFBSUEsTUFBTSxDQUFFRyxNQUFNLENBQUNDLE1BQU0sSUFBSSxDQUFDLENBQUU7SUFDdEMsTUFBTVksRUFBRSxHQUFHRixJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRixNQUFNVCxFQUFFLEdBQUdRLElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1SLEVBQUUsR0FBR08sSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUU7SUFDbkYsTUFBTVAsRUFBRSxHQUFHTSxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRixNQUFNRSxFQUFFLEdBQUdILElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1OLEVBQUUsR0FBR0ssSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdE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R0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1FLEVBQUUsR0FBR0gsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUU7SUFDbkYsTUFBTU4sRUFBRSxHQUFHSyxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRixNQUFNTCxFQUFFLEdBQUdJLElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1KLEVBQUUsR0FBR0csSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUU7SUFDbkYsTUFBTUcsRUFBRSxHQUFHSixJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRlosTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHYSxFQUFFO0lBQ2hCYixNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdHLEVBQUU7SUFDaEJILE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR0ksRUFBRTtJQUNoQkosTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHSyxFQUFFO0lBQ2hCTCxNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdjLEVBQUU7SUFDaEJkLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR00sRUFBRTtJQUNoQk4sTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHTyxFQUFFO0lBQ2hCUCxNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdRLEVBQUU7SUFDaEJSLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR2UsRUFBRTtFQUNsQixDQUFDO0VBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VHLGtCQUFrQkEsQ0FBRVAsSUFBSSxFQUFFQyxLQUFLLEVBQUVaLE1BQU0sRUFBRztJQUN4Q0gsTUFBTSxJQUFJQSxNQUFNLENBQUVjLElBQUksQ0FBQ1YsTUFBTSxJQUFJLENBQUMsQ0FBRTtJQUNwQ0osTUFBTSxJQUFJQSxNQUFNLENBQUVlLEtBQUssQ0FBQ1gsTUFBTSxJQUFJLENBQUMsQ0FBRTtJQUNyQ0osTUFBTSxJQUFJQSxNQUFNLENBQUVHLE1BQU0sQ0FBQ0MsTUFBTSxJQUFJLENBQUMsQ0FBRTtJQUN0QyxNQUFNWSxFQUFFLEdBQUdGLElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1ULEVBQUUsR0FBR1EsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUU7SUFDbkYsTUFBTVIsRUFBRSxHQUFHTyxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRixNQUFNUCxFQUFFLEdBQUdNLElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFO0lBQ25GLE1BQU1FLEVBQUUsR0FBR0gsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRSxHQUFHRCxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUU7SUFDbkYsTUFBTU4sRUFBRSxHQUFHSyxJQUFJLENBQUUsQ0FBQyxDQUFFLEdBQUdDLEtBQUssQ0FBRSxDQUFDLENBQUUsR0FBR0QsSUFBSSxDQUFFLENBQUMsQ0FBRSxHQUFHQyxLQUFLLENBQUUsQ0FBQyxDQUFFLEdBQUdELElBQUksQ0FBRSxDQUFDLENBQUUsR0FBR0MsS0FBSyxDQUFFLENBQUMsQ0FBRTtJQUNuRixNQUFNTCxFQUFFLEdBQUdJLElBQUksQ0FBRSxDQUFD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QzNCLE1BQU1HLElBQUksR0FBRzdCLE1BQU0sQ0FBRTBCLElBQUksR0FBRyxDQUFDLENBQUU7SUFDL0IsTUFBTUksSUFBSSxHQUFHOUIsTUFBTSxDQUFFMEIsSUFBSSxHQUFHLENBQUMsQ0FBRTtJQUUvQjFCLE1BQU0sQ0FBRTBCLElBQUksQ0FBRSxHQUFHMUIsTUFBTSxDQUFFMkIsSUFBSSxDQUFFO0lBQy9CM0IsTUFBTSxDQUFFMEIsSUFBSSxHQUFHLENBQUMsQ0FBRSxHQUFHMUIsTUFBTSxDQUFFMkIsSUFBSSxHQUFHLENBQUMsQ0FBRTtJQUN2QzNCLE1BQU0sQ0FBRTBCLElBQUksR0FBRyxDQUFDLENBQUUsR0FBRzFCLE1BQU0sQ0FBRTJCLElBQUksR0FBRyxDQUFDLENBQUU7SUFFdkMzQixNQUFNLENBQUUyQixJQUFJLENBQUUsR0FBRyxDQUFDQyxJQUFJO0lBQ3RCNUIsTUFBTSxDQUFFMkIsSUFBSSxHQUFHLENBQUMsQ0FBRSxHQUFHLENBQUNFLElBQUk7SUFDMUI3QixNQUFNLENBQUUyQixJQUFJLEdBQUcsQ0FBQyxDQUFFLEdBQUcsQ0FBQ0csSUFBSTtFQUM1QixDQUFDO0VBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxZQUFZQSxDQUFFOUIsTUFBTSxFQUFHO0lBQ3JCQSxNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdBLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR0EsTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQzdDQSxNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdBLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR0EsTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHQSxNQUFNLENBQUUsQ0FBQyxDQUFFLEdBQUdBLE1BQU0sQ0FBRSxDQUFDLENBQUUsR0FBR0EsTUFBTSxDQUFFLENBQUMsQ0FBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ3pGLENBQUM7O0VBRUQ7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Permutation.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * An immutable permutation that can permute an array
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class Permutation {
  /**
   * Creates a permutation that will rearrange a list so that newList[i] = oldList[permutation[i]]
   */
  constructor(indices) {
    this.indices = indices;
  }
  size() {
    return this.indices.length;
  }

  /**
   * Applies the permutation, returning either a new array or number (whatever was provided).
   */
  apply(arrayOrInt) {
    if (typeof arrayOrInt === 'number') {
      // @ts-expect-error
      return this.indices[arrayOrInt];
    } else {
      if (arrayOrInt.length !== this.size()) {
        throw new Error(`Permutation length ${this.size()} not equal to list length ${arrayOrInt.length}`);
      }

      // permute it as an array
      const result = new Array(arrayOrInt.length);
      for (let i = 0; i < arrayOrInt.length; i++) {
        result[i] = arrayOrInt[this.indices[i]];
      }
      // @ts-expect-error
      return result;
    }
  }

  /**
   * Creates a new permutation that is the inverse of this.
   */
  inverted() {
    const newPermutation = new Array(this.size());
    for (let i = 0; i < this.size(); i++) {
      newPermutation[this.indices[i]] = i;
    }
    return new Permutation(newPermutation);
  }
  withIndicesPermuted(indices) {
    const result = [];
    Permutation.forEachPermutation(indices, integers => {
      const oldIndices = this.indices;
      const newPermutation = oldIndices.slice(0);
      for (let i = 0; i < indices.length; i++) {
        newPermutation[indices[i]] = oldIndices[integers[i]];
      }
      result.push(new Permutation(newPermutation));
    });
    return result;
  }
  toString() {
    return `P[${this.indices.join(', ')}]`;
  }
  equals(permutation) {
    return this.indices.length === permutation.indices.length && _.isEqual(this.indices, permutation.indices);
  }

  /**
   * Creates an identity permutation of a given size.
   */
  static identity(size) {
    assert && assert(size >= 0);
    const indices = new Array(size);
    for (let i = 0; i < size; i++) {
      indices[i] = i;
    }
    return new Permutation(indices);
  }

  /**
   * Lists all permutations that have a given size
   */
  static permutations(size) {
    const result = [];
    Permutation.forEachPermutation(js_Utils.rangeInclusive(0, size - 1), integers => {
      result.push(new Permutation(integers.slice()));
    });
    return result;
  }

  /**
   * Calls a callback on every single possible permutation of the given Array
   *
   * @param array
   * @param callback - Called on each permuted version of the array possible
   */
  static forEachPermutation(array, callback) {
    recursiveForEachPermutation(array, [], callback);
  }
  static permutationsOf(array) {
    const results = [];
    Permutation.forEachPermutation(array, result => {
      results.push(result.slice());
    });
    return results;
  }
}
js_dot.register('Permutation', Permutation);

/**
 * Call our function with each permutation of the provided list PREFIXED by prefix, in lexicographic order
 *
 * @param array   List to generate permutations of
 * @param prefix   Elements that should be inserted at the front of each list before each call
 * @param callback Function to call
 */
function recursiveForEachPermutation(array, prefix, callback) {
  if (array.length === 0) {
    callback(prefix);
  } else {
    for (let i = 0; i < array.length; i++) {
      const element = array[i];

      // remove the element from the array
      const nextArray = array.slice(0);
      nextArray.splice(i, 1);

      // add it into the prefix
      const nextPrefix = prefix.slice(0);
      nextPrefix.push(element);
      recursiveForEachPermutation(nextArray, nextPrefix, callback);
    }
  }
}
/* harmony default export */ const js_Permutation = ((/* unused pure expression or super */ null && (Permutation)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJVdGlscyIsIlBlcm11dGF0aW9uIiwiY29uc3RydWN0b3IiLCJpbmRpY2VzIiwic2l6ZSIsImxlbmd0aCIsImFwcGx5IiwiYXJyYXlPckludCIsIkVycm9yIiwicmVzdWx0IiwiQXJyYXkiLCJpIiwiaW52ZXJ0ZWQiLCJuZXdQZXJtdXRhdGlvbiIsIndpdGhJbmRpY2VzUGVybXV0ZWQiLCJmb3JFYWNoUGVybXV0YXRpb24iLCJpbnRlZ2VycyIsIm9sZEluZGljZXMiLCJzbGljZSIsInB1c2giLCJ0b1N0cmluZyIsImpvaW4iLCJlcXVhbHMiLCJwZXJtdXRhdGlvbiIsIl8iLCJpc0VxdWFsIiwiaWRlbnRpdHkiLCJhc3NlcnQiLCJwZXJtdXRhdGlvbnMiLCJyYW5nZUluY2x1c2l2ZSIsImFycmF5IiwiY2FsbGJhY2siLCJyZWN1cnNpdmVGb3JFYWNoUGVybXV0YXRpb24iLCJwZXJtdXRhdGlvbnNPZiIsInJlc3VsdHMiLCJyZWdpc3RlciIsInByZWZpeCIsImVsZW1lbnQiLCJuZXh0QXJyYXkiLCJzcGxpY2UiLCJuZXh0UHJlZml4Il0sInNvdXJjZXMiOlsiUGVybXV0YXRpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQW4gaW1tdXRhYmxlIHBlcm11dGF0aW9uIHRoYXQgY2FuIHBlcm11dGUgYW4gYXJyYXlcbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscy5qcyc7XG5cbmNsYXNzIFBlcm11dGF0aW9uIHtcblxuICBwdWJsaWMgcmVhZG9ubHkgaW5kaWNlczogbnVtYmVyW107XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBwZXJtdXRhdGlvbiB0aGF0IHdpbGwgcmVhcnJhbmdlIGEgbGlzdCBzbyB0aGF0IG5ld0xpc3RbaV0gPSBvbGRMaXN0W3Blcm11dGF0aW9uW2ldXVxuICAgKi9cbiAgcHVibGljIGNvbnN0cnVjdG9yKCBpbmRpY2VzOiBudW1iZXJbXSApIHtcbiAgICB0aGlzLmluZGljZXMgPSBpbmRpY2VzO1xuICB9XG5cbiAgcHVibGljIHNpemUoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5pbmRpY2VzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBsaWVzIHRoZSBwZXJtdXRhdGlvbiwgcmV0dXJuaW5nIGVpdGhlciBhIG5ldyBhcnJheSBvciBudW1iZXIgKHdoYXRldmVyIHdhcyBwcm92aWRlZCkuXG4gICAqL1xuICBwdWJsaWMgYXBwbHk8RSwgVCBleHRlbmRzIEVbXSB8IG51bWJlcj4oIGFycmF5T3JJbnQ6IFQgKTogVCBleHRlbmRzIEVbXSA/IG51bWJlcltdIDogbnVtYmVyIHtcbiAgICBpZiAoIHR5cGVvZiBhcnJheU9ySW50ID09PSAnbnVtYmVyJyApIHtcbiAgICAgIC8vIEB0cy1leHBlY3QtZXJyb3JcbiAgICAgIHJldHVybiB0aGlzLmluZGljZXNbIGFycmF5T3JJbnQgXTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICBpZiAoIGFycmF5T3JJbnQubGVuZ3RoICE9PSB0aGlzLnNpemUoKSApIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCBgUGVybXV0YXRpb24gbGVuZ3RoICR7dGhpcy5zaXplKCl9IG5vdCBlcXVhbCB0byBsaXN0IGxlbmd0aCAke2FycmF5T3JJbnQubGVuZ3RofWAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gcGVybXV0ZSBpdCBhcyBhbiBhcnJheVxuICAgICAgY29uc3QgcmVzdWx0OiBFW10gPSBuZXcgQXJyYXkoIGFycmF5T3JJbnQubGVuZ3RoICk7XG4gICAgICBmb3IgKCBsZXQgaSA9IDA7IGkgPCBhcnJheU9ySW50Lmxlbmd0aDsgaSsrICkge1xuICAgICAgICByZXN1bHRbIGkgXSA9IGFycmF5T3JJbnRbIHRoaXMuaW5kaWNlc1sgaSBdIF07XG4gICAgICB9XG4gICAgICAvLyBAdHMtZXhwZWN0LWVycm9yXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgbmV3IHBlcm11dGF0aW9uIHRoYXQgaXMgdGhlIGludmVyc2Ugb2YgdGhpcy5cbiAgICovXG4gIHB1YmxpYyBpbnZlcnRlZCgpOiBQZXJtdXRhdGlvbiB7XG4gICAgY29uc3QgbmV3UGVybXV0YXRpb24gPSBuZXcgQXJyYXkoIHRoaXMuc2l6ZSgpICk7XG4gICAgZm9yICggbGV0IGkgPSAwOyBpIDwgdGhpcy5zaXplKCk7IGkrKyApIHtcbiAgICAgIG5ld1Blcm11dGF0aW9uWyB0aGlzLmluZGljZXNbIGkgXSBdID0gaTtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyBQZXJtdXRhdGlvbiggbmV3UGVybXV0YXRpb24gKTtcbiAgfVxuXG4gIHB1YmxpYyB3aXRoSW5kaWNlc1Blcm11dGVkKCBpbmRpY2VzOiBudW1iZXJbXSApOiBQZXJtdXRhdGlvbltdIHtcbiAgICBjb25zdCByZXN1bHQ6IFBlcm11dGF0aW9uW10gPSBbXTtcbiAgICBQZXJtdXRhdGlvbi5mb3JFYWNoUGVybXV0YXRpb24oIGluZGljZXMsIGludGVnZXJzID0+IHtcbiAgICAgIGNvbnN0IG9sZEluZGljZXMgPSB0aGlzLmluZGljZXM7XG4gICAgICBjb25zdCBuZXdQZXJtdXRhdGlvbiA9IG9sZEluZGljZXMuc2xpY2UoIDAgKTtcblxuICAgICAgZm9yICggbGV0IGkgPSAwOyBpIDwgaW5kaWNlcy5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgbmV3UGVybXV0YXRpb25bIGluZGljZXNbIGkgXSBdID0gb2xkSW5kaWNlc1sgaW50ZWdlcnNbIGkgXSBdO1xuICAgICAgfVxuICAgICAgcmVzdWx0LnB1c2goIG5ldyBQZXJtdXRhdGlvbiggbmV3UGVybXV0YXRpb24gKSApO1xuICAgIH0gKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBQWyR7dGhpcy5pbmRpY2VzLmpvaW4oICcsICcgKX1dYDtcbiAgfVxuXG4gIHB1YmxpYyBlcXVhbHMoIHBlcm11dGF0aW9uOiBQZXJtdXRhdGlvbiApOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbmRpY2VzLmxlbmd0aCA9PT0gcGVybXV0YXRpb24uaW5kaWNlcy5sZW5ndGggJiYgXy5pc0VxdWFsKCB0aGlzLmluZGljZXMsIHBlcm11dGF0aW9uLmluZGljZXMgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGFuIGlkZW50aXR5IHBlcm11dGF0aW9uIG9mIGEgZ2l2ZW4gc2l6ZS5cbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgaWRlbnRpdHkoIHNpemU6IG51bWJlciApOiBQZXJtdXRhdGlvbiB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggc2l6ZSA+PSAwICk7XG4gICAgY29uc3QgaW5kaWNlcyA9IG5ldyBBcnJheSggc2l6ZSApO1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHNpemU7IGkrKyApIHtcbiAgICAgIGluZGljZXNbIGkgXSA9IGk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgUGVybXV0YXRpb24oIGluZGljZXMgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0cyBhbGwgcGVybXV0YXRpb25zIHRoYXQgaGF2ZSBhIGdpdmVuIHNpemVcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcGVybXV0YXRpb25zKCBzaXplOiBudW1iZXIgKTogUGVybXV0YXRpb25bXSB7XG4gICAgY29uc3QgcmVzdWx0OiBQZXJtdXRhdGlvbltdID0gW107XG4gICAgUGVybXV0YXRpb24uZm9yRWFjaFBlcm11dGF0aW9uKCBVdGlscy5yYW5nZUluY2x1c2l2ZSggMCwgc2l6ZSAtIDEgKSwgaW50ZWdlcnMgPT4ge1xuICAgICAgcmVzdWx0LnB1c2goIG5ldyBQZXJtdXRhdGlvbiggaW50ZWdlcnMuc2xpY2UoKSApICk7XG4gICAgfSApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogQ2FsbHMgYSBjYWxsYmFjayBvbiBldmVyeSBzaW5nbGUgcG9zc2libGUgcGVybXV0YXRpb24gb2YgdGhlIGdpdmVuIEFycmF5XG4gICAqXG4gICAqIEBwYXJhbSBhcnJheVxuICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBDYWxsZWQgb24gZWFjaCBwZXJtdXRlZCB2ZXJzaW9uIG9mIHRoZSBhcnJheSBwb3NzaWJsZVxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmb3JFYWNoUGVybXV0YXRpb248VD4oIGFycmF5OiBUW10sIGNhbGxiYWNrOiAoIGFycmF5OiByZWFkb25seSBUW10gKSA9PiB2b2lkICk6IHZvaWQge1xuICAgIHJlY3Vyc2l2ZUZvckVhY2hQZXJtdXRhdGlvbiggYXJyYXksIFtdLCBjYWxsYmFjayApO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBwZXJtdXRhdGlvbnNPZjxUPiggYXJyYXk6IFRbXSApOiBUW11bXSB7XG4gICAgY29uc3QgcmVzdWx0czogVFtdW10gPSBbXTtcbiAgICBQZXJtdXRhdGlvbi5mb3JFYWNoUGVybXV0YXRpb24oIGFycmF5LCByZXN1bHQgPT4ge1xuICAgICAgcmVzdWx0cy5wdXNoKCByZXN1bHQuc2xpY2UoKSApO1xuICAgIH0gKTtcbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxufVxuXG5kb3QucmVnaXN0ZXIoICdQZXJtdXRhdGlvbicsIFBlcm11dGF0aW9uICk7XG5cbi8qKlxuICogQ2FsbCBvdXIgZnVuY3Rpb24gd2l0aCBlYWNoIHBlcm11dGF0aW9uIG9mIHRoZSBwcm92aWRlZCBsaXN0IFBSRUZJWEVEIGJ5IHByZWZpeCwgaW4gbGV4aWNvZ3JhcGhpYyBvcmRlclxuICpcbiAqIEBwYXJhbSBhcnJheSAgIExpc3QgdG8gZ2VuZXJhdGUgcGVybXV0YXRpb25zIG9mXG4gKiBAcGFyYW0gcHJlZml4ICAgRWxlbWVudHMgdGhhdCBzaG91bGQgYmUgaW5zZXJ0ZWQgYXQgdGhlIGZyb250IG9mIGVhY2ggbGlzdCBiZWZvcmUgZWFjaCBjYWxsXG4gKiBAcGFyYW0gY2FsbGJhY2sgRnVuY3Rpb24gdG8gY2FsbFxuICovXG5mdW5jdGlvbiByZWN1cnNpdmVGb3JFYWNoUGVybXV0YXRpb248VD4oIGFycmF5OiBUW10sIHByZWZpeDogVFtdLCBjYWxsYmFjazogKCBhcnJheTogcmVhZG9ubHkgVFtdICkgPT4gdm9pZCApOiB2b2lkIHtcbiAgaWYgKCBhcnJheS5sZW5ndGggPT09IDAgKSB7XG4gICAgY2FsbGJhY2soIHByZWZpeCApO1xuICB9XG4gIGVsc2Uge1xuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IGFycmF5Lmxlbmd0aDsgaSsrICkge1xuICAgICAgY29uc3QgZWxlbWVudCA9IGFycmF5WyBpIF07XG5cbiAgICAgIC8vIHJlbW92ZSB0aGUgZWxlbWVudCBmcm9tIHRoZSBhcnJheVxuICAgICAgY29uc3QgbmV4dEFycmF5ID0gYXJyYXkuc2xpY2UoIDAgKTtcbiAgICAgIG5leHRBcnJheS5zcGxpY2UoIGksIDEgKTtcblxuICAgICAgLy8gYWRkIGl0IGludG8gdGhlIHByZWZpeFxuICAgICAgY29uc3QgbmV4dFByZWZpeCA9IHByZWZpeC5zbGljZSggMCApO1xuICAgICAgbmV4dFByZWZpeC5wdXNoKCBlbGVtZW50ICk7XG5cbiAgICAgIHJlY3Vyc2l2ZUZvckVhY2hQZXJtdXRhdGlvbiggbmV4dEFycmF5LCBuZXh0UHJlZml4LCBjYWxsYmFjayApO1xuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQZXJtdXRhdGlvbjsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsR0FBRyxNQUFNLFVBQVU7QUFDMUIsT0FBT0MsS0FBSyxNQUFNLFlBQVk7QUFFOUIsTUFBTUMsV0FBVyxDQUFDO0VBSWhCO0FBQ0Y7QUFDQTtFQUNTQyxXQUFXQSxDQUFFQyxPQUFpQixFQUFHO0lBQ3RDLElBQUks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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Plane3.js
// Copyright 2014-2022, University of Colorado Boulder

/**
 * A mathematical plane in 3 dimensions determined by a normal vector to the plane and the distance to the closest
 * point on the plane to the origin
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class Plane3 {
  /**
   * @param normal - A normal vector (perpendicular) to the plane
   * @param distance - The signed distance to the plane from the origin, so that normal.times( distance )
   *                            will be a point on the plane.
   */
  constructor(normal, distance) {
    this.normal = normal;
    this.distance = distance;
    assert && assert(Math.abs(normal.magnitude - 1) < 0.01, 'the normal vector must be a unit vector');
  }
  intersectWithRay(ray) {
    return ray.pointAtDistance(ray.distanceToPlane(this));
  }

  /**
   * Returns a new plane that passes through three points $(\vec{a},\vec{b},\vec{c})$
   * The normal of the plane points along $\vec{c-a} \times \vec{b-a}$
   * Passing three collinear points will return null
   *
   * @param a - first point
   * @param b - second point
   * @param c - third point
   */
  static fromTriangle(a, b, c) {
    const normal = c.minus(a).cross(b.minus(a));
    if (normal.magnitude === 0) {
      return null;
    }
    normal.normalize();
    return new Plane3(normal, normal.dot(a));
  }
  static XY = new Plane3(new Vector3(0, 0, 1), 0);
  static XZ = new Plane3(new Vector3(0, 1, 0), 0);
  static YZ = new Plane3(new Vector3(1, 0, 0), 0);
}
js_dot.register('Plane3', Plane3);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJWZWN0b3IzIiwiZG90IiwiUGxhbmUzIiwiY29uc3RydWN0b3IiLCJub3JtYWwiLCJkaXN0YW5jZSIsImFzc2VydCIsIk1hdGgiLCJhYnMiLCJtYWduaXR1ZGUiLCJpbnRlcnNlY3RXaXRoUmF5IiwicmF5IiwicG9pbnRBdERpc3RhbmNlIiwiZGlzdGFuY2VUb1BsYW5lIiwiZnJvbVRyaWFuZ2xlIiwiYSIsImIiLCJjIiwibWludXMiLCJjcm9zcyIsIm5vcm1hbGl6ZSIsIlhZIiwiWFoiLCJZWiIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUGxhbmUzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDE0LTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEEgbWF0aGVtYXRpY2FsIHBsYW5lIGluIDMgZGltZW5zaW9ucyBkZXRlcm1pbmVkIGJ5IGEgbm9ybWFsIHZlY3RvciB0byB0aGUgcGxhbmUgYW5kIHRoZSBkaXN0YW5jZSB0byB0aGUgY2xvc2VzdFxuICogcG9pbnQgb24gdGhlIHBsYW5lIHRvIHRoZSBvcmlnaW5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IFJheTMgZnJvbSAnLi9SYXkzLmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUGxhbmUzIHtcblxuICBwdWJsaWMgbm9ybWFsOiBWZWN0b3IzO1xuICBwdWJsaWMgZGlzdGFuY2U6IG51bWJlcjtcblxuICAvKipcbiAgICogQHBhcmFtIG5vcm1hbCAtIEEgbm9ybWFsIHZlY3RvciAocGVycGVuZGljdWxhcikgdG8gdGhlIHBsYW5lXG4gICAqIEBwYXJhbSBkaXN0YW5jZSAtIFRoZSBzaWduZWQgZGlzdGFuY2UgdG8gdGhlIHBsYW5lIGZyb20gdGhlIG9yaWdpbiwgc28gdGhhdCBub3JtYWwudGltZXMoIGRpc3RhbmNlIClcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbCBiZSBhIHBvaW50IG9uIHRoZSBwbGFuZS5cbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3Rvciggbm9ybWFsOiBWZWN0b3IzLCBkaXN0YW5jZTogbnVtYmVyICkge1xuICAgIHRoaXMubm9ybWFsID0gbm9ybWFsO1xuICAgIHRoaXMuZGlzdGFuY2UgPSBkaXN0YW5jZTtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIE1hdGguYWJzKCBub3JtYWwubWFnbml0dWRlIC0gMSApIDwgMC4wMSwgJ3RoZSBub3JtYWwgdmVjdG9yIG11c3QgYmUgYSB1bml0IHZlY3RvcicgKTtcbiAgfVxuXG4gIHB1YmxpYyBpbnRlcnNlY3RXaXRoUmF5KCByYXk6IFJheTMgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHJheS5wb2ludEF0RGlzdGFuY2UoIHJheS5kaXN0YW5jZVRvUGxhbmUoIHRoaXMgKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgcGxhbmUgdGhhdCBwYXNzZXMgdGhyb3VnaCB0aHJlZSBwb2ludHMgJChcXHZlY3thfSxcXHZlY3tifSxcXHZlY3tjfSkkXG4gICAqIFRoZSBub3JtYWwgb2YgdGhlIHBsYW5lIHBvaW50cyBhbG9uZyAkXFx2ZWN7Yy1hfSBcXHRpbWVzIFxcdmVje2ItYX0kXG4gICAqIFBhc3NpbmcgdGhyZWUgY29sbGluZWFyIHBvaW50cyB3aWxsIHJldHVybiBudWxsXG4gICAqXG4gICAqIEBwYXJhbSBhIC0gZmlyc3QgcG9pbnRcbiAgICogQHBhcmFtIGIgLSBzZWNvbmQgcG9pbnRcbiAgICogQHBhcmFtIGMgLSB0aGlyZCBwb2ludFxuICAgKi9cbiAgcHVibGljIHN0YXRpYyBmcm9tVHJpYW5nbGUoIGE6IFZlY3RvcjMsIGI6IFZlY3RvcjMsIGM6IFZlY3RvcjMgKTogUGxhbmUzIHwgbnVsbCB7XG4gICAgY29uc3Qgbm9ybWFsID0gKCBjLm1pbnVzKCBhICkgKS5jcm9zcyggYi5taW51cyggYSApICk7XG4gICAgaWYgKCBub3JtYWwubWFnbml0dWRlID09PSAwICkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIG5vcm1hbC5ub3JtYWxpemUoKTtcblxuICAgIHJldHVybiBuZXcgUGxhbmUzKCBub3JtYWwsIG5vcm1hbC5kb3QoIGEgKSApO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBYWSA9IG5ldyBQbGFuZTMoIG5ldyBWZWN0b3IzKCAwLCAwLCAxICksIDAgKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBYWiA9IG5ldyBQbGFuZTMoIG5ldyBWZWN0b3IzKCAwLCAxLCAwICksIDAgKTtcbiAgcHVibGljIHN0YXRpYyByZWFkb25seSBZWiA9IG5ldyBQbGFuZTMoIG5ldyBWZWN0b3IzKCAxLCAwLCAwICksIDAgKTtcbn1cblxuZG90LnJlZ2lzdGVyKCAnUGxhbmUzJywgUGxhbmUzICk7XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFHQSxPQUFPQSxPQUFPLE1BQU0sY0FBYztBQUNsQyxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUUxQixlQUFlLE1BQU1DLE1BQU0sQ0FBQztFQUsxQjtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ1NDLFdBQVdBLENBQUVDLE1BQWUsRUFBRUMsUUFBZ0IsRUFBRztJQUN0RCxJQUFJLENBQUNELE1BQU0sR0FBR0EsTUFBTTtJQUNwQixJQUFJLENBQUNDLFFBQVEsR0FBR0EsUUFBUTtJQUV4QkMsTUFBTSxJQUFJQSxNQUFNLENBQUVDLElBQUksQ0FBQ0MsR0FBRyxDQUFFSixNQUFNLENBQUNLLFNBQVMsR0FBRyxDQUFDLENBQUUsR0FBRyxJQUFJLEVBQUUseUNBQXlDLENBQUU7RUFDeEc7RUFFT0MsZ0JBQWdCQSxDQUFFQyxHQUFTLEVBQVk7SUFDNUMsT0FBT0EsR0FBRyxDQUFDQyxlQUFlLENBQUVELEdBQUcsQ0FBQ0UsZUFBZSxDQUFFLElBQUksQ0FBRSxDQUFFO0VBQzNEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFLE9BQWNDLFlBQVlBLENBQUVDLENBQVUsRUFBRUMsQ0FBVSxFQUFFQyxDQUFVLEVBQWtCO0lBQzlFLE1BQU1iLE1BQU0sR0FBS2EsQ0FBQyxDQUFDQyxLQUFLLENBQUVILENBQUMsQ0FBRSxDQUFHSSxLQUFLLENBQUVILENBQUMsQ0FBQ0UsS0FBSyxDQUFFSCxDQUFDLENBQUUsQ0FBRTtJQUNyRCxJQUFLWCxNQUFNLENBQUNLLFNBQVMsS0FBSyxDQUFDLEVBQUc7TUFDNUIsT0FBTyxJQUFJO0lBQ2I7SUFDQUwsTUFBTSxDQUFDZ0IsU0FBUyxFQUFFO0lBRWxCLE9BQU8sSUFBSWxCLE1BQU0sQ0FBRUUsTUFBTSxFQUFFQSxNQUFNLENBQUNILEdBQUcsQ0FBRWMsQ0FBQyxDQUFFLENBQUU7RUFDOUM7RUFFQSxPQUF1Qk0sRUFBRSxHQUFHLElBQUluQixNQUFNLENBQUUsSUFBSUYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFFLEVBQUUsQ0FBQyxDQUFFO0VBQ25FLE9BQXVCc0IsRUFBRSxHQUFHLElBQUlwQixNQUFNLENBQUUsSUFBSUYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFFLEVBQUUsQ0FBQyxDQUFFO0VBQ25FLE9BQXVCdUIsRUFBRSxHQUFHLElBQUlyQixNQUFNLENBQUUsSUFBSUYsT0FBTyxDQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFFLEVBQUUsQ0FBQyxDQUFFO0FBQ3JFO0FBRUFDLEdBQUcsQ0FBQ3VCLFFBQVEsQ0FBRSxRQUFRLEVBQUV0QixNQUFNLENBQUUifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Quaternion.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Quaternion, see http://en.wikipedia.org/wiki/Quaternion
 *
 * TODO #95 convert from JME-style parametrization into classical mathematical description?
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */






class Quaternion {
  /**
   * Quaternion defines hypercomplex numbers of the form {x, y, z, w}
   * Quaternion are useful to represent rotation, the xyzw values of a Quaternion can be thought as rotation axis vector described by xyz and a rotation angle described by w.
   * @public
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @param {number} w
   */
  constructor(x, y, z, w) {
    this.setXYZW(x, y, z, w);
  }

  /**
   * Sets the x,y,z,w values of the quaternion
   * @public
   *
   * @param {number} x
   * @param {number} y
   * @param {number} z
   * @param {number} w
   */
  setXYZW(x, y, z, w) {
    this.x = x !== undefined ? x : 0;
    this.y = y !== undefined ? y : 0;
    this.z = z !== undefined ? z : 0;
    this.w = w !== undefined ? w : 1;
  }

  /*---------------------------------------------------------------------------*
   * Immutables
   *----------------------------------------------------------------------------*/

  /**
   * Addition of this quaternion and another quaternion, returning a copy.
   * @public
   *
   * @param {Quaternion} quat
   * @returns {Quaternion}
   */
  plus(quat) {
    return new Quaternion(this.x + quat.x, this.y + quat.y, this.z + quat.z, this.w + quat.w);
  }

  /**
   * Multiplication of this quaternion by a scalar, returning a copy.
   * @public
   *
   * @param {number} s
   * @returns {Quaternion}
   */
  timesScalar(s) {
    return new Quaternion(this.x * s, this.y * s, this.z * s, this.w * s);
  }

  /**
   * Multiplication of this quaternion by another quaternion, returning a copy.
   * Multiplication is also known at the Hamilton Product (an extension of the cross product for vectors)
   * The product of two rotation quaternions will be equivalent to a rotation by the first quaternion followed by the second quaternion rotation,
   * @public
   *
   * @param {Quaternion} quat
   * @returns {Quaternion}
   */
  timesQuaternion(quat) {
    // TODO: note why this is the case? product noted everywhere is the other one mentioned!
    // mathematica-style
    //        return new Quaternion(
    //                this.x * quat.x - this.y * quat.y - this.z * quat.z - this.w * quat.w,
    //                this.x * quat.y + this.y * quat.x + this.z * quat.w - this.w * quat.z,
    //                this.x * quat.z - this.y * quat.w + this.z * quat.x + this.w * quat.y,
    //                this.x * quat.w + this.y * quat.z - this.z * quat.y + this.w * quat.x
    //        );

    // JME-style
    return new Quaternion(this.x * quat.w - this.z * quat.y + this.y * quat.z + this.w * quat.x, -this.x * quat.z + this.y * quat.w + this.z * quat.x + this.w * quat.y, this.x * quat.y - this.y * quat.x + this.z * quat.w + this.w * quat.z, -this.x * quat.x - this.y * quat.y - this.z * quat.z + this.w * quat.w);

    /*
     Mathematica!
     In[13]:= Quaternion[-0.0, -0.0024999974, 0.0, 0.9999969] ** Quaternion[-0.9864071, 0.0016701065, -0.0050373166, 0.16423558]
     Out[13]= Quaternion[-0.164231, 0.00750332, 0.00208069, -0.986391]
      In[17]:= Quaternion[-0.0024999974, 0.0, 0.9999969, 0] ** Quaternion[0.0016701065, -0.0050373166, 0.16423558, -0.9864071]
     Out[17]= Quaternion[-0.164239, -0.986391, 0.00125951, 0.00750332]
      JME contains the rearrangement of what is typically called {w,x,y,z}
     */
  }

  /**
   * Multiply this quaternion by a vector v, returning a new vector3
   * When a versor, a rotation quaternion, and a vector which lies in the plane of the versor are multiplied, the result is a new vector of the same length but turned by the angle of the versor.
   * @public
   *
   * @param {Vector3} v
   * @returns {Vector3}
   */
  timesVector3(v) {
    if (v.magnitude === 0) {
      return new Vector3(0, 0, 0);
    }

    // TODO: optimization?
    return new Vector3(this.w * this.w * v.x + 2 * this.y * this.w * v.z - 2 * this.z * this.w * v.y + this.x * this.x * v.x + 2 * this.y * this.x * v.y + 2 * this.z * this.x * v.z - this.z * this.z * v.x - this.y * this.y * v.x, 2 * this.x * this.y * v.x + this.y * this.y * v.y + 2 * this.z * this.y * v.z + 2 * this.w * this.z * v.x - this.z * this.z * v.y + this.w * this.w * v.y - 2 * this.x * this.w * v.z - this.x * this.x * v.y, 2 * this.x * this.z * v.x + 2 * this.y * this.z * v.y + this.z * this.z * v.z - 2 * this.w * this.y * v.x - this.y * this.y * v.z + 2 * this.w * this.x * v.y - this.x * this.x * v.z + this.w * this.w * v.z);
  }

  /**
   * The magnitude of this quaternion, i.e. $\sqrt{x^2+y^2+v^2+w^2}$,  returns a non negative number
   * @public
   *
   * @returns {number}
   */
  getMagnitude() {
    return Math.sqrt(this.magnitudeSquared);
  }
  get magnitude() {
    return this.getMagnitude();
  }

  /**
   * The square of the magnitude of this quaternion, returns a non negative number
   * @public
   *
   * @returns {number}
   */
  getMagnitudeSquared() {
    return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;
  }
  get magnitudeSquared() {
    return this.getMagnitudeSquared();
  }

  /**
   * Normalizes this quaternion (rescales to where the magnitude is 1), returning a new quaternion
   * @public
   *
   * @returns {Quaternion}
   */
  normalized() {
    const magnitude = this.magnitude;
    assert && assert(magnitude !== 0, 'Cannot normalize a zero-magnitude quaternion');
    return this.timesScalar(1 / magnitude);
  }

  /**
   * Returns a new quaternion pointing in the opposite direction of this quaternion
   * @public
   *
   * @returns {Quaternion}
   */
  negated() {
    return new Quaternion(-this.x, -this.y, -this.z, -this.w);
  }

  /**
   * Convert a quaternion to a rotation matrix
   * This quaternion does not need to be of magnitude 1
   * @public
   *
   * @returns {Matrix3}
   */
  toRotationMatrix() {
    // see http://en.wikipedia.org/wiki/Rotation_matrix#Quaternion

    const norm = this.magnitudeSquared;
    const flip = norm === 1 ? 2 : norm > 0 ? 2 / norm : 0;
    const xx = this.x * this.x * flip;
    const xy = this.x * this.y * flip;
    const xz = this.x * this.z * flip;
    const xw = this.w * this.x * flip;
    const yy = this.y * this.y * flip;
    const yz = this.y * this.z * flip;
    const yw = this.w * this.y * flip;
    const zz = this.z * this.z * flip;
    const zw = this.w * this.z * flip;
    return Matrix3.pool.fetch().columnMajor(1 - (yy + zz), xy + zw, xz - yw, xy - zw, 1 - (xx + zz), yz + xw, xz + yw, yz - xw, 1 - (xx + yy));
  }

  /**
   * Function returns a quaternion given euler angles
   * @public
   *
   * @param {number} yaw - rotation about the z-axis
   * @param {number} roll - rotation about the  x-axis
   * @param {number} pitch - rotation about the y-axis
   * @returns {Quaternion}
   */
  static fromEulerAngles(yaw, roll, pitch) {
    const sinPitch = Math.sin(pitch * 0.5);
    const cosPitch = Math.cos(pitch * 0.5);
    const sinRoll = Math.sin(roll * 0.5);
    const cosRoll = Math.cos(roll * 0.5);
    const sinYaw = Math.sin(yaw * 0.5);
    const cosYaw = Math.cos(yaw * 0.5);
    const a = cosRoll * cosPitch;
    const b = sinRoll * sinPitch;
    const c = cosRoll * sinPitch;
    const d = sinRoll * cosPitch;
    return new Quaternion(a * sinYaw + b * cosYaw, d * cosYaw + c * sinYaw, c * cosYaw - d * sinYaw, a * cosYaw - b * sinYaw);
  }

  /**
   * Convert a rotation matrix to a quaternion,
   * returning a new Quaternion (of magnitude one)
   * @public
   *
   * @param {Matrix3} matrix
   * @returns {Quaternion}
   */
  static fromRotationMatrix(matrix) {
    const v00 = matrix.m00();
    const v01 = matrix.m01();
    const v02 = matrix.m02();
    const v10 = matrix.m10();
    const v11 = matrix.m11();
    const v12 = matrix.m12();
    const v20 = matrix.m20();
    const v21 = matrix.m21();
    const v22 = matrix.m22();

    // from graphics gems code
    const trace = v00 + v11 + v22;
    let sqt;

    // we protect the division by s by ensuring that s>=1
    if (trace >= 0) {
      sqt = Math.sqrt(trace + 1);
      return new Quaternion((v21 - v12) * 0.5 / sqt, (v02 - v20) * 0.5 / sqt, (v10 - v01) * 0.5 / sqt, 0.5 * sqt);
    } else if (v00 > v11 && v00 > v22) {
      sqt = Math.sqrt(1 + v00 - v11 - v22);
      return new Quaternion(sqt * 0.5, (v10 + v01) * 0.5 / sqt, (v02 + v20) * 0.5 / sqt, (v21 - v12) * 0.5 / sqt);
    } else if (v11 > v22) {
      sqt = Math.sqrt(1 + v11 - v00 - v22);
      return new Quaternion((v10 + v01) * 0.5 / sqt, sqt * 0.5, (v21 + v12) * 0.5 / sqt, (v02 - v20) * 0.5 / sqt);
    } else {
      sqt = Math.sqrt(1 + v22 - v00 - v11);
      return new Quaternion((v02 + v20) * 0.5 / sqt, (v21 + v12) * 0.5 / sqt, sqt * 0.5, (v10 - v01) * 0.5 / sqt);
    }
  }

  /**
   * Find a quaternion that transforms a unit vector A into a unit vector B. There
   * are technically multiple solutions, so this only picks one.
   * @public
   *
   * @param {Vector3} a - Unit vector A
   * @param {Vector3} b - Unit vector B
   * @returns {Quaternion} A quaternion s.t. Q * A = B
   */
  static getRotationQuaternion(a, b) {
    return Quaternion.fromRotationMatrix(Matrix3.rotateAToB(a, b));
  }

  /**
   * spherical linear interpolation - blending two quaternions with a scalar parameter (ranging from 0 to 1).
   * @public
   * @param {Quaternion} a
   * @param {Quaternion} b
   * @param {number} t - amount of change , between 0 and 1 - 0 is at a, 1 is at b
   * @returns {Quaternion}
   */
  static slerp(a, b, t) {
    // if they are identical, just return one of them
    if (a.x === b.x && a.y === b.y && a.z === b.z && a.w === b.w) {
      return a;
    }
    let dot = a.x * b.x + a.y * b.y + a.z * b.z + a.w * b.w;
    if (dot < 0) {
      b = b.negated();
      dot = -dot;
    }

    // how much of each quaternion should be contributed
    let ratioA = 1 - t;
    let ratioB = t;

    // tweak them if necessary
    if (1 - dot > 0.1) {
      const theta = Math.acos(dot);
      const invSinTheta = 1 / Math.sin(theta);
      ratioA = Math.sin((1 - t) * theta) * invSinTheta;
      ratioB = Math.sin(t * theta) * invSinTheta;
    }
    return new Quaternion(ratioA * a.x + ratioB * b.x, ratioA * a.y + ratioB * b.y, ratioA * a.z + ratioB * b.z, ratioA * a.w + ratioB * b.w);
  }
}

// @public {boolean}
Quaternion.prototype.isQuaternion = true;
js_dot.register('Quaternion', Quaternion);
js_Poolable.mixInto(Quaternion, {
  initialize: Quaternion.prototype.setXYZW
});
/* harmony default export */ const js_Quaternion = ((/* unused pure expression or super */ null && (Quaternion)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJQb29sYWJsZSIsImRvdCIsIk1hdHJpeDMiLCJWZWN0b3IzIiwiUXVhdGVybmlvbiIsImNvbnN0cnVjdG9yIiwieCIsInkiLCJ6IiwidyIsInNldFhZWlciLCJ1bmRlZmluZWQiLCJwbHVzIiwicXVhdCIsInRpbWVzU2NhbGFyIiwicyIsInRpbWVzUXVhdGVybmlvbiIsInRpbWVzVmVjdG9yMyIsInYiLCJtYWduaXR1ZGUiLCJnZXRNYWduaXR1ZGUiLCJNYXRoIiwic3FydCIsIm1hZ25pdHVkZVNxdWFyZWQiLCJnZXRNYWduaXR1ZGVTcXVhcmVkIiwibm9ybWFsaXplZCIsImFzc2VydCIsIm5lZ2F0ZWQiLCJ0b1JvdGF0aW9uTWF0cml4Iiwibm9ybSIsImZsaXAiLCJ4eCIsInh5IiwieHoiLCJ4dyIsInl5IiwieXoiLCJ5dyIsInp6IiwienciLCJwb29sIiwiZmV0Y2giLCJjb2x1bW5NYWpvciIsImZyb21FdWxlckFuZ2xlcyIsInlhdyIsInJvbGwiLCJwaXRjaCIsInNpblBpdGNoIiwic2luIiwiY29zUGl0Y2giLCJjb3MiLCJzaW5Sb2xsIiwiY29zUm9sbCIsInNpbllhdyIsImNvc1lhdyIsImEiLCJiIiwiYyIsImQiLCJmcm9tUm90YXRpb25NYXRyaXgiLCJtYXRyaXgiLCJ2MDAiLCJtMDAiLCJ2MDEiLCJtMDEiLCJ2MDIiLCJtMDIiLCJ2MTAiLCJtMTAiLCJ2MTEiLCJtMTEiLCJ2MTIiLCJtMTIiLCJ2MjAiLCJtMjAiLCJ2MjEiLCJtMjEiLCJ2MjIiLCJtMjIiLCJ0cmFjZSIsInNxdCIsImdldFJvdGF0aW9uUXVhdGVybmlvbiIsInJvdGF0ZUFUb0IiLCJzbGVycCIsInQiLCJyYXRpb0EiLCJyYXRpb0IiLCJ0aGV0YSIsImFjb3MiLCJpbnZTaW5UaGV0YSIsInByb3RvdHlwZSIsImlzUXVhdGVybmlvbiIsInJlZ2lzdGVyIiwibWl4SW50byIsImluaXRpYWxpemUiXSwic291cmNlcyI6WyJRdWF0ZXJuaW9uLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIFF1YXRlcm5pb24sIHNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1F1YXRlcm5pb25cbiAqXG4gKiBUT0RPICM5NSBjb252ZXJ0IGZyb20gSk1FLXN0eWxlIHBhcmFtZXRyaXphdGlvbiBpbnRvIGNsYXNzaWNhbCBtYXRoZW1hdGljYWwgZGVzY3JpcHRpb24/XG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBQb29sYWJsZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvUG9vbGFibGUuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgTWF0cml4MyBmcm9tICcuL01hdHJpeDMuanMnO1xuaW1wb3J0ICcuL1V0aWxzLmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5cbmNsYXNzIFF1YXRlcm5pb24ge1xuICAvKipcbiAgICogUXVhdGVybmlvbiBkZWZpbmVzIGh5cGVyY29tcGxleCBudW1iZXJzIG9mIHRoZSBmb3JtIHt4LCB5LCB6LCB3fVxuICAgKiBRdWF0ZXJuaW9uIGFyZSB1c2VmdWwgdG8gcmVwcmVzZW50IHJvdGF0aW9uLCB0aGUgeHl6dyB2YWx1ZXMgb2YgYSBRdWF0ZXJuaW9uIGNhbiBiZSB0aG91Z2h0IGFzIHJvdGF0aW9uIGF4aXMgdmVjdG9yIGRlc2NyaWJlZCBieSB4eXogYW5kIGEgcm90YXRpb24gYW5nbGUgZGVzY3JpYmVkIGJ5IHcuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdcbiAgICovXG4gIGNvbnN0cnVjdG9yKCB4LCB5LCB6LCB3ICkge1xuICAgIHRoaXMuc2V0WFlaVyggeCwgeSwgeiwgdyApO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHMgdGhlIHgseSx6LHcgdmFsdWVzIG9mIHRoZSBxdWF0ZXJuaW9uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHdcbiAgICovXG4gIHNldFhZWlcoIHgsIHksIHosIHcgKSB7XG4gICAgdGhpcy54ID0geCAhPT0gdW5kZWZpbmVkID8geCA6IDA7XG4gICAgdGhpcy55ID0geSAhPT0gdW5kZWZpbmVkID8geSA6IDA7XG4gICAgdGhpcy56ID0geiAhPT0gdW5kZWZpbmVkID8geiA6IDA7XG4gICAgdGhpcy53ID0gdyAhPT0gdW5kZWZpbmVkID8gdyA6IDE7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogSW1tdXRhYmxlc1xuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBBZGRpdGlvbiBvZiB0aGlzIHF1YXRlcm5pb24gYW5kIGFub3RoZXIgcXVhdGVybmlvbiwgcmV0dXJuaW5nIGEgY29weS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1F1YXRlcm5pb259IHF1YXRcbiAgICogQHJldHVybnMge1F1YXRlcm5pb259XG4gICAqL1xuICBwbHVzKCBxdWF0ICkge1xuICAgIHJldHVybiBuZXcgUXVhdGVybmlvbiggdGhpcy54ICsgcXVhdC54LCB0aGlzLnkgKyBxdWF0LnksIHRoaXMueiArIHF1YXQueiwgdGhpcy53ICsgcXVhdC53ICk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbGljYXRpb24gb2YgdGhpcyBxdWF0ZXJuaW9uIGJ5IGEgc2NhbGFyLCByZXR1cm5pbmcgYSBjb3B5LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBzXG4gICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufVxuICAgKi9cbiAgdGltZXNTY2FsYXIoIHMgKSB7XG4gICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKCB0aGlzLnggKiBzLCB0aGlzLnkgKiBzLCB0aGlzLnogKiBzLCB0aGlzLncgKiBzICk7XG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbGljYXRpb24gb2YgdGhpcyBxdWF0ZXJuaW9uIGJ5IGFub3RoZXIgcXVhdGVybmlvbiwgcmV0dXJuaW5nIGEgY29weS5cbiAgICogTXVsdGlwbGljYXRpb24gaXMgYWxzbyBrbm93biBhdCB0aGUgSGFtaWx0b24gUHJvZHVjdCAoYW4gZXh0ZW5zaW9uIG9mIHRoZSBjcm9zcyBwcm9kdWN0IGZvciB2ZWN0b3JzKVxuICAgKiBUaGUgcHJvZHVjdCBvZiB0d28gcm90YXRpb24gcXVhdGVybmlvbnMgd2lsbCBiZSBlcXVpdmFsZW50IHRvIGEgcm90YXRpb24gYnkgdGhlIGZpcnN0IHF1YXRlcm5pb24gZm9sbG93ZWQgYnkgdGhlIHNlY29uZCBxdWF0ZXJuaW9uIHJvdGF0aW9uLFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7UXVhdGVybmlvbn0gcXVhdFxuICAgKiBAcmV0dXJucyB7UXVhdGVybmlvbn1cbiAgICovXG4gIHRpbWVzUXVhdGVybmlvbiggcXVhdCApIHtcbiAgICAvLyBUT0RPOiBub3RlIHdoeSB0aGlzIGlzIHRoZSBjYXNlPyBwcm9kdWN0IG5vdGVkIGV2ZXJ5d2hlcmUgaXMgdGhlIG90aGVyIG9uZSBtZW50aW9uZWQhXG4gICAgLy8gbWF0aGVtYXRpY2Etc3R5bGVcbiAgICAvLyAgICAgICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKFxuICAgIC8vICAgICAgICAgICAgICAgIHRoaXMueCAqIHF1YXQueCAtIHRoaXMueSAqIHF1YXQueSAtIHRoaXMueiAqIHF1YXQueiAtIHRoaXMudyAqIHF1YXQudyxcbiAgICAvLyAgICAgICAgICAgICAgICB0aGlzLnggKiBxdWF0LnkgKyB0aGlzLnkgKiBxdWF0LnggKyB0aGlzLnogKiBxdWF0LncgLSB0aGlzLncgKiBxdWF0LnosXG4gICAgLy8gICAgICAgICAgICAgICAgdGhpcy54ICogcXVhdC56IC0gdGhpcy55ICogcXVhdC53ICsgdGhpcy56ICogcXVhdC54ICsgdGhpcy53ICogcXVhdC55LFxuICAgIC8vICAgICAgICAgICAgICAgIHRoaXMueCAqIHF1YXQudyArIHRoaXMueSAqIHF1YXQueiAtIHRoaXMueiAqIHF1YXQueSArIHRoaXMudyAqIHF1YXQueFxuICAgIC8vICAgICAgICApO1xuXG4gICAgLy8gSk1FLXN0eWxlXG4gICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKFxuICAgICAgdGhpcy54ICogcXVhdC53IC0gdGhpcy56ICogcXVhdC55ICsgdGhpcy55ICogcXVhdC56ICsgdGhpcy53ICogcXVhdC54LFxuICAgICAgLXRoaXMueCAqIHF1YXQueiArIHRoaXMueSAqIHF1YXQudyArIHRoaXMueiAqIHF1YXQueCArIHRoaXMudyAqIHF1YXQueSxcbiAgICAgIHRoaXMueCAqIHF1YXQueSAtIHRoaXMueSAqIHF1YXQueCArIHRoaXMueiAqIHF1YXQudyArIHRoaXMudyAqIHF1YXQueixcbiAgICAgIC10aGlzLnggKiBxdWF0LnggLSB0aGlzLnkgKiBxdWF0LnkgLSB0aGlzLnogKiBxdWF0LnogKyB0aGlzLncgKiBxdWF0LndcbiAgICApO1xuXG4gICAgLypcbiAgICAgTWF0aGVtYXRpY2EhXG4gICAgIEluWzEzXTo9IFF1YXRlcm5pb25bLTAuMCwgLTAuMDAyNDk5OTk3NCwgMC4wLCAwLjk5OTk5NjldICoqIFF1YXRlcm5pb25bLTAuOTg2NDA3MSwgMC4wMDE2NzAxMDY1LCAtMC4wMDUwMzczMTY2LCAwLjE2NDIzNTU4XVxuICAgICBPdXRbMTNdPSBRdWF0ZXJuaW9uWy0wLjE2NDIzMSwgMC4wMDc1MDMzMiwgMC4wMDIwODA2OSwgLTAuOTg2MzkxXVxuXG4gICAgIEluWzE3XTo9IFF1YXRlcm5pb25bLTAuMDAyNDk5OTk3NCwgMC4wLCAwLjk5OTk5NjksIDBdICoqIFF1YXRlcm5pb25bMC4wMDE2NzAxMDY1LCAtMC4wMDUwMzczMTY2LCAwLjE2NDIzNTU4LCAtMC45ODY0MDcxXVxuICAgICBPdXRbMTddPSBRdWF0ZXJuaW9uWy0wLjE2NDIzOSwgLTAuOTg2MzkxLCAwLjAwMTI1OTUxLCAwLjAwNzUwMzMyXVxuXG4gICAgIEpNRSBjb250YWlucyB0aGUgcmVhcnJhbmdlbWVudCBvZiB3aGF0IGlzIHR5cGljYWxseSBjYWxsZWQge3cseCx5LHp9XG4gICAgICovXG4gIH1cblxuICAvKipcbiAgICogTXVsdGlwbHkgdGhpcyBxdWF0ZXJuaW9uIGJ5IGEgdmVjdG9yIHYsIHJldHVybmluZyBhIG5ldyB2ZWN0b3IzXG4gICAqIFdoZW4gYSB2ZXJzb3IsIGEgcm90YXRpb24gcXVhdGVybmlvbiwgYW5kIGEgdmVjdG9yIHdoaWNoIGxpZXMgaW4gdGhlIHBsYW5lIG9mIHRoZSB2ZXJzb3IgYXJlIG11bHRpcGxpZWQsIHRoZSByZXN1bHQgaXMgYSBuZXcgdmVjdG9yIG9mIHRoZSBzYW1lIGxlbmd0aCBidXQgdHVybmVkIGJ5IHRoZSBhbmdsZSBvZiB0aGUgdmVyc29yLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yM30gdlxuICAgKiBAcmV0dXJucyB7VmVjdG9yM31cbiAgICovXG4gIHRpbWVzVmVjdG9yMyggdiApIHtcbiAgICBpZiAoIHYubWFnbml0dWRlID09PSAwICkge1xuICAgICAgcmV0dXJuIG5ldyBWZWN0b3IzKCAwLCAwLCAwICk7XG4gICAgfVxuXG4gICAgLy8gVE9ETzogb3B0aW1pemF0aW9uP1xuICAgIHJldHVybiBuZXcgVmVjdG9yMyhcbiAgICAgIHRoaXMudyAqIHRoaXMudyAqIHYueCArIDIgKiB0aGlzLnkgKiB0aGlzLncgKiB2LnogLSAyICogdGhpcy56ICogdGhpcy53ICogdi55ICsgdGhpcy54ICogdGhpcy54ICogdi54ICsgMiAqIHRoaXMueSAqIHRoaXMueCAqIHYueSArIDIgKiB0aGlzLnogKiB0aGlzLnggKiB2LnogLSB0aGlzLnogKiB0aGlzLnogKiB2LnggLSB0aGlzLnkgKiB0aGlzLnkgKiB2LngsXG4gICAgICAyICogdGhpcy54ICogdGhpcy55ICogdi54ICsgdGhpcy55ICogdGhpcy55ICogdi55ICsgMiAqIHRoaXMueiAqIHRoaXMueSAqIHYueiArIDIgKiB0aGlzLncgKiB0aGlzLnogKiB2LnggLSB0aGlzLnogKiB0aGlzLnogKiB2LnkgKyB0aGlzLncgKiB0aGlzLncgKiB2LnkgLSAyICogdGhpcy54ICogdGhpcy53ICogdi56IC0gdGhpcy54ICogdGhpcy54ICogdi55LFxuICAgICAgMiAqIHRoaXMueCAqIHRoaXMueiAqIHYueCArIDIgKiB0aGlzLnkgKiB0aGlzLnogKiB2LnkgKyB0aGlzLnogKiB0aGlzLnogKiB2LnogLSAyICogdGhpcy53ICogdGhpcy55ICogdi54IC0gdGhpcy55ICogdGhpcy55ICogdi56ICsgMiAqIHRoaXMudyAqIHRoaXMueCAqIHYueSAtIHRoaXMueCAqIHRoaXMueCAqIHYueiArIHRoaXMudyAqIHRoaXMudyAqIHYuelxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIG1hZ25pdHVkZSBvZiB0aGlzIHF1YXRlcm5pb24sIGkuZS4gJFxcc3FydHt4XjIreV4yK3ZeMit3XjJ9JCwgIHJldHVybnMgYSBub24gbmVnYXRpdmUgbnVtYmVyXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGdldE1hZ25pdHVkZSgpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KCB0aGlzLm1hZ25pdHVkZVNxdWFyZWQgKTtcbiAgfVxuXG4gIGdldCBtYWduaXR1ZGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TWFnbml0dWRlKCk7XG4gIH1cblxuICAvKipcbiAgICogVGhlIHNxdWFyZSBvZiB0aGUgbWFnbml0dWRlIG9mIHRoaXMgcXVhdGVybmlvbiwgcmV0dXJucyBhIG5vbiBuZWdhdGl2ZSBudW1iZXJcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgZ2V0TWFnbml0dWRlU3F1YXJlZCgpIHtcbiAgICByZXR1cm4gdGhpcy54ICogdGhpcy54ICsgdGhpcy55ICogdGhpcy55ICsgdGhpcy56ICogdGhpcy56ICsgdGhpcy53ICogdGhpcy53O1xuICB9XG5cbiAgZ2V0IG1hZ25pdHVkZVNxdWFyZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuZ2V0TWFnbml0dWRlU3F1YXJlZCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE5vcm1hbGl6ZXMgdGhpcyBxdWF0ZXJuaW9uIChyZXNjYWxlcyB0byB3aGVyZSB0aGUgbWFnbml0dWRlIGlzIDEpLCByZXR1cm5pbmcgYSBuZXcgcXVhdGVybmlvblxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufVxuICAgKi9cbiAgbm9ybWFsaXplZCgpIHtcbiAgICBjb25zdCBtYWduaXR1ZGUgPSB0aGlzLm1hZ25pdHVkZTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtYWduaXR1ZGUgIT09IDAsICdDYW5ub3Qgbm9ybWFsaXplIGEgemVyby1tYWduaXR1ZGUgcXVhdGVybmlvbicgKTtcbiAgICByZXR1cm4gdGhpcy50aW1lc1NjYWxhciggMSAvIG1hZ25pdHVkZSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgcXVhdGVybmlvbiBwb2ludGluZyBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uIG9mIHRoaXMgcXVhdGVybmlvblxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufVxuICAgKi9cbiAgbmVnYXRlZCgpIHtcbiAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24oIC10aGlzLngsIC10aGlzLnksIC10aGlzLnosIC10aGlzLncgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0IGEgcXVhdGVybmlvbiB0byBhIHJvdGF0aW9uIG1hdHJpeFxuICAgKiBUaGlzIHF1YXRlcm5pb24gZG9lcyBub3QgbmVlZCB0byBiZSBvZiBtYWduaXR1ZGUgMVxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXgzfVxuICAgKi9cbiAgdG9Sb3RhdGlvbk1hdHJpeCgpIHtcbiAgICAvLyBzZWUgaHR0cDovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Sb3RhdGlvbl9tYXRyaXgjUXVhdGVybmlvblxuXG4gICAgY29uc3Qgbm9ybSA9IHRoaXMubWFnbml0dWRlU3F1YXJlZDtcbiAgICBjb25zdCBmbGlwID0gKCBub3JtID09PSAxICkgPyAyIDogKCBub3JtID4gMCApID8gMiAvIG5vcm0gOiAwO1xuXG4gICAgY29uc3QgeHggPSB0aGlzLnggKiB0aGlzLnggKiBmbGlwO1xuICAgIGNvbnN0IHh5ID0gdGhpcy54ICogdGhpcy55ICogZmxpcDtcbiAgICBjb25zdCB4eiA9IHRoaXMueCAqIHRoaXMueiAqIGZsaXA7XG4gICAgY29uc3QgeHcgPSB0aGlzLncgKiB0aGlzLnggKiBmbGlwO1xuICAgIGNvbnN0IHl5ID0gdGhpcy55ICogdGhpcy55ICogZmxpcDtcbiAgICBjb25zdCB5eiA9IHRoaXMueSAqIHRoaXMueiAqIGZsaXA7XG4gICAgY29uc3QgeXcgPSB0aGlzLncgKiB0aGlzLnkgKiBmbGlwO1xuICAgIGNvbnN0IHp6ID0gdGhpcy56ICogdGhpcy56ICogZmxpcDtcbiAgICBjb25zdCB6dyA9IHRoaXMudyAqIHRoaXMueiAqIGZsaXA7XG5cbiAgICByZXR1cm4gTWF0cml4My5wb29sLmZldGNoKCkuY29sdW1uTWFqb3IoXG4gICAgICAxIC0gKCB5eSArIHp6ICksXG4gICAgICAoIHh5ICsgencgKSxcbiAgICAgICggeHogLSB5dyApLFxuICAgICAgKCB4eSAtIHp3ICksXG4gICAgICAxIC0gKCB4eCArIHp6ICksXG4gICAgICAoIHl6ICsgeHcgKSxcbiAgICAgICggeHogKyB5dyApLFxuICAgICAgKCB5eiAtIHh3ICksXG4gICAgICAxIC0gKCB4eCArIHl5IClcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZ1bmN0aW9uIHJldHVybnMgYSBxdWF0ZXJuaW9uIGdpdmVuIGV1bGVyIGFuZ2xlc1xuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5YXcgLSByb3RhdGlvbiBhYm91dCB0aGUgei1heGlzXG4gICAqIEBwYXJhbSB7bnVtYmVyfSByb2xsIC0gcm90YXRpb24gYWJvdXQgdGhlICB4LWF4aXNcbiAgICogQHBhcmFtIHtudW1iZXJ9IHBpdGNoIC0gcm90YXRpb24gYWJvdXQgdGhlIHktYXhpc1xuICAgKiBAcmV0dXJucyB7UXVhdGVybmlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tRXVsZXJBbmdsZXMoIHlhdywgcm9sbCwgcGl0Y2ggKSB7XG4gICAgY29uc3Qgc2luUGl0Y2ggPSBNYXRoLnNpbiggcGl0Y2ggKiAwLjUgKTtcbiAgICBjb25zdCBjb3NQaXRjaCA9IE1hdGguY29zKCBwaXRjaCAqIDAuNSApO1xuICAgIGNvbnN0IHNpblJvbGwgPSBNYXRoLnNpbiggcm9sbCAqIDAuNSApO1xuICAgIGNvbnN0IGNvc1JvbGwgPSBNYXRoLmNvcyggcm9sbCAqIDAuNSApO1xuICAgIGNvbnN0IHNpbllhdyA9IE1hdGguc2luKCB5YXcgKiAwLjUgKTtcbiAgICBjb25zdCBjb3NZYXcgPSBNYXRoLmNvcyggeWF3ICogMC41ICk7XG5cbiAgICBjb25zdCBhID0gY29zUm9sbCAqIGNvc1BpdGNoO1xuICAgIGNvbnN0IGIgPSBzaW5Sb2xsICogc2luUGl0Y2g7XG4gICAgY29uc3QgYyA9IGNvc1JvbGwgKiBzaW5QaXRjaDtcbiAgICBjb25zdCBkID0gc2luUm9sbCAqIGNvc1BpdGNoO1xuXG4gICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKFxuICAgICAgYSAqIHNpbllhdyArIGIgKiBjb3NZYXcsXG4gICAgICBkICogY29zWWF3ICsgYyAqIHNpbllhdyxcbiAgICAgIGMgKiBjb3NZYXcgLSBkICogc2luWWF3LFxuICAgICAgYSAqIGNvc1lhdyAtIGIgKiBzaW5ZYXdcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgYSByb3RhdGlvbiBtYXRyaXggdG8gYSBxdWF0ZXJuaW9uLFxuICAgKiByZXR1cm5pbmcgYSBuZXcgUXVhdGVybmlvbiAob2YgbWFnbml0dWRlIG9uZSlcbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge01hdHJpeDN9IG1hdHJpeFxuICAgKiBAcmV0dXJucyB7UXVhdGVybmlvbn1cbiAgICovXG4gIHN0YXRpYyBmcm9tUm90YXRpb25NYXRyaXgoIG1hdHJpeCApIHtcbiAgICBjb25zdCB2MDAgPSBtYXRyaXgubTAwKCk7XG4gICAgY29uc3QgdjAxID0gbWF0cml4Lm0wMSgpO1xuICAgIGNvbnN0IHYwMiA9IG1hdHJpeC5tMDIoKTtcbiAgICBjb25zdCB2MTAgPSBtYXRyaXgubTEwKCk7XG4gICAgY29uc3QgdjExID0gbWF0cml4Lm0xMSgpO1xuICAgIGNvbnN0IHYxMiA9IG1hdHJpeC5tMTIoKTtcbiAgICBjb25zdCB2MjAgPSBtYXRyaXgubTIwKCk7XG4gICAgY29uc3QgdjIxID0gbWF0cml4Lm0yMSgpO1xuICAgIGNvbnN0IHYyMiA9IG1hdHJpeC5tMjIoKTtcblxuICAgIC8vIGZyb20gZ3JhcGhpY3MgZ2VtcyBjb2RlXG4gICAgY29uc3QgdHJhY2UgPSB2MDAgKyB2MTEgKyB2MjI7XG4gICAgbGV0IHNxdDtcblxuICAgIC8vIHdlIHByb3RlY3QgdGhlIGRpdmlzaW9uIGJ5IHMgYnkgZW5zdXJpbmcgdGhhdCBzPj0xXG4gICAgaWYgKCB0cmFjZSA+PSAwICkge1xuICAgICAgc3F0ID0gTWF0aC5zcXJ0KCB0cmFjZSArIDEgKTtcbiAgICAgIHJldHVybiBuZXcgUXVhdGVybmlvbihcbiAgICAgICAgKCB2MjEgLSB2MTIgKSAqIDAuNSAvIHNxdCxcbiAgICAgICAgKCB2MDIgLSB2MjAgKSAqIDAuNSAvIHNxdCxcbiAgICAgICAgKCB2MTAgLSB2MDEgKSAqIDAuNSAvIHNxdCxcbiAgICAgICAgMC41ICogc3F0XG4gICAgICApO1xuICAgIH1cbiAgICBlbHNlIGlmICggKCB2MDAgPiB2MTEgKSAmJiAoIHYwMCA+IHYyMiApICkge1xuICAgICAgc3F0ID0gTWF0aC5zcXJ0KCAxICsgdjAwIC0gdjExIC0gdjIyICk7XG4gICAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24oXG4gICAgICAgIHNxdCAqIDAuNSxcbiAgICAgICAgKCB2MTAgKyB2MDEgKSAqIDAuNSAvIHNxdCxcbiAgICAgICAgKCB2MDIgKyB2MjAgKSAqIDAuNSAvIHNxdCxcbiAgICAgICAgKCB2MjEgLSB2MTIgKSAqIDAuNSAvIHNxdFxuICAgICAgKTtcbiAgICB9XG4gICAgZWxzZSBpZiAoIHYxMSA+IHYyMiApIHtcbiAgICAgIHNxdCA9IE1hdGguc3FydCggMSArIHYxMSAtIHYwMCAtIHYyMiApO1xuICAgICAgcmV0dXJuIG5ldyBRdWF0ZXJuaW9uKFxuICAgICAgICAoIHYxMCArIHYwMSApICogMC41IC8gc3F0LFxuICAgICAgICBzcXQgKiAwLjUsXG4gICAgICAgICggdjIxICsgdjEyICkgKiAwLjUgLyBzcXQsXG4gICAgICAgICggdjAyIC0gdjIwICkgKiAwLjUgLyBzcXRcbiAgICAgICk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgc3F0ID0gTWF0aC5zcXJ0KCAxICsgdjIyIC0gdjAwIC0gdjExICk7XG4gICAgICByZXR1cm4gbmV3IFF1YXRlcm5pb24oXG4gICAgICAgICggdjAyICsgdjIwICkgKiAwLjUgLyBzcXQsXG4gICAgICAgICggdjIxICsgdjEyICkgKiAwLjUgLyBzcXQsXG4gICAgICAgIHNxdCAqIDAuNSxcbiAgICAgICAgKCB2MTAgLSB2MDEgKSAqIDAuNSAvIHNxdFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRmluZCBhIHF1YXRlcm5pb24gdGhhdCB0cmFuc2Zvcm1zIGEgdW5pdCB2ZWN0b3IgQSBpbnRvIGEgdW5pdCB2ZWN0b3IgQi4gVGhlcmVcbiAgICogYXJlIHRlY2huaWNhbGx5IG11bHRpcGxlIHNvbHV0aW9ucywgc28gdGhpcyBvbmx5IHBpY2tzIG9uZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjN9IGEgLSBVbml0IHZlY3RvciBBXG4gICAqIEBwYXJhbSB7VmVjdG9yM30gYiAtIFVuaXQgdmVjdG9yIEJcbiAgICogQHJldHVybnMge1F1YXRlcm5pb259IEEgcXVhdGVybmlvbiBzLnQuIFEgKiBBID0gQlxuICAgKi9cbiAgc3RhdGljIGdldFJvdGF0aW9uUXVhdGVybmlvbiggYSwgYiApIHtcbiAgICByZXR1cm4gUXVhdGVybmlvbi5mcm9tUm90YXRpb25NYXRyaXgoIE1hdHJpeDMucm90YXRlQVRvQiggYSwgYiApICk7XG4gIH1cblxuICAvKipcbiAgICogc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIC0gYmxlbmRpbmcgdHdvIHF1YXRlcm5pb25zIHdpdGggYSBzY2FsYXIgcGFyYW1ldGVyIChyYW5naW5nIGZyb20gMCB0byAxKS5cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1F1YXRlcm5pb259IGFcbiAgICogQHBhcmFtIHtRdWF0ZXJuaW9ufSBiXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB0IC0gYW1vdW50IG9mIGNoYW5nZSAsIGJldHdlZW4gMCBhbmQgMSAtIDAgaXMgYXQgYSwgMSBpcyBhdCBiXG4gICAqIEByZXR1cm5zIHtRdWF0ZXJuaW9ufVxuICAgKi9cbiAgc3RhdGljIHNsZXJwKCBhLCBiLCB0ICkge1xuICAgIC8vIGlmIHRoZXkgYXJlIGlkZW50aWNhbCwganVzdCByZXR1cm4gb25lIG9mIHRoZW1cbiAgICBpZiAoIGEueCA9PT0gYi54ICYmIGEueSA9PT0gYi55ICYmIGEueiA9PT0gYi56ICYmIGEudyA9PT0gYi53ICkge1xuICAgICAgcmV0dXJuIGE7XG4gICAgfVxuXG4gICAgbGV0IGRvdCA9IGEueCAqIGIueCArIGEueSAqIGIueSArIGEueiAqIGIueiArIGEudyAqIGIudztcblxuICAgIGlmICggZG90IDwgMCApIHtcbiAgICAgIGIgPSBiLm5lZ2F0ZWQoKTtcbiAgICAgIGRvdCA9IC1kb3Q7XG4gICAgfVxuXG4gICAgLy8gaG93IG11Y2ggb2YgZWFjaCBxdWF0ZXJuaW9uIHNob3VsZCBiZSBjb250cmlidXRlZFxuICAgIGxldCByYXRpb0EgPSAxIC0gdDtcbiAgICBsZXQgcmF0aW9CID0gdDtcblxuICAgIC8vIHR3ZWFrIHRoZW0gaWYgbmVjZXNzYXJ5XG4gICAgaWYgKCAoIDEgLSBkb3QgKSA+IDAuMSApIHtcbiAgICAgIGNvbnN0IHRoZXRhID0gTWF0aC5hY29zKCBkb3QgKTtcbiAgICAgIGNvbnN0IGludlNpblRoZXRhID0gKCAxIC8gTWF0aC5zaW4oIHRoZXRhICkgKTtcblxuICAgICAgcmF0aW9BID0gKCBNYXRoLnNpbiggKCAxIC0gdCApICogdGhldGEgKSAqIGludlNpblRoZXRhICk7XG4gICAgICByYXRpb0IgPSAoIE1hdGguc2luKCAoIHQgKiB0aGV0YSApICkgKiBpbnZTaW5UaGV0YSApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUXVhdGVybmlvbihcbiAgICAgIHJhdGlvQSAqIGEueCArIHJhdGlvQiAqIGIueCxcbiAgICAgIHJhdGlvQSAqIGEueSArIHJhdGlvQiAqIGIueSxcbiAgICAgIHJhdGlvQSAqIGEueiArIHJhdGlvQiAqIGIueixcbiAgICAgIHJhdGlvQSAqIGEudyArIHJhdGlvQiAqIGIud1xuICAgICk7XG4gIH1cbn1cblxuLy8gQHB1YmxpYyB7Ym9vbGVhbn1cblF1YXRlcm5pb24ucHJvdG90eXBlLmlzUXVhdGVybmlvbiA9IHRydWU7XG5cbmRvdC5yZWdpc3RlciggJ1F1YXRlcm5pb24nLCBRdWF0ZXJuaW9uICk7XG5cblBvb2xhYmxlLm1peEludG8oIFF1YXRlcm5pb24sIHtcbiAgaW5pdGlhbGl6ZTogUXVhdGVybmlvbi5wcm90b3R5cGUuc2V0WFlaV1xufSApO1xuXG5leHBvcnQgZGVmYXVsdCBRdWF0ZXJuaW9uOyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsUUFBUSxNQUFNLGdDQUFnQztBQUNyRCxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUMxQixPQUFPQyxPQUFPLE1BQU0sY0FBYztBQUNsQyxPQUFPLFlBQVk7QUFDbkIsT0FBT0MsT0FBTyxNQUFNLGNBQWM7QUFFbEMsTUFBTUMsVUFBVSxDQUFDO0VBQ2Y7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFHO0lBQ3hCLElBQUksQ0FBQ0MsT0FBTyxDQUFFSixDQUFDLEVBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLENBQUU7RUFDNUI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLE9BQU9BLENBQUVKLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxDQUFDLEVBQUVDLENBQUMsRUFBRztJQUNwQixJQUFJLENBQUNILENBQUMsR0FBR0EsQ0FBQyxLQUFLSyxTQUFTLEdBQUdMLENBQUMsR0FBRyxDQUFDO0lBQ2hDLElBQUksQ0FBQ0MsQ0FBQyxHQUFHQSxDQUFDLEtBQUtJLFNBQVMsR0FBR0osQ0FBQyxHQUFHLENBQUM7SUFDaEMsSUFBSSxDQUFDQyxDQUFDLEdBQUdBLENBQUMsS0FBS0csU0FBUyxHQUFHSCxDQUFDLEdBQUcsQ0FBQztJQUNoQyxJQUFJLENBQUNDLENBQUMsR0FBR0EsQ0FBQyxLQUFLRSxTQUFTLEdBQUdGLENBQUMsR0FBRyxDQUFDO0VBQ2xDOztFQUVBO0FBQ0Y7QUFDQTs7RUFFRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFRyxJQUFJ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R0FBR1ksQ0FBQyxDQUFDWixDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQ0MsQ0FBQyxHQUFHLElBQUksQ0FBQ0QsQ0FBQyxHQUFHWSxDQUFDLENBQUNYLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDQyxDQUFDLEdBQUcsSUFBSSxDQUFDRixDQUFDLEdBQUdZLENBQUMsQ0FBQ1YsQ0FBQyxHQUFHLElBQUksQ0FBQ0EsQ0FBQyxHQUFHLElBQUksQ0FBQ0EsQ0FBQyxHQUFHVSxDQUFDLENBQUNaLENBQUMsR0FBRyxJQUFJLENBQUNDLENBQUMsR0FBRyxJQUFJLENBQUNBLENBQUMsR0FBR1csQ0FBQyxDQUFDWixDQUFDLEVBQzdNLENBQUMsR0FBRyxJQUFJLENBQUNBLENBQUMsR0FBRyxJQUFJLENBQUNDLENBQUMsR0FBR1csQ0FBQyxDQUFDWixDQUFDLEdBQUcsSUFBSSxDQUFDQyxDQUFDLEdBQUcsSUFBSSxDQUFDQSxDQUFDLEdBQUdXLENBQUMsQ0FBQ1gsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUNDLENBQUMsR0FBRyxJQUFJLENBQUNELENBQUMsR0FBR1csQ0FBQyxDQUFDVixDQUFDLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQ0MsQ0FBQyxHQUFHLElBQUksQ0FBQ0QsQ0FBQyxHQUFHVSxDQUFDLENBQUNaLENBQUMsR0FBRyxJQUFJLENBQUNFLENBQUMsR0FBRyxJQUFJLENBQUNBLENBQUMsR0FBR1UsQ0FBQyxDQUFDWCxDQUFDLEdBQUcsSUFBSSxDQUFDRSxDQUFDLEdBQUcsSUFBSSxDQUFDQSxDQUFDLEdBQUdTLENBQUMsQ0FBQ1gsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUNELENBQUMsR0FBRyxJQUFJLENBQUNHLENBQUMsR0FBR1MsQ0FBQyxDQUFDVixDQUFDLEdBQUcsSUFBSSxDQUFDRixDQUFDLEdBQUcsSUFBSSxDQUFDQSxDQUFDLEdBQUdZLENBQUMsQ0FBQ1gsQ0FBQyxFQUM3TSxDQUFDLEdBQUcsSUFBSSxDQUFDRCxDQUFDLEdBQUcsSUFBSSxDQUFDRSxD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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Random.js
// Copyright 2015-2022, University of Colorado Boulder

/**
 * Random number generator with an optional seed.  It uses seedrandom.js, a monkey patch for Math, see
 * https://github.com/davidbau/seedrandom.
 *
 * If you are developing a PhET Simulation, you should probably use the global `DOT/dotRandom` because it
 * provides built-in support for phet-io seeding and a check that it isn't used before the seed has been set.
 *
 * @author John Blanco (PhET Interactive Simulations)
 * @author Aaron Davis (PhET Interactive Simulations)
 * @author Sam Reid (PhET Interactive Simulations)
 * @author Mohamed Safi
 */





class Random {
  /**
   * @param {Object} [options]
   */
  constructor(options) {
    options = js_merge({
      // {number|null} seed for the random number generator.  When seed is null, Math.random() is used.
      seed: null
    }, options);

    // @private {number|null} initialized via setSeed below
    this.seed = null;

    // If seed is provided, create a local random number generator without altering Math.random.
    // Math.seedrandom is provided by seedrandom.js, see https://github.com/davidbau/seedrandom.
    // @private {function:number|null} initialized via setSeed below
    this.seedrandom = null;
    this.setSeed(options.seed);

    // @public (read-only) - the number of times `nextDouble` is called
    this.numberOfCalls = 0;
    Random.allRandomInstances.add(this);
  }

  /**
   * Clears out this instance from all of the Random instances.
   * @public
   */
  dispose() {
    Random.allRandomInstances.delete(this);
  }

  /**
   * Gets the seed.
   * @public
   * @returns {number|null}
   */
  getSeed() {
    return this.seed;
  }

  /**
   * Returns the next pseudo-random boolean
   * @public
   * @returns {boolean}
   */
  nextBoolean() {
    return this.nextDouble() >= 0.5;
  }

  /**
   * Returns the next pseudo random number from this random number generator sequence.
   * The random number is an integer ranging from 0 to n-1.
   * @public
   * @param {number} n
   * @returns {number} - an integer
   */
  nextInt(n) {
    const value = this.nextDouble() * n;
    return Math.floor(value);
  }

  /**
   * Randomly select a random integer between min and max (inclusive).
   * @public
   * @param {number} min - must be an integer
   * @param {number} max - must be an integer
   * @returns {number} an integer between min and max, inclusive
   */
  nextIntBetween(min, max) {
    assert && assert(arguments.length === 2, 'nextIntBetween must have exactly 2 arguments');
    assert && assert(Number.isInteger(min), `min must be an integer: ${min}`);
    assert && assert(Number.isInteger(max), `max must be an integer: ${max}`);
    const range = max - min;
    return this.nextInt(range + 1) + min;
  }

  /**
   * Randomly select one element from the given array.
   * @public
   * @param {T[]} array - the array from which one element will be selected, must have at least one element
   * @returns {T} - the selected element from the array
   * @template T
   */
  sample(array) {
    assert && assert(array.length > 0, 'Array should have at least 1 item.');
    const index = this.nextIntBetween(0, array.length - 1);
    return array[index];
  }

  /**
   * Creates an array of shuffled values, using a version of the Fisher-Yates shuffle.  Adapted from lodash-2.4.1 by
   * Sam Reid on Aug 16, 2016, See http://en.wikipedia.org/wiki/Fisher-Yates_shuffle.
   * @public
   * @param {Array} array - the array which will be shuffled
   * @returns {Array} a new array with all the same elements in the passed-in array, in randomized order.
   */
  shuffle(array) {
    assert && assert(array, 'Array should exist');
    let index = -1;
    const result = new Array(array.length);
    _.forEach(array, value => {
      const rand = this.nextIntBetween(0, ++index);
      result[index] = result[rand];
      result[rand] = value;
    });
    return result;
  }

  /**
   * Returns the next pseudo random number from this random number generator sequence in the range [0, 1)
   * The distribution of the random numbers is uniformly distributed across the interval
   * @public
   * @returns {number} - the random number
   */
  nextDouble() {
    this.numberOfCalls++;
    return this.seedrandom();
  }

  /**
   * Randomly selects a double in the range [min,max).
   * @public
   * @param {number} min
   * @param {number} max
   * @returns {number}
   */
  nextDoubleBetween(min, max) {
    assert && assert(min < max, 'min must be < max');
    const value = min + this.nextDouble() * (max - min);
    assert && assert(value >= min && value < max, `value out of range: ${value}`);
    return value;
  }

  /**
   * Returns the next gaussian-distributed random number from this random number generator sequence.
   * The distribution of the random numbers is gaussian, with a mean = 0 and standard deviation = 1
   * @public
   * @returns {number}
   */
  nextGaussian() {
    return js_Utils.boxMullerTransform(0, 1, this);
  }

  /**
   * Gets the next random double in a Range.
   * For min < max, the return value is [min,max), between min (inclusive) and max (exclusive).
   * For min === max, the return value is min.
   * @public
   * @param {Range} range
   * @returns {number}
   */
  nextDoubleInRange(range) {
    assert && assert(range instanceof js_Range, 'invalid range');
    if (range.min < range.max) {
      return this.nextDoubleBetween(range.min, range.max);
    } else {
      // because random.nextDoubleBetween requires min < max
      return range.min;
    }
  }

  /**
   * @public
   * @param {number|null} seed - if null, Math.random will be used to create the seed.
   */
  setSeed(seed) {
    assert && assert(seed === null || typeof seed === 'number');
    if (typeof seed === 'number') {
      assert && assert(Math.seedrandom, 'cannot set seed with 3rd party library "Math.seedrandom".');
    } else {
      seed = Math.random(); // eslint-disable-line bad-sim-text
    }

    this.seed = seed;

    // If seed is provided, create a local random number generator without altering Math.random.
    // Math.seedrandom is provided by seedrandom.js, see https://github.com/davidbau/seedrandom.
    // @private {function:number|null}
    this.seedrandom = Math.seedrandom ? new Math.seedrandom(`${seed}`) : () => Math.random(); // eslint-disable-line bad-sim-text
  }

  /**
   * Choose a numeric index from the array of weights.  The array of weights does not need to be normalized.
   * See https://stackoverflow.com/questions/8877249/generate-random-integers-with-probabilities
   * See also ContinuousServer.weightedSampleTest which uses the same algorithm
   * @param {ReadonlyArray<number>} weights
   * @returns {number}
   * @public
   */
  sampleProbabilities(weights) {
    const totalWeight = _.sum(weights);
    const cutoffWeight = totalWeight * this.nextDouble();
    let cumulativeWeight = 0;
    for (let i = 0; i < weights.length; i++) {
      cumulativeWeight += weights[i];
      if (cumulativeWeight >= cutoffWeight) {
        return i;
      }
    }

    // The fallback is the last test
    assert && assert(!weights[weights.length - 1] === 0, 'if last weight is zero, should have selected something beforehand');
    return weights.length - 1;
  }
}
Random.allRandomInstances = new Set();
Random.isNormalized = array => {
  assert && assert(_.sum(array) === 1);
};
js_dot.register('Random', Random);
/* harmony default export */ const js_Random = ((/* unused pure expression or super */ null && (Random)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtZXJnZSIsImRvdCIsIlJhbmdlIiwiVXRpbHMiLCJSYW5kb20iLCJjb25zdHJ1Y3RvciIsIm9wdGlvbnMiLCJzZWVkIiwic2VlZHJhbmRvbSIsInNldFNlZWQiLCJudW1iZXJPZkNhbGxzIiwiYWxsUmFuZG9tSW5zdGFuY2VzIiwiYWRkIiwiZGlzcG9zZSIsImRlbGV0ZSIsImdldFNlZWQiLCJuZXh0Qm9vbGVhbiIsIm5leHREb3VibGUiLCJuZXh0SW50IiwibiIsInZhbHVlIiwiTWF0aCIsImZsb29yIiwibmV4dEludEJldHdlZW4iLCJtaW4iLCJtYXgiLCJhc3NlcnQiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJOdW1iZXIiLCJpc0ludGVnZXIiLCJyYW5nZSIsInNhbXBsZSIsImFycmF5IiwiaW5kZXgiLCJzaHVmZmxlIiwicmVzdWx0IiwiQXJyYXkiLCJfIiwiZm9yRWFjaCIsInJhbmQiLCJuZXh0RG91YmxlQmV0d2VlbiIsIm5leHRHYXVzc2lhbiIsImJveE11bGxlclRyYW5zZm9ybSIsIm5leHREb3VibGVJblJhbmdlIiwicmFuZG9tIiwic2FtcGxlUHJvYmFiaWxpdGllcyIsIndlaWdodHMiLCJ0b3RhbFdlaWdodCIsInN1bSIsImN1dG9mZldlaWdodCIsImN1bXVsYXRpdmVXZWlnaHQiLCJpIiwiU2V0IiwiaXNOb3JtYWxpemVkIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSYW5kb20uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTUtMjAyMiwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogUmFuZG9tIG51bWJlciBnZW5lcmF0b3Igd2l0aCBhbiBvcHRpb25hbCBzZWVkLiAgSXQgdXNlcyBzZWVkcmFuZG9tLmpzLCBhIG1vbmtleSBwYXRjaCBmb3IgTWF0aCwgc2VlXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRiYXUvc2VlZHJhbmRvbS5cbiAqXG4gKiBJZiB5b3UgYXJlIGRldmVsb3BpbmcgYSBQaEVUIFNpbXVsYXRpb24sIHlvdSBzaG91bGQgcHJvYmFibHkgdXNlIHRoZSBnbG9iYWwgYERPVC9kb3RSYW5kb21gIGJlY2F1c2UgaXRcbiAqIHByb3ZpZGVzIGJ1aWx0LWluIHN1cHBvcnQgZm9yIHBoZXQtaW8gc2VlZGluZyBhbmQgYSBjaGVjayB0aGF0IGl0IGlzbid0IHVzZWQgYmVmb3JlIHRoZSBzZWVkIGhhcyBiZWVuIHNldC5cbiAqXG4gKiBAYXV0aG9yIEpvaG4gQmxhbmNvIChQaEVUIEludGVyYWN0aXZlIFNpbXVsYXRpb25zKVxuICogQGF1dGhvciBBYXJvbiBEYXZpcyAoUGhFVCBJbnRlcmFjdGl2ZSBTaW11bGF0aW9ucylcbiAqIEBhdXRob3IgU2FtIFJlaWQgKFBoRVQgSW50ZXJhY3RpdmUgU2ltdWxhdGlvbnMpXG4gKiBAYXV0aG9yIE1vaGFtZWQgU2FmaVxuICovXG5cbmltcG9ydCBtZXJnZSBmcm9tICcuLi8uLi9waGV0LWNvcmUvanMvbWVyZ2UuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgUmFuZ2UgZnJvbSAnLi9SYW5nZS5qcyc7XG5pbXBvcnQgVXRpbHMgZnJvbSAnLi9VdGlscy5qcyc7XG5cbmNsYXNzIFJhbmRvbSB7XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICovXG4gIGNvbnN0cnVjdG9yKCBvcHRpb25zICkge1xuXG4gICAgb3B0aW9ucyA9IG1lcmdlKCB7XG5cbiAgICAgIC8vIHtudW1iZXJ8bnVsbH0gc2VlZCBmb3IgdGhlIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yLiAgV2hlbiBzZWVkIGlzIG51bGwsIE1hdGgucmFuZG9tKCkgaXMgdXNlZC5cbiAgICAgIHNlZWQ6IG51bGxcbiAgICB9LCBvcHRpb25zICk7XG5cbiAgICAvLyBAcHJpdmF0ZSB7bnVtYmVyfG51bGx9IGluaXRpYWxpemVkIHZpYSBzZXRTZWVkIGJlbG93XG4gICAgdGhpcy5zZWVkID0gbnVsbDtcblxuICAgIC8vIElmIHNlZWQgaXMgcHJvdmlkZWQsIGNyZWF0ZSBhIGxvY2FsIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIHdpdGhvdXQgYWx0ZXJpbmcgTWF0aC5yYW5kb20uXG4gICAgLy8gTWF0aC5zZWVkcmFuZG9tIGlzIHByb3ZpZGVkIGJ5IHNlZWRyYW5kb20uanMsIHNlZSBodHRwczovL2dpdGh1Yi5jb20vZGF2aWRiYXUvc2VlZHJhbmRvbS5cbiAgICAvLyBAcHJpdmF0ZSB7ZnVuY3Rpb246bnVtYmVyfG51bGx9IGluaXRpYWxpemVkIHZpYSBzZXRTZWVkIGJlbG93XG4gICAgdGhpcy5zZWVkcmFuZG9tID0gbnVsbDtcbiAgICB0aGlzLnNldFNlZWQoIG9wdGlvbnMuc2VlZCApO1xuXG4gICAgLy8gQHB1YmxpYyAocmVhZC1vbmx5KSAtIHRoZSBudW1iZXIgb2YgdGltZXMgYG5leHREb3VibGVgIGlzIGNhbGxlZFxuICAgIHRoaXMubnVtYmVyT2ZDYWxscyA9IDA7XG5cbiAgICBSYW5kb20uYWxsUmFuZG9tSW5zdGFuY2VzLmFkZCggdGhpcyApO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFycyBvdXQgdGhpcyBpbnN0YW5jZSBmcm9tIGFsbCBvZiB0aGUgUmFuZG9tIGluc3RhbmNlcy5cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgZGlzcG9zZSgpIHtcbiAgICBSYW5kb20uYWxsUmFuZG9tSW5zdGFuY2VzLmRlbGV0ZSggdGhpcyApO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIHNlZWQuXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybnMge251bWJlcnxudWxsfVxuICAgKi9cbiAgZ2V0U2VlZCgpIHtcbiAgICByZXR1cm4gdGhpcy5zZWVkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5leHQgcHNldWRvLXJhbmRvbSBib29sZWFuXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAqL1xuICBuZXh0Qm9vbGVhbigpIHtcbiAgICByZXR1cm4gdGhpcy5uZXh0RG91YmxlKCkgPj0gMC41O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIG5leHQgcHNldWRvIHJhbmRvbSBudW1iZXIgZnJvbSB0aGlzIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIHNlcXVlbmNlLlxuICAgKiBUaGUgcmFuZG9tIG51bWJlciBpcyBhbiBpbnRlZ2VyIHJhbmdpbmcgZnJvbSAwIHRvIG4tMS5cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge251bWJlcn0gblxuICAgKiBAcmV0dXJucyB7bnVtYmVyfSAtIGFuIGludGVnZXJcbiAgICovXG4gIG5leHRJbnQoIG4gKSB7XG4gICAgY29uc3QgdmFsdWUgPSB0aGlzLm5leHREb3VibGUoKSAqIG47XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoIHZhbHVlICk7XG4gIH1cblxuICAvKipcbiAgICogUmFuZG9tbHkgc2VsZWN0IGEgcmFuZG9tIGludGVnZXIgYmV0d2VlbiBtaW4gYW5kIG1heCAoaW5jbHVzaXZlKS5cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge251bWJlcn0gbWluIC0gbXVzdCBiZSBhbiBpbnRlZ2VyXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXggLSBtdXN0IGJlIGFuIGludGVnZXJcbiAgICogQHJldHVybnMge251bWJlcn0gYW4gaW50ZWdlciBiZXR3ZWVuIG1pbiBhbmQgbWF4LCBpbmNsdXNpdmVcbiAgICovXG4gIG5leHRJbnRCZXR3ZWVuKCBtaW4sIG1heCApIHtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIGFyZ3VtZW50cy5sZW5ndGggPT09IDIsICduZXh0SW50QmV0d2VlbiBtdXN0IGhhdmUgZXhhY3RseSAyIGFyZ3VtZW50cycgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBOdW1iZXIuaXNJbnRlZ2VyKCBtaW4gKSwgYG1pbiBtdXN0IGJlIGFuIGludGVnZXI6ICR7bWlufWAgKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBOdW1iZXIuaXNJbnRlZ2VyKCBtYXggKSwgYG1heCBtdXN0IGJlIGFuIGludGVnZXI6ICR7bWF4fWAgKTtcblxuICAgIGNvbnN0IHJhbmdlID0gbWF4IC0gbWluO1xuICAgIHJldHVybiB0aGlzLm5leHRJbnQoIHJhbmdlICsgMSApICsgbWluO1xuICB9XG5cbiAgLyoqXG4gICAqIFJhbmRvbWx5IHNlbGVjdCBvbmUgZWxlbWVudCBmcm9tIHRoZSBnaXZlbiBhcnJheS5cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1RbXX0gYXJyYXkgLSB0aGUgYXJyYXkgZnJvbSB3aGljaCBvbmUgZWxlbWVudCB3aWxsIGJlIHNlbGVjdGVkLCBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIGVsZW1lbnRcbiAgICogQHJldHVybnMge1R9IC0gdGhlIHNlbGVjdGVkIGVsZW1lbnQgZnJvbSB0aGUgYXJyYXlcbiAgICogQHRlbXBsYXRlIFRcbiAgICovXG4gIHNhbXBsZSggYXJyYXkgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYXJyYXkubGVuZ3RoID4gMCwgJ0FycmF5IHNob3VsZCBoYXZlIGF0IGxlYXN0IDEgaXRlbS4nICk7XG4gICAgY29uc3QgaW5kZXggPSB0aGlzLm5leHRJbnRCZXR3ZWVuKCAwLCBhcnJheS5sZW5ndGggLSAxICk7XG4gICAgcmV0dXJuIGFycmF5WyBpbmRleCBdO1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYW4gYXJyYXkgb2Ygc2h1ZmZsZWQgdmFsdWVzLCB1c2luZyBhIHZlcnNpb24gb2YgdGhlIEZpc2hlci1ZYXRlcyBzaHVmZmxlLiAgQWRhcHRlZCBmcm9tIGxvZGFzaC0yLjQuMSBieVxuICAgKiBTYW0gUmVpZCBvbiBBdWcgMTYsIDIwMTYsIFNlZSBodHRwOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlci1ZYXRlc19zaHVmZmxlLlxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IC0gdGhlIGFycmF5IHdoaWNoIHdpbGwgYmUgc2h1ZmZsZWRcbiAgICogQHJldHVybnMge0FycmF5fSBhIG5ldyBhcnJheSB3aXRoIGFsbCB0aGUgc2FtZSBlbGVtZW50cyBpbiB0aGUgcGFzc2VkLWluIGFycmF5LCBpbiByYW5kb21pemVkIG9yZGVyLlxuICAgKi9cbiAgc2h1ZmZsZSggYXJyYXkgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggYXJyYXksICdBcnJheSBzaG91bGQgZXhpc3QnICk7XG4gICAgbGV0IGluZGV4ID0gLTE7XG4gICAgY29uc3QgcmVzdWx0ID0gbmV3IEFycmF5KCBhcnJheS5sZW5ndGggKTtcblxuICAgIF8uZm9yRWFjaCggYXJyYXksIHZhbHVlID0+IHtcbiAgICAgIGNvbnN0IHJhbmQgPSB0aGlzLm5leHRJbnRCZXR3ZWVuKCAwLCArK2luZGV4ICk7XG4gICAgICByZXN1bHRbIGluZGV4IF0gPSByZXN1bHRbIHJhbmQgXTtcbiAgICAgIHJlc3VsdFsgcmFuZCBdID0gdmFsdWU7XG4gICAgfSApO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbmV4dCBwc2V1ZG8gcmFuZG9tIG51bWJlciBmcm9tIHRoaXMgcmFuZG9tIG51bWJlciBnZW5lcmF0b3Igc2VxdWVuY2UgaW4gdGhlIHJhbmdlIFswLCAxKVxuICAgKiBUaGUgZGlzdHJpYnV0aW9uIG9mIHRoZSByYW5kb20gbnVtYmVycyBpcyB1bmlmb3JtbHkgZGlzdHJpYnV0ZWQgYWNyb3NzIHRoZSBpbnRlcnZhbFxuICAgKiBAcHVibGljXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9IC0gdGhlIHJhbmRvbSBudW1iZXJcbiAgICovXG4gIG5leHREb3VibGUoKSB7XG4gICAgdGhpcy5udW1iZXJPZkNhbGxzKys7XG4gICAgcmV0dXJuIHRoaXMuc2VlZHJhbmRvbSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJhbmRvbWx5IHNlbGVjdHMgYSBkb3VibGUgaW4gdGhlIHJhbmdlIFttaW4sbWF4KS5cbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge251bWJlcn0gbWluXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBtYXhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG5leHREb3VibGVCZXR3ZWVuKCBtaW4sIG1heCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBtaW4gPCBtYXgsICdtaW4gbXVzdCBiZSA8IG1heCcgKTtcbiAgICBjb25zdCB2YWx1ZSA9IG1pbiArIHRoaXMubmV4dERvdWJsZSgpICogKCBtYXggLSBtaW4gKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB2YWx1ZSA+PSBtaW4gJiYgdmFsdWUgPCBtYXgsIGB2YWx1ZSBvdXQgb2YgcmFuZ2U6ICR7dmFsdWV9YCApO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBuZXh0IGdhdXNzaWFuLWRpc3RyaWJ1dGVkIHJhbmRvbSBudW1iZXIgZnJvbSB0aGlzIHJhbmRvbSBudW1iZXIgZ2VuZXJhdG9yIHNlcXVlbmNlLlxuICAgKiBUaGUgZGlzdHJpYnV0aW9uIG9mIHRoZSByYW5kb20gbnVtYmVycyBpcyBnYXVzc2lhbiwgd2l0aCBhIG1lYW4gPSAwIGFuZCBzdGFuZGFyZCBkZXZpYXRpb24gPSAxXG4gICAqIEBwdWJsaWNcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIG5leHRHYXVzc2lhbigpIHtcbiAgICByZXR1cm4gVXRpbHMuYm94TXVsbGVyVHJhbnNmb3JtKCAwLCAxLCB0aGlzICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgbmV4dCByYW5kb20gZG91YmxlIGluIGEgUmFuZ2UuXG4gICAqIEZvciBtaW4gPCBtYXgsIHRoZSByZXR1cm4gdmFsdWUgaXMgW21pbixtYXgpLCBiZXR3ZWVuIG1pbiAoaW5jbHVzaXZlKSBhbmQgbWF4IChleGNsdXNpdmUpLlxuICAgKiBGb3IgbWluID09PSBtYXgsIHRoZSByZXR1cm4gdmFsdWUgaXMgbWluLlxuICAgKiBAcHVibGljXG4gICAqIEBwYXJhbSB7UmFuZ2V9IHJhbmdlXG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBuZXh0RG91YmxlSW5SYW5nZSggcmFuZ2UgKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggcmFuZ2UgaW5zdGFuY2VvZiBSYW5nZSwgJ2ludmFsaWQgcmFuZ2UnICk7XG4gICAgaWYgKCByYW5nZS5taW4gPCByYW5nZS5tYXggKSB7XG4gICAgICByZXR1cm4gdGhpcy5uZXh0RG91YmxlQmV0d2VlbiggcmFuZ2UubWluLCByYW5nZS5tYXggKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyBiZWNhdXNlIHJhbmRvbS5uZXh0RG91YmxlQmV0d2VlbiByZXF1aXJlcyBtaW4gPCBtYXhcbiAgICAgIHJldHVybiByYW5nZS5taW47XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEBwdWJsaWNcbiAgICogQHBhcmFtIHtudW1iZXJ8bnVsbH0gc2VlZCAtIGlmIG51bGwsIE1hdGgucmFuZG9tIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgdGhlIHNlZWQuXG4gICAqL1xuICBzZXRTZWVkKCBzZWVkICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIHNlZWQgPT09IG51bGwgfHwgdHlwZW9mIHNlZWQgPT09ICdudW1iZXInICk7XG5cbiAgICBpZiAoIHR5cGVvZiBzZWVkID09PSAnbnVtYmVyJyApIHtcbiAgICAgIGFzc2VydCAmJiBhc3NlcnQoIE1hdGguc2VlZHJhbmRvbSwgJ2Nhbm5vdCBzZXQgc2VlZCB3aXRoIDNyZCBwYXJ0eSBsaWJyYXJ5IFwiTWF0aC5zZWVkcmFuZG9tXCIuJyApO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHNlZWQgPSBNYXRoLnJhbmRvbSgpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIGJhZC1zaW0tdGV4dFxuICAgIH1cblxuICAgIHRoaXMuc2VlZCA9IHNlZWQ7XG5cbiAgICAvLyBJZiBzZWVkIGlzIHByb3ZpZGVkLCBjcmVhdGUgYSBsb2NhbCByYW5kb20gbnVtYmVyIGdlbmVyYXRvciB3aXRob3V0IGFsdGVyaW5nIE1hdGgucmFuZG9tLlxuICAgIC8vIE1hdGguc2VlZHJhbmRvbSBpcyBwcm92aWRlZCBieSBzZWVkcmFuZG9tLmpzLCBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2RhdmlkYmF1L3NlZWRyYW5kb20uXG4gICAgLy8gQHByaXZhdGUge2Z1bmN0aW9uOm51bWJlcnxudWxsfVxuICAgIHRoaXMuc2VlZHJhbmRvbSA9IE1hdGguc2VlZHJhbmRvbSA/IG5ldyBNYXRoLnNlZWRyYW5kb20oIGAke3NlZWR9YCApIDogKCkgPT4gTWF0aC5yYW5kb20oKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBiYWQtc2ltLXRleHRcbiAgfVxuXG4gIC8qKlxuICAgKiBDaG9vc2UgYSBudW1lcmljIGluZGV4IGZyb20gdGhlIGFycmF5IG9mIHdlaWdodHMuICBUaGUgYXJyYXkgb2Ygd2VpZ2h0cyBkb2VzIG5vdCBuZWVkIHRvIGJlIG5vcm1hbGl6ZWQuXG4gICAqIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy84ODc3MjQ5L2dlbmVyYXRlLXJhbmRvbS1pbnRlZ2Vycy13aXRoLXByb2JhYmlsaXRpZXNcbiAgICogU2VlIGFsc28gQ29udGludW91c1NlcnZlci53ZWlnaHRlZFNhbXBsZVRlc3Qgd2hpY2ggdXNlcyB0aGUgc2FtZSBhbGdvcml0aG1cbiAgICogQHBhcmFtIHtSZWFkb25seUFycmF5PG51bWJlcj59IHdlaWdodHNcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICogQHB1YmxpY1xuICAgKi9cbiAgc2FtcGxlUHJvYmFiaWxpdGllcyggd2VpZ2h0cyApIHtcbiAgICBjb25zdCB0b3RhbFdlaWdodCA9IF8uc3VtKCB3ZWlnaHRzICk7XG5cbiAgICBjb25zdCBjdXRvZmZXZWlnaHQgPSB0b3RhbFdlaWdodCAqIHRoaXMubmV4dERvdWJsZSgpO1xuICAgIGxldCBjdW11bGF0aXZlV2VpZ2h0ID0gMDtcblxuICAgIGZvciAoIGxldCBpID0gMDsgaSA8IHdlaWdodHMubGVuZ3RoOyBpKysgKSB7XG4gICAgICBjdW11bGF0aXZlV2VpZ2h0ICs9IHdlaWdodHNbIGkgXTtcbiAgICAgIGlmICggY3VtdWxhdGl2ZVdlaWdodCA+PSBjdXRvZmZXZWlnaHQgKSB7XG4gICAgICAgIHJldHVybiBpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRoZSBmYWxsYmFjayBpcyB0aGUgbGFzdCB0ZXN0XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIXdlaWdodHNbIHdlaWdodHMubGVuZ3RoIC0gMSBdID09PSAwLCAnaWYgbGFzdCB3ZWlnaHQgaXMgemVybywgc2hvdWxkIGhhdmUgc2VsZWN0ZWQgc29tZXRoaW5nIGJlZm9yZWhhbmQnICk7XG4gICAgcmV0dXJuIHdlaWdodHMubGVuZ3RoIC0gMTtcbiAgfVxufVxuXG5SYW5kb20uYWxsUmFuZG9tSW5zdGFuY2VzID0gbmV3IFNldCgpO1xuUmFuZG9tLmlzTm9ybWFsaXplZCA9IGFycmF5ID0+IHtcbiAgYXNzZXJ0ICYmIGFzc2VydCggXy5zdW0oIGFycmF5ICkgPT09IDEgKTtcbn07XG5cbmRvdC5yZWdpc3RlciggJ1JhbmRvbScsIFJhbmRvbSApO1xuXG5leHBvcnQgZGVmYXVsdCBSYW5kb207Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsS0FBSyxNQUFNLDZCQUE2QjtBQUMvQyxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUMxQixPQUFPQyxLQUFLLE1BQU0sWUFBWTtBQUM5QixPQUFPQyxLQUFLLE1BQU0sWUFBWTtBQUU5QixNQUFNQyxNQUFNLENBQUM7RUFFWDtBQUNGO0FBQ0E7RUFDRUMsV0FBV0EsQ0FBRUMsT0FBTyxFQUFHO0lBRXJCQSxPQUFPLEdBQUdOLEtBQUssQ0FBRTtNQUVmO01BQ0FPLElBQUksRUFBRTtJQUNSLENBQUMsRUFBRUQsT0FBTyxDQUFFOztJQUVaO0lBQ0EsSUFBSSxDQUFDQyxJQUFJLEdBQUcsSUFBSTs7SUFFaEI7SUFDQTtJQUNBO0lBQ0EsSUFBSSxDQUFDQyxVQUFV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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Ray2.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * 2-dimensional ray consisting of an origin point and a unit direction vector.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


class Ray2 {
  /**
   * Constructs a2D ray using the supplied origin position and unit length direction vector
   *
   * @param position - the ray's point of origin
   * @param direction - the ray's unit direction vector
   */
  constructor(position, direction) {
    this.position = position;
    this.direction = direction;
    assert && assert(Math.abs(direction.magnitude - 1) < 0.01, 'the direction must be a unit vector');
  }

  /**
   * Returns a new Ray that has it origin shifted to a position given by an amount distance*this.direction.
   */
  shifted(distance) {
    return new Ray2(this.pointAtDistance(distance), this.direction);
  }

  /**
   * Returns a position that is a distance 'distance' along the ray.
   */
  pointAtDistance(distance) {
    return this.position.plus(this.direction.timesScalar(distance));
  }

  /**
   * Returns the attributes of this ray into a string
   */
  toString() {
    return `${this.position.toString()} => ${this.direction.toString()}`;
  }
}
js_dot.register('Ray2', Ray2);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJSYXkyIiwiY29uc3RydWN0b3IiLCJwb3NpdGlvbiIsImRpcmVjdGlvbiIsImFzc2VydCIsIk1hdGgiLCJhYnMiLCJtYWduaXR1ZGUiLCJzaGlmdGVkIiwiZGlzdGFuY2UiLCJwb2ludEF0RGlzdGFuY2UiLCJwbHVzIiwidGltZXNTY2FsYXIiLCJ0b1N0cmluZyIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiUmF5Mi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIyLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiAyLWRpbWVuc2lvbmFsIHJheSBjb25zaXN0aW5nIG9mIGFuIG9yaWdpbiBwb2ludCBhbmQgYSB1bml0IGRpcmVjdGlvbiB2ZWN0b3IuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuaW1wb3J0IFZlY3RvcjIgZnJvbSAnLi9WZWN0b3IyLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmF5MiB7XG5cbiAgcHVibGljIHBvc2l0aW9uOiBWZWN0b3IyO1xuICBwdWJsaWMgZGlyZWN0aW9uOiBWZWN0b3IyO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEyRCByYXkgdXNpbmcgdGhlIHN1cHBsaWVkIG9yaWdpbiBwb3NpdGlvbiBhbmQgdW5pdCBsZW5ndGggZGlyZWN0aW9uIHZlY3RvclxuICAgKlxuICAgKiBAcGFyYW0gcG9zaXRpb24gLSB0aGUgcmF5J3MgcG9pbnQgb2Ygb3JpZ2luXG4gICAqIEBwYXJhbSBkaXJlY3Rpb24gLSB0aGUgcmF5J3MgdW5pdCBkaXJlY3Rpb24gdmVjdG9yXG4gICAqL1xuICBwdWJsaWMgY29uc3RydWN0b3IoIHBvc2l0aW9uOiBWZWN0b3IyLCBkaXJlY3Rpb246IFZlY3RvcjIgKSB7XG5cbiAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XG4gICAgdGhpcy5kaXJlY3Rpb24gPSBkaXJlY3Rpb247XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBNYXRoLmFicyggZGlyZWN0aW9uLm1hZ25pdHVkZSAtIDEgKSA8IDAuMDEsICd0aGUgZGlyZWN0aW9uIG11c3QgYmUgYSB1bml0IHZlY3RvcicgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgbmV3IFJheSB0aGF0IGhhcyBpdCBvcmlnaW4gc2hpZnRlZCB0byBhIHBvc2l0aW9uIGdpdmVuIGJ5IGFuIGFtb3VudCBkaXN0YW5jZSp0aGlzLmRpcmVjdGlvbi5cbiAgICovXG4gIHB1YmxpYyBzaGlmdGVkKCBkaXN0YW5jZTogbnVtYmVyICk6IFJheTIge1xuICAgIHJldHVybiBuZXcgUmF5MiggdGhpcy5wb2ludEF0RGlzdGFuY2UoIGRpc3RhbmNlICksIHRoaXMuZGlyZWN0aW9uICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHBvc2l0aW9uIHRoYXQgaXMgYSBkaXN0YW5jZSAnZGlzdGFuY2UnIGFsb25nIHRoZSByYXkuXG4gICAqL1xuICBwdWJsaWMgcG9pbnRBdERpc3RhbmNlKCBkaXN0YW5jZTogbnVtYmVyICk6IFZlY3RvcjIge1xuICAgIHJldHVybiB0aGlzLnBvc2l0aW9uLnBsdXMoIHRoaXMuZGlyZWN0aW9uLnRpbWVzU2NhbGFyKCBkaXN0YW5jZSApICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYXR0cmlidXRlcyBvZiB0aGlzIHJheSBpbnRvIGEgc3RyaW5nXG4gICAqL1xuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5wb3NpdGlvbi50b1N0cmluZygpfSA9PiAke3RoaXMuZGlyZWN0aW9uLnRvU3RyaW5nKCl9YDtcbiAgfVxufVxuXG5kb3QucmVnaXN0ZXIoICdSYXkyJywgUmF5MiApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEdBQUcsTUFBTSxVQUFVO0FBRzFCLGVBQWUsTUFBTUMsSUFBSSxDQUFDO0VBS3hCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNTQyxXQUFXQSxDQUFFQyxRQUFpQixFQUFFQyxTQUFrQixFQUFHO0lBRTFELElBQUksQ0FBQ0QsUUFBUSxHQUFHQSxRQUFRO0lBQ3hCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQSxTQUFTO0lBRTFCQyxNQUFNLElBQUlBLE1BQU0sQ0FBRUMsSUFBSSxDQUFDQyxHQUFHLENBQUVILFNBQVMsQ0FBQ0ksU0FBUyxHQUFHLENBQUMsQ0FBRSxHQUFHLElBQUksRUFBRSxxQ0FBcUMsQ0FBRTtFQUN2Rzs7RUFFQTtBQUNGO0FBQ0E7RUFDU0MsT0FBT0EsQ0FBRUMsUUFBZ0IsRUFBUztJQUN2QyxPQUFPLElBQUlULElBQUksQ0FBRSxJQUFJLENBQUNVLGVBQWUsQ0FBRUQsUUFBUSxDQUFFLEVBQUUsSUFBSSxDQUFDTixTQUFTLENBQUU7RUFDckU7O0VBRUE7QUFDRjtBQUNBO0VBQ1NPLGVBQWVBLENBQUVELFFBQWdCLEVBQVk7SUFDbEQsT0FBTyxJQUFJLENBQUNQLFFBQVEsQ0FBQ1MsSUFBSSxDQUFFLElBQUksQ0FBQ1IsU0FBUyxDQUFDUyxXQUFXLENBQUVILFFBQVEsQ0FBRSxDQUFFO0VBQ3JFOztFQUVBO0FBQ0Y7QUFDQTtFQUNTSSxRQUFRQSxDQUFBLEVBQVc7SUFDeEIsT0FBUSxHQUFFLElBQUksQ0FBQ1gsUUFBUSxDQUFDVyxRQUFRLEVBQUcsT0FBTSxJQUFJLENBQUNWLFNBQVMsQ0FBQ1UsUUFBUSxFQUFHLEVBQUM7RUFDdEU7QUFDRjtBQUVBZCxHQUFHLENBQUNlLFFBQVEsQ0FBRSxNQUFNLEVBQUVkLElBQUksQ0FBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Ray3.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * 3-dimensional ray consisting of an origin point and a unit direction vector.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


class Ray3 {
  /**
   * Constructs a 3D ray using the supplied origin position and unit length direction vector
   *
   * @param position - the ray's point of origin
   * @param direction - the ray's unit direction vector
   */
  constructor(position, direction) {
    this.position = position;
    this.direction = direction;
    assert && assert(Math.abs(direction.magnitude - 1) < 0.01, 'the direction must be a unit vector');
  }

  /**
   * Returns a new Ray that has it origin shifted to a position given by an amount distance*this.direction.
   */
  shifted(distance) {
    return new Ray3(this.pointAtDistance(distance), this.direction);
  }

  /**
   * Returns a position that is a distance 'distance' along the ray.
   */
  pointAtDistance(distance) {
    return this.position.plus(this.direction.timesScalar(distance));
  }

  /**
   * Returns the distance of this ray to a plane
   */
  distanceToPlane(plane) {
    return (plane.distance - this.position.dot(plane.normal)) / this.direction.dot(plane.normal);
  }

  /**
   * Returns the attributes of this ray into a string
   */
  toString() {
    return `${this.position.toString()} => ${this.direction.toString()}`;
  }
}
js_dot.register('Ray3', Ray3);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJSYXkzIiwiY29uc3RydWN0b3IiLCJwb3NpdGlvbiIsImRpcmVjdGlvbiIsImFzc2VydCIsIk1hdGgiLCJhYnMiLCJtYWduaXR1ZGUiLCJzaGlmdGVkIiwiZGlzdGFuY2UiLCJwb2ludEF0RGlzdGFuY2UiLCJwbHVzIiwidGltZXNTY2FsYXIiLCJkaXN0YW5jZVRvUGxhbmUiLCJwbGFuZSIsIm5vcm1hbCIsInRvU3RyaW5nIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSYXkzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIDMtZGltZW5zaW9uYWwgcmF5IGNvbnNpc3Rpbmcgb2YgYW4gb3JpZ2luIHBvaW50IGFuZCBhIHVuaXQgZGlyZWN0aW9uIHZlY3Rvci5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgUGxhbmUzIGZyb20gJy4vUGxhbmUzLmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJheTMge1xuXG4gIHB1YmxpYyBwb3NpdGlvbjogVmVjdG9yMztcbiAgcHVibGljIGRpcmVjdGlvbjogVmVjdG9yMztcblxuICAvKipcbiAgICogQ29uc3RydWN0cyBhIDNEIHJheSB1c2luZyB0aGUgc3VwcGxpZWQgb3JpZ2luIHBvc2l0aW9uIGFuZCB1bml0IGxlbmd0aCBkaXJlY3Rpb24gdmVjdG9yXG4gICAqXG4gICAqIEBwYXJhbSBwb3NpdGlvbiAtIHRoZSByYXkncyBwb2ludCBvZiBvcmlnaW5cbiAgICogQHBhcmFtIGRpcmVjdGlvbiAtIHRoZSByYXkncyB1bml0IGRpcmVjdGlvbiB2ZWN0b3JcbiAgICovXG4gIHB1YmxpYyBjb25zdHJ1Y3RvciggcG9zaXRpb246IFZlY3RvcjMsIGRpcmVjdGlvbjogVmVjdG9yMyApIHtcblxuICAgIHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcbiAgICB0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcblxuICAgIGFzc2VydCAmJiBhc3NlcnQoIE1hdGguYWJzKCBkaXJlY3Rpb24ubWFnbml0dWRlIC0gMSApIDwgMC4wMSwgJ3RoZSBkaXJlY3Rpb24gbXVzdCBiZSBhIHVuaXQgdmVjdG9yJyApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBuZXcgUmF5IHRoYXQgaGFzIGl0IG9yaWdpbiBzaGlmdGVkIHRvIGEgcG9zaXRpb24gZ2l2ZW4gYnkgYW4gYW1vdW50IGRpc3RhbmNlKnRoaXMuZGlyZWN0aW9uLlxuICAgKi9cbiAgcHVibGljIHNoaWZ0ZWQoIGRpc3RhbmNlOiBudW1iZXIgKTogUmF5MyB7XG4gICAgcmV0dXJuIG5ldyBSYXkzKCB0aGlzLnBvaW50QXREaXN0YW5jZSggZGlzdGFuY2UgKSwgdGhpcy5kaXJlY3Rpb24gKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgcG9zaXRpb24gdGhhdCBpcyBhIGRpc3RhbmNlICdkaXN0YW5jZScgYWxvbmcgdGhlIHJheS5cbiAgICovXG4gIHB1YmxpYyBwb2ludEF0RGlzdGFuY2UoIGRpc3RhbmNlOiBudW1iZXIgKTogVmVjdG9yMyB7XG4gICAgcmV0dXJuIHRoaXMucG9zaXRpb24ucGx1cyggdGhpcy5kaXJlY3Rpb24udGltZXNTY2FsYXIoIGRpc3RhbmNlICkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBkaXN0YW5jZSBvZiB0aGlzIHJheSB0byBhIHBsYW5lXG4gICAqL1xuICBwdWJsaWMgZGlzdGFuY2VUb1BsYW5lKCBwbGFuZTogUGxhbmUzICk6IG51bWJlciB7XG4gICAgcmV0dXJuICggcGxhbmUuZGlzdGFuY2UgLSB0aGlzLnBvc2l0aW9uLmRvdCggcGxhbmUubm9ybWFsICkgKSAvIHRoaXMuZGlyZWN0aW9uLmRvdCggcGxhbmUubm9ybWFsICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYXR0cmlidXRlcyBvZiB0aGlzIHJheSBpbnRvIGEgc3RyaW5nXG4gICAqL1xuICBwdWJsaWMgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYCR7dGhpcy5wb3NpdGlvbi50b1N0cmluZygpfSA9PiAke3RoaXMuZGlyZWN0aW9uLnRvU3RyaW5nKCl9YDtcbiAgfVxufVxuXG5kb3QucmVnaXN0ZXIoICdSYXkzJywgUmF5MyApO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU9BLEdBQUcsTUFBTSxVQUFVO0FBSTFCLGVBQWUsTUFBTUMsSUFBSSxDQUFDO0VBS3hCO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNTQyxXQUFXQSxDQUFFQyxRQUFpQixFQUFFQyxTQUFrQixFQUFHO0lBRTFELElBQUksQ0FBQ0QsUUFBUSxHQUFHQSxRQUFRO0lBQ3hCLElBQUksQ0FBQ0MsU0FBUyxHQUFHQSxTQUFTO0lBRTFCQyxNQUFNLElBQUlBLE1BQU0sQ0FBRUMsSUFBSSxDQUFDQyxHQUFHLENBQUVILFNBQVMsQ0FBQ0ksU0FBUyxHQUFHLENBQUMsQ0FBRSxHQUFHLElBQUksRUFBRSxxQ0FBcUMsQ0FBRTtFQUN2Rzs7RUFFQTtBQUNGO0FBQ0E7RUFDU0MsT0FBT0EsQ0FBRUMsUUFBZ0IsRUFBUztJQUN2QyxPQUFPLElBQUlULElBQUksQ0FBRSxJQUFJLENBQUNVLGVBQWUsQ0FBRUQsUUFBUSxDQUFFLEVBQUUsSUFBSSxDQUFDTixTQUFTLENBQUU7RUFDckU7O0VBRUE7QUFDRjtBQUNBO0VBQ1NPLGVBQWVBLENBQUVELFFBQWdCLEVBQVk7SUFDbEQsT0FBTyxJQUFJLENBQUNQLFFBQVEsQ0FBQ1MsSUFBSSxDQUFFLElBQUksQ0FBQ1IsU0FBUyxDQUFDUyxXQUFXLENBQUVILFFBQVEsQ0FBRSxDQUFFO0VBQ3JFOztFQUVBO0FBQ0Y7QUFDQTtFQUNTSSxlQUFlQSxDQUFFQyxLQUFhLEVBQVc7SUFDOUMsT0FBTyxDQUFFQSxLQUFLLENBQUNMLFFBQVEsR0FBRyxJQUFJLENBQUNQLFFBQVEsQ0FBQ0gsR0FBRyxDQUFFZSxLQUFLLENBQUNDLE1BQU0sQ0FBRSxJQUFLLElBQUksQ0FBQ1osU0FBUyxDQUFDSixHQUFHLENBQUVlLEtBQUssQ0FBQ0MsTUFBTSxDQUFFO0VBQ3BHOztFQUVBO0FBQ0Y7QUFDQTtFQUNTQyxRQUFRQSxDQUFBLEVBQVc7SUFDeEIsT0FBUSxHQUFFLElBQUksQ0FBQ2QsUUFBUSxDQUFDYyxRQUFRLEVBQUcsT0FBTSxJQUFJLENBQUNiLFNBQVMsQ0FBQ2EsUUFBUSxFQUFHLEVBQUM7RUFDdEU7QUFDRjtBQUVBakIsR0FBRyxDQUFDa0IsUUFBUSxDQUFFLE1BQU0sRUFBRWpCLElBQUksQ0FBRSJ9
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Rectangle.js
// Copyright 2013-2020, University of Colorado Boulder

/**
 * A 2D rectangle-shaped bounded area, with a convenience name and constructor. Totally functionally
 * equivalent to Bounds2, but with a different constructor.
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */



class Rectangle extends Bounds2 {
  /**
   * @param {number} x
   * @param {number} y
   * @param {number} width
   * @param {number} height
   */
  constructor(x, y, width, height) {
    assert && assert(height !== undefined, 'Rectangle requires 4 parameters');
    super(x, y, x + width, y + height);
  }
}
js_dot.register('Rectangle', Rectangle);
/* harmony default export */ const js_Rectangle = ((/* unused pure expression or super */ null && (Rectangle)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJCb3VuZHMyIiwiZG90IiwiUmVjdGFuZ2xlIiwiY29uc3RydWN0b3IiLCJ4IiwieSIsIndpZHRoIiwiaGVpZ2h0IiwiYXNzZXJ0IiwidW5kZWZpbmVkIiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJSZWN0YW5nbGUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTMtMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQSAyRCByZWN0YW5nbGUtc2hhcGVkIGJvdW5kZWQgYXJlYSwgd2l0aCBhIGNvbnZlbmllbmNlIG5hbWUgYW5kIGNvbnN0cnVjdG9yLiBUb3RhbGx5IGZ1bmN0aW9uYWxseVxuICogZXF1aXZhbGVudCB0byBCb3VuZHMyLCBidXQgd2l0aCBhIGRpZmZlcmVudCBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IEJvdW5kczIgZnJvbSAnLi9Cb3VuZHMyLmpzJztcbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuXG5jbGFzcyBSZWN0YW5nbGUgZXh0ZW5kcyBCb3VuZHMyIHtcbiAgLyoqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEBwYXJhbSB7bnVtYmVyfSB3aWR0aFxuICAgKiBAcGFyYW0ge251bWJlcn0gaGVpZ2h0XG4gICAqL1xuICBjb25zdHJ1Y3RvciggeCwgeSwgd2lkdGgsIGhlaWdodCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBoZWlnaHQgIT09IHVuZGVmaW5lZCwgJ1JlY3RhbmdsZSByZXF1aXJlcyA0IHBhcmFtZXRlcnMnICk7XG4gICAgc3VwZXIoIHgsIHksIHggKyB3aWR0aCwgeSArIGhlaWdodCApO1xuICB9XG59XG5cbmRvdC5yZWdpc3RlciggJ1JlY3RhbmdsZScsIFJlY3RhbmdsZSApO1xuXG5leHBvcnQgZGVmYXVsdCBSZWN0YW5nbGU7Il0sIm1hcHBpbmdzIjoiQUFBQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsT0FBTyxNQUFNLGNBQWM7QUFDbEMsT0FBT0MsR0FBRyxNQUFNLFVBQVU7QUFFMUIsTUFBTUMsU0FBUyxTQUFTRixPQUFPLENBQUM7RUFDOUI7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VHLFdBQVdBLENBQUVDLENBQUMsRUFBRUMsQ0FBQyxFQUFFQyxLQUFLLEVBQUVDLE1BQU0sRUFBRztJQUNqQ0MsTUFBTSxJQUFJQSxNQUFNLENBQUVELE1BQU0sS0FBS0UsU0FBUyxFQUFFLGlDQUFpQyxDQUFFO0lBQzNFLEtBQUssQ0FBRUwsQ0FBQyxFQUFFQyxDQUFDLEVBQUVELENBQUMsR0FBR0UsS0FBSyxFQUFFRCxDQUFDLEdBQUdFLE1BQU0sQ0FBRTtFQUN0QztBQUNGO0FBRUFOLEdBQUcsQ0FBQ1MsUUFBUSxDQUFFLFdBQVcsRUFBRVIsU0FBUyxDQUFFO0FBRXRDLGVBQWVBLFNBQVMifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Sphere3.js
// Copyright 2014-2020, University of Colorado Boulder

/**
 * A sphere in 3 dimensions (NOT a 3-sphere).
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */


class Sphere3 {
  /**
   *
   * @param {Vector3} center  - The center of the sphere
   * @param {number} radius - The radius of the sphere
   */
  constructor(center, radius) {
    // @public {Vector3} - The location of the center of the sphere
    this.center = center;

    // @public {number} -  the radius of the sphere
    this.radius = radius;
    assert && assert(radius >= 0, 'the radius of a sphere should be positive');
  }

  /**
   * Determines if a ray (a half-line) intersects this sphere.
   * A successful intersection returns the result the closest intersection in the form { distance, hitPoint, normal, fromOutside },
   * distance: {number} distance to the intersection point
   * hitPoint: {Vector3} the intersection point
   * normal: {Vector3} the normal vector on the sphere at the point of intersection. (the normal vector points outwards the sphere by convention)
   * fromOutside: {boolean} is the ray half-line intersecting the sphere from the outside of a sphere or from the inside.
   *
   * Returns null if the ray misses the sphere
   *
   * @public
   * @param {Ray3} ray - The ray to intersect with the sphere
   * @param {number} epsilon - A small varying-point value to be used to handle intersections tangent to the sphere
   * @returns {{ distance: number, hitPoint: Vector3, normal, fromOutside: boolean }| null}
   */
  intersect(ray, epsilon) {
    const raydir = ray.direction;
    const pos = ray.position;
    const centerToRay = pos.minus(this.center);

    // basically, we can use the quadratic equation to solve for both possible hit points (both +- roots are the hit points)
    const tmp = raydir.dot(centerToRay);
    const centerToRayDistSq = centerToRay.magnitudeSquared;
    const det = 4 * tmp * tmp - 4 * (centerToRayDistSq - this.radius * this.radius);
    if (det < epsilon) {
      // ray misses sphere entirely
      return null;
    }
    const base = raydir.dot(this.center) - raydir.dot(pos);
    const sqt = Math.sqrt(det) / 2;

    // the "first" entry point distance into the sphere. if we are inside the sphere, it is behind us
    const ta = base - sqt;

    // the "second" entry point distance
    const tb = base + sqt;
    if (tb < epsilon) {
      // sphere is behind ray, so don't return an intersection
      return null;
    }
    const hitPositionB = ray.pointAtDistance(tb);
    const normalB = hitPositionB.minus(this.center).normalized();
    if (ta < epsilon) {
      // we are inside the sphere
      // in => out
      return {
        distance: tb,
        hitPoint: hitPositionB,
        normal: normalB.negated(),
        fromOutside: false
      };
    } else {
      // two possible hits
      const hitPositionA = ray.pointAtDistance(ta);
      const normalA = hitPositionA.minus(this.center).normalized();

      // close hit, we have out => in
      return {
        distance: ta,
        hitPoint: hitPositionA,
        normal: normalA,
        fromOutside: true
      };
    }
  }

  /**
   *
   * Returns the intersections of a ray with a sphere. There will be 0 or 2 intersections, with
   * the "proper" intersection first, if applicable (closest in front of the ray).
   * Note that this method makes the implicit assumptions that the ray's origin does not lie inside the sphere.
   *
   * @public
   * @param {Ray3} ray - The ray to intersect with the sphere
   * @param {number} epsilon - A small varying-point value to be used to handle intersections tangent to the sphere
   * @returns {Array.<{distance:number, hitPoint:Vector3, normal:Vector3, fromOutside:boolean }>| null} -  An array of intersection
   *                                                                         results like { distance, hitPoint, normal, fromOutside }.
   */
  intersections(ray, epsilon) {
    const raydir = ray.direction;
    const pos = ray.position;
    const centerToRay = pos.minus(this.center);

    // basically, we can use the quadratic equation to solve for both possible hit points (both +- roots are the hit points)
    const tmp = raydir.dot(centerToRay);
    const centerToRayDistSq = centerToRay.magnitudeSquared;
    const det = 4 * tmp * tmp - 4 * (centerToRayDistSq - this.radius * this.radius);
    if (det < epsilon) {
      // ray misses sphere entirely
      return [];
    }
    const base = raydir.dot(this.center) - raydir.dot(pos);
    const sqt = Math.sqrt(det) / 2;

    // the "first" entry point distance into the sphere. if we are inside the sphere, it is behind us
    const ta = base - sqt;

    // the "second" entry point distance
    const tb = base + sqt;
    if (tb < epsilon) {
      // sphere is behind ray, so don't return an intersection
      return [];
    }
    const hitPositionB = ray.pointAtDistance(tb);
    const normalB = hitPositionB.minus(this.center).normalized();
    const hitPositionA = ray.pointAtDistance(ta);
    const normalA = hitPositionA.minus(this.center).normalized();
    const resultB = {
      distance: tb,
      hitPoint: hitPositionB,
      normal: normalB.negated(),
      fromOutside: false
    };
    const resultA = {
      distance: ta,
      hitPoint: hitPositionA,
      normal: normalA,
      fromOutside: true
    };
    if (ta < epsilon) {
      // we are inside the sphere
      // in => out

      return [resultB, resultA];
    } else {
      // two possible hits

      // close hit, we have out => in
      return [resultA, resultB];
    }
  }
}
js_dot.register('Sphere3', Sphere3);
/* harmony default export */ const js_Sphere3 = ((/* unused pure expression or super */ null && (Sphere3)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiLCJTcGhlcmUzIiwiY29uc3RydWN0b3IiLCJjZW50ZXIiLCJyYWRpdXMiLCJhc3NlcnQiLCJpbnRlcnNlY3QiLCJyYXkiLCJlcHNpbG9uIiwicmF5ZGlyIiwiZGlyZWN0aW9uIiwicG9zIiwicG9zaXRpb24iLCJjZW50ZXJUb1JheSIsIm1pbnVzIiwidG1wIiwiY2VudGVyVG9SYXlEaXN0U3EiLCJtYWduaXR1ZGVTcXVhcmVkIiwiZGV0IiwiYmFzZSIsInNxdCIsIk1hdGgiLCJzcXJ0IiwidGEiLCJ0YiIsImhpdFBvc2l0aW9uQiIsInBvaW50QXREaXN0YW5jZSIsIm5vcm1hbEIiLCJub3JtYWxpemVkIiwiZGlzdGFuY2UiLCJoaXRQb2ludCIsIm5vcm1hbCIsIm5lZ2F0ZWQiLCJmcm9tT3V0c2lkZSIsImhpdFBvc2l0aW9uQSIsIm5vcm1hbEEiLCJpbnRlcnNlY3Rpb25zIiwicmVzdWx0QiIsInJlc3VsdEEiLCJyZWdpc3RlciJdLCJzb3VyY2VzIjpbIlNwaGVyZTMuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTQtMjAyMCwgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbi8qKlxuICogQSBzcGhlcmUgaW4gMyBkaW1lbnNpb25zIChOT1QgYSAzLXNwaGVyZSkuXG4gKlxuICogQGF1dGhvciBKb25hdGhhbiBPbHNvbiA8am9uYXRoYW4ub2xzb25AY29sb3JhZG8uZWR1PlxuICovXG5cbmltcG9ydCBkb3QgZnJvbSAnLi9kb3QuanMnO1xuXG5jbGFzcyBTcGhlcmUzIHtcbiAgLyoqXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yM30gY2VudGVyICAtIFRoZSBjZW50ZXIgb2YgdGhlIHNwaGVyZVxuICAgKiBAcGFyYW0ge251bWJlcn0gcmFkaXVzIC0gVGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlXG4gICAqL1xuICBjb25zdHJ1Y3RvciggY2VudGVyLCByYWRpdXMgKSB7XG5cbiAgICAvLyBAcHVibGljIHtWZWN0b3IzfSAtIFRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoZSBzcGhlcmVcbiAgICB0aGlzLmNlbnRlciA9IGNlbnRlcjtcblxuICAgIC8vIEBwdWJsaWMge251bWJlcn0gLSAgdGhlIHJhZGl1cyBvZiB0aGUgc3BoZXJlXG4gICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7XG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCByYWRpdXMgPj0gMCwgJ3RoZSByYWRpdXMgb2YgYSBzcGhlcmUgc2hvdWxkIGJlIHBvc2l0aXZlJyApO1xuICB9XG5cblxuICAvKipcbiAgICogRGV0ZXJtaW5lcyBpZiBhIHJheSAoYSBoYWxmLWxpbmUpIGludGVyc2VjdHMgdGhpcyBzcGhlcmUuXG4gICAqIEEgc3VjY2Vzc2Z1bCBpbnRlcnNlY3Rpb24gcmV0dXJucyB0aGUgcmVzdWx0IHRoZSBjbG9zZXN0IGludGVyc2VjdGlvbiBpbiB0aGUgZm9ybSB7IGRpc3RhbmNlLCBoaXRQb2ludCwgbm9ybWFsLCBmcm9tT3V0c2lkZSB9LFxuICAgKiBkaXN0YW5jZToge251bWJlcn0gZGlzdGFuY2UgdG8gdGhlIGludGVyc2VjdGlvbiBwb2ludFxuICAgKiBoaXRQb2ludDoge1ZlY3RvcjN9IHRoZSBpbnRlcnNlY3Rpb24gcG9pbnRcbiAgICogbm9ybWFsOiB7VmVjdG9yM30gdGhlIG5vcm1hbCB2ZWN0b3Igb24gdGhlIHNwaGVyZSBhdCB0aGUgcG9pbnQgb2YgaW50ZXJzZWN0aW9uLiAodGhlIG5vcm1hbCB2ZWN0b3IgcG9pbnRzIG91dHdhcmRzIHRoZSBzcGhlcmUgYnkgY29udmVudGlvbilcbiAgICogZnJvbU91dHNpZGU6IHtib29sZWFufSBpcyB0aGUgcmF5IGhhbGYtbGluZSBpbnRlcnNlY3RpbmcgdGhlIHNwaGVyZSBmcm9tIHRoZSBvdXRzaWRlIG9mIGEgc3BoZXJlIG9yIGZyb20gdGhlIGluc2lkZS5cbiAgICpcbiAgICogUmV0dXJucyBudWxsIGlmIHRoZSByYXkgbWlzc2VzIHRoZSBzcGhlcmVcbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1JheTN9IHJheSAtIFRoZSByYXkgdG8gaW50ZXJzZWN0IHdpdGggdGhlIHNwaGVyZVxuICAgKiBAcGFyYW0ge251bWJlcn0gZXBzaWxvbiAtIEEgc21hbGwgdmFyeWluZy1wb2ludCB2YWx1ZSB0byBiZSB1c2VkIHRvIGhhbmRsZSBpbnRlcnNlY3Rpb25zIHRhbmdlbnQgdG8gdGhlIHNwaGVyZVxuICAgKiBAcmV0dXJucyB7eyBkaXN0YW5jZTogbnVtYmVyLCBoaXRQb2ludDogVmVjdG9yMywgbm9ybWFsLCBmcm9tT3V0c2lkZTogYm9vbGVhbiB9fCBudWxsfVxuICAgKi9cbiAgaW50ZXJzZWN0KCByYXksIGVwc2lsb24gKSB7XG4gICAgY29uc3QgcmF5ZGlyID0gcmF5LmRpcmVjdGlvbjtcbiAgICBjb25zdCBwb3MgPSByYXkucG9zaXRpb247XG4gICAgY29uc3QgY2VudGVyVG9SYXkgPSBwb3MubWludXMoIHRoaXMuY2VudGVyICk7XG5cbiAgICAvLyBiYXNpY2FsbHksIHdlIGNhbiB1c2UgdGhlIHF1YWRyYXRpYyBlcXVhdGlvbiB0byBzb2x2ZSBmb3IgYm90aCBwb3NzaWJsZSBoaXQgcG9pbnRzIChib3RoICstIHJvb3RzIGFyZSB0aGUgaGl0IHBvaW50cylcbiAgICBjb25zdCB0bXAgPSByYXlkaXIuZG90KCBjZW50ZXJUb1JheSApO1xuICAgIGNvbnN0IGNlbnRlclRvUmF5RGlzdFNxID0gY2VudGVyVG9SYXkubWFnbml0dWRlU3F1YXJlZDtcbiAgICBjb25zdCBkZXQgPSA0ICogdG1wICogdG1wIC0gNCAqICggY2VudGVyVG9SYXlEaXN0U3EgLSB0aGlzLnJhZGl1cyAqIHRoaXMucmFkaXVzICk7XG4gICAgaWYgKCBkZXQgPCBlcHNpbG9uICkge1xuICAgICAgLy8gcmF5IG1pc3NlcyBzcGhlcmUgZW50aXJlbHlcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGJhc2UgPSByYXlkaXIuZG90KCB0aGlzLmNlbnRlciApIC0gcmF5ZGlyLmRvdCggcG9zICk7XG4gICAgY29uc3Qgc3F0ID0gTWF0aC5zcXJ0KCBkZXQgKSAvIDI7XG5cbiAgICAvLyB0aGUgXCJmaXJzdFwiIGVudHJ5IHBvaW50IGRpc3RhbmNlIGludG8gdGhlIHNwaGVyZS4gaWYgd2UgYXJlIGluc2lkZSB0aGUgc3BoZXJlLCBpdCBpcyBiZWhpbmQgdXNcbiAgICBjb25zdCB0YSA9IGJhc2UgLSBzcXQ7XG5cbiAgICAvLyB0aGUgXCJzZWNvbmRcIiBlbnRyeSBwb2ludCBkaXN0YW5jZVxuICAgIGNvbnN0IHRiID0gYmFzZSArIHNxdDtcblxuICAgIGlmICggdGIgPCBlcHNpbG9uICkge1xuICAgICAgLy8gc3BoZXJlIGlzIGJlaGluZCByYXksIHNvIGRvbid0IHJldHVybiBhbiBpbnRlcnNlY3Rpb25cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGhpdFBvc2l0aW9uQiA9IHJheS5wb2ludEF0RGlzdGFuY2UoIHRiICk7XG4gICAgY29uc3Qgbm9ybWFsQiA9IGhpdFBvc2l0aW9uQi5taW51cyggdGhpcy5jZW50ZXIgKS5ub3JtYWxpemVkKCk7XG5cbiAgICBpZiAoIHRhIDwgZXBzaWxvbiApIHtcbiAgICAgIC8vIHdlIGFyZSBpbnNpZGUgdGhlIHNwaGVyZVxuICAgICAgLy8gaW4gPT4gb3V0XG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaXN0YW5jZTogdGIsXG4gICAgICAgIGhpdFBvaW50OiBoaXRQb3NpdGlvbkIsXG4gICAgICAgIG5vcm1hbDogbm9ybWFsQi5uZWdhdGVkKCksXG4gICAgICAgIGZyb21PdXRzaWRlOiBmYWxzZVxuICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAvLyB0d28gcG9zc2libGUgaGl0c1xuICAgICAgY29uc3QgaGl0UG9zaXRpb25BID0gcmF5LnBvaW50QXREaXN0YW5jZSggdGEgKTtcbiAgICAgIGNvbnN0IG5vcm1hbEEgPSBoaXRQb3NpdGlvbkEubWludXMoIHRoaXMuY2VudGVyICkubm9ybWFsaXplZCgpO1xuXG4gICAgICAvLyBjbG9zZSBoaXQsIHdlIGhhdmUgb3V0ID0+IGluXG4gICAgICByZXR1cm4ge1xuICAgICAgICBkaXN0YW5jZTogdGEsXG4gICAgICAgIGhpdFBvaW50OiBoaXRQb3NpdGlvbkEsXG4gICAgICAgIG5vcm1hbDogbm9ybWFsQSxcbiAgICAgICAgZnJvbU91dHNpZGU6IHRydWVcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqXG4gICAqIFJldHVybnMgdGhlIGludGVyc2VjdGlvbnMgb2YgYSByYXkgd2l0aCBhIHNwaGVyZS4gVGhlcmUgd2lsbCBiZSAwIG9yIDIgaW50ZXJzZWN0aW9ucywgd2l0aFxuICAgKiB0aGUgXCJwcm9wZXJcIiBpbnRlcnNlY3Rpb24gZmlyc3QsIGlmIGFwcGxpY2FibGUgKGNsb3Nlc3QgaW4gZnJvbnQgb2YgdGhlIHJheSkuXG4gICAqIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBtYWtlcyB0aGUgaW1wbGljaXQgYXNzdW1wdGlvbnMgdGhhdCB0aGUgcmF5J3Mgb3JpZ2luIGRvZXMgbm90IGxpZSBpbnNpZGUgdGhlIHNwaGVyZS5cbiAgICpcbiAgICogQHB1YmxpY1xuICAgKiBAcGFyYW0ge1JheTN9IHJheSAtIFRoZSByYXkgdG8gaW50ZXJzZWN0IHdpdGggdGhlIHNwaGVyZVxuICAgKiBAcGFyYW0ge251bWJlcn0gZXBzaWxvbiAtIEEgc21hbGwgdmFyeWluZy1wb2ludCB2YWx1ZSB0byBiZSB1c2VkIHRvIGhhbmRsZSBpbnRlcnNlY3Rpb25zIHRhbmdlbnQgdG8gdGhlIHNwaGVyZVxuICAgKiBAcmV0dXJucyB7QXJyYXkuPHtkaXN0YW5jZTpudW1iZXIsIGhpdFBvaW50OlZlY3RvcjMsIG5vcm1hbDpWZWN0b3IzLCBmcm9tT3V0c2lkZTpib29sZWFuIH0+fCBudWxsfSAtICBBbiBhcnJheSBvZiBpbnRlcnNlY3Rpb25cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cyBsaWtlIHsgZGlzdGFuY2UsIGhpdFBvaW50LCBub3JtYWwsIGZyb21PdXRzaWRlIH0uXG4gICAqL1xuICBpbnRlcnNlY3Rpb25zKCByYXksIGVwc2lsb24gKSB7XG4gICAgY29uc3QgcmF5ZGlyID0gcmF5LmRpcmVjdGlvbjtcbiAgICBjb25zdCBwb3MgPSByYXkucG9zaXRpb247XG4gICAgY29uc3QgY2VudGVyVG9SYXkgPSBwb3MubWludXMoIHRoaXMuY2VudGVyICk7XG5cbiAgICAvLyBiYXNpY2FsbHksIHdlIGNhbiB1c2UgdGhlIHF1YWRyYXRpYyBlcXVhdGlvbiB0byBzb2x2ZSBmb3IgYm90aCBwb3NzaWJsZSBoaXQgcG9pbnRzIChib3RoICstIHJvb3RzIGFyZSB0aGUgaGl0IHBvaW50cylcbiAgICBjb25zdCB0bXAgPSByYXlkaXIuZG90KCBjZW50ZXJUb1JheSApO1xuICAgIGNvbnN0IGNlbnRlclRvUmF5RGlzdFNxID0gY2VudGVyVG9SYXkubWFnbml0dWRlU3F1YXJlZDtcbiAgICBjb25zdCBkZXQgPSA0ICogdG1wICogdG1wIC0gNCAqICggY2VudGVyVG9SYXlEaXN0U3EgLSB0aGlzLnJhZGl1cyAqIHRoaXMucmFkaXVzICk7XG4gICAgaWYgKCBkZXQgPCBlcHNpbG9uICkge1xuICAgICAgLy8gcmF5IG1pc3NlcyBzcGhlcmUgZW50aXJlbHlcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBiYXNlID0gcmF5ZGlyLmRvdCggdGhpcy5jZW50ZXIgKSAtIHJheWRpci5kb3QoIHBvcyApO1xuICAgIGNvbnN0IHNxdCA9IE1hdGguc3FydCggZGV0ICkgLyAyO1xuXG4gICAgLy8gdGhlIFwiZmlyc3RcIiBlbnRyeSBwb2ludCBkaXN0YW5jZSBpbnRvIHRoZSBzcGhlcmUuIGlmIHdlIGFyZSBpbnNpZGUgdGhlIHNwaGVyZSwgaXQgaXMgYmVoaW5kIHVzXG4gICAgY29uc3QgdGEgPSBiYXNlIC0gc3F0O1xuXG4gICAgLy8gdGhlIFwic2Vjb25kXCIgZW50cnkgcG9pbnQgZGlzdGFuY2VcbiAgICBjb25zdCB0YiA9IGJhc2UgKyBzcXQ7XG5cbiAgICBpZiAoIHRiIDwgZXBzaWxvbiApIHtcbiAgICAgIC8vIHNwaGVyZSBpcyBiZWhpbmQgcmF5LCBzbyBkb24ndCByZXR1cm4gYW4gaW50ZXJzZWN0aW9uXG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgaGl0UG9zaXRpb25CID0gcmF5LnBvaW50QXREaXN0YW5jZSggdGIgKTtcbiAgICBjb25zdCBub3JtYWxCID0gaGl0UG9zaXRpb25CLm1pbnVzKCB0aGlzLmNlbnRlciApLm5vcm1hbGl6ZWQoKTtcblxuICAgIGNvbnN0IGhpdFBvc2l0aW9uQSA9IHJheS5wb2ludEF0RGlzdGFuY2UoIHRhICk7XG4gICAgY29uc3Qgbm9ybWFsQSA9IGhpdFBvc2l0aW9uQS5taW51cyggdGhpcy5jZW50ZXIgKS5ub3JtYWxpemVkKCk7XG5cbiAgICBjb25zdCByZXN1bHRCID0ge1xuICAgICAgZGlzdGFuY2U6IHRiLFxuICAgICAgaGl0UG9pbnQ6IGhpdFBvc2l0aW9uQixcbiAgICAgIG5vcm1hbDogbm9ybWFsQi5uZWdhdGVkKCksXG4gICAgICBmcm9tT3V0c2lkZTogZmFsc2VcbiAgICB9O1xuICAgIGNvbnN0IHJlc3VsdEEgPSB7XG4gICAgICBkaXN0YW5jZTogdGEsXG4gICAgICBoaXRQb2ludDogaGl0UG9zaXRpb25BLFxuICAgICAgbm9ybWFsOiBub3JtYWxBLFxuICAgICAgZnJvbU91dHNpZGU6IHRydWVcbiAgICB9O1xuICAgIGlmICggdGEgPCBlcHNpbG9uICkge1xuICAgICAgLy8gd2UgYXJlIGluc2lkZSB0aGUgc3BoZXJlXG4gICAgICAvLyBpbiA9PiBvdXRcblxuICAgICAgcmV0dXJuIFsgcmVzdWx0QiwgcmVzdWx0QSBdO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIC8vIHR3byBwb3NzaWJsZSBoaXRzXG5cbiAgICAgIC8vIGNsb3NlIGhpdCwgd2UgaGF2ZSBvdXQgPT4gaW5cbiAgICAgIHJldHVybiBbIHJlc3VsdEEsIHJlc3VsdEIgXTtcbiAgICB9XG4gIH1cbn1cblxuZG90LnJlZ2lzdGVyKCAnU3BoZXJlMycsIFNwaGVyZTMgKTtcblxuZXhwb3J0IGRlZmF1bHQgU3BoZXJlMzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsR0FBRyxNQUFNLFVBQVU7QUFFMUIsTUFBTUMsT0FBTyxDQUFDO0VBQ1o7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNFQyxXQUFXQSxDQUFFQyxNQUFNLEVBQUVDLE1BQU0sRUFBRztJQUU1QjtJQUNBLElBQUksQ0FBQ0QsTUFBTSxHQUFHQSxNQUFNOztJQUVwQjtJQUNBLElBQUksQ0FBQ0MsTUFBTSxHQUFHQSxNQUFNO0lBRXBCQyxNQUFNLElBQUlBLE1BQU0sQ0FBRUQsTUFBTSxJQUFJLENBQUMsRUFBRSwyQ0FBMkMsQ0FBRTtFQUM5RTs7RUFHQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDRUUsU0FBU0EsQ0FBRUMsR0FBRyxFQUFFQyxPQUFPLEVBQUc7SUFDeEIsTUFBTUMsTUFBTSxHQUFHRixHQUFHLENBQUNHLFNBQVM7SUFDNUIsTUFBTUMsR0FBRyxHQUFHSixHQUFHLENBQUNLLFFBQVE7SUFDeEIsTUFBTUMsV0FBVyxHQUFHRixHQUFHLENBQUNHLEtBQUssQ0FBRSxJQUFJLENBQUNYLE1BQU0sQ0FBRTs7SUFFNUM7SUFDQSxNQUFNWSxHQUFHLEdBQUdOLE1BQU0sQ0FBQ1QsR0FBRyxDQUFFYSxXQUFXLENBQUU7SUFDckMsTUFBTUcsaUJBQWlCLEdBQUdILFdBQVcsQ0FBQ0ksZ0JBQWdCO0lBQ3RELE1BQU1DLEdBQUcsR0FBRyxDQUFDLEdBQUdILEdBQUcsR0FBR0EsR0FBRyxHQUFHLENBQUMsSUFBS0MsaUJBQWlCLEdBQUcsSUFBSSxDQUFDWixNQUFNLEdBQUcsSUFBSSxD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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Transform3.js
// Copyright 2013-2023, University of Colorado Boulder

/**
 * Forward and inverse transforms with 3x3 matrices. Methods starting with 'transform' will apply the transform from our
 * primary matrix, while methods starting with 'inverse' will apply the transform from the inverse of our matrix.
 *
 * Generally, this means transform.inverseThing( transform.transformThing( thing ) ).equals( thing ).
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */






const scratchMatrix = new Matrix3();
class Transform3 {
  /**
   * Creates a transform based around an initial matrix.
   * @public
   *
   * @param {Matrix3} [matrix]
   */
  constructor(matrix) {
    // @private {Matrix3} - The primary matrix used for the transform
    this.matrix = Matrix3.IDENTITY.copy();

    // @private {Matrix3} - The inverse of the primary matrix, computed lazily
    this.inverse = Matrix3.IDENTITY.copy();

    // @private {Matrix3} - The transpose of the primary matrix, computed lazily
    this.matrixTransposed = Matrix3.IDENTITY.copy();

    // @private {Matrix3} - The inverse of the transposed primary matrix, computed lazily
    this.inverseTransposed = Matrix3.IDENTITY.copy();

    // @private {boolean} - Whether this.inverse has been computed based on the latest primary matrix
    this.inverseValid = true;

    // @private {boolean} - Whether this.matrixTransposed has been computed based on the latest primary matrix
    this.transposeValid = true;

    // @private {boolean} - Whether this.inverseTransposed has been computed based on the latest primary matrix
    this.inverseTransposeValid = true;

    // @public {TinyEmitter}
    this.changeEmitter = new TinyEmitter();
    if (matrix) {
      this.setMatrix(matrix);
    }
  }

  /*---------------------------------------------------------------------------*
   * mutators
   *---------------------------------------------------------------------------*/

  /**
   * Sets the value of the primary matrix directly from a Matrix3. Does not change the Matrix3 instance.
   * @public
   *
   * @param {Matrix3} matrix
   */
  setMatrix(matrix) {
    // copy the matrix over to our matrix
    this.matrix.set(matrix);

    // set flags and notify
    this.invalidate();
  }

  /**
   * Validates the matrix or matrix arguments, overrideable by subclasses to refine the validation.
   * @param {Matrix} matrix
   * @protected
   */
  validateMatrix(matrix) {
    assert && assert(matrix instanceof Matrix3, 'matrix was incorrect type');
    assert && assert(matrix.isFinite(), 'matrix must be finite');
  }

  /**
   * This should be called after our internal matrix is changed. It marks the other dependent matrices as invalid,
   * and sends out notifications of the change.
   * @private
   */
  invalidate() {
    // sanity check
    assert && this.validateMatrix(this.matrix);

    // dependent matrices now invalid
    this.inverseValid = false;
    this.transposeValid = false;
    this.inverseTransposeValid = false;
    this.changeEmitter.emit();
  }

  /**
   * Modifies the primary matrix such that: this.matrix = matrix * this.matrix.
   * @public
   *
   * @param {Matrix3} matrix
   */
  prepend(matrix) {
    assert && this.validateMatrix(matrix);

    // In the absence of a prepend-multiply function in Matrix3, copy over to a scratch matrix instead
    // TODO: implement a prepend-multiply directly in Matrix3 for a performance increase
    scratchMatrix.set(this.matrix);
    this.matrix.set(matrix);
    this.matrix.multiplyMatrix(scratchMatrix);

    // set flags and notify
    this.invalidate();
  }

  /**
   * Optimized prepended translation such that: this.matrix = translation( x, y ) * this.matrix.
   * @public
   *
   * @param {number} x -  x-coordinate
   * @param {number} y -  y-coordinate
   */
  prependTranslation(x, y) {
    // See scenery#119 for more details on the need.

    assert && assert(typeof x === 'number' && typeof y === 'number' && isFinite(x) && isFinite(y), 'Attempted to prepend non-finite or non-number (x,y) to the transform');
    this.matrix.prependTranslation(x, y);

    // set flags and notify
    this.invalidate();
  }

  /**
   * Modifies the primary matrix such that: this.matrix = this.matrix * matrix
   * @public
   *
   * @param {Matrix3} matrix
   */
  append(matrix) {
    assert && this.validateMatrix(matrix);
    this.matrix.multiplyMatrix(matrix);

    // set flags and notify
    this.invalidate();
  }

  /**
   * Like prepend(), but prepends the other transform's matrix.
   * @public
   *
   * @param {Transform3} transform
   */
  prependTransform(transform) {
    this.prepend(transform.matrix);
  }

  /**
   * Like append(), but appends the other transform's matrix.
   * @public
   *
   * @param {Transform3} transform
   */
  appendTransform(transform) {
    this.append(transform.matrix);
  }

  /**
   * Sets the transform of a Canvas context to be equivalent to this transform.
   * @public
   *
   * @param {CanvasRenderingContext2D} context
   */
  applyToCanvasContext(context) {
    context.setTransform(this.matrix.m00(), this.matrix.m10(), this.matrix.m01(), this.matrix.m11(), this.matrix.m02(), this.matrix.m12());
  }

  /*---------------------------------------------------------------------------*
   * getters
   *---------------------------------------------------------------------------*/

  /**
   * Creates a copy of this transform.
   * @public
   *
   * @returns {Transform3}
   */
  copy() {
    const transform = new Transform3(this.matrix);
    transform.inverse = this.inverse;
    transform.matrixTransposed = this.matrixTransposed;
    transform.inverseTransposed = this.inverseTransposed;
    transform.inverseValid = this.inverseValid;
    transform.transposeValid = this.transposeValid;
    transform.inverseTransposeValid = this.inverseTransposeValid;
  }

  /**
   * Returns the primary matrix of this transform.
   * @public
   *
   * @returns {Matrix3}
   */
  getMatrix() {
    return this.matrix;
  }

  /**
   * Returns the inverse of the primary matrix of this transform.
   * @public
   *
   * @returns {Matrix3}
   */
  getInverse() {
    if (!this.inverseValid) {
      this.inverseValid = true;
      this.inverse.set(this.matrix);
      this.inverse.invert();
    }
    return this.inverse;
  }

  /**
   * Returns the transpose of the primary matrix of this transform.
   * @public
   *
   * @returns {Matrix3}
   */
  getMatrixTransposed() {
    if (!this.transposeValid) {
      this.transposeValid = true;
      this.matrixTransposed.set(this.matrix);
      this.matrixTransposed.transpose();
    }
    return this.matrixTransposed;
  }

  /**
   * Returns the inverse of the transpose of matrix of this transform.
   * @public
   *
   * @returns {Matrix3}
   */
  getInverseTransposed() {
    if (!this.inverseTransposeValid) {
      this.inverseTransposeValid = true;
      this.inverseTransposed.set(this.getInverse()); // triggers inverse to be valid
      this.inverseTransposed.transpose();
    }
    return this.inverseTransposed;
  }

  /**
   * Returns whether our primary matrix is known to be an identity matrix. If false is returned, it doesn't necessarily
   * mean our matrix isn't an identity matrix, just that it is unlikely in normal usage.
   * @public
   *
   * @returns {boolean}
   */
  isIdentity() {
    return this.matrix.isFastIdentity();
  }

  /**
   * Returns whether any components of our primary matrix are either infinite or NaN.
   * @public
   *
   * @returns {boolean}
   */
  isFinite() {
    return this.matrix.isFinite();
  }

  /*---------------------------------------------------------------------------*
   * forward transforms (for Vector2 or scalar)
   *---------------------------------------------------------------------------*/

  /**
   * Transforms a 2-dimensional vector like it is a point with a position (translation is applied).
   * @public
   *
   * For an affine matrix $M$, the result is the homogeneous multiplication $M\begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$.
   *
   * @param {Vector2} v
   * @returns {Vector2}
   */
  transformPosition2(v) {
    return this.matrix.timesVector2(v);
  }

  /**
   * Transforms a 2-dimensional vector like position is irrelevant (translation is not applied).
   * @public
   *
   * For an affine matrix $\begin{bmatrix} a & b & c \\ d & e & f \\ 0 & 0 & 1 \end{bmatrix}$,
   * the result is $\begin{bmatrix} a & b & 0 \\ d & e & 0 \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$.
   *
   * @param {Vector2} v
   * @returns {Vector2}
   */
  transformDelta2(v) {
    const m = this.getMatrix();
    // m . v - m . Vector2.ZERO
    return new Vector2(m.m00() * v.x + m.m01() * v.y, m.m10() * v.x + m.m11() * v.y);
  }

  /**
   * Transforms a 2-dimensional vector like it is a normal to a curve (so that the curve is transformed, and the new
   * normal to the curve at the transformed point is returned).
   * @public
   *
   * For an affine matrix $\begin{bmatrix} a & b & c \\ d & e & f \\ 0 & 0 & 1 \end{bmatrix}$,
   * the result is $\begin{bmatrix} a & e & 0 \\ d & b & 0 \\ 0 & 0 & 1 \end{bmatrix}^{-1} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$.
   * This is essentially the transposed inverse with translation removed.
   *
   * @param {Vector2} v
   * @returns {Vector2}
   */
  transformNormal2(v) {
    return this.getInverse().timesTransposeVector2(v).normalize();
  }

  /**
   * Returns the resulting x-coordinate of the transformation of all vectors with the initial input x-coordinate. If
   * this is not well-defined (the x value depends on y), an assertion is thrown (and y is assumed to be 0).
   * @public
   *
   * @param {number} x
   * @returns {number}
   */
  transformX(x) {
    const m = this.getMatrix();
    assert && assert(!m.m01(), 'Transforming an X value with a rotation/shear is ill-defined');
    return m.m00() * x + m.m02();
  }

  /**
   * Returns the resulting y-coordinate of the transformation of all vectors with the initial input y-coordinate. If
   * this is not well-defined (the y value depends on x), an assertion is thrown (and x is assumed to be 0).
   * @public
   *
   * @param {number} y
   * @returns {number}
   */
  transformY(y) {
    const m = this.getMatrix();
    assert && assert(!m.m10(), 'Transforming a Y value with a rotation/shear is ill-defined');
    return m.m11() * y + m.m12();
  }

  /**
   * Returns the x-coordinate difference for two transformed vectors, which add the x-coordinate difference of the input
   * x (and same y values) beforehand.
   * @public
   *
   * @param {number} x
   * @returns {number}
   */
  transformDeltaX(x) {
    const m = this.getMatrix();
    // same as this.transformDelta2( new Vector2( x, 0 ) ).x;
    return m.m00() * x;
  }

  /**
   * Returns the y-coordinate difference for two transformed vectors, which add the y-coordinate difference of the input
   * y (and same x values) beforehand.
   * @public
   *
   * @param {number} y
   * @returns {number}
   */
  transformDeltaY(y) {
    const m = this.getMatrix();
    // same as this.transformDelta2( new Vector2( 0, y ) ).y;
    return m.m11() * y;
  }

  /**
   * Returns bounds (axis-aligned) that contains the transformed bounds rectangle.
   * @public
   *
   * NOTE: transform.inverseBounds2( transform.transformBounds2( bounds ) ) may be larger than the original box,
   * if it includes a rotation that isn't a multiple of $\pi/2$. This is because the returned bounds may expand in
   * area to cover ALL of the corners of the transformed bounding box.
   *
   * @param {Bounds2} bounds
   * @returns {Bounds2}
   */
  transformBounds2(bounds) {
    return bounds.transformed(this.matrix);
  }

  /**
   * Returns a transformed phet.kite.Shape.
   * @public
   *
   * @param {Shape} shape
   * @returns {Shape}
   */
  transformShape(shape) {
    return shape.transformed(this.matrix);
  }

  /**
   * Returns a transformed ray.
   * @public
   *
   * @param {Ray2} ray
   * @returns {Ray2}
   */
  transformRay2(ray) {
    return new Ray2(this.transformPosition2(ray.position), this.transformDelta2(ray.direction).normalized());
  }

  /*---------------------------------------------------------------------------*
   * inverse transforms (for Vector2 or scalar)
   *---------------------------------------------------------------------------*/

  /**
   * Transforms a 2-dimensional vector by the inverse of our transform like it is a point with a position (translation is applied).
   * @public
   *
   * For an affine matrix $M$, the result is the homogeneous multiplication $M^{-1}\begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$.
   *
   * This is the inverse of transformPosition2().
   *
   * @param {Vector2} v
   * @returns {Vector2}
   */
  inversePosition2(v) {
    return this.getInverse().timesVector2(v);
  }

  /**
   * Transforms a 2-dimensional vector by the inverse of our transform like position is irrelevant (translation is not applied).
   * @public
   *
   * For an affine matrix $\begin{bmatrix} a & b & c \\ d & e & f \\ 0 & 0 & 1 \end{bmatrix}$,
   * the result is $\begin{bmatrix} a & b & 0 \\ d & e & 0 \\ 0 & 0 & 1 \end{bmatrix}^{-1} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$.
   *
   * This is the inverse of transformDelta2().
   *
   * @param {Vector2} v
   * @returns {Vector2}
   */
  inverseDelta2(v) {
    const m = this.getInverse();
    // m . v - m . Vector2.ZERO
    return new Vector2(m.m00() * v.x + m.m01() * v.y, m.m10() * v.x + m.m11() * v.y);
  }

  /**
   * Transforms a 2-dimensional vector by the inverse of our transform like it is a normal to a curve (so that the
   * curve is transformed, and the new normal to the curve at the transformed point is returned).
   * @public
   *
   * For an affine matrix $\begin{bmatrix} a & b & c \\ d & e & f \\ 0 & 0 & 1 \end{bmatrix}$,
   * the result is $\begin{bmatrix} a & e & 0 \\ d & b & 0 \\ 0 & 0 & 1 \end{bmatrix} \begin{bmatrix} x \\ y \\ 1 \end{bmatrix}$.
   * This is essentially the transposed transform with translation removed.
   *
   * This is the inverse of transformNormal2().
   *
   * @param {Vector2} v
   * @returns {Vector2}
   */
  inverseNormal2(v) {
    return this.matrix.timesTransposeVector2(v).normalize();
  }

  /**
   * Returns the resulting x-coordinate of the inverse transformation of all vectors with the initial input x-coordinate. If
   * this is not well-defined (the x value depends on y), an assertion is thrown (and y is assumed to be 0).
   * @public
   *
   * This is the inverse of transformX().
   *
   * @param {number} x
   * @returns {number}
   */
  inverseX(x) {
    const m = this.getInverse();
    assert && assert(!m.m01(), 'Inverting an X value with a rotation/shear is ill-defined');
    return m.m00() * x + m.m02();
  }

  /**
   * Returns the resulting y-coordinate of the inverse transformation of all vectors with the initial input y-coordinate. If
   * this is not well-defined (the y value depends on x), an assertion is thrown (and x is assumed to be 0).
   * @public
   *
   * This is the inverse of transformY().
   *
   * @param {number} y
   * @returns {number}
   */
  inverseY(y) {
    const m = this.getInverse();
    assert && assert(!m.m10(), 'Inverting a Y value with a rotation/shear is ill-defined');
    return m.m11() * y + m.m12();
  }

  /**
   * Returns the x-coordinate difference for two inverse-transformed vectors, which add the x-coordinate difference of the input
   * x (and same y values) beforehand.
   * @public
   *
   * This is the inverse of transformDeltaX().
   *
   * @param {number} x
   * @returns {number}
   */
  inverseDeltaX(x) {
    const m = this.getInverse();
    assert && assert(!m.m01(), 'Inverting an X value with a rotation/shear is ill-defined');
    // same as this.inverseDelta2( new Vector2( x, 0 ) ).x;
    return m.m00() * x;
  }

  /**
   * Returns the y-coordinate difference for two inverse-transformed vectors, which add the y-coordinate difference of the input
   * y (and same x values) beforehand.
   * @public
   *
   * This is the inverse of transformDeltaY().
   *
   * @param {number} y
   * @returns {number}
   */
  inverseDeltaY(y) {
    const m = this.getInverse();
    assert && assert(!m.m10(), 'Inverting a Y value with a rotation/shear is ill-defined');
    // same as this.inverseDelta2( new Vector2( 0, y ) ).y;
    return m.m11() * y;
  }

  /**
   * Returns bounds (axis-aligned) that contains the inverse-transformed bounds rectangle.
   * @public
   *
   * NOTE: transform.inverseBounds2( transform.transformBounds2( bounds ) ) may be larger than the original box,
   * if it includes a rotation that isn't a multiple of $\pi/2$. This is because the returned bounds may expand in
   * area to cover ALL of the corners of the transformed bounding box.
   *
   * @param {Bounds2} bounds
   * @returns {Bounds2}
   */
  inverseBounds2(bounds) {
    return bounds.transformed(this.getInverse());
  }

  /**
   * Returns an inverse-transformed phet.kite.Shape.
   * @public
   *
   * This is the inverse of transformShape()
   *
   * @param {Shape} shape
   * @returns {Shape}
   */
  inverseShape(shape) {
    return shape.transformed(this.getInverse());
  }

  /**
   * Returns an inverse-transformed ray.
   * @public
   *
   * This is the inverse of transformRay2()
   *
   * @param {Ray2} ray
   * @returns {Ray2}
   */
  inverseRay2(ray) {
    return new Ray2(this.inversePosition2(ray.position), this.inverseDelta2(ray.direction).normalized());
  }
}
js_dot.register('Transform3', Transform3);
/* harmony default export */ const js_Transform3 = ((/* unused pure expression or super */ null && (Transform3)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUaW55RW1pdHRlciIsImRvdCIsIk1hdHJpeDMiLCJSYXkyIiwiVmVjdG9yMiIsInNjcmF0Y2hNYXRyaXgiLCJUcmFuc2Zvcm0zIiwiY29uc3RydWN0b3IiLCJtYXRyaXgiLCJJREVOVElUWSIsImNvcHkiLCJpbnZlcnNlIiwibWF0cml4VHJhbnNwb3NlZCIsImludmVyc2VUcmFuc3Bvc2VkIiwiaW52ZXJzZVZhbGlkIiwidHJhbnNwb3NlVmFsaWQiLCJpbnZlcnNlVHJhbnNwb3NlVmFsaWQiLCJjaGFuZ2VFbWl0dGVyIiwic2V0TWF0cml4Iiwic2V0IiwiaW52YWxpZGF0ZSIsInZhbGlkYXRlTWF0cml4IiwiYXNzZXJ0IiwiaXNGaW5pdGUiLCJlbWl0IiwicHJlcGVuZCIsIm11bHRpcGx5TWF0cml4IiwicHJlcGVuZFRyYW5zbGF0aW9uIiwieCIsInkiLCJhcHBlbmQiLCJwcmVwZW5kVHJhbnNmb3JtIiwidHJhbnNmb3JtIiwiYXBwZW5kVHJhbnNmb3JtIiwiYXBwbHlUb0NhbnZhc0NvbnRleHQiLCJjb250ZXh0Iiwic2V0VHJhbnNmb3JtIiwibTAwIiwibTEwIiwibTAxIiwibTExIiwibTAyIiwibTEyIiwiZ2V0TWF0cml4IiwiZ2V0SW52ZXJzZSIsImludmVydCIsImdldE1hdHJpeFRyYW5zcG9zZWQiLCJ0cmFuc3Bvc2UiLCJnZXRJbnZlcnNlVHJhbnNwb3NlZCIsImlzSWRlbnRpdHkiLCJpc0Zhc3RJZGVudGl0eSIsInRyYW5zZm9ybVBvc2l0aW9uMiIsInYiLCJ0aW1lc1ZlY3RvcjIiLCJ0cmFuc2Zvcm1EZWx0YTIiLCJtIiwidHJhbnNmb3JtTm9ybWFsMiIsInRpbWVzVHJhbnNwb3NlVmVjdG9yMiIsIm5vcm1hbGl6ZSIsInRyYW5zZm9ybVgiLCJ0cmFuc2Zvcm1ZIiwidHJhbnNmb3JtRGVsdGFYIiwidHJhbnNmb3JtRGVsdGFZIiwidHJhbnNmb3JtQm91bmRzMiIsImJvdW5kcyIsInRyYW5zZm9ybWVkIiwidHJhbnNmb3JtU2hhcGUiLCJzaGFwZSIsInRyYW5zZm9ybVJheTIiLCJyYXkiLCJwb3NpdGlvbiIsImRpcmVjdGlvbiIsIm5vcm1hbGl6ZWQiLCJpbnZlcnNlUG9zaXRpb24yIiwiaW52ZXJzZURlbHRhMiIsImludmVyc2VOb3JtYWwyIiwiaW52ZXJzZVgiLCJpbnZlcnNlWSIsImludmVyc2VEZWx0YVgiLCJpbnZlcnNlRGVsdGFZIiwiaW52ZXJzZUJvdW5kczIiLCJpbnZlcnNlU2hhcGUiLCJpbnZlcnNlUmF5MiIsInJlZ2lzdGVyIl0sInNvdXJjZXMiOlsiVHJhbnNmb3JtMy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgMjAxMy0yMDIzLCBVbml2ZXJzaXR5IG9mIENvbG9yYWRvIEJvdWxkZXJcblxuLyoqXG4gKiBGb3J3YXJkIGFuZCBpbnZlcnNlIHRyYW5zZm9ybXMgd2l0aCAzeDMgbWF0cmljZXMuIE1ldGhvZHMgc3RhcnRpbmcgd2l0aCAndHJhbnNmb3JtJyB3aWxsIGFwcGx5IHRoZSB0cmFuc2Zvcm0gZnJvbSBvdXJcbiAqIHByaW1hcnkgbWF0cml4LCB3aGlsZSBtZXRob2RzIHN0YXJ0aW5nIHdpdGggJ2ludmVyc2UnIHdpbGwgYXBwbHkgdGhlIHRyYW5zZm9ybSBmcm9tIHRoZSBpbnZlcnNlIG9mIG91ciBtYXRyaXguXG4gKlxuICogR2VuZXJhbGx5LCB0aGlzIG1lYW5zIHRyYW5zZm9ybS5pbnZlcnNlVGhpbmcoIHRyYW5zZm9ybS50cmFuc2Zvcm1UaGluZyggdGhpbmcgKSApLmVxdWFscyggdGhpbmcgKS5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IFRpbnlFbWl0dGVyIGZyb20gJy4uLy4uL2F4b24vanMvVGlueUVtaXR0ZXIuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgTWF0cml4MyBmcm9tICcuL01hdHJpeDMuanMnO1xuaW1wb3J0IFJheTIgZnJvbSAnLi9SYXkyLmpzJztcbmltcG9ydCBWZWN0b3IyIGZyb20gJy4vVmVjdG9yMi5qcyc7XG5cbmNvbnN0IHNjcmF0Y2hNYXRyaXggPSBuZXcgTWF0cml4MygpO1xuXG5jbGFzcyBUcmFuc2Zvcm0zIHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0cmFuc2Zvcm0gYmFzZWQgYXJvdW5kIGFuIGluaXRpYWwgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4M30gW21hdHJpeF1cbiAgICovXG4gIGNvbnN0cnVjdG9yKCBtYXRyaXggKSB7XG4gICAgLy8gQHByaXZhdGUge01hdHJpeDN9IC0gVGhlIHByaW1hcnkgbWF0cml4IHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm1cbiAgICB0aGlzLm1hdHJpeCA9IE1hdHJpeDMuSURFTlRJVFkuY29weSgpO1xuXG4gICAgLy8gQHByaXZhdGUge01hdHJpeDN9IC0gVGhlIGludmVyc2Ugb2YgdGhlIHByaW1hcnkgbWF0cml4LCBjb21wdXRlZCBsYXppbHlcbiAgICB0aGlzLmludmVyc2UgPSBNYXRyaXgzLklERU5USVRZLmNvcHkoKTtcblxuICAgIC8vIEBwcml2YXRlIHtNYXRyaXgzfSAtIFRoZSB0cmFuc3Bvc2Ugb2YgdGhlIHByaW1hcnkgbWF0cml4LCBjb21wdXRlZCBsYXppbHlcbiAgICB0aGlzLm1hdHJpeFRyYW5zcG9zZWQgPSBNYXRyaXgzLklERU5USVRZLmNvcHkoKTtcblxuICAgIC8vIEBwcml2YXRlIHtNYXRyaXgzfSAtIFRoZSBpbnZlcnNlIG9mIHRoZSB0cmFuc3Bvc2VkIHByaW1hcnkgbWF0cml4LCBjb21wdXRlZCBsYXppbHlcbiAgICB0aGlzLmludmVyc2VUcmFuc3Bvc2VkID0gTWF0cml4My5JREVOVElUWS5jb3B5KCk7XG5cbiAgICAvLyBAcHJpdmF0ZSB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoaXMuaW52ZXJzZSBoYXMgYmVlbiBjb21wdXRlZCBiYXNlZCBvbiB0aGUgbGF0ZXN0IHByaW1hcnkgbWF0cml4XG4gICAgdGhpcy5pbnZlcnNlVmFsaWQgPSB0cnVlO1xuXG4gICAgLy8gQHByaXZhdGUge2Jvb2xlYW59IC0gV2hldGhlciB0aGlzLm1hdHJpeFRyYW5zcG9zZWQgaGFzIGJlZW4gY29tcHV0ZWQgYmFzZWQgb24gdGhlIGxhdGVzdCBwcmltYXJ5IG1hdHJpeFxuICAgIHRoaXMudHJhbnNwb3NlVmFsaWQgPSB0cnVlO1xuXG4gICAgLy8gQHByaXZhdGUge2Jvb2xlYW59IC0gV2hldGhlciB0aGlzLmludmVyc2VUcmFuc3Bvc2VkIGhhcyBiZWVuIGNvbXB1dGVkIGJhc2VkIG9uIHRoZSBsYXRlc3QgcHJpbWFyeSBtYXRyaXhcbiAgICB0aGlzLmludmVyc2VUcmFuc3Bvc2VWYWxpZCA9IHRydWU7XG5cbiAgICAvLyBAcHVibGljIHtUaW55RW1pdHRlcn1cbiAgICB0aGlzLmNoYW5nZUVtaXR0ZXIgPSBuZXcgVGlueUVtaXR0ZXIoKTtcblxuICAgIGlmICggbWF0cml4ICkge1xuICAgICAgdGhpcy5zZXRNYXRyaXgoIG1hdHJpeCApO1xuICAgIH1cbiAgfVxuXG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIG11dGF0b3JzXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIHByaW1hcnkgbWF0cml4IGRpcmVjdGx5IGZyb20gYSBNYXRyaXgzLiBEb2VzIG5vdCBjaGFuZ2UgdGhlIE1hdHJpeDMgaW5zdGFuY2UuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXgzfSBtYXRyaXhcbiAgICovXG4gIHNldE1hdHJpeCggbWF0cml4ICkge1xuXG4gICAgLy8gY29weSB0aGUgbWF0cml4IG92ZXIgdG8gb3VyIG1hdHJpeFxuICAgIHRoaXMubWF0cml4LnNldCggbWF0cml4ICk7XG5cbiAgICAvLyBzZXQgZmxhZ3MgYW5kIG5vdGlmeVxuICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlcyB0aGUgbWF0cml4IG9yIG1hdHJpeCBhcmd1bWVudHMsIG92ZXJyaWRlYWJsZSBieSBzdWJjbGFzc2VzIHRvIHJlZmluZSB0aGUgdmFsaWRhdGlvbi5cbiAgICogQHBhcmFtIHtNYXRyaXh9IG1hdHJpeFxuICAgKiBAcHJvdGVjdGVkXG4gICAqL1xuICB2YWxpZGF0ZU1hdHJpeCggbWF0cml4ICkge1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1hdHJpeCBpbnN0YW5jZW9mIE1hdHJpeDMsICdtYXRyaXggd2FzIGluY29ycmVjdCB0eXBlJyApO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoIG1hdHJpeC5pc0Zpbml0ZSgpLCAnbWF0cml4IG11c3QgYmUgZmluaXRlJyApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBvdXIgaW50ZXJuYWwgbWF0cml4IGlzIGNoYW5nZWQuIEl0IG1hcmtzIHRoZSBvdGhlciBkZXBlbmRlbnQgbWF0cmljZXMgYXMgaW52YWxpZCxcbiAgICogYW5kIHNlbmRzIG91dCBub3RpZmljYXRpb25zIG9mIHRoZSBjaGFuZ2UuXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBpbnZhbGlkYXRlKCkge1xuXG4gICAgLy8gc2FuaXR5IGNoZWNrXG4gICAgYXNzZXJ0ICYmIHRoaXMudmFsaWRhdGVNYXRyaXgoIHRoaXMubWF0cml4ICk7XG5cbiAgICAvLyBkZXBlbmRlbnQgbWF0cmljZXMgbm93IGludmFsaWRcbiAgICB0aGlzLmludmVyc2VWYWxpZCA9IGZhbHNlO1xuICAgIHRoaXMudHJhbnNwb3NlVmFsaWQgPSBmYWxzZTtcbiAgICB0aGlzLmludmVyc2VUcmFuc3Bvc2VWYWxpZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5jaGFuZ2VFbWl0dGVyLmVtaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGUgcHJpbWFyeSBtYXRyaXggc3VjaCB0aGF0OiB0aGlzLm1hdHJpeCA9IG1hdHJpeCAqIHRoaXMubWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4M30gbWF0cml4XG4gICAqL1xuICBwcmVwZW5kKCBtYXRyaXggKSB7XG4gICAgYXNzZXJ0ICYmIHRoaXMudmFsaWRhdGVNYXRyaXgoIG1hdHJpeCApO1xuXG4gICAgLy8gSW4gdGhlIGFic2VuY2Ugb2YgYSBwcmVwZW5kLW11bHRpcGx5IGZ1bmN0aW9uIGluIE1hdHJpeDMsIGNvcHkgb3ZlciB0byBhIHNjcmF0Y2ggbWF0cml4IGluc3RlYWRcbiAgICAvLyBUT0RPOiBpbXBsZW1lbnQgYSBwcmVwZW5kLW11bHRpcGx5IGRpcmVjdGx5IGluIE1hdHJpeDMgZm9yIGEgcGVyZm9ybWFuY2UgaW5jcmVhc2VcbiAgICBzY3JhdGNoTWF0cml4LnNldCggdGhpcy5tYXRyaXggKTtcbiAgICB0aGlzLm1hdHJpeC5zZXQoIG1hdHJpeCApO1xuICAgIHRoaXMubWF0cml4Lm11bHRpcGx5TWF0cml4KCBzY3JhdGNoTWF0cml4ICk7XG5cbiAgICAvLyBzZXQgZmxhZ3MgYW5kIG5vdGlmeVxuICAgIHRoaXMuaW52YWxpZGF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE9wdGltaXplZCBwcmVwZW5kZWQgdHJhbnNsYXRpb24gc3VjaCB0aGF0OiB0aGlzLm1hdHJpeCA9IHRyYW5zbGF0aW9uKCB4LCB5ICkgKiB0aGlzLm1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geCAtICB4LWNvb3JkaW5hdGVcbiAgICogQHBhcmFtIHtudW1iZXJ9IHkgLSAgeS1jb29yZGluYXRlXG4gICAqL1xuICBwcmVwZW5kVHJhbnNsYXRpb24oIHgsIHkgKSB7XG4gICAgLy8gU2VlIHNjZW5lcnkjMTE5IGZvciBtb3JlIGRldGFpbHMgb24gdGhlIG5lZWQuXG5cbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0eXBlb2YgeCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHkgPT09ICdudW1iZXInICYmIGlzRmluaXRlKCB4ICkgJiYgaXNGaW5pdGUoIHkgKSxcbiAgICAgICdBdHRlbXB0ZWQgdG8gcHJlcGVuZCBub24tZmluaXRlIG9yIG5vbi1udW1iZXIgKHgseSkgdG8gdGhlIHRyYW5zZm9ybScgKTtcblxuICAgIHRoaXMubWF0cml4LnByZXBlbmRUcmFuc2xhdGlvbiggeCwgeSApO1xuXG4gICAgLy8gc2V0IGZsYWdzIGFuZCBub3RpZnlcbiAgICB0aGlzLmludmFsaWRhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGUgcHJpbWFyeSBtYXRyaXggc3VjaCB0aGF0OiB0aGlzLm1hdHJpeCA9IHRoaXMubWF0cml4ICogbWF0cml4XG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtNYXRyaXgzfSBtYXRyaXhcbiAgICovXG4gIGFwcGVuZCggbWF0cml4ICkge1xuICAgIGFzc2VydCAmJiB0aGlzLnZhbGlkYXRlTWF0cml4KCBtYXRyaXggKTtcblxuICAgIHRoaXMubWF0cml4Lm11bHRpcGx5TWF0cml4KCBtYXRyaXggKTtcblxuICAgIC8vIHNldCBmbGFncyBhbmQgbm90aWZ5XG4gICAgdGhpcy5pbnZhbGlkYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBwcmVwZW5kKCksIGJ1dCBwcmVwZW5kcyB0aGUgb3RoZXIgdHJhbnNmb3JtJ3MgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VHJhbnNmb3JtM30gdHJhbnNmb3JtXG4gICAqL1xuICBwcmVwZW5kVHJhbnNmb3JtKCB0cmFuc2Zvcm0gKSB7XG4gICAgdGhpcy5wcmVwZW5kKCB0cmFuc2Zvcm0ubWF0cml4ICk7XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBhcHBlbmQoKSwgYnV0IGFwcGVuZHMgdGhlIG90aGVyIHRyYW5zZm9ybSdzIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1RyYW5zZm9ybTN9IHRyYW5zZm9ybVxuICAgKi9cbiAgYXBwZW5kVHJhbnNmb3JtKCB0cmFuc2Zvcm0gKSB7XG4gICAgdGhpcy5hcHBlbmQoIHRyYW5zZm9ybS5tYXRyaXggKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0cmFuc2Zvcm0gb2YgYSBDYW52YXMgY29udGV4dCB0byBiZSBlcXVpdmFsZW50IHRvIHRoaXMgdHJhbnNmb3JtLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7Q2FudmFzUmVuZGVyaW5nQ29udGV4dDJEfSBjb250ZXh0XG4gICAqL1xuICBhcHBseVRvQ2FudmFzQ29udGV4dCggY29udGV4dCApIHtcbiAgICBjb250ZXh0LnNldFRyYW5zZm9ybSggdGhpcy5tYXRyaXgubTAwKCksIHRoaXMubWF0cml4Lm0xMCgpLCB0aGlzLm1hdHJpeC5tMDEoKSwgdGhpcy5tYXRyaXgubTExKCksIHRoaXMubWF0cml4Lm0wMigpLCB0aGlzLm1hdHJpeC5tMTIoKSApO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIGdldHRlcnNcbiAgICotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qL1xuXG4gIC8qKlxuICAgKiBDcmVhdGVzIGEgY29weSBvZiB0aGlzIHRyYW5zZm9ybS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7VHJhbnNmb3JtM31cbiAgICovXG4gIGNvcHkoKSB7XG4gICAgY29uc3QgdHJhbnNmb3JtID0gbmV3IFRyYW5zZm9ybTMoIHRoaXMubWF0cml4ICk7XG5cbiAgICB0cmFuc2Zvcm0uaW52ZXJzZSA9IHRoaXMuaW52ZXJzZTtcbiAgICB0cmFuc2Zvcm0ubWF0cml4VHJhbnNwb3NlZCA9IHRoaXMubWF0cml4VHJhbnNwb3NlZDtcbiAgICB0cmFuc2Zvcm0uaW52ZXJzZVRyYW5zcG9zZWQgPSB0aGlzLmludmVyc2VUcmFuc3Bvc2VkO1xuXG4gICAgdHJhbnNmb3JtLmludmVyc2VWYWxpZCA9IHRoaXMuaW52ZXJzZVZhbGlkO1xuICAgIHRyYW5zZm9ybS50cmFuc3Bvc2VWYWxpZCA9IHRoaXMudHJhbnNwb3NlVmFsaWQ7XG4gICAgdHJhbnNmb3JtLmludmVyc2VUcmFuc3Bvc2VWYWxpZCA9IHRoaXMuaW52ZXJzZVRyYW5zcG9zZVZhbGlkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHByaW1hcnkgbWF0cml4IG9mIHRoaXMgdHJhbnNmb3JtLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXgzfVxuICAgKi9cbiAgZ2V0TWF0cml4KCkge1xuICAgIHJldHVybiB0aGlzLm1hdHJpeDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSBwcmltYXJ5IG1hdHJpeCBvZiB0aGlzIHRyYW5zZm9ybS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4M31cbiAgICovXG4gIGdldEludmVyc2UoKSB7XG4gICAgaWYgKCAhdGhpcy5pbnZlcnNlVmFsaWQgKSB7XG4gICAgICB0aGlzLmludmVyc2VWYWxpZCA9IHRydWU7XG5cbiAgICAgIHRoaXMuaW52ZXJzZS5zZXQoIHRoaXMubWF0cml4ICk7XG4gICAgICB0aGlzLmludmVyc2UuaW52ZXJ0KCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmludmVyc2U7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgdHJhbnNwb3NlIG9mIHRoZSBwcmltYXJ5IG1hdHJpeCBvZiB0aGlzIHRyYW5zZm9ybS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4M31cbiAgICovXG4gIGdldE1hdHJpeFRyYW5zcG9zZWQoKSB7XG4gICAgaWYgKCAhdGhpcy50cmFuc3Bvc2VWYWxpZCApIHtcbiAgICAgIHRoaXMudHJhbnNwb3NlVmFsaWQgPSB0cnVlO1xuXG4gICAgICB0aGlzLm1hdHJpeFRyYW5zcG9zZWQuc2V0KCB0aGlzLm1hdHJpeCApO1xuICAgICAgdGhpcy5tYXRyaXhUcmFuc3Bvc2VkLnRyYW5zcG9zZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5tYXRyaXhUcmFuc3Bvc2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGludmVyc2Ugb2YgdGhlIHRyYW5zcG9zZSBvZiBtYXRyaXggb2YgdGhpcyB0cmFuc2Zvcm0uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge01hdHJpeDN9XG4gICAqL1xuICBnZXRJbnZlcnNlVHJhbnNwb3NlZCgpIHtcbiAgICBpZiAoICF0aGlzLmludmVyc2VUcmFuc3Bvc2VWYWxpZCApIHtcbiAgICAgIHRoaXMuaW52ZXJzZVRyYW5zcG9zZVZhbGlkID0gdHJ1ZTtcblxuICAgICAgdGhpcy5pbnZlcnNlVHJhbnNwb3NlZC5zZXQoIHRoaXMuZ2V0SW52ZXJzZSgpICk7IC8vIHRyaWdnZXJzIGludmVyc2UgdG8gYmUgdmFsaWRcbiAgICAgIHRoaXMuaW52ZXJzZVRyYW5zcG9zZWQudHJhbnNwb3NlKCk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLmludmVyc2VUcmFuc3Bvc2VkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgd2hldGhlciBvdXIgcHJpbWFyeSBtYXRyaXggaXMga25vd24gdG8gYmUgYW4gaWRlbnRpdHkgbWF0cml4LiBJZiBmYWxzZSBpcyByZXR1cm5lZCwgaXQgZG9lc24ndCBuZWNlc3NhcmlseVxuICAgKiBtZWFuIG91ciBtYXRyaXggaXNuJ3QgYW4gaWRlbnRpdHkgbWF0cml4LCBqdXN0IHRoYXQgaXQgaXMgdW5saWtlbHkgaW4gbm9ybWFsIHVzYWdlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNJZGVudGl0eSgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXRyaXguaXNGYXN0SWRlbnRpdHkoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgYW55IGNvbXBvbmVudHMgb2Ygb3VyIHByaW1hcnkgbWF0cml4IGFyZSBlaXRoZXIgaW5maW5pdGUgb3IgTmFOLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtib29sZWFufVxuICAgKi9cbiAgaXNGaW5pdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMubWF0cml4LmlzRmluaXRlKCk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogZm9yd2FyZCB0cmFuc2Zvcm1zIChmb3IgVmVjdG9yMiBvciBzY2FsYXIpXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIDItZGltZW5zaW9uYWwgdmVjdG9yIGxpa2UgaXQgaXMgYSBwb2ludCB3aXRoIGEgcG9zaXRpb24gKHRyYW5zbGF0aW9uIGlzIGFwcGxpZWQpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEZvciBhbiBhZmZpbmUgbWF0cml4ICRNJCwgdGhlIHJlc3VsdCBpcyB0aGUgaG9tb2dlbmVvdXMgbXVsdGlwbGljYXRpb24gJE1cXGJlZ2lue2JtYXRyaXh9IHggXFxcXCB5IFxcXFwgMSBcXGVuZHtibWF0cml4fSQuXG4gICAqXG4gICAqIEBwYXJhbSB7VmVjdG9yMn0gdlxuICAgKiBAcmV0dXJucyB7VmVjdG9yMn1cbiAgICovXG4gIHRyYW5zZm9ybVBvc2l0aW9uMiggdiApIHtcbiAgICByZXR1cm4gdGhpcy5tYXRyaXgudGltZXNWZWN0b3IyKCB2ICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIDItZGltZW5zaW9uYWwgdmVjdG9yIGxpa2UgcG9zaXRpb24gaXMgaXJyZWxldmFudCAodHJhbnNsYXRpb24gaXMgbm90IGFwcGxpZWQpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEZvciBhbiBhZmZpbmUgbWF0cml4ICRcXGJlZ2lue2JtYXRyaXh9IGEgJiBiICYgYyBcXFxcIGQgJiBlICYgZiBcXFxcIDAgJiAwICYgMSBcXGVuZHtibWF0cml4fSQsXG4gICAqIHRoZSByZXN1bHQgaXMgJFxcYmVnaW57Ym1hdHJpeH0gYSAmIGIgJiAwIFxcXFwgZCAmIGUgJiAwIFxcXFwgMCAmIDAgJiAxIFxcZW5ke2JtYXRyaXh9IFxcYmVnaW57Ym1hdHJpeH0geCBcXFxcIHkgXFxcXCAxIFxcZW5ke2JtYXRyaXh9JC5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IyfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IyfVxuICAgKi9cbiAgdHJhbnNmb3JtRGVsdGEyKCB2ICkge1xuICAgIGNvbnN0IG0gPSB0aGlzLmdldE1hdHJpeCgpO1xuICAgIC8vIG0gLiB2IC0gbSAuIFZlY3RvcjIuWkVST1xuICAgIHJldHVybiBuZXcgVmVjdG9yMiggbS5tMDAoKSAqIHYueCArIG0ubTAxKCkgKiB2LnksIG0ubTEwKCkgKiB2LnggKyBtLm0xMSgpICogdi55ICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIDItZGltZW5zaW9uYWwgdmVjdG9yIGxpa2UgaXQgaXMgYSBub3JtYWwgdG8gYSBjdXJ2ZSAoc28gdGhhdCB0aGUgY3VydmUgaXMgdHJhbnNmb3JtZWQsIGFuZCB0aGUgbmV3XG4gICAqIG5vcm1hbCB0byB0aGUgY3VydmUgYXQgdGhlIHRyYW5zZm9ybWVkIHBvaW50IGlzIHJldHVybmVkKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBGb3IgYW4gYWZmaW5lIG1hdHJpeCAkXFxiZWdpbntibWF0cml4fSBhICYgYiAmIGMgXFxcXCBkICYgZSAmIGYgXFxcXCAwICYgMCAmIDEgXFxlbmR7Ym1hdHJpeH0kLFxuICAgKiB0aGUgcmVzdWx0IGlzICRcXGJlZ2lue2JtYXRyaXh9IGEgJiBlICYgMCBcXFxcIGQgJiBiICYgMCBcXFxcIDAgJiAwICYgMSBcXGVuZHtibWF0cml4fV57LTF9IFxcYmVnaW57Ym1hdHJpeH0geCBcXFxcIHkgXFxcXCAxIFxcZW5ke2JtYXRyaXh9JC5cbiAgICogVGhpcyBpcyBlc3NlbnRpYWxseSB0aGUgdHJhbnNwb3NlZCBpbnZlcnNlIHdpdGggdHJhbnNsYXRpb24gcmVtb3ZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IyfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IyfVxuICAgKi9cbiAgdHJhbnNmb3JtTm9ybWFsMiggdiApIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnZlcnNlKCkudGltZXNUcmFuc3Bvc2VWZWN0b3IyKCB2ICkubm9ybWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVzdWx0aW5nIHgtY29vcmRpbmF0ZSBvZiB0aGUgdHJhbnNmb3JtYXRpb24gb2YgYWxsIHZlY3RvcnMgd2l0aCB0aGUgaW5pdGlhbCBpbnB1dCB4LWNvb3JkaW5hdGUuIElmXG4gICAqIHRoaXMgaXMgbm90IHdlbGwtZGVmaW5lZCAodGhlIHggdmFsdWUgZGVwZW5kcyBvbiB5KSwgYW4gYXNzZXJ0aW9uIGlzIHRocm93biAoYW5kIHkgaXMgYXNzdW1lZCB0byBiZSAwKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgdHJhbnNmb3JtWCggeCApIHtcbiAgICBjb25zdCBtID0gdGhpcy5nZXRNYXRyaXgoKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhbS5tMDEoKSwgJ1RyYW5zZm9ybWluZyBhbiBYIHZhbHVlIHdpdGggYSByb3RhdGlvbi9zaGVhciBpcyBpbGwtZGVmaW5lZCcgKTtcbiAgICByZXR1cm4gbS5tMDAoKSAqIHggKyBtLm0wMigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHJlc3VsdGluZyB5LWNvb3JkaW5hdGUgb2YgdGhlIHRyYW5zZm9ybWF0aW9uIG9mIGFsbCB2ZWN0b3JzIHdpdGggdGhlIGluaXRpYWwgaW5wdXQgeS1jb29yZGluYXRlLiBJZlxuICAgKiB0aGlzIGlzIG5vdCB3ZWxsLWRlZmluZWQgKHRoZSB5IHZhbHVlIGRlcGVuZHMgb24geCksIGFuIGFzc2VydGlvbiBpcyB0aHJvd24gKGFuZCB4IGlzIGFzc3VtZWQgdG8gYmUgMCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIHRyYW5zZm9ybVkoIHkgKSB7XG4gICAgY29uc3QgbSA9IHRoaXMuZ2V0TWF0cml4KCk7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggIW0ubTEwKCksICdUcmFuc2Zvcm1pbmcgYSBZIHZhbHVlIHdpdGggYSByb3RhdGlvbi9zaGVhciBpcyBpbGwtZGVmaW5lZCcgKTtcbiAgICByZXR1cm4gbS5tMTEoKSAqIHkgKyBtLm0xMigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHgtY29vcmRpbmF0ZSBkaWZmZXJlbmNlIGZvciB0d28gdHJhbnNmb3JtZWQgdmVjdG9ycywgd2hpY2ggYWRkIHRoZSB4LWNvb3JkaW5hdGUgZGlmZmVyZW5jZSBvZiB0aGUgaW5wdXRcbiAgICogeCAoYW5kIHNhbWUgeSB2YWx1ZXMpIGJlZm9yZWhhbmQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIHRyYW5zZm9ybURlbHRhWCggeCApIHtcbiAgICBjb25zdCBtID0gdGhpcy5nZXRNYXRyaXgoKTtcbiAgICAvLyBzYW1lIGFzIHRoaXMudHJhbnNmb3JtRGVsdGEyKCBuZXcgVmVjdG9yMiggeCwgMCApICkueDtcbiAgICByZXR1cm4gbS5tMDAoKSAqIHg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgeS1jb29yZGluYXRlIGRpZmZlcmVuY2UgZm9yIHR3byB0cmFuc2Zvcm1lZCB2ZWN0b3JzLCB3aGljaCBhZGQgdGhlIHktY29vcmRpbmF0ZSBkaWZmZXJlbmNlIG9mIHRoZSBpbnB1dFxuICAgKiB5IChhbmQgc2FtZSB4IHZhbHVlcykgYmVmb3JlaGFuZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgdHJhbnNmb3JtRGVsdGFZKCB5ICkge1xuICAgIGNvbnN0IG0gPSB0aGlzLmdldE1hdHJpeCgpO1xuICAgIC8vIHNhbWUgYXMgdGhpcy50cmFuc2Zvcm1EZWx0YTIoIG5ldyBWZWN0b3IyKCAwLCB5ICkgKS55O1xuICAgIHJldHVybiBtLm0xMSgpICogeTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGJvdW5kcyAoYXhpcy1hbGlnbmVkKSB0aGF0IGNvbnRhaW5zIHRoZSB0cmFuc2Zvcm1lZCBib3VuZHMgcmVjdGFuZ2xlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIE5PVEU6IHRyYW5zZm9ybS5pbnZlcnNlQm91bmRzMiggdHJhbnNmb3JtLnRyYW5zZm9ybUJvdW5kczIoIGJvdW5kcyApICkgbWF5IGJlIGxhcmdlciB0aGFuIHRoZSBvcmlnaW5hbCBib3gsXG4gICAqIGlmIGl0IGluY2x1ZGVzIGEgcm90YXRpb24gdGhhdCBpc24ndCBhIG11bHRpcGxlIG9mICRcXHBpLzIkLiBUaGlzIGlzIGJlY2F1c2UgdGhlIHJldHVybmVkIGJvdW5kcyBtYXkgZXhwYW5kIGluXG4gICAqIGFyZWEgdG8gY292ZXIgQUxMIG9mIHRoZSBjb3JuZXJzIG9mIHRoZSB0cmFuc2Zvcm1lZCBib3VuZGluZyBib3guXG4gICAqXG4gICAqIEBwYXJhbSB7Qm91bmRzMn0gYm91bmRzXG4gICAqIEByZXR1cm5zIHtCb3VuZHMyfVxuICAgKi9cbiAgdHJhbnNmb3JtQm91bmRzMiggYm91bmRzICkge1xuICAgIHJldHVybiBib3VuZHMudHJhbnNmb3JtZWQoIHRoaXMubWF0cml4ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHRyYW5zZm9ybWVkIHBoZXQua2l0ZS5TaGFwZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1NoYXBlfSBzaGFwZVxuICAgKiBAcmV0dXJucyB7U2hhcGV9XG4gICAqL1xuICB0cmFuc2Zvcm1TaGFwZSggc2hhcGUgKSB7XG4gICAgcmV0dXJuIHNoYXBlLnRyYW5zZm9ybWVkKCB0aGlzLm1hdHJpeCApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSB0cmFuc2Zvcm1lZCByYXkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtSYXkyfSByYXlcbiAgICogQHJldHVybnMge1JheTJ9XG4gICAqL1xuICB0cmFuc2Zvcm1SYXkyKCByYXkgKSB7XG4gICAgcmV0dXJuIG5ldyBSYXkyKCB0aGlzLnRyYW5zZm9ybVBvc2l0aW9uMiggcmF5LnBvc2l0aW9uICksIHRoaXMudHJhbnNmb3JtRGVsdGEyKCByYXkuZGlyZWN0aW9uICkubm9ybWFsaXplZCgpICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogaW52ZXJzZSB0cmFuc2Zvcm1zIChmb3IgVmVjdG9yMiBvciBzY2FsYXIpXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIDItZGltZW5zaW9uYWwgdmVjdG9yIGJ5IHRoZSBpbnZlcnNlIG9mIG91ciB0cmFuc2Zvcm0gbGlrZSBpdCBpcyBhIHBvaW50IHdpdGggYSBwb3NpdGlvbiAodHJhbnNsYXRpb24gaXMgYXBwbGllZCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogRm9yIGFuIGFmZmluZSBtYXRyaXggJE0kLCB0aGUgcmVzdWx0IGlzIHRoZSBob21vZ2VuZW91cyBtdWx0aXBsaWNhdGlvbiAkTV57LTF9XFxiZWdpbntibWF0cml4fSB4IFxcXFwgeSBcXFxcIDEgXFxlbmR7Ym1hdHJpeH0kLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbnZlcnNlIG9mIHRyYW5zZm9ybVBvc2l0aW9uMigpLlxuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHZcbiAgICogQHJldHVybnMge1ZlY3RvcjJ9XG4gICAqL1xuICBpbnZlcnNlUG9zaXRpb24yKCB2ICkge1xuICAgIHJldHVybiB0aGlzLmdldEludmVyc2UoKS50aW1lc1ZlY3RvcjIoIHYgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm1zIGEgMi1kaW1lbnNpb25hbCB2ZWN0b3IgYnkgdGhlIGludmVyc2Ugb2Ygb3VyIHRyYW5zZm9ybSBsaWtlIHBvc2l0aW9uIGlzIGlycmVsZXZhbnQgKHRyYW5zbGF0aW9uIGlzIG5vdCBhcHBsaWVkKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBGb3IgYW4gYWZmaW5lIG1hdHJpeCAkXFxiZWdpbntibWF0cml4fSBhICYgYiAmIGMgXFxcXCBkICYgZSAmIGYgXFxcXCAwICYgMCAmIDEgXFxlbmR7Ym1hdHJpeH0kLFxuICAgKiB0aGUgcmVzdWx0IGlzICRcXGJlZ2lue2JtYXRyaXh9IGEgJiBiICYgMCBcXFxcIGQgJiBlICYgMCBcXFxcIDAgJiAwICYgMSBcXGVuZHtibWF0cml4fV57LTF9IFxcYmVnaW57Ym1hdHJpeH0geCBcXFxcIHkgXFxcXCAxIFxcZW5ke2JtYXRyaXh9JC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1EZWx0YTIoKS5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IyfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IyfVxuICAgKi9cbiAgaW52ZXJzZURlbHRhMiggdiApIHtcbiAgICBjb25zdCBtID0gdGhpcy5nZXRJbnZlcnNlKCk7XG4gICAgLy8gbSAuIHYgLSBtIC4gVmVjdG9yMi5aRVJPXG4gICAgcmV0dXJuIG5ldyBWZWN0b3IyKCBtLm0wMCgpICogdi54ICsgbS5tMDEoKSAqIHYueSwgbS5tMTAoKSAqIHYueCArIG0ubTExKCkgKiB2LnkgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm1zIGEgMi1kaW1lbnNpb25hbCB2ZWN0b3IgYnkgdGhlIGludmVyc2Ugb2Ygb3VyIHRyYW5zZm9ybSBsaWtlIGl0IGlzIGEgbm9ybWFsIHRvIGEgY3VydmUgKHNvIHRoYXQgdGhlXG4gICAqIGN1cnZlIGlzIHRyYW5zZm9ybWVkLCBhbmQgdGhlIG5ldyBub3JtYWwgdG8gdGhlIGN1cnZlIGF0IHRoZSB0cmFuc2Zvcm1lZCBwb2ludCBpcyByZXR1cm5lZCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogRm9yIGFuIGFmZmluZSBtYXRyaXggJFxcYmVnaW57Ym1hdHJpeH0gYSAmIGIgJiBjIFxcXFwgZCAmIGUgJiBmIFxcXFwgMCAmIDAgJiAxIFxcZW5ke2JtYXRyaXh9JCxcbiAgICogdGhlIHJlc3VsdCBpcyAkXFxiZWdpbntibWF0cml4fSBhICYgZSAmIDAgXFxcXCBkICYgYiAmIDAgXFxcXCAwICYgMCAmIDEgXFxlbmR7Ym1hdHJpeH0gXFxiZWdpbntibWF0cml4fSB4IFxcXFwgeSBcXFxcIDEgXFxlbmR7Ym1hdHJpeH0kLlxuICAgKiBUaGlzIGlzIGVzc2VudGlhbGx5IHRoZSB0cmFuc3Bvc2VkIHRyYW5zZm9ybSB3aXRoIHRyYW5zbGF0aW9uIHJlbW92ZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGludmVyc2Ugb2YgdHJhbnNmb3JtTm9ybWFsMigpLlxuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjJ9IHZcbiAgICogQHJldHVybnMge1ZlY3RvcjJ9XG4gICAqL1xuICBpbnZlcnNlTm9ybWFsMiggdiApIHtcbiAgICByZXR1cm4gdGhpcy5tYXRyaXgudGltZXNUcmFuc3Bvc2VWZWN0b3IyKCB2ICkubm9ybWFsaXplKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVzdWx0aW5nIHgtY29vcmRpbmF0ZSBvZiB0aGUgaW52ZXJzZSB0cmFuc2Zvcm1hdGlvbiBvZiBhbGwgdmVjdG9ycyB3aXRoIHRoZSBpbml0aWFsIGlucHV0IHgtY29vcmRpbmF0ZS4gSWZcbiAgICogdGhpcyBpcyBub3Qgd2VsbC1kZWZpbmVkICh0aGUgeCB2YWx1ZSBkZXBlbmRzIG9uIHkpLCBhbiBhc3NlcnRpb24gaXMgdGhyb3duIChhbmQgeSBpcyBhc3N1bWVkIHRvIGJlIDApLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGludmVyc2Ugb2YgdHJhbnNmb3JtWCgpLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geFxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgaW52ZXJzZVgoIHggKSB7XG4gICAgY29uc3QgbSA9IHRoaXMuZ2V0SW52ZXJzZSgpO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICFtLm0wMSgpLCAnSW52ZXJ0aW5nIGFuIFggdmFsdWUgd2l0aCBhIHJvdGF0aW9uL3NoZWFyIGlzIGlsbC1kZWZpbmVkJyApO1xuICAgIHJldHVybiBtLm0wMCgpICogeCArIG0ubTAyKCk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgcmVzdWx0aW5nIHktY29vcmRpbmF0ZSBvZiB0aGUgaW52ZXJzZSB0cmFuc2Zvcm1hdGlvbiBvZiBhbGwgdmVjdG9ycyB3aXRoIHRoZSBpbml0aWFsIGlucHV0IHktY29vcmRpbmF0ZS4gSWZcbiAgICogdGhpcyBpcyBub3Qgd2VsbC1kZWZpbmVkICh0aGUgeSB2YWx1ZSBkZXBlbmRzIG9uIHgpLCBhbiBhc3NlcnRpb24gaXMgdGhyb3duIChhbmQgeCBpcyBhc3N1bWVkIHRvIGJlIDApLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGludmVyc2Ugb2YgdHJhbnNmb3JtWSgpLlxuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0geVxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgaW52ZXJzZVkoIHkgKSB7XG4gICAgY29uc3QgbSA9IHRoaXMuZ2V0SW52ZXJzZSgpO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICFtLm0xMCgpLCAnSW52ZXJ0aW5nIGEgWSB2YWx1ZSB3aXRoIGEgcm90YXRpb24vc2hlYXIgaXMgaWxsLWRlZmluZWQnICk7XG4gICAgcmV0dXJuIG0ubTExKCkgKiB5ICsgbS5tMTIoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB4LWNvb3JkaW5hdGUgZGlmZmVyZW5jZSBmb3IgdHdvIGludmVyc2UtdHJhbnNmb3JtZWQgdmVjdG9ycywgd2hpY2ggYWRkIHRoZSB4LWNvb3JkaW5hdGUgZGlmZmVyZW5jZSBvZiB0aGUgaW5wdXRcbiAgICogeCAoYW5kIHNhbWUgeSB2YWx1ZXMpIGJlZm9yZWhhbmQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1EZWx0YVgoKS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGludmVyc2VEZWx0YVgoIHggKSB7XG4gICAgY29uc3QgbSA9IHRoaXMuZ2V0SW52ZXJzZSgpO1xuICAgIGFzc2VydCAmJiBhc3NlcnQoICFtLm0wMSgpLCAnSW52ZXJ0aW5nIGFuIFggdmFsdWUgd2l0aCBhIHJvdGF0aW9uL3NoZWFyIGlzIGlsbC1kZWZpbmVkJyApO1xuICAgIC8vIHNhbWUgYXMgdGhpcy5pbnZlcnNlRGVsdGEyKCBuZXcgVmVjdG9yMiggeCwgMCApICkueDtcbiAgICByZXR1cm4gbS5tMDAoKSAqIHg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgeS1jb29yZGluYXRlIGRpZmZlcmVuY2UgZm9yIHR3byBpbnZlcnNlLXRyYW5zZm9ybWVkIHZlY3RvcnMsIHdoaWNoIGFkZCB0aGUgeS1jb29yZGluYXRlIGRpZmZlcmVuY2Ugb2YgdGhlIGlucHV0XG4gICAqIHkgKGFuZCBzYW1lIHggdmFsdWVzKSBiZWZvcmVoYW5kLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGludmVyc2Ugb2YgdHJhbnNmb3JtRGVsdGFZKCkuXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB5XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICBpbnZlcnNlRGVsdGFZKCB5ICkge1xuICAgIGNvbnN0IG0gPSB0aGlzLmdldEludmVyc2UoKTtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCAhbS5tMTAoKSwgJ0ludmVydGluZyBhIFkgdmFsdWUgd2l0aCBhIHJvdGF0aW9uL3NoZWFyIGlzIGlsbC1kZWZpbmVkJyApO1xuICAgIC8vIHNhbWUgYXMgdGhpcy5pbnZlcnNlRGVsdGEyKCBuZXcgVmVjdG9yMiggMCwgeSApICkueTtcbiAgICByZXR1cm4gbS5tMTEoKSAqIHk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBib3VuZHMgKGF4aXMtYWxpZ25lZCkgdGhhdCBjb250YWlucyB0aGUgaW52ZXJzZS10cmFuc2Zvcm1lZCBib3VuZHMgcmVjdGFuZ2xlLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIE5PVEU6IHRyYW5zZm9ybS5pbnZlcnNlQm91bmRzMiggdHJhbnNmb3JtLnRyYW5zZm9ybUJvdW5kczIoIGJvdW5kcyApICkgbWF5IGJlIGxhcmdlciB0aGFuIHRoZSBvcmlnaW5hbCBib3gsXG4gICAqIGlmIGl0IGluY2x1ZGVzIGEgcm90YXRpb24gdGhhdCBpc24ndCBhIG11bHRpcGxlIG9mICRcXHBpLzIkLiBUaGlzIGlzIGJlY2F1c2UgdGhlIHJldHVybmVkIGJvdW5kcyBtYXkgZXhwYW5kIGluXG4gICAqIGFyZWEgdG8gY292ZXIgQUxMIG9mIHRoZSBjb3JuZXJzIG9mIHRoZSB0cmFuc2Zvcm1lZCBib3VuZGluZyBib3guXG4gICAqXG4gICAqIEBwYXJhbSB7Qm91bmRzMn0gYm91bmRzXG4gICAqIEByZXR1cm5zIHtCb3VuZHMyfVxuICAgKi9cbiAgaW52ZXJzZUJvdW5kczIoIGJvdW5kcyApIHtcbiAgICByZXR1cm4gYm91bmRzLnRyYW5zZm9ybWVkKCB0aGlzLmdldEludmVyc2UoKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaW52ZXJzZS10cmFuc2Zvcm1lZCBwaGV0LmtpdGUuU2hhcGUuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1TaGFwZSgpXG4gICAqXG4gICAqIEBwYXJhbSB7U2hhcGV9IHNoYXBlXG4gICAqIEByZXR1cm5zIHtTaGFwZX1cbiAgICovXG4gIGludmVyc2VTaGFwZSggc2hhcGUgKSB7XG4gICAgcmV0dXJuIHNoYXBlLnRyYW5zZm9ybWVkKCB0aGlzLmdldEludmVyc2UoKSApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYW4gaW52ZXJzZS10cmFuc2Zvcm1lZCByYXkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1SYXkyKClcbiAgICpcbiAgICogQHBhcmFtIHtSYXkyfSByYXlcbiAgICogQHJldHVybnMge1JheTJ9XG4gICAqL1xuICBpbnZlcnNlUmF5MiggcmF5ICkge1xuICAgIHJldHVybiBuZXcgUmF5MiggdGhpcy5pbnZlcnNlUG9zaXRpb24yKCByYXkucG9zaXRpb24gKSwgdGhpcy5pbnZlcnNlRGVsdGEyKCByYXkuZGlyZWN0aW9uICkubm9ybWFsaXplZCgpICk7XG4gIH1cbn1cblxuZG90LnJlZ2lzdGVyKCAnVHJhbnNmb3JtMycsIFRyYW5zZm9ybTMgKTtcblxuZXhwb3J0IGRlZmF1bHQgVHJhbnNmb3JtMzsiXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/Transform4.js
// Copyright 2013-2022, University of Colorado Boulder

/**
 * Forward and inverse transforms with 4x4 matrices, allowing flexibility including affine and perspective transformations.
 *
 * Methods starting with 'transform' will apply the transform from our
 * primary matrix, while methods starting with 'inverse' will apply the transform from the inverse of our matrix.
 *
 * Generally, this means transform.inverseThing( transform.transformThing( thing ) ).equals( thing ).
 *
 * @author Jonathan Olson <jonathan.olson@colorado.edu>
 */






const Transform4_scratchMatrix = new js_Matrix4();

/**
 * check if the matrix is Finite and is of type Matrix4
 * @private
 * @param matrix
 * @returns {boolean}
 */
function checkMatrix(matrix) {
  return matrix instanceof js_Matrix4 && matrix.isFinite();
}
class Transform4 {
  /**
   * Creates a transform based around an initial matrix.
   * @public
   *
   * @param {Matrix4} matrix
   */
  constructor(matrix) {
    // @private {Matrix4} - The primary matrix used for the transform
    this.matrix = js_Matrix4.IDENTITY.copy();

    // @private {Matrix4} - The inverse of the primary matrix, computed lazily
    this.inverse = js_Matrix4.IDENTITY.copy();

    // @private {Matrix4} - The transpose of the primary matrix, computed lazily
    this.matrixTransposed = js_Matrix4.IDENTITY.copy();

    // @private {Matrix4} - The inverse of the transposed primary matrix, computed lazily
    this.inverseTransposed = js_Matrix4.IDENTITY.copy();

    // @private {boolean} - Whether this.inverse has been computed based on the latest primary matrix
    this.inverseValid = true;

    // @private {boolean} - Whether this.matrixTransposed has been computed based on the latest primary matrix
    this.transposeValid = true;

    // @private {boolean} - Whether this.inverseTransposed has been computed based on the latest primary matrix
    this.inverseTransposeValid = true;

    // @public {TinyEmitter}
    this.changeEmitter = new TinyEmitter();
    if (matrix) {
      this.setMatrix(matrix);
    }
  }

  /*---------------------------------------------------------------------------*
   * mutators
   *---------------------------------------------------------------------------*/

  /**
   * Sets the value of the primary matrix directly from a Matrix4. Does not change the Matrix4 instance of this
   * Transform4.
   * @public
   *
   * @param {Matrix4} matrix
   */
  setMatrix(matrix) {
    assert && assert(checkMatrix(matrix), 'Matrix has NaNs, non-finite values, or isn\'t a matrix!');

    // copy the matrix over to our matrix
    this.matrix.set(matrix);

    // set flags and notify
    this.invalidate();
  }

  /**
   * This should be called after our internal matrix is changed. It marks the other dependent matrices as invalid,
   * and sends out notifications of the change.
   * @private
   */
  invalidate() {
    // sanity check
    assert && assert(this.matrix.isFinite());

    // dependent matrices now invalid
    this.inverseValid = false;
    this.transposeValid = false;
    this.inverseTransposeValid = false;
    this.changeEmitter.emit();
  }

  /**
   * Modifies the primary matrix such that: this.matrix = matrix * this.matrix.
   * @public
   *
   * @param {Matrix4} matrix
   */
  prepend(matrix) {
    assert && assert(checkMatrix(matrix), 'Matrix has NaNs, non-finite values, or isn\'t a matrix!');

    // In the absence of a prepend-multiply function in Matrix4, copy over to a scratch matrix instead
    // TODO: implement a prepend-multiply directly in Matrix4 for a performance increase
    Transform4_scratchMatrix.set(this.matrix);
    this.matrix.set(matrix);
    this.matrix.multiplyMatrix(Transform4_scratchMatrix);

    // set flags and notify
    this.invalidate();
  }

  /**
   * Modifies the primary matrix such that: this.matrix = this.matrix * matrix
   * @public
   *
   * @param {Matrix4} matrix
   */
  append(matrix) {
    assert && assert(checkMatrix(matrix), 'Matrix has NaNs, non-finite values, or isn\'t a matrix!');
    this.matrix.multiplyMatrix(matrix);

    // set flags and notify
    this.invalidate();
  }

  /**
   * Like prepend(), but prepends the other transform's matrix.
   * @public
   *
   * @param {Transform4} transform
   */
  prependTransform(transform) {
    this.prepend(transform.matrix);
  }

  /**
   * Like append(), but appends the other transform's matrix.
   * @public
   *
   * @param {Transform4} transform
   */
  appendTransform(transform) {
    this.append(transform.matrix);
  }

  /**
   * Sets the transform of a Canvas context to be equivalent to the 2D affine part of this transform.
   * @public
   *
   * @param {CanvasRenderingContext2D} context
   */
  applyToCanvasContext(context) {
    context.setTransform(this.matrix.m00(), this.matrix.m10(), this.matrix.m01(), this.matrix.m11(), this.matrix.m03(), this.matrix.m13());
  }

  /*---------------------------------------------------------------------------*
   * getters
   *---------------------------------------------------------------------------*/

  /**
   * Creates a copy of this transform.
   * @public
   *
   * @returns {Transform4}
   */
  copy() {
    const transform = new Transform4(this.matrix);
    transform.inverse = this.inverse;
    transform.matrixTransposed = this.matrixTransposed;
    transform.inverseTransposed = this.inverseTransposed;
    transform.inverseValid = this.inverseValid;
    transform.transposeValid = this.transposeValid;
    transform.inverseTransposeValid = this.inverseTransposeValid;
  }

  /**
   * Returns the primary matrix of this transform.
   * @public
   *
   * @returns {Matrix4}
   */
  getMatrix() {
    return this.matrix;
  }

  /**
   * Returns the inverse of the primary matrix of this transform.
   * @public
   *
   * @returns {Matrix4}
   */
  getInverse() {
    if (!this.inverseValid) {
      this.inverseValid = true;
      this.inverse.set(this.matrix);
      this.inverse.invert();
    }
    return this.inverse;
  }

  /**
   * Returns the transpose of the primary matrix of this transform.
   * @public
   *
   * @returns {Matrix4}
   */
  getMatrixTransposed() {
    if (!this.transposeValid) {
      this.transposeValid = true;
      this.matrixTransposed.set(this.matrix);
      this.matrixTransposed.transpose();
    }
    return this.matrixTransposed;
  }

  /**
   * Returns the inverse of the transpose of matrix of this transform.
   * @public
   *
   * @returns {Matrix4}
   */
  getInverseTransposed() {
    if (!this.inverseTransposeValid) {
      this.inverseTransposeValid = true;
      this.inverseTransposed.set(this.getInverse()); // triggers inverse to be valid
      this.inverseTransposed.transpose();
    }
    return this.inverseTransposed;
  }

  /**
   * Returns whether our primary matrix is known to be an identity matrix. If false is returned, it doesn't necessarily
   * mean our matrix isn't an identity matrix, just that it is unlikely in normal usage.
   * @public
   *
   * @returns {boolean}
   */
  isIdentity() {
    return this.matrix.type === js_Matrix4.Types.IDENTITY;
  }

  /**
   * Returns whether any components of our primary matrix are either infinite or NaN.
   * @public
   *
   * @returns {boolean}
   */
  isFinite() {
    return this.matrix.isFinite();
  }

  /*---------------------------------------------------------------------------*
   * forward transforms (for Vector3 or scalar)
   *---------------------------------------------------------------------------*/

  /**
   * Transforms a 3-dimensional vector like it is a point with a position (translation is applied).
   * @public
   *
   * For an affine matrix $M$, the result is the homogeneous multiplication $M\begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix}$.
   *
   * @param {Vector3} v
   * @returns {Vector3}
   */
  transformPosition3(v) {
    return this.matrix.timesVector3(v);
  }

  /**
   * Transforms a 3-dimensional vector like position is irrelevant (translation is not applied).
   * @public
   *
   * @param {Vector3} v
   * @returns {Vector3}
   */
  transformDelta3(v) {
    return this.matrix.timesRelativeVector3(v);
  }

  /**
   * Transforms a 3-dimensional vector like it is a normal to a surface (so that the surface is transformed, and the new
   * normal to the surface at the transformed point is returned).
   * @public
   *
   * @param {Vector3} v
   * @returns {Vector3}
   */
  transformNormal3(v) {
    return this.getInverse().timesTransposeVector3(v);
  }

  /**
   * Returns the x-coordinate difference for two transformed vectors, which add the x-coordinate difference of the input
   * x (and same y,z values) beforehand.
   * @public
   *
   * @param {number} x
   * @returns {number}
   */
  transformDeltaX(x) {
    return this.transformDelta3(new Vector3(x, 0, 0)).x;
  }

  /**
   * Returns the y-coordinate difference for two transformed vectors, which add the y-coordinate difference of the input
   * y (and same x,z values) beforehand.
   * @public
   *
   * @param {number} y
   * @returns {number}
   */
  transformDeltaY(y) {
    return this.transformDelta3(new Vector3(0, y, 0)).y;
  }

  /**
   * Returns the z-coordinate difference for two transformed vectors, which add the z-coordinate difference of the input
   * z (and same x,y values) beforehand.
   * @public
   *
   * @param {number} z
   * @returns {number}
   */
  transformDeltaZ(z) {
    return this.transformDelta3(new Vector3(0, 0, z)).z;
  }

  /**
   * Returns a transformed ray.
   * @public
   *
   * @param {Ray3} ray
   * @returns {Ray3}
   */
  transformRay(ray) {
    return new Ray3(this.transformPosition3(ray.position), this.transformPosition3(ray.position.plus(ray.direction)).minus(this.transformPosition3(ray.position)));
  }

  /*---------------------------------------------------------------------------*
   * inverse transforms (for Vector3 or scalar)
   *---------------------------------------------------------------------------*/

  /**
   * Transforms a 3-dimensional vector by the inverse of our transform like it is a point with a position (translation is applied).
   * @public
   *
   * For an affine matrix $M$, the result is the homogeneous multiplication $M^{-1}\begin{bmatrix} x \\ y \\ z \\ 1 \end{bmatrix}$.
   *
   * This is the inverse of transformPosition3().
   *
   * @param {Vector3} v
   * @returns {Vector3}
   */
  inversePosition3(v) {
    return this.getInverse().timesVector3(v);
  }

  /**
   * Transforms a 3-dimensional vector by the inverse of our transform like position is irrelevant (translation is not applied).
   * @public
   *
   * This is the inverse of transformDelta3().
   *
   * @param {Vector3} v
   * @returns {Vector3}
   */
  inverseDelta3(v) {
    // inverse actually has the translation rolled into the other coefficients, so we have to make this longer
    return this.inversePosition3(v).minus(this.inversePosition3(Vector3.ZERO));
  }

  /**
   * Transforms a 3-dimensional vector by the inverse of our transform like it is a normal to a curve (so that the
   * curve is transformed, and the new normal to the curve at the transformed point is returned).
   * @public
   *
   * This is the inverse of transformNormal3().
   *
   * @param {Vector3} v
   * @returns {Vector3}
   */
  inverseNormal3(v) {
    return this.matrix.timesTransposeVector3(v);
  }

  /**
   * Returns the x-coordinate difference for two inverse-transformed vectors, which add the x-coordinate difference of the input
   * x (and same y,z values) beforehand.
   * @public
   *
   * This is the inverse of transformDeltaX().
   *
   * @param {number} x
   * @returns {number}
   */
  inverseDeltaX(x) {
    return this.inverseDelta3(new Vector3(x, 0, 0)).x;
  }

  /**
   * Returns the y-coordinate difference for two inverse-transformed vectors, which add the y-coordinate difference of the input
   * y (and same x,z values) beforehand.
   * @public
   *
   * This is the inverse of transformDeltaY().
   *
   * @param {number} y
   * @returns {number}
   */
  inverseDeltaY(y) {
    return this.inverseDelta3(new Vector3(0, y, 0)).y;
  }

  /**
   * Returns the z-coordinate difference for two inverse-transformed vectors, which add the z-coordinate difference of the input
   * z (and same x,y values) beforehand.
   * @public
   *
   * This is the inverse of transformDeltaZ().
   *
   * @param {number} z
   * @returns {number}
   */
  inverseDeltaZ(z) {
    return this.inverseDelta3(new Vector3(0, 0, z)).z;
  }

  /**
   * Returns an inverse-transformed ray.
   * @public
   *
   * This is the inverse of transformRay()
   *
   * @param {Ray3} ray
   * @returns {Ray3}
   */
  inverseRay(ray) {
    return new Ray3(this.inversePosition3(ray.position), this.inversePosition3(ray.position.plus(ray.direction)).minus(this.inversePosition3(ray.position)));
  }
}
js_dot.register('Transform4', Transform4);
/* harmony default export */ const js_Transform4 = ((/* unused pure expression or super */ null && (Transform4)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUaW55RW1pdHRlciIsImRvdCIsIk1hdHJpeDQiLCJSYXkzIiwiVmVjdG9yMyIsInNjcmF0Y2hNYXRyaXgiLCJjaGVja01hdHJpeCIsIm1hdHJpeCIsImlzRmluaXRlIiwiVHJhbnNmb3JtNCIsImNvbnN0cnVjdG9yIiwiSURFTlRJVFkiLCJjb3B5IiwiaW52ZXJzZSIsIm1hdHJpeFRyYW5zcG9zZWQiLCJpbnZlcnNlVHJhbnNwb3NlZCIsImludmVyc2VWYWxpZCIsInRyYW5zcG9zZVZhbGlkIiwiaW52ZXJzZVRyYW5zcG9zZVZhbGlkIiwiY2hhbmdlRW1pdHRlciIsInNldE1hdHJpeCIsImFzc2VydCIsInNldCIsImludmFsaWRhdGUiLCJlbWl0IiwicHJlcGVuZCIsIm11bHRpcGx5TWF0cml4IiwiYXBwZW5kIiwicHJlcGVuZFRyYW5zZm9ybSIsInRyYW5zZm9ybSIsImFwcGVuZFRyYW5zZm9ybSIsImFwcGx5VG9DYW52YXNDb250ZXh0IiwiY29udGV4dCIsInNldFRyYW5zZm9ybSIsIm0wMCIsIm0xMCIsIm0wMSIsIm0xMSIsIm0wMyIsIm0xMyIsImdldE1hdHJpeCIsImdldEludmVyc2UiLCJpbnZlcnQiLCJnZXRNYXRyaXhUcmFuc3Bvc2VkIiwidHJhbnNwb3NlIiwiZ2V0SW52ZXJzZVRyYW5zcG9zZWQiLCJpc0lkZW50aXR5IiwidHlwZSIsIlR5cGVzIiwidHJhbnNmb3JtUG9zaXRpb24zIiwidiIsInRpbWVzVmVjdG9yMyIsInRyYW5zZm9ybURlbHRhMyIsInRpbWVzUmVsYXRpdmVWZWN0b3IzIiwidHJhbnNmb3JtTm9ybWFsMyIsInRpbWVzVHJhbnNwb3NlVmVjdG9yMyIsInRyYW5zZm9ybURlbHRhWCIsIngiLCJ0cmFuc2Zvcm1EZWx0YVkiLCJ5IiwidHJhbnNmb3JtRGVsdGFaIiwieiIsInRyYW5zZm9ybVJheSIsInJheSIsInBvc2l0aW9uIiwicGx1cyIsImRpcmVjdGlvbiIsIm1pbnVzIiwiaW52ZXJzZVBvc2l0aW9uMyIsImludmVyc2VEZWx0YTMiLCJaRVJPIiwiaW52ZXJzZU5vcm1hbDMiLCJpbnZlcnNlRGVsdGFYIiwiaW52ZXJzZURlbHRhWSIsImludmVyc2VEZWx0YVoiLCJpbnZlcnNlUmF5IiwicmVnaXN0ZXIiXSwic291cmNlcyI6WyJUcmFuc2Zvcm00LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG4vKipcbiAqIEZvcndhcmQgYW5kIGludmVyc2UgdHJhbnNmb3JtcyB3aXRoIDR4NCBtYXRyaWNlcywgYWxsb3dpbmcgZmxleGliaWxpdHkgaW5jbHVkaW5nIGFmZmluZSBhbmQgcGVyc3BlY3RpdmUgdHJhbnNmb3JtYXRpb25zLlxuICpcbiAqIE1ldGhvZHMgc3RhcnRpbmcgd2l0aCAndHJhbnNmb3JtJyB3aWxsIGFwcGx5IHRoZSB0cmFuc2Zvcm0gZnJvbSBvdXJcbiAqIHByaW1hcnkgbWF0cml4LCB3aGlsZSBtZXRob2RzIHN0YXJ0aW5nIHdpdGggJ2ludmVyc2UnIHdpbGwgYXBwbHkgdGhlIHRyYW5zZm9ybSBmcm9tIHRoZSBpbnZlcnNlIG9mIG91ciBtYXRyaXguXG4gKlxuICogR2VuZXJhbGx5LCB0aGlzIG1lYW5zIHRyYW5zZm9ybS5pbnZlcnNlVGhpbmcoIHRyYW5zZm9ybS50cmFuc2Zvcm1UaGluZyggdGhpbmcgKSApLmVxdWFscyggdGhpbmcgKS5cbiAqXG4gKiBAYXV0aG9yIEpvbmF0aGFuIE9sc29uIDxqb25hdGhhbi5vbHNvbkBjb2xvcmFkby5lZHU+XG4gKi9cblxuaW1wb3J0IFRpbnlFbWl0dGVyIGZyb20gJy4uLy4uL2F4b24vanMvVGlueUVtaXR0ZXIuanMnO1xuaW1wb3J0IGRvdCBmcm9tICcuL2RvdC5qcyc7XG5pbXBvcnQgTWF0cml4NCBmcm9tICcuL01hdHJpeDQuanMnO1xuaW1wb3J0IFJheTMgZnJvbSAnLi9SYXkzLmpzJztcbmltcG9ydCBWZWN0b3IzIGZyb20gJy4vVmVjdG9yMy5qcyc7XG5cbmNvbnN0IHNjcmF0Y2hNYXRyaXggPSBuZXcgTWF0cml4NCgpO1xuXG4vKipcbiAqIGNoZWNrIGlmIHRoZSBtYXRyaXggaXMgRmluaXRlIGFuZCBpcyBvZiB0eXBlIE1hdHJpeDRcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0gbWF0cml4XG4gKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAqL1xuZnVuY3Rpb24gY2hlY2tNYXRyaXgoIG1hdHJpeCApIHtcbiAgcmV0dXJuICggbWF0cml4IGluc3RhbmNlb2YgTWF0cml4NCApICYmIG1hdHJpeC5pc0Zpbml0ZSgpO1xufVxuXG5jbGFzcyBUcmFuc2Zvcm00IHtcbiAgLyoqXG4gICAqIENyZWF0ZXMgYSB0cmFuc2Zvcm0gYmFzZWQgYXJvdW5kIGFuIGluaXRpYWwgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4NH0gbWF0cml4XG4gICAqL1xuICBjb25zdHJ1Y3RvciggbWF0cml4ICkge1xuXG4gICAgLy8gQHByaXZhdGUge01hdHJpeDR9IC0gVGhlIHByaW1hcnkgbWF0cml4IHVzZWQgZm9yIHRoZSB0cmFuc2Zvcm1cbiAgICB0aGlzLm1hdHJpeCA9IE1hdHJpeDQuSURFTlRJVFkuY29weSgpO1xuXG4gICAgLy8gQHByaXZhdGUge01hdHJpeDR9IC0gVGhlIGludmVyc2Ugb2YgdGhlIHByaW1hcnkgbWF0cml4LCBjb21wdXRlZCBsYXppbHlcbiAgICB0aGlzLmludmVyc2UgPSBNYXRyaXg0LklERU5USVRZLmNvcHkoKTtcblxuICAgIC8vIEBwcml2YXRlIHtNYXRyaXg0fSAtIFRoZSB0cmFuc3Bvc2Ugb2YgdGhlIHByaW1hcnkgbWF0cml4LCBjb21wdXRlZCBsYXppbHlcbiAgICB0aGlzLm1hdHJpeFRyYW5zcG9zZWQgPSBNYXRyaXg0LklERU5USVRZLmNvcHkoKTtcblxuICAgIC8vIEBwcml2YXRlIHtNYXRyaXg0fSAtIFRoZSBpbnZlcnNlIG9mIHRoZSB0cmFuc3Bvc2VkIHByaW1hcnkgbWF0cml4LCBjb21wdXRlZCBsYXppbHlcbiAgICB0aGlzLmludmVyc2VUcmFuc3Bvc2VkID0gTWF0cml4NC5JREVOVElUWS5jb3B5KCk7XG5cblxuICAgIC8vIEBwcml2YXRlIHtib29sZWFufSAtIFdoZXRoZXIgdGhpcy5pbnZlcnNlIGhhcyBiZWVuIGNvbXB1dGVkIGJhc2VkIG9uIHRoZSBsYXRlc3QgcHJpbWFyeSBtYXRyaXhcbiAgICB0aGlzLmludmVyc2VWYWxpZCA9IHRydWU7XG5cbiAgICAvLyBAcHJpdmF0ZSB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoaXMubWF0cml4VHJhbnNwb3NlZCBoYXMgYmVlbiBjb21wdXRlZCBiYXNlZCBvbiB0aGUgbGF0ZXN0IHByaW1hcnkgbWF0cml4XG4gICAgdGhpcy50cmFuc3Bvc2VWYWxpZCA9IHRydWU7XG5cbiAgICAvLyBAcHJpdmF0ZSB7Ym9vbGVhbn0gLSBXaGV0aGVyIHRoaXMuaW52ZXJzZVRyYW5zcG9zZWQgaGFzIGJlZW4gY29tcHV0ZWQgYmFzZWQgb24gdGhlIGxhdGVzdCBwcmltYXJ5IG1hdHJpeFxuICAgIHRoaXMuaW52ZXJzZVRyYW5zcG9zZVZhbGlkID0gdHJ1ZTtcblxuICAgIC8vIEBwdWJsaWMge1RpbnlFbWl0dGVyfVxuICAgIHRoaXMuY2hhbmdlRW1pdHRlciA9IG5ldyBUaW55RW1pdHRlcigpO1xuXG4gICAgaWYgKCBtYXRyaXggKSB7XG4gICAgICB0aGlzLnNldE1hdHJpeCggbWF0cml4ICk7XG4gICAgfVxuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIG11dGF0b3JzXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogU2V0cyB0aGUgdmFsdWUgb2YgdGhlIHByaW1hcnkgbWF0cml4IGRpcmVjdGx5IGZyb20gYSBNYXRyaXg0LiBEb2VzIG5vdCBjaGFuZ2UgdGhlIE1hdHJpeDQgaW5zdGFuY2Ugb2YgdGhpc1xuICAgKiBUcmFuc2Zvcm00LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4NH0gbWF0cml4XG4gICAqL1xuICBzZXRNYXRyaXgoIG1hdHJpeCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjaGVja01hdHJpeCggbWF0cml4ICksICdNYXRyaXggaGFzIE5hTnMsIG5vbi1maW5pdGUgdmFsdWVzLCBvciBpc25cXCd0IGEgbWF0cml4IScgKTtcblxuICAgIC8vIGNvcHkgdGhlIG1hdHJpeCBvdmVyIHRvIG91ciBtYXRyaXhcbiAgICB0aGlzLm1hdHJpeC5zZXQoIG1hdHJpeCApO1xuXG4gICAgLy8gc2V0IGZsYWdzIGFuZCBub3RpZnlcbiAgICB0aGlzLmludmFsaWRhdGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgb3VyIGludGVybmFsIG1hdHJpeCBpcyBjaGFuZ2VkLiBJdCBtYXJrcyB0aGUgb3RoZXIgZGVwZW5kZW50IG1hdHJpY2VzIGFzIGludmFsaWQsXG4gICAqIGFuZCBzZW5kcyBvdXQgbm90aWZpY2F0aW9ucyBvZiB0aGUgY2hhbmdlLlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgaW52YWxpZGF0ZSgpIHtcbiAgICAvLyBzYW5pdHkgY2hlY2tcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCB0aGlzLm1hdHJpeC5pc0Zpbml0ZSgpICk7XG5cbiAgICAvLyBkZXBlbmRlbnQgbWF0cmljZXMgbm93IGludmFsaWRcbiAgICB0aGlzLmludmVyc2VWYWxpZCA9IGZhbHNlO1xuICAgIHRoaXMudHJhbnNwb3NlVmFsaWQgPSBmYWxzZTtcbiAgICB0aGlzLmludmVyc2VUcmFuc3Bvc2VWYWxpZCA9IGZhbHNlO1xuXG4gICAgdGhpcy5jaGFuZ2VFbWl0dGVyLmVtaXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNb2RpZmllcyB0aGUgcHJpbWFyeSBtYXRyaXggc3VjaCB0aGF0OiB0aGlzLm1hdHJpeCA9IG1hdHJpeCAqIHRoaXMubWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4NH0gbWF0cml4XG4gICAqL1xuICBwcmVwZW5kKCBtYXRyaXggKSB7XG4gICAgYXNzZXJ0ICYmIGFzc2VydCggY2hlY2tNYXRyaXgoIG1hdHJpeCApLCAnTWF0cml4IGhhcyBOYU5zLCBub24tZmluaXRlIHZhbHVlcywgb3IgaXNuXFwndCBhIG1hdHJpeCEnICk7XG5cbiAgICAvLyBJbiB0aGUgYWJzZW5jZSBvZiBhIHByZXBlbmQtbXVsdGlwbHkgZnVuY3Rpb24gaW4gTWF0cml4NCwgY29weSBvdmVyIHRvIGEgc2NyYXRjaCBtYXRyaXggaW5zdGVhZFxuICAgIC8vIFRPRE86IGltcGxlbWVudCBhIHByZXBlbmQtbXVsdGlwbHkgZGlyZWN0bHkgaW4gTWF0cml4NCBmb3IgYSBwZXJmb3JtYW5jZSBpbmNyZWFzZVxuICAgIHNjcmF0Y2hNYXRyaXguc2V0KCB0aGlzLm1hdHJpeCApO1xuICAgIHRoaXMubWF0cml4LnNldCggbWF0cml4ICk7XG4gICAgdGhpcy5tYXRyaXgubXVsdGlwbHlNYXRyaXgoIHNjcmF0Y2hNYXRyaXggKTtcblxuICAgIC8vIHNldCBmbGFncyBhbmQgbm90aWZ5XG4gICAgdGhpcy5pbnZhbGlkYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogTW9kaWZpZXMgdGhlIHByaW1hcnkgbWF0cml4IHN1Y2ggdGhhdDogdGhpcy5tYXRyaXggPSB0aGlzLm1hdHJpeCAqIG1hdHJpeFxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7TWF0cml4NH0gbWF0cml4XG4gICAqL1xuICBhcHBlbmQoIG1hdHJpeCApIHtcbiAgICBhc3NlcnQgJiYgYXNzZXJ0KCBjaGVja01hdHJpeCggbWF0cml4ICksICdNYXRyaXggaGFzIE5hTnMsIG5vbi1maW5pdGUgdmFsdWVzLCBvciBpc25cXCd0IGEgbWF0cml4IScgKTtcblxuICAgIHRoaXMubWF0cml4Lm11bHRpcGx5TWF0cml4KCBtYXRyaXggKTtcblxuICAgIC8vIHNldCBmbGFncyBhbmQgbm90aWZ5XG4gICAgdGhpcy5pbnZhbGlkYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBwcmVwZW5kKCksIGJ1dCBwcmVwZW5kcyB0aGUgb3RoZXIgdHJhbnNmb3JtJ3MgbWF0cml4LlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7VHJhbnNmb3JtNH0gdHJhbnNmb3JtXG4gICAqL1xuICBwcmVwZW5kVHJhbnNmb3JtKCB0cmFuc2Zvcm0gKSB7XG4gICAgdGhpcy5wcmVwZW5kKCB0cmFuc2Zvcm0ubWF0cml4ICk7XG4gIH1cblxuICAvKipcbiAgICogTGlrZSBhcHBlbmQoKSwgYnV0IGFwcGVuZHMgdGhlIG90aGVyIHRyYW5zZm9ybSdzIG1hdHJpeC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1RyYW5zZm9ybTR9IHRyYW5zZm9ybVxuICAgKi9cbiAgYXBwZW5kVHJhbnNmb3JtKCB0cmFuc2Zvcm0gKSB7XG4gICAgdGhpcy5hcHBlbmQoIHRyYW5zZm9ybS5tYXRyaXggKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXRzIHRoZSB0cmFuc2Zvcm0gb2YgYSBDYW52YXMgY29udGV4dCB0byBiZSBlcXVpdmFsZW50IHRvIHRoZSAyRCBhZmZpbmUgcGFydCBvZiB0aGlzIHRyYW5zZm9ybS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge0NhbnZhc1JlbmRlcmluZ0NvbnRleHQyRH0gY29udGV4dFxuICAgKi9cbiAgYXBwbHlUb0NhbnZhc0NvbnRleHQoIGNvbnRleHQgKSB7XG4gICAgY29udGV4dC5zZXRUcmFuc2Zvcm0oIHRoaXMubWF0cml4Lm0wMCgpLCB0aGlzLm1hdHJpeC5tMTAoKSwgdGhpcy5tYXRyaXgubTAxKCksIHRoaXMubWF0cml4Lm0xMSgpLCB0aGlzLm1hdHJpeC5tMDMoKSwgdGhpcy5tYXRyaXgubTEzKCkgKTtcbiAgfVxuXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKlxuICAgKiBnZXR0ZXJzXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogQ3JlYXRlcyBhIGNvcHkgb2YgdGhpcyB0cmFuc2Zvcm0uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge1RyYW5zZm9ybTR9XG4gICAqL1xuICBjb3B5KCkge1xuICAgIGNvbnN0IHRyYW5zZm9ybSA9IG5ldyBUcmFuc2Zvcm00KCB0aGlzLm1hdHJpeCApO1xuXG4gICAgdHJhbnNmb3JtLmludmVyc2UgPSB0aGlzLmludmVyc2U7XG4gICAgdHJhbnNmb3JtLm1hdHJpeFRyYW5zcG9zZWQgPSB0aGlzLm1hdHJpeFRyYW5zcG9zZWQ7XG4gICAgdHJhbnNmb3JtLmludmVyc2VUcmFuc3Bvc2VkID0gdGhpcy5pbnZlcnNlVHJhbnNwb3NlZDtcblxuICAgIHRyYW5zZm9ybS5pbnZlcnNlVmFsaWQgPSB0aGlzLmludmVyc2VWYWxpZDtcbiAgICB0cmFuc2Zvcm0udHJhbnNwb3NlVmFsaWQgPSB0aGlzLnRyYW5zcG9zZVZhbGlkO1xuICAgIHRyYW5zZm9ybS5pbnZlcnNlVHJhbnNwb3NlVmFsaWQgPSB0aGlzLmludmVyc2VUcmFuc3Bvc2VWYWxpZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBwcmltYXJ5IG1hdHJpeCBvZiB0aGlzIHRyYW5zZm9ybS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7TWF0cml4NH1cbiAgICovXG4gIGdldE1hdHJpeCgpIHtcbiAgICByZXR1cm4gdGhpcy5tYXRyaXg7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgaW52ZXJzZSBvZiB0aGUgcHJpbWFyeSBtYXRyaXggb2YgdGhpcyB0cmFuc2Zvcm0uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge01hdHJpeDR9XG4gICAqL1xuICBnZXRJbnZlcnNlKCkge1xuICAgIGlmICggIXRoaXMuaW52ZXJzZVZhbGlkICkge1xuICAgICAgdGhpcy5pbnZlcnNlVmFsaWQgPSB0cnVlO1xuXG4gICAgICB0aGlzLmludmVyc2Uuc2V0KCB0aGlzLm1hdHJpeCApO1xuICAgICAgdGhpcy5pbnZlcnNlLmludmVydCgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbnZlcnNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHRyYW5zcG9zZSBvZiB0aGUgcHJpbWFyeSBtYXRyaXggb2YgdGhpcyB0cmFuc2Zvcm0uXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHJldHVybnMge01hdHJpeDR9XG4gICAqL1xuICBnZXRNYXRyaXhUcmFuc3Bvc2VkKCkge1xuICAgIGlmICggIXRoaXMudHJhbnNwb3NlVmFsaWQgKSB7XG4gICAgICB0aGlzLnRyYW5zcG9zZVZhbGlkID0gdHJ1ZTtcblxuICAgICAgdGhpcy5tYXRyaXhUcmFuc3Bvc2VkLnNldCggdGhpcy5tYXRyaXggKTtcbiAgICAgIHRoaXMubWF0cml4VHJhbnNwb3NlZC50cmFuc3Bvc2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMubWF0cml4VHJhbnNwb3NlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoZSB0cmFuc3Bvc2Ugb2YgbWF0cml4IG9mIHRoaXMgdHJhbnNmb3JtLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEByZXR1cm5zIHtNYXRyaXg0fVxuICAgKi9cbiAgZ2V0SW52ZXJzZVRyYW5zcG9zZWQoKSB7XG4gICAgaWYgKCAhdGhpcy5pbnZlcnNlVHJhbnNwb3NlVmFsaWQgKSB7XG4gICAgICB0aGlzLmludmVyc2VUcmFuc3Bvc2VWYWxpZCA9IHRydWU7XG5cbiAgICAgIHRoaXMuaW52ZXJzZVRyYW5zcG9zZWQuc2V0KCB0aGlzLmdldEludmVyc2UoKSApOyAvLyB0cmlnZ2VycyBpbnZlcnNlIHRvIGJlIHZhbGlkXG4gICAgICB0aGlzLmludmVyc2VUcmFuc3Bvc2VkLnRyYW5zcG9zZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5pbnZlcnNlVHJhbnNwb3NlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHdoZXRoZXIgb3VyIHByaW1hcnkgbWF0cml4IGlzIGtub3duIHRvIGJlIGFuIGlkZW50aXR5IG1hdHJpeC4gSWYgZmFsc2UgaXMgcmV0dXJuZWQsIGl0IGRvZXNuJ3QgbmVjZXNzYXJpbHlcbiAgICogbWVhbiBvdXIgbWF0cml4IGlzbid0IGFuIGlkZW50aXR5IG1hdHJpeCwganVzdCB0aGF0IGl0IGlzIHVubGlrZWx5IGluIG5vcm1hbCB1c2FnZS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzSWRlbnRpdHkoKSB7XG4gICAgcmV0dXJuIHRoaXMubWF0cml4LnR5cGUgPT09IE1hdHJpeDQuVHlwZXMuSURFTlRJVFk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB3aGV0aGVyIGFueSBjb21wb25lbnRzIG9mIG91ciBwcmltYXJ5IG1hdHJpeCBhcmUgZWl0aGVyIGluZmluaXRlIG9yIE5hTi5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cbiAgICovXG4gIGlzRmluaXRlKCkge1xuICAgIHJldHVybiB0aGlzLm1hdHJpeC5pc0Zpbml0ZSgpO1xuICB9XG5cbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0qXG4gICAqIGZvcndhcmQgdHJhbnNmb3JtcyAoZm9yIFZlY3RvcjMgb3Igc2NhbGFyKVxuICAgKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSovXG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybXMgYSAzLWRpbWVuc2lvbmFsIHZlY3RvciBsaWtlIGl0IGlzIGEgcG9pbnQgd2l0aCBhIHBvc2l0aW9uICh0cmFuc2xhdGlvbiBpcyBhcHBsaWVkKS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBGb3IgYW4gYWZmaW5lIG1hdHJpeCAkTSQsIHRoZSByZXN1bHQgaXMgdGhlIGhvbW9nZW5lb3VzIG11bHRpcGxpY2F0aW9uICRNXFxiZWdpbntibWF0cml4fSB4IFxcXFwgeSBcXFxcIHogXFxcXCAxIFxcZW5ke2JtYXRyaXh9JC5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IzfVxuICAgKi9cbiAgdHJhbnNmb3JtUG9zaXRpb24zKCB2ICkge1xuICAgIHJldHVybiB0aGlzLm1hdHJpeC50aW1lc1ZlY3RvcjMoIHYgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUcmFuc2Zvcm1zIGEgMy1kaW1lbnNpb25hbCB2ZWN0b3IgbGlrZSBwb3NpdGlvbiBpcyBpcnJlbGV2YW50ICh0cmFuc2xhdGlvbiBpcyBub3QgYXBwbGllZCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IzfVxuICAgKi9cbiAgdHJhbnNmb3JtRGVsdGEzKCB2ICkge1xuICAgIHJldHVybiB0aGlzLm1hdHJpeC50aW1lc1JlbGF0aXZlVmVjdG9yMyggdiApO1xuICB9XG5cbiAgLyoqXG4gICAqIFRyYW5zZm9ybXMgYSAzLWRpbWVuc2lvbmFsIHZlY3RvciBsaWtlIGl0IGlzIGEgbm9ybWFsIHRvIGEgc3VyZmFjZSAoc28gdGhhdCB0aGUgc3VyZmFjZSBpcyB0cmFuc2Zvcm1lZCwgYW5kIHRoZSBuZXdcbiAgICogbm9ybWFsIHRvIHRoZSBzdXJmYWNlIGF0IHRoZSB0cmFuc2Zvcm1lZCBwb2ludCBpcyByZXR1cm5lZCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IzfVxuICAgKi9cbiAgdHJhbnNmb3JtTm9ybWFsMyggdiApIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnZlcnNlKCkudGltZXNUcmFuc3Bvc2VWZWN0b3IzKCB2ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgeC1jb29yZGluYXRlIGRpZmZlcmVuY2UgZm9yIHR3byB0cmFuc2Zvcm1lZCB2ZWN0b3JzLCB3aGljaCBhZGQgdGhlIHgtY29vcmRpbmF0ZSBkaWZmZXJlbmNlIG9mIHRoZSBpbnB1dFxuICAgKiB4IChhbmQgc2FtZSB5LHogdmFsdWVzKSBiZWZvcmVoYW5kLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIEBwYXJhbSB7bnVtYmVyfSB4XG4gICAqIEByZXR1cm5zIHtudW1iZXJ9XG4gICAqL1xuICB0cmFuc2Zvcm1EZWx0YVgoIHggKSB7XG4gICAgcmV0dXJuIHRoaXMudHJhbnNmb3JtRGVsdGEzKCBuZXcgVmVjdG9yMyggeCwgMCwgMCApICkueDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSB5LWNvb3JkaW5hdGUgZGlmZmVyZW5jZSBmb3IgdHdvIHRyYW5zZm9ybWVkIHZlY3RvcnMsIHdoaWNoIGFkZCB0aGUgeS1jb29yZGluYXRlIGRpZmZlcmVuY2Ugb2YgdGhlIGlucHV0XG4gICAqIHkgKGFuZCBzYW1lIHgseiB2YWx1ZXMpIGJlZm9yZWhhbmQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIHRyYW5zZm9ybURlbHRhWSggeSApIHtcbiAgICByZXR1cm4gdGhpcy50cmFuc2Zvcm1EZWx0YTMoIG5ldyBWZWN0b3IzKCAwLCB5LCAwICkgKS55O1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIHotY29vcmRpbmF0ZSBkaWZmZXJlbmNlIGZvciB0d28gdHJhbnNmb3JtZWQgdmVjdG9ycywgd2hpY2ggYWRkIHRoZSB6LWNvb3JkaW5hdGUgZGlmZmVyZW5jZSBvZiB0aGUgaW5wdXRcbiAgICogeiAoYW5kIHNhbWUgeCx5IHZhbHVlcykgYmVmb3JlaGFuZC5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge251bWJlcn0gelxuICAgKiBAcmV0dXJucyB7bnVtYmVyfVxuICAgKi9cbiAgdHJhbnNmb3JtRGVsdGFaKCB6ICkge1xuICAgIHJldHVybiB0aGlzLnRyYW5zZm9ybURlbHRhMyggbmV3IFZlY3RvcjMoIDAsIDAsIHogKSApLno7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhIHRyYW5zZm9ybWVkIHJheS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBAcGFyYW0ge1JheTN9IHJheVxuICAgKiBAcmV0dXJucyB7UmF5M31cbiAgICovXG4gIHRyYW5zZm9ybVJheSggcmF5ICkge1xuICAgIHJldHVybiBuZXcgUmF5MyhcbiAgICAgIHRoaXMudHJhbnNmb3JtUG9zaXRpb24zKCByYXkucG9zaXRpb24gKSxcbiAgICAgIHRoaXMudHJhbnNmb3JtUG9zaXRpb24zKCByYXkucG9zaXRpb24ucGx1cyggcmF5LmRpcmVjdGlvbiApICkubWludXMoIHRoaXMudHJhbnNmb3JtUG9zaXRpb24zKCByYXkucG9zaXRpb24gKSApICk7XG4gIH1cblxuICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSpcbiAgICogaW52ZXJzZSB0cmFuc2Zvcm1zIChmb3IgVmVjdG9yMyBvciBzY2FsYXIpXG4gICAqLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIDMtZGltZW5zaW9uYWwgdmVjdG9yIGJ5IHRoZSBpbnZlcnNlIG9mIG91ciB0cmFuc2Zvcm0gbGlrZSBpdCBpcyBhIHBvaW50IHdpdGggYSBwb3NpdGlvbiAodHJhbnNsYXRpb24gaXMgYXBwbGllZCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogRm9yIGFuIGFmZmluZSBtYXRyaXggJE0kLCB0aGUgcmVzdWx0IGlzIHRoZSBob21vZ2VuZW91cyBtdWx0aXBsaWNhdGlvbiAkTV57LTF9XFxiZWdpbntibWF0cml4fSB4IFxcXFwgeSBcXFxcIHogXFxcXCAxIFxcZW5ke2JtYXRyaXh9JC5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1Qb3NpdGlvbjMoKS5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IzfVxuICAgKi9cbiAgaW52ZXJzZVBvc2l0aW9uMyggdiApIHtcbiAgICByZXR1cm4gdGhpcy5nZXRJbnZlcnNlKCkudGltZXNWZWN0b3IzKCB2ICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIDMtZGltZW5zaW9uYWwgdmVjdG9yIGJ5IHRoZSBpbnZlcnNlIG9mIG91ciB0cmFuc2Zvcm0gbGlrZSBwb3NpdGlvbiBpcyBpcnJlbGV2YW50ICh0cmFuc2xhdGlvbiBpcyBub3QgYXBwbGllZCkuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1EZWx0YTMoKS5cbiAgICpcbiAgICogQHBhcmFtIHtWZWN0b3IzfSB2XG4gICAqIEByZXR1cm5zIHtWZWN0b3IzfVxuICAgKi9cbiAgaW52ZXJzZURlbHRhMyggdiApIHtcbiAgICAvLyBpbnZlcnNlIGFjdHVhbGx5IGhhcyB0aGUgdHJhbnNsYXRpb24gcm9sbGVkIGludG8gdGhlIG90aGVyIGNvZWZmaWNpZW50cywgc28gd2UgaGF2ZSB0byBtYWtlIHRoaXMgbG9uZ2VyXG4gICAgcmV0dXJuIHRoaXMuaW52ZXJzZVBvc2l0aW9uMyggdiApLm1pbnVzKCB0aGlzLmludmVyc2VQb3NpdGlvbjMoIFZlY3RvcjMuWkVSTyApICk7XG4gIH1cblxuICAvKipcbiAgICogVHJhbnNmb3JtcyBhIDMtZGltZW5zaW9uYWwgdmVjdG9yIGJ5IHRoZSBpbnZlcnNlIG9mIG91ciB0cmFuc2Zvcm0gbGlrZSBpdCBpcyBhIG5vcm1hbCB0byBhIGN1cnZlIChzbyB0aGF0IHRoZVxuICAgKiBjdXJ2ZSBpcyB0cmFuc2Zvcm1lZCwgYW5kIHRoZSBuZXcgbm9ybWFsIHRvIHRoZSBjdXJ2ZSBhdCB0aGUgdHJhbnNmb3JtZWQgcG9pbnQgaXMgcmV0dXJuZWQpLlxuICAgKiBAcHVibGljXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIGludmVyc2Ugb2YgdHJhbnNmb3JtTm9ybWFsMygpLlxuICAgKlxuICAgKiBAcGFyYW0ge1ZlY3RvcjN9IHZcbiAgICogQHJldHVybnMge1ZlY3RvcjN9XG4gICAqL1xuICBpbnZlcnNlTm9ybWFsMyggdiApIHtcbiAgICByZXR1cm4gdGhpcy5tYXRyaXgudGltZXNUcmFuc3Bvc2VWZWN0b3IzKCB2ICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgeC1jb29yZGluYXRlIGRpZmZlcmVuY2UgZm9yIHR3byBpbnZlcnNlLXRyYW5zZm9ybWVkIHZlY3RvcnMsIHdoaWNoIGFkZCB0aGUgeC1jb29yZGluYXRlIGRpZmZlcmVuY2Ugb2YgdGhlIGlucHV0XG4gICAqIHggKGFuZCBzYW1lIHkseiB2YWx1ZXMpIGJlZm9yZWhhbmQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1EZWx0YVgoKS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHhcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGludmVyc2VEZWx0YVgoIHggKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52ZXJzZURlbHRhMyggbmV3IFZlY3RvcjMoIHgsIDAsIDAgKSApLng7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgeS1jb29yZGluYXRlIGRpZmZlcmVuY2UgZm9yIHR3byBpbnZlcnNlLXRyYW5zZm9ybWVkIHZlY3RvcnMsIHdoaWNoIGFkZCB0aGUgeS1jb29yZGluYXRlIGRpZmZlcmVuY2Ugb2YgdGhlIGlucHV0XG4gICAqIHkgKGFuZCBzYW1lIHgseiB2YWx1ZXMpIGJlZm9yZWhhbmQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1EZWx0YVkoKS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHlcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGludmVyc2VEZWx0YVkoIHkgKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52ZXJzZURlbHRhMyggbmV3IFZlY3RvcjMoIDAsIHksIDAgKSApLnk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgei1jb29yZGluYXRlIGRpZmZlcmVuY2UgZm9yIHR3byBpbnZlcnNlLXRyYW5zZm9ybWVkIHZlY3RvcnMsIHdoaWNoIGFkZCB0aGUgei1jb29yZGluYXRlIGRpZmZlcmVuY2Ugb2YgdGhlIGlucHV0XG4gICAqIHogKGFuZCBzYW1lIHgseSB2YWx1ZXMpIGJlZm9yZWhhbmQuXG4gICAqIEBwdWJsaWNcbiAgICpcbiAgICogVGhpcyBpcyB0aGUgaW52ZXJzZSBvZiB0cmFuc2Zvcm1EZWx0YVooKS5cbiAgICpcbiAgICogQHBhcmFtIHtudW1iZXJ9IHpcbiAgICogQHJldHVybnMge251bWJlcn1cbiAgICovXG4gIGludmVyc2VEZWx0YVooIHogKSB7XG4gICAgcmV0dXJuIHRoaXMuaW52ZXJzZURlbHRhMyggbmV3IFZlY3RvcjMoIDAsIDAsIHogKSApLno7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBhbiBpbnZlcnNlLXRyYW5zZm9ybWVkIHJheS5cbiAgICogQHB1YmxpY1xuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBpbnZlcnNlIG9mIHRyYW5zZm9ybVJheSgpXG4gICAqXG4gICAqIEBwYXJhbSB7UmF5M30gcmF5XG4gICAqIEByZXR1cm5zIHtSYXkzfVxuICAgKi9cbiAgaW52ZXJzZVJheSggcmF5ICkge1xuICAgIHJldHVybiBuZXcgUmF5MyhcbiAgICAgIHRoaXMuaW52ZXJzZVBvc2l0aW9uMyggcmF5LnBvc2l0aW9uICksXG4gICAgICB0aGlzLmludmVyc2VQb3NpdGlvbjMoIHJheS5wb3NpdGlvbi5wbHVzKCByYXkuZGlyZWN0aW9uICkgKS5taW51cyggdGhpcy5pbnZlcnNlUG9zaXRpb24zKCByYXkucG9zaXRpb24gKSApXG4gICAgKTtcbiAgfVxufVxuXG5kb3QucmVnaXN0ZXIoICdUcmFuc2Zvcm00JywgVHJhbnNmb3JtNCApO1xuXG5leHBvcnQgZGVmYXVsdCBUcmFuc2Zvcm00OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsT0FBT0EsV0FBVyxNQUFNLDhCQUE4QjtBQUN0RCxPQUFPQyxHQUFHLE1BQU0sVUFBVTtBQUMxQixPQUFPQyxPQUFPLE1BQU0sY0FBYztBQUNsQyxPQUFPQyxJQUFJLE1BQU0sV0FBVztBQUM1QixPQUFPQyxPQUFPLE1BQU0sY0FBYztBQUVsQyxNQUFNQyxhQUFhLEdBQUcsSUFBSUgsT0FBTyxFQUFFOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTSSxXQUFXQSxDQUFFQyxNQUFNLEVBQUc7RUFDN0IsT0FBU0EsTUFBTSxZQUFZTCxPQUFPLElBQU1LLE1BQU0sQ0FBQ0MsUUFBUSxFQUFFO0FBQzNEO0FBRUEsTUFBTUMsVUFBVSxDQUFDO0VBQ2Y7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ0VDLFdBQVdBLENBQUVILE1BQU0sRUFBRztJQUVwQjtJQUNBLElBQUksQ0FBQ0EsTUFBTSxHQUFHTCxPQUFPLENBQUNTLFFBQVEsQ0FBQ0MsSUFBSSxFQUFFOztJQUVyQztJQUNBLElBQUksQ0FBQ0MsT0FBTyxHQUFHWCxPQUFP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
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/main.js
// Copyright 2013-2022, University of Colorado Boulder




































/* harmony default export */ const dot_js_main = ((/* unused pure expression or super */ null && (dot)));
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkb3QiXSwic291cmNlcyI6WyJtYWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIENvcHlyaWdodCAyMDEzLTIwMjIsIFVuaXZlcnNpdHkgb2YgQ29sb3JhZG8gQm91bGRlclxuXG5cbmltcG9ydCAnLi9CaW5QYWNrZXIuanMnO1xuaW1wb3J0ICcuL0JvdW5kczIuanMnO1xuaW1wb3J0ICcuL0JvdW5kczMuanMnO1xuaW1wb3J0ICcuL0NvbWJpbmF0aW9uLmpzJztcbmltcG9ydCAnLi9Db21wbGV0ZVBpZWNld2lzZUxpbmVhckZ1bmN0aW9uLmpzJztcbmltcG9ydCAnLi9Db21wbGV4LmpzJztcbmltcG9ydCAnLi9Db252ZXhIdWxsMi5qcyc7XG5pbXBvcnQgJy4vRGFtcGVkSGFybW9uaWMuanMnO1xuaW1wb3J0ICcuL0RlbGF1bmF5VHJpYW5ndWxhdGlvbi5qcyc7XG5pbXBvcnQgJy4vRGltZW5zaW9uMi5qcyc7XG5pbXBvcnQgZG90IGZyb20gJy4vZG90LmpzJztcbmltcG9ydCAnLi9FaWdlbnZhbHVlRGVjb21wb3NpdGlvbi5qcyc7XG5pbXBvcnQgJy4vTGluZWFyRnVuY3Rpb24uanMnO1xuaW1wb3J0ICcuL0xVRGVjb21wb3NpdGlvbi5qcyc7XG5pbXBvcnQgJy4vTWF0cml4LmpzJztcbmltcG9ydCAnLi9NYXRyaXgzLmpzJztcbmltcG9ydCAnLi9NYXRyaXg0LmpzJztcbmltcG9ydCAnLi9NYXRyaXhPcHMzLmpzJztcbmltcG9ydCAnLi9QZXJtdXRhdGlvbi5qcyc7XG5pbXBvcnQgJy4vUGxhbmUzLmpzJztcbmltcG9ydCAnLi9RUkRlY29tcG9zaXRpb24uanMnO1xuaW1wb3J0ICcuL1F1YXRlcm5pb24uanMnO1xuaW1wb3J0ICcuL1JhbmRvbS5qcyc7XG5pbXBvcnQgJy4vUmFuZ2UuanMnO1xuaW1wb3J0ICcuL1JheTIuanMnO1xuaW1wb3J0ICcuL1JheTMuanMnO1xuaW1wb3J0ICcuL1JlY3RhbmdsZS5qcyc7XG5pbXBvcnQgJy4vU2luZ3VsYXJWYWx1ZURlY29tcG9zaXRpb24uanMnO1xuaW1wb3J0ICcuL1NwaGVyZTMuanMnO1xuaW1wb3J0ICcuL1RyYW5zZm9ybTMuanMnO1xuaW1wb3J0ICcuL1RyYW5zZm9ybTQuanMnO1xuaW1wb3J0ICcuL1V0aWxzLmpzJztcbmltcG9ydCAnLi9WZWN0b3IyLmpzJztcbmltcG9ydCAnLi9WZWN0b3IzLmpzJztcbmltcG9ydCAnLi9WZWN0b3I0LmpzJztcblxuZXhwb3J0IGRlZmF1bHQgZG90OyJdLCJtYXBwaW5ncyI6IkFBQUE7O0FBR0EsT0FBTyxnQkFBZ0I7QUFDdkIsT0FBTyxjQUFjO0FBQ3JCLE9BQU8sY0FBYztBQUNyQixPQUFPLGtCQUFrQjtBQUN6QixPQUFPLHNDQUFzQztBQUM3QyxPQUFPLGNBQWM7QUFDckIsT0FBTyxrQkFBa0I7QUFDekIsT0FBTyxxQkFBcUI7QUFDNUIsT0FBTyw0QkFBNEI7QUFDbkMsT0FBTyxpQkFBaUI7QUFDeEIsT0FBT0EsR0FBRyxNQUFNLFVBQVU7QUFDMUIsT0FBTyw4QkFBOEI7QUFDckMsT0FBTyxxQkFBcUI7QUFDNUIsT0FBTyxzQkFBc0I7QUFDN0IsT0FBTyxhQUFhO0FBQ3BCLE9BQU8sY0FBYztBQUNyQixPQUFPLGNBQWM7QUFDckIsT0FBTyxpQkFBaUI7QUFDeEIsT0FBTyxrQkFBa0I7QUFDekIsT0FBTyxhQUFhO0FBQ3BCLE9BQU8sc0JBQXNCO0FBQzdCLE9BQU8saUJBQWlCO0FBQ3hCLE9BQU8sYUFBYTtBQUNwQixPQUFPLFlBQVk7QUFDbkIsT0FBTyxXQUFXO0FBQ2xCLE9BQU8sV0FBVztBQUNsQixPQUFPLGdCQUFnQjtBQUN2QixPQUFPLGlDQUFpQztBQUN4QyxPQUFPLGNBQWM7QUFDckIsT0FBTyxpQkFBaUI7QUFDeEIsT0FBTyxpQkFBaUI7QUFDeEIsT0FBTyxZQUFZO0FBQ25CLE9BQU8sY0FBYztBQUNyQixPQUFPLGNBQWM7QUFDckIsT0FBTyxjQUFjO0FBRXJCLGVBQWVBLEdBQUcifQ==
;// CONCATENATED MODULE: ../chipper/dist/js/dot/js/dot-main.js
// Copyright 2016-2023, University of Colorado Boulder




if (!window.hasOwnProperty('_')) {
  throw new Error('Underscore/Lodash not found: _');
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3aW5kb3ciLCJoYXNPd25Qcm9wZXJ0eSIsIkVycm9yIl0sInNvdXJjZXMiOlsiZG90LW1haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gQ29weXJpZ2h0IDIwMTYtMjAyMywgVW5pdmVyc2l0eSBvZiBDb2xvcmFkbyBCb3VsZGVyXG5cbmltcG9ydCAnLi4vLi4vYXhvbi9qcy9tYWluLmpzJztcbmltcG9ydCAnLi4vLi4vcGhldC1jb3JlL2pzL21haW4uanMnO1xuaW1wb3J0ICcuL21haW4uanMnO1xuXG5pZiAoICF3aW5kb3cuaGFzT3duUHJvcGVydHkoICdfJyApICkge1xuICB0aHJvdyBuZXcgRXJyb3IoICdVbmRlcnNjb3JlL0xvZGFzaCBub3QgZm91bmQ6IF8nICk7XG59XG4iXSwibWFwcGluZ3MiOiJBQUFBOztBQUVBLE9BQU8sdUJBQXVCO0FBQzlCLE9BQU8sNEJBQTRCO0FBQ25DLE9BQU8sV0FBVztBQUVsQixJQUFLLENBQUNBLE1BQU0sQ0FBQ0MsY0FBYyxDQUFFLEdBQUcsQ0FBRSxFQUFHO0VBQ25DLE1BQU0sSUFBSUMsS0FBSyxDQUFFLGdDQUFnQyxDQUFFO0FBQ3JEIn0=
})();

/******/ })()
;
}());